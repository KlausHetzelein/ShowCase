function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},FWf1:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n("pshJ"),s=n("GiSu"),o=n("zB/H"),u=n("p//D"),c=n("n3uD"),l=n("MkmW"),d=function(e){function t(n,r,i){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=s.empty;break;case 1:if(!n){a.destination=s.empty;break}if("object"==typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new h(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new h(a,n,r,i)}return a}return i(t,e),t.prototype[u.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.Subscription);t.Subscriber=d;var h=function(e){function t(t,n,r,i){var o,u=e.call(this)||this;u._parentSubscriber=t;var c=u;return a.isFunction(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==s.empty&&(c=Object.create(n),a.isFunction(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=o,u._error=r,u._complete=i,u}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw n;l.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(l.hostReportError(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(d);t.SafeSubscriber=h},GMZp:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,n){"use strict";var r=n("n3uD"),i=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(r.config.useDeprecatedSynchronousErrorHandling)throw e;i.hostReportError(e)},complete:function(){}}},Gp9u:function(e,t){},LBXl:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},MkmW:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},mbIT:function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},n3uD:function(e,t,n){"use strict";var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"p//D":function(e,t,n){"use strict";t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},pshJ:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},"s3+Z":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n("FWf1");t.takeWhile=function(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.inclusive))},e}(),o=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(a.Subscriber)},"zB/H":function(e,t,n){"use strict";var r=n("mbIT"),i=n("GMZp"),a=n("pshJ"),s=n("LBXl");function o(e){return e.reduce((function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,u=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var l=0;l<n.length;++l)n[l].remove(this);if(a.isFunction(u))try{u.call(this)}catch(f){t=f instanceof s.UnsubscriptionError?o(f.errors):[f]}if(r.isArray(c)){l=-1;for(var d=c.length;++l<d;){var h=c[l];if(i.isObject(h))try{h.unsubscribe()}catch(f){t=t||[],f instanceof s.UnsubscriptionError?t=t.concat(o(f.errors)):t.push(f)}}}if(t)throw new s.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var i=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function s(e){setTimeout((function(){throw e}),0)}var o={closed:!0,next:function(e){},error:function(e){if(a.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete:function(){}},u=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!==e&&"object"==typeof e}var l,d=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),h=((l=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,a=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(r(i))try{i.call(this)}catch(g){t=g instanceof d?f(g.errors):[g]}if(u(a))for(var o=-1,l=a.length;++o<l;){var h=a[o];if(c(h))try{h.unsubscribe()}catch(g){t=t||[],g instanceof d?t=t.concat(f(g.errors)):t.push(g)}}if(t)throw new d(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new l),l);function f(e){return e.reduce((function(e,t){return e.concat(t instanceof d?t.errors:t)}),[])}var g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;switch(_classCallCheck(this,n),(a=t.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o;break;case 1:if(!e){a.destination=o;break}if("object"==typeof e){e instanceof n?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(_assertThisInitialized(a))):(a.syncErrorThrowable=!0,a.destination=new p(_assertThisInitialized(a),e));break}default:a.syncErrorThrowable=!0,a.destination=new p(_assertThisInitialized(a),e,r,i)}return a}return _createClass(n,[{key:g,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var i=new n(e,t,r);return i.syncErrorThrowable=!1,i}}]),n}(h),p=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,a,s){var u,c;_classCallCheck(this,n),(u=t.call(this))._parentSubscriber=e;var l=_assertThisInitialized(u);return r(i)?c=i:i&&(c=i.next,a=i.error,s=i.complete,i!==o&&(r((l=Object.create(i)).unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(_assertThisInitialized(u)))),u._context=l,u._next=c,u._error=a,u._complete=s,u}return _createClass(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(s(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(v),m="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(e){return e}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b(t)}function b(e){return 0===e.length?y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var _,w=((_=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof v)return e;if(e[g])return e[g]()}return e||t||n?new v(e,t,n):new v(o)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof v?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=C(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:m,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:b(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=C(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new _(e)},_);function C(e){if(e||(e=a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var O,I=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),S=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(h),x=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).destination=e,r}return n}(v),A=((O=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:g,value:function(){return new x(this)}},{key:"lift",value:function(e){var t=new R(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new I;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new I;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new I;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new I;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new I;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new S(this,e))}},{key:"asObservable",value:function(){var e=new w;return e.source=this,e}}]),n}(w)).create=function(e,t){return new R(e,t)},O),R=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).destination=e,i.source=r,i}return _createClass(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):h.EMPTY}}]),n}(A);function U(e){return e&&"function"==typeof e.schedule}var P=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this)).parent=e,a.outerValue=r,a.outerIndex=i,a.index=0,a}return _createClass(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(v),T=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var E="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",F=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function N(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var D=function(e){if(e&&"function"==typeof e[m])return r=e,function(e){var t=r[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(F(e))return T(e);if(N(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,s),e};if(e&&"function"==typeof e[E])return t=e,function(e){for(var n=t[E]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=c(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(i," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function z(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new P(e,n,r);if(!i.closed)return t instanceof w?t.subscribe(i):D(t)(i)}var V=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(v);function B(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new L(e,t))}}var L=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new j(e,this.project,this.thisArg))}}]),e}(),j=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e)).project=r,a.count=0,a.thisArg=i||_assertThisInitialized(a),a}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(v);function H(e,t){return new w((function(n){var r=new h,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function G(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new w((function(n){var r=new h;return r.add(t.schedule((function(){var i=e[m]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(N(e))return function(e,t){return new w((function(n){var r=new h;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(F(e))return H(e,t);if(function(e){return e&&"function"==typeof e[E]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new w((function(n){var r,i=new h;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[E](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(a){return void n.error(a)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof w?e:new w(D(e))}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(W((function(n,r){return G(e(n,r)).pipe(B((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new q(e,n))})}var q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new K(e,this.project,this.concurrent))}}]),e}(),K=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new P(this,t,n),i=this.destination;i.add(r);var a=z(this,e,void 0,void 0,r);a!==r&&i.add(a)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(V);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return W(y,e)}function $(e,t){return t?H(e,t):new w(T(e))}function J(){return function(e){return e.lift(new Y(e))}}var Q,Y=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new X(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),X=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(v),ee={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h).add(this.source.subscribe(new te(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}},{key:"refCount",value:function(){return J()(this)}}]),n}(w).prototype)._subscribe},_isComplete:{value:Q._isComplete,writable:!0},getSubject:{value:Q.getSubject},connect:{value:Q.connect},refCount:{value:Q.refCount}},te=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(x);function ne(){return new A}function re(e){return{toString:e}.toString()}function ie(e,t,n){return re((function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=_construct(i,t);return s.annotation=a,s;function s(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}))}var ae=ie("Inject",(function(e){return{token:e}})),se=ie("Optional"),oe=ie("Self"),ue=ie("SkipSelf"),ce=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function le(e){for(var t in e)if(e[t]===le)return t;throw Error("Could not find renamed property on target object.")}function de(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fe(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function ge(e){return ve(e,e[me])||ve(e,e[be])}function ve(e,t){return t&&t.token===e?t:null}function pe(e){return e&&(e.hasOwnProperty(ye)||e.hasOwnProperty(_e))?e[ye]:null}var me=le({"\u0275prov":le}),ye=le({"\u0275inj":le}),ke=le({"\u0275provFallback":le}),be=le({ngInjectableDef:le}),_e=le({ngInjectorDef:le});function we(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(we).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ce(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var Oe=le({__forward_ref__:le});function Ie(e){return e.__forward_ref__=Ie,e.toString=function(){return we(this())},e}function Se(e){return xe(e)?e():e}function xe(e){return"function"==typeof e&&e.hasOwnProperty(Oe)&&e.__forward_ref__===Ie}var Ae,Re="undefined"!=typeof globalThis&&globalThis,Ue="undefined"!=typeof window&&window,Pe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Te="undefined"!=typeof global&&global,Me=Re||Te||Ue||Pe,Ee=le({"\u0275cmp":le}),Fe=le({"\u0275dir":le}),Ne=le({"\u0275pipe":le}),De=le({"\u0275mod":le}),ze=le({"\u0275loc":le}),Ve=le({"\u0275fac":le}),Be=le({__NG_ELEMENT_ID__:le}),Le=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=he({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),e}(),je=new Le("INJECTOR",-1),He={},Ge=/\n/gm,We=le({provide:String,useValue:le}),qe=void 0;function Ke(e){var t=qe;return qe=e,t}function Ze(e){var t=Ae;return Ae=e,t}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default;if(void 0===qe)throw new Error("inject() must be called from an injection context");return null===qe?Qe(e,void 0,t):qe.get(e,t&ce.Optional?null:void 0,t)}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default;return(Ae||$e)(Se(e),t)}function Qe(e,t,n){var r=ge(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ce.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(we(e),"]"))}function Ye(e){for(var t=[],n=0;n<e.length;n++){var r=Se(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=ce.Default,s=0;s<r.length;s++){var o=r[s];o instanceof se||"Optional"===o.ngMetadataName||o===se?a|=ce.Optional:o instanceof ue||"SkipSelf"===o.ngMetadataName||o===ue?a|=ce.SkipSelf:o instanceof oe||"Self"===o.ngMetadataName||o===oe?a|=ce.Self:i=o instanceof ae||o===ae?o.token:o}t.push(Je(i,a))}else t.push(Je(r))}return t}var Xe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;if(t===He){var n=new Error("NullInjectorError: No provider for ".concat(we(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),et=function e(){_classCallCheck(this,e)},tt=function e(){_classCallCheck(this,e)};function nt(e,t){e.forEach((function(e){return Array.isArray(e)?nt(e,t):t(e)}))}function rt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function it(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function at(e,t){var n=st(e,t);if(n>=0)return e[1|n]}function st(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),s=e[a<<1];if(t===s)return a<<1;s>t?i=a:r=a+1}return~(i<<1)}(e,t)}var ot=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),ut=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ct={},lt=[],dt=0;function ht(e){return re((function(){var t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===ot.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||lt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ut.Emulated,id:"c",styles:e.styles||lt,_:null,setInput:null,schemas:e.schemas||null,tView:null},a=e.directives,s=e.features,o=e.pipes;return i.id+=dt++,i.inputs=mt(e.inputs,r),i.outputs=mt(e.outputs),s&&s.forEach((function(e){return e(i)})),i.directiveDefs=a?function(){return("function"==typeof a?a():a).map(ft)}:null,i.pipeDefs=o?function(){return("function"==typeof o?o():o).map(gt)}:null,i}))}function ft(e){return kt(e)||function(e){return e[Fe]||null}(e)}function gt(e){return function(e){return e[Ne]||null}(e)}var vt={};function pt(e){var t={type:e.type,bootstrap:e.bootstrap||lt,declarations:e.declarations||lt,imports:e.imports||lt,exports:e.exports||lt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&re((function(){vt[e.id]=e.type})),t}function mt(e,t){if(null==e)return ct;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var yt=ht;function kt(e){return e[Ee]||null}function bt(e,t){return e.hasOwnProperty(Ve)?e[Ve]:null}function _t(e,t){var n=e[De]||null;if(!n&&!0===t)throw new Error("Type ".concat(we(e)," does not have '\u0275mod' property."));return n}function wt(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ct(e){return Array.isArray(e)&&!0===e[1]}function Ot(e){return 0!=(8&e.flags)}function It(e){return 2==(2&e.flags)}function St(e){return 1==(1&e.flags)}function xt(e){return null!==e.template}function At(e){return 0!=(512&e[2])}var Rt=void 0;function Ut(e){return!!e.listen}var Pt={createRenderer:function(e,t){return void 0!==Rt?Rt:"undefined"!=typeof document?document:void 0}};function Tt(e){for(;Array.isArray(e);)e=e[0];return e}function Mt(e,t){return Tt(t[e+20])}function Et(e,t){return Tt(t[e.index])}function Ft(e,t){return e.data[t+20]}function Nt(e,t){var n=t[e];return wt(n)?n:n[0]}function Dt(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function zt(e){return 128==(128&e[2])}function Vt(e,t){return null===e||null==t?null:e[t]}function Bt(e){e[18]=0}function Lt(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var jt={lFrame:cn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ht(){return jt.bindingsEnabled}function Gt(){return jt.lFrame.lView}function Wt(){return jt.lFrame.tView}function qt(e){jt.lFrame.contextLView=e}function Kt(){return jt.lFrame.previousOrParentTNode}function Zt(e,t){jt.lFrame.previousOrParentTNode=e,jt.lFrame.isParent=t}function $t(){return jt.lFrame.isParent}function Jt(){return jt.checkNoChangesMode}function Qt(e){jt.checkNoChangesMode=e}function Yt(){var e=jt.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Xt(){return jt.lFrame.bindingIndex}function en(){return jt.lFrame.bindingIndex++}function tn(e){var t=jt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function nn(e,t){var n=jt.lFrame;n.bindingIndex=n.bindingRootIndex=e,rn(t)}function rn(e){jt.lFrame.currentDirectiveIndex=e}function an(e){jt.lFrame.currentQueryIndex=e}function sn(e,t){var n=un();jt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function on(e,t){var n=un(),r=e[1];jt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function un(){var e=jt.lFrame,t=null===e?null:e.child;return null===t?cn(e):t}function cn(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function ln(){var e=jt.lFrame;return jt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var dn=ln;function hn(){var e=ln();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function fn(){return jt.lFrame.selectedIndex}function gn(e){jt.lFrame.selectedIndex=e}function vn(){var e=jt.lFrame;return Ft(e.tView,e.selectedIndex)}function pn(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n];i.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,i.afterContentInit),i.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,i.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i.afterContentChecked)),i.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,i.afterViewInit),i.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,i.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i.afterViewChecked)),null!=i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,i.onDestroy)}}function mn(e,t,n){bn(e,t,3,n)}function yn(e,t,n,r){(3&e[2])===n&&bn(e,t,n,r)}function kn(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function bn(e,t,n,r){for(var i=null!=r?r:-1,a=0,s=void 0!==r?65535&e[18]:0;s<t.length;s++)if("number"==typeof t[s+1]){if(a=t[s],null!=r&&a>=r)break}else t[s]<0&&(e[18]+=65536),(a<i||-1==i)&&(_n(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function _n(e,t,n,r){var i=n[r]<0,a=n[r+1],s=e[i?-n[r]:n[r]];i?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,a.call(s)):a.call(s)}var wn=function e(t,n,r){_classCallCheck(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Cn(e,t,n){for(var r=Ut(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var s=n[i++],o=n[i++],u=n[i++];r?e.setAttribute(t,o,u,s):t.setAttributeNS(s,o,u)}else{var c=a,l=n[++i];In(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function On(e){return 3===e||4===e||6===e}function In(e){return 64===e.charCodeAt(0)}function Sn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||xn(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function xn(e,t,n,r,i){var a=0,s=e.length;if(-1===t)s=-1;else for(;a<e.length;){var o=e[a++];if("number"==typeof o){if(o===t){s=-1;break}if(o>t){s=a-1;break}}}for(;a<e.length;){var u=e[a];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==s&&(e.splice(s,0,t),a=s+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function An(e){return-1!==e}function Rn(e){return 32767&e}function Un(e){return e>>16}function Pn(e,t){for(var n=Un(e),r=t;n>0;)r=r[15],n--;return r}function Tn(e){return"string"==typeof e?e:null==e?"":""+e}function Mn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Tn(e)}var En=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Me);function Fn(e){return e instanceof Function?e():e}var Nn=!0;function Dn(e){var t=Nn;return Nn=e,t}var zn=0;function Vn(e,t){var n=Ln(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Bn(r.data,e),Bn(t,null),Bn(r.blueprint,null));var i=jn(e,t),a=e.injectorIndex;if(An(i))for(var s=Rn(i),o=Pn(i,t),u=o[1].data,c=0;c<8;c++)t[a+c]=o[s+c]|u[s+c];return t[a+8]=i,a}function Bn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ln(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function jn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],r=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Hn(e,t,n){!function(e,t,n){var r="string"!=typeof n?n[Be]:n.charCodeAt(0)||0;null==r&&(r=n[Be]=zn++);var i=255&r,a=1<<i,s=64&i,o=32&i,u=t.data;128&i?s?o?u[e+7]|=a:u[e+6]|=a:o?u[e+5]|=a:u[e+4]|=a:s?o?u[e+3]|=a:u[e+2]|=a:o?u[e+1]|=a:u[e]|=a}(e,t,n)}function Gn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[Be];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof a){sn(t,e);try{var s=a();if(null!=s||r&ce.Optional)return s;throw new Error("No provider for ".concat(Mn(n),"!"))}finally{dn()}}else if("number"==typeof a){if(-1===a)return new Jn(e,t);var o=null,u=Ln(e,t),c=-1,l=r&ce.Host?t[16][6]:null;for((-1===u||r&ce.SkipSelf)&&(c=-1===u?jn(e,t):t[u+8],$n(r,!1)?(o=t[1],u=Rn(c),t=Pn(c,t)):u=-1);-1!==u;){c=t[u+8];var d=t[1];if(Zn(a,u,d.data)){var h=qn(u,t,n,o,r,l);if(h!==Wn)return h}$n(r,t[1].data[u+8]===l)&&Zn(a,u,t)?(o=d,u=Rn(c),t=Pn(c,t)):u=-1}}}if(r&ce.Optional&&void 0===i&&(i=null),0==(r&(ce.Self|ce.Host))){var f=t[9],g=Ze(void 0);try{return f?f.get(n,i,r&ce.Optional):Qe(n,i,r&ce.Optional)}finally{Ze(g)}}if(r&ce.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(Mn(n),"]"))}var Wn={};function qn(e,t,n,r,i,a){var s=t[1],o=s.data[e+8],u=function(e,t,n,r,i){for(var a=e.providerIndexes,s=t.data,o=65535&a,u=e.directiveStart,c=a>>16,l=i?o+c:e.directiveEnd,d=r?o:o+c;d<l;d++){var h=s[d];if(d<u&&n===h||d>=u&&h.type===n)return d}if(i){var f=s[u];if(f&&xt(f)&&f.type===n)return u}return null}(o,s,n,null==r?It(o)&&Nn:r!=s&&3===o.type,i&ce.Host&&a===o);return null!==u?Kn(t,s,u,o):Wn}function Kn(e,t,n,r){var i=e[n],a=t.data;if(i instanceof wn){var s=i;if(s.resolving)throw new Error("Circular dep for "+Mn(a[n]));var o,u=Dn(s.canSeeViewProviders);s.resolving=!0,s.injectImpl&&(o=Ze(s.injectImpl)),sn(e,r);try{i=e[n]=s.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.onChanges,i=t.onInit,a=t.doCheck;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,i),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a))}(n,a[n],t)}finally{s.injectImpl&&Ze(o),Dn(u),s.resolving=!1,dn()}}return i}function Zn(e,t,n){var r=64&e,i=32&e;return!!((128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t])&1<<e)}function $n(e,t){return!(e&ce.Self||e&ce.Host&&t)}var Jn=function(){function e(t,n){_classCallCheck(this,e),this._tNode=t,this._lView=n}return _createClass(e,[{key:"get",value:function(e,t){return Gn(this._tNode,this._lView,e,void 0,t)}}]),e}();function Qn(e){return re((function(){var t=Object.getPrototypeOf(e.prototype).constructor,n=t[Ve]||function e(t){var n=t;if(xe(t))return function(){var t=e(Se(n));return t?t():null};var r=bt(n);if(null===r){var i=pe(n);r=i&&i.factory}return r||null}(t);return null!==n?n:function(e){return new e}}))}function Yn(e){return e.ngDebugContext}function Xn(e){return e.ngOriginalError}function er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var tr=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||er}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Yn(e)?Yn(e):this._findContext(Xn(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Xn(e);t&&Xn(t);)t=Xn(t);return t}}]),e}(),nr=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),e}();function rr(e){return e instanceof nr?e.changingThisBreaksApplicationSecurity:e}var ir=!0,ar=!1;function sr(){return ar=!0,ir}var or=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ur=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,cr=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();function lr(e){var t,n,r=(t=Gt())&&t[12];return r?r.sanitize(cr.URL,e)||"":function(e,t){var n=function(e){return e instanceof nr&&e.getTypeName()||null}(e);if(null!=n&&"URL"!==n){if("ResourceURL"===n)return!0;throw new Error("Required a safe ".concat("URL",", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return"URL"===n}(e)?rr(e):(n=Tn(e),(n=String(n)).match(or)||n.match(ur)?n:(sr()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(n," (see http://g.co/ng/security#xss)")),"unsafe:"+n))}function dr(e,t){e.__ngContext__=t}function hr(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function fr(){throw new Error("Cannot mix multi providers and regular providers")}function gr(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}function vr(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==gr((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function pr(e){return 0===e.type&&"ng-template"!==e.tagName}function mr(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function yr(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(On(e[t]))return t;return e.length}(i),s=!1,o=0;o<t.length;o++){var u=t[o];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!mr(e,u,n)||""===u&&1===t.length){if(kr(r))return!1;s=!0}}else{var c=8&r?u:t[++o];if(8&r&&null!==e.attrs){if(!vr(e.attrs,c,n)){if(kr(r))return!1;s=!0}continue}var l=br(8&r?"class":u,i,pr(e),n);if(-1===l){if(kr(r))return!1;s=!0;continue}if(""!==c){var d;d=l>a?"":i[l+1].toLowerCase();var h=8&r?d:null;if(h&&-1!==gr(h,c,0)||2&r&&c!==d){if(kr(r))return!1;s=!0}}}}else{if(!s&&!kr(r)&&!kr(u))return!1;if(s&&kr(u))continue;s=!1,r=u|1&r}}return kr(r)||s}function kr(e){return 0==(1&e)}function br(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var s=t[i];if(s===e)return i;if(3===s||6===s)a=!0;else{if(1===s||2===s){for(var o=t[++i];"string"==typeof o;)o=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function _r(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(yr(e,t[r],n))return!0;return!1}function wr(e,t){return e?":not("+t.trim()+")":t}function Cr(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var s=e[n];if("string"==typeof s)if(2&r){var o=e[++n];i+="["+s+(o.length>0?'="'+o+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||kr(s)||(t+=wr(a,i),i=""),r=s,a=a||!kr(r);n++}return""!==i&&(t+=wr(a,i)),t}var Or={};function Ir(e){var t=e[3];return Ct(t)?t[3]:t}function Sr(e){return Ar(e[13])}function xr(e){return Ar(e[4])}function Ar(e){for(;null!==e&&!Ct(e);)e=e[4];return e}function Rr(e){Ur(Wt(),Gt(),fn()+e,Jt())}function Ur(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&mn(t,i,n)}else{var a=e.preOrderHooks;null!==a&&yn(t,a,0,n)}gn(n)}function Pr(e,t){return e<<17|t<<2}function Tr(e){return e>>17&32767}function Mr(e){return 2|e}function Er(e){return(131068&e)>>2}function Fr(e,t){return-131069&e|t<<2}function Nr(e){return 1|e}function Dr(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1];if(-1!==a){var s=e.data[a];an(i),s.contentQueries(2,t[a],a)}}}function zr(e,t,n){return Ut(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Vr(e,t,n,r,i,a,s,o,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Bt(l),l[3]=l[15]=e,l[8]=n,l[10]=s||e&&e[10],l[11]=o||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=a,l[16]=2==t.type?e[16]:l,l}function Br(e,t,n,r,i,a){var s=n+20,o=e.data[s]||function(e,t,n,r,i,a){var s=Kt(),o=$t(),u=o?s:s&&s.parent,c=e.data[n]=$r(0,u&&u!==t?u:null,r,n,i,a);return null===e.firstChild&&(e.firstChild=c),s&&(!o||null!=s.child||null===c.parent&&2!==s.type?o||(s.next=c):s.child=c),c}(e,t,s,r,i,a);return Zt(o,!0),o}function Lr(e,t,n){on(t,t[6]);try{var r=e.viewQuery;null!==r&&mi(1,r,n);var i=e.template;null!==i&&Gr(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Dr(e,t),e.staticViewQueries&&mi(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)hi(e,t[n])}(t,a)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),s}finally{t[2]&=-5,hn()}}function jr(e,t,n,r){var i=t[2];if(256!=(256&i)){on(t,t[6]);var a=Jt();try{Bt(t),jt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Gr(e,t,n,2,r);var s=3==(3&i);if(!a)if(s){var o=e.preOrderCheckHooks;null!==o&&mn(t,o,null)}else{var u=e.preOrderHooks;null!==u&&yn(t,u,0,null),kn(t,0)}if(function(e){for(var t=Sr(e);null!==t;t=xr(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],a=i[3];0==(1024&i[2])&&Lt(a,1),i[2]|=1024}}(t),function(e){for(var t=Sr(e);null!==t;t=xr(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];zt(r)&&jr(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Dr(e,t),!a)if(s){var c=e.contentCheckHooks;null!==c&&mn(t,c)}else{var l=e.contentHooks;null!==l&&yn(t,l,1),kn(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var r=e.expandoStartIndex,i=-1,a=0;a<n.length;a++){var s=n[a];"number"==typeof s?s<=0?(gn(0-s),i=r+=9+n[++a]):r+=s:(null!==s&&(nn(r,i),s(2,t[i])),i++)}}finally{gn(-1)}}(e,t);var d=e.components;null!==d&&function(e,t){for(var n=0;n<t.length;n++)di(e,t[n])}(t,d);var h=e.viewQuery;if(null!==h&&mi(2,h,r),!a)if(s){var f=e.viewCheckHooks;null!==f&&mn(t,f)}else{var g=e.viewHooks;null!==g&&yn(t,g,2),kn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Lt(t[3],-1))}finally{hn()}}}function Hr(e,t,n,r){var i=t[10],a=!Jt(),s=4==(4&t[2]);try{a&&!s&&i.begin&&i.begin(),s&&Lr(e,t,r),jr(e,t,n,r)}finally{a&&!s&&i.end&&i.end()}}function Gr(e,t,n,r,i){var a=fn();try{gn(-1),2&r&&t.length>20&&Ur(e,t,0,Jt()),n(r,i)}finally{gn(a)}}function Wr(e,t,n){Ht()&&(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||Vn(n,t),dr(r,t);for(var s=n.initialInputs,o=i;o<a;o++){var u=e.data[o],c=xt(u);c&&oi(t,n,u);var l=Kn(t,e,o,n);dr(l,t),null!==s&&ui(0,o-i,l,u,0,s),c&&(Nt(n.index,t)[8]=l)}}(e,t,n,Et(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=e.expandoInstructions,s=e.firstCreatePass,o=n.index-20,u=jt.lFrame.currentDirectiveIndex;try{gn(o);for(var c=r;c<i;c++){var l=e.data[c],d=t[c];rn(c),null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs?ti(l,d):s&&a.push(null)}}finally{gn(-1),rn(u)}}(e,t,n))}function qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Et,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var s=r[a+1],o=-1===s?n(t,e):e[s];e[i++]=o}}function Kr(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Zr(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Zr(e,t,n,r,i,a,s,o,u,c){var l=20+r,d=l+i,h=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:Or);return n}(l,d);return h[1]={type:e,id:t,blueprint:h,template:n,queries:null,viewQuery:o,node:null,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function $r(e,t,n,r,i,a){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Jr(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Qr(e,t,n,r,i,a,s,o){var u,c,l=Et(t,n),d=t.inputs;!o&&null!=d&&(u=d[r])?(_i(e,n,u,r,i),It(t)&&function(e,t){var n=Nt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=s?s(i,t.tagName||"",r):i,Ut(a)?a.setProperty(l,r,i):In(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Yr(e,t,n,r){var i=!1;if(Ht()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var s=r[a];_r(n,s.selectors,!1)&&(i||(i=[]),Hn(Vn(n,t),e,s.type),xt(s)?(2&n.flags&&hr(n),ri(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==a){var o=0;i=!0,ai(n,e.data.length,a.length);for(var u=0;u<a.length;u++){var c=a[u];c.providersResolver&&c.providersResolver(c)}ni(e,n,a.length);for(var l=!1,d=!1,h=0;h<a.length;h++){var f=a[h];n.mergedAttrs=Sn(n.mergedAttrs,f.hostAttrs),si(e,t,f),ii(e.data.length-1,f,s),null!==f.contentQueries&&(n.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=128),!l&&(f.onChanges||f.onInit||f.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-20),l=!0),d||!f.onChanges&&!f.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-20),d=!0),Xr(e,f),o+=f.hostVars}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],s=null,o=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs,d=null===i||pr(t)?null:ci(l,i);a.push(d),s=Jr(l,u,s),o=Jr(c.outputs,u,o)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=s,t.outputs=o}(e,n),ei(e,t,o)}s&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new Error("Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,s)}return n.mergedAttrs=Sn(n.mergedAttrs,n.attrs),i}function Xr(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function ei(e,t,n){for(var r=0;r<n;r++)t.push(Or),e.blueprint.push(Or),e.data.push(null)}function ti(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ni(e,t,n){var r=20-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function ri(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ii(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;xt(t)&&(n[""]=e)}}function ai(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function si(e,t,n){e.data.push(n);var r=n.factory||(n.factory=bt(n.type)),i=new wn(r,xt(n),null);e.blueprint.push(i),t.push(i)}function oi(e,t,n){var r=Et(t,e),i=Kr(n),a=e[10],s=fi(e,Vr(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n)));e[t.index]=s}function ui(e,t,n,r,i,a){var s=a[t];if(null!==s)for(var o=r.setInput,u=0;u<s.length;){var c=s[u++],l=s[u++],d=s[u++];null!==o?r.setInput(n,d,c,l):n[l]=d}}function ci(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function li(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function di(e,t){var n=Nt(t,e);if(zt(n)){var r=n[1];80&n[2]?jr(r,n,r.template,n[8]):n[5]>0&&function e(t){for(var n=Sr(t);null!==n;n=xr(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var a=i[1];jr(a,i,a.template,i[8])}else i[5]>0&&e(i)}var s=t[1].components;if(null!==s)for(var o=0;o<s.length;o++){var u=Nt(s[o],t);zt(u)&&u[5]>0&&e(u)}}(n)}}function hi(e,t){var n=Nt(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Lr(r,n,n[8])}function fi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function gi(e){for(;e;){e[2]|=64;var t=Ir(e);if(At(e)&&!t)return e;e=t}return null}function vi(e,t,n){var r=t[10];r.begin&&r.begin();try{jr(e,t,e.template,n)}catch(i){throw bi(t,i),i}finally{r.end&&r.end()}}function pi(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Dt(n),i=r[1];Hr(i,r,i.template,n)}}(e[8])}function mi(e,t,n){an(0),t(e,n)}var yi=Promise.resolve(null);function ki(e){return e[7]||(e[7]=[])}function bi(e,t){var n=e[9],r=n?n.get(tr,null):null;r&&r.handleError(t)}function _i(e,t,n,r,i){for(var a=0;a<n.length;){var s=n[a++],o=n[a++],u=t[s],c=e.data[s];null!==c.setInput?c.setInput(u,i,r,o):u[o]=i}}function wi(e,t,n){var r=Mt(t,e),i=e[11];Ut(i)?i.setValue(r,n):r.textContent=n}function Ci(e,t){var n=t[3];return-1===e.index?Ct(n)?n:null:n}function Oi(e,t){var n=Ci(e,t);return n?Fi(t[11],n[7]):null}function Ii(e,t,n,r,i){if(null!=r){var a,s=!1;Ct(r)?a=r:wt(r)&&(s=!0,r=r[0]);var o=Tt(r);0===e&&null!==n?null==i?Mi(t,n,o):Ti(t,n,o,i||null):1===e&&null!==n?Ti(t,n,o,i||null):2===e?function(e,t,n){var r=Fi(e,t);r&&function(e,t,n,r){Ut(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,o,s):3===e&&t.destroyNode(o),null!=a&&function(e,t,n,r,i){var a=n[7];a!==Tt(n)&&Ii(t,e,r,a,i);for(var s=10;s<n.length;s++){var o=n[s];Vi(o[1],o,e,t,r,a)}}(t,e,a,n,i)}}function Si(e,t,n,r){var i=Oi(e.node,t);i&&Vi(e,t,t[11],n?1:2,i,r)}function xi(e,t){var n=e[9],r=n.indexOf(t);1024&t[2]&&Lt(t[3],-1),n.splice(r,1)}function Ai(e,t){if(!(e.length<=10)){var n=10+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&xi(i,r),t>0&&(e[n-1][4]=r[4]);var a=it(e,10+t);Si(r[1],r,!1,null);var s=a[19];null!==s&&s.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function Ri(e,t){if(!(256&t[2])){var n=t[11];Ut(n)&&n.destroyNode&&Vi(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Pi(e[1],e);for(;t;){var n=null;if(wt(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)wt(t)&&Pi(t[1],t),t=Ui(t,e);null===t&&(t=e),wt(t)&&Pi(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ui(e,t){var n;return wt(e)&&(n=e[6])&&2===n.type?Ci(n,e):e[3]===t?null:e[3]}function Pi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof wn)){var a=n[r+1];if(Array.isArray(a))for(var s=0;s<a.length;s+=2)a[s+1].call(i[a[s]]);else a.call(i)}}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var r=t[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var a=n[i+1],s="function"==typeof a?a(t):Tt(t[a]),o=r[n[i+2]],u=n[i+3];"boolean"==typeof u?s.removeEventListener(n[i],o,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&Ut(t[11])&&t[11].destroy();var r=t[17];if(null!==r&&Ct(t[3])){r!==t[3]&&xi(r,t);var i=t[19];null!==i&&i.detachView(e)}}}function Ti(e,t,n,r){Ut(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function Mi(e,t,n){Ut(e)?e.appendChild(t,n):t.appendChild(n)}function Ei(e,t,n,r){null!==r?Ti(e,t,n,r):Mi(e,t,n)}function Fi(e,t){return Ut(e)?e.parentNode(t):t.parentNode}function Ni(e,t,n,r){var i=function(e,t,n){for(var r=t.parent;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){var i=n[6];return 2===i.type?Oi(i,n):n[0]}if(t&&5===t.type&&4&t.flags)return Et(t,n).parentNode;if(2&r.flags){var a=e.data,s=a[a[r.index].directiveStart].encapsulation;if(s!==ut.ShadowDom&&s!==ut.Native)return null}return Et(r,n)}(e,r,t);if(null!=i){var a=t[11],s=function(e,t){if(2===e.type){var n=Ci(e,t);return null===n?null:Di(n.indexOf(t,10)-10,n)}return 4===e.type||5===e.type?Et(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(var o=0;o<n.length;o++)Ei(a,i,n[o],s);else Ei(a,i,n,s)}}function Di(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return function e(t,n){if(null!==n){var r=n.type;if(3===r)return Et(n,t);if(0===r)return Di(-1,t[n.index]);if(4===r||5===r){var i=n.child;if(null!==i)return e(t,i);var a=t[n.index];return Ct(a)?Di(-1,a):Tt(a)}var s=t[16],o=s[6],u=Ir(s),c=o.projection[n.projection];return null!=c?e(u,c):e(t,n.next)}return null}(r,i)}return t[7]}function zi(e,t,n,r,i,a,s){for(;null!=n;){var o=r[n.index],u=n.type;s&&0===t&&(o&&dr(Tt(o),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(zi(e,t,n.child,r,i,a,!1),Ii(t,e,i,o,a)):1===u?Bi(e,t,r,n,i,a):Ii(t,e,i,o,a)),n=s?n.projectionNext:n.next}}function Vi(e,t,n,r,i,a){zi(n,r,e.node.child,t,i,a,!1)}function Bi(e,t,n,r,i,a){var s=n[16],o=s[6].projection[r.projection];if(Array.isArray(o))for(var u=0;u<o.length;u++)Ii(t,e,i,o[u],a);else zi(e,t,o,s[3],i,a,!0)}function Li(e,t,n){Ut(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ji(e,t,n){Ut(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var Hi,Gi,Wi,qi=function(){function e(t,n){_classCallCheck(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return _createClass(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Ri(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,n,r;t=this._lView[1],r=e,ki(n=this._lView).push(r),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(n[7].length-1,null)}},{key:"markForCheck",value:function(){gi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){vi(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){Qt(!0);try{vi(e,t,n)}finally{Qt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,Vi(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var s=n[r.index];if(null!==s&&i.push(Tt(s)),Ct(s))for(var o=10;o<s.length;o++){var u=s[o],c=u[1].firstChild;null!==c&&e(u[1],u,c,i)}var l=r.type;if(4===l||5===l)e(t,n,r.child,i);else if(1===l){var d=n[16],h=d[6].projection[r.projection];if(Array.isArray(h))i.push.apply(i,_toConsumableArray(h));else{var f=Ir(d);e(f[1],f,h,i,!0)}}r=a?r.projectionNext:r.next}return i}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}(),Ki=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._view=e,r}return _createClass(n,[{key:"detectChanges",value:function(){pi(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Qt(!0);try{pi(e)}finally{Qt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(qi);function Zi(e,t,n){return Hi||(Hi=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(e)),new Hi(Et(t,n))}var $i=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ji()},e}(),Ji=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n){if(!n&&It(e)){var r=Nt(e.index,t);return new qi(r,r)}return 3===e.type||0===e.type||4===e.type||5===e.type?new qi(t[16],t):null}(Kt(),Gt(),e)},Qi=new Le("Set Injector scope."),Yi={},Xi={},ea=[],ta=void 0;function na(){return void 0===ta&&(ta=new Xe),ta}function ra(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new ia(e,n,t||na(),r)}var ia=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var s=[];n&&nt(n,(function(e){return i.processProvider(e,t,n)})),nt([t],(function(e){return i.processInjectorType(e,[],s)})),this.records.set(je,oa(void 0,this));var o=this.records.get(Qi);this.scope=null!=o?o.value:null,this.source=a||("object"==typeof t?null:we(t))}return _createClass(e,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.Default;this.assertNotDestroyed();var r,i=Ke(this);try{if(!(n&ce.SkipSelf)){var a=this.records.get(e);if(void 0===a){var s=("function"==typeof(r=e)||"object"==typeof r&&r instanceof Le)&&ge(e);a=s&&this.injectableDefInScope(s)?oa(aa(e),Yi):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&ce.Self?na():this.parent).get(e,t=n&ce.Optional&&t===He?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(we(e)),i)throw o;return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=we(t);if(Array.isArray(t))i=t.map(we).join(" -> ");else if("object"==typeof t){var a=[];for(var s in t)if(t.hasOwnProperty(s)){var o=t[s];a.push(s+":"+("string"==typeof o?JSON.stringify(o):we(o)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Ge,"\n  "))}("\n"+e.message,i,"R3InjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,0,this.source)}throw o}finally{Ke(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(we(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=Se(e)))return!1;var i=pe(e),a=null==i&&e.ngModule||void 0,s=void 0===a?e:a,o=-1!==n.indexOf(s);if(void 0!==a&&(i=pe(a)),null==i)return!1;if(null!=i.imports&&!o){var u;n.push(s);try{nt(i.imports,(function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))}))}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,i=t.providers;nt(i,(function(e){return r.processProvider(e,n,i||ea)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(s),this.records.set(s,oa(i.factory,Yi));var d=i.providers;if(null!=d&&!o){var h=e;nt(d,(function(e){return r.processProvider(e,h,d)}))}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=ca(e=Se(e))?e:Se(e&&e.provide),i=function(e,t,n){return ua(e)?oa(void 0,e.useValue):oa(sa(e,t,n),Yi)}(e,t,n);if(ca(e)||!0!==e.multi){var a=this.records.get(r);a&&void 0!==a.multi&&fr()}else{var s=this.records.get(r);s?void 0===s.multi&&fr():((s=oa(void 0,Yi,!0)).factory=function(){return Ye(s.multi)},this.records.set(r,s)),r=e,s.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===Xi?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(we(e)):t.value===Yi&&(t.value=Xi,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function aa(e){var t=ge(e),n=null!==t?t.factory:bt(e);if(null!==n)return n;var r=pe(e);if(null!==r)return r.factory;if(e instanceof Le)throw new Error("Token ".concat(we(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(we(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[me]||e[be]||e[ke]&&e[ke]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function sa(e,t,n){var r,i=void 0;if(ca(e)){var a=Se(e);return bt(a)||aa(a)}if(ua(e))i=function(){return Se(e.useValue)};else if((r=e)&&r.useFactory)i=function(){return e.useFactory.apply(e,_toConsumableArray(Ye(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return Je(Se(e.useExisting))};else{var s=Se(e&&(e.useClass||e.provide));if(s||function(e,t,n){var r="";throw e&&t&&(r=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(we(e),"'")+r)}(t,n,e),!function(e){return!!e.deps}(e))return bt(s)||aa(s);i=function(){return _construct(s,_toConsumableArray(Ye(e.deps)))}}return i}function oa(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function ua(e){return null!==e&&"object"==typeof e&&We in e}function ca(e){return"function"==typeof e}var la=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=ra(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},da=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?la(e,t,""):la(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=He,e.NULL=new Xe,e.\u0275prov=he({token:e,providedIn:"any",factory:function(){return Je(je)}}),e.__NG_ELEMENT_ID__=-1,e}(),ha=new Le("AnalyzeForEntryComponents"),fa=new Map,ga=new Set;function va(e){return"string"==typeof e?e:e.text()}function pa(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var s=0;s<t.length;s++){var o=t[s];"number"==typeof o?a=o:1==a?i=Ce(i,o):2==a&&(r=Ce(r,o+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ma=null;function ya(){if(!ma){var e=Me.Symbol;if(e&&e.iterator)ma=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ma=r)}}return ma}function ka(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function ba(e){return!!_a(e)&&(Array.isArray(e)||!(e instanceof Map)&&ya()in e)}function _a(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function wa(e,t,n){return e[t]=n}function Ca(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Oa(e,t,n,r){var i=Ca(e,t,n);return Ca(e,t+1,r)||i}function Ia(e,t,n,r){var i=Gt();return Ca(i,en(),t)&&(Wt(),function(e,t,n,r,i,a){var s=Et(e,t),o=t[11];if(null==r)Ut(o)?o.removeAttribute(s,n,a):s.removeAttribute(n);else{var u=null==i?Tn(r):i(r,e.tagName||"",n);Ut(o)?o.setAttribute(s,n,u,a):a?s.setAttributeNS(a,n,u):s.setAttribute(n,u)}}(vn(),i,e,t,n,r)),Ia}function Sa(e,t,n,r){return Ca(e,en(),n)?t+Tn(n)+r:Or}function xa(e,t,n,r,i,a,s,o){var u=Gt(),c=Wt(),l=e+20,d=c.firstCreatePass?function(e,t,n,r,i,a,s,o,u){var c=t.consts,l=Br(t,n[6],e,0,s||null,Vt(c,o));Yr(t,n,l,Vt(c,u)),pn(t,l);var d=l.tViews=Zr(2,-1,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c),h=$r(0,null,2,-1,null,null);return h.injectorIndex=l.injectorIndex,d.node=h,null!==t.queries&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}(e,c,u,t,n,r,i,a,s):c.data[l];Zt(d,!1);var h=u[11].createComment("");Ni(c,u,h,d),dr(h,u),fi(u,u[l]=li(h,u,h,d)),St(d)&&Wr(c,u,d),null!=s&&qr(u,d,o)}function Aa(e){return function(e,t){return e[t+20]}(jt.lFrame.contextLView,e)}function Ra(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default,n=Gt();return null==n?Je(e,t):Gn(Kt(),n,Se(e),t)}function Ua(){throw new Error("invalid")}function Pa(e,t,n){var r=Gt();return Ca(r,en(),t)&&Qr(Wt(),vn(),r,e,t,r[11],n,!1),Pa}function Ta(e,t,n,r,i){var a=i?"class":"style";_i(e,n,t.inputs[a],a,r)}function Ma(e,t,n,r){var i=Gt(),a=Wt(),s=20+e,o=i[11],u=i[s]=zr(t,o,jt.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,r,i,a,s){var o=t.consts,u=Vt(o,a),c=Br(t,n[6],e,3,i,u);return Yr(t,n,c,Vt(o,s)),null!==c.attrs&&pa(c,c.attrs,!1),null!==c.mergedAttrs&&pa(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(e,a,i,0,t,n,r):a.data[s];Zt(c,!0);var l=c.mergedAttrs;null!==l&&Cn(o,u,l);var d=c.classes;null!==d&&ji(o,u,d);var h=c.styles;null!==h&&Li(o,u,h),Ni(a,i,u,c),0===jt.lFrame.elementDepthCount&&dr(u,i),jt.lFrame.elementDepthCount++,St(c)&&(Wr(a,i,c),function(e,t,n){if(Ot(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}(a,c,i)),null!==r&&qr(i,c)}function Ea(){var e=Kt();$t()?jt.lFrame.isParent=!1:Zt(e=e.parent,!1);var t=e;jt.lFrame.elementDepthCount--;var n=Wt();n.firstCreatePass&&(pn(n,e),Ot(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ta(n,t,Gt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ta(n,t,Gt(),t.stylesWithoutHost,!1)}function Fa(e,t,n,r){Ma(e,t,n,r),Ea()}function Na(){return Gt()}function Da(e){return!!e&&"function"==typeof e.then}function za(e){return!!e&&"function"==typeof e.subscribe}function Va(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Gt(),a=Wt(),s=Kt();return function(e,t,n,r,i,a){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,u=St(r),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),l=ki(t),d=!0;if(3===r.type){var h=Et(r,t),f=o?o(h):ct,g=f.target||h,v=l.length,p=o?function(e){return o(Tt(e[r.index])).target}:r.index;if(Ut(n)){var m=null;if(!o&&u&&(m=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var s=i[a];if(s===n&&i[a+1]===r){var o=t[7],u=i[a+2];return o.length>u?o[u]:null}"string"==typeof s&&(a+=2)}return null}(e,t,i,r.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=a,m.__ngLastListenerFn__=a,d=!1;else{a=La(r,t,a,!1);var y=n.listen(f.name||g,i,a);l.push(a,y),c&&c.push(i,p,v,v+1)}}else a=La(r,t,a,!0),g.addEventListener(i,a,s),l.push(a),c&&c.push(i,p,v,s)}var k,b=r.outputs;if(d&&null!==b&&(k=b[i])){var _=k.length;if(_)for(var w=0;w<_;w+=2){var C=t[k[w]][k[w+1]].subscribe(a),O=l.length;l.push(a,C),c&&c.push(i,r.index,O,-(O+1))}}}(a,i,i[11],s,e,t,n,r),Va}function Ba(e,t,n){try{return!1!==t(n)}catch(r){return bi(e,r),!1}}function La(e,t,n,r){return function i(a){if(a===Function)return n;var s=2&e.flags?Nt(e.index,t):t;0==(32&t[2])&&gi(s);for(var o=Ba(t,n,a),u=i.__ngNextListenerFn__;u;)o=Ba(t,u,a)&&o,u=u.__ngNextListenerFn__;return r&&!1===o&&(a.preventDefault(),a.returnValue=!1),o}}function ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(jt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,jt.lFrame.contextLView))[8]}(e)}function Ha(e,t,n){return Ga(e,"",t,"",n),Ha}function Ga(e,t,n,r,i){var a=Gt(),s=Sa(a,t,n,r);return s!==Or&&Qr(Wt(),vn(),a,e,s,a[11],i,!1),Ga}var Wa=[];function qa(e,t,n,r,i){for(var a=e[n+1],s=null===t,o=r?Tr(a):Er(a),u=!1;0!==o&&(!1===u||s);){var c=e[o+1];Ka(e[o],t)&&(u=!0,e[o+1]=r?Nr(c):Mr(c)),o=r?Tr(c):Er(c)}u&&(e[n+1]=r?Mr(a):Nr(a))}function Ka(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&st(e,t)>=0}function Za(e,t){return function(e,t,n,r){var i,a,s=Gt(),o=Wt(),u=tn(2);(o.firstUpdatePass&&function(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[fn()+20],s=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(a)&&null===t&&!s&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=jt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),a=t.residualClasses;if(null===i)0===t.classBindings&&(n=Ja(n=$a(null,e,t,n,!0),t.attrs,!0),a=null);else{var s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=$a(i,e,t,n,!0),null===a){var o=function(e,t,n){var r=t.classBindings;if(0!==Er(r))return e[Tr(r)]}(e,t);void 0!==o&&Array.isArray(o)&&function(e,t,n,r){e[Tr(t.classBindings)]=r}(e,t,0,o=Ja(o=$a(null,e,t,o[1],!0),t.attrs,!0))}else a=function(e,t,n){for(var r=void 0,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=Ja(r,e[a].hostAttrs,!0);return Ja(r,t.attrs,!0)}(e,t)}return void 0!==a&&(t.residualClasses=a),n}(i,a,t),function(e,t,n,r,i,a){var s=t.classBindings,o=Tr(s),u=Er(s);e[r]=n;var c,l=!1;if(Array.isArray(n)){var d=n;(null===(c=d[1])||st(d,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var h=Tr(e[o+1]);e[r+1]=Pr(h,o),0!==h&&(e[h+1]=Fr(e[h+1],r)),e[o+1]=131071&e[o+1]|r<<17}else e[r+1]=Pr(o,0),0!==o&&(e[o+1]=Fr(e[o+1],r)),o=r;else e[r+1]=Pr(u,0),0===o?o=r:e[u+1]=Fr(e[u+1],r),u=r;l&&(e[r+1]=Mr(e[r+1])),qa(e,c,r,!0),qa(e,c,r,!1),function(e,t,n,r,i){var a=e.residualClasses;null!=a&&"string"==typeof t&&st(a,t)>=0&&(n[r+1]=Nr(n[r+1]))}(t,c,e,r),s=Pr(o,u),t.classBindings=s}(i,a,t,n,s)}}(o,e,u),t!==Or&&Ca(s,u,t))&&(null==n&&(i=null===(a=jt.lFrame)?null:a.currentSanitizer)&&(n=i),function(e,t,n,r,i,a,s,o){if(3===t.type){var u=e.data,c=u[o+1];Ya(1==(1&c)?Qa(u,t,n,i,Er(c),!0):void 0)||(Ya(a)||2==(2&c)&&(a=Qa(u,null,n,i,o,!0)),function(e,t,n,r,i){var a=Ut(e);i?a?e.addClass(n,r):n.classList.add(r):a?e.removeClass(n,r):n.classList.remove(r)}(r,0,Mt(fn(),n),i,a))}}(o,o.data[fn()+20],s,s[11],e,s[u+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=we(rr(e)))),e}(t,n),0,u))}(e,t,null),Za}function $a(e,t,n,r,i){var a=null,s=n.directiveEnd,o=n.directiveStylingLast;for(-1===o?o=n.directiveStart:o++;o<s&&(r=Ja(r,(a=t[o]).hostAttrs,i),a!==e);)o++;return null!==e&&(n.directiveStylingLast=o),r}function Ja(e,t,n){var r,i,a,s,o=n?1:2,u=-1;if(null!==t)for(var c=0;c<t.length;c++){var l=t[c];"number"==typeof l?u=l:u===o&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),r=e,i=l,a=!!n||t[++c],s=void 0,(s=st(r,i))>=0?r[1|s]=a:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(r,s=~s,i,a))}return void 0===e?null:e}function Qa(e,t,n,r,i,a){for(var s=null===t,o=void 0;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l,h=n[i+1];h===Or&&(h=d?Wa:void 0);var f=d?at(h,r):l===r?h:void 0;if(c&&!Ya(f)&&(f=at(u,r)),Ya(f)&&(o=f,s))return o;var g=e[i+1];i=s?Tr(g):Er(g)}if(null!==t){var v=a?t.residualClasses:t.residualStyles;null!=v&&(o=at(v,r))}return o}function Ya(e){return void 0!==e}function Xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Gt(),r=Wt(),i=e+20,a=r.firstCreatePass?Br(r,n[6],e,3,null,null):r.data[i],s=n[i]=function(e,t){return Ut(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Ni(r,n,s,a),Zt(a,!1)}function es(e){return ts("",e,""),es}function ts(e,t,n){var r=Gt(),i=Sa(r,e,t,n);return i!==Or&&wi(r,fn(),i),ts}function ns(e,t,n,r,i){var a=Gt(),s=function(e,t,n,r,i,a){var s=Oa(e,Xt(),n,i);return tn(2),s?t+Tn(n)+r+Tn(i)+a:Or}(a,e,t,n,r,i);return s!==Or&&wi(a,fn(),s),ns}function rs(e,t,n,r,i,a,s){var o=Gt(),u=function(e,t,n,r,i,a,s,o){var u=function(e,t,n,r,i){var a=Oa(e,t,n,r);return Ca(e,t+2,i)||a}(e,Xt(),n,i,s);return tn(3),u?t+Tn(n)+r+Tn(i)+a+Tn(s)+o:Or}(o,e,t,n,r,i,a,s);return u!==Or&&wi(o,fn(),u),rs}function is(e,t,n){var r=Gt();return Ca(r,en(),t)&&Qr(Wt(),vn(),r,e,t,r[11],n,!0),is}function as(e,t){var n=Dt(e)[1],r=n.data.length-1;pn(n,{directiveStart:r,directiveEnd:r+1})}function ss(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var i=void 0;if(xt(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var a=e;a.inputs=os(e.inputs),a.declaredInputs=os(e.declaredInputs),a.outputs=os(e.outputs);var s=i.hostBindings;s&&ls(e,s);var o=i.viewQuery,u=i.contentQueries;if(o&&us(e,o),u&&cs(e,u),de(e.inputs,i.inputs),de(e.declaredInputs,i.declaredInputs),de(e.outputs,i.outputs),xt(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}a.afterContentChecked=a.afterContentChecked||i.afterContentChecked,a.afterContentInit=e.afterContentInit||i.afterContentInit,a.afterViewChecked=e.afterViewChecked||i.afterViewChecked,a.afterViewInit=e.afterViewInit||i.afterViewInit,a.doCheck=e.doCheck||i.doCheck,a.onDestroy=e.onDestroy||i.onDestroy,a.onInit=e.onInit||i.onInit}var l=i.features;if(l)for(var d=0;d<l.length;d++){var h=l[d];h&&h.ngInherit&&h(e),h===ss&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Sn(i.hostAttrs,n=Sn(n,i.hostAttrs))}}(r)}function os(e){return e===ct?{}:e===lt?[]:e}function us(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function cs(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function ls(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var ds=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function hs(e){e.type.prototype.ngOnChanges&&(e.setInput=fs,e.onChanges=function(){var e=gs(this),t=e&&e.current;if(t){var n=e.previous;if(n===ct)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}})}function fs(e,t,n,r){var i=gs(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ct,current:null}),a=i.current||(i.current={}),s=i.previous,o=this.declaredInputs[n],u=s[o];a[o]=new ds(u&&u.currentValue,t,s===ct),e[r]=t}function gs(e){return e.__ngSimpleChanges__||null}function vs(e,t,n,r,i){if(e=Se(e),Array.isArray(e))for(var a=0;a<e.length;a++)vs(e[a],t,n,r,i);else{var s=Wt(),o=Gt(),u=ca(e)?e:Se(e.provide),c=sa(e),l=Kt(),d=65535&l.providerIndexes,h=l.directiveStart,f=l.providerIndexes>>16;if(ca(e)||!e.multi){var g=new wn(c,i,Ra),v=ys(u,t,i?d:d+f,h);-1===v?(Hn(Vn(l,o),s,u),ps(s,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(g),o.push(g)):(n[v]=g,o[v]=g)}else{var p=ys(u,t,d+f,h),m=ys(u,t,d,d+f),y=p>=0&&n[p],k=m>=0&&n[m];if(i&&!k||!i&&!y){Hn(Vn(l,o),s,u);var b=function(e,t,n,r,i){var a=new wn(e,n,Ra);return a.multi=[],a.index=t,a.componentProviders=0,ms(a,i,r&&!n),a}(i?bs:ks,n.length,i,r,c);!i&&k&&(n[m].providerFactory=b),ps(s,e,t.length,0),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(b),o.push(b)}else ps(s,e,p>-1?p:m,ms(n[i?m:p],c,!i&&r));!i&&r&&k&&n[m].componentProviders++}}}function ps(e,t,n,r){var i=ca(t);if(i||t.useClass){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var s=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var o=s.indexOf(n);-1===o?s.push(n,[r,a]):s[o+1].push(r,a)}else s.push(n,a)}}}function ms(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ys(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function ks(e,t,n,r){return _s(this.multi,[])}function bs(e,t,n,r){var i,a=this.multi;if(this.providerFactory){var s=this.providerFactory.componentProviders,o=Kn(n,n[1],this.providerFactory.index,r);_s(a,i=o.slice(0,s));for(var u=s;u<o.length;u++)i.push(o[u])}else _s(a,i=[]);return i}function _s(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function ws(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=Wt();if(r.firstCreatePass){var i=xt(e);vs(n,r.data,r.blueprint,i,!0),vs(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}hs.ngInherit=!0;var Cs=function e(){_classCallCheck(this,e)},Os=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(we(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Is=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new Os,e}(),Ss=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return xs(e)},e}(),xs=function(e){return Zi(e,Kt(),Gt())},As=function e(){_classCallCheck(this,e)},Rs=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),Us=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ps()},e}(),Ps=function(){var e=Gt(),t=Nt(Kt().index,e);return function(e){var t=e[11];if(Ut(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(wt(t)?t:e)},Ts=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return null}}),e}(),Ms=new function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("9.1.11"),Es=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return ba(e)}},{key:"create",value:function(e){return new Ns(e)}}]),e}(),Fs=function(e,t){return t},Ns=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Fs}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<Bs(n,r,i)?t:n,s=Bs(a,r,i),o=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var u=s-r,c=o-r;if(u!=c){for(var l=0;l<u;l++){var d=l<i.length?i[l]:i[l]=0,h=d+l;c<=h&&h<u&&(i[l]=d+1)}i[a.previousIndex]=c-u}}s!==o&&e(a,s,o)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!ba(e))throw new Error("Error trying to diff '".concat(we(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(var o=0;o<this.length;o++)r=e[o],i=this._trackByFn(o,r),null!==a&&ka(a.trackById,i)?(s&&(a=this._verifyReinsertion(a,r,i,o)),ka(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,o),s=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[ya()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==a&&ka(a.trackById,i)?(s&&(a=t._verifyReinsertion(a,e,i,n)),ka(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),s=!0),a=a._next,n++})),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(ka(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(ka(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Ds(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Vs),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),Ds=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},zs=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&ka(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Vs=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new zs,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function Bs(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Ls=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||_a(e)}},{key:"create",value:function(){return new js}}]),e}(),js=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||_a(e)))throw new Error("Error trying to diff '".concat(we(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new Hs(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){ka(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),Hs=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Gs=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new se]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new Es])}}),e}(),Ws=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new se]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new Ls])}}),e}(),qs=[new Ls],Ks=new Gs([new Es]),Zs=new Ws(qs),$s=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Js(e,Ss)},e}(),Js=function(e,t){return function(e,t,n,r){return Gi||(Gi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this))._declarationView=e,a._declarationTContainer=r,a.elementRef=i,a}return _createClass(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Vr(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Lr(t,n,e),new qi(n)}}]),n}(e)),0===n.type?new Gi(r,n,Zi(t,n,r)):null}(e,t,Kt(),Gt())},Qs=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ys(e,Ss)},e}(),Ys=function(e,t){return function(e,t,n,r){var i;Wi||(Wi=function(e){_inherits(r,e);var n=_createSuper(r);function r(e,t,i){var a;return _classCallCheck(this,r),(a=n.call(this))._lContainer=e,a._hostTNode=t,a._hostView=i,a}return _createClass(r,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var s=a.get(et,null);s&&(i=s)}var o=e.create(a,r,void 0,i);return this.insert(o.hostView,t),o}},{key:"insert",value:function(e,t){var n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ct(n[3])){var i=this.indexOf(e);if(-1!==i)this.detach(i);else{var a=n[3],s=new Wi(a,a[6],a[3]);s.detach(s.indexOf(e))}}var o=this._adjustIndex(t);return function(e,t,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-10?(t[4]=n[i],rt(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var s=t[17];null!==s&&n!==s&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);var o=t[19];null!==o&&o.insertView(e),t[2]|=128}(r,n,this._lContainer,o),Si(r,n,!0,Di(o,this._lContainer)),e.attachToViewContainerRef(this),rt(this._lContainer[8],o,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);!function(e,t){var n=Ai(e,t);n&&Ri(n[1],n)}(this._lContainer,t),it(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=Ai(this._lContainer,t);return n&&null!=it(this._lContainer[8],t)?new qi(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return Zi(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new Jn(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=jn(this._hostTNode,this._hostView),t=Pn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.parent.injectorIndex;)i=i.parent;return i}for(var a=Un(e),s=t,o=t[6];a>1;)o=(s=s[15])[6],a--;return o}(e,this._hostView,this._hostTNode);return An(e)&&null!=n?new Jn(n,t):new Jn(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-10}}]),r}(e));var a=r[n.index];if(Ct(a))i=a;else{var s;if(4===n.type)s=Tt(a);else if(s=r[11].createComment(""),At(r)){var o=r[11],u=Et(n,r);Ti(o,Fi(o,u),s,function(e,t){return Ut(e)?e.nextSibling(t):t.nextSibling}(o,u))}else Ni(r[1],r,s,n);r[n.index]=i=li(a,r,s,n),fi(r,i)}return new Wi(i,n,r)}(e,t,Kt(),Gt())},Xs={},eo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).ngModule=e,r}return _createClass(n,[{key:"resolveComponentFactory",value:function(e){var t=kt(e);return new ro(t,this.ngModule)}}]),n}(Is);function to(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var no=new Le("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return En}}),ro=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(Cr).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return _createClass(n,[{key:"create",value:function(e,t,n,r){var i,a,s=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,Xs,i);return a!==Xs||r===Xs?a:t.get(n,r,i)}}}(e,r.injector):e,o=s.get(As,Pt),u=s.get(Ts,null),c=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=n?function(e,t,n){if(Ut(e))return e.selectRootElement(t,n===ut.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):zr(l,o.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,f="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),g={components:[],scheduler:En,clean:yi,playerHandler:null,flags:0},v=Zr(0,-1,null,1,0,null,null,null,null,null),p=Vr(null,v,g,h,null,null,o,c,u,s);on(p,null);try{var m=function(e,t,n,r,i,a){var s=n[1];n[20]=e;var o=Br(s,null,0,3,null,null),u=o.mergedAttrs=t.hostAttrs;null!==u&&(pa(o,u,!0),null!==e&&(Cn(i,e,u),null!==o.classes&&ji(i,e,o.classes),null!==o.styles&&Li(i,e,o.styles)));var c=r.createRenderer(e,t),l=Vr(n,Kr(t),null,t.onPush?64:16,n[20],o,r,c,void 0);return s.firstCreatePass&&(Hn(Vn(o,n),s,t.type),ri(s,o),ai(o,n.length,1)),fi(n,l),n[20]=l}(d,this.componentDef,p,o,c);if(d)if(n)Cn(c,d,["ng-version",Ms.full]);else{var y=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!kr(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),k=y.attrs,b=y.classes;k&&Cn(c,d,k),b&&b.length>0&&ji(c,d,b.join(" "))}if(a=Ft(v,0),void 0!==t)for(var _=a.projection=[],w=0;w<this.ngContentSelectors.length;w++){var C=t[w];_.push(null!=C?Array.from(C):null)}i=function(e,t,n,r,i){var a=n[1],s=function(e,t,n){var r=Kt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ni(e,r,1),si(e,t,n));var i=Kn(t,e,t.length-1,r);dr(i,t);var a=Et(r,t);return a&&dr(a,t),i}(a,n,t);r.components.push(s),e[8]=s,i&&i.forEach((function(e){return e(s,t)})),t.contentQueries&&t.contentQueries(1,s,n.length-1);var o=Kt();if(a.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){gn(o.index-20);var u=n[1];Xr(u,t),ei(u,n,t.hostVars),ti(t,s)}return s}(m,this.componentDef,p,g,[as]),Lr(v,p,null)}finally{hn()}var O=new io(this.componentType,i,Zi(Ss,a,p),p,a);return n&&!f||(v.node.child=a),O}},{key:"inputs",get:function(){return to(this.componentDef.inputs)}},{key:"outputs",get:function(){return to(this.componentDef.outputs)}}]),n}(Cs),io=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a,s){var o,u,c,l;return _classCallCheck(this,n),(o=t.call(this)).location=i,o._rootLView=a,o._tNode=s,o.destroyCbs=[],o.instance=r,o.hostView=o.changeDetectorRef=new Ki(a),u=a[1],c=a,null==(l=u.node)&&(u.node=l=$r(0,null,2,-1,null,null)),c[6]=l,o.componentType=e,o}return _createClass(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new Jn(this._tNode,this._rootLView)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),ao=void 0,so=["en",[["a","p"],["AM","PM"],ao],[["AM","PM"],ao,ao],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ao,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ao,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ao,"{1} 'at' {0}",ao],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],oo={};function uo(e){return e in oo||(oo[e]=Me.ng&&Me.ng.common&&Me.ng.common.locales&&Me.ng.common.locales[e]),oo[e]}var co=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function lo(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var ho=new Map,fo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=_assertThisInitialized(i),i.destroyCbs=[],i.componentFactoryResolver=new eo(_assertThisInitialized(i));var a=_t(e),s=e[ze]||null;return s&&lo(s),i._bootstrapComponents=Fn(a.bootstrap),i._r3Injector=ra(e,r,[{provide:et,useValue:_assertThisInitialized(i)},{provide:Is,useValue:i.componentFactoryResolver}],we(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return _createClass(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:da.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.Default;return e===da||e===et||e===je?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(et),go=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).moduleType=e,null!==_t(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(we(t)," vs ").concat(we(t.name)))})(n,ho.get(n),t),ho.set(n,t)}var r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(t){return e(t)}))}(e),r}return _createClass(n,[{key:"create",value:function(e){return new fo(this.moduleType,e)}}]),n}(tt);function vo(e,t,n){var r=Yt()+e,i=Gt();return i[r]===Or?wa(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function po(e,t,n,r){return function(e,t,n,r,i,a){var s=t+n;return Ca(e,s,i)?wa(e,s+1,a?r.call(a,i):r(i)):yo(e,s+1)}(Gt(),Yt(),e,t,n,r)}function mo(e,t,n,r,i){return function(e,t,n,r,i,a,s){var o=t+n;return Oa(e,o,i,a)?wa(e,o+2,s?r.call(s,i,a):r(i,a)):yo(e,o+2)}(Gt(),Yt(),e,t,n,r,i)}function yo(e,t){var n=e[t];return n===Or?void 0:n}var ko=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(e=t.call(this)).__isAsync=r,e}return _createClass(n,[{key:"emit",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,a=function(e){return null},s=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(a=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(a=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),r&&(s=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var o=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,i,a,s);return e instanceof h&&e.add(o),o}}]),n}(A),bo=new Le("Application Initializer"),_o=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Da(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(bo,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),wo=new Le("AppId"),Co={provide:wo,useFactory:function(){return"".concat(Oo()).concat(Oo()).concat(Oo())},deps:[]};function Oo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Io=new Le("Platform Initializer"),So=new Le("Platform ID"),xo=new Le("appBootstrapListener"),Ao=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Ro=new Le("LocaleId"),Uo=new Le("DefaultCurrencyCode"),Po=function e(t,n){_classCallCheck(this,e),this.ngModuleFactory=t,this.componentFactories=n},To=function(e){return new go(e)},Mo=To,Eo=function(e){return Promise.resolve(To(e))},Fo=function(e){var t=To(e),n=Fn(_t(e).declarations).reduce((function(e,t){var n=kt(t);return n&&e.push(new ro(n)),e}),[]);return new Po(t,n)},No=Fo,Do=function(e){return Promise.resolve(Fo(e))},zo=function(){var e=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=Mo,this.compileModuleAsync=Eo,this.compileModuleAndAllComponentsSync=No,this.compileModuleAndAllComponentsAsync=Do}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Vo=new Le("compilerOptions"),Bo=Promise.resolve(0);function Lo(e){"undefined"==typeof Zone?Bo.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var jo=function(){function e(t){var n,r,i=t.enableLongStackTrace,a=void 0!==i&&i,s=t.shouldCoalesceEventChangeDetection,o=void 0!==s&&s;if(_classCallCheck(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ko(!1),this.onMicrotaskEmpty=new ko(!1),this.onStable=new ko(!1),this.onError=new ko(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=o,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Me.requestAnimationFrame,t=Me.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Me,(function(){e.lastRequestAnimationFrameId=-1,qo(e),Wo(e)})),qo(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(e,t,i,a,s,o){try{return Ko(n),e.invokeTask(i,a,s,o)}finally{r&&"eventTask"===a.type&&r(),Zo(n)}},onInvoke:function(e,t,r,i,a,s,o){try{return Ko(n),e.invoke(r,i,a,s,o)}finally{Zo(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,qo(n),Wo(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,Go,Ho,Ho);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function Ho(){}var Go={};function Wo(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function qo(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Ko(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Zo(e){e._nesting--,Wo(e)}var $o,Jo=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ko,this.onMicrotaskEmpty=new ko,this.onStable=new ko,this.onError=new ko}return _createClass(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),Qo=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){jo.assertNotInAngularZone(),Lo((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Lo((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(jo))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Yo=function(){var e=function(){function e(){_classCallCheck(this,e),this._applications=new Map,Xo.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Xo.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Xo=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),eu=function(e,t,n){var r=e.get(Vo,[]).concat(t),i=new go(n);if(0===fa.size)return Promise.resolve(i);var a,s,o=(a=r.map((function(e){return e.providers})),s=[],a.forEach((function(e){return e&&s.push.apply(s,_toConsumableArray(e))})),s);if(0===o.length)return Promise.resolve(i);var u=function(){var e=Me.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),c=da.create({providers:o}).get(u.ResourceLoader);return function(e){var t=[],n=new Map;function r(e){var t=n.get(e);if(!t){var r=function(e){return Promise.resolve(c.get(e))}(e);n.set(e,t=r.then(va))}return t}return fa.forEach((function(e,n){var i=[];e.templateUrl&&i.push(r(e.templateUrl).then((function(t){e.template=t})));var a=e.styleUrls,s=e.styles||(e.styles=[]),o=e.styles.length;a&&a.forEach((function(t,n){s.push(""),i.push(r(t).then((function(r){s[o+n]=r,a.splice(a.indexOf(t),1),0==a.length&&(e.styleUrls=void 0)})))}));var u=Promise.all(i).then((function(){return function(e){ga.delete(e)}(n)}));t.push(u)})),fa=new Map,Promise.all(t).then((function(){}))}().then((function(){return i}))},tu=new Le("AllowMultipleToken"),nu=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function ru(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+t,i=new Le(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=iu();if(!a||a.injector.get(tu,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var s=n.concat(t).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(e){if($o&&!$o.destroyed&&!$o.injector.get(tu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$o=e.get(au);var t=e.get(Io,null);t&&t.forEach((function(e){return e()}))}(da.create({providers:s,name:r}))}return function(e){var t=iu();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function iu(){return $o&&!$o.destroyed?$o:null}var au=function(){var e=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,a=(n=t?t.ngZone:void 0,r=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new Jo:("zone.js"===n?void 0:n)||new jo({enableLongStackTrace:sr(),shouldCoalesceEventChangeDetection:r})),s=[{provide:jo,useValue:a}];return a.run((function(){var t=da.create({providers:s,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(tr,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return cu(i._modules,n)})),a.runOutsideAngular((function(){return a.onError.subscribe({next:function(e){r.handleError(e)}})})),function(e,t,r){try{var a=((s=n.injector.get(_o)).runInitializers(),s.donePromise.then((function(){return lo(n.injector.get(Ro,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return Da(a)?a.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):a}catch(o){throw t.runOutsideAngular((function(){return e.handleError(o)})),o}var s}(r,a)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=su({},n);return eu(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(uu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(we(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(da))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function su(e,t){return Array.isArray(t)?t.reduce(su,e):Object.assign(Object.assign({},e),t)}var ou,uu=((ou=function(){function e(t,n,r,i,a,s){var o=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=a,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=sr(),this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run((function(){o.tick()}))}});var u=new w((function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular((function(){e.next(o._stable),e.complete()}))})),c=new w((function(e){var t;o._zone.runOutsideAngular((function(){t=o._zone.onStable.subscribe((function(){jo.assertNotInAngularZone(),Lo((function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))}))}))}));var n=o._zone.onUnstable.subscribe((function(){jo.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,a=t[t.length-1];return U(a)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof a&&(r=t.pop()),null===i&&1===t.length&&t[0]instanceof w?t[0]:Z(r)($(t,i))}(u,c.pipe((function(e){return J()((t=ne,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,ee);return r.source=e,r.subjectFactory=n,r})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Cs?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(et),a=n.create(da.NULL,[],t||n.selector,i);a.onDestroy((function(){r._unloadComponent(a)}));var s=a.injector.get(Qo,null);return s&&a.injector.get(Yo).registerApplication(a.location.nativeElement,s),this._loadComponent(a),sr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(a){n.e(a)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;)r.value.checkNoChanges()}catch(a){i.e(a)}finally{i.f()}}}catch(s){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(s)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;cu(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(xo,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),cu(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||ou)(Je(jo),Je(Ao),Je(da),Je(tr),Je(Is),Je(_o))},ou.\u0275prov=he({token:ou,factory:ou.\u0275fac}),ou);function cu(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var lu=function e(){_classCallCheck(this,e)},du=function e(){_classCallCheck(this,e)},hu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},fu=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._compiler=t,this._config=n||hu}return _createClass(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=_slicedToArray(e.split("#"),2),i=r[0],a=r[1];return void 0===a&&(a="default"),n("zn8P")(i).then((function(e){return e[a]})).then((function(e){return gu(e,i,a)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),r=t[0],i=t[1],a="NgFactory";return void 0===i&&(i="default",a=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(e){return e[i+a]})).then((function(e){return gu(e,r,i)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(zo),Je(du,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function gu(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var vu=ru(null,"core",[{provide:So,useValue:"unknown"},{provide:au,deps:[da]},{provide:Yo,deps:[]},{provide:Ao,deps:[]}]),pu=[{provide:uu,useClass:uu,deps:[jo,Ao,da,tr,Is,_o]},{provide:no,deps:[jo],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:_o,useClass:_o,deps:[[new se,bo]]},{provide:zo,useClass:zo,deps:[]},Co,{provide:Gs,useFactory:function(){return Ks},deps:[]},{provide:Ws,useFactory:function(){return Zs},deps:[]},{provide:Ro,useFactory:function(e){return lo(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new ae(Ro),new se,new ue]]},{provide:Uo,useValue:"USD"}],mu=function(){var e=function e(t){_classCallCheck(this,e)};return e.\u0275mod=pt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Je(uu))},providers:pu}),e}(),yu="http://localhost:5000/pttbe/iam/";function ku(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{u(r.next(e))}catch(t){a(t)}}function o(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))}function bu(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function _u(e){var t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((null===(t=e.error)||void 0===t?void 0:t.statusCode)&&console.log("StatusCode: "+e.error.statusCode),(null===(n=e.error)||void 0===n?void 0:n.message)&&console.log("Message: "+e.error.message),console.log("server returned code ".concat(e.status,' with body "').concat(JSON.stringify(e.error),'"')),a){var s=null!==(i=null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.message)&&void 0!==i?i:JSON.stringify(e.error);throw new Error(s)}}function wu(e){return e&&Array.isArray(e)?e.map("object"!=typeof e[0]?function(e){return e}:function(e){return Object.assign({},e)}):e}function Cu(e){if(!e)throw new Error("null not allowed");return 0===e.length?"1":(Math.max.apply(Math,e.map((function(e){return+e.id})))+1).toString()}function Ou(e){return e?"true":"false"}var Iu=function(e){return e.None="None",e.Account="Account",e.OrgaUser="OrgaUser",e}({});function Su(e,t){return!e||e===Iu.None||!!t&&(e===Iu.Account?t!==Iu.None:t===Iu.OrgaUser)}function xu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return U(r)?(t.pop(),H(t,r)):$(t)}function Au(e,t){return W(e,t,1)}function Ru(e,t){return function(n){return n.lift(new Uu(e,t))}}var Uu=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Pu(e,this.predicate,this.thisArg))}}]),e}(),Pu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e)).predicate=r,a.thisArg=i,a.count=0,a}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(v),Tu=null;function Mu(){return Tu}var Eu,Fu=new Le("DocumentToken"),Nu=((Eu=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Eu)},Eu.\u0275prov=he({factory:Du,token:Eu,providedIn:"platform"}),Eu);function Du(){return Je(Bu)}var zu,Vu=new Le("Location Initialized"),Bu=((zu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=Mu().getLocation(),this._history=Mu().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return Mu().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){Mu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){Mu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,n){Lu()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Lu()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(Nu)).\u0275fac=function(e){return new(e||zu)(Je(Fu))},zu.\u0275prov=he({factory:ju,token:zu,providedIn:"platform"}),zu);function Lu(){return!!window.history.pushState}function ju(){return new Bu(Je(Fu))}function Hu(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Gu(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Wu(e){return e&&"?"!==e[0]?"?"+e:e}var qu,Ku=((qu=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||qu)},qu.\u0275prov=he({factory:Zu,token:qu,providedIn:"root"}),qu);function Zu(e){var t=Je(Fu).location;return new Xu(Je(Nu),t&&t.origin||"")}var $u,Ju,Qu,Yu=new Le("appBaseHref"),Xu=((Qu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;if(_classCallCheck(this,n),(i=t.call(this))._platformLocation=e,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,_possibleConstructorReturn(i)}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return Hu(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Wu(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Wu(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Wu(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Ku)).\u0275fac=function(e){return new(e||Qu)(Je(Nu),Je(Yu,8))},Qu.\u0275prov=he({token:Qu,factory:Qu.\u0275fac}),Qu),ec=((Ju=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",null!=r&&(i._baseHref=r),i}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=Hu(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Wu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Wu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Ku)).\u0275fac=function(e){return new(e||Ju)(Je(Nu),Je(Yu,8))},Ju.\u0275prov=he({token:Ju,factory:Ju.\u0275fac}),Ju),tc=(($u=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._subject=new ko,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Gu(rc(i)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Wu(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,rc(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wu(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wu(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}()).\u0275fac=function(e){return new(e||$u)(Je(Ku),Je(Nu))},$u.normalizeQueryParams=Wu,$u.joinWithSlash=Hu,$u.stripTrailingSlash=Gu,$u.\u0275prov=he({factory:nc,token:$u,providedIn:"root"}),$u);function nc(){return new tc(Je(Ku),Je(Nu))}function rc(e){return e.replace(/\/index.html$/,"")}var ic,ac=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),sc=function e(){_classCallCheck(this,e)},oc=((ic=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).locale=e,r}return _createClass(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return function(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=uo(t);if(n)return n;var r=t.split("-")[0];if(n=uo(r))return n;if("en"===r)return so;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[co.PluralCase]}(t||this.locale)(e)){case ac.Zero:return"zero";case ac.One:return"one";case ac.Two:return"two";case ac.Few:return"few";case ac.Many:return"many";default:return"other"}}}]),n}(sc)).\u0275fac=function(e){return new(e||ic)(Je(Ro))},ic.\u0275prov=he({token:ic,factory:ic.\u0275fac}),ic);function uc(e,t){t=encodeURIComponent(t);var n,r=_createForOfIteratorHelper(e.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.indexOf("="),s=_slicedToArray(-1==a?[i,""]:[i.slice(0,a),i.slice(a+1)],2),o=s[0],u=s[1];if(o.trim()===t)return decodeURIComponent(u)}}catch(c){r.e(c)}finally{r.f()}return null}var cc,lc,dc,hc=((cc=function(){function e(t,n,r,i){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+we(e.item));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}},{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(ba(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}}]),e}()).\u0275fac=function(e){return new(e||cc)(Ra(Gs),Ra(Ws),Ra(Ss),Ra(Us))},cc.\u0275dir=yt({type:cc,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),cc),fc=function(){function e(t,n,r,i){_classCallCheck(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return _createClass(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),gc=((lc=function(){function e(t,n,r){_classCallCheck(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,r,i){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new fc(null,t._ngForOf,-1,-1),null===i?void 0:i),s=new vc(e,a);n.push(s)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var o=t._viewContainer.get(r);t._viewContainer.move(o,i);var u=new vc(e,o);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,a=this._viewContainer.length;i<a;i++){var s=this._viewContainer.get(i);s.context.index=i,s.context.count=a,s.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}},{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(e){sr()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=e},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||lc)(Ra(Qs),Ra($s),Ra(Gs))},lc.\u0275dir=yt({type:lc,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),lc),vc=function e(t,n){_classCallCheck(this,e),this.record=t,this.view=n},pc=((dc=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new mc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){yc("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){yc("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||dc)(Ra(Qs),Ra($s))},dc.\u0275dir=yt({type:dc,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),dc),mc=function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null};function yc(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(we(t),"'."))}var kc,bc,_c=((bc=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:bc}),bc.\u0275inj=fe({factory:function(e){return new(e||bc)},providers:[{provide:sc,useClass:oc}]}),bc),wc=((kc=function e(){_classCallCheck(this,e)}).\u0275prov=he({token:kc,providedIn:"root",factory:function(){return new Cc(Je(Fu),window,Je(tr))}}),kc),Cc=function(){function e(t,n,r){_classCallCheck(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#"+e);if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),Oc=function e(){_classCallCheck(this,e)},Ic=function e(){_classCallCheck(this,e)},Sc=function(){function e(t){var n=this;_classCallCheck(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),a=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(a):n.headers.set(i,[a])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))}))}:this.headers=new Map}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var a=this.headers.get(t);if(!a)return;0===(a=a.filter((function(e){return-1===i.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),xc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return Ac(e)}},{key:"encodeValue",value:function(e){return Ac(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function Ac(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Rc=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new xc,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){var n=new Map;return e.length>0&&e.split("&").forEach((function(e){var r=e.indexOf("="),i=_slicedToArray(-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],2),a=i[0],s=i[1],o=n.get(a)||[];o.push(s),n.set(a,o)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])}))):this.map=null}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).filter((function(e){return""!==e})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function Uc(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Pc(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Tc(e){return"undefined"!=typeof FormData&&e instanceof FormData}var Mc=function(){function e(t,n,r,i){var a;if(_classCallCheck(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.params&&(this.params=a.params)),this.headers||(this.headers=new Sc),this.params){var s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{var o=n.indexOf("?");this.urlWithParams=n+(-1===o?"?":o<n.length-1?"&":"")+s}}else this.params=new Rc,this.urlWithParams=n}return _createClass(e,[{key:"serializeBody",value:function(){return null===this.body?null:Uc(this.body)||Pc(this.body)||Tc(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Tc(this.body)?null:Pc(this.body)?this.body.type||null:Uc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),c)),new e(n,r,a,{params:c,headers:u,reportProgress:o,responseType:i,withCredentials:s})}}]),e}(),Ec=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),Fc=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,e),this.headers=t.headers||new Sc,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},Nc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=t.call(this,r)).type=Ec.ResponseHeader,e}return _createClass(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(Fc),Dc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=t.call(this,r)).type=Ec.Response,e.body=void 0!==r.body?r.body:null,e}return _createClass(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(Fc),zc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),r.error=e.error||null,r}return n}(Fc);function Vc(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var Bc,Lc,jc,Hc,Gc,Wc,qc,Kc,Zc,$c,Jc,Qc,Yc,Xc,el,tl=((Bc=function(){function e(t){_classCallCheck(this,e),this.handler=t}return _createClass(e,[{key:"request",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Mc)n=e;else{var a=void 0;a=i.headers instanceof Sc?i.headers:new Sc(i.headers);var s=void 0;i.params&&(s=i.params instanceof Rc?i.params:new Rc({fromObject:i.params})),n=new Mc(e,t,void 0!==i.body?i.body:null,{headers:a,params:s,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var o=xu(n).pipe(Au((function(e){return r.handler.handle(e)})));if(e instanceof Mc||"events"===i.observe)return o;var u=o.pipe(Ru((function(e){return e instanceof Dc})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(B((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return u.pipe(B((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return u.pipe(B((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return u.pipe(B((function(e){return e.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new Rc).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,Vc(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,Vc(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,Vc(n,t))}}]),e}()).\u0275fac=function(e){return new(e||Bc)(Je(Oc))},Bc.\u0275prov=he({token:Bc,factory:Bc.\u0275fac}),Bc),nl=function(){function e(t,n){_classCallCheck(this,e),this.next=t,this.interceptor=n}return _createClass(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),rl=new Le("HTTP_INTERCEPTORS"),il=((Lc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||Lc)},Lc.\u0275prov=he({token:Lc,factory:Lc.\u0275fac}),Lc),al=/^\)\]\}',?\n/,sl=function e(){_classCallCheck(this,e)},ol=((Hc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}()).\u0275fac=function(e){return new(e||Hc)},Hc.\u0275prov=he({token:Hc,factory:Hc.\u0275fac}),Hc),ul=((jc=function(){function e(t){_classCallCheck(this,e),this.xhrFactory=t}return _createClass(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new w((function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((function(e,t){return r.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var a=e.responseType.toLowerCase();r.responseType="json"!==a?a:"text"}var s=e.serializeBody(),o=null,u=function(){if(null!==o)return o;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Sc(r.getAllResponseHeaders()),a=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new Nc({headers:i,status:t,statusText:n,url:a})},c=function(){var t=u(),i=t.headers,a=t.status,s=t.statusText,o=t.url,c=null;204!==a&&(c=void 0===r.response?r.responseText:r.response),0===a&&(a=c?200:0);var l=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof c){var d=c;c=c.replace(al,"");try{c=""!==c?JSON.parse(c):null}catch(h){c=d,l&&(l=!1,c={error:h,text:c})}}l?(n.next(new Dc({body:c,headers:i,status:a,statusText:s,url:o||void 0})),n.complete()):n.error(new zc({error:c,headers:i,status:a,statusText:s,url:o||void 0}))},l=function(e){var t=u().url,i=new zc({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(i)},d=!1,h=function(t){d||(n.next(u()),d=!0);var i={type:Ec.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(e){var t={type:Ec.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",c),r.addEventListener("error",l),e.reportProgress&&(r.addEventListener("progress",h),null!==s&&r.upload&&r.upload.addEventListener("progress",f)),r.send(s),n.next({type:Ec.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),e.reportProgress&&(r.removeEventListener("progress",h),null!==s&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}}))}}]),e}()).\u0275fac=function(e){return new(e||jc)(Je(sl))},jc.\u0275prov=he({token:jc,factory:jc.\u0275fac}),jc),cl=new Le("XSRF_COOKIE_NAME"),ll=new Le("XSRF_HEADER_NAME"),dl=function e(){_classCallCheck(this,e)},hl=((Jc=function(){function e(t,n,r){_classCallCheck(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=uc(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}()).\u0275fac=function(e){return new(e||Jc)(Je(Fu),Je(So),Je(cl))},Jc.\u0275prov=he({token:Jc,factory:Jc.\u0275fac}),Jc),fl=(($c=function(){function e(t,n){_classCallCheck(this,e),this.tokenService=t,this.headerName=n}return _createClass(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||$c)(Je(dl),Je(ll))},$c.\u0275prov=he({token:$c,factory:$c.\u0275fac}),$c),gl=((Zc=function(){function e(t,n){_classCallCheck(this,e),this.backend=t,this.injector=n,this.chain=null}return _createClass(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(rl,[]);this.chain=t.reduceRight((function(e,t){return new nl(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||Zc)(Je(Ic),Je(da))},Zc.\u0275prov=he({token:Zc,factory:Zc.\u0275fac}),Zc),vl=((Kc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:fl,useClass:il}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:cl,useValue:t.cookieName}:[],t.headerName?{provide:ll,useValue:t.headerName}:[]]}}}]),e}()).\u0275mod=pt({type:Kc}),Kc.\u0275inj=fe({factory:function(e){return new(e||Kc)},providers:[fl,{provide:rl,useExisting:fl,multi:!0},{provide:dl,useClass:hl},{provide:cl,useValue:"XSRF-TOKEN"},{provide:ll,useValue:"X-XSRF-TOKEN"}]}),Kc),pl=((qc=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:qc}),qc.\u0275inj=fe({factory:function(e){return new(e||qc)},providers:[tl,{provide:Oc,useClass:gl},ul,{provide:Ic,useExisting:ul},ol,{provide:sl,useExisting:ol}],imports:[[vl.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),qc),ml=((Wc=function(){function e(t){_classCallCheck(this,e),this.http=t,this.backendURI=yu+"auth/",this.principal={authType:Iu.None}}return _createClass(e,[{key:"getAuthorizationToken",value:function(){return this.principal.accessToken}},{key:"setPrincipalAndToken",value:function(e,t){this.principal=Object.assign(Object.assign({},e),{accessToken:t})}},{key:"getPrincipal",value:function(){return this.principal}},{key:"login",value:function(e,t,n){return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={kennung:e,secret:t},n&&(i.fakeMailIdAsSecret=n),r.prev=2,r.next=5,this.http.post(this.backendURI+"login",i).toPromise();case 5:if(!(a=r.sent)){r.next=8;break}return r.abrupt("return",(this.principal=a,a));case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),console.log(r.t0.error),_u(r.t0,!0);case 13:case"end":return r.stop()}}),r,this,[[2,10]])})))}},{key:"loginInOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={usersOrgaId:e},t.prev=1,t.next=4,this.http.post(this.backendURI+"login-in-organization",n).toPromise();case 4:if(!(r=t.sent)){t.next=7;break}return t.abrupt("return",(this.principal=r,r));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.error),_u(t.t0,!0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})))}},{key:"register",value:function(e,t,n){return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={name:e.name,email:e.email,secret:t.secret},n&&(i.fakeMailIdAsSecret=n),r.prev=2,r.next=5,this.http.post(this.backendURI+"register",i).toPromise();case 5:if(!(a=r.sent)){r.next=8;break}return r.abrupt("return",(this.principal=a,a));case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),console.log(r.t0.error),_u(r.t0,!0);case 13:case"end":return r.stop()}}),r,this,[[2,10]])})))}}]),e}()).\u0275fac=function(e){return new(e||Wc)(Je(tl))},Wc.\u0275prov=he({token:Wc,factory:Wc.\u0275fac,providedIn:"root"}),Wc),yl=((Gc=function(){function e(t){_classCallCheck(this,e),this.auth=t}return _createClass(e,[{key:"intercept",value:function(e,t){var n=this.auth.getAuthorizationToken(),r=e;return n&&(r=e.clone({setHeaders:{Authorization:n}})),t.handle(r)}}]),e}()).\u0275fac=function(e){return new(e||Gc)(Je(ml))},Gc.\u0275prov=he({token:Gc,factory:Gc.\u0275fac}),Gc),kl=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=bl||(bl=document.querySelector("base"))?bl.getAttribute("href"):null;return null==n?null:(t=n,Qc||(Qc=document.createElement("a")),Qc.setAttribute("href",t),"/"===Qc.pathname.charAt(0)?Qc.pathname:"/"+Qc.pathname)}},{key:"resetBaseElement",value:function(){bl=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return uc(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,Tu||(Tu=e)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function e(){_classCallCheck(this,e)}}())),bl=null,_l=new Le("TRANSITION_ID"),wl=[{provide:bo,useFactory:function(e,t,n){return function(){n.get(_o).donePromise.then((function(){var n=Mu();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[_l,Fu,da],multi:!0}],Cl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){Me.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Me.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Me.getAllAngularRootElements=function(){return e.getAllRootElements()},Me.frameworkStabilizers||(Me.frameworkStabilizers=[]),Me.frameworkStabilizers.push((function(e){var t=Me.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Mu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,Xo=t}}]),e}(),Ol=new Le("EventManagerPlugins"),Il=((Yc=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)}}]),e}()).\u0275fac=function(e){return new(e||Yc)(Je(Ol),Je(jo))},Yc.\u0275prov=he({token:Yc,factory:Yc.\u0275fac}),Yc),Sl=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=Mu().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),xl=((el=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||el)},el.\u0275prov=he({token:el,factory:el.\u0275fac}),el),Al=((Xc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Mu().remove(e)}))}}]),n}(xl)).\u0275fac=function(e){return new(e||Xc)(Je(Fu))},Xc.\u0275prov=he({token:Xc,factory:Xc.\u0275fac}),Xc),Rl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ul=/%COMP%/g;function Pl(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?Pl(e,i,n):(i=i.replace(Ul,e),n.push(i))}return n}function Tl(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Ml,El,Fl,Nl,Dl=((Ml=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new zl(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ut.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Vl(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case ut.Native:case ut.ShadowDom:return new Bl(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Pl(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ml)(Je(Il),Je(Al),Je(wo))},Ml.\u0275prov=he({token:Ml,factory:Ml.\u0275fac}),Ml),zl=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Rl[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=Rl[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=Rl[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&Rs.DashCase?e.style.setProperty(t,n,r&Rs.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&Rs.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Tl(n)):this.eventManager.addEventListener(e,t,Tl(n))}}]),e}(),Vl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;_classCallCheck(this,n),(s=t.call(this,e)).component=i;var o,u=Pl(a+"-"+i.id,i.styles,[]);return r.addStyles(u),s.contentAttr="_ngcontent-%COMP%".replace(Ul,a+"-"+i.id),s.hostAttr=(o=a+"-"+i.id,"_nghost-%COMP%".replace(Ul,o)),s}return _createClass(n,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,e,t);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(zl),Bl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;_classCallCheck(this,n),(s=t.call(this,e)).sharedStylesHost=r,s.hostEl=i,s.component=a,s.shadowRoot=a.encapsulation===ut.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),s.sharedStylesHost.addHost(s.shadowRoot);for(var o=Pl(a.id,a.styles,[]),u=0;u<o.length;u++){var c=document.createElement("style");c.textContent=o[u],s.shadowRoot.appendChild(c)}return s}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(zl),Ll=((El=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(Sl)).\u0275fac=function(e){return new(e||El)(Je(Fu))},El.\u0275prov=he({token:El,factory:El.\u0275fac}),El),jl=["alt","control","meta","shift"],Hl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wl={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},ql=((Fl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Mu().onAndCancel(e,i.domEventName,a)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(jl.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")})),a+=i,0!=t.length||0===i.length)return null;var s={};return s.domEventName=r,s.fullKey=a,s}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Gl.hasOwnProperty(t)&&(t=Gl[t]))}return Hl[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),jl.forEach((function(r){r!=n&&(0,Wl[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded((function(){return t(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(Sl)).\u0275fac=function(e){return new(e||Fl)(Je(Fu))},Fl.\u0275prov=he({token:Fl,factory:Fl.\u0275fac}),Fl),Kl=ru(vu,"browser",[{provide:So,useValue:"browser"},{provide:Io,useValue:function(){kl.makeCurrent(),Cl.init()},multi:!0},{provide:Fu,useFactory:function(){return function(e){Rt=e}(document),document},deps:[]}]),Zl=[[],{provide:Qi,useValue:"root"},{provide:tr,useFactory:function(){return new tr},deps:[]},{provide:Ol,useClass:Ll,multi:!0,deps:[Fu,jo,So]},{provide:Ol,useClass:ql,multi:!0,deps:[Fu]},[],{provide:Dl,useClass:Dl,deps:[Il,Al,wo]},{provide:As,useExisting:Dl},{provide:xl,useExisting:Al},{provide:Al,useClass:Al,deps:[Fu]},{provide:Qo,useClass:Qo,deps:[jo]},{provide:Il,useClass:Il,deps:[Ol,jo]},[]],$l=((Nl=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:wo,useValue:t.appId},{provide:_l,useExisting:wo},wl]}}}]),e}()).\u0275mod=pt({type:Nl}),Nl.\u0275inj=fe({factory:function(e){return new(e||Nl)(Je(Nl,12))},providers:Zl,imports:[_c,mu]}),Nl);function Jl(){return new Yl(Je(Fu))}var Ql,Yl=((Ql=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"getTitle",value:function(){return this._doc.title}},{key:"setTitle",value:function(e){this._doc.title=e||""}}]),e}()).\u0275fac=function(e){return new(e||Ql)(Je(Fu))},Ql.\u0275prov=he({factory:Jl,token:Ql,providedIn:"root"}),Ql);"undefined"!=typeof window&&window;var Xl,ed,td,nd,rd,id,ad=function(e){return e.SelfIdent="SelfIdent",e.VideoIdent="VideoIdent",e.VeriIdent="VeriIdent",e.RoboIdent="RoboIdent",e}({}),sd=((ed=function(){function e(){_classCallCheck(this,e),this.refreshMainView=new ko,this.tokenChanged=new ko,this.idmEvent=new ko,this.taskEvent=new ko,this.resourceEvent=new ko}return _createClass(e,[{key:"publishRefreshMainViewEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.refreshMainView.emit({titleOnly:e})}},{key:"publishTokenChangedEvent",value:function(e){this.tokenChanged.emit(e),this.publishRefreshMainViewEvent()}},{key:"publishIdmEvent",value:function(e){this.idmEvent.emit(e)}},{key:"publishTaskEvent",value:function(e){this.taskEvent.emit(e)}},{key:"publishResourceEvent",value:function(e){this.resourceEvent.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||ed)},ed.\u0275prov=he({token:ed,factory:ed.\u0275fac,providedIn:"root"}),ed),od=((Xl=function(){function e(t){_classCallCheck(this,e),this.http=t,this.settingsBackendUri=yu+"my/settings/"}return _createClass(e,[{key:"getAllSettings",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get(this.settingsBackendUri).toPromise();case 3:return t=e.sent,e.abrupt("return",(console.log(t),t));case 7:e.prev=7,e.t0=e.catch(0),_u(e.t0);case 10:return e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"putAllSettings",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.put(this.settingsBackendUri,e).toPromise();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}}]),e}()).\u0275fac=function(e){return new(e||Xl)(Je(tl))},Xl.\u0275prov=he({token:Xl,factory:Xl.\u0275fac,providedIn:"root"}),Xl),ud=function(e){return e.AfterRegistrationLoginIsRequired="AfterRegistrationLoginIsRequired",e.AccountVerificationNeeded="AccountVerificationNeeded",e.AllowDeletionOfAccountWithOrgaMemberships="AllowDeletionOfAccountWithOrgaMemberships",e.ShowImportantInfosOnly="ShowImportantInfosOnly",e.AcceptHandshakesAutomatically="AcceptHandshakesAutomatically",e.AllowJoiningOrganizationByAccount="AllowJoiningOrganizationByAccount",e.ShowInfoPageAfterRegistration="ShowInfoPageAfterRegistration",e.ShowInfoPageAfterLogin="ShowInfoPageAfterLogin",e.ShowInfoPageAfterGuardNotFulfilled="ShowInfoPageAfterGuardNotFulfilled",e.ShowInfoPageAfterOrgaAdminGuardNotFulfilled="ShowInfoPageAfterOrgaAdminGuardNotFulfilled",e.UseGreenLikeColors="UseGreenLikeColors",e.UseAccountName4DisplayingUsername="UseAccountName4DisplayingUsername",e}({}),cd=((td=function(){function e(t,n,r){_classCallCheck(this,e),this.titleService=t,this.eventService=n,this.beSettingsService=r,this.stringSettings={},this.booleanSettings={},this.backendBooleanSettings={},this.callBackend=!1,this.readFromBackendDone=!this.callBackend,this._initWithDefaults()}return _createClass(e,[{key:"sendChangesToBackend",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.callBackend){e.next=2;break}return e.abrupt("return");case 2:for(n in t=Object.keys(this.booleanSettings),this.backendBooleanSettings)t.includes(n)&&(this.backendBooleanSettings[n]=this._booleanValueGet(n));return e.next=6,this.beSettingsService.putAllSettings(this.backendBooleanSettings);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getValuesFromBackend",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.callBackend){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.beSettingsService.getAllSettings();case 4:for(n in this.backendBooleanSettings=e.sent,t=Object.keys(this.booleanSettings),this.backendBooleanSettings)t.includes(n)&&this.booleanValueSet(n,this.backendBooleanSettings[n]);this.readFromBackendDone=!0;case 8:case"end":return e.stop()}}),e,this)})))}},{key:"_initWithDefaults",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.booleanValueSet(ud.AccountVerificationNeeded,!1),this.booleanValueSet(ud.AfterRegistrationLoginIsRequired,!1),this.booleanValueSet(ud.AllowDeletionOfAccountWithOrgaMemberships,!0),this.booleanValueSet(ud.ShowImportantInfosOnly,!0),this.booleanValueSet(ud.AcceptHandshakesAutomatically,!1),this.booleanValueSet(ud.AllowJoiningOrganizationByAccount,!0),this.booleanValueSet(ud.ShowInfoPageAfterRegistration,!0),this.booleanValueSet(ud.ShowInfoPageAfterLogin,!1),this.booleanValueSet(ud.ShowInfoPageAfterGuardNotFulfilled,!1),this.booleanValueSet(ud.ShowInfoPageAfterOrgaAdminGuardNotFulfilled,!0),this.booleanValueSet(ud.UseGreenLikeColors,!1),this.booleanValueSet(ud.UseAccountName4DisplayingUsername,!0),e.next=14,this.getValuesFromBackend();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getAllBooleanSettings",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.readFromBackendDone,e.t0){e.next=4;break}return e.next=4,this.getValuesFromBackend();case 4:return e.abrupt("return",this.booleanSettings);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"_stringValueGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.stringSettings[e];return t&&(this.stringSettings[e]=""),n||""}},{key:"_stringValueSet",value:function(e,t){this.stringSettings[e]=t}},{key:"_booleanValueGet",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null!==(t=this.booleanSettings[e])&&void 0!==t?t:n}},{key:"booleanValueSet",value:function(e,t){this.booleanSettings[e]=t}},{key:"getRedirectUri",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._stringValueGet("redirectUri",e)}},{key:"redirectUriIsSet",value:function(){return!!this.getRedirectUri()}},{key:"setRedirectUri",value:function(e){this._stringValueSet("redirectUri",e)}},{key:"resetRedirectUri",value:function(){this.setRedirectUri("")}},{key:"getTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._stringValueGet("title",e)}},{key:"setTitle",value:function(e){var t=this;this._stringValueSet("title",e),this.titleService.setTitle("Gesamt-Frontend: "+e),setTimeout((function(){t.eventService.publishRefreshMainViewEvent(!0)}),0)}},{key:"getRequiredByGuardHelptext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._stringValueGet("requiredByGuardHelptext",e)}},{key:"resetRequiredByGuardHelptext",value:function(){this._stringValueSet("requiredByGuardHelptext","")}},{key:"setRequiredByGuardHelptext",value:function(e){this._stringValueSet("requiredByGuardHelptext",e)}},{key:"acceptHandshakeDecisionsAutomatically",value:function(){return this._booleanValueGet(ud.AcceptHandshakesAutomatically)}},{key:"showImportantInfosOnly",value:function(){return this._booleanValueGet(ud.ShowImportantInfosOnly)}},{key:"afterRegistrationLoginIsRequired",value:function(){return this._booleanValueGet(ud.AfterRegistrationLoginIsRequired)}},{key:"registeredAccountMustBeVerifiedByMail",value:function(){return this._booleanValueGet(ud.AccountVerificationNeeded)}},{key:"allowJoiningOrganizationByAccount",value:function(){return this._booleanValueGet(ud.AllowJoiningOrganizationByAccount)}},{key:"showInfoPageAfterRegistration",value:function(){return this._booleanValueGet(ud.ShowInfoPageAfterRegistration)}},{key:"showInfoPageAfterLogin",value:function(){return this._booleanValueGet(ud.ShowInfoPageAfterLogin)}},{key:"showInfoPageAfterGuardNotFulfilled",value:function(){return this._booleanValueGet(ud.ShowInfoPageAfterGuardNotFulfilled)}},{key:"showInfoPageAfterOrgaAdminGuardNotFulfilled",value:function(){return this._booleanValueGet(ud.ShowInfoPageAfterOrgaAdminGuardNotFulfilled)}},{key:"allowDeletionOfAccountWithOrgaMemberships",value:function(){return this._booleanValueGet(ud.AllowDeletionOfAccountWithOrgaMemberships)}},{key:"setAllowDeletionOfAccountWithOrgaMemberships",value:function(e){this.booleanValueSet(ud.AllowDeletionOfAccountWithOrgaMemberships,e)}},{key:"useGreenLikeColors",value:function(){return this._booleanValueGet(ud.UseGreenLikeColors)}},{key:"useAccountName4DisplayingUsername",value:function(){return this._booleanValueGet(ud.UseAccountName4DisplayingUsername)}}]),e}()).\u0275fac=function(e){return new(e||td)(Je(Yl),Je(sd),Je(od))},td.\u0275prov=he({token:td,factory:td.\u0275fac,providedIn:"root"}),td),ld=function(e){return e.Member="Member",e.Admin="Admin",e.SuperAdmin="SuperAdmin",e}({}),dd=function(e){return e.Low="Low",e.Medium="Medium",e.Secure="Secure",e.HighSecure="HighSecure",e}({}),hd=((nd=function(){function e(t){_classCallCheck(this,e),this.settingsService=t,this.adminOfTheseSubOrgas=[],this.principal={authType:Iu.None},this.principal.account={},this.principal.orgaUser={},this.principal.organization={}}return _createClass(e,[{key:"_initSubOrgaAdmin",value:function(){this.adminOfTheseSubOrgas=[]}},{key:"setPrincipal",value:function(e){this.principal.authType=Iu.None,this.principal=Object.assign({},e),this.isLoggedIn()||this._initSubOrgaAdmin()}},{key:"isAdminOfCurrentOrga",value:function(e){var t,n=!!this.principal.orgaUser&&this.principal.orgaUser.adminType!==ld.Member;return n&&e&&(n=(null===(t=this.principal.orgaUser)||void 0===t?void 0:t.orgaId)===e),n}},{key:"isSuperAdminOfCurrentOrga",value:function(e){var t,n,r=(null===(t=this.principal.orgaUser)||void 0===t?void 0:t.adminType)===ld.SuperAdmin;return r&&e&&(r=(null===(n=this.principal.orgaUser)||void 0===n?void 0:n.orgaId)===e),r}},{key:"setSubOrgaIdsWithAdminsPermissions",value:function(e){var t;this.adminOfTheseSubOrgas=[],(t=this.adminOfTheseSubOrgas).push.apply(t,_toConsumableArray(e))}},{key:"isAdminOfSubOrga",value:function(e){return this.isAdminOfCurrentOrga()||this.adminOfTheseSubOrgas.includes(e)}},{key:"isSubAdminOfAtLeastOneSubOrga",value:function(){return this.adminOfTheseSubOrgas.length>0}},{key:"getPrincipal",value:function(){return this.principal}},{key:"isLoggedIn",value:function(){return this.principal.authType!==Iu.None}},{key:"getAuthType",value:function(){return this.principal.authType}},{key:"isLoggedInInOrga",value:function(){return this.principal.authType===Iu.OrgaUser}},{key:"getAuthLevel",value:function(){return this.principal.authLevel}},{key:"getAuthLevelAsString",value:function(){return this.principal.authLevel?dd[this.principal.authLevel].toString():""}},{key:"getAccount",value:function(){return this.principal.account}},{key:"getOrgaUser",value:function(){return this.principal.orgaUser}},{key:"getOrgaName",value:function(){var e,t;return null!==(t=null===(e=this.principal.organization)||void 0===e?void 0:e.name)&&void 0!==t?t:""}},{key:"getUsersDisplayName",value:function(){var e,t;return this.isLoggedIn()?this.isLoggedInInOrga()&&!this.settingsService.useAccountName4DisplayingUsername()?this.principal.orgaUser.name:null!==(t=null===(e=this.principal.account)||void 0===e?void 0:e.name)&&void 0!==t?t:"":""}},{key:"guardPrincipalIsThisAccount",value:function(e){var t;if((null===(t=this.principal.account)||void 0===t?void 0:t.id)!==e)throw new Error("Principal is not correct AccountId")}},{key:"guardPrincipalBelongsToThisOrga",value:function(e){var t;if((null===(t=this.principal.orgaUser)||void 0===t?void 0:t.orgaId)!==e)throw new Error("Principal is not a member of this orga")}},{key:"guardPrincipalIsOrgaAdmin",value:function(e){if(!this.isAdminOfCurrentOrga(e))throw new Error("Principal is not admin of this orga")}},{key:"guardPrincipalIsOrgaSuperAdmin",value:function(e){if(!this.principal||!this.principal.orgaUser||!this.isSuperAdminOfCurrentOrga(e))throw new Error("Principal is not super-admin of this orga")}},{key:"guardPrincipalIsSubOrgaAdmin",value:function(e){if(!this.isAdminOfSubOrga(e))throw new Error("Principal is not sub-admin of given sub-organization")}}]),e}()).\u0275fac=function(e){return new(e||nd)(Je(cd))},nd.\u0275prov=he({token:nd,factory:nd.\u0275fac,providedIn:"root"}),nd),fd=function(e){return e.InfoForSuccessfulAccountVerification="InfoForSuccessfulAccountVerification",e.RequestForInvitationAsOrgaUserToUser="RequestForInvitationAsOrgaUserToUser",e.InfoForDenialOfInvitationAsOrgaUserToOrga="InfoForDenialOfInvitationAsOrgaUserToOrga",e.RequestForInvitationAsOrgaUserToOrga="RequestForInvitationAsOrgaUserToOrga",e.WishOfMembershipToOrga="WishOfMembershipToOrga",e.InfoForApprovalInvitationOfOrgaUserToUser="InfoForApprovalInvitationOfOrgaUserToUser",e.InfoForDenialOfInvitationOfOrgaUserToUser="InfoForDenialOfInvitationOfOrgaUserToUser",e}({}),gd=((id=function(){function e(t){_classCallCheck(this,e),this.http=t,this.backendURI=yu+"identifications/"}return _createClass(e,[{key:"convert",value:function(e){return Object.assign(Object.assign({},e),{doneAt:new Date(e.doneAt),account:e.account?Object.assign(Object.assign({},e.account),{dateOfBirth:new Date(e.account.dateOfBirth)}):void 0})}},{key:"getAllIdentificationsForUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.get(this.backendURI+"accounts/"+e).toPromise();case 3:return t.abrupt("return",t.sent.map((function(e){return n.convert(e)})));case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getAllIdentificationsForOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.get(this.backendURI+"organizations/"+e).toPromise();case 3:return t.abrupt("return",t.sent.map((function(e){return n.convert(e)})));case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getAllIdentificationsBasedOnNotification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.get(this.backendURI+"notifications/"+e).toPromise();case 3:return t.abrupt("return",t.sent.map((function(e){return n.convert(e)})));case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"removeIdentification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.backendURI+e).toPromise();case 3:return t.abrupt("return",!!t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"addNewIdentification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.account,n=Object.assign(Object.assign({},e),{account:r?Object.assign(Object.assign({},r),{dateOfBirth:r.dateOfBirth.toISOString()}):void 0}),t.next=5,this.http.post(this.backendURI,n).toPromise();case 5:return i=t.sent,t.abrupt("return",this.convert(i));case 9:t.prev=9,t.t0=t.catch(0),_u(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})))}}]),e}()).\u0275fac=function(e){return new(e||id)(Je(tl))},id.\u0275prov=he({token:id,factory:id.\u0275fac,providedIn:"root"}),id),vd=((rd=function(){function e(t,n){_classCallCheck(this,e),this.principalService=t,this.beIdentificationService=n,this.useValueFromBackend=!0,this.callBackend=!1,this.idents=[],this._fillWithTestdata()}return _createClass(e,[{key:"_fillWithTestdata",value:function(){this.idents.push({id:"1",provider:ad.SelfIdent,doneAt:new Date("1.2.2021"),account:{id:"110",dateOfBirth:new Date("3.3.1981"),firstname:"Klaus",lastname:"H.",address:{zipCode:"90435",city:"N\xfcrnberg",street:"F\xfcrther Str"},photo:"./assets/img/mann-1.png"}},{id:"100",provider:ad.VeriIdent,doneAt:new Date("1.3.2021"),account:{id:"110",firstname:"Klaus",lastname:"Heinzelmann",dateOfBirth:new Date("8.3.1981"),address:{zipCode:"90433",city:"N\xfcrnberg",street:"F\xfcrther Stra\xdfe 111"},photo:"./assets/img/mann-1.png"}},{id:"101",provider:ad.RoboIdent,doneAt:new Date("10.1.2020"),account:{id:"111",firstname:"Simone",lastname:"Heinzelmann",dateOfBirth:new Date("11.4.1982"),address:{zipCode:"97234",city:"Leutenbach",street:"Seidmar 12"},photo:"./assets/img/frau-1.png"}},{id:"2",provider:ad.RoboIdent,doneAt:new Date("2.2.2021"),account:{id:"131",dateOfBirth:new Date("5.6.1962"),firstname:"Petra",lastname:"Grubinger",address:{zipCode:"80666",city:"M\xfcnchen",street:"Ring 12"},photo:"./assets/img/frau-2.png"}},{id:"3",provider:ad.RoboIdent,doneAt:new Date("3.2.2021"),account:{id:"120",firstname:"Martin",lastname:"Palmengarten",dateOfBirth:new Date("11.12.1960"),address:{zipCode:"34300",city:"Dortmund",street:"Am Stadion 2"},photo:"./assets/img/mann-2.png"}},{id:"4",provider:ad.RoboIdent,doneAt:new Date("3.28.2021"),organization:{id:"300",name:"Kanzlei Heinzelmann & T\xf6chter",address:{zipCode:"34300",city:"Dortmund",street:"Am Stadion 2"},logo:"./assets/img/logos/heinzelmann.png"}})}},{key:"_addNewIdentification",value:function(e){return e.id=Cu(this.idents),e.doneAt=new Date(Date.now()),this.idents.push(e),e}},{key:"_checkStringProperty",value:function(e){return!!e&&e.trim().length>0}},{key:"_checkIdentificationIsValid",value:function(e){var t,n,r,i,a,s,o,u,c,l,d,h=!0;return h=(h=(h=(h=(h=(h=(h=h&&this._checkStringProperty(null===(n=null===(t=e.account)||void 0===t?void 0:t.id)||void 0===n?void 0:n.toString()))&&this._checkStringProperty(null===(r=e.provider)||void 0===r?void 0:r.toString()))&&this._checkStringProperty(null===(i=e.account)||void 0===i?void 0:i.firstname))&&this._checkStringProperty(null===(a=e.account)||void 0===a?void 0:a.lastname))&&this._checkStringProperty(null===(o=null===(s=e.account)||void 0===s?void 0:s.address)||void 0===o?void 0:o.city))&&this._checkStringProperty(null===(c=null===(u=e.account)||void 0===u?void 0:u.address)||void 0===c?void 0:c.street))&&this._checkStringProperty(null===(d=null===(l=e.account)||void 0===l?void 0:l.address)||void 0===d?void 0:d.zipCode)}},{key:"_checkOrgaIdentificationIsValid",value:function(e){var t,n,r,i,a,s,o,u,c,l,d=!0;return d=(d=(d=(d=(d=(d=d&&this._checkStringProperty(null===(n=null===(t=e.organization)||void 0===t?void 0:t.id)||void 0===n?void 0:n.toString()))&&this._checkStringProperty(null===(r=e.provider)||void 0===r?void 0:r.toString()))&&this._checkStringProperty(null===(i=e.organization)||void 0===i?void 0:i.name))&&this._checkStringProperty(null===(s=null===(a=e.organization)||void 0===a?void 0:a.address)||void 0===s?void 0:s.city))&&this._checkStringProperty(null===(u=null===(o=e.organization)||void 0===o?void 0:o.address)||void 0===u?void 0:u.street))&&this._checkStringProperty(null===(l=null===(c=e.organization)||void 0===c?void 0:c.address)||void 0===l?void 0:l.zipCode)}},{key:"getAllIdentificationsForUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beIdentificationService.getAllIdentificationsForUser(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",wu(this.idents.filter((function(t){var n;return(null===(n=t.account)||void 0===n?void 0:n.id)===e}))));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getAllIdentificationsForOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beIdentificationService.getAllIdentificationsForOrga(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",wu(this.idents.filter((function(t){var n;return(null===(n=t.organization)||void 0===n?void 0:n.id)===e}))));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getAllIdentificationsBasedOnNotification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beIdentificationService.getAllIdentificationsBasedOnNotification(e.id);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",e.type===fd.RequestForInvitationAsOrgaUserToUser?wu(this.idents.filter((function(t){var n,r;return(null===(n=t.organization)||void 0===n?void 0:n.id)===(null===(r=e.organization)||void 0===r?void 0:r.id)}))):e.type===fd.RequestForInvitationAsOrgaUserToOrga||e.type===fd.WishOfMembershipToOrga?wu(this.idents.filter((function(t){var n,r;return(null===(n=t.account)||void 0===n?void 0:n.id)===(null===(r=e.account)||void 0===r?void 0:r.id)}))):[]);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"addNewIdentification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.account){t.next=5;break}if(this.principalService.guardPrincipalIsThisAccount(e.account.id),this._checkIdentificationIsValid(e)){t.next=3;break}return t.abrupt("return");case 3:t.next=7;break;case 5:if(this.principalService.guardPrincipalBelongsToThisOrga(e.organization.id),this._checkOrgaIdentificationIsValid(e)){t.next=7;break}return t.abrupt("return");case 7:if(!this.callBackend){t.next=13;break}return t.next=10,this.beIdentificationService.addNewIdentification(e);case 10:if(n=t.sent,!this.useValueFromBackend){t.next=13;break}return t.abrupt("return",n);case 13:return t.abrupt("return",Object.assign({},this._addNewIdentification(e)));case 14:case"end":return t.stop()}}),t,this)})))}},{key:"removeIdentification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=4;break}return t.next=3,this.beIdentificationService.removeIdentification(e);case 3:return t.abrupt("return",t.sent);case 4:return n=this.idents.findIndex((function(t){return t.id===e})),(r=n>=0)&&((i=this.idents[n]).account?this.principalService.guardPrincipalIsThisAccount(i.account.id):this.principalService.guardPrincipalBelongsToThisOrga(i.organization.id),this.idents.splice(n,1)),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||rd)(Je(hd),Je(gd))},rd.\u0275prov=he({token:rd,factory:rd.\u0275fac,providedIn:"root"}),rd);function pd(e,t){return new w((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,s=0,o=function(o){var u=G(e[o]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,s++),i[o]=e},error:function(e){return n.error(e)},complete:function(){++a!==r&&c||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)o(u);else n.complete()}))}var md,yd,kd,bd,_d=new Le("NgValueAccessor"),wd={provide:_d,useExisting:Ie((function(){return Cd})),multi:!0},Cd=((md=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||md)(Ra(Us),Ra(Ss))},md.\u0275dir=yt({type:md,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Va("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[ws([wd])]}),md),Od={provide:_d,useExisting:Ie((function(){return Sd})),multi:!0},Id=new Le("CompositionEventMode"),Sd=((bd=function(){function e(t,n,r){var i;_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=r,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=Mu()?Mu().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||bd)(Ra(Us),Ra(Ss),Ra(Id,8))},bd.\u0275dir=yt({type:bd,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Va("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[ws([Od])]}),bd),xd=((kd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),e}()).\u0275fac=function(e){return new(e||kd)},kd.\u0275dir=yt({type:kd}),kd),Ad=((yd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(xd)).\u0275fac=function(e){return Rd(e||yd)},yd.\u0275dir=yt({type:yd,features:[ss]}),yd),Rd=Qn(Ad);function Ud(){throw new Error("unimplemented")}var Pd,Td,Md=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _createClass(n,[{key:"validator",get:function(){return Ud()}},{key:"asyncValidator",get:function(){return Ud()}}]),n}(xd),Ed=function(){function e(t){_classCallCheck(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),Fd=((Td=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return n}(Ed)).\u0275fac=function(e){return new(e||Td)(Ra(Md,2))},Td.\u0275dir=yt({type:Td,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Za("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[ss]}),Td),Nd=((Pd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return n}(Ed)).\u0275fac=function(e){return new(e||Pd)(Ra(Ad,2))},Pd.\u0275dir=yt({type:Pd,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Za("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[ss]}),Pd);function Dd(e){return null==e||0===e.length}var zd=new Le("NgValidators"),Vd=new Le("NgAsyncValidators"),Bd=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ld=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(Dd(t.value)||Dd(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(Dd(t.value)||Dd(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return Dd(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return Dd(e.value)||Bd.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(Dd(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}},{key:"maxLength",value:function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Dd(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(jd);return 0==t.length?null:function(e){return Gd(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(jd);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(u(r))return pd(r,null);if(c(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return pd(i.map((function(e){return r[e]})),i)}}if("function"==typeof t[t.length-1]){var a=t.pop();return pd(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(B((function(e){return a.apply(void 0,_toConsumableArray(e))})))}return pd(t,null)}(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(Hd)).pipe(B(Gd))}}}]),e}();function jd(e){return null!=e}function Hd(e){var t=Da(e)?G(e):e;if(!za(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Gd(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function Wd(e){return e.validate?function(t){return e.validate(t)}:e}function qd(e){return e.validate?function(t){return e.validate(t)}:e}var Kd,Zd,$d,Jd,Qd={provide:_d,useExisting:Ie((function(){return Yd})),multi:!0},Yd=((Kd=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Kd)(Ra(Us),Ra(Ss))},Kd.\u0275dir=yt({type:Kd,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Va("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[ws([Qd])]}),Kd),Xd={provide:_d,useExisting:Ie((function(){return th})),multi:!0},eh=(($d=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||$d)},$d.\u0275prov=he({token:$d,factory:$d.\u0275fac}),$d),th=((Zd=function(){function e(t,n,r,i){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Md),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()).\u0275fac=function(e){return new(e||Zd)(Ra(Us),Ra(Ss),Ra(eh),Ra(da))},Zd.\u0275dir=yt({type:Zd,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Va("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ws([Xd])]}),Zd),nh={provide:_d,useExisting:Ie((function(){return rh})),multi:!0},rh=((Jd=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Jd)(Ra(Us),Ra(Ss))},Jd.\u0275dir=yt({type:Jd,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Va("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[ws([nh])]}),Jd),ih='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',ah='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',sh={provide:_d,useExisting:Ie((function(){return lh})),multi:!0};function oh(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var uh,ch,lh=((ch=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=ka}return _createClass(e,[{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=oh(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||ch)(Ra(Us),Ra(Ss))},ch.\u0275dir=yt({type:ch,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Va("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ws([sh])]}),ch),dh=((uh=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return _createClass(e,[{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(oh(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}}]),e}()).\u0275fac=function(e){return new(e||uh)(Ra(Ss),Ra(Us),Ra(lh,9))},uh.\u0275dir=yt({type:uh,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),uh),hh={provide:_d,useExisting:Ie((function(){return ph})),multi:!0};function fh(e,t){return null==e?""+t:("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var gh,vh,ph=((vh=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=ka}return _createClass(e,[{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,a=0;a<i.length;a++){var s=i.item(a),o=t._getOptionValue(s.value);r.push(o)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var d=t._getOptionValue(l.value);r.push(d)}}t.value=r,e(r)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||vh)(Ra(Us),Ra(Ss))},vh.\u0275dir=yt({type:vh,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Va("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ws([hh])]}),vh),mh=((gh=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return _createClass(e,[{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(fh(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(fh(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}}]),e}()).\u0275fac=function(e){return new(e||gh)(Ra(Ss),Ra(Us),Ra(ph,9))},gh.\u0275dir=yt({type:gh,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),gh);function yh(e,t){return[].concat(_toConsumableArray(t.path),[e])}function kh(e,t){e||_h(t,"Cannot find control with"),t.valueAccessor||_h(t,"No value accessor for form control with"),e.validator=Ld.compose([e.validator,t.validator]),e.asyncValidator=Ld.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&bh(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&bh(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function bh(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function _h(e,t){var n;throw n=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(n))}function wh(e){return null!=e?Ld.compose(e.map(Wd)):null}function Ch(e){return null!=e?Ld.composeAsync(e.map(qd)):null}var Oh=[Cd,rh,Yd,lh,ph,th];function Ih(e){var t=xh(e)?e.validators:e;return Array.isArray(t)?wh(t):t||null}function Sh(e,t){var n=xh(t)?t.asyncValidators:e;return Array.isArray(n)?Ch(n):n||null}function xh(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Ah,Rh,Uh,Ph,Th,Mh,Eh,Fh,Nh,Dh,zh=function(){function e(t,n){_classCallCheck(this,e),this.validator=t,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"setValidators",value:function(e){this.validator=Ih(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=Sh(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=Hd(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof Bh?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Lh&&r.at(e)||null})),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new ko,this.statusChanges=new ko}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){xh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}}]),e}(),Vh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(e=t.call(this,Ih(i),Sh(a,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _createClass(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(zh),Bh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,Ih(r),Sh(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return _createClass(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof Vh?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,n=!1;return this._forEachChild((function(r,i){n=n||t.contains(i)&&e(r)})),n}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(zh),Lh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,Ih(r),Sh(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return _createClass(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof Vh?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e,t=_createForOfIteratorHelper(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),n}(zh),jh={provide:Ad,useExisting:Ie((function(){return Gh}))},Hh=Promise.resolve(null),Gh=((Rh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).submitted=!1,i._directives=[],i.ngSubmit=new ko,i.form=new Bh({},wh(e),Ch(r)),i}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(e){var t=this;Hh.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),kh(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;Hh.then((function(){var n,r,i,a=t._findContainer(e.path);a&&a.removeControl(e.name),n=t._directives,r=e,(i=n.indexOf(r))>-1&&n.splice(i,1)}))}},{key:"addFormGroup",value:function(e){var t=this;Hh.then((function(){var n=t._findContainer(e.path),r=new Bh({});(function(e,t){null==e&&_h(t,"Cannot find control with"),e.validator=Ld.compose([e.validator,t.validator]),e.asyncValidator=Ld.composeAsync([e.asyncValidator,t.asyncValidator])})(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;Hh.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;Hh.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})),this.ngSubmit.emit(e),!1;var t}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),n}(Ad)).\u0275fac=function(e){return new(e||Rh)(Ra(zd,10),Ra(Vd,10))},Rh.\u0275dir=yt({type:Rh,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Va("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ws([jh]),ss]}),Rh),Wh=((Ah=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return yh(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return wh(this._validators)}},{key:"asyncValidator",get:function(){return Ch(this._asyncValidators)}}]),n}(Ad)).\u0275fac=function(e){return qh(e||Ah)},Ah.\u0275dir=yt({type:Ah,features:[ss]}),Ah),qh=Qn(Wh),Kh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(ih,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(ah))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(ih,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(ah))}}]),e}(),Zh={provide:Ad,useExisting:Ie((function(){return $h}))},$h=((Uh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this))._parent=e,a._validators=r,a._asyncValidators=i,a}return _createClass(n,[{key:"_checkParentType",value:function(){this._parent instanceof n||this._parent instanceof Gh||Kh.modelGroupParentException()}}]),n}(Wh)).\u0275fac=function(e){return new(e||Uh)(Ra(Ad,5),Ra(zd,10),Ra(Vd,10))},Uh.\u0275dir=yt({type:Uh,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[ws([Zh]),ss]}),Uh),Jh={provide:Md,useExisting:Ie((function(){return Yh}))},Qh=Promise.resolve(null),Yh=((Th=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;return _classCallCheck(this,n),(s=t.call(this)).control=new Vh,s._registered=!1,s.update=new ko,s._parent=e,s._rawValidators=r||[],s._rawAsyncValidators=i||[],s.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||_h(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return t.forEach((function(t){var a;t.constructor===Sd?n=t:(a=t,Oh.some((function(e){return a.constructor===e}))?(r&&_h(e,"More than one built-in value accessor matches form control with"),r=t):(i&&_h(e,"More than one custom value accessor matches form control with"),i=t))})),i||r||n||(_h(e,"No valid value accessor for form control with"),null)}(_assertThisInitialized(s),a),s}return _createClass(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!ka(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){kh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof $h)&&this._parent instanceof Wh?Kh.formGroupNameException():this._parent instanceof $h||this._parent instanceof Gh||Kh.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Kh.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;Qh.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;Qh.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))}},{key:"path",get:function(){return this._parent?yh(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return wh(this._rawValidators)}},{key:"asyncValidator",get:function(){return Ch(this._rawAsyncValidators)}}]),n}(Md)).\u0275fac=function(e){return new(e||Th)(Ra(Ad,9),Ra(zd,10),Ra(Vd,10),Ra(_d,10))},Th.\u0275dir=yt({type:Th,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ws([Jh]),ss,hs]}),Th),Xh=((Ph=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Ph)},Ph.\u0275dir=yt({type:Ph,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Ph),ef={provide:zd,useExisting:Ie((function(){return tf})),multi:!0},tf=((Mh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"validate",value:function(e){return this.required?Ld.required(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()}}]),e}()).\u0275fac=function(e){return new(e||Mh)},Mh.\u0275dir=yt({type:Mh,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&Ia("required",t.required?"":null)},inputs:{required:"required"},features:[ws([ef])]}),Mh),nf={provide:zd,useExisting:Ie((function(){return rf})),multi:!0},rf=((Dh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null==this.minlength?null:this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=Ld.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}]),e}()).\u0275fac=function(e){return new(e||Dh)},Dh.\u0275dir=yt({type:Dh,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Ia("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[ws([nf]),hs]}),Dh),af=((Nh=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:Nh}),Nh.\u0275inj=fe({factory:function(e){return new(e||Nh)}}),Nh),sf=((Fh=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:Fh}),Fh.\u0275inj=fe({factory:function(e){return new(e||Fh)},providers:[eh],imports:[af]}),Fh),of=((Eh=function(){function e(t){_classCallCheck(this,e),this.el=t}return _createClass(e,[{key:"ngAfterViewInit",value:function(){this.el.nativeElement.focus()}}]),e}()).\u0275fac=function(e){return new(e||Eh)(Ra(Ss))},Eh.\u0275dir=yt({type:Eh,selectors:[["","appAutofocus",""]]}),Eh);function uf(e,t){1&e&&(Ma(0,"div"),Ma(1,"p"),Xa(2,"Die Organisation ist noch gar nicht identifiziert."),Ea(),Ea())}function cf(e,t){if(1&e){var n=Na();Ma(0,"button",35),Va("click",(function(){qt(n);var e=ja().index;return ja(2).showIdentificationView(e)})),Xa(1,"anzeigen"),Ea()}}function lf(e,t){if(1&e){var n=Na();Ma(0,"button",35),Va("click",(function(){return qt(n),ja(3).hideIdentificationView()})),Xa(1,"ausblenden"),Ea()}}function df(e,t){if(1&e){var n=Na();Ma(0,"li"),Ma(1,"span",31),Xa(2),Ea(),Ma(3,"span",32),Xa(4),Ea(),Ma(5,"button",33),Va("click",(function(){qt(n);var e=t.index;return ja(2).removeIdentification(e)})),Xa(6,"L\xf6schen"),Ea(),xa(7,cf,2,0,"button",34),xa(8,lf,2,0,"button",34),Ea()}if(2&e){var r=t.index,i=ja(2);Rr(2),ts(" ",i.getIdentificationProviderAsString(r)," "),Rr(2),ts(" ",i.getIdentificationDescription(r)," "),Rr(3),Pa("ngIf",i.idxDetailIdentification!==r),Rr(1),Pa("ngIf",i.idxDetailIdentification===r)}}function hf(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"ul",28),xa(2,df,9,4,"li",29),Ea(),Fa(3,"hr",30),Ea()),2&e){var n=ja();Rr(2),Pa("ngForOf",n.allIdentifications)}}function ff(e,t){1&e&&Fa(0,"img",42)}function gf(e,t){if(1&e&&Fa(0,"img",43),2&e){var n=ja(2);Ha("src",null==n.identificationDetailView.organization?null:n.identificationDetailView.organization.logo,lr)}}function vf(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"div",36),Ma(2,"div",37),Ma(3,"span",38),Xa(4),Ea(),xa(5,ff,1,0,"img",39),xa(6,gf,1,1,"img",40),Ma(7,"p"),Xa(8,"Name: "),Ma(9,"span",41),Xa(10),Ea(),Ea(),Ma(11,"p"),Xa(12,"Adresse: "),Ma(13,"span",41),Xa(14),Ea(),Ea(),Ea(),Ea(),Ea()),2&e){var n=ja();Rr(4),es(n.getDetailCardTitle()),Rr(1),Pa("ngIf",!(null!=n.identificationDetailView.organization&&n.identificationDetailView.organization.logo)),Rr(1),Pa("ngIf",null==n.identificationDetailView.organization?null:n.identificationDetailView.organization.logo),Rr(4),es(null==n.identificationDetailView.organization?null:n.identificationDetailView.organization.name),Rr(4),rs("",null==n.identificationDetailView.organization||null==n.identificationDetailView.organization.address?null:n.identificationDetailView.organization.address.street,", ",null==n.identificationDetailView.organization||null==n.identificationDetailView.organization.address?null:n.identificationDetailView.organization.address.zipCode," ",null==n.identificationDetailView.organization||null==n.identificationDetailView.organization.address?null:n.identificationDetailView.organization.address.city,"")}}function pf(e,t){if(1&e&&(Ma(0,"option",44),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n.type),Rr(1),ts(" ",n.text,"")}}var mf,yf=((mf=function(){function e(t,n,r){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.identService=r,this.orgaDisplayName="",this.allIdentifications=[],this.newIdentification={provider:ad.SelfIdent,organization:{address:{}}},this.showDetailView=!1,this.idxDetailIdentification=-1}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Organisations-Identifizierung"),this.orgaDisplayName=this.principalService.getOrgaName(),this.principal=this.principalService.getOrgaUser(),this.enumOptions=[{text:"Selbst-Identifikation",type:ad.SelfIdent},{text:"Identifikation via Robo-Ident",type:ad.RoboIdent},{text:"Identifikation via Veri-Ident",type:ad.VeriIdent},{text:"Identifikation via Video-Ident",type:ad.VideoIdent}],e.next=6,this._initMembers();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onSelectFile",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var n=new FileReader,r=e.target.files[0];if(r.size>5242880)return void alert("Das Logo darf maximal 5MB gro\xdf sein!");n.readAsDataURL(r),n.onload=function(e){var n,r;t.imageFromFile=null!==(r=null===(n=e.target)||void 0===n?void 0:n.result)&&void 0!==r?r:void 0}}}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._resetFileInput(),e.next=3,this.identService.getAllIdentificationsForOrga(this.principal.orgaId);case 3:this.allIdentifications=e.sent,this.imageFromFile=void 0,this.newIdentification={provider:ad.SelfIdent,organization:{id:this.principal.orgaId,address:{}}},this.hideIdentificationView();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getIdentificationProviderAsString",value:function(e){return ad[this.allIdentifications[e].provider]}},{key:"getIdentificationDescription",value:function(e){var t,n=this.allIdentifications[e];return"Vom: ".concat(n.doneAt.toLocaleDateString()," - ").concat(null===(t=n.organization)||void 0===t?void 0:t.name)}},{key:"removeIdentification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.identService.removeIdentification(this.allIdentifications[e].id);case 2:return t.next=4,this._initMembers();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"_resetFileInput",value:function(){document.getElementById("logo").value=""}},{key:"onReset",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initMembers();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"addNewIdentification",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newIdentification.organization.logo=this.imageFromFile,e.next=3,this.identService.addNewIdentification(this.newIdentification);case 3:if(!e.sent){e.next=8;break}return e.next=6,this._initMembers();case 6:e.next=9;break;case 8:alert("Das Abspeichern der Identifikationsdaten hat nicht geklappt...");case 9:case"end":return e.stop()}}),e,this)})))}},{key:"getDetailCardTitle",value:function(){var e=this.identificationDetailView;return e?"Identifiziert am ".concat(e.doneAt.toLocaleDateString()," \n                    durch Anbieter ").concat(ad[e.provider]):""}},{key:"hideIdentificationView",value:function(){this.showDetailView=!1,this.idxDetailIdentification=-1,this.identificationDetailView=void 0}},{key:"showIdentificationView",value:function(e){this.idxDetailIdentification=e,this.identificationDetailView=this.allIdentifications[e],this.identificationDetailView?this.showDetailView=!0:this.idxDetailIdentification=-1}}]),e}()).\u0275fac=function(e){return new(e||mf)(Ra(cd),Ra(hd),Ra(vd))},mf.\u0275cmp=ht({type:mf,selectors:[["app-orga-ident-mgmt"]],decls:55,vars:12,consts:[[4,"ngIf"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["identForm","ngForm"],[1,"input-field","col","s3"],[1,"input-field","col","s4"],["name","identTyp",1,"browser-default",3,"ngModel","ngModelChange"],["identTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["type","text","id","name","name","name","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["firstname","ngModel"],["for","name"],[1,"input-field","col","s4","m2"],["type","text","id","zipCode","name","zipCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["for","zipCode"],[1,"input-field","col","s6","m5"],["type","text","id","city","name","city","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],["for","city"],["type","text","id","street","name","street","required","",1,"form-control",3,"ngModel","ngModelChange"],["street","ngModel"],["for","street"],["id","logo","name","logo","type","file","accept","image/*",3,"change"],["width","100px","height","100px",3,"src"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-danger",3,"click"],["class","btn-primary",3,"click",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"card","grey","lighten-4"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],["class","left-float","width","100px","height","100px","alt","Kein Logo vorhanden",4,"ngIf"],["class","left-float","width","100px","height","100px","alt","Firmen-Logo",3,"src",4,"ngIf"],[1,"bold"],["width","100px","height","100px","alt","Kein Logo vorhanden",1,"left-float"],["width","100px","height","100px","alt","Firmen-Logo",1,"left-float",3,"src"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ma(0,"h6"),Xa(1),Ea(),xa(2,uf,3,0,"div",0),xa(3,hf,4,1,"div",0),xa(4,vf,15,7,"div",0),Ma(5,"div",1),Ma(6,"h6"),Xa(7,"Hier kannst du die Organisation (erneut) identifizieren lassen."),Ea(),Ma(8,"p"),Xa(9,'Hier w\xfcrde man in Wirklichkeit zu einem Identifikations-Anbieter "wechseln", welcher die eigentliche Identifikation vornimmt und die Daten an uns \xfcbermittelt.'),Ea(),Ma(10,"form",2,3),Va("ngSubmit",(function(){return t.addNewIdentification()})),Ma(12,"div",1),Ma(13,"div",4),Ma(14,"p"),Xa(15,"Identifikations-Anbieter"),Ea(),Ea(),Ma(16,"div",5),Ma(17,"select",6,7),Va("ngModelChange",(function(e){return t.newIdentification.provider=e})),xa(19,pf,2,2,"option",8),Ea(),Ea(),Ea(),Ma(20,"div",1),Ma(21,"div",9),Ma(22,"input",10,11),Va("ngModelChange",(function(e){return t.newIdentification.organization.name=e})),Ea(),Ma(24,"label",12),Xa(25,"Offizieller Name"),Ea(),Ea(),Ea(),Xa(26," Adresse des Firmensitzes: "),Ma(27,"div",1),Ma(28,"div",13),Ma(29,"input",14,15),Va("ngModelChange",(function(e){return t.newIdentification.organization.address.zipCode=e})),Ea(),Ma(31,"label",16),Xa(32,"Postleitzahl"),Ea(),Ea(),Ma(33,"div",17),Ma(34,"input",18,19),Va("ngModelChange",(function(e){return t.newIdentification.organization.address.city=e})),Ea(),Ma(36,"label",20),Xa(37,"Ort"),Ea(),Ea(),Ma(38,"div",17),Ma(39,"input",21,22),Va("ngModelChange",(function(e){return t.newIdentification.organization.address.street=e})),Ea(),Ma(41,"label",23),Xa(42,"Stra\xdfe incl. Hausnummer"),Ea(),Ea(),Ea(),Fa(43,"br"),Ma(44,"p"),Xa(45,"Firmenlogo hochladen...\xa0\xa0\xa0 "),Ma(46,"input",24),Va("change",(function(e){return t.onSelectFile(e)})),Ea(),Ea(),Fa(47,"br"),Fa(48,"img",25),Fa(49,"br"),Ma(50,"div",1),Ma(51,"button",26),Va("click",(function(){return t.onReset()})),Xa(52,"Verwerfen"),Ea(),Ma(53,"button",27),Xa(54,"\xdcbernehmen"),Ea(),Ea(),Ea(),Ea()),2&e){var n=Aa(11);Rr(1),ts(" Die Organisation ",t.orgaDisplayName," ist derzeit folgenderma\xdfen identifiziert:"),Rr(1),Pa("ngIf",0===t.allIdentifications.length),Rr(1),Pa("ngIf",t.allIdentifications.length>0),Rr(1),Pa("ngIf",t.showDetailView),Rr(13),Pa("ngModel",t.newIdentification.provider),Rr(2),Pa("ngForOf",t.enumOptions),Rr(3),Pa("ngModel",t.newIdentification.organization.name),Rr(7),Pa("ngModel",t.newIdentification.organization.address.zipCode),Rr(5),Pa("ngModel",t.newIdentification.organization.address.city),Rr(5),Pa("ngModel",t.newIdentification.organization.address.street),Rr(9),Pa("src",t.imageFromFile,lr),Rr(5),Pa("disabled",!n.valid)}},directives:[pc,Xh,Nd,Gh,lh,Fd,Yh,gc,Sd,tf,of,dh,mh],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:8rem}.list-item-text[_ngcontent-%COMP%]{width:30rem}.row[_ngcontent-%COMP%]{margin-bottom:0!important}select[_ngcontent-%COMP%]{border:3px solid teal}.card[_ngcontent-%COMP%]{width:40rem;height:12rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding-top:1rem!important}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3rem!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.left-float[_ngcontent-%COMP%]{float:left;margin-right:2rem}.liste[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;margin-left:1rem;color:#fff;cursor:pointer}"]}),mf);function kf(e,t){1&e&&(Ma(0,"div"),Ma(1,"p"),Xa(2,"Du bist noch gar nicht identifiziert."),Ea(),Ea())}function bf(e,t){if(1&e){var n=Na();Ma(0,"li"),Ma(1,"span",38),Xa(2),Ea(),Ma(3,"span",39),Xa(4),Ea(),Ma(5,"button",40),Va("click",(function(){qt(n);var e=t.index;return ja(2).removeIdentification(e)})),Xa(6,"L\xf6schen"),Ea(),Ea()}if(2&e){var r=t.index,i=ja(2);Rr(2),ts(" ",i.getIdentificationProviderAsString(r)," "),Rr(2),ts(" ",i.getIdentificationDescription(r)," ")}}function _f(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"ul",35),xa(2,bf,7,2,"li",36),Ea(),Fa(3,"hr",37),Ea()),2&e){var n=ja();Rr(2),Pa("ngForOf",n.allIdentificationsOfUser)}}function wf(e,t){if(1&e&&(Ma(0,"option",41),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n.type),Rr(1),ts(" ",n.text,"")}}var Cf,Of=((Cf=function(){function e(t,n,r){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.identService=r,this.usersDisplayName="",this.allIdentificationsOfUser=[],this.newIdentification={provider:ad.SelfIdent,account:{address:{}}}}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Identifikationsdaten-Verwaltung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this.enumOptions=[{text:"Selbst-Identifikation",type:ad.SelfIdent},{text:"Identifikation via Robo-Ident",type:ad.RoboIdent},{text:"Identifikation via Veri-Ident",type:ad.VeriIdent},{text:"Identifikation via Video-Ident",type:ad.VideoIdent}],e.next=6,this._initMembers();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onSelectFile",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var n=new FileReader,r=e.target.files[0];if(r.size>5242880)return void alert("Das Photo darf maximal 5MB gro\xdf sein!");n.readAsDataURL(r),n.onload=function(e){var n,r;t.imageFromFile=null!==(r=null===(n=e.target)||void 0===n?void 0:n.result)&&void 0!==r?r:void 0}}}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._resetFileInput(),e.next=3,this.identService.getAllIdentificationsForUser(this.principal.id);case 3:this.allIdentificationsOfUser=e.sent,this.imageFromFile=void 0,this.dateOfBirthAsString=void 0,this.newIdentification={provider:ad.SelfIdent,account:{id:this.principal.id,address:{}}};case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getIdentificationProviderAsString",value:function(e){return ad[this.allIdentificationsOfUser[e].provider]}},{key:"getIdentificationDescription",value:function(e){var t,n,r,i,a,s,o,u,c,l=this.allIdentificationsOfUser[e];return"Vom: ".concat(l.doneAt.toLocaleDateString()," - \n            ").concat(null===(t=l.account)||void 0===t?void 0:t.firstname," ").concat(null===(n=l.account)||void 0===n?void 0:n.lastname," ").concat(null===(r=l.account)||void 0===r?void 0:r.dateOfBirth.toLocaleDateString()," -\n            ").concat(null===(a=null===(i=l.account)||void 0===i?void 0:i.address)||void 0===a?void 0:a.zipCode," ").concat(null===(o=null===(s=l.account)||void 0===s?void 0:s.address)||void 0===o?void 0:o.city," ").concat(null===(c=null===(u=l.account)||void 0===u?void 0:u.address)||void 0===c?void 0:c.street)}},{key:"removeIdentification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.identService.removeIdentification(this.allIdentificationsOfUser[e].id);case 2:return t.next=4,this._initMembers();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"_resetFileInput",value:function(){document.getElementById("photo").value=""}},{key:"onReset",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initMembers();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"addNewIdentification",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dateOfBirthAsString&&(this.newIdentification.account.dateOfBirth=new Date(this.dateOfBirthAsString)),this.newIdentification.account.photo=this.imageFromFile,e.next=4,this.identService.addNewIdentification(this.newIdentification);case 4:if(!e.sent){e.next=9;break}return e.next=7,this._initMembers();case 7:e.next=10;break;case 9:alert("Das Abspeichern der Identifikationsdaten hat nicht geklappt...");case 10:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Cf)(Ra(cd),Ra(hd),Ra(vd))},Cf.\u0275cmp=ht({type:Cf,selectors:[["app-iam-ident-mgmt"]],decls:63,vars:13,consts:[[4,"ngIf"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["identForm","ngForm"],[1,"input-field","col","s3"],[1,"input-field","col","s4"],["name","identTyp",1,"browser-default",3,"ngModel","ngModelChange"],["identTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s6","m4"],["type","text","id","firstname","name","firstname","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["firstname","ngModel"],["for","firstname"],["type","text","id","lastname","name","lastname","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastname","ngModel"],["for","lastname"],[1,"input-field","col","s3","m3"],["type","date","id","dateOfBirth","name","dateOfBirth","required","",1,"datepicker",3,"ngModel","ngModelChange"],["dateOfBirth","ngModel"],["for","dateOfBirth"],[1,"input-field","col","s4","m2"],["type","text","id","zipCode","name","zipCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["for","zipCode"],[1,"input-field","col","s6","m5"],["type","text","id","city","name","city","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],["for","city"],["type","text","id","street","name","street","required","",1,"form-control",3,"ngModel","ngModelChange"],["street","ngModel"],["for","street"],["id","photo","name","photo","type","file","accept","image/*",3,"change"],["width","100px","height","100px",3,"src"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-danger",3,"click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ma(0,"h6"),Xa(1),Ea(),xa(2,kf,3,0,"div",0),xa(3,_f,4,1,"div",0),Ma(4,"div",1),Ma(5,"h6"),Xa(6,"Hier kannst du dich (erneut) identifizieren lassen."),Ea(),Ma(7,"p"),Xa(8,'Hier w\xfcrde man in Wirklichkeit zu einem Identifikations-Anbieter "wechseln", welcher die eigentliche Identifikation vornimmt und die Daten an uns \xfcbermittelt.'),Ea(),Ma(9,"form",2,3),Va("ngSubmit",(function(){return t.addNewIdentification()})),Ma(11,"div",1),Ma(12,"div",4),Ma(13,"p"),Xa(14,"Identifikations-Anbieter"),Ea(),Ea(),Ma(15,"div",5),Ma(16,"select",6,7),Va("ngModelChange",(function(e){return t.newIdentification.provider=e})),xa(18,wf,2,2,"option",8),Ea(),Ea(),Ea(),Ma(19,"div",1),Ma(20,"div",9),Ma(21,"input",10,11),Va("ngModelChange",(function(e){return t.newIdentification.account.firstname=e})),Ea(),Ma(23,"label",12),Xa(24,"Vorname"),Ea(),Ea(),Ma(25,"div",9),Ma(26,"input",13,14),Va("ngModelChange",(function(e){return t.newIdentification.account.lastname=e})),Ea(),Ma(28,"label",15),Xa(29,"Nachname"),Ea(),Ea(),Ma(30,"div",16),Ma(31,"input",17,18),Va("ngModelChange",(function(e){return t.dateOfBirthAsString=e})),Ea(),Ma(33,"label",19),Xa(34,"Geburtsdatum"),Ea(),Ea(),Ea(),Ma(35,"div",1),Ma(36,"div",20),Ma(37,"input",21,22),Va("ngModelChange",(function(e){return t.newIdentification.account.address.zipCode=e})),Ea(),Ma(39,"label",23),Xa(40,"Postleitzahl"),Ea(),Ea(),Ma(41,"div",24),Ma(42,"input",25,26),Va("ngModelChange",(function(e){return t.newIdentification.account.address.city=e})),Ea(),Ma(44,"label",27),Xa(45,"Ort"),Ea(),Ea(),Ma(46,"div",24),Ma(47,"input",28,29),Va("ngModelChange",(function(e){return t.newIdentification.account.address.street=e})),Ea(),Ma(49,"label",30),Xa(50,"Stra\xdfe incl. Hausnummer"),Ea(),Ea(),Ea(),Fa(51,"br"),Ma(52,"p"),Xa(53,"Bild f\xfcr die Identifikation hochladen...\xa0\xa0\xa0 "),Ma(54,"input",31),Va("change",(function(e){return t.onSelectFile(e)})),Ea(),Ea(),Fa(55,"br"),Fa(56,"img",32),Fa(57,"br"),Ma(58,"div",1),Ma(59,"button",33),Va("click",(function(){return t.onReset()})),Xa(60,"Verwerfen"),Ea(),Ma(61,"button",34),Xa(62,"\xdcbernehmen"),Ea(),Ea(),Ea(),Ea()),2&e){var n=Aa(10);Rr(1),ts(" Hallo ",t.usersDisplayName,", \xfcber folgende Provider hast du dich identifzieren lassen:"),Rr(1),Pa("ngIf",0===t.allIdentificationsOfUser.length),Rr(1),Pa("ngIf",t.allIdentificationsOfUser.length>0),Rr(13),Pa("ngModel",t.newIdentification.provider),Rr(2),Pa("ngForOf",t.enumOptions),Rr(3),Pa("ngModel",t.newIdentification.account.firstname),Rr(5),Pa("ngModel",t.newIdentification.account.lastname),Rr(5),Pa("ngModel",t.dateOfBirthAsString),Rr(6),Pa("ngModel",t.newIdentification.account.address.zipCode),Rr(5),Pa("ngModel",t.newIdentification.account.address.city),Rr(5),Pa("ngModel",t.newIdentification.account.address.street),Rr(9),Pa("src",t.imageFromFile,lr),Rr(5),Pa("disabled",!n.valid)}},directives:[pc,Xh,Nd,Gh,lh,Fd,Yh,gc,Sd,tf,of,dh,mh],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:8em}.row[_ngcontent-%COMP%]{margin-bottom:0!important}select[_ngcontent-%COMP%]{border:3px solid teal}"]}),Cf),If=function(e){return e[e.FIBU=1]="FIBU",e[e.FOLDERS_AND_DOCS=2]="FOLDERS_AND_DOCS",e[e.BILANZ=3]="BILANZ",e[e.TAX=4]="TAX",e}({}),Sf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._value=e,r}return _createClass(n,[{key:"_subscribe",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new I;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),n}(A),xf=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Af={},Rf=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Uf(e,this.resultSelector))}}]),e}(),Uf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return _createClass(n,[{key:"_next",value:function(e){this.values.push(Af),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(z(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,i){var a=this.values,s=this.toRespond?a[n]===Af?--this.toRespond:this.toRespond:0;a[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(V),Pf=new w((function(e){return e.complete()}));function Tf(e){return e?function(e){return new w((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Pf}function Mf(e){return new w((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?G(n):Tf()).subscribe(t)}))}function Ef(){return Z(1)}var Ff=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function Nf(e){return function(t){return 0===e?Tf():t.lift(new Df(e))}}var Df=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Ff}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new zf(e,this.total))}}]),e}(),zf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return _createClass(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}(v);function Vf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jf;return function(t){return t.lift(new Bf(e))}}var Bf=function(){function e(t){_classCallCheck(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Lf(e,this.errorFactory))}}]),e}(),Lf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(v);function jf(){return new xf}function Hf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new Gf(e))}}var Gf=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Wf(e,this.defaultValue))}}]),e}(),Wf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return _createClass(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(v);function qf(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ru((function(t,n){return e(t,n,r)})):y,Nf(1),n?Hf(t):Vf((function(){return new xf})))}}function Kf(e){return function(t){var n=new Zf(e),r=t.lift(n);return n.caught=r}}var Zf=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new $f(e,this.selector,this.caught))}}]),e}(),$f=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e)).selector=r,a.caught=i,a}return _createClass(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(a){return void _get(_getPrototypeOf(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var r=new P(this,void 0,void 0);this.add(r);var i=z(this,t,void 0,void 0,r);i!==r&&this.add(i)}}}]),n}(V);function Jf(e){return function(t){return 0===e?Tf():t.lift(new Qf(e))}}var Qf=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Ff}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Yf(e,this.total))}}]),e}(),Yf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return _createClass(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(v);function Xf(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ru((function(t,n){return e(t,n,r)})):y,Jf(1),n?Hf(t):Vf((function(){return new xf})))}}var eg=function(){function e(t,n,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=n,this.source=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new tg(e,this.predicate,this.thisArg,this.source))}}]),e}(),tg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;return _classCallCheck(this,n),(s=t.call(this,e)).predicate=r,s.thisArg=i,s.source=a,s.index=0,s.thisArg=i||_assertThisInitialized(s),s}return _createClass(n,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(v);function ng(e,t){return"function"==typeof t?function(n){return n.pipe(ng((function(n,r){return G(e(n,r)).pipe(B((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new rg(e))}}var rg=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ig(e,this.project))}}]),e}(),ig=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new P(this,t,n),a=this.destination;a.add(i),this.innerSubscription=z(this,e,void 0,void 0,i),this.innerSubscription!==i&&a.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}}]),n}(V);function ag(){return Ef()(xu.apply(void 0,arguments))}function sg(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new og(e,t,n))}}var og=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ug(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),ug=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;return _classCallCheck(this,n),(s=t.call(this,e)).accumulator=r,s._seed=i,s.hasSeed=a,s.index=0,s}return _createClass(n,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),n}(v);function cg(){}function lg(e,t,n){return function(r){return r.lift(new hg(e,t,n))}}var dg,hg=function(){function e(t,n,r){_classCallCheck(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new fg(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),fg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,a,s){var o;return _classCallCheck(this,n),(o=t.call(this,e))._tapNext=cg,o._tapError=cg,o._tapComplete=cg,o._tapError=a||cg,o._tapComplete=s||cg,r(i)?(o._context=_assertThisInitialized(o),o._tapNext=i):i&&(o._context=i,o._tapNext=i.next||cg,o._tapError=i.error||cg,o._tapComplete=i.complete||cg),o}return _createClass(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(v),gg=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new vg(e,this.callback))}}]),e}(),vg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).add(new h(r)),i}return n}(v),pg=function e(t,n){_classCallCheck(this,e),this.id=t,this.url=n},mg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=s,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(pg),yg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(pg),kg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).reason=i,a}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(pg),bg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).error=i,a}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(pg),_g=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pg),wg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pg),Cg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a,s){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o.shouldActivate=s,o}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(pg),Og=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pg),Ig=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pg),Sg=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),xg=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Ag=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Rg=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Ug=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Pg=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Tg=function(){function e(t,n,r){_classCallCheck(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),Mg=((dg=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||dg)},dg.\u0275cmp=ht({type:dg,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Fa(0,"router-outlet")},directives:function(){return[Bp]},encapsulation:2}),dg),Eg=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function Fg(e){return new Eg(e)}function Ng(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Dg(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var s=r[a],o=e[a];if(s.startsWith(":"))i[s.substring(1)]=o;else if(s!==o.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}var zg=function e(t,n){_classCallCheck(this,e),this.routes=t,this.module=n};function Vg(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];Bg(r,Lg(t,r))}}function Bg(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&Vg(e.children,t)}function Lg(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function jg(e){var t=e.children&&e.children.map(jg),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Mg),n}function Hg(e,t){var n,r=Object.keys(e),i=Object.keys(t);if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!Gg(e[n=r[a]],t[n]))return!1;return!0}function Gg(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function Wg(e){return Array.prototype.concat.apply([],e)}function qg(e){return e.length>0?e[e.length-1]:null}function Kg(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Zg(e){return za(e)?e:Da(e)?G(Promise.resolve(e)):xu(e)}function $g(e,t,n){return n?function(e,t){return Hg(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Xg(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return Gg(e[n],t[n])}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!Xg(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Xg(n.segments,i))return!1;for(var a in r.children){if(!n.children[a])return!1;if(!e(n.children[a],r.children[a]))return!1}return!0}var s=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Xg(n.segments,s)&&!!n.children.primary&&t(n.children.primary,r,o)}(t,n,n.segments)}(e.root,t.root)}var Jg=function(){function e(t,n,r){_classCallCheck(this,e),this.root=t,this.queryParams=n,this.fragment=r}return _createClass(e,[{key:"toString",value:function(){return rv.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Fg(this.queryParams)),this._queryParamMap}}]),e}(),Qg=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.segments=t,this.children=n,this.parent=null,Kg(n,(function(e,t){return e.parent=r}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return iv(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),Yg=function(){function e(t,n){_classCallCheck(this,e),this.path=t,this.parameters=n}return _createClass(e,[{key:"toString",value:function(){return lv(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Fg(this.parameters)),this._parameterMap}}]),e}();function Xg(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function ev(e,t){var n=[];return Kg(e.children,(function(e,r){"primary"===r&&(n=n.concat(t(e,r)))})),Kg(e.children,(function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))})),n}var tv=function e(){_classCallCheck(this,e)},nv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new vv(e);return new Jg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){return"".concat("/"+function e(t,n){if(!t.hasChildren())return iv(t);if(n){var r=t.children.primary?e(t.children.primary,!1):"",i=[];return Kg(t.children,(function(t,n){"primary"!==n&&i.push("".concat(n,":").concat(e(t,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var a=ev(t,(function(n,r){return"primary"===r?[e(t.children.primary,!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(iv(t),"/(").concat(a.join("//"),")")}(e.root,!0)).concat((t=e.queryParams,n=Object.keys(t).map((function(e){var n=t[e];return Array.isArray(n)?n.map((function(t){return"".concat(sv(e),"=").concat(sv(t))})).join("&"):"".concat(sv(e),"=").concat(sv(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"");var t,n}}]),e}(),rv=new nv;function iv(e){return e.segments.map((function(e){return lv(e)})).join("/")}function av(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sv(e){return av(e).replace(/%3B/gi,";")}function ov(e){return av(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uv(e){return decodeURIComponent(e)}function cv(e){return uv(e.replace(/\+/g,"%20"))}function lv(e){return"".concat(ov(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(ov(e),"=").concat(ov(t[e]))})).join("")));var t}var dv=/^[^\/()?;=#]+/;function hv(e){var t=e.match(dv);return t?t[0]:""}var fv=/^[^=?&#]+/,gv=/^[^?&#]+/,vv=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qg([],{}):new Qg([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Qg(e,t)),n}},{key:"parseSegment",value:function(){var e=hv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Yg(uv(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=hv(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=hv(this.remaining);r&&(n=r,this.capture(n))}e[uv(t)]=uv(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(fv);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(gv);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=cv(t),a=cv(n);if(e.hasOwnProperty(i)){var s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(a)}else e[i]=a}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=hv(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var a=this.parseChildren();t[i]=1===Object.keys(a).length?a.primary:new Qg([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),pv=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=mv(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=mv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=yv(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return yv(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function mv(e,t){if(e===t.value)return t;var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var i=mv(e,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function yv(e,t){if(e===t.value)return[t];var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var i=yv(e,n.value);if(i.length)return i.unshift(t),i}}catch(a){r.e(a)}finally{r.f()}return[]}var kv=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.children=n}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function bv(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var _v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).snapshot=r,xv(_assertThisInitialized(i),e),i}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(pv);function wv(e,t){var n=function(e,t){var n=new Iv([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Sv("",new kv(n,[]))}(e,t),r=new Sf([new Yg("",{})]),i=new Sf({}),a=new Sf({}),s=new Sf({}),o=new Sf(""),u=new Cv(r,i,s,o,a,"primary",t,n.root);return u.snapshot=n.root,new _v(new kv(u,[]),n)}var Cv=function(){function e(t,n,r,i,a,s,o,u){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=s,this.component=o,this._futureSnapshot=u}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(B((function(e){return Fg(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B((function(e){return Fg(e)})))),this._queryParamMap}}]),e}();function Ov(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Iv=function(){function e(t,n,r,i,a,s,o,u,c,l,d){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=s,this.component=o,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=d}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Fg(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Fg(this.queryParams)),this._queryParamMap}}]),e}(),Sv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,r)).url=e,xv(_assertThisInitialized(i),r),i}return _createClass(n,[{key:"toString",value:function(){return Av(this._root)}}]),n}(pv);function xv(e,t){t.value._routerState=e,t.children.forEach((function(t){return xv(e,t)}))}function Av(e){var t=e.children.length>0?" { ".concat(e.children.map(Av).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Rv(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Hg(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Hg(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Hg(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Hg(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Uv(e,t){var n,r;return Hg(e.params,t.params)&&Xg(n=e.url,r=t.url)&&n.every((function(e,t){return Hg(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||Uv(e.parent,t.parent))}function Pv(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Tv(e,t,n,r,i){var a={};return r&&Kg(r,(function(e,t){a[t]=Array.isArray(e)?e.map((function(e){return""+e})):""+e})),new Jg(n.root===e?t:function e(t,n,r){var i={};return Kg(t.children,(function(t,a){i[a]=t===n?r:e(t,n,r)})),new Qg(t.segments,i)}(n.root,e,t),a,i)}var Mv=function(){function e(t,n,r){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Pv(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(i&&i!==qg(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),Ev=function e(t,n,r){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function Fv(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function Nv(e,t,n){if(e||(e=new Qg([],{})),0===e.segments.length&&e.hasChildren())return Dv(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var s=e.segments[i],o=Fv(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&u&&"object"==typeof u&&void 0===u.outlets){if(!Lv(o,u,s))return a;r+=2}else{if(!Lv(o,{},s))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new Qg(e.segments.slice(0,r.pathIndex),{});return a.children.primary=new Qg(e.segments.slice(r.pathIndex),e.children),Dv(a,0,i)}return r.match&&0===i.length?new Qg(e.segments,{}):r.match&&!e.hasChildren()?zv(e,t,n):r.match?Dv(e,0,i):zv(e,t,n)}function Dv(e,t,n){if(0===n.length)return new Qg(e.segments,{});var r=function(e){return"object"!=typeof e[0]||void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),i={};return Kg(r,(function(n,r){null!==n&&(i[r]=Nv(e.children[r],t,n))})),Kg(e.children,(function(e,t){void 0===r[t]&&(i[t]=e)})),new Qg(e.segments,i)}function zv(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var a=Vv(n[i].outlets);return new Qg(r,a)}if(0===i&&Pv(n[0]))r.push(new Yg(e.segments[t].path,n[0])),i++;else{var s=Fv(n[i]),o=i<n.length-1?n[i+1]:null;s&&o&&Pv(o)?(r.push(new Yg(s,Bv(o))),i+=2):(r.push(new Yg(s,{})),i++)}}return new Qg(r,{})}function Vv(e){var t={};return Kg(e,(function(e,n){null!==e&&(t[n]=zv(new Qg([],{}),0,e))})),t}function Bv(e){var t={};return Kg(e,(function(e,n){return t[n]=""+e})),t}function Lv(e,t,n){return e==n.path&&Hg(t,n.parameters)}var jv=function(){function e(t,n,r,i){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Rv(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=bv(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]})),Kg(i,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var i=bv(e),a=e.value.component?r.children:t;Kg(i,(function(e,t){return n.deactivateRouteAndItsChildren(e,a)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=bv(t);e.children.forEach((function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Pg(e.value.snapshot))})),e.children.length&&this.forwardEvent(new Rg(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Rv(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var o=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(o.contexts),s.attachRef=o.componentRef,s.route=o.route.value,s.outlet&&s.outlet.attach(o.componentRef,o.route.value),Hv(o.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=c,s.outlet&&s.outlet.activateWith(r,c),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function Hv(e){Rv(e.value),e.children.forEach(Hv)}function Gv(e){return"function"==typeof e}function Wv(e){return e instanceof Jg}var qv=function e(t){_classCallCheck(this,e),this.segmentGroup=t||null},Kv=function e(t){_classCallCheck(this,e),this.urlTree=t};function Zv(e){return new w((function(t){return t.error(new qv(e))}))}function $v(e){return new w((function(t){return t.error(new Kv(e))}))}function Jv(e){return new w((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var Qv=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=t.get(et)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(B((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(Kf((function(t){if(t instanceof Kv)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof qv)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(B((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(Kf((function(e){if(e instanceof qv)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new Qg([],{primary:e}):e;return new Jg(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(B((function(e){return new Qg([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return xu({});var a=[],s=[],o={};return Kg(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(e,t,c,u)).pipe(B((function(e){return o[i]=e})));"primary"===i?a.push(l):s.push(l)})),xu.apply(null,a.concat(s)).pipe(Ef(),qf(),B((function(){return o})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,i,a){var s=this;return xu.apply(void 0,_toConsumableArray(n)).pipe(B((function(o){return s.expandSegmentAgainstRoute(e,t,n,o,r,i,a).pipe(Kf((function(e){if(e instanceof qv)return xu(null);throw e})))})),Ef(),Xf((function(e){return!!e})),Kf((function(e,n){if(e instanceof xf||"EmptyError"===e.name){if(s.noLeftoversInUrl(t,r,i))return xu(new Qg([],{}));throw new qv(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,s){return tp(r)!==a?Zv(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):Zv(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?$v(a):this.lineralizeSegments(n,a).pipe(W((function(n){var a=new Qg(n,{});return i.expandSegment(e,a,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var s=this,o=Yv(t,r,i),u=o.matched,c=o.consumedSegments,l=o.lastChild,d=o.positionalParamSegments;if(!u)return Zv(t);var h=this.applyRedirectCommands(c,r.redirectTo,d);return r.redirectTo.startsWith("/")?$v(h):this.lineralizeSegments(r,h).pipe(W((function(r){return s.expandSegment(e,t,n,r.concat(i.slice(l)),a,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(B((function(e){return n._loadedConfig=e,new Qg(r,{})}))):xu(new Qg(r,{}));var a=Yv(t,n,r),s=a.matched,o=a.consumedSegments,u=a.lastChild;if(!s)return Zv(t);var c=r.slice(u);return this.getChildConfig(e,n,r).pipe(W((function(e){var n=e.module,r=e.routes,a=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return ep(e,t,n)&&"primary"!==tp(n)}))}(e,n,r)?{segmentGroup:Xv(new Qg(t,function(e,t){var n={};n.primary=t;var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;""===a.path&&"primary"!==tp(a)&&(n[tp(a)]=new Qg([],{}))}}catch(s){i.e(s)}finally{i.f()}return n}(r,new Qg(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return ep(e,t,n)}))}(e,n,r)?{segmentGroup:Xv(new Qg(e.segments,function(e,t,n,r){var i,a={},s=_createForOfIteratorHelper(n);try{for(s.s();!(i=s.n()).done;){var o=i.value;ep(e,t,o)&&!r[tp(o)]&&(a[tp(o)]=new Qg([],{}))}}catch(u){s.e(u)}finally{s.f()}return Object.assign(Object.assign({},r),a)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,o,c,r),s=a.segmentGroup,u=a.slicedSegments;return 0===u.length&&s.hasChildren()?i.expandChildren(n,r,s).pipe(B((function(e){return new Qg(o,e)}))):0===r.length&&0===u.length?xu(new Qg(o,{})):i.expandSegment(n,s,r,u,"primary",!0).pipe(B((function(e){return new Qg(o.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?xu(new zg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?xu(t._loadedConfig):function(e,t,n){var r,i=t.canLoad;return i&&0!==i.length?G(i).pipe(B((function(r){var i,a=e.get(r);if(function(e){return e&&Gv(e.canLoad)}(a))i=a.canLoad(t,n);else{if(!Gv(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return Zg(i)}))).pipe(Ef(),(r=function(e){return!0===e},function(e){return e.lift(new eg(r,void 0,e))})):xu(!0)}(e.injector,t,n).pipe(W((function(n){return n?r.configLoader.load(e.injector,t).pipe(B((function(e){return t._loadedConfig=e,e}))):function(e){return new w((function(t){return t.error(Ng("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):xu(new zg([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return xu(n);if(r.numberOfChildren>1||!r.children.primary)return Jv(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new Jg(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return Kg(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),s={};return Kg(t.children,(function(t,a){s[a]=i.createSegmentGroup(e,t,n,r)})),new Qg(a,s)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map((function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===e.path)return t.splice(r),a;r++}}catch(s){i.e(s)}finally{i.f()}return e}}]),e}();function Yv(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||Dg)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Xv(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new Qg(e.segments.concat(t.segments),t.children)}return e}function ep(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function tp(e){return e.outlet||"primary"}var np=function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]},rp=function e(t,n){_classCallCheck(this,e),this.component=t,this.route=n};function ip(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function ap(e,t,n){var r=bv(e),i=e.value;Kg(r,(function(e,r){ap(e,i.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new rp(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var sp=Symbol("INITIAL_VALUE");function op(){return ng((function(e){return(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,i=null;return U(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),$(t,i).lift(new Rf(r))}).apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(Jf(1),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return U(r)?(t.pop(),function(e){return ag(t,e,r)}):function(e){return ag(t,e)}}(sp))})))).pipe(sg((function(e,t){var n=!1;return t.reduce((function(e,r,i){if(e!==sp)return e;if(r===sp&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||Wv(r))return r}return e}),e)}),sp),Ru((function(e){return e!==sp})),B((function(e){return Wv(e)?e:!0===e})),Jf(1))}))}function up(e,t){return null!==e&&t&&t(new Ug(e)),xu(!0)}function cp(e,t){return null!==e&&t&&t(new Ag(e)),xu(!0)}function lp(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?xu(r.map((function(r){return Mf((function(){var i,a=ip(r,t,n);if(function(e){return e&&Gv(e.canActivate)}(a))i=Zg(a.canActivate(t,e));else{if(!Gv(a))throw new Error("Invalid CanActivate guard");i=Zg(a(t,e))}return i.pipe(Xf())}))}))).pipe(op()):xu(!0)}function dp(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return Mf((function(){return xu(t.guards.map((function(i){var a,s=ip(i,t.node,n);if(function(e){return e&&Gv(e.canActivateChild)}(s))a=Zg(s.canActivateChild(r,e));else{if(!Gv(s))throw new Error("Invalid CanActivateChild guard");a=Zg(s(r,e))}return a.pipe(Xf())}))).pipe(op())}))}));return xu(i).pipe(op())}var hp=function e(){_classCallCheck(this,e)},fp=function(){function e(t,n,r,i,a,s){_classCallCheck(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=s}return _createClass(e,[{key:"recognize",value:function(){try{var e=pp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Iv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new kv(n,t),i=new Sv(this.url,r);return this.inheritParamsAndData(i._root),xu(i)}catch(a){return new w((function(e){return e.error(a)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Ov(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,i=ev(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},i.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),i=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[e.value.outlet]=e.value})),i.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),i}},{key:"processSegment",value:function(e,t,n,r){var i,a=_createForOfIteratorHelper(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;try{return this.processSegmentAgainstRoute(s,t,n,r)}catch(o){if(!(o instanceof hp))throw o}}}catch(u){a.e(u)}finally{a.f()}if(this.noLeftoversInUrl(t,n,r))return[];throw new hp}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new hp;if((e.outlet||"primary")!==r)throw new hp;var i,a=[],s=[];if("**"===e.path){var o=n.length>0?qg(n).parameters:{};i=new Iv(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kp(e),r,e.component,e,gp(t),vp(t)+n.length,bp(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new hp;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||Dg)(n,e,t);if(!r)throw new hp;var i={};Kg(r.posParams,(function(e,t){i[t]=e.path}));var a=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(t,e,n);a=u.consumedSegments,s=n.slice(u.lastChild),i=new Iv(a,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kp(e),r,e.component,e,gp(t),vp(t)+a.length,bp(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=pp(t,a,s,c,this.relativeLinkResolution),d=l.segmentGroup,h=l.slicedSegments;if(0===h.length&&d.hasChildren()){var f=this.processChildren(c,d);return[new kv(i,f)]}if(0===c.length&&0===h.length)return[new kv(i,[])];var g=this.processSegment(c,d,h,"primary");return[new kv(i,g)]}}]),e}();function gp(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function vp(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function pp(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some((function(n){return mp(e,t,n)&&"primary"!==yp(n)}))}(e,n,r)){var a=new Qg(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var a,s=_createForOfIteratorHelper(n);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(""===o.path&&"primary"!==yp(o)){var u=new Qg([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,i[yp(o)]=u}}}catch(c){s.e(c)}finally{s.f()}return i}(e,t,r,new Qg(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return mp(e,t,n)}))}(e,n,r)){var s=new Qg(e.segments,function(e,t,n,r,i,a){var s,o={},u=_createForOfIteratorHelper(r);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(mp(e,n,c)&&!i[yp(c)]){var l=new Qg([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===a?e.segments.length:t.length,o[yp(c)]=l}}}catch(d){u.e(d)}finally{u.f()}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}var o=new Qg(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function mp(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function yp(e){return e.outlet||"primary"}function kp(e){return e.data||{}}function bp(e){return e.resolve||{}}function _p(e,t,n,r){var i=ip(e,t,r);return Zg(i.resolve?i.resolve(t,n):i(t,n))}function wp(e){return function(t){return t.pipe(ng((function(t){var n=e(t);return n?G(n).pipe(B((function(){return t}))):G([t])})))}}var Cp=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),Op=new Le("ROUTES"),Ip=function(){function e(t,n,r,i){_classCallCheck(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(B((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new zg(Wg(i.injector.get(Op)).map(jg),i)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?G(this.loader.load(e)):Zg(e()).pipe(W((function(e){return e instanceof tt?xu(e):G(t.compiler.compileModuleAsync(e))})))}}]),e}(),Sp=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function xp(e){throw e}function Ap(e,t,n){return t.parse("/")}function Rp(e,t){return xu(null)}var Up,Pp,Tp=((Pp=function(){function e(t,n,r,i,a,s,o,u){var c=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new A,this.errorHandler=xp,this.malformedUriErrorHandler=Ap,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Rp,afterPreactivation:Rp},this.urlHandlingStrategy=new Sp,this.routeReuseStrategy=new Cp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=a.get(et),this.console=a.get(Ao);var l=a.get(jo);this.isNgZoneEnabled=l instanceof jo,this.resetConfig(u),this.currentUrlTree=new Jg(new Qg([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ip(s,o,(function(e){return c.triggerEvent(new Sg(e))}),(function(e){return c.triggerEvent(new xg(e))})),this.routerState=wv(this.currentUrlTree,this.rootComponentType),this.transitions=new Sf({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Ru((function(e){return 0!==e.id})),B((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),ng((function(e){var r,i,a,s,o=!1,u=!1;return xu(e).pipe(lg((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),ng((function(e){var r,i,a,s,o=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||o)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return xu(e).pipe(ng((function(e){var r=t.transitions.getValue();return n.next(new mg(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Pf:[e]})),ng((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,i=t.configLoader,a=t.urlSerializer,s=t.config,function(e){return e.pipe(ng((function(e){return function(e,t,n,r,i){return new Qv(e,t,n,r,i).apply()}(r,i,a,e.extractedUrl,s).pipe(B((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),lg((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,n,r,i,a){return function(r){return r.pipe(W((function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new fp(e,t,n,r,i,a).recognize()}(e,n,r.urlAfterRedirects,(s=r.urlAfterRedirects,t.serializeUrl(s)),i,a).pipe(B((function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})})));var s})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),lg((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),lg((function(e){var r=new _g(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(o&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,c=e.extractedUrl,l=e.source,d=e.restoredState,h=e.extras,f=new mg(u,t.serializeUrl(c),l,d);n.next(f);var g=wv(c,t.rootComponentType).snapshot;return xu(Object.assign(Object.assign({},e),{targetSnapshot:g,urlAfterRedirects:c,extras:Object.assign(Object.assign({},h),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Pf})),wp((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,s=e.extras,o=s.skipLocationChange,u=s.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!o,replaceUrl:!!u})})),lg((function(e){var n=new wg(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),B((function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,r=e.currentSnapshot,i=t.rootContexts,a=n._root,function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},s=bv(n);return t.children.forEach((function(t){!function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},s=t.value,o=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){var c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Xg(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Xg(e.url,t.url)||!Hg(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uv(e,t)||!Hg(e.queryParams,t.queryParams);case"paramsChange":default:return!Uv(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?a.canActivateChecks.push(new np(i)):(s.data=o.data,s._resolvedData=o._resolvedData),e(t,n,s.component?u?u.children:null:r,i,a),c&&a.canDeactivateChecks.push(new rp(u&&u.outlet&&u.outlet.component||null,o))}else o&&ap(n,u,a),a.canActivateChecks.push(new np(i)),e(t,null,s.component?u?u.children:null:r,i,a)}(t,s[t.value.outlet],r,i.concat([t.value]),a),delete s[t.value.outlet]})),Kg(s,(function(e,t){return ap(e,r.getContext(t),a)})),a}(a,r?r._root:null,i,[a.value]))});var n,r,i,a})),function(e,t){return function(n){return n.pipe(W((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,s=a.canActivateChecks,o=a.canDeactivateChecks;return 0===o.length&&0===s.length?xu(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return G(e).pipe(W((function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return a&&0!==a.length?xu(a.map((function(a){var s,o=ip(a,t,i);if(function(e){return e&&Gv(e.canDeactivate)}(o))s=Zg(o.canDeactivate(e,t,n,r));else{if(!Gv(o))throw new Error("Invalid CanDeactivate guard");s=Zg(o(e,t,n,r))}return s.pipe(Xf())}))).pipe(op()):xu(!0)}(e.component,e.route,n,t,r)})),Xf((function(e){return!0!==e}),!0))}(o,r,i,e).pipe(W((function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return G(t).pipe(Au((function(t){return G([cp(t.route.parent,r),up(t.route,r),dp(e,t.path,n),lp(e,t.route,n)]).pipe(Ef(),Xf((function(e){return!0!==e}),!0))})),Xf((function(e){return!0!==e}),!0))}(r,s,e,t):xu(n)})),B((function(e){return Object.assign(Object.assign({},n),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),lg((function(e){if(Wv(e.guardsResult)){var n=Ng('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),lg((function(e){var n=new Cg(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),Ru((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new kg(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),wp((function(e){if(e.guards.canActivateChecks.length)return xu(e).pipe(lg((function(e){var n=new Og(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),(n=t.paramsInheritanceStrategy,r=t.ngModule.injector,function(e){return e.pipe(W((function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;return i.length?G(i).pipe(Au((function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return xu({});if(1===i.length){var a=i[0];return _p(e[a],t,n,r).pipe(B((function(e){return _defineProperty({},a,e)})))}var s={};return G(i).pipe(W((function(i){return _p(e[i],t,n,r).pipe(B((function(e){return s[i]=e,e})))}))).pipe(qf(),B((function(){return s})))}(e._resolve,e,t,r).pipe(B((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Ov(e,n).resolve),null})))}(e.route,t,n,r)})),function(e,t){return arguments.length>=2?function(n){return k(sg(e,t),Nf(1),Hf(t))(n)}:function(t){return k(sg((function(t,n,r){return e(t,n,r+1)})),Nf(1))(t)}}((function(e,t){return e})),B((function(t){return e}))):xu(e)})))}),lg((function(e){var n=new Ig(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})));var n,r})),wp((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,s=e.extras,o=s.skipLocationChange,u=s.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!o,replaceUrl:!!u})})),B((function(e){var n=function(e,t,n){var r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var a=function(t,n,r){return n.children.map((function(n){var i,a=_createForOfIteratorHelper(r.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(t.shouldReuseRoute(s.value.snapshot,n.value))return e(t,n,s)}}catch(o){a.e(o)}finally{a.f()}return e(t,n)}))}(t,n,r);return new kv(i,a)}var s=t.retrieve(n.value);if(s){var o=s.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,o),o}var u,c=new Cv(new Sf((u=n.value).url),new Sf(u.params),new Sf(u.queryParams),new Sf(u.fragment),new Sf(u.data),u.outlet,u.component,u),l=n.children.map((function(n){return e(t,n)}));return new kv(c,l)}(e,t._root,n?n._root:void 0);return new _v(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})})),lg((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(i=t.rootContexts,a=t.routeReuseStrategy,s=function(e){return t.triggerEvent(e)},B((function(e){return new jv(a,e.targetRouterState,e.currentRouterState,s).activate(i),e}))),lg({next:function(){o=!0},complete:function(){o=!0}}),(r=function(){if(!o&&!u){t.resetUrlToCurrentUrlTree();var r=new kg(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new gg(r))}),Kf((function(r){if(u=!0,(o=r)&&o.ngNavigationCancelingError){var i=Wv(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var a=new kg(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),i?setTimeout((function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);return t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var s=new bg(e.id,t.serializeUrl(e.extractedUrl),r);n.next(s);try{e.resolve(t.errorHandler(r))}catch(c){e.reject(c)}}var o;return Pf})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){Vg(e),this.config=e.map(jg),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,a=t.preserveQueryParams,s=t.queryParamsHandling,o=t.preserveFragment;sr()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i,l=null;if(s)switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=a?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return Tv(t.root,t.root,t,r,i);var a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Mv(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return Kg(r.outlets,(function(e,t){a[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:a}])}if(r.segmentPath)return[].concat(_toConsumableArray(e),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(e),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(_toConsumableArray(e),[r])}),[]);return new Mv(n,t,r)}(n);if(a.toRoot())return Tv(t.root,new Qg([],{}),t,r,i);var s=function(e,t,n){if(e.isAbsolute)return new Ev(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Ev(n.snapshot._urlSegment,!0,0);var r=Pv(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Ev(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(a,t,e),o=s.processChildren?Dv(s.segmentGroup,s.index,a.commands):Nv(s.segmentGroup,s.index,a.commands);return Tv(s.segmentGroup,o,t,r,i)}(u,this.currentUrlTree,e,l,c)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};sr()&&this.isNgZoneEnabled&&!jo.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Wv(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(Wv(e))return $g(this.currentUrlTree,e,t);var n=this.parseUrl(e);return $g(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new yg(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var a,s,o,u=this.getTransition();if(u&&"imperative"!==t&&"imperative"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"hashchange"==t&&"popstate"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"popstate"==t&&"hashchange"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);i?(a=i.resolve,s=i.reject,o=i.promise):o=new Promise((function(e,t){a=e,s=t}));var c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:a,reject:s,promise:o,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),o.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),e}()).\u0275fac=function(e){Ua()},Pp.\u0275dir=yt({type:Pp}),Pp),Mp=((Up=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=t.events.subscribe((function(e){e instanceof yg&&i.updateTargetUrlAndHref()}))}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:Ep(this.skipLocationChange),replaceUrl:Ep(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){sr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Ep(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Ep(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||Up)(Ra(Tp),Ra(Cv),Ra(Ku))},Up.\u0275dir=yt({type:Up,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Va("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(is("href",t.href,lr),Ia("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[hs]}),Up);function Ep(e){return""===e||!!e}var Fp,Np,Dp,zp=function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new Vp,this.attachRef=null},Vp=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new zp,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),Bp=((Fp=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new ko,this.deactivateEvents=new ko,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Lp(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}()).\u0275fac=function(e){return new(e||Fp)(Ra(Vp),Ra(Qs),Ra(Is),function(e,t){var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(On(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if("name"===a)return n[i+1];i+=2}}return null}(Kt()),Ra($i))},Fp.\u0275dir=yt({type:Fp,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Fp),Lp=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.childContexts=n,this.parent=r}return _createClass(e,[{key:"get",value:function(e,t){return e===Cv?this.route:e===Vp?this.childContexts:this.parent.get(e,t)}}]),e}(),jp=function e(){_classCallCheck(this,e)},Hp=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return xu(null)}}]),e}(),Gp=((Dp=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Ip(n,r,(function(e){return t.triggerEvent(new Sg(e))}),(function(e){return t.triggerEvent(new xg(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Ru((function(e){return e instanceof yg})),Au((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(et);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var s=a._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children))}}catch(o){i.e(o)}finally{i.f()}return G(r).pipe(Z(),B((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(W((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||Dp)(Je(Tp),Je(lu),Je(zo),Je(da),Je(jp))},Dp.\u0275prov=he({token:Dp,factory:Dp.\u0275fac}),Dp),Wp=((Np=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof mg?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yg&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Tg&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Tg(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){Ua()},Np.\u0275dir=yt({type:Np}),Np),qp=new Le("ROUTER_CONFIGURATION"),Kp=new Le("ROUTER_FORROOT_GUARD"),Zp=[tc,{provide:tv,useClass:nv},{provide:Tp,useFactory:function(e,t,n,r,i,a,s){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new Tp(null,e,t,n,r,i,a,Wg(s));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),o.errorHandler&&(l.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(l.malformedUriErrorHandler=o.malformedUriErrorHandler),o.enableTracing){var d=Mu();l.events.subscribe((function(e){d.logGroup("Router Event: "+e.constructor.name),d.log(e.toString()),d.log(e),d.logGroupEnd()}))}return o.onSameUrlNavigation&&(l.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.urlUpdateStrategy&&(l.urlUpdateStrategy=o.urlUpdateStrategy),o.relativeLinkResolution&&(l.relativeLinkResolution=o.relativeLinkResolution),l},deps:[tv,Vp,tc,da,lu,zo,Op,qp,[function(){return function e(){_classCallCheck(this,e)}}(),new se],[function(){return function e(){_classCallCheck(this,e)}}(),new se]]},Vp,{provide:Cv,useFactory:function(e){return e.routerState.root},deps:[Tp]},{provide:lu,useClass:fu},Gp,Hp,function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(Kf((function(){return xu(null)})))}}]),e}(),{provide:qp,useValue:{enableTracing:!1}}];function $p(){return new nu("Router",Tp)}var Jp,Qp=((Jp=function(){function e(t,n){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Zp,tm(t),{provide:Kp,useFactory:em,deps:[[Tp,new se,new ue]]},{provide:qp,useValue:n||{}},{provide:Ku,useFactory:Xp,deps:[Nu,[new ae(Yu),new se],qp]},{provide:Wp,useFactory:Yp,deps:[Tp,wc,qp]},{provide:jp,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Hp},{provide:nu,multi:!0,useFactory:$p},[rm,{provide:bo,multi:!0,useFactory:im,deps:[rm]},{provide:om,useFactory:am,deps:[rm]},{provide:xo,multi:!0,useExisting:om}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[tm(t)]}}}]),e}()).\u0275mod=pt({type:Jp}),Jp.\u0275inj=fe({factory:function(e){return new(e||Jp)(Je(Kp,8),Je(Tp,8))}}),Jp);function Yp(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Wp(e,t,n)}function Xp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new ec(e,t):new Xu(e,t)}function em(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function tm(e){return[{provide:ha,multi:!0,useValue:e},{provide:Op,multi:!0,useValue:e}]}var nm,rm=((nm=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new A}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(Vu,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get(Tp),i=e.injector.get(qp);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?xu(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(qp),n=this.injector.get(Gp),r=this.injector.get(Wp),i=this.injector.get(Tp),a=this.injector.get(uu);e===a.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||nm)(Je(da))},nm.\u0275prov=he({token:nm,factory:nm.\u0275fac}),nm);function im(e){return e.appInitializer.bind(e)}function am(e){return e.bootstrapListener.bind(e)}var sm,om=new Le("Router Initializer"),um=function(e){return e.FolderRoot="FolderRoot",e.Folder="Folder",e.Fibu="Fibu",e.Bilanz="Bilanz",e.TaxPrivate="TaxPrivate",e.TaxCorporation="TaxCorporation",e}({}),cm=n("s3+Z"),lm=function(e){return e[e.OrganisationCreated=1]="OrganisationCreated",e[e.OrgaUserRemoved=2]="OrgaUserRemoved",e[e.OrganisationRemoved=3]="OrganisationRemoved",e[e.SubOrganizationRemoved=4]="SubOrganizationRemoved",e[e.SubOrgaUserRemoved=5]="SubOrgaUserRemoved",e[e.AccountDeleted=6]="AccountDeleted",e}({}),dm=((sm=function(){function e(t){var n=this;_classCallCheck(this,e),this.eventService=t,this.SUBST_FOR_TOTAL_LICENCES="-11",this.SUBST_FOR_FREE_LICENCES="-22",this.productSettings=[],this.licences=[],this.isActive=!0,this._initProductSettingsList(),this._initLicenceForOrga(),this.eventService.idmEvent.pipe(Object(cm.takeWhile)((function(){return n.isActive}))).subscribe((function(e){return n._onIdmEvent(e)}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"_onIdmEvent",value:function(e){switch(e.type){case lm.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser.id);break;case lm.OrganisationRemoved:this._onOrgaRemoval(e.organizationId)}}},{key:"_onOrgaUserRemoval",value:function(e){var t=this,n=this.licences.filter((function(t){return t.orgaUserId===e}));this.licences=this.licences.filter((function(t){return t.orgaUserId!==e})),n.forEach((function(e){if(e.numberOfLicences>0){var n=t.licences.find((function(n){return n.orgaId===e.orgaId&&n.orgaUserId===t.SUBST_FOR_FREE_LICENCES&&n.productId===e.productId}));n?n.numberOfLicences+=e.numberOfLicences:t.licences.push({orgaId:e.orgaId,orgaUserId:t.SUBST_FOR_FREE_LICENCES,productId:e.productId,numberOfLicences:e.numberOfLicences})}}))}},{key:"_onOrgaRemoval",value:function(e){this.licences=this.licences.filter((function(t){return t.orgaId!==e}))}},{key:"_initProductSettingsList",value:function(){this.productSettings.push({id:If.FIBU,name:"Finanzbuchf\xfchrung",licenceNeeded:!0,description:"Hier kannst du alles rund um die Finanzbuchf\xfchrung erledigen.",resourceTypes:[um.Fibu]}),this.productSettings.push({id:If.FOLDERS_AND_DOCS,name:"Belegverwaltung",description:"Hier befasst du dich mit Ordnern, Belegen etc..",resourceTypes:[um.FolderRoot,um.Folder]}),this.productSettings.push({id:If.BILANZ,name:"Jahresabschluss",licenceNeeded:!0,description:"Hier k\xfcmmerst du dich um den Jahresabschluss.",resourceTypes:[um.Bilanz]}),this.productSettings.push({id:If.TAX,name:"Steuern",licenceNeeded:!0,description:"Hier machst du die Steuer f\xfcr deinen Mandanten.",resourceTypes:[um.TaxPrivate,um.TaxCorporation]})}},{key:"_initLicenceForOrga",value:function(){this.licences.push({productId:If.BILANZ,orgaId:"300",orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:4}),this.licences.push({productId:If.BILANZ,orgaId:"300",orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:2}),this.licences.push({productId:If.BILANZ,orgaId:"300",orgaUserId:"400",numberOfLicences:1}),this.licences.push({productId:If.BILANZ,orgaId:"300",orgaUserId:"401",numberOfLicences:1}),this.licences.push({productId:If.TAX,orgaId:"300",orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:1}),this.licences.push({productId:If.TAX,orgaId:"300",orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:0}),this.licences.push({productId:If.TAX,orgaId:"300",orgaUserId:"400",numberOfLicences:1})}},{key:"checkLicence",value:function(e,t){return!!this.licences.find((function(n){return n.productId===e&&n.orgaUserId===t&&n.numberOfLicences>0}))}},{key:"getAllProductAndLicenceInfos",value:function(e,t){var n=this,r=[];return this.productSettings.forEach((function(i){var a,s,o=Object.assign({},i);if(r.push(o),e&&i.licenceNeeded){o.orgaId=e,o.orgaUserId=t;var u=n.licences.find((function(t){return t.orgaId===e&&t.productId===i.id&&t.orgaUserId===n.SUBST_FOR_TOTAL_LICENCES}));o.totalLicences=null!==(a=null==u?void 0:u.numberOfLicences)&&void 0!==a?a:0,u=n.licences.find((function(t){return t.orgaId===e&&t.productId===i.id&&t.orgaUserId===n.SUBST_FOR_FREE_LICENCES})),o.freeLicences=null!==(s=null==u?void 0:u.numberOfLicences)&&void 0!==s?s:0,u=n.licences.find((function(n){return n.orgaId===e&&n.productId===i.id&&n.orgaUserId===t})),o.licencedToUser=!!((null==u?void 0:u.numberOfLicences)&&u.numberOfLicences>0)}})),r}},{key:"getProductAndLicenceInfo",value:function(e,t,n){var r,i,a=this,s=this.productSettings.find((function(t){return t.id===e}));if(s&&s.licenceNeeded){s.orgaId=t,s.orgaUserId=n;var o=this.licences.find((function(e){return e.orgaId===t&&e.productId===s.id&&e.orgaUserId===a.SUBST_FOR_TOTAL_LICENCES}));s.totalLicences=null!==(r=null==o?void 0:o.numberOfLicences)&&void 0!==r?r:0,o=this.licences.find((function(e){return e.orgaId===t&&e.productId===s.id&&e.orgaUserId===a.SUBST_FOR_FREE_LICENCES})),s.freeLicences=null!==(i=null==o?void 0:o.numberOfLicences)&&void 0!==i?i:0,o=this.licences.find((function(e){return e.orgaId===t&&e.productId===s.id&&e.orgaUserId===n})),s.licencedToUser=!!((null==o?void 0:o.numberOfLicences)&&o.numberOfLicences>0)}return s&&Object.assign({},s)}},{key:"saveProductAndLicenceInfo",value:function(e){var t=this;e.forEach((function(e){e.licenceNeeded&&(t._setLicenceInfo(t.SUBST_FOR_TOTAL_LICENCES,e,e.totalLicences),t._setLicenceInfo(t.SUBST_FOR_FREE_LICENCES,e,e.freeLicences),t._setLicenceInfo(e.orgaUserId,e,e.licencedToUser?1:0))}))}},{key:"_setLicenceInfo",value:function(e,t,n){var r=this.licences.find((function(n){return n.orgaId===t.orgaId&&n.productId===t.id&&n.orgaUserId===e}));r?r.numberOfLicences=n:this.licences.push({productId:t.id,orgaId:t.orgaId,orgaUserId:e,numberOfLicences:n})}}]),e}()).\u0275fac=function(e){return new(e||sm)(Je(sd))},sm.\u0275prov=he({token:sm,factory:sm.\u0275fac,providedIn:"root"}),sm);function hm(e,t){1&e&&(Ma(0,"div"),Ma(1,"h5"),Xa(2,"\xdcbersicht \xfcber alle Produkte"),Ea(),Ma(3,"p"),Xa(4,"Zum Anzeigen der f\xfcr dich verf\xfcgbaren Produkte bitte in Organisation einloggen..."),Ea(),Ea())}function fm(e,t){1&e&&(Ma(0,"div"),Ma(1,"h5"),Xa(2,"\xdcbersicht \xfcber alle Produkte und der dazugeh\xf6rigen Lizenzinfo."),Ea(),Ea())}var gm=function(){return[]};function vm(e,t){if(1&e){var n=Na();Ma(0,"a",11),Va("click",(function(){qt(n);var e=ja(2).index;return ja().gotoProduct(e)})),Xa(1),Ea()}if(2&e){var r=ja(2).index,i=ja();Pa("routerLink",vo(2,gm)),Rr(1),ts("Zu ",i.getProductName(r),"")}}function pm(e,t){1&e&&(Ma(0,"p",12),Xa(1,"Du hast keine Lizenz f\xfcr das Produkt. "),Ea())}function mm(e,t){if(1&e&&(Ma(0,"div",8),Fa(1,"br"),xa(2,vm,2,3,"a",9),xa(3,pm,2,0,"p",10),Ea()),2&e){var n=ja().$implicit;Rr(2),Pa("ngIf",n.licencedToUser),Rr(1),Pa("ngIf",!n.licencedToUser)}}function ym(e,t){if(1&e&&(Ma(0,"div",3),Ma(1,"div",4),Ma(2,"div",5),Ma(3,"span",6),Xa(4),Ea(),Ma(5,"p"),Xa(6),Ea(),xa(7,mm,4,2,"div",7),Ea(),Ea(),Ea()),2&e){var n=t.index,r=ja();Rr(4),es(r.getProductName(n)),Rr(2),es(r.getProductDescription(n)),Rr(1),Pa("ngIf",r.loggedInInOrga)}}var km,bm=((km=function(){function e(t,n,r,i){_classCallCheck(this,e),this.router=t,this.principalService=n,this.settingsService=r,this.licenceService=i,this.usersDisplayName="",this.loggedInInOrga=!1,this.products=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Marktplatz der Produkte..."),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.loggedInInOrga&&(this.principal=this.principalService.getOrgaUser()),this._initMembers()}},{key:"_initMembers",value:function(){var e,t;this.products=this.licenceService.getAllProductAndLicenceInfos(null===(e=this.principal)||void 0===e?void 0:e.orgaId,null===(t=this.principal)||void 0===t?void 0:t.id),this.products.forEach((function(e){e.licenceNeeded||(e.licencedToUser=!0)}))}},{key:"getProductName",value:function(e){return this.products[e].name}},{key:"getProductDescription",value:function(e){return this.products[e].description}},{key:"getProductLink",value:function(e){switch(this.products[e].id){case If.BILANZ:return"/generic-product/bilanz";case If.FIBU:return"/generic-product/fibu";case If.FOLDERS_AND_DOCS:return"/folderApp/main";case If.TAX:return"/generic-product/tax"}}},{key:"gotoProduct",value:function(e){this.router.navigateByUrl(this.getProductLink(e))}}]),e}()).\u0275fac=function(e){return new(e||km)(Ra(Tp),Ra(hd),Ra(cd),Ra(dm))},km.\u0275cmp=ht({type:km,selectors:[["app-marketplace"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"row","mt-1"],["class","col s10 m6",4,"ngFor","ngForOf"],[1,"col","s10","m6"],[1,"card","teal","darken-1"],[1,"card-content","white-text"],[1,"card-title"],["class","card-action_x",4,"ngIf"],[1,"card-action_x"],["class","orange-text",3,"routerLink","click",4,"ngIf"],["class","white-text",4,"ngIf"],[1,"orange-text",3,"routerLink","click"],[1,"white-text"]],template:function(e,t){1&e&&(xa(0,hm,5,0,"div",0),xa(1,fm,3,0,"div",0),Ma(2,"div",1),xa(3,ym,8,3,"div",2),Ea()),2&e&&(Pa("ngIf",!t.loggedInInOrga),Rr(1),Pa("ngIf",t.loggedInInOrga),Rr(2),Pa("ngForOf",t.products))},directives:[pc,gc,Mp],styles:[".card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{height:12rem}"]}),km),_m=function(e){return e.DefaultResourceDeletePermissionKey="l\xf6schen",e.FolderReadPermissionKey="lesen",e.FolderWritePermissionKey="schreiben",e.FolderDeletePermissionKey="l\xf6schen",e.FolderCreatePermissionKey="anlegen",e.FibuBookPermissionKey="buchen",e.FibuEvaluatePermissionKey="auswerten",e.BilanzViewPermissionKey="pr\xfcfen",e.BilanzWritePermissionKey="erstellen",e.TaxViewPermissionKey="nachschauen",e.TaxWritePermissionKey="erstellen",e}({});function wm(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return n.lift(new Im(e,t))}}var Cm,Om,Im=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.inclusive=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Sm(e,this.predicate,this.inclusive))}}]),e}(),Sm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e)).predicate=r,a.inclusive=i,a.index=0,a}return _createClass(n,[{key:"_next",value:function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)}},{key:"nextOrComplete",value:function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}]),n}(v),xm=function(e){return e[e.ResourceMoved=1]="ResourceMoved",e}({}),Am=((Om=function(){function e(t){_classCallCheck(this,e),this.http=t,this.accessBackendUri=yu+"accessrights/",this.resourceBackendUri=yu+"resources/"}return _createClass(e,[{key:"getAllResourceTypes",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get(this.resourceBackendUri+"resource-types").toPromise();case 3:return t=e.sent,e.abrupt("return",(console.log(t),t));case 7:e.prev=7,e.t0=e.catch(0),_u(e.t0);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"findByTypeAndOrgaId",value:function(e,t,n,r){return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(new Rc).append("resourceType",e).append("userId",t),"0"!==r&&(i=i.append("subOrgaId",r)),n.prev=2,n.next=5,this.http.get(this.accessBackendUri+"admin-resources",{params:i}).toPromise();case 5:return a=n.sent,n.abrupt("return",(console.log(a),a));case 9:n.prev=9,n.t0=n.catch(2),_u(n.t0);case 12:return n.abrupt("return",[]);case 13:case"end":return n.stop()}}),n,this,[[2,9]])})))}},{key:"setPermissionsOfGivenUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.post(this.accessBackendUri+"admin-resources",e).toPromise();case 3:return t.abrupt("return",!0);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getAllResourcesOfOrga",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get(this.resourceBackendUri+"admin").toPromise();case 2:return t=e.sent,e.abrupt("return",(console.log(t),t));case 4:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Om)(Je(tl))},Om.\u0275prov=he({token:Om,factory:Om.\u0275fac,providedIn:"root"}),Om),Rm=((Cm=function(){function e(t,n,r){_classCallCheck(this,e),this.beAccessService=t,this.principalService=n,this.eventService=r,this.isActive=!0,this.resourceTypes=[],this.resources=[],this.subResources=[],this.accessRights=[],this.useValueFromBackend=!0,this.callBackend=!1,this.initMembers()}return _createClass(e,[{key:"initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callBackend){e.next=4;break}console.log("No Test-Items set, because we are working with backend..."),e.next=10;break;case 4:return this._setTestResources(),this._setTestSubResources(),e.next=8,this._setTestPermissions();case 8:console.log("Resources: "+this.resources.length),console.log("AccessRights: "+this.accessRights.length);case 10:this.eventService.idmEvent.pipe(wm((function(){return t.isActive}))).subscribe((function(e){return t._onIdmEvent(e)}));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"setOrgaServiceHelper",value:function(e){this.orgaServiceHelper=e}},{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"assureServiceIsCreated",value:function(){}},{key:"getAllResourceTypes",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.resourceTypes.length){e.next=7;break}if(!this.callBackend){e.next=6;break}return e.next=4,this.beAccessService.getAllResourceTypes();case 4:t=e.sent,this.useValueFromBackend&&t&&(this.resourceTypes=t);case 6:0===this.resourceTypes.length&&this._initResourceTypes();case 7:return e.abrupt("return",wu(this.resourceTypes));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"_findResourceType",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllResourceTypes();case 2:return t.abrupt("return",t.sent.find((function(t){return t.type===e})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_getAllStaticResourceTypes",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllResourceTypes();case 2:return e.abrupt("return",e.sent.filter((function(e){return!e.dynamic})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getResourcesWithPermissions",value:function(e,t,n,r){return ku(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,s,o=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.callBackend){i.next=6;break}return i.next=3,this.beAccessService.findByTypeAndOrgaId(e.type,t.id,n,r);case 3:if(a=i.sent,!this.useValueFromBackend){i.next=6;break}return i.abrupt("return",a);case 6:return s=[],i.next=9,this.getAllResourcesOfSubOrgaByResourceType(e.type,n,r);case 9:return i.sent.forEach((function(n){var i=[];e.possiblePermissions.forEach((function(e){var a={name:e};a.disabled=!o.permissionIsEnabled4Administration(n,t,e,r),a.allowed=o.hasAdministratedPermission(n,t,e,r),i.push(a)}));var a={};Object.assign(a,n),a.permissions=i,s.push(a)})),i.abrupt("return",s);case 11:case"end":return i.stop()}}),i,this)})))}},{key:"setPermissionsOfGivenUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.callBackend,!t.t0){t.next=5;break}return"0"===e.subOrgaId&&(e.subOrgaId=void 0),t.next=5,this.beAccessService.setPermissionsOfGivenUser(e);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"_justCreateNewResource",value:function(e){var t=Object.assign(Object.assign({},e),{id:Cu(this.resources)});return this.resources.push(t),t}},{key:"createNewResource",value:function(e){var t,n;return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a,s,o,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this._assertDynamicResource(e),r.next=3,this._assertCreatePermission4resource(e);case 3:return i=this._justCreateNewResource(Object.assign(Object.assign({},e),{orgaId:this._getPrincipal().orgaId})),r.next=6,this._findResourceType(i.type);case 6:if(!(null==(a=r.sent)?void 0:a.defaultPermissionsOnCreate)){r.next=34;break}r.prev=8,o=bu(a.defaultPermissionsOnCreate);case 10:return r.next=12,o.next();case 12:if((s=r.sent).done){r.next=18;break}return u=s.value,r.next=16,this._setAccessRight("0",this._getPrincipal().id,this._getPrincipal().orgaId,i,u);case 16:r.next=10;break;case 18:r.next=23;break;case 20:r.prev=20,r.t0=r.catch(8),t={error:r.t0};case 23:if(r.prev=23,r.prev=24,r.t1=s&&!s.done&&(n=o.return),!r.t1){r.next=29;break}return r.next=29,n.call(o);case 29:if(r.prev=29,!t){r.next=32;break}throw t.error;case 32:return r.finish(29);case 33:return r.finish(23);case 34:return r.abrupt("return",i);case 35:case"end":return r.stop()}}),r,this,[[8,20,23,34],[24,,29,33]])})))}},{key:"renameResource",value:function(e){var t=this._findResource(e.id);t&&(t.displayName=e.displayName)}},{key:"_createNewStaticResource",value:function(e,t){var n={id:Cu(this.resources),type:e.type,orgaId:t,displayName:e.displayName};this._assertStaticResource(n),this.resources.push(n)}},{key:"_removeAllSubResourcesOfResource",value:function(e){this.subResources=this.subResources.filter((function(t){return t.orgaResourceId!==e}))}},{key:"removeResource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_m.DefaultResourceDeletePermissionKey;if(this.hasPermission(e,t))return this._removeResource(e.id)}},{key:"_removeResource",value:function(e){this.accessRights=this.accessRights.filter((function(t){return t.resourceId!==e})),this._removeAllSubResourcesOfResource(e),this.resources=this.resources.filter((function(t){return t.id!==e}))}},{key:"_getAllResourcesOwnedByOrDelegatedToOrgaByType",value:function(e,t){return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this._assertIsAdminOfCurrentOrga(t),n.next=3,this.getAllResourcesOfOrga(t);case 3:return n.abrupt("return",n.sent.filter((function(t){return t.type===e})));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"getAllResourcesOfOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beAccessService.getAllResourcesOfOrga();case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return this._assertIsAdminOfCurrentOrga(e),r=this.resources.filter((function(t){return t.orgaId===e})),i=this._getAllDelegatedResources4Orga(e),t.abrupt("return",(r.push.apply(r,_toConsumableArray(i)),wu(r)));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_getAllResources4UserWithAtLeastOneOfGivenPermissionsByType",value:function(e,t,n){var r=this;if(!n)return[];var i=this.accessRights.filter((function(t){return t.userId===e&&n.includes(t.permission)})).map((function(e){return e.resourceId}));i=i.filter((function(e,t){return i.indexOf(e)===t}));var a=[];return i.forEach((function(e){var n=r._findResource(e);(null==n?void 0:n.type)===t&&a.push(r._findResource(e))})),wu(a)}},{key:"_getAllResources4UserWithAllOfGivenPermissionsByType",value:function(e,t,n){var r=this;if(!n)return[];var i=this.accessRights.filter((function(t){return t.userId===e})),a=[];i.forEach((function(e){var t=!0,r=function(r){if(!i.find((function(t){return t.resourceId===e.resourceId&&t.permission===n[r]})))return t=!1,"break"};for(var s in n)if("break"===r(s))break;t&&a.push(e.resourceId)})),a=a.filter((function(e,t){return a.indexOf(e)===t}));var s=[];return a.forEach((function(e){var n=r._findResource(e);(null==n?void 0:n.type)===t&&s.push(e)})),s}},{key:"getAllResources4PrincipalWithAtLeastOnePermissionByType",value:function(e){var t=this,n=this.accessRights.filter((function(e){return e.userId===t._getPrincipal().id})).map((function(e){return e.resourceId}));return n=n.filter((function(e,t){return n.indexOf(e)===t})),wu(this.resources.filter((function(t){return t.type===e&&n.includes(t.id)})))}},{key:"getAllPermissions4PrincipalByResourceType",value:function(e){var t=this,n=this.accessRights.filter((function(e){return e.userId===t._getPrincipal().id})),r=[];return n.forEach((function(n){var i=t._findResource(n.resourceId);(null==i?void 0:i.type)===e&&r.push(Object.assign(Object.assign({},n),{displayName:i.displayName}))})),wu(r)}},{key:"getAllResourceIdsOwnedByOrDelegatedToOrgaByType",value:function(e,t){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertIsAdminOfCurrentOrga(t),e.next=3,this.getAllResourcesOfOrga(t);case 3:return e.abrupt("return",e.sent.map((function(e){return e.id})));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_getAllDelegatedResources4Orga",value:function(e){var t=this.accessRights.filter((function(t){return t.proxyResourceOrgaId===e})).map((function(e){return e.resourceId}));return t=t.filter((function(e,n){return t.indexOf(e)===n})),this.resources.filter((function(e){return t.includes(e.id)}))}},{key:"_findResource",value:function(e){return this.resources.find((function(t){return t.id===e}))}},{key:"_findStaticResourceByTypeAndOrgaId",value:function(e,t){return this.resources.find((function(n){return n.type===e&&n.orgaId===t}))}},{key:"_createSubResource",value:function(e){var t=Object.assign(Object.assign({},e),{id:Cu(this.subResources)});return this.subResources.push(t),t}},{key:"_findSubResource",value:function(e){return this.subResources.find((function(t){return t.id===e}))}},{key:"_removeSubResource",value:function(e){var t,n;return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a,s,o,u,c,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((i=this.subResources.findIndex((function(t){return t.id===e})))<0)){r.next=3;break}return r.abrupt("return");case 3:return a=this.subResources[i],this.subResources.splice(i,1),s=this._findResource(a.orgaResourceId),r.next=8,this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(a.subOrgaId);case 8:o=r.sent,r.prev=9,c=bu(o);case 11:return r.next=13,c.next();case 13:if((u=r.sent).done){r.next=21;break}return l=u.value,r.next=17,this.orgaServiceHelper.findOrgaUserByOrgaUserId(l.orgaUserId);case 17:(d=r.sent)&&this._setPermissionsOfUser2resource(d,s,[],a.subOrgaId);case 19:r.next=11;break;case 21:r.next=26;break;case 23:r.prev=23,r.t0=r.catch(9),t={error:r.t0};case 26:if(r.prev=26,r.prev=27,r.t1=u&&!u.done&&(n=c.return),!r.t1){r.next=32;break}return r.next=32,n.call(c);case 32:if(r.prev=32,!t){r.next=35;break}throw t.error;case 35:return r.finish(32);case 36:return r.finish(26);case 37:case"end":return r.stop()}}),r,this,[[9,23,26,37],[27,,32,36]])})))}},{key:"getAllResourcesOfSubOrgaByResourceType",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("0"!==n){r.next=2;break}return r.abrupt("return",this._getAllResourcesOwnedByOrDelegatedToOrgaByType(e,t));case 2:return this._assertIsSubAdminOfSubOrga(n),i=this.subResources.filter((function(r){return r.orgaId===t&&r.subOrgaId===n&&r.typeId===e})).map((function(e){return e.orgaResourceId})),r.abrupt("return",wu(this.resources.filter((function(t){return t.type===e&&i.includes(t.id)}))));case 5:case"end":return r.stop()}}),r,this)})))}},{key:"getAllSubResourcesOfSubOrga",value:function(e){return this._assertIsSubAdminOfSubOrga(e),wu(this.subResources.filter((function(t){return t.subOrgaId===e})))}},{key:"getAllResourcesOfSubOrga",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._assertIsSubAdminOfSubOrga(t);var r=this.subResources.filter((function(e){return e.subOrgaId===t})).map((function(e){return e.orgaResourceId})),i=wu(this.resources.filter((function(e){return r.includes(e.id)})));return n?i.filter((function(t){return t.orgaId===e})):i}},{key:"changeSubResources",value:function(t,n){var r=this;return this._assertIsSubAdminOfSubOrga(t),n.forEach((function(n){if(n.id){if(!n.subOrgaId){var i=r._findSubResource(n.id);e._assertIsSameSubOrga(t,i.subOrgaId),r._removeSubResource(n.id)}}else e._assertIsSameSubOrga(t,n.subOrgaId),r._createSubResource(n)})),!0}},{key:"setPermissionsOfUser2resource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";this._assertIsSubAdminOfSubOrga(r),this._assertIsMemberOfCurrentOrga(e),this._assertIsResourceOfCurrentOrga(t),this._setPermissionsOfUser2resource(e,t,n,r)}},{key:"_setPermissionsOfUser2resource",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";return ku(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e._isForeignUser(t)){a.next=4;break}a.t0=this._setPermissionsOfUser2resource4directForeignUser(t,n,r,i),a.next=19;break;case 4:if(!e._isForeignOrga(t)){a.next=8;break}a.t1=this._setPermissionsOfUser2resource4ForeignOrga(t,n,r,i),a.next=18;break;case 8:if(!e._isForeignResourceOfUser(t,n)){a.next=14;break}return a.next=11,this._setPermissionsOfUser2foreignResourceApplyDelegationPermission(t,n,r,i);case 11:a.t2=a.sent,a.next=17;break;case 14:return a.next=16,this._setPermissionsOfUser2resource4ownUser(t,n,r,i);case 16:a.t2=a.sent;case 17:a.t1=a.t2;case 18:a.t0=a.t1;case 19:return a.abrupt("return",a.t0);case 20:case"end":return a.stop()}}),a,this)})))}},{key:"setPermissionsOfUser2staticResource",value:function(e,t,n){return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._assertIsAdminOfCurrentOrga(e.orgaId),this._assertStaticResource(t),this._assertIsMemberOfCurrentOrga(e),this._isOwnResource(t,e)){r.next=2;break}throw new Error("Das geht f\xfcr statische Ressourcen noch nicht");case 2:if(!(i=this._findStaticResourceByTypeAndOrgaId(t.type,t.orgaId))){r.next=8;break}return t.id=i.id,r.next=7,this._setPermissionsOfUser2resource4ownUser(e,t,n);case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"hasPermission4staticResource",value:function(e,t){this._assertStaticResource(e);var n=this._findStaticResourceByTypeAndOrgaId(e.type,e.orgaId);return!!n&&this.hasPermission(n,t)}},{key:"hasPermission4staticResource4administration",value:function(e,t,n){this._assertStaticResource(t),this._assertIsAdminOfCurrentOrga(t.orgaId);var r=this._findStaticResourceByTypeAndOrgaId(t.type,t.orgaId);return!!r&&this._hasPermission(e.id,r.id,n)}},{key:"hasAdministratedPermission",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";return this._assertIsSubAdminOfSubOrga(r),this._hasPermission4administration(t,e,n,r)}},{key:"_hasPermission",value:function(e,t,n){return!!this.accessRights.find((function(r){return r.userId===e&&r.resourceId===t&&r.permission===n}))}},{key:"hasPermission",value:function(e,t){var n=this._assertAndGetPrincipal().id;return this._hasPermission(n,e.id,t)}},{key:"_hasPermission4administration",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",a=e._isForeignUser(t)?t.foreignUserId:t.id;return this._isForeignResource(n)||e._isForeignOrga(t)?!!this.accessRights.find((function(e){return e.userId===a&&e.resourceId===n.id&&e.permission===r&&void 0!==e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===i})):!!this.accessRights.find((function(e){return e.userId===a&&e.resourceId===n.id&&e.permission===r&&void 0===e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===i}))}},{key:"permissionIsEnabled4Administration",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";return this._assertIsSubAdminOfSubOrga(i),!!this._isOwnResource(t)||!e._isForeignUserOrOrga(n)&&this._hasDelegatedPermissionToCurrentOrga(t,r)}},{key:"_setPermissionsOfUser2resource4ownUser",value:function(e,t,n){var r,i,a,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";return ku(this,void 0,void 0,regeneratorRuntime.mark((function u(){var c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:this._removeAllPermissionsOfUser4resource(e.id,t,void 0,o),u.prev=1,r=bu(n);case 3:return u.next=5,r.next();case 5:if((i=u.sent).done){u.next=11;break}return c=i.value,u.next=9,this._setAccessRight(o,e.id,e.orgaId,t,c,void 0);case 9:u.next=3;break;case 11:u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),a={error:u.t0};case 16:if(u.prev=16,u.prev=17,u.t1=i&&!i.done&&(s=r.return),!u.t1){u.next=22;break}return u.next=22,s.call(r);case 22:if(u.prev=22,!a){u.next=25;break}throw a.error;case 25:return u.finish(22);case 26:return u.finish(16);case 27:case"end":return u.stop()}}),u,this,[[1,13,16,27],[17,,22,26]])})))}},{key:"_setPermissionsOfUser2resource4directForeignUser",value:function(e,t,n,r){var i=this.orgaServiceHelper.findCorrespondingForeignOrgaUser(e);this._setPermissionsOfUser2resource4ownUser(i,t,n,r)}},{key:"_setPermissionsOfUser2foreignResourceApplyDelegationPermission",value:function(e,t,n,r){var i,a,s,o;return ku(this,void 0,void 0,regeneratorRuntime.mark((function u(){var c,l;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:c=e.orgaId,this._removeAllPermissionsOfUser4resource(e.id,t,c,r),u.prev=2,i=bu(n);case 4:return u.next=6,i.next();case 6:if((a=u.sent).done){u.next=12;break}return l=a.value,u.next=10,this._setAccessRight(r,e.id,e.orgaId,t,l,c);case 10:u.next=4;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(2),s={error:u.t0};case 17:if(u.prev=17,u.prev=18,u.t1=a&&!a.done&&(o=i.return),!u.t1){u.next=23;break}return u.next=23,o.call(i);case 23:if(u.prev=23,!s){u.next=26;break}throw s.error;case 26:return u.finish(23);case 27:return u.finish(17);case 28:case"end":return u.stop()}}),u,this,[[2,14,17,28],[18,,23,27]])})))}},{key:"_setPermissionsOfUser2resource4ForeignOrga",value:function(e,t,n,r){var i,a,s,o;return ku(this,void 0,void 0,regeneratorRuntime.mark((function u(){var c,l,d,h,f=this;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:c=e.foreignOrgaId,l=this._getAllDelegatedPermissions4resource(e.id,c,t),this._removeAllPermissionsOfUser4resource(e.id,t,c,r),u.prev=2,i=bu(n);case 4:return u.next=6,i.next();case 6:if((a=u.sent).done){u.next=12;break}return d=a.value,u.next=10,this._setAccessRight(r,e.id,e.orgaId,t,d,c);case 10:u.next=4;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(2),s={error:u.t0};case 17:if(u.prev=17,u.prev=18,u.t1=a&&!a.done&&(o=i.return),!u.t1){u.next=23;break}return u.next=23,o.call(i);case 23:if(u.prev=23,!s){u.next=26;break}throw s.error;case 26:return u.finish(23);case 27:return u.finish(17);case 28:(h=this._getAllDelegatedPermissions4resource(e.id,c,t)).length<=0?this._removeProxyResourceAndAllPermissions2it(c,t):(h.forEach((function(e){var t=l.findIndex((function(t){return t===e}));t>=0&&l.splice(t,1)})),l.forEach((function(e){f._removePermission4resourceDelegatedFromAllUsersOfGivenOrga(c,t,e)})));case 30:case"end":return u.stop()}}),u,this,[[2,14,17,28],[18,,23,27]])})))}},{key:"_isForeignResource",value:function(e){return!this._isOwnResource(e)}},{key:"_isOwnResource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getPrincipal();return!!e.orgaId&&e.orgaId===t.orgaId}},{key:"_isStaticResource",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findResourceType(e.type);case 2:return n=t.sent,t.abrupt("return",!(!n||n.dynamic));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"_isDynamicResource",value:function(e){var t;return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._findResourceType(e.type);case 2:return r=n.sent,n.abrupt("return",null!==(t=null==r?void 0:r.dynamic)&&void 0!==t&&t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"_assertAndGetPrincipal",value:function(){var e=this._getPrincipal();if(!(null==e?void 0:e.id))throw new Error("Principal not set to OrgaUser...");return e}},{key:"_assertIsAdminOfCurrentOrga",value:function(e){if(!this.principalService.isAdminOfCurrentOrga(e))throw new Error("AssertAdmin: principal is not an admin of orga")}},{key:"_assertIsSubAdminOfSubOrga",value:function(e){if(!this.principalService.isAdminOfSubOrga(e))throw new Error("AssertSubAdmin: principal is not an sub-admin of sub-orga")}},{key:"_assertIsMemberOfCurrentOrga",value:function(e){if(this._getPrincipal().orgaId!==e.orgaId)throw new Error("AssertMember: principal.orgaId !== user.orgaId");if(!this.orgaServiceHelper.findOrgaUserByOrgaUserId(e.id))throw new Error("AssertMember: user is not member of orga")}},{key:"_assertIsProxyResourceOfCurrentOrga",value:function(e){if(1!==this._getAllDelegatedResources4Orga(this._getPrincipal().orgaId).filter((function(t){return t.id===e.id})).length)throw new Error("AssertResource: ist keine ProxyResource!")}},{key:"_assertIsResourceOfCurrentOrga",value:function(e){var t=this._getPrincipal();t.orgaId!==e.orgaId&&this._assertIsProxyResourceOfCurrentOrga(e);var n=this._findResource(e.id);if(!n)throw new Error("AssertResource: resource does not exist");if(n.orgaId!==t.orgaId)throw new Error("AssertResource: Resource does not belong to your orga!")}},{key:"_assertStaticResource",value:function(e){if(!this._isStaticResource(e))throw new Error("Resource ist nicht statisch...")}},{key:"_assertDynamicResource",value:function(e){if(!this._isDynamicResource(e))throw new Error("Resource ist nicht dynamisch...")}},{key:"_assertCreatePermission4resource",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findResourceType(e.type);case 2:if(n=t.sent,r=this._findStaticResourceByTypeAndOrgaId(n.resourceType4CreatePermission,e.orgaId)){t.next=6;break}throw new Error("Static Resource not found...");case 6:if(this.hasPermission4staticResource(r,n.permission4CreatePermission)){t.next=8;break}throw new Error("Principal does not have create-permission for resource");case 8:case"end":return t.stop()}}),t,this)})))}},{key:"_onIdmEvent",value:function(e){switch(e.type){case lm.OrganisationCreated:this._onOrganizationCreation(e.organizationId);break;case lm.OrganisationRemoved:this._onOrganizationRemoval(e.organizationId);break;case lm.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser);break;case lm.SubOrganizationRemoved:this._onSubOrganizationRemoval(e.subOrganizationId);break;case lm.SubOrgaUserRemoved:this._onSubOrgaUserRemoval(e.subOrganizationId,e.orgaUser)}}},{key:"_onOrganizationRemoval",value:function(e){var t=this;this.resources.filter((function(t){return t.orgaId===e})).forEach((function(e){return t._removeResource(e.id)}))}},{key:"_onOrganizationCreation",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.callBackend,t.t0){t.next=5;break}return t.next=4,this._getAllStaticResourceTypes();case 4:t.sent.forEach((function(t){n._findStaticResourceByTypeAndOrgaId(t.type,e)||n._createNewStaticResource(t,e)}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"_onSubOrganizationRemoval",value:function(t){var n,r;return ku(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,s,o,u,c,l,d=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(t);case 2:a=i.sent,s=this.getAllSubResourcesOfSubOrga(t),i.prev=4,o=regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=u.value,n.next=3,d.orgaServiceHelper.findOrgaUserByOrgaUserId(r.orgaUserId);case 3:(i=n.sent)&&e._isForeignOrga(i)&&s.forEach((function(e){var n=d._findResource(e.orgaResourceId);d._setPermissionsOfUser2resource(i,n,[],t)}));case 5:case"end":return n.stop()}}),n)})),c=bu(a);case 7:return i.next=9,c.next();case 9:if((u=i.sent).done){i.next=13;break}return i.delegateYield(o(),"t0",11);case 11:i.next=7;break;case 13:i.next=18;break;case 15:i.prev=15,i.t1=i.catch(4),n={error:i.t1};case 18:if(i.prev=18,i.prev=19,i.t2=u&&!u.done&&(r=c.return),!i.t2){i.next=24;break}return i.next=24,r.call(c);case 24:if(i.prev=24,!n){i.next=27;break}throw n.error;case 27:return i.finish(24);case 28:return i.finish(18);case 29:this.subResources=this.subResources.filter((function(e){return e.subOrgaId!==t}));case 30:if((l=this.accessRights.findIndex((function(e){return e.administratedViaSubOrgaId===t})))>=0){i.next=33;break}return i.abrupt("break",36);case 33:this.accessRights.splice(l,1);case 34:i.next=30;break;case 36:case"end":return i.stop()}}),i,this,[[4,15,18,29],[19,,24,28]])})))}},{key:"_onForeignOrgaSubUserRemoval",value:function(e,t){var n=this;this.getAllSubResourcesOfSubOrga(e).forEach((function(r){var i=n._findResource(r.orgaResourceId);n._setPermissionsOfUser2resource4ForeignOrga(t,i,[],e)}))}},{key:"_onSubOrgaUserRemoval",value:function(t,n){var r=this;if(!t)throw new Error("_onSubOrgaUserRemoval: subOrgaId not set!");e._isForeignOrga(n)?this._onForeignOrgaSubUserRemoval(t,n):function(){for(var i=e._isForeignUser(n)?n.foreignUserId:n.id;;){var a=r.accessRights.findIndex((function(e){return e.administratedViaSubOrgaId===t&&e.userId===i}));if(!(a>=0))break;r.accessRights.splice(a,1)}}()}},{key:"_onOrgaUserRemoval",value:function(t){e._isForeignUser(t)?this._removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId(t.foreignUserId,t.orgaId):e._isForeignOrga(t)?(this._removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId(t.foreignOrgaId,t.orgaId),this._removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId(t.foreignOrgaId,t.orgaId)):this._removeAllPermissionsOfUser(t.id)}},{key:"_assertPermissionRange",value:function(e,t){return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this._findResource(e.id)){n.next=3;break}throw new Error("Resource "+e.id+" not found!");case 3:return n.next=5,this._findResourceType(r.type);case 5:if(i=n.sent){n.next=8;break}throw new Error("ResourceType "+e.type+" not found!");case 8:if(i.possiblePermissions.includes(t)){n.next=10;break}throw new Error("Permission "+t+" not valid for type "+r.type);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"_setAccessRight",value:function(e,t,n,r,i,a){return ku(this,void 0,void 0,regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this._assertPermissionRange(r,i);case 2:this.accessRights.push({id:Cu(this.accessRights),userId:t,usersOrgaId:n,resourceId:r.id,resourceOwningOrgaId:r.orgaId,permission:i,proxyResourceOrgaId:a,administratedViaSubOrgaId:e});case 3:case"end":return s.stop()}}),s,this)})))}},{key:"_getPrincipal",value:function(){var e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}},{key:"_getAllDelegatedPermissions4resource",value:function(e,t,n){var r=this.accessRights.filter((function(r){return r.userId===e&&r.proxyResourceOrgaId===t&&r.resourceId===n.id})).map((function(e){return e.permission}));return r.filter((function(e,t){return r.indexOf(e)===t}))}},{key:"_hasDelegatedPermissionToCurrentOrga",value:function(e,t){var n=this;return!!this.accessRights.find((function(r){return r.proxyResourceOrgaId===n._getPrincipal().orgaId&&r.resourceId===e.id&&r.permission===t}))}},{key:"_removeAllPermissionsOfUser4resource",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";;){var i=this.accessRights.findIndex((function(i){return i.userId===e&&i.resourceId===t.id&&i.proxyResourceOrgaId===n&&i.administratedViaSubOrgaId===r}));if(!(i>=0))break;this.accessRights.splice(i,1)}}},{key:"_removeAllPermissionsOfUser",value:function(e){console.log("accessrights length: "+this.accessRights.length),this.accessRights=this.accessRights.filter((function(t){return t.userId!==e})),console.log("accessrights length: "+this.accessRights.length)}},{key:"_removePermission4resourceDelegatedFromAllUsersOfGivenOrga",value:function(e,t,n){var r;do{(r=this.accessRights.findIndex((function(r){return r.resourceId===t.id&&r.permission===n&&r.usersOrgaId===e&&r.proxyResourceOrgaId===e})))>=0&&this.accessRights.splice(r,1)}while(r>=0)}},{key:"_removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.userId===e&&n.resourceOwningOrgaId===t&&void 0===n.proxyResourceOrgaId}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.usersOrgaId===e&&n.resourceOwningOrgaId===t&&void 0!==n.proxyResourceOrgaId}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.proxyResourceOrgaId===e&&n.resourceOwningOrgaId===t}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_removeProxyResourceAndAllPermissions2it",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.proxyResourceOrgaId===e&&n.resourceId===t.id}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_initResourceTypes",value:function(){this.resourceTypes.push({id:"1",type:um.FolderRoot,dynamic:!1,displayName:"Belegverwaltung",possiblePermissions:[_m.FolderCreatePermissionKey]},{id:"2",type:um.Folder,dynamic:!0,displayName:"Ordner",possiblePermissions:[_m.FolderReadPermissionKey,_m.FolderWritePermissionKey,_m.FolderDeletePermissionKey],defaultPermissionsOnCreate:[_m.FolderReadPermissionKey],resourceType4CreatePermission:um.FolderRoot,permission4CreatePermission:_m.FolderCreatePermissionKey},{id:"3",type:um.Fibu,dynamic:!1,displayName:"Finanzbuchf\xfchrung",possiblePermissions:[_m.FibuEvaluatePermissionKey,_m.FibuBookPermissionKey]},{id:"4",type:um.Bilanz,dynamic:!1,displayName:"Jahresabschluss",possiblePermissions:[_m.BilanzViewPermissionKey,_m.BilanzWritePermissionKey]},{id:"5",type:um.TaxPrivate,dynamic:!1,displayName:"Steuern f\xfcr Privatleute",possiblePermissions:[_m.TaxViewPermissionKey,_m.TaxWritePermissionKey]},{id:"6",type:um.TaxCorporation,dynamic:!1,displayName:"Steuern f\xfcr Unternehmen",possiblePermissions:[_m.TaxViewPermissionKey,_m.TaxWritePermissionKey]})}},{key:"_setTestResources",value:function(){this.resources.push({type:um.FolderRoot,id:"101",orgaId:"300",displayName:"Belegverwaltung"},{type:um.Folder,id:"1",orgaId:"300",displayName:"Notizen"},{type:um.Folder,id:"2",orgaId:"300",displayName:"Steuersachen"},{type:um.Folder,id:"3",orgaId:"300",displayName:"Golfausfl\xfcge"},{type:um.Folder,id:"4",orgaId:"300",displayName:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{type:um.Bilanz,id:"220",orgaId:"300",displayName:"Jahresabschluss"},{type:um.TaxPrivate,id:"30",orgaId:"300",displayName:"Steuern f\xfcr Privatleute"},{type:um.TaxCorporation,id:"31",orgaId:"300",displayName:"Steuern f\xfcr Unternehmen"},{type:um.FolderRoot,id:"102",orgaId:"301",displayName:"Belegverwaltung"},{type:um.Folder,id:"10",orgaId:"301",displayName:"Rechtliches"},{type:um.Folder,id:"11",orgaId:"301",displayName:"Kassenarchiv"},{type:um.FolderRoot,id:"103",orgaId:"302",displayName:"Belegverwaltung"},{type:um.Folder,id:"20",orgaId:"302",displayName:"Finanzen"},{type:um.Folder,id:"21",orgaId:"302",displayName:"Rechnungen"}),this._onOrganizationCreation("300"),this._onOrganizationCreation("301"),this._onOrganizationCreation("302")}},{key:"_setTestSubResources",value:function(){this.subResources.push({id:"7000",typeId:um.Folder,orgaId:"300",subOrgaId:"1000",orgaResourceId:"1"},{id:"7001",typeId:um.Folder,orgaId:"300",subOrgaId:"1001",orgaResourceId:"1"},{id:"7005",typeId:um.Folder,orgaId:"300",subOrgaId:"1000",orgaResourceId:"2"},{id:"7010",typeId:um.Folder,orgaId:"300",subOrgaId:"1000",orgaResourceId:"4"},{id:"7100",typeId:um.Folder,orgaId:"302",subOrgaId:"1100",orgaResourceId:"20"})}},{key:"_setTestPermissions",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._setAccessRight("0","400","300",{type:um.FolderRoot,id:"101",orgaId:"300"},_m.FolderCreatePermissionKey);case 2:return e.next=4,this._setAccessRight("0","400","300",{type:um.Folder,id:"1",orgaId:"300"},_m.FolderReadPermissionKey);case 4:return e.next=6,this._setAccessRight("0","400","300",{type:um.Folder,id:"1",orgaId:"300"},_m.FolderWritePermissionKey);case 6:return e.next=8,this._setAccessRight("0","400","300",{type:um.Folder,id:"1",orgaId:"300"},_m.FolderDeletePermissionKey);case 8:return e.next=10,this._setAccessRight("0","400","300",{type:um.Folder,id:"2",orgaId:"300"},_m.FolderReadPermissionKey);case 10:return e.next=12,this._setAccessRight("0","400","300",{type:um.Folder,id:"2",orgaId:"300"},_m.FolderWritePermissionKey);case 12:return e.next=14,this._setAccessRight("0","400","300",{type:um.Folder,id:"2",orgaId:"300"},_m.FolderDeletePermissionKey);case 14:return e.next=16,this._setAccessRight("0","400","300",{type:um.Folder,id:"3",orgaId:"300"},_m.FolderReadPermissionKey);case 16:return e.next=18,this._setAccessRight("0","400","300",{type:um.Folder,id:"3",orgaId:"300"},_m.FolderWritePermissionKey);case 18:return e.next=20,this._setAccessRight("0","400","300",{type:um.Folder,id:"3",orgaId:"300"},_m.FolderDeletePermissionKey);case 20:return e.next=22,this._setAccessRight("0","400","300",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderReadPermissionKey);case 22:return e.next=24,this._setAccessRight("0","400","300",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderWritePermissionKey);case 24:return e.next=26,this._setAccessRight("0","400","300",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderDeletePermissionKey);case 26:return e.next=28,this._setAccessRight("0","400","300",{type:um.Bilanz,id:"220",orgaId:"300"},_m.BilanzViewPermissionKey);case 28:return e.next=30,this._setAccessRight("0","400","300",{type:um.Bilanz,id:"220",orgaId:"300"},_m.BilanzWritePermissionKey);case 30:return e.next=32,this._setAccessRight("0","401","300",{type:um.Bilanz,id:"220",orgaId:"300"},_m.BilanzViewPermissionKey);case 32:return e.next=34,this._setAccessRight("0","400","300",{type:um.TaxPrivate,id:"30",orgaId:"300"},_m.TaxViewPermissionKey);case 34:return e.next=36,this._setAccessRight("0","400","300",{type:um.TaxPrivate,id:"30",orgaId:"300"},_m.TaxWritePermissionKey);case 36:return e.next=38,this._setAccessRight("0","400","300",{type:um.TaxCorporation,id:"31",orgaId:"300"},_m.TaxViewPermissionKey);case 38:return e.next=40,this._setAccessRight("0","401","300",{type:um.TaxPrivate,id:"30",orgaId:"300"},_m.TaxViewPermissionKey);case 40:return e.next=42,this._setAccessRight("0","401","300",{type:um.Folder,id:"1",orgaId:"300"},_m.FolderReadPermissionKey);case 42:return e.next=44,this._setAccessRight("0","401","300",{type:um.Folder,id:"1",orgaId:"300"},_m.FolderWritePermissionKey);case 44:return e.next=46,this._setAccessRight("0","401","300",{type:um.Folder,id:"2",orgaId:"300"},_m.FolderReadPermissionKey);case 46:return e.next=48,this._setAccessRight("0","401","300",{type:um.Folder,id:"2",orgaId:"300"},_m.FolderWritePermissionKey);case 48:return e.next=50,this._setAccessRight("0","401","300",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderReadPermissionKey);case 50:return e.next=52,this._setAccessRight("0","401","300",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderWritePermissionKey);case 52:return e.next=54,this._setAccessRight("0","405","300",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderReadPermissionKey,"302");case 54:return e.next=56,this._setAccessRight("0","405","300",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderWritePermissionKey,"302");case 56:return e.next=58,this._setAccessRight("0","420","302",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderReadPermissionKey,"302");case 58:return e.next=60,this._setAccessRight("0","421","302",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderReadPermissionKey,"302");case 60:return e.next=62,this._setAccessRight("0","421","302",{type:um.Folder,id:"4",orgaId:"300"},_m.FolderWritePermissionKey,"302");case 62:return e.next=64,this._setAccessRight("0","410","301",{type:um.FolderRoot,id:"102",orgaId:"301"},_m.FolderCreatePermissionKey);case 64:return e.next=66,this._setAccessRight("0","410","301",{type:um.Folder,id:"10",orgaId:"301"},_m.FolderReadPermissionKey);case 66:return e.next=68,this._setAccessRight("0","410","301",{type:um.Folder,id:"10",orgaId:"301"},_m.FolderWritePermissionKey);case 68:return e.next=70,this._setAccessRight("0","410","301",{type:um.Folder,id:"10",orgaId:"301"},_m.FolderDeletePermissionKey);case 70:return e.next=72,this._setAccessRight("0","410","301",{type:um.Folder,id:"11",orgaId:"301"},_m.FolderReadPermissionKey);case 72:return e.next=74,this._setAccessRight("0","410","301",{type:um.Folder,id:"11",orgaId:"301"},_m.FolderWritePermissionKey);case 74:return e.next=76,this._setAccessRight("0","410","301",{type:um.Folder,id:"11",orgaId:"301"},_m.FolderDeletePermissionKey);case 76:return e.next=78,this._setAccessRight("0","411","301",{type:um.Folder,id:"10",orgaId:"301"},_m.FolderReadPermissionKey);case 78:return e.next=80,this._setAccessRight("0","411","301",{type:um.Folder,id:"10",orgaId:"301"},_m.FolderWritePermissionKey);case 80:return e.next=82,this._setAccessRight("0","411","301",{type:um.Folder,id:"11",orgaId:"301"},_m.FolderReadPermissionKey);case 82:return e.next=84,this._setAccessRight("0","411","301",{type:um.Folder,id:"11",orgaId:"301"},_m.FolderWritePermissionKey);case 84:return e.next=86,this._setAccessRight("0","412","301",{type:um.Folder,id:"10",orgaId:"301"},_m.FolderWritePermissionKey);case 86:return e.next=88,this._setAccessRight("0","412","301",{type:um.Folder,id:"11",orgaId:"301"},_m.FolderWritePermissionKey);case 88:return e.next=90,this._setAccessRight("0","420","302",{type:um.FolderRoot,id:"103",orgaId:"302"},_m.FolderCreatePermissionKey);case 90:return e.next=92,this._setAccessRight("0","420","302",{type:um.Folder,id:"20",orgaId:"302"},_m.FolderReadPermissionKey);case 92:return e.next=94,this._setAccessRight("0","420","302",{type:um.Folder,id:"20",orgaId:"302"},_m.FolderWritePermissionKey);case 94:return e.next=96,this._setAccessRight("0","420","302",{type:um.Folder,id:"20",orgaId:"302"},_m.FolderDeletePermissionKey);case 96:return e.next=98,this._setAccessRight("0","420","302",{type:um.Folder,id:"21",orgaId:"302"},_m.FolderReadPermissionKey);case 98:return e.next=100,this._setAccessRight("0","420","302",{type:um.Folder,id:"21",orgaId:"302"},_m.FolderWritePermissionKey);case 100:return e.next=102,this._setAccessRight("0","420","302",{type:um.Folder,id:"21",orgaId:"302"},_m.FolderDeletePermissionKey);case 102:return e.next=104,this._setAccessRight("0","421","302",{type:um.Folder,id:"20",orgaId:"302"},_m.FolderReadPermissionKey);case 104:return e.next=106,this._setAccessRight("0","421","302",{type:um.Folder,id:"20",orgaId:"302"},_m.FolderWritePermissionKey);case 106:return e.next=108,this._setAccessRight("0","421","302",{type:um.Folder,id:"21",orgaId:"302"},_m.FolderReadPermissionKey);case 108:return e.next=110,this._setAccessRight("0","421","302",{type:um.Folder,id:"21",orgaId:"302"},_m.FolderWritePermissionKey);case 110:case"end":return e.stop()}}),e,this)})))}},{key:"executeAmPartOfMgv",value:function(e,t,n,r,i,a){var s,o,u,c,l,d,h,f;return ku(this,void 0,void 0,regeneratorRuntime.mark((function g(){var v,p,m,y,k,b,_,w,C,O,I=this;return regeneratorRuntime.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:v=this.getAllResourcesOfSubOrga(e,t),p=[],g.prev=1,y=bu(v);case 3:return g.next=5,y.next();case 5:if((m=g.sent).done){g.next=19;break}return k=m.value,b=void 0,g.next=10,this._isStaticResource(k);case 10:if(!g.sent){g.next=14;break}g.t0=this._findStaticResourceByTypeAndOrgaId(k.type,n),g.next=15;break;case 14:g.t0=this._justCreateNewResource(Object.assign(Object.assign({},k),{orgaId:n,id:""}));case 15:(b=g.t0)&&(p.push({sourceResourceId:k.id,destinationResourceId:b.id}),this._createSubResource({id:"",orgaId:n,orgaResourceId:b.id,subOrgaId:r,typeId:b.type}));case 17:g.next=3;break;case 19:g.next=24;break;case 21:g.prev=21,g.t1=g.catch(1),u={error:g.t1};case 24:if(g.prev=24,g.prev=25,g.t2=m&&!m.done&&(c=y.return),!g.t2){g.next=30;break}return g.next=30,c.call(y);case 30:if(g.prev=30,!u){g.next=33;break}throw u.error;case 33:return g.finish(30);case 34:return g.finish(24);case 35:if(!a){g.next=86;break}g.prev=36,s=bu(i);case 38:return g.next=40,s.next();case 40:if((o=g.sent).done){g.next=70;break}_=o.value,g.prev=42,C=bu(p);case 44:return g.next=46,C.next();case 46:if((w=g.sent).done){g.next=52;break}return O=w.value,g.next=50,this._copyPermissionsOfUser2resource4mgv(_.sourceUserId,O.sourceResourceId,_.destinationUserId,O.destinationResourceId,n,r);case 50:g.next=44;break;case 52:g.next=57;break;case 54:g.prev=54,g.t3=g.catch(42),h={error:g.t3};case 57:if(g.prev=57,g.prev=58,g.t4=w&&!w.done&&(f=C.return),!g.t4){g.next=63;break}return g.next=63,f.call(C);case 63:if(g.prev=63,!h){g.next=66;break}throw h.error;case 66:return g.finish(63);case 67:return g.finish(57);case 68:g.next=38;break;case 70:g.next=75;break;case 72:g.prev=72,g.t5=g.catch(36),l={error:g.t5};case 75:if(g.prev=75,g.prev=76,g.t6=o&&!o.done&&(d=s.return),!g.t6){g.next=81;break}return g.next=81,d.call(s);case 81:if(g.prev=81,!l){g.next=84;break}throw l.error;case 84:return g.finish(81);case 85:return g.finish(75);case 86:return g.abrupt("return",(v.forEach((function(e){var t=p.filter((function(t){return t.sourceResourceId===e.id}));1===t.length&&I.eventService.publishResourceEvent({type:xm.ResourceMoved,resourceOld:e,resourceNew:{id:t[0].destinationResourceId,orgaId:n}}),I._removeResource(e.id)})),!0));case 87:case"end":return g.stop()}}),g,this,[[1,21,24,35],[25,,30,34],[36,72,75,86],[42,54,57,68],[58,,63,67],[76,,81,85]])})))}},{key:"_copyPermissionsOfUser2resource4mgv",value:function(e,t,n,r,i){var a,s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0";return ku(this,void 0,void 0,regeneratorRuntime.mark((function u(){var c,l,d,h,f;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(c=this._findResource(r)){u.next=3;break}return u.abrupt("return",!1);case 3:return u.next=5,this._getAllPermissionsOfUserToResource(e,t);case 5:l=u.sent,u.prev=6,h=bu(l);case 8:return u.next=10,h.next();case 10:if((d=u.sent).done){u.next=16;break}return f=d.value,u.next=14,this._setAccessRight(o,n,i,c,f,void 0);case 14:u.next=8;break;case 16:u.next=21;break;case 18:u.prev=18,u.t0=u.catch(6),a={error:u.t0};case 21:if(u.prev=21,u.prev=22,u.t1=d&&!d.done&&(s=h.return),!u.t1){u.next=27;break}return u.next=27,s.call(h);case 27:if(u.prev=27,!a){u.next=30;break}throw a.error;case 30:return u.finish(27);case 31:return u.finish(21);case 32:case"end":return u.stop()}}),u,this,[[6,18,21,32],[22,,27,31]])})))}},{key:"_getAllPermissionsOfUserToResource",value:function(e,t){return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,a,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this._findResource(t)){n.next=3;break}return n.abrupt("return",[]);case 3:return n.next=5,this._findResourceType(r.type);case 5:if(i=n.sent){n.next=8;break}return n.abrupt("return",[]);case 8:return a=[],n.abrupt("return",(i.possiblePermissions.forEach((function(n){s._hasPermission(e,t,n)&&a.push(n)})),a));case 10:case"end":return n.stop()}}),n,this)})))}}],[{key:"_isForeignUser",value:function(e){return!!e&&!!e.foreignUserId}},{key:"_isForeignOrga",value:function(e){return!!e&&!!e.foreignOrgaId}},{key:"_isForeignUserOrOrga",value:function(t){return e._isForeignUser(t)||e._isForeignOrga(t)}},{key:"_isForeignResourceOfUser",value:function(e,t){return t.orgaId!==e.orgaId}},{key:"_assertIsSameSubOrga",value:function(e,t){if(e!==t)throw new Error("AssertSameSubOrga: subOrgaIds are not the same.")}}]),e}()).\u0275fac=function(e){return new(e||Cm)(Je(Am),Je(hd),Je(sd))},Cm.\u0275prov=he({token:Cm,factory:Cm.\u0275fac,providedIn:"root"}),Cm);function Um(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"h5"),Xa(2),Ea(),Ma(3,"p"),Xa(4,"Zum Anzeigen der detaillierten Informationen bitte in Organisation einloggen..."),Ea(),Ea()),2&e){var n=ja();Rr(2),ts("Lizenz- und Rechteinfo f\xfcr das Produkt ",null==n.product?null:n.product.name,"")}}function Pm(e,t){1&e&&(Ma(0,"p"),Xa(1,"Du besitzt eine Lizenz f\xfcr das Produkt und darfst es somit nutzen."),Ea())}function Tm(e,t){1&e&&(Ma(0,"p"),Xa(1,"Du besitzt keine Lizenz f\xfcr das Produkt."),Ea())}function Mm(e,t){1&e&&(Ma(0,"p"),Xa(1,"Du hast keinerlei - das Produkt betreffende - Freigaben."),Ea())}function Em(e,t){1&e&&(Ma(0,"p"),Xa(1,"Du hast folgende - das Produkt betreffende - Freigaben:"),Ea())}function Fm(e,t){if(1&e&&(Ma(0,"li"),Ma(1,"span",4),Xa(2),Ea(),Ma(3,"span",5),Xa(4),Ea(),Ma(5,"span",6),Xa(6),Ea(),Ea()),2&e){var n=t.$implicit;Rr(2),ts(" ",n.displayName," "),Rr(2),ts(" ",n.resourceId," "),Rr(2),ts(" ",n.permission," ")}}function Nm(e,t){if(1&e&&(Ma(0,"ul",2),Ma(1,"li",3),Ma(2,"span",4),Xa(3," Ressourcename "),Ea(),Ma(4,"span",5),Xa(5," RessourceId "),Ea(),Ma(6,"span",6),Xa(7," Freigabe "),Ea(),Ea(),xa(8,Fm,7,3,"li",7),Ea()),2&e){var n=ja(2);Rr(8),Pa("ngForOf",null==n.product?null:n.product.permissions4User)}}function Dm(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"h5"),Xa(2),Ea(),Ma(3,"p"),Xa(4),Ea(),Ma(5,"p"),Xa(6),Ea(),xa(7,Pm,2,0,"p",0),xa(8,Tm,2,0,"p",0),xa(9,Mm,2,0,"p",0),xa(10,Em,2,0,"p",0),xa(11,Nm,9,1,"ul",1),Ea()),2&e){var n=ja();Rr(2),ts("Lizenz- und Rechteinfo f\xfcr das Produkt ",null==n.product?null:n.product.name,""),Rr(2),ts("Deine Organisation hat insgesamt ",null==n.product?null:n.product.totalLicences," Lizenzen f\xfcr das Produkt gekauft."),Rr(2),ts("",null==n.product?null:n.product.freeLicences," Lizenzen sind noch keinem Benutzer zugeordnet und damit frei."),Rr(1),Pa("ngIf",null==n.product?null:n.product.licencedToUser),Rr(1),Pa("ngIf",!(null!=n.product&&n.product.licencedToUser)),Rr(1),Pa("ngIf",0==(null==n.product||null==n.product.permissions4User?null:n.product.permissions4User.length)),Rr(1),Pa("ngIf",(null==n.product||null==n.product.permissions4User?null:n.product.permissions4User.length)>0),Rr(1),Pa("ngIf",(null==n.product?null:n.product.permissions4User).length>0)}}var zm,Vm=((zm=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.route=t,this.principalService=n,this.settingsService=r,this.licenceService=i,this.accessService=a,this.product={name:""},this.loggedInInOrga=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t,n,r,i,a,s=this,o=null!==(t=null===(e=this.route.snapshot.data)||void 0===e?void 0:e.dataProductId)&&void 0!==t?t:If.BILANZ;this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.orgaUser=this.principalService.getOrgaUser(),this.product=this.licenceService.getProductAndLicenceInfo(o,null===(n=this.orgaUser)||void 0===n?void 0:n.orgaId,null===(r=this.orgaUser)||void 0===r?void 0:r.id),this.settingsService.setTitle("Beispielprodukt: "+(null===(i=this.product)||void 0===i?void 0:i.name)),this.loggedInInOrga&&this.product&&(this.product.permissions4User=[],null===(a=this.product.resourceTypes)||void 0===a||a.forEach((function(e){var t,n;(t=null===(n=s.product)||void 0===n?void 0:n.permissions4User).push.apply(t,_toConsumableArray(s.accessService.getAllPermissions4PrincipalByResourceType(e)))})))}}]),e}()).\u0275fac=function(e){return new(e||zm)(Ra(Cv),Ra(hd),Ra(cd),Ra(dm),Ra(Rm))},zm.\u0275cmp=ht({type:zm,selectors:[["app-generic-product"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","liste",4,"ngIf"],[1,"liste"],[1,"valign-wrapper"],[1,"list-item-text-left"],[1,"list-item-text","small"],[1,"list-item-text"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(xa(0,Um,5,1,"div",0),xa(1,Dm,12,8,"div",0)),2&e&&(Pa("ngIf",!t.loggedInInOrga),Rr(1),Pa("ngIf",t.loggedInInOrga))},directives:[pc,gc],styles:[".list-item-text[_ngcontent-%COMP%], .list-item-text-left[_ngcontent-%COMP%]{width:15em}.small[_ngcontent-%COMP%]{width:10em}"]}),zm);n("Gp9u");var Bm=function(e){return e.Benutzerkonto="Benutzerkonto",e.SmsTan="SmsTan",e.SmartCard="SmartCard",e.SmartLogin="SmartLogin",e.SocialLogin="SocialLogin",e.OrgaDependent_DID="OrgaDependent_DID",e}({});function Lm(e){return e===Bm.OrgaDependent_DID}function jm(e){switch(e.type){case Bm.Benutzerkonto:return dd.Low;case Bm.SmsTan:return dd.Medium;case Bm.SmartCard:case Bm.SmartLogin:return dd.Secure}return dd.Low}var Hm,Gm,Wm,qm,Km,Zm,$m,Jm,Qm=function(e){return e.Privat="Privat",e.Unternehmen="Unternehmen",e.Kanzlei="Kanzlei",e}({}),Ym=function(e){return e[e.AccountVerified=1]="AccountVerified",e[e.AccountVerificationDeclined=2]="AccountVerificationDeclined",e[e.OrgaUserInvitationDeclined=3]="OrgaUserInvitationDeclined",e[e.OrgaUserInvitationAccepted=4]="OrgaUserInvitationAccepted",e[e.WishOfMembershipAccepted=5]="WishOfMembershipAccepted",e}({}),Xm=function(e){return e.AccountVerification="AccountVerification",e.InvitationOrgaUser="InvitationOrgaUser",e.InfoOfInvitationOrgaUser="InfoOfInvitationOrgaUser",e}({}),ey=((Jm=function(){function e(t){_classCallCheck(this,e),this.http=t,this.mailBackendUri=yu+"fakeMails/"}return _createClass(e,[{key:"getAllMails",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get(this.mailBackendUri).toPromise();case 3:return t=e.sent,n=[],e.abrupt("return",(t.forEach((function(e){n.push({id:e.id,email:e.email,type:e.type,account:e.account?Object.assign({},e.account):void 0,orgaUser:e.orgaUser?Object.assign({},e.orgaUser):void 0,organization:e.organization?Object.assign({},e.organization):void 0})})),n));case 8:e.prev=8,e.t0=e.catch(0),_u(e.t0);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})))}},{key:"deleteMail",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.mailBackendUri+e).toPromise();case 3:return t.abrupt("return",!!t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}}]),e}()).\u0275fac=function(e){return new(e||Jm)(Je(tl))},Jm.\u0275prov=he({token:Jm,factory:Jm.\u0275fac,providedIn:"root"}),Jm),ty=(($m=function(){function e(t,n){_classCallCheck(this,e),this.settingsService=t,this.beMailService=n,this.mailList=[],this.useValueFromBackend=!0,this.callBackend=!1}return _createClass(e,[{key:"mailsAvailable",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.callBackend,!e.t0){e.next=4;break}return e.next=4,this.getAllMails();case 4:return e.abrupt("return",this.mailList.length>0);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getNumberOfMails",value:function(){return this.mailList.length}},{key:"getMailByOrgaUserId",value:function(e){return this.mailList.find((function(t){var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)===e}))}},{key:"markTaskAsDone",value:function(e,t){var n=this.getTaskById(e);n&&n.type===Xm.InvitationOrgaUser&&(n.account=t)}},{key:"setTaskInProgress",value:function(e){return this.resetTaskInProgress(),this.taskByMailInProgress=this.mailList.find((function(t){return t.id===e})),!!this.taskByMailInProgress}},{key:"resetTaskInProgress",value:function(){this.taskByMailInProgress=void 0}},{key:"getTaskInProgress",value:function(){return this.taskByMailInProgress}},{key:"getTaskById",value:function(e){return this.mailList.find((function(t){return t.id===e}))}},{key:"addMailTask",value:function(e){if(this.callBackend&&alert("addMailTask mit echtem Backend?!?"),this.resetTaskInProgress(),this.settingsService.showImportantInfosOnly())switch(e.type){case Xm.InfoOfInvitationOrgaUser:return}e.id=Cu(this.mailList),this.mailList.push(e)}},{key:"getAllMails",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callBackend){e.next=5;break}return e.next=3,this.beMailService.getAllMails();case 3:t=e.sent,this.useValueFromBackend&&(this.mailList=[],this.mailList=t);case 5:return e.abrupt("return",this.mailList);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"removeTask",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.resetTaskInProgress(),t.t0=this.callBackend,!t.t0){t.next=5;break}return t.next=5,this.beMailService.deleteMail(e);case 5:(n=this.mailList.findIndex((function(t){return t.id===e})))>=0&&this.mailList.splice(n,1);case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||$m)(Je(cd),Je(ey))},$m.\u0275prov=he({token:$m,factory:$m.\u0275fac,providedIn:"root"}),$m),ny=((Zm=function(){function e(t){_classCallCheck(this,e),this.http=t,this.notificationBackendUri=yu+"notifications/"}return _createClass(e,[{key:"getAllNotificationsForCurrentPrincipal",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get(this.notificationBackendUri).toPromise();case 3:return t=e.sent,n=[],e.abrupt("return",(t.forEach((function(e){n.push({id:e.id,type:e.type,accountIdAsRecipient:e.accountIdAsRecipient,orgaIdAsRecipient:e.orgaIdAsRecipient,account:e.account?Object.assign({},e.account):void 0,orgaUser:e.orgaUser?Object.assign({},e.orgaUser):void 0,organization:e.organization?Object.assign({},e.organization):void 0})})),n));case 8:e.prev=8,e.t0=e.catch(0),_u(e.t0);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})))}},{key:"getCountOfAllNotificationsForCurrentPrincipal",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get(this.notificationBackendUri+"count").toPromise();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),_u(e.t0);case 9:return e.abrupt("return",0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"acceptInvitation",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.post(this.notificationBackendUri+e+"/accept",{}).toPromise();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"denyInvitation",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.post(this.notificationBackendUri+e+"/deny",{}).toPromise();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"deleteNotification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.notificationBackendUri+e).toPromise();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}}]),e}()).\u0275fac=function(e){return new(e||Zm)(Je(tl))},Zm.\u0275prov=he({token:Zm,factory:Zm.\u0275fac,providedIn:"root"}),Zm),ry=((Km=function(){function e(t,n,r,i){var a=this;_classCallCheck(this,e),this.principalService=t,this.eventService=n,this.settingsService=r,this.beNotificationService=i,this.notificationList=[],this.callBackend=!1,this.useValueFromBackend=!0,this.eventService.idmEvent.subscribe((function(e){return a._onIdmEvent(e)}))}return _createClass(e,[{key:"_onIdmEvent",value:function(e){var t=this.notificationList.length;switch(e.type){case lm.AccountDeleted:this._removeItemsForThisAccount(e.accountId);break;case lm.OrgaUserRemoved:this._removeItemsForThisOrgaUser(e.orgaUser.id);break;case lm.OrganisationRemoved:this._removeItemsForThisOrganisation(e.organizationId)}this.notificationList.length!==t&&this.eventService.publishRefreshMainViewEvent()}},{key:"_removeItemsForThisAccount",value:function(e){this.notificationList=this.notificationList.filter((function(t){return t.accountIdAsRecipient!==e}))}},{key:"_removeItemsForThisOrgaUser",value:function(e){this.notificationList=this.notificationList.filter((function(t){var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)!==e}))}},{key:"_removeItemsForThisOrganisation",value:function(e){this.notificationList=this.notificationList.filter((function(t){return t.orgaIdAsRecipient!==e})),this.notificationList=this.notificationList.filter((function(t){var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.orgaId)!==e}))}},{key:"_fillWithTestData",value:function(){this.notificationList.push({id:"1",type:fd.InfoForSuccessfulAccountVerification,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0}},{id:"2",type:fd.RequestForInvitationAsOrgaUserToUser,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"3",type:fd.RequestForInvitationAsOrgaUserToOrga,orgaIdAsRecipient:"300",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"33",type:fd.RequestForInvitationAsOrgaUserToOrga,orgaIdAsRecipient:"300",account:{id:"111",name:"Simone",email:"",verified:!0},orgaUser:{id:"411",name:"Simone Heinzelmann",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"4",type:fd.InfoForDenialOfInvitationAsOrgaUserToOrga,orgaIdAsRecipient:"300",orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"5",type:fd.InfoForApprovalInvitationOfOrgaUserToUser,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"6",type:fd.InfoForDenialOfInvitationOfOrgaUserToUser,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"7",type:fd.WishOfMembershipToOrga,orgaIdAsRecipient:"300",account:{id:"110",name:"Klaus",email:"",verified:!0},organization:{id:"300",name:"Kanzlei H",email:""}})}},{key:"addNotification",value:function(e){if(this.callBackend&&alert("addNotification with callBackend ?"),this.settingsService.showImportantInfosOnly())switch(e.type){case fd.InfoForSuccessfulAccountVerification:case fd.InfoForApprovalInvitationOfOrgaUserToUser:case fd.InfoForDenialOfInvitationAsOrgaUserToOrga:case fd.InfoForDenialOfInvitationOfOrgaUserToUser:return}e.id=Cu(this.notificationList),this.notificationList.push(e),this.eventService.publishRefreshMainViewEvent()}},{key:"getAllNotificationsForCurrentPrincipal",value:function(){var e,t;return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,a=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.principalService.isLoggedIn()){n.next=2;break}return n.abrupt("return",[]);case 2:if(!this.callBackend){n.next=8;break}return n.next=5,this.beNotificationService.getAllNotificationsForCurrentPrincipal();case 5:if(r=n.sent,!this.useValueFromBackend){n.next=8;break}return n.abrupt("return",r);case 8:return i=null!==(t=null===(e=this.principalService.getOrgaUser())||void 0===e?void 0:e.orgaId)&&void 0!==t?t:0,n.abrupt("return",(i&&!this.principalService.isAdminOfCurrentOrga()&&(i=0),this.notificationList.filter((function(e){return e.accountIdAsRecipient===a.principalService.getAccount().id||e.orgaIdAsRecipient===i?e:void 0}))));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getNumberOfNotificationsForCurrentPrincipal",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callBackend){e.next=6;break}return e.next=3,this.beNotificationService.getCountOfAllNotificationsForCurrentPrincipal();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this.getAllNotificationsForCurrentPrincipal();case 8:e.t0=e.sent.length;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"getNotificationByOrgaUserId",value:function(e){return this.notificationList.find((function(t){var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)===e}))}},{key:"_declineInvitationOrgaUserByUser",value:function(e){var t=Object.assign(Object.assign({},e),{id:"",type:fd.InfoForDenialOfInvitationAsOrgaUserToOrga,accountIdAsRecipient:void 0,orgaIdAsRecipient:e.orgaUser.orgaId});this.addNotification(t)}},{key:"_declineInvitationOrgaUserByOrga",value:function(e){var t,n=Object.assign(Object.assign({},e),{id:"",type:fd.InfoForDenialOfInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0});this.addNotification(n)}},{key:"_declineWishOfMembership",value:function(e){var t,n=Object.assign(Object.assign({},e),{id:"",type:fd.InfoForDenialOfInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0});this.addNotification(n)}},{key:"declineInvitation",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=4;break}return t.next=3,this.beNotificationService.denyInvitation(e);case 3:return t.abrupt("return",void this.eventService.publishRefreshMainViewEvent());case 4:if(!(n=this.notificationList.find((function(t){return t.id===e})))){t.next=15;break}t.t0=n.type,t.next=t.t0===fd.RequestForInvitationAsOrgaUserToUser?9:t.t0===fd.RequestForInvitationAsOrgaUserToOrga?11:t.t0===fd.WishOfMembershipToOrga?13:14;break;case 9:return this._declineInvitationOrgaUserByUser(n),t.abrupt("break",14);case 11:return this._declineInvitationOrgaUserByOrga(n),t.abrupt("break",14);case 13:this._declineWishOfMembership(n);case 14:this.removeNotification(e);case 15:case"end":return t.stop()}}),t,this)})))}},{key:"acceptInvitation",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=4;break}return t.next=3,this.beNotificationService.acceptInvitation(e);case 3:return t.abrupt("return",void this.eventService.publishRefreshMainViewEvent());case 4:if(!(n=this.notificationList.find((function(t){return t.id===e})))){t.next=15;break}t.t0=n.type,t.next=t.t0===fd.RequestForInvitationAsOrgaUserToUser?9:t.t0===fd.WishOfMembershipToOrga?11:t.t0===fd.RequestForInvitationAsOrgaUserToOrga?13:14;break;case 9:return this._acceptInvitationOrgaUserByUser(n),t.abrupt("break",14);case 11:return this._acceptWishOfMembership(n),t.abrupt("break",14);case 13:this._acceptInvitationOrgaUserByOrga(n);case 14:this.removeNotification(e);case 15:case"end":return t.stop()}}),t,this)})))}},{key:"removeNotification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=5;break}return t.next=3,this.beNotificationService.deleteNotification(e);case 3:t.next=7;break;case 5:(n=this.notificationList.findIndex((function(t){return t.id===e})))>=0&&this.notificationList.splice(n,1);case 7:this.eventService.publishRefreshMainViewEvent();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"_acceptInvitationOrgaUserByOrga",value:function(e){var t;return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.eventService.publishTaskEvent({type:Ym.OrgaUserInvitationAccepted,account:e.account,orgaUser:e.orgaUser}),r=Object.assign(Object.assign({},e),{id:"",type:fd.InfoForApprovalInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0}),n.abrupt("return",(this.addNotification(r),!0));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"_acceptWishOfMembership",value:function(e){var t;this.eventService.publishTaskEvent({type:Ym.WishOfMembershipAccepted,account:e.account,organization:e.organization});var n=Object.assign(Object.assign({},e),{id:"",type:fd.InfoForApprovalInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0});return this.addNotification(n),!0}},{key:"_acceptInvitationOrgaUserByUser",value:function(e){var t=Object.assign(Object.assign({},e),{id:"",type:fd.RequestForInvitationAsOrgaUserToOrga,accountIdAsRecipient:void 0,orgaIdAsRecipient:e.orgaUser.orgaId});return this.addNotification(t),!0}}]),e}()).\u0275fac=function(e){return new(e||Km)(Je(hd),Je(sd),Je(cd),Je(ny))},Km.\u0275prov=he({token:Km,factory:Km.\u0275fac,providedIn:"root"}),Km),iy=((qm=function(){function e(t,n,r,i,a){var s=this;_classCallCheck(this,e),this.settingsService=t,this.eventService=n,this.principalService=r,this.mailService=i,this.notificationService=a,this.accounts=[{id:"100",verified:!0,name:"System Admin",email:"sysadmin@bk"},{id:"110",verified:!0,name:"Klaus",email:"klaus@bk"},{id:"111",verified:!0,name:"Simone",email:"simone@bk"},{id:"120",verified:!0,name:"Martin",email:"martin@bk"},{id:"121",verified:!0,name:"Sonja",email:"sonja@bk"},{id:"122",verified:!0,name:"Kasse Kanzlei Palmengarten",email:"dummy@martin"},{id:"130",verified:!0,name:"Tom",email:"tom@bk"},{id:"131",verified:!0,name:"Petra",email:"petra@bk"},{id:"140",verified:!0,name:"Resi",email:"resi@bk"}],this.creds=[{id:"200",accountId:"100",kennung:"sysadmin@bk",secret:"test",type:Bm.Benutzerkonto},{id:"210",accountId:"110",kennung:"klaus@bk",secret:"test",type:Bm.Benutzerkonto},{id:"211",accountId:"110",kennung:"klaus@sc",secret:"test",type:Bm.SmartCard},{id:"212",accountId:"110",kennung:"",secret:"",type:Bm.SocialLogin,provider:"google",userIdFromProvider:"113153024055027519050"},{id:"215",accountId:"111",kennung:"simone@bk",secret:"test",type:Bm.Benutzerkonto},{id:"216",accountId:"111",kennung:"simone@sc",secret:"test",type:Bm.SmartCard},{id:"220",accountId:"120",kennung:"martin@bk",secret:"test",type:Bm.Benutzerkonto},{id:"221",accountId:"120",kennung:"martin@st",secret:"test",type:Bm.SmsTan},{id:"222",accountId:"120",kennung:"martin@sc",secret:"test",type:Bm.SmartCard},{id:"223",accountId:"120",orgaId:"301",kennung:"martin@did",secret:"test",type:Bm.OrgaDependent_DID},{id:"224",accountId:"120",orgaId:"999",kennung:"martinNoOrga@did",secret:"test",type:Bm.OrgaDependent_DID},{id:"225",accountId:"121",kennung:"sonja@bk",secret:"test",type:Bm.Benutzerkonto},{id:"227",accountId:"122",orgaId:"301",kennung:"kasse@martin",secret:"test",type:Bm.OrgaDependent_DID},{id:"230",accountId:"130",kennung:"tom@bk",secret:"test",type:Bm.Benutzerkonto},{id:"231",accountId:"130",kennung:"tom@sc",secret:"test",type:Bm.SmartCard},{id:"235",accountId:"131",kennung:"petra@bk",secret:"test",type:Bm.Benutzerkonto},{id:"240",accountId:"140",kennung:"resi@bk",secret:"test",type:Bm.Benutzerkonto},{id:"241",accountId:"140",kennung:"resi@sc",secret:"test",type:Bm.SmartCard}],this.organizations=[{id:"300",name:"Kanzlei Heinzelmann",email:"info@Kanzlei-Heinzelmann",type:Qm.Kanzlei},{id:"301",name:"Kanzlei Palmengarten",email:"info@Kanzlei-Palmengarten",type:Qm.Kanzlei},{id:"302",name:"Holzhandel Grubinger",email:"info@Holzhandel-Grubinger",type:Qm.Unternehmen},{id:"303",name:"Familie Martin privat",email:"info@Familie-Martin",type:Qm.Privat}],this.orgaUsers=[{id:"400",accountId:"110",orgaId:"300",name:"Klaus Heinzelmann",adminType:ld.SuperAdmin},{id:"401",accountId:"111",orgaId:"300",name:"Simone Heinzelmann",adminType:ld.Admin},{id:"10401",orgaId:"300",name:"Hans Fallada",adminType:ld.Member},{id:"10402",orgaId:"300",name:"Friedrich Schiller",adminType:ld.Member},{id:"10403",orgaId:"300",name:"Wolfgang G\xf6the",adminType:ld.Member},{id:"10404",orgaId:"300",name:"Rainer Maria Rilke",adminType:ld.Member},{id:"10405",orgaId:"300",name:"G\xfcnther Grass",adminType:ld.Member},{id:"10406",orgaId:"300",name:"Heinrich Heine",adminType:ld.Member},{id:"405",orgaId:"300",foreignOrgaId:"302",name:"Mandant Grubinger",adminType:ld.Member},{id:"407",orgaId:"300",foreignUserId:"421",name:"Petra - Mandant Grubinger",adminType:ld.Member},{id:"410",accountId:"120",orgaId:"301",name:"Martin Palmengarten",adminType:ld.SuperAdmin},{id:"411",accountId:"121",orgaId:"301",name:"Sonja Hohlraab",adminType:ld.Member},{id:"412",accountId:"122",orgaId:"301",name:"Kasse von Kanzlei Palmengarten",adminType:ld.Member},{id:"420",accountId:"130",orgaId:"302",name:"Tom Grubinger",adminType:ld.SuperAdmin},{id:"421",accountId:"131",orgaId:"302",name:"Petra Elfenbein",adminType:ld.Member},{id:"430",accountId:"120",orgaId:"303",name:"Martin privat",adminType:ld.SuperAdmin}],this.subOrganizations=[{id:"1000",orgaId:"300",name:"Filiale F\xfcrth"},{id:"1001",orgaId:"300",name:"Filiale N\xfcrnberg"},{id:"1100",orgaId:"302",name:"Eigene Buchhaltung"}],this.subOrgaUsers=[{id:"5000",orgaId:"300",orgaUserId:"400",subOrgaId:"1000",subAdmin:!0},{id:"5001",orgaId:"300",orgaUserId:"400",subOrgaId:"1001",subAdmin:!0},{id:"5005",orgaId:"300",orgaUserId:"401",subOrgaId:"1000"},{id:"5010",orgaId:"300",orgaUserId:"405",subOrgaId:"1000"},{id:"5011",orgaId:"300",orgaUserId:"407",subOrgaId:"1000"},{id:"5100",orgaId:"302",orgaUserId:"420",subOrgaId:"1100",subAdmin:!0},{id:"5101",orgaId:"302",orgaUserId:"421",subOrgaId:"1100",subAdmin:!1}],this.eventService.taskEvent.subscribe((function(e){return s._onTaskEvent(e)}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){}},{key:"_onTaskEvent",value:function(e){switch(e.type){case Ym.AccountVerificationDeclined:this._deleteAccount(e.account.id);break;case Ym.OrgaUserInvitationDeclined:break;case Ym.OrgaUserInvitationAccepted:this._onOrgaUserInvitationAccepted(e.account.id,e.orgaUser.id);break;case Ym.WishOfMembershipAccepted:this._onWishOfMembershipAccepted(e)}}},{key:"_onWishOfMembershipAccepted",value:function(e){if(!e.account||!e.organization)throw new Error("Parameter falsch...!");var t=this.findAccountById(e.account.id),n=this.organizations.find((function(t){return t.id===e.organization.id}));t&&n&&this._addNewOrgaUser({id:"",name:t.name,accountId:t.id,orgaId:n.id,adminType:ld.Member})}},{key:"_onOrgaUserInvitationAccepted",value:function(e,t){var n=this.findAccountById(e),r=this.orgaUsers.find((function(e){return e.id===t}));n&&r&&(r.accountId=n.id)}},{key:"_handleInvitationOrgaUserTask",value:function(e,t){if(t.account)console.log("Mail-Task already done");else if(this.findOrgaUserByAccountId(t.orgaUser.orgaId,e.id))console.log("Account is already linked with other user in that orga");else{this.mailService.markTaskAsDone(t.id,e);var n=this.findOrgaUserById(t.orgaUser.id);n?n.accountId?console.log("invited orgaUser already linked with account"):this.notificationService.addNotification({id:"",type:fd.RequestForInvitationAsOrgaUserToUser,accountIdAsRecipient:e.id,account:e,orgaUser:t.orgaUser,organization:t.organization}):console.log("invited orgaUser not found")}}},{key:"_handleAccountVerification",value:function(e,t){var n;(null===(n=t.account)||void 0===n?void 0:n.id)===e.id?(e.verified=!0,this.notificationService.addNotification({id:"",type:fd.InfoForSuccessfulAccountVerification,accountIdAsRecipient:e.id,account:e})):console.log("account-verification with wrong account")}},{key:"_handleLoginTask",value:function(e,t){var n=this.mailService.getTaskById(t);(null==n?void 0:n.type)===Xm.AccountVerification?this._handleAccountVerification(e,n):(null==n?void 0:n.type)===Xm.InvitationOrgaUser&&this._handleInvitationOrgaUserTask(e,n)}},{key:"login",value:function(e,t){var n,r=this;if(e.provider)n=this.creds.find((function(t){return t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider}));else{if(!e.kennung||0===e.kennung.length)throw new Error("wrong social-login without secret");n=this.creds.find((function(t){return t.kennung.toLowerCase()===e.kennung.toLowerCase()}))}if(!n)throw new Error("login-credential not found => failure");if(e.secret.length>0&&e.secret!==n.secret)throw new Error("login-secret incorrect => failure");var i=this.accounts.find((function(e){return e.id===n.accountId}));if(!i)throw new Error("huch: corresponding account not found => failure");if(this._handleLoginTask(i,t),!i.verified)throw new Error("login-attempt with un-verified account");var a=[];if(Lm(null==n?void 0:n.type)){if(!n.orgaId)throw new Error("OrgaDependent Credential, but no orgaId => login failed...");var s=this.orgaUsers.find((function(e){return e.accountId===i.id&&e.orgaId===n.orgaId}));if(!s)throw new Error("OrgaDependent Credential, but orgaUser not found => login failed...");a.push(s)}else this.orgaUsers.forEach((function(e){e.accountId===i.id&&a.push(e)}));if(a.length<=0)return{authType:Iu.Account,authLevel:jm(n),account:Object.assign({},i)};var o=[];a.forEach((function(e){o.push(r.organizations.find((function(t){return t.id===e.orgaId})))}));var u={authType:Iu.Account,authLevel:jm(n),account:Object.assign({},i),availableOrgas:wu(o)};return 1===o.length&&(u.authType=Iu.OrgaUser,u.orgaUser=Object.assign({},a[0]),u.organization=o[0]),u}},{key:"register",value:function(e,t,n){if(!this._checkAccountIsValid(e))throw new Error("account-fields not valid");if(!this._checkCredentialIsValid(t))throw new Error("credential-fields not valid");var r=this._addNewAccount(e);t.accountId=r.id;var i=this._addNewCredential(t);return this._handleLoginTask(r,n),this.settingsService.registeredAccountMustBeVerifiedByMail()||this.settingsService.afterRegistrationLoginIsRequired()?{authType:Iu.None}:this.login(i)}},{key:"addNewCredential",value:function(e){if(this.principalService.guardPrincipalIsThisAccount(e.accountId),this._checkCredentialIsValid(e))return Object.assign({},this._addNewCredential(e))}},{key:"getAllCredentials",value:function(e){return e?(this.principalService.guardPrincipalIsThisAccount(e),wu(this.creds.filter((function(t){return t.accountId===e})))):[]}},{key:"removeCredential",value:function(e){var t=this.creds.findIndex((function(t){return t.id===e}));t>=0&&(this.principalService.guardPrincipalIsThisAccount(this.creds[t].accountId),this.creds.splice(t,1))}},{key:"_checkCredentialIsValid",value:function(e){if(e.provider){if(!e.userIdFromProvider)return!1;if(this.creds.find((function(t){return t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider})))return!1}else{if(!e.kennung||e.kennung.length<3)return!1;if(this.creds.find((function(t){return t.kennung.toLowerCase()===e.kennung.toLowerCase()})))throw new Error("credential-kennung already used (email)")}return!0}},{key:"_addNewCredential",value:function(e){return e.id=Cu(this.creds),this.creds.push(e),e}},{key:"_deleteAllCredentialsOfAccount",value:function(e){this.creds=this.creds.filter((function(t){return t.accountId!==e}))}},{key:"findAccountByMail",value:function(e){var t=this.accounts.find((function(t){return t.email.toLowerCase()===e.toLowerCase()}));return t?Object.assign({},t):void 0}},{key:"findAccountById",value:function(e){var t=this.accounts.find((function(t){return t.id===e}));return t?Object.assign({},t):void 0}},{key:"updateAccount",value:function(e){if(this.principalService.guardPrincipalIsThisAccount(e.id),!this._checkAccountIsValid(e))return!1;var t=this.accounts.find((function(t){return t.id===e.id}));return t&&(t.name=e.name,t.email=e.email,t.verified=e.verified),!!t}},{key:"deleteAccount",value:function(e){return this.principalService.guardPrincipalIsThisAccount(e),this._deleteAccount(e)}},{key:"_deleteAccount",value:function(e){return!(this._accountIsMemberInAtLeastOneOrga(e)&&!this.settingsService.allowDeletionOfAccountWithOrgaMemberships()||!this.accounts.find((function(t){return t.id===e}))||(this._deleteAllOrgaUsersOfAccount(e),this._deleteAllCredentialsOfAccount(e),this._removeAccountFromList(e),this.eventService.publishIdmEvent({type:lm.AccountDeleted,accountId:e}),0))}},{key:"_accountIsMemberInAtLeastOneOrga",value:function(e){return void 0!==this.orgaUsers.find((function(t){return t.accountId===e}))}},{key:"_checkAccountIsValid",value:function(e){if(!e.name||e.name.length<3)return!1;var t=this.accounts.find((function(t){return t.email.toLowerCase()===e.email.toLowerCase()}));if(t){if(e.id===t.id)return!0;throw new Error("account with that email already exists...")}return!0}},{key:"_addNewAccount",value:function(e){var t=this.settingsService.registeredAccountMustBeVerifiedByMail();return e.verified=!t,e.id=Cu(this.accounts),this.accounts.push(e),t&&this.mailService.addMailTask({type:Xm.AccountVerification,email:e.email,account:e}),e}},{key:"_removeAccountFromList",value:function(e){var t=this.accounts.findIndex((function(t){return t.id===e}));t>=0&&this.accounts.splice(t,1)}},{key:"inviteUserToOrga",value:function(e,t,n){this.principalService.guardPrincipalIsOrgaAdmin(e);var r=this.findAccountByMail(n);if(r&&this.findOrgaUserByAccountId(e,r.id))throw new Error("Der einzuladende Benutzer ist bereits Mitglied in deiner Organsation!");var i={orgaId:e,adminType:ld.Member,name:t};if(r&&this.settingsService.acceptHandshakeDecisionsAutomatically())return i.accountId=r.id,this.joinOrganization(e,i);var a=this.joinOrganization(e,i);if(a){var s=Xm.InvitationOrgaUser,o=void 0,u=this.findOrgaById(e);return r&&(this.notificationService.addNotification({id:"",type:fd.RequestForInvitationAsOrgaUserToUser,accountIdAsRecipient:r.id,account:r,orgaUser:i,organization:u}),s=Xm.InfoOfInvitationOrgaUser,o=r),this.mailService.addMailTask({type:s,email:n,account:o,orgaUser:i,organization:u}),a}}},{key:"isForeignUser",value:function(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}},{key:"getAllOrgaUsers",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return[];this.principalService.guardPrincipalBelongsToThisOrga(e);var i=wu(this.orgaUsers.filter((function(t){return t.orgaId===e})));if(n&&(i=i.filter((function(e){return!t.isForeignUser(e)}))),r){var a=[];return i.forEach((function(e){a.push(Object.assign(Object.assign({},e),{status:t._getStatusOfOrgaUser(e)}))})),a}return i}},{key:"_getStatusOfOrgaUser",value:function(e){var t;return e.accountId?"OK":this.isForeignUser(e)?e.foreignUserId?"externer Benutzer":"externe Organisation":null!==(t=this._findMailOrNotificationForOrgaUser(e))&&void 0!==t?t:"unverbunden"}},{key:"_findMailOrNotificationForOrgaUser",value:function(e){var t=this.notificationService.getNotificationByOrgaUserId(e.id);if(t)switch(t.type){case fd.RequestForInvitationAsOrgaUserToUser:return"Einladung verschickt";case fd.InfoForDenialOfInvitationAsOrgaUserToOrga:return"Anwender hat abgelehnt";case fd.RequestForInvitationAsOrgaUserToOrga:return"Anwender hat zugestimmt";case fd.InfoForDenialOfInvitationOfOrgaUserToUser:return"Orga hat abgelehnt";case fd.InfoForApprovalInvitationOfOrgaUserToUser:return"Orga hat zugestimmt, OK";case fd.WishOfMembershipToOrga:return"Anwender w\xfcnscht Aufnahme"}var n=this.mailService.getMailByOrgaUserId(e.id);if(n)switch(n.type){case Xm.InfoOfInvitationOrgaUser:case Xm.InvitationOrgaUser:return"Mail versendet"}}},{key:"getAllOrgaUsers4SubOrga",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.principalService.guardPrincipalIsSubOrgaAdmin(t),void 0===t||""===t||"0"===t)return this.getAllOrgaUsers(e);var r=this.subOrgaUsers.filter((function(e){return e.subOrgaId===t})).map((function(e){return e.orgaUserId})),i=wu(this.orgaUsers.filter((function(e){return r.includes(e.id)})));return n?i.filter((function(e){return!e.foreignOrgaId&&!e.foreignUserId})):i}},{key:"updateOrgaUser",value:function(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this.orgaUsers.find((function(t){return t.id===e.id}));return t&&(t.name=e.name,t.adminType=e.adminType),t}},{key:"findOrgaUserByAccountId",value:function(e,t){if(e&&t){var n=this.orgaUsers.find((function(n){return n.orgaId===e&&n.accountId===t}));return n&&Object.assign({},n)}}},{key:"findAllOrgaUsersOfAccount",value:function(e){return e?wu(this.orgaUsers.filter((function(t){return t.accountId===e}))):[]}},{key:"accountHasAnyOrgaMembership",value:function(e){return this.principalService.guardPrincipalIsThisAccount(e),!!this.orgaUsers.find((function(t){return t.accountId===e}))}},{key:"findForeignUserByOrgaId",value:function(e,t){if(this.principalService.guardPrincipalBelongsToThisOrga(e),e&&t){var n=this.orgaUsers.find((function(n){return n.orgaId===e&&n.foreignUserId===t}));return n&&Object.assign({},n)}}},{key:"_findOrgaUserById",value:function(e){if(e)return this.orgaUsers.find((function(t){return t.id===e}))}},{key:"findOrgaUserById",value:function(e){var t=this._findOrgaUserById(e);return t&&Object.assign({},t)}},{key:"findCorrespondingForeignOrgaUser",value:function(e){if(!e.foreignUserId)throw new Error("Method findCorrespondingForeignOrgaUser called with wrong orgaUser-Type");this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this._findOrgaUserById(e.foreignUserId);return t&&Object.assign({},t)}},{key:"_findAllDirectProxyUsersOfUser",value:function(e){return this.orgaUsers.filter((function(t){return t.foreignUserId===e.id}))}},{key:"_addNewOrgaUser",value:function(e){return e.id=Cu(this.orgaUsers),this.orgaUsers.push(e),e}},{key:"_deleteAllOrgaUsersOfAccount",value:function(e){var t=this;this.orgaUsers.filter((function(t){return t.accountId===e})).forEach((function(e){return t._onOrgaUserRemoval(e)}))}},{key:"_isAdmin",value:function(e){var t=this._findOrgaUserById(e);return!(!t||!t.adminType)&&t.adminType!==ld.Member}},{key:"_onOrgaUserRemoval",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return!1;this._removeAllSubUsersOfOrgaUser(e);var r=this._findAllDirectProxyUsersOfUser(e);r&&r.forEach((function(e){return t._onOrgaUserRemoval(e)}));var i=this.orgaUsers.findIndex((function(t){return t.id===e.id}));return i>=0&&(this.orgaUsers.splice(i,1),n&&this.eventService.publishIdmEvent({type:lm.OrgaUserRemoved,orgaUser:e}),!0)}},{key:"getAllSubOrgaUsers4SubOrga",value:function(e){return this.principalService.guardPrincipalIsSubOrgaAdmin(e),wu(this.subOrgaUsers.filter((function(t){return t.subOrgaId===e})))}},{key:"changeSubOrgaUsers",value:function(e){var t=this,n=this.principalService.getOrgaUser().orgaId;return this.principalService.guardPrincipalIsOrgaAdmin(n),e.forEach((function(e){if(e.orgaId!==n)throw new Error("Method changeSubOrgaUsers called with wrong orgaId!")})),e.forEach((function(e){var n=t.subOrgaUsers.findIndex((function(t){return t.id===e.id}));n>=0?e.subOrgaId?t.subOrgaUsers[n].subAdmin=e.subAdmin:t._removeSubOrgaUser(e.id):t._createSubUser(e)})),!0}},{key:"_removeSubOrgaUser",value:function(e){var t=this.subOrgaUsers.findIndex((function(t){return t.id===e}));if(t>=0){var n=this.subOrgaUsers[t];return this.subOrgaUsers.splice(t,1),this.eventService.publishIdmEvent({type:lm.SubOrgaUserRemoved,subOrganizationId:n.subOrgaId,orgaUser:{id:n.orgaUserId,name:""}}),!0}return!1}},{key:"_createSubUser",value:function(e){return e.id=Cu(this.subOrgaUsers),this.subOrgaUsers.push(Object.assign({},e)),!0}},{key:"_removeAllSubUsersOfOrgaUser",value:function(e){this.subOrgaUsers=this.subOrgaUsers.filter((function(t){return t.orgaUserId!==e.id}))}},{key:"_findForeignOrgaByOrgaId",value:function(e,t){if(e&&t)return this.orgaUsers.find((function(n){return n.orgaId===e&&n.foreignOrgaId===t}))}},{key:"foreignOrgaIsAlreadyMemberInOrga",value:function(e,t){return void 0!==this._findForeignOrgaByOrgaId(e,t)}},{key:"findOrgaById",value:function(e){var t=this.organizations.find((function(t){return t.id===e}));return t&&Object.assign({},t)}},{key:"findAllOrgasOfAccount",value:function(e){var t=this,n=this.findAllOrgaUsersOfAccount(e),r=[];return n.forEach((function(e){var n=t.findOrgaById(e.orgaId);n&&r.push(n)})),wu(r)}},{key:"findOrgaByMail",value:function(e){var t=this.organizations.find((function(t){return t.email.toLocaleLowerCase()===e.toLocaleLowerCase()}));return t&&Object.assign({},t)}},{key:"removeOrgaUser",value:function(t){e._guardArgument(t);var n=this.orgaUsers.find((function(e){return e.id===t}));return this.principalService.guardPrincipalIsOrgaAdmin(null==n?void 0:n.orgaId),this._onOrgaUserRemoval(n)}},{key:"deleteOrganization",value:function(e){var t=this;this.principalService.guardPrincipalIsOrgaSuperAdmin(e);var n=this.organizations.findIndex((function(t){return t.id===e}));n<0||(this.orgaUsers.filter((function(t){return t.orgaId===e})).forEach((function(e){return t._onOrgaUserRemoval(e,!1)})),this.organizations.splice(n,1),this.eventService.publishIdmEvent({type:lm.OrganisationRemoved,organizationId:e}))}},{key:"joinOrganization",value:function(e,t){if(!(t.accountId&&this.findOrgaUserByAccountId(e,t.accountId)||t.foreignOrgaId&&this._findForeignOrgaByOrgaId(e,t.foreignOrgaId)||t.foreignUserId&&this.findForeignUserByOrgaId(e,t.foreignUserId))){t.orgaId=e;var n=this._addNewOrgaUser(t);return n&&Object.assign({},n)}}},{key:"createNewOrganization",value:function(e,t){var n=this._addNewOrganization(e);if(n)return t.orgaId=n.id,t.adminType=ld.SuperAdmin,this._addNewOrgaUser(t),this.eventService.publishIdmEvent({type:lm.OrganisationCreated,organizationId:e.id}),n&&Object.assign({},n)}},{key:"_addNewOrganization",value:function(e){if(!this.organizations.find((function(t){return t.email.toLocaleLowerCase()===e.email.toLocaleLowerCase()})))return e.id=Cu(this.organizations),this.organizations.push(e),e}},{key:"_getAllAllowedSubOrgas",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];r&&i.push(this._getOrgaAsSubOrga(e)),i.push.apply(i,_toConsumableArray(this.subOrganizations.filter((function(t){return t.orgaId===e}))));var a=[];return i.forEach((function(e){n._isSubAdmin(t,e.id)&&a.push(e)})),a}},{key:"getAllAllowedSubOrgas",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return wu(this._getAllAllowedSubOrgas(e,t,n))}},{key:"_createSubOrganization",value:function(e){return e.id=Cu(this.subOrganizations),this.subOrganizations.push(e),Object.assign({},e)}},{key:"createSubOrganization",value:function(e){return this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId),this._createSubOrganization(e)}},{key:"findSubOrgaById",value:function(e){return this.subOrganizations.find((function(t){return t.id===e}))}},{key:"removeSubOrganization",value:function(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this.subOrganizations.findIndex((function(t){return t.id===e.id}));return!(t<0||(this.subOrgaUsers=this.subOrgaUsers.filter((function(t){return t.subOrgaId!==e.id})),this.subOrganizations.splice(t,1),this.eventService.publishIdmEvent({type:lm.SubOrganizationRemoved,subOrganizationId:e.id}),0))}},{key:"_isSubAdmin",value:function(e,t){if(this._isAdmin(e))return!0;var n=this.subOrgaUsers.find((function(n){return n.orgaUserId===e&&n.subOrgaId===t}));return!!n&&!!n.subAdmin}},{key:"renameSubOrganization",value:function(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this.subOrganizations.find((function(t){return t.id===e.id}));return!!t&&(t.name=e.name,!0)}},{key:"_getOrgaAsSubOrga",value:function(e){var t=this.findOrgaById(e);return t?{id:"0",name:t.name+" Gesamt",orgaId:t.id}:{id:"0",name:"name Gesamt",orgaId:e}}},{key:"createIdmEntities4Mgv",value:function(e,t,n){var r=this,i=this.findOrgaById(e),a=this.findSubOrgaById(t),s=this.findOrgaById(n);if(i&&a&&s){var o=this._createSubOrganization({id:"",orgaId:s.id,name:"MGV from ".concat(i.name," - ").concat(a.name)});if(o){var u=[];return this.getAllOrgaUsers4SubOrga(e,t,!0).forEach((function(e){var i=r.joinOrganization(n,Object.assign(Object.assign({},e),{id:"",orgaId:n,adminType:ld.Member}));i&&(u.push({sourceUserId:e.id,destinationUserId:i.id}),r._createSubUser({id:"",orgaUserId:i.id,orgaId:o.orgaId,subOrgaId:o.id,subAdmin:r._isSubAdmin(e.id,t)}))})),{destSubOrga:o,userMap:u}}}}},{key:"removeSourceUsers4Mgv",value:function(e){var t=this,n=!0;return e.forEach((function(e){return n=t.removeOrgaUser(e)&&n})),n}}],[{key:"_guardArgument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null==e){if(t)throw new Error("Argument <"+t+"> is null or undefined!");throw new Error("Argument is null or undefined!")}}}]),e}()).\u0275fac=function(e){return new(e||qm)(Je(cd),Je(sd),Je(hd),Je(ty),Je(ry))},qm.\u0275prov=he({token:qm,factory:qm.\u0275fac,providedIn:"root"}),qm),ay=((Wm=function(){function e(t){_classCallCheck(this,e),this.http=t,this.orgaBackendUri=yu+"organizations/",this.myBackendUri=yu+"my/"}return _createClass(e,[{key:"createNewOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e,t.next=4,this.http.post(this.orgaBackendUri,n).toPromise();case 4:return r=t.sent,t.abrupt("return",null!=r?r:void 0);case 8:t.prev=8,t.t0=t.catch(0),_u(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"deleteOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.orgaBackendUri+e).toPromise();case 3:return t.abrupt("return",!!t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"inviteUser",value:function(e,t,n){return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i={usersName:t,invitationMail:n},r.next=4,this.http.post(this.orgaBackendUri+e+"/inviteUser",i).toPromise();case 4:return r.abrupt("return",r.sent);case 7:r.prev=7,r.t0=r.catch(0),_u(r.t0,!0);case 10:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"wishOfMembership",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.post(this.orgaBackendUri+e+"/wishOfMembership",{}).toPromise();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0,!0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"findOrgaByMail",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=(new Rc).append("mail",e),t.next=4,this.http.get(this.orgaBackendUri,{params:n}).toPromise();case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"findAllUsersByOrgaId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i={params:(new Rc).append("onlyOwnUser",Ou(t)).append("withStatus",Ou(n))},r.next=4,this.http.get(this.orgaBackendUri+e+"/users",i).toPromise();case 4:return r.abrupt("return",r.sent);case 7:r.prev=7,r.t0=r.catch(0),_u(r.t0);case 10:return r.abrupt("return",[]);case 11:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"findAllUsersOfCurrentAccount",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get(this.myBackendUri+"users").toPromise();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),_u(e.t0);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"findAllOrgasOfCurrentAccount",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get(this.myBackendUri+"organizations").toPromise();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),_u(e.t0);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"findOrgaById",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.get(this.orgaBackendUri+e).toPromise();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getAllSubOrgas",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e?{}:{params:(new Rc).append("justSubOrganizations","true")},t.next=4,this.http.get(this.orgaBackendUri+"subOrganizations",n).toPromise();case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:return t.abrupt("return",[]);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"createNewSubOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",this.http.post(this.orgaBackendUri+"subOrganizations",e).toPromise());case 4:t.prev=4,t.t0=t.catch(0),_u(t.t0);case 7:case"end":return t.stop()}}),t,this,[[0,4]])})))}},{key:"removeSubOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.orgaBackendUri+"subOrganizations/"+e).toPromise();case 3:return t.abrupt("return",!!t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"renameSubOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.patch(this.orgaBackendUri+"subOrganizations/"+e.id,e).toPromise();case 3:return t.abrupt("return",!!t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"updateUsersAndResourcesOfSubOrganization",value:function(e,t,n){return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a,s,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=[],a=[],s=[],t.forEach((function(e){e.isInSubOrgaNew&&i.push(e.id),e.subAdminNew&&a.push(e.id)})),n.forEach((function(e){e.isInSubOrgaNew&&s.push(e.id)})),o={users:i,admins:a,resources:s},r.next=6,this.http.patch(this.orgaBackendUri+"subOrganizations/"+e.id,o).toPromise();case 6:return r.abrupt("return",!!r.sent);case 9:r.prev=9,r.t0=r.catch(0),_u(r.t0);case 12:return r.abrupt("return",!1);case 13:case"end":return r.stop()}}),r,this,[[0,9]])})))}},{key:"getSubOrgaDetails",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.get(this.orgaBackendUri+"subOrganizations/"+e).toPromise();case 3:return n=t.sent,t.abrupt("return",(console.log(n),n));case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}()).\u0275fac=function(e){return new(e||Wm)(Je(tl))},Wm.\u0275prov=he({token:Wm,factory:Wm.\u0275fac,providedIn:"root"}),Wm),sy=((Gm=function(){function e(t){_classCallCheck(this,e),this.http=t,this.userBackendUri=yu+"orga-users/"}return _createClass(e,[{key:"createNewUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e,t.next=4,this.http.post(this.userBackendUri,n).toPromise();case 4:return r=t.sent,t.abrupt("return",null!=r?r:void 0);case 8:t.prev=8,t.t0=t.catch(0),_u(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"deleteUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.userBackendUri+e).toPromise();case 3:return t.abrupt("return",!!t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"modifyUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.patch(this.userBackendUri+e.id,e).toPromise();case 3:return n=t.sent,t.abrupt("return",null!=n?n:void 0);case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"findUserById",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.get(this.userBackendUri+e).toPromise();case 3:return n=t.sent,t.abrupt("return",null!=n?n:void 0);case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}()).\u0275fac=function(e){return new(e||Gm)(Je(tl))},Gm.\u0275prov=he({token:Gm,factory:Gm.\u0275fac,providedIn:"root"}),Gm),oy=((Hm=function(){function e(t,n,r,i,a,s,o){_classCallCheck(this,e),this.fakeBackend=t,this.principalService=n,this.settingsService=r,this.notificationService=i,this.accessService=a,this.beOrgaService=s,this.beUserService=o,this.useValueFromBackend=!0,this.callBackend=!1}return _createClass(e,[{key:"_getPrincipal",value:function(){var e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}},{key:"getAllOrgasAndUserForAccount",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,this.findAllOrgasOfAccount(e);case 3:return r=t.sent,t.next=6,this.findAllOrgaUsersOfAccount(e);case 6:return i=t.sent,t.abrupt("return",(r.forEach((function(e){n.push({orga:e,orgaUser:i.find((function(t){return t.orgaId===e.id}))})})),n));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"removeOrgaUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beUserService.deleteUser(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.removeOrgaUser(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"deleteOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beOrgaService.deleteOrganization(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",null!=n&&n);case 6:return t.abrupt("return",(this.fakeBackend.deleteOrganization(e),!0));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findOrgaById",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beOrgaService.findOrgaById(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.findOrgaById(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findAllOrgasOfAccount",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beOrgaService.findAllOrgasOfCurrentAccount();case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.findAllOrgasOfAccount(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findOrgaByMail",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beOrgaService.findOrgaByMail(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",null!=n?n:void 0);case 6:return t.abrupt("return",this.fakeBackend.findOrgaByMail(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findAllOrgaUsersOfAccount",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beOrgaService.findAllUsersOfCurrentAccount();case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.findAllOrgaUsersOfAccount(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findOrgaUserByOrgaUserId",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beUserService.findUserById(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",null!=n?n:void 0);case 6:return t.abrupt("return",this.fakeBackend.findOrgaUserById(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findCorrespondingForeignOrgaUser",value:function(e){return this.fakeBackend.findCorrespondingForeignOrgaUser(e)}},{key:"inviteUser",value:function(e,t){var n;return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=null===(n=this.principalService.getOrgaUser())||void 0===n?void 0:n.orgaId){r.next=3;break}throw new Error("No OrgaUser-Principal...!");case 3:if(!this.callBackend){r.next=9;break}return r.next=6,this.beOrgaService.inviteUser(i,e,t);case 6:if(a=r.sent,!this.useValueFromBackend){r.next=9;break}return r.abrupt("return",null!=a?a:void 0);case 9:return r.abrupt("return",this.fakeBackend.inviteUserToOrga(i,e,t));case 10:case"end":return r.stop()}}),r,this)})))}},{key:"accountIsAlreadyMemberInOrga",value:function(e,t){return void 0!==this.fakeBackend.findOrgaUserByAccountId(e,t)}},{key:"accountHasAnyOrgaMembership",value:function(e){return t=e.toString(),!isNaN(+t)&&this.fakeBackend.accountHasAnyOrgaMembership(e);var t}},{key:"foreignOrgaIsAlreadyMemberInOrga",value:function(e,t){return this.fakeBackend.foreignOrgaIsAlreadyMemberInOrga(e,t)}},{key:"foreignUserIsAlreadyMemberInOrga",value:function(e,t){return void 0!==this.fakeBackend.findForeignUserByOrgaId(e,t)}},{key:"wishOfMembership",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beOrgaService.wishOfMembership(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:if(r=this.principalService.getAccount(),!this.settingsService.acceptHandshakeDecisionsAutomatically()){t.next=13;break}return i={id:"",accountId:r.id,name:r.name,orgaId:e,adminType:ld.Member},t.next=11,this.joinOrganization(e,i);case 11:t.next=17;break;case 13:return t.next=15,this.findOrgaById(e);case 15:a=t.sent,this.notificationService.addNotification({id:"",type:fd.WishOfMembershipToOrga,orgaIdAsRecipient:e,account:r,organization:a});case 17:return t.abrupt("return",!0);case 18:case"end":return t.stop()}}),t,this)})))}},{key:"joinOrganization",value:function(e,t){return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.callBackend){n.next=6;break}return n.next=3,this.beUserService.createNewUser(t);case 3:if(r=n.sent,!this.useValueFromBackend){n.next=6;break}return n.abrupt("return",r);case 6:return n.abrupt("return",this.fakeBackend.joinOrganization(e,t));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"createNewOrganization",value:function(e,t){return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.callBackend){n.next=6;break}return n.next=3,this.beOrgaService.createNewOrganization(e);case 3:if(r=n.sent,!this.useValueFromBackend){n.next=6;break}return n.abrupt("return",r);case 6:return n.abrupt("return",this.fakeBackend.createNewOrganization(e,t));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getAllOrgaUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.callBackend){r.next=6;break}return r.next=3,this.beOrgaService.findAllUsersByOrgaId(e,t,n);case 3:if(i=r.sent,!this.useValueFromBackend){r.next=6;break}return r.abrupt("return",i);case 6:return r.abrupt("return",this.fakeBackend.getAllOrgaUsers(e,t,n));case 7:case"end":return r.stop()}}),r,this)})))}},{key:"getAllOrgaUsers4SubOrga",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.callBackend){r.next=11;break}if("0"!==t){r.next=3;break}return r.abrupt("return",this.beOrgaService.findAllUsersByOrgaId(e,n));case 3:return r.next=5,this.beOrgaService.getSubOrgaDetails(t);case 5:if(i=r.sent,!this.useValueFromBackend){r.next=11;break}if(i){r.next=9;break}return r.abrupt("return",[]);case 9:return a=[],r.abrupt("return",(i.allOrgaUsers.forEach((function(e){var t;(null===(t=i.users)||void 0===t?void 0:t.includes(e.id))&&(n&&(e.foreignUserId||e.foreignOrgaId)||a.push(e))})),a));case 11:return r.abrupt("return",this.fakeBackend.getAllOrgaUsers4SubOrga(e,t,n));case 12:case"end":return r.stop()}}),r,this)})))}},{key:"getAllSubOrgaUsers4SubOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=9;break}return t.next=3,this.beOrgaService.getSubOrgaDetails(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=9;break}if(n){t.next=7;break}return t.abrupt("return",[]);case 7:return r=[],t.abrupt("return",(n.allOrgaUsers.forEach((function(e){var t,i;(null===(t=n.users)||void 0===t?void 0:t.includes(e.id))&&r.push({id:e.id,orgaId:n.orgaId,orgaUserId:e.id,subOrgaId:n.id,subAdmin:!!(null===(i=n.admins)||void 0===i?void 0:i.includes(e.id))})})),r));case 9:return t.abrupt("return",this.fakeBackend.getAllSubOrgaUsers4SubOrga(e));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getAllSubOrgaResources4SubOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=9;break}return t.next=3,this.beOrgaService.getSubOrgaDetails(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=9;break}if(n){t.next=7;break}return t.abrupt("return",[]);case 7:return r=[],t.abrupt("return",(n.allOrgaResources.forEach((function(e){var t;(null===(t=n.resources)||void 0===t?void 0:t.includes(e.id))&&r.push(Object.assign(Object.assign({},e),{typeId:e.type,orgaResourceId:e.id,subOrgaId:n.id}))})),r));case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getAllAllowedSubOrgas",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.callBackend){n.next=6;break}return n.next=3,this.beOrgaService.getAllSubOrgas(t);case 3:if(r=n.sent,!this.useValueFromBackend){n.next=6;break}return n.abrupt("return",r);case 6:return n.abrupt("return",this.fakeBackend.getAllAllowedSubOrgas(e,this._getPrincipal().id,t));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"removeSubOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=4;break}if(n=this.beOrgaService.removeSubOrga(e.id),!this.useValueFromBackend){t.next=4;break}return t.abrupt("return",n);case 4:return t.abrupt("return",this.fakeBackend.removeSubOrganization(e));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"createSubOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=4;break}if(n=this.beOrgaService.createNewSubOrga(e),!this.useValueFromBackend){t.next=4;break}return t.abrupt("return",n);case 4:return t.abrupt("return",this.fakeBackend.createSubOrganization(e));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"changeSubOrgaUsers",value:function(e){return this.fakeBackend.changeSubOrgaUsers(e)}},{key:"changeSubOrgaUsersAndResources",value:function(e,t,n){return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.callBackend){r.next=4;break}if(i=this.beOrgaService.updateUsersAndResourcesOfSubOrganization(e,t,n),!this.useValueFromBackend){r.next=4;break}return r.abrupt("return",!!i);case 4:return r.abrupt("return",!1);case 5:case"end":return r.stop()}}),r,this)})))}},{key:"renameSubOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}if(n=this.beOrgaService.renameSubOrganization(e),!this.useValueFromBackend){t.next=6;break}return t.next=5,n;case 5:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",this.fakeBackend.renameSubOrganization(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"updateOrgaUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beUserService.modifyUser(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.updateOrgaUser(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"executePseudoMgv",value:function(e,t,n,r){return ku(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=this.fakeBackend.createIdmEntities4Mgv(e,t,n),i.t0=(null==a?void 0:a.destSubOrga)&&a.userMap,!i.t0){i.next=10;break}return i.next=5,this.accessService.executeAmPartOfMgv(e,t,n,a.destSubOrga.id,a.userMap,r);case 5:if(!i.sent){i.next=9;break}this.fakeBackend.removeSourceUsers4Mgv(a.userMap.map((function(e){return e.sourceUserId}))),i.next=10;break;case 9:alert("Problem...");case 10:case"end":return i.stop()}}),i,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Hm)(Je(iy),Je(hd),Je(cd),Je(ry),Je(Rm),Je(ay),Je(sy))},Hm.\u0275prov=he({token:Hm,factory:Hm.\u0275fac,providedIn:"root"}),Hm);function uy(e,t){1&e&&(Ma(0,"div"),Ma(1,"h5"),Xa(2,"\xdcbersicht \xfcber alle Produkte"),Ea(),Ma(3,"p"),Xa(4,"Zum Anzeigen der gekauften Lizenzen bitte in Organisation einloggen..."),Ea(),Ea())}function cy(e,t){1&e&&(Ma(0,"p"),Xa(1,"F\xfcr \xc4nderungen ben\xf6tigt man Adminrechte in der Organisation."),Ea())}function ly(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"h5"),Xa(2,"\xdcbersicht \xfcber alle Produkte und davon gekaufte Lizenzen f\xfcr deine Organisation"),Ea(),xa(3,cy,2,0,"p",1),Ea()),2&e){var n=ja();Rr(3),Pa("ngIf",!n.changesAllowed)}}function dy(e,t){if(1&e&&(Ma(0,"option",13),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n),Rr(1),ts(" ",n.name,"")}}function hy(e,t){if(1&e){var n=Na();Ma(0,"div",5),Ma(1,"div",6),Ma(2,"div",7),Ma(3,"div",8),Xa(4," Benutzer w\xe4hlen: "),Ea(),Ma(5,"div",9),Ma(6,"select",10,11),Va("ngModelChange",(function(e){return qt(n),ja().selectedUser2Admin=e}))("ngModelChange",(function(){return qt(n),ja().onChangedUser()})),xa(8,dy,2,2,"option",12),Ea(),Ea(),Ea(),Ea(),Ea()}if(2&e){var r=ja();Rr(6),Pa("ngModel",r.selectedUser2Admin),Rr(2),Pa("ngForOf",r.users2Admin)}}function fy(e,t){1&e&&(Ma(0,"span",15),Xa(1,"Lizenz notwendig "),Ea())}function gy(e,t){1&e&&(Ma(0,"span",15),Xa(1,"keine Lizenz notwendig "),Ea())}function vy(e,t){if(1&e&&(Ma(0,"span",19),Xa(1),Ea()),2&e){var n=ja().$implicit;Rr(1),ts("gesamt: ",n.totalLicences,"")}}function py(e,t){if(1&e&&(Ma(0,"span",19),Xa(1),Ea()),2&e){var n=ja().$implicit;Rr(1),ts("davon frei: ",n.freeLicences,"")}}function my(e,t){if(1&e&&(Ma(0,"span"),Xa(1),Ea()),2&e){var n=ja(3);Rr(1),ts("Lizenz ",n.selectedUser2Admin.name," entziehen")}}function yy(e,t){if(1&e&&(Ma(0,"span"),Xa(1),Ea()),2&e){var n=ja(3);Rr(1),ts("Lizenz ",n.selectedUser2Admin.name," zuweisen")}}function ky(e,t){if(1&e){var n=Na();Ma(0,"div",20),Ma(1,"button",21),Va("click",(function(){qt(n);var e=ja().index;return ja().removeOneLicence(e)})),Xa(2,"-"),Ea(),Ma(3,"button",22),Va("click",(function(){qt(n);var e=ja().index;return ja().addOneLicence(e)})),Xa(4,"+"),Ea(),Ma(5,"label"),Ma(6,"input",23),Va("ngModelChange",(function(e){return qt(n),ja().$implicit.licencedToUser=e}))("ngModelChange",(function(){qt(n);var e=ja().index;return ja().onUserLicenceChanged(e)})),Ea(),xa(7,my,2,1,"span",1),xa(8,yy,2,1,"span",1),Ea(),Ea()}if(2&e){var r=ja().$implicit;Rr(1),Pa("disabled",r.freeLicences<=0),Rr(5),Pa("ngModel",r.licencedToUser)("disabled",r.freeLicences<=0&&!r.licencedToUser),Rr(1),Pa("ngIf",r.licencedToUser),Rr(1),Pa("ngIf",!r.licencedToUser)}}function by(e,t){if(1&e&&(Ma(0,"li"),Ma(1,"div"),Ma(2,"span",14),Xa(3),Ea(),Ea(),Ma(4,"div"),Ma(5,"span",15),Xa(6),Ea(),xa(7,fy,2,0,"span",16),Ea(),Ma(8,"div"),xa(9,gy,2,0,"span",16),xa(10,vy,2,1,"span",17),xa(11,py,2,1,"span",17),Ea(),xa(12,ky,9,5,"div",18),Ea()),2&e){var n=t.$implicit,r=t.index,i=ja();Rr(3),ts(" ",i.getProductIdAsString(r)," "),Rr(3),ts(" ",i.getProductName(r)," "),Rr(1),Pa("ngIf",n.licenceNeeded),Rr(2),Pa("ngIf",!n.licenceNeeded),Rr(1),Pa("ngIf",n.orgaId>0),Rr(1),Pa("ngIf",n.orgaId>0),Rr(1),Pa("ngIf",i.changesAllowed&&n.licenceNeeded)}}function _y(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"button",24),Va("click",(function(){return qt(n),ja().discardChanges()})),Xa(2,"\xc4nderungen verwerfen"),Ea(),Ma(3,"button",25),Va("click",(function(){return qt(n),ja().saveChanges()})),Xa(4,"\xc4nderungen \xfcbernehmen"),Ea(),Ea()}if(2&e){var r=ja();Rr(1),Pa("disabled",!r.dirty),Rr(2),Pa("disabled",!r.dirty)}}var wy,Cy=((wy=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.changeDetector=t,this.principalService=n,this.settingsService=r,this.licenceService=i,this.orgaService=a,this.usersDisplayName="",this.loggedInInOrga=!1,this.orgaId="",this.changesAllowed=!1,this.dirty=!1,this.products=[],this.users2Admin=[]}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.settingsService.setTitle("Produkte und Lizenzen"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),e.t0=this.loggedInInOrga,!e.t0){e.next=10;break}return this.orgaId=this.principalService.getOrgaUser().orgaId,e.next=8,this.orgaService.getAllOrgaUsers(this.orgaId,!0);case 8:this.users2Admin=e.sent,this.selectedUser2Admin=this.users2Admin[0];case 10:this.changesAllowed=this.principalService.isAdminOfCurrentOrga(this.orgaId),this._initMembers();case 12:case"end":return e.stop()}}),e,this)})))}},{key:"_initMembers",value:function(){this.dirty=!1,this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,this.products=this.licenceService.getAllProductAndLicenceInfos(this.orgaId,this.selectedUsersId)}},{key:"onChangedUser",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den Benutzer wechseln und damit deine \xc4nderungen verwerfen?")){var t=this.users2Admin.find((function(t){return t.id===e.selectedUsersId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=t)}this._initMembers()}},{key:"getProductIdAsString",value:function(e){return this.products[e].id}},{key:"getProductName",value:function(e){return this.products[e].name}},{key:"addOneLicence",value:function(e){this.dirty=!0,this.products[e].totalLicences++,this.products[e].freeLicences++}},{key:"removeOneLicence",value:function(e){this.dirty=!0,this.products[e].totalLicences--,this.products[e].freeLicences--}},{key:"saveChanges",value:function(){this.dirty&&(this.licenceService.saveProductAndLicenceInfo(this.products),this._initMembers())}},{key:"discardChanges",value:function(){this._initMembers()}},{key:"onUserLicenceChanged",value:function(e){this.dirty=!0,this.products[e].licencedToUser?this.products[e].freeLicences--:this.products[e].freeLicences++}}]),e}()).\u0275fac=function(e){return new(e||wy)(Ra($i),Ra(hd),Ra(cd),Ra(dm),Ra(oy))},wy.\u0275cmp=ht({type:wy,selectors:[["app-products-main"]],decls:7,vars:5,consts:[[1,"container"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s6"],["name","user2admin",1,"browser-default",3,"ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"list-item-text-left"],[1,"list-item-text"],["class","list-item-text",4,"ngIf"],["class","list-item-text-small",4,"ngIf"],["class","buttons-right-div",4,"ngIf"],[1,"list-item-text-small"],[1,"buttons-right-div"],[3,"disabled","click"],[3,"click"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"]],template:function(e,t){1&e&&(Ma(0,"div",0),xa(1,uy,5,0,"div",1),xa(2,ly,4,1,"div",1),xa(3,hy,9,2,"div",2),Ma(4,"ul",3),xa(5,by,13,7,"li",4),Ea(),xa(6,_y,5,2,"div",1),Ea()),2&e&&(Rr(1),Pa("ngIf",!t.loggedInInOrga),Rr(1),Pa("ngIf",t.loggedInInOrga),Rr(1),Pa("ngIf",t.changesAllowed),Rr(2),Pa("ngForOf",t.products),Rr(1),Pa("ngIf",t.changesAllowed))},directives:[pc,gc,lh,Fd,Yh,dh,mh,Cd],styles:[".container[_ngcontent-%COMP%]{display:flex 2 1;margin-top:0;float:left;width:70em}.verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:70em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:70em;position:relative;background-color:#eee;margin-bottom:.5em;padding:.3em 0;height:2em;border-radius:4px}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:2em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:13em;text-align:left}.list-item-text-small[_ngcontent-%COMP%]{float:left;width:6em;text-align:left}hr[_ngcontent-%COMP%]{float:left;width:50em;height:3px;background:teal;margin-top:.4em;margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.buttons-right-div[_ngcontent-%COMP%]{margin-right:.7em;margin-top:-.3em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff;height:2em}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:3em;color:#000}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4db6ac}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),wy);function Oy(e,t){if(1&e){var n=Na();Ma(0,"li"),Ma(1,"span",6),Va("click",(function(){qt(n);var e=t.$implicit;return ja().enterEditMode(e.id)})),Xa(2),Ea(),Ma(3,"div",7),Ma(4,"button",8),Va("click",(function(){qt(n);var e=t.$implicit;return ja().removeSubOrganization(e.id)})),Xa(5,"Unterstruktur\xa0l\xf6schen"),Ea(),Ea(),Ea()}if(2&e){var r=t.$implicit;Rr(2),ts(" ",r.name," ")}}function Iy(e,t){1&e&&Fa(0,"hr",9)}function Sy(e,t){if(1&e){var n=Na();Ma(0,"div",10),Ma(1,"div",11),Ma(2,"input",12,13),Va("ngModelChange",(function(e){return qt(n),ja().editItemNewName=e}))("keydown.enter",(function(){return qt(n),ja().persistEditChanges()})),Ea(),Ma(4,"label",14),Xa(5,"Unterstrukturname \xe4ndern"),Ea(),Ea(),Ma(6,"div",15),Ma(7,"button",16),Va("click",(function(){return qt(n),ja().cancelEditMode()})),Xa(8," Abbrechen "),Ea(),Ma(9,"button",17),Va("click",(function(){return qt(n),ja().persistEditChanges()})),Xa(10," \xdcbernehmen "),Ea(),Ea(),Ea()}if(2&e){var r=Aa(3),i=ja();Rr(2),Pa("ngModel",i.editItemNewName),Rr(7),Pa("disabled",!r.valid)}}function xy(e,t){if(1&e){var n=Na();Ma(0,"form",18,19),Va("ngSubmit",(function(){return qt(n),ja().createNewSubOrganization()})),Ma(2,"div",10),Ma(3,"div",11),Ma(4,"input",20,21),Va("ngModelChange",(function(e){return qt(n),ja().newSubOrganization.name=e}))("keyup",(function(e){return qt(n),ja().somethingChanged(e)})),Ea(),Ma(6,"label",22),Xa(7,"Name der neuen Unterstruktur"),Ea(),Ea(),Ma(8,"div",15),Ma(9,"button",23),Xa(10,"Neue Unterstruktur anlegen"),Ea(),Ea(),Ea(),Ea()}if(2&e){var r=Aa(1),i=ja();Rr(4),Pa("ngModel",i.newSubOrganization.name),Rr(5),Pa("disabled",!r.valid)}}var Ay,Ry,Uy,Py,Ty=((Py=function(){function e(t,n,r){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.orgaService=r,this.usersDisplayName="",this.subOrgas=[],this.errorMessage="",this.editSubOrgaId="",this.editItemNewName="",this.errorMsgNameAlreadyInUse="Eine Unterstruktur mit diesen Namen gibt es bereits."}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Unterstruktur-Verwaltung"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,this._initMembers()}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editSubOrgaId="",this.editItemNewName="",this.errorMessage="",this.newSubOrganization={id:"",name:"",orgaId:this.principal.orgaId},e.next=6,this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1);case 6:this.subOrgas=e.sent;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_checkNameAlreadyInUse",value:function(e){return!!this.subOrgas.find((function(t){return t.name.toLocaleLowerCase()===e.toLocaleLowerCase()}))}},{key:"removeSubOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.subOrgas.find((function(t){return t.id===e})),t.t0=n&&confirm("Willst du die Unterstruktur <"+n.name+"> unwiderruflich l\xf6schen?"),!t.t0){t.next=6;break}return t.next=5,this.orgaService.removeSubOrganization(n);case 5:this._initMembers();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewSubOrganization",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._checkNameAlreadyInUse(this.newSubOrganization.name)){e.next=4;break}this.errorMessage=this.errorMsgNameAlreadyInUse,e.next=7;break;case 4:return e.next=6,this.orgaService.createSubOrganization(this.newSubOrganization);case 6:this._initMembers();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"somethingChanged",value:function(e){"Enter"!==e.code&&(this.errorMessage="")}},{key:"enterEditMode",value:function(e){var t=this.subOrgas.find((function(t){return t.id===e}));t&&(this.newSubOrganization={id:"",name:"",orgaId:this.principal.orgaId},this.editSubOrgaId=e,this.editItemNewName=t.name)}},{key:"cancelEditMode",value:function(){this._initMembers()}},{key:"persistEditChanges",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.subOrgas.find((function(e){return e.id===n.editSubOrgaId}))){e.next=3;break}return e.abrupt("return",this.cancelEditMode());case 3:if(t.name===this.editItemNewName){e.next=10;break}if(!this._checkNameAlreadyInUse(this.editItemNewName)){e.next=6;break}return e.abrupt("return",void(this.errorMessage=this.errorMsgNameAlreadyInUse));case 6:return e.next=8,this.orgaService.renameSubOrganization(Object.assign(Object.assign({},t),{name:this.editItemNewName}));case 8:if(e.sent){e.next=10;break}return e.abrupt("return",void(this.errorMessage="\xc4nderung hat nicht geklappt..."));case 10:this.cancelEditMode();case 11:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Py)(Ra(cd),Ra(hd),Ra(oy))},Py.\u0275cmp=ht({type:Py,selectors:[["app-iam-sub-orga-mgmt"]],decls:11,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","hr-1 mt-0 mb-1",4,"ngIf"],["class","row",4,"ngIf"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[1,"error",3,"hidden"],[1,"list-item-text-left",3,"click"],[1,"right"],[1,"btn-danger",3,"click"],[1,"hr-1","mt-0","mb-1"],[1,"row"],[1,"input-field","col","s8","m6","mb-0"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],["for","editName"],[1,"col","s8","m6"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newSubOrgaForm","ngForm"],["type","text","id","subOrgaName","name","subOrgaName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["subOrgaName","ngModel"],["for","subOrgaName"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Ma(0,"p"),Xa(1),Ea(),Ma(2,"ul",0),xa(3,Oy,6,1,"li",1),Ea(),xa(4,Iy,1,0,"hr",2),xa(5,Sy,11,2,"div",3),xa(6,xy,11,2,"form",4),Fa(7,"br"),Ma(8,"div",5),Ma(9,"p"),Xa(10),Ea(),Ea()),2&e&&(Rr(1),ts(" Hallo ",t.usersDisplayName,", hier verwaltest du deine Unterstrukturen:"),Rr(2),Pa("ngForOf",t.subOrgas),Rr(1),Pa("ngIf",t.subOrgas.length>0),Rr(1),Pa("ngIf",t.editSubOrgaId),Rr(1),Pa("ngIf",!t.editSubOrgaId),Rr(2),Pa("hidden",!t.errorMessage),Rr(2),es(t.errorMessage))},directives:[gc,pc,Sd,tf,rf,of,Fd,Yh,Xh,Nd,Gh],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;cursor:pointer}"]}),Py),My=((Uy=function(){function e(t){_classCallCheck(this,e),this.settingsService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Hilfe / Anleitung");var e=document.querySelectorAll(".collapsible");M.Collapsible.init(e,{})}}]),e}()).\u0275fac=function(e){return new(e||Uy)(Ra(cd))},Uy.\u0275cmp=ht({type:Uy,selectors:[["app-help"]],decls:141,vars:0,consts:[[1,"collapsible","popout"],[1,"collapsible-header"],[1,"material-icons"],[1,"collapsible-body"],[1,"browser-default"],["href","https://drive.google.com/file/d/1KuLdvRku0cAIhHtSCc7eHb9x66mxTGoW/view?usp=sharing","target","_blank"],["href","https://drive.google.com/file/d/1ijSAEeJenHyFINcc92VGVjEnDYAvcRcy/view?usp=sharing","target","_blank"]],template:function(e,t){1&e&&(Ma(0,"h5"),Xa(1,"Hier gibt's Hilfe bzw. Anleitungen, nat\xfcrlich nur in aller K\xfcrze..."),Ea(),Fa(2,"br"),Ma(3,"ul",0),Ma(4,"li"),Ma(5,"div",1),Ma(6,"i",2),Xa(7,"dehaze"),Ea(),Xa(8,"Wozu das Ganze? Was kann ich machen? "),Ea(),Ma(9,"div",3),Ma(10,"ul",4),Ma(11,"li"),Xa(12,"Kurz gesagt, man kann sich registrieren, einloggen, Organisationen beitreten/anlegen/verwalten."),Ea(),Ma(13,"li"),Xa(14,"Ferner kann man Ordner (dynamische Resourcen) anlegen und verrechten."),Ea(),Ma(15,"li"),Xa(16,"Und als Highlight kann man Kollaboration auf so einem Ordner einrichten."),Ea(),Ma(17,"li"),Ma(18,"a",5),Xa(19,"Infovideo \xfcber Identit\xe4ten und Organisationen"),Ea(),Ea(),Ma(20,"li"),Ma(21,"a",6),Xa(22,"Infovideo \xfcber Rechtemanagement und Kollaboration"),Ea(),Ea(),Ea(),Ea(),Ea(),Ma(23,"li"),Ma(24,"div",1),Ma(25,"i",2),Xa(26,"dehaze"),Ea(),Xa(27,"Was sehe ich wo?"),Ea(),Ma(28,"div",3),Ma(29,"ul",4),Ma(30,"li"),Xa(31,'Auf der Startseite sieht man ein "Men\xfc" der M\xf6glicheiten.'),Ea(),Ma(32,"li"),Xa(33,"Unten rechts gibt es Einstellungen, womit man das Verhalten des Prototyps beeinflussen kann."),Ea(),Ma(34,"li"),Xa(35,"Ist man angemeldet, wird in der Titelzeile die Organisation (so vorhanden) und der Username angezeigt."),Ea(),Ma(36,"li"),Xa(37,'Au\xdferdem gibt es ein "Kontext-Men\xfc" mit mehr-oder-weniger sinnigen Aktionen.'),Ea(),Ea(),Ea(),Ea(),Ma(38,"li"),Ma(39,"div",1),Ma(40,"i",2),Xa(41,"dehaze"),Ea(),Xa(42,"Das Datenmodell"),Ea(),Ma(43,"div",3),Ma(44,"ul",4),Ma(45,"li"),Xa(46,"Ein Account hat 1-n Credentials (Zugangsmedien)"),Ea(),Ma(47,"li"),Xa(48,"Ein Account kann in 0-n Organisationen eine Organisations-Identit\xe4t haben."),Ea(),Ma(49,"li"),Xa(50,"Ist man in mehreren Organisationen Mitglied, muss man beim Login eine Organisation ausw\xe4hlen."),Ea(),Ma(51,"li"),Xa(52,"Eine Organisation beherbergt User, Resourcen und deren Rechte."),Ea(),Ma(53,"li"),Xa(54,'Ein Recht besteht aus (Subjekt = User, Objekt = Resource, Erlaubnis = "lesen")'),Ea(),Ma(55,"li"),Xa(56,'Pro Berechtigung entsteht ein Eintrag in der "Rechte-Liste"'),Ea(),Ea(),Ea(),Ea(),Ma(57,"li"),Ma(58,"div",1),Ma(59,"i",2),Xa(60,"dehaze"),Ea(),Xa(61,"Sicherheit? Passw\xf6rter?"),Ea(),Ma(62,"div",3),Ma(63,"ul",4),Ma(64,"li"),Xa(65,"Die Seite hat echte Logik, speichert aber nichts dauerhaft."),Ea(),Ma(66,"li"),Xa(67,"Alles spielt sich im Browser ab."),Ea(),Ma(68,"li"),Xa(69,"Durch Neu-Laden der Seite (F5) ist man wieder am Anfang!"),Ea(),Ma(70,"li"),Xa(71,'Eingegebene Passw\xf6rter werden im Klartext "gespeichert".'),Ea(),Ma(72,"li"),Xa(73,'Die Testpassw\xf6rter lauten s\xe4mtlich "test".'),Ea(),Ea(),Ea(),Ea(),Ma(74,"li"),Ma(75,"div",1),Ma(76,"i",2),Xa(77,"dehaze"),Ea(),Xa(78,"Tipps und Tricks"),Ea(),Ma(79,"div",3),Ma(80,"ul",4),Ma(81,"li"),Xa(82,'Man muss beim Login kein Passwort eingeben (geht schneller), gibt man aber eines ein, muss es mit dem "registrierten" \xfcbereinstimmen.'),Ea(),Ma(83,"li"),Xa(84,"Es sind einige vor-eingetragende Testdaten vorhanden. Bei den Test-Kennungen (Username) gibt die Endung Aufschluss \xfcber den Authentifizierungs-Grad. z.B. tom@bk entspricht einem BenutzerKonto, tom@sc einer SmartCard. "),Ea(),Ma(85,"li"),Xa(86,' Kommt einfach "so" die Login-Seite erneut, ist die Ziel-Seite gesch\xfctzt. Entweder generell, dass man eingeloggt sein muss, oder es muss ein "besonderer" Login sein. (Admin, Secure). Meist hilft das Anmelden mit *@sc. '),Ea(),Ea(),Ea(),Ea(),Ma(87,"li"),Ma(88,"div",1),Ma(89,"i",2),Xa(90,"dehaze"),Ea(),Xa(91,"Testdaten"),Ea(),Ma(92,"div",3),Ma(93,"ul",4),Ma(94,"li"),Xa(95,"Kanzlei Heinzelmann mit Simone und Klaus (Admin) (@sc etc.)"),Ea(),Ma(96,"li"),Xa(97,"Kanzlei Palmengarten mit Sonja und Martin (Admin)"),Ea(),Ma(98,"li"),Xa(99,'Familie Martin privat mit Martin (Admin). D.h. bei Login mit "Martin" kommt eine Organisationsauswahl'),Ea(),Ma(100,"li"),Xa(101,"Holzhandel Grubinger mit Petra und Tom (Admin)"),Ea(),Ma(102,"li"),Xa(103,"Resi ohne Organisation, d.h. nur Account"),Ea(),Ma(104,"li"),Xa(105,"Kanzlei Heinzelmann und Holzhandel Grubinger kollaborieren bereits auf einem Ordner"),Ea(),Ea(),Ea(),Ea(),Ma(106,"li"),Ma(107,"div",1),Ma(108,"i",2),Xa(109,"dehaze"),Ea(),Xa(110,"Kollaboration, was ist damit gemeint?"),Ea(),Ma(111,"div",3),Ma(112,"ul",4),Ma(113,"li"),Xa(114,"Kollaboration meint hier, dass Mitarbeiter verschiedener Organisationen auf ein-und-derselben Resource (Ordner) arbeiten."),Ea(),Ma(115,"li"),Xa(116,"Das Ganze geht via Delegation, d.h. ein Admin einer Organisation berechtigt eine zweite Organisation. Ein Admin dieser zweiten Organisation vergibt dann letztendlich die Rechte an seine Mitarbeiter, aber nur die, welche er delegiert bekommen hat."),Ea(),Ma(117,"li"),Xa(118,"Am besten ausprobieren: "),Ma(119,"ul",4),Ma(120,"li"),Xa(121,"Zwei Organisationen mit jeweils zwei Mitarbieter anlegen"),Ea(),Ma(122,"li"),Xa(123,"In der einen einen Ordner anlegen"),Ea(),Ma(124,"li"),Xa(125,'Dann der zweiten Organisation "freigeben"'),Ea(),Ma(126,"li"),Xa(127,'Und dort an einen der beiden Mitarbieter "freigeben"'),Ea(),Ea(),Ea(),Ma(128,"li"),Xa(129,"und folgende Szenarien nachvollziehen, was mit den Zugriffs-Rechten passiert: "),Ma(130,"ul",4),Ma(131,"li"),Xa(132,"Die Rechte werden vom Original-Admin eingeschr\xe4nkt"),Ea(),Ma(133,"li"),Xa(134,'Der "geteilte" Ordner wird gel\xf6scht'),Ea(),Ma(135,"li"),Xa(136,"Der Kollaborations-Users wird aus einladender Organisation entfernt"),Ea(),Ma(137,"li"),Xa(138,"die ganze einladende Organisation wird gel\xf6scht"),Ea(),Ma(139,"li"),Xa(140,"..."),Ea(),Ea(),Ea(),Ea(),Ea(),Ea(),Ea())},styles:["br[_ngcontent-%COMP%]{margin-bottom:.4em}"]}),Uy),Ey=((Ry=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.authService=n,this.backendURI=yu+"credentials/"}return _createClass(e,[{key:"getAllCredentials4User",value:function(){var e;return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=null===(e=this.authService.getPrincipal().account)||void 0===e?void 0:e.id)){t.next=6;break}return t.next=5,this.http.get(this.backendURI+"accounts/"+n).toPromise();case 5:return t.abrupt("return",t.sent);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),_u(t.t0);case 11:return t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"removeCredential",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.backendURI+e).toPromise();case 3:return t.abrupt("return",!!t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"addNewCredential",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={type:e.type,kennung:e.kennung,secret:e.secret},t.next=4,this.http.post(this.backendURI,n).toPromise();case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}()).\u0275fac=function(e){return new(e||Ry)(Je(tl),Je(ml))},Ry.\u0275prov=he({token:Ry,factory:Ry.\u0275fac,providedIn:"root"}),Ry),Fy=((Ay=function(){function e(t,n){_classCallCheck(this,e),this.fakeBackend=t,this.credentialService=n,this.useValueFromBackend=!0,this.callBackend=!1}return _createClass(e,[{key:"getAllCredentialsForUser",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.credentialService.getAllCredentials4User();case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.getAllCredentials(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"removeCredential",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=5;break}return t.next=3,this.credentialService.removeCredential(e);case 3:t.next=6;break;case 5:this.fakeBackend.removeCredential(e);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"addNewCredential",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.credentialService.addNewCredential(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.addNewCredential(e));case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Ay)(Je(iy),Je(Ey))},Ay.\u0275prov=he({token:Ay,factory:Ay.\u0275fac,providedIn:"root"}),Ay);function Ny(e,t){if(1&e&&(Ma(0,"li"),Ma(1,"span",4),Xa(2),Ea(),Ma(3,"span",5),Xa(4),Ea(),Ea()),2&e){var n=t.index,r=ja();Rr(2),ts(" ",r.getCredentialTypeAsString(n)," "),Rr(2),ts(" ",r.getCredentialDescription(n)," ")}}function Dy(e,t){1&e&&(Ma(0,"div"),Ma(1,"p"),Xa(2,"Du bist noch gar nicht identifiziert."),Ea(),Ea())}function zy(e,t){if(1&e){var n=Na();Ma(0,"button",7),Va("click",(function(){qt(n);var e=ja().index;return ja(2).showIdentificationView(e)})),Xa(1,"anzeigen"),Ea()}}function Vy(e,t){if(1&e){var n=Na();Ma(0,"button",7),Va("click",(function(){return qt(n),ja(3).hideIdentificationView()})),Xa(1,"ausblenden"),Ea()}}function By(e,t){if(1&e&&(Ma(0,"li"),Ma(1,"span",4),Xa(2),Ea(),Ma(3,"span",5),Xa(4),Ea(),xa(5,zy,2,0,"button",6),xa(6,Vy,2,0,"button",6),Ea()),2&e){var n=t.index,r=ja(2);Rr(2),ts(" ",r.getIdentificationProviderAsString(n)," "),Rr(2),ts(" ",r.getIdentificationDescription(n)," "),Rr(1),Pa("ngIf",r.idxDetailIdentification!==n),Rr(1),Pa("ngIf",r.idxDetailIdentification===n)}}function Ly(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"p"),Xa(2,"Du bist folgenderma\xdfen identifiziert worden:"),Ea(),Ma(3,"ul",0),xa(4,By,7,4,"li",1),Ea(),Ea()),2&e){var n=ja();Rr(4),Pa("ngForOf",n.idents)}}function jy(e,t){1&e&&Fa(0,"img",14)}function Hy(e,t){if(1&e&&Fa(0,"img",15),2&e){var n=ja(2);Ha("src",null==n.identificationDetailView.account?null:n.identificationDetailView.account.photo,lr)}}function Gy(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"div",8),Ma(2,"div",9),Ma(3,"span",10),Xa(4),Ea(),xa(5,jy,1,0,"img",11),xa(6,Hy,1,1,"img",12),Ma(7,"p"),Xa(8,"Name: "),Ma(9,"span",13),Xa(10),Ea(),Ea(),Ma(11,"p"),Xa(12,"Geburtsdatum: "),Ma(13,"span",13),Xa(14),Ea(),Ea(),Ma(15,"p"),Xa(16,"Adresse: "),Ma(17,"span",13),Xa(18),Ea(),Ea(),Ea(),Ea(),Ea()),2&e){var n=ja();Rr(4),es(n.getDetailCardTitle()),Rr(1),Pa("ngIf",!(null!=n.identificationDetailView.account&&n.identificationDetailView.account.photo)),Rr(1),Pa("ngIf",null==n.identificationDetailView.account?null:n.identificationDetailView.account.photo),Rr(4),ns("",null==n.identificationDetailView.account?null:n.identificationDetailView.account.firstname," ",null==n.identificationDetailView.account?null:n.identificationDetailView.account.lastname,""),Rr(4),es(n.getDateString(null==n.identificationDetailView.account?null:n.identificationDetailView.account.dateOfBirth)),Rr(4),rs("",null==n.identificationDetailView.account||null==n.identificationDetailView.account.address?null:n.identificationDetailView.account.address.street,", ",null==n.identificationDetailView.account||null==n.identificationDetailView.account.address?null:n.identificationDetailView.account.address.zipCode," ",null==n.identificationDetailView.account||null==n.identificationDetailView.account.address?null:n.identificationDetailView.account.address.city,"")}}function Wy(e,t){if(1&e&&(Ma(0,"li"),Ma(1,"span",4),Xa(2),Ea(),Ma(3,"span",5),Xa(4),Ea(),Ea()),2&e){var n=t.$implicit;Rr(2),ts(" ",n.orga.name," "),Rr(2),ts(" ",n.orgaUser.name," ")}}function qy(e,t){if(1&e&&(Ma(0,"div"),Fa(1,"hr",16),Ma(2,"p"),Xa(3,"In folgenden Organisationen bist du Mitglied, hast also eine Organisations-Identit\xe4t:"),Ea(),Ma(4,"ul",0),xa(5,Wy,5,2,"li",1),Ea(),Ea()),2&e){var n=ja();Rr(5),Pa("ngForOf",n.orgaAndUserList)}}var Ky,Zy,$y=((Zy=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.settingsService=t,this.credentialService=n,this.orgaService=r,this.principalService=i,this.identService=a,this.usersDisplayName="",this.loggedInAs="",this.authLevel="",this.credentials=[],this.idents=[],this.showDetailView=!1,this.idxDetailIdentification=-1,this.orgaAndUserList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("User-Infos"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this._initMembers()}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.credentialService.getAllCredentialsForUser(this.principal.id);case 2:return this.credentials=e.sent,e.next=5,this.identService.getAllIdentificationsForUser(this.principal.id);case 5:this.idents=e.sent,this._setLoggedInInfo(),this._setOrgasMemberships();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"_setLoggedInInfo",value:function(){var e=this.principalService.getOrgaUser();if(e&&e.id)this.loggedInAs="Organisations-Identit\xe4t <"+e.name+"> in der Organisation: <"+this.principalService.getOrgaName()+">";else{var t=this.principalService.getAccount();this.loggedInAs="Account-Identit\xe4t <"+t.name+">"}this.authLevel=this.principalService.getAuthLevelAsString()}},{key:"_setOrgasMemberships",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.orgaService.getAllOrgasAndUserForAccount(this.principal.id);case 2:this.orgaAndUserList=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getCredentialTypeAsString",value:function(e){return Bm[this.credentials[e].type]}},{key:"getCredentialDescription",value:function(e){var t=this.credentials[e],n="Kennung: <"+t.kennung+">";return!Lm(t.type)&&t.orgaId&&(n+=" ("+t.orgaId+")"),t.type===Bm.SocialLogin&&(n=t.provider+"-ID: "+t.userIdFromProvider),n+=", Auth-Level: <"+dd[jm(t)]+">"}},{key:"getIdentificationProviderAsString",value:function(e){return ad[this.idents[e].provider]}},{key:"getIdentificationDescription",value:function(e){var t,n,r,i=this.idents[e];return"Vom: ".concat(i.doneAt.toLocaleDateString()," - \n                ").concat(null===(t=i.account)||void 0===t?void 0:t.firstname," \n                ").concat(null===(n=i.account)||void 0===n?void 0:n.lastname," \n                ").concat(null===(r=i.account)||void 0===r?void 0:r.dateOfBirth.toLocaleDateString())}},{key:"hideIdentificationView",value:function(){this.showDetailView=!1,this.idxDetailIdentification=-1,this.identificationDetailView=void 0}},{key:"showIdentificationView",value:function(e){this.idxDetailIdentification=e,this.identificationDetailView=this.idents[e],this.identificationDetailView?this.showDetailView=!0:this.idxDetailIdentification=-1}},{key:"getDetailCardTitle",value:function(){var e=this.identificationDetailView;return e?"Identifiziert am ".concat(e.doneAt.toLocaleDateString()," \n                    durch Anbieter ").concat(ad[e.provider]):""}},{key:"getDateString",value:function(e){var t;return null!==(t=null==e?void 0:e.toLocaleDateString())&&void 0!==t?t:""}}]),e}()).\u0275fac=function(e){return new(e||Zy)(Ra(cd),Ra(Fy),Ra(oy),Ra(hd),Ra(vd))},Zy.\u0275cmp=ht({type:Zy,selectors:[["app-iam-user-info"]],decls:15,vars:8,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[4,"ngIf"],[1,"list-item-text-left"],[1,"list-item-text"],["class","btn-primary",3,"click",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"card","grey","lighten-4"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],["class","left-float","width","100px","height","100px","alt","Kein Bild vorhanden",4,"ngIf"],["class","left-float","width","100px","height","100px","alt","Passbild",3,"src",4,"ngIf"],[1,"bold"],["width","100px","height","100px","alt","Kein Bild vorhanden",1,"left-float"],["width","100px","height","100px","alt","Passbild",1,"left-float",3,"src"],[1,"hr-2"]],template:function(e,t){1&e&&(Ma(0,"h6"),Xa(1),Ea(),Ma(2,"p"),Xa(3),Ea(),Ma(4,"p"),Xa(5),Ea(),Ma(6,"p"),Xa(7,"Du hast folgende Zugangsmedien:"),Ea(),Ma(8,"ul",0),xa(9,Ny,5,2,"li",1),Fa(10,"hr",2),Ea(),xa(11,Dy,3,0,"div",3),xa(12,Ly,5,1,"div",3),xa(13,Gy,19,9,"div",3),xa(14,qy,6,1,"div",3)),2&e&&(Rr(1),ts(" Hallo ",t.usersDisplayName,""),Rr(2),ts("Du bist angemeldet als ",t.loggedInAs,"."),Rr(2),ts("Dein aktuelles Authentifizierungsniveau ist: <",t.authLevel,">."),Rr(4),Pa("ngForOf",t.credentials),Rr(2),Pa("ngIf",0===t.idents.length),Rr(1),Pa("ngIf",t.idents.length>0),Rr(1),Pa("ngIf",t.showDetailView),Rr(1),Pa("ngIf",t.orgaAndUserList.length>0))},directives:[gc,pc],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:15rem}.card[_ngcontent-%COMP%]{width:40rem;height:12rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding-top:1rem!important}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3rem!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.left-float[_ngcontent-%COMP%]{float:left;margin-right:2rem}"]}),Zy),Jy=((Ky=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.principalService=t,this.accessService=n,this.eventService=r,this.allFolders=[],this.dummyResourceId="-1",this._fillTestdata(),this.eventService.resourceEvent.subscribe((function(e){return i._onResoureceEvent(e)}))}return _createClass(e,[{key:"assureExists",value:function(){return!0}},{key:"_onResoureceEvent",value:function(e){if(e.type===xm.ResourceMoved){var t=this._findFolderByResourceId(e.resourceOld.id);t&&(t.orgaId=e.resourceNew.orgaId,t.resourceId=e.resourceNew.id)}}},{key:"_fillTestdata",value:function(){this.allFolders.push({id:"1",resourceId:"1",orgaId:"300",name:"Notizen"},{id:"2",resourceId:"2",orgaId:"300",name:"Steuersachen"},{id:"3",resourceId:"3",orgaId:"300",name:"Golfausfl\xfcge"},{id:"4",resourceId:"4",orgaId:"300",name:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{id:"10",resourceId:"10",orgaId:"301",name:"Rechtliches"},{id:"11",resourceId:"11",orgaId:"301",name:"Kassenarchiv"},{id:"20",resourceId:"20",orgaId:"302",name:"Finanzen"},{id:"21",resourceId:"21",orgaId:"302",name:"Rechnungen"})}},{key:"_getPrincipal",value:function(){var e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}},{key:"_assureCurrentPrincipalHasAdminPermission",value:function(){if(!this.principalService.isAdminOfCurrentOrga())throw new Error("Principal is not admin of current orga!")}},{key:"_findFolderById",value:function(e){return this.allFolders.find((function(t){return t.id===e}))}},{key:"_findFolderByResourceId",value:function(e){return this.allFolders.find((function(t){return t.resourceId===e}))}},{key:"renameFolder",value:function(t){var n=e._toResource(t);if(!this.accessService.hasPermission(n,_m.FolderWritePermissionKey))return!1;var r=this._findFolderById(t.id);if(!r)throw new Error("RenameFolder: Ordner existiert gar nicht.");return r.name===t.name||!this._isFolderNameAlreadyUsedInOrga(t)&&(r.name=t.name,this.accessService.renameResource(n),!0)}},{key:"_sort",value:function(e){var t=this._getPrincipal().orgaId;return e.sort((function(e,n){if(e.orgaId===t&&n.orgaId===t)return+e.id-+n.id;if(e.orgaId===t)return-1;if(n.orgaId===t)return 1;var r=+e.orgaId-+n.orgaId;return 0===r?+e.id-+n.id:r}))}},{key:"getAllFoldersOfOrgaWithRightsOfGivenUser4Administration",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._assureCurrentPrincipalHasAdminPermission(),n=this._getPrincipal().orgaId,t.next=4,this.accessService.getAllResourceIdsOwnedByOrDelegatedToOrgaByType(um.Folder,n);case 4:return r=t.sent,i=[],t.abrupt("return",(r.forEach((function(t){var n=a._findFolderByResourceId(t);if(n){var r=Object.assign({},n);a._setMaxEnabledPermissions(n,e,r),a._setAdministratedPermissions(n,e,r),i.push(r)}})),wu(this._sort(i))));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"_setAdministratedPermissions",value:function(t,n,r){var i=e._toResource(t);r.readAllowed=this.accessService.hasAdministratedPermission(i,n,_m.FolderReadPermissionKey),r.writeAllowed=this.accessService.hasAdministratedPermission(i,n,_m.FolderWritePermissionKey),r.deleteAllowed=this.accessService.hasAdministratedPermission(i,n,_m.FolderDeletePermissionKey)}},{key:"_setMaxEnabledPermissions",value:function(t,n,r){var i=e._toResource(t);r.readDisabled=!this.accessService.permissionIsEnabled4Administration(i,n,_m.FolderReadPermissionKey),r.writeDisabled=!this.accessService.permissionIsEnabled4Administration(i,n,_m.FolderWritePermissionKey),r.deleteDisabled=!this.accessService.permissionIsEnabled4Administration(i,n,_m.FolderDeletePermissionKey)}},{key:"getAllAccessibleFolders4CurrentUser",value:function(){var e=this,t=this.accessService.getAllResources4PrincipalWithAtLeastOnePermissionByType(um.Folder),n=[];return t.forEach((function(t){var r=e._findFolderByResourceId(t.id);if(r){var i=Object.assign({},r);i.readAllowed=e.accessService.hasPermission(t,_m.FolderReadPermissionKey),i.writeAllowed=e.accessService.hasPermission(t,_m.FolderWritePermissionKey),i.deleteAllowed=e.accessService.hasPermission(t,_m.FolderDeletePermissionKey),n.push(i)}})),wu(this._sort(n))}},{key:"setFolderRightsOfGivenUser",value:function(t,n){var r=this;this._assureCurrentPrincipalHasAdminPermission(),n.forEach((function(n){if(n.dirty){var i=[];n.readAllowed&&i.push(_m.FolderReadPermissionKey),n.writeAllowed&&i.push(_m.FolderWritePermissionKey),n.deleteAllowed&&i.push(_m.FolderDeletePermissionKey),r.accessService.setPermissionsOfUser2resource(t,e._toResource(n),i)}}))}},{key:"removeFolder",value:function(t){var n=this._findFolderById(t);if(!n)return!1;var r=e._toResource(n);if(!this.accessService.hasPermission(r,_m.FolderDeletePermissionKey))return!1;this.accessService.removeResource(r,_m.FolderDeletePermissionKey);var i=this.allFolders.findIndex((function(e){return e.id===t}));return i>=0&&(this.allFolders.splice(i,1),!0)}},{key:"_isFolderNameAlreadyUsedInOrga",value:function(e){return!!this.allFolders.find((function(t){return t.orgaId===e.orgaId&&t.name===e.name}))}},{key:"userMayCreateNewFolder",value:function(e){return this.accessService.hasPermission4staticResource({type:um.FolderRoot,id:this.dummyResourceId,orgaId:e},_m.FolderCreatePermissionKey)}},{key:"setUserMayCreateNewFolder",value:function(e,t){this._assureCurrentPrincipalHasAdminPermission();var n={type:um.FolderRoot,id:this.dummyResourceId,orgaId:e.orgaId};t?this.accessService.setPermissionsOfUser2staticResource(e,n,[_m.FolderCreatePermissionKey]).then():this.accessService.setPermissionsOfUser2staticResource(e,n,[]).then()}},{key:"addNewFolder",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isFolderNameAlreadyUsedInOrga(e)){t.next=2;break}return t.abrupt("return",!1);case 2:if(n=this._getPrincipal(),this.userMayCreateNewFolder(n.orgaId)){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,this.accessService.createNewResource({id:"",type:um.Folder,orgaId:n.orgaId,displayName:e.name});case 7:return r=t.sent,t.abrupt("return",!!r&&(e.resourceId=r.id,e.id=Cu(this.allFolders),this.allFolders.push(e),!0));case 9:case"end":return t.stop()}}),t,this)})))}}],[{key:"_toResource",value:function(e){return{id:e.resourceId,type:um.Folder,orgaId:e.orgaId,displayName:e.name}}}]),e}()).\u0275fac=function(e){return new(e||Ky)(Je(hd),Je(Rm),Je(sd))},Ky.\u0275prov=he({token:Ky,factory:Ky.\u0275fac,providedIn:"root"}),Ky);function Qy(e,t){if(1&e&&(Ma(0,"option",14),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n),Rr(1),ts(" ",n.name,"")}}var Yy=function(e){return{"foreign-folder":e}};function Xy(e,t){if(1&e){var n=Na();Ma(0,"li",15),Ma(1,"span",16),Ma(2,"i",17),Xa(3,"folder"),Ea(),Xa(4),Ea(),Ma(5,"span",18),Xa(6),Ea(),Ma(7,"label",3),Ma(8,"input",9),Va("ngModelChange",(function(e){return qt(n),t.$implicit.readAllowed=e}))("ngModelChange",(function(){qt(n);var e=t.index;return ja().onChanged(e)})),Ea(),Ma(9,"span"),Xa(10,"lesen"),Ea(),Ea(),Ma(11,"label",3),Ma(12,"input",9),Va("ngModelChange",(function(e){return qt(n),t.$implicit.writeAllowed=e}))("ngModelChange",(function(){qt(n);var e=t.index;return ja().onChanged(e)})),Ea(),Ma(13,"span"),Xa(14,"schreiben"),Ea(),Ea(),Ma(15,"label"),Ma(16,"input",9),Va("ngModelChange",(function(e){return qt(n),t.$implicit.deleteAllowed=e}))("ngModelChange",(function(){qt(n);var e=t.index;return ja().onChanged(e)})),Ea(),Ma(17,"span"),Xa(18,"l\xf6schen"),Ea(),Ea(),Ea()}if(2&e){var r=t.$implicit,i=ja();Pa("ngClass",po(9,Yy,i.isForeignFolder(r))),Rr(4),ts(" ",r.id," "),Rr(2),ts(" ",r.name," "),Rr(2),Pa("ngModel",r.readAllowed)("disabled",r.readDisabled),Rr(4),Pa("ngModel",r.writeAllowed)("disabled",r.writeDisabled),Rr(4),Pa("ngModel",r.deleteAllowed)("disabled",r.deleteDisabled)}}var ek,tk=function(e){return{"foreign-user":e}},nk=((ek=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.changeDetector=t,this.settingsService=n,this.folderService=r,this.principalService=i,this.orgaService=a,this.usersDisplayName="",this.users2Admin=[],this.folders=[],this.createNewFolderAllowed=!1,this.createNewFolderOldValue=!1,this.dirty=!1}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("dezentrale Ordner-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),e.next=5,this.orgaService.getAllOrgaUsers(this.principal.orgaId);case 5:this.users2Admin=e.sent,this.selectedUser2Admin=this.users2Admin[0],this._initMembers();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,e.next=3,this.folderService.getAllFoldersOfOrgaWithRightsOfGivenUser4Administration(this.selectedUser2Admin);case 3:this.folders=e.sent,this.createNewFolderAllowed=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this.createNewFolderOldValue=this.createNewFolderAllowed,this.dirty=!1;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"isForeignUser",value:function(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}},{key:"isForeignFolder",value:function(e){return!!e&&e.orgaId!==this.principal.orgaId}},{key:"resetFolderRights",value:function(){this._initMembers()}},{key:"_afterSavingPermissions",value:function(){this.dirty=!1,this.createNewFolderOldValue=this.createNewFolderAllowed,this.folders.forEach((function(e){return e.dirty=!1}))}},{key:"saveFolderRights",value:function(){this.createNewFolderAllowed!==this.createNewFolderOldValue&&this.folderService.setUserMayCreateNewFolder(this.selectedUser2Admin,this.createNewFolderAllowed);var e=this.folders.filter((function(e){return e.dirty}));this.folderService.setFolderRightsOfGivenUser(this.selectedUser2Admin,e),this._afterSavingPermissions()}},{key:"onChangedUser",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){var t=this.users2Admin.find((function(t){return t.id===e.selectedUsersId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=t)}this._initMembers()}},{key:"onChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this.dirty=!0,e>=0){var t=this.folders[e];t&&(t.dirty=!0)}}}]),e}()).\u0275fac=function(e){return new(e||ek)(Ra($i),Ra(cd),Ra(Jy),Ra(hd),Ra(oy))},ek.\u0275cmp=ht({type:ek,selectors:[["app-admin-folders"]],decls:21,vars:11,consts:[[1,"container-form"],[1,"row"],[1,"col","s12"],[1,"mr-1"],[1,"input-field","inline"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text"]],template:function(e,t){1&e&&(Ma(0,"h6"),Xa(1),Ea(),Ma(2,"div",0),Ma(3,"div",1),Ma(4,"div",2),Ma(5,"span",3),Xa(6,"Benutzer\xa0w\xe4hlen:"),Ea(),Ma(7,"div",4),Ma(8,"select",5,6),Va("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),xa(10,Qy,2,2,"option",7),Ea(),Ea(),Ea(),Ea(),Ma(11,"label",8),Ma(12,"input",9),Va("ngModelChange",(function(e){return t.createNewFolderAllowed=e}))("ngModelChange",(function(){return t.onChanged()})),Ea(),Ma(13,"span"),Xa(14,"Darf neue Ordner anlegen"),Ea(),Ea(),Ma(15,"ul",10),xa(16,Xy,19,11,"li",11),Ea(),Ma(17,"button",12),Va("click",(function(){return t.resetFolderRights()})),Xa(18,"Zur\xfccksetzen"),Ea(),Ma(19,"button",13),Va("click",(function(){return t.saveFolderRights()})),Xa(20,"\xdcbernehmen"),Ea(),Ea()),2&e&&(Rr(1),ts(" Hallo ",t.usersDisplayName,", hier kannst du f\xfcr bestimmte Ordner Rechte vergeben."),Rr(7),Pa("ngClass",po(9,tk,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),Rr(2),Pa("ngForOf",t.users2Admin),Rr(2),Pa("ngModel",t.createNewFolderAllowed)("disabled",t.isForeignUser(t.selectedUser2Admin)),Rr(4),Pa("ngForOf",t.folders),Rr(1),Pa("disabled",!t.dirty),Rr(2),Pa("disabled",!t.dirty))},directives:[lh,hc,Fd,Yh,gc,Cd,dh,mh],styles:[".foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}.liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.liste[_ngcontent-%COMP%]{max-width:70rem}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{width:25em}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0!important}.input-field.inline[_ngcontent-%COMP%]{margin-left:0!important}"]}),ek);function rk(e,t){if(1&e){var n=Na();Ma(0,"button",10),Va("click",(function(){qt(n);var e=ja().$implicit;return ja().removeFolder(e.id)})),Xa(1," L\xf6schen"),Ea()}}var ik=function(e){return{"foreign-folder":e}};function ak(e,t){if(1&e){var n=Na();Ma(0,"li",5),Ma(1,"span",6),Ma(2,"i",7),Xa(3,"folder"),Ea(),Xa(4),Ea(),Ma(5,"span",8),Va("click",(function(){qt(n);var e=t.index;return ja().enterEditMode(e)})),Xa(6),Ea(),xa(7,rk,2,0,"button",9),Ea()}if(2&e){var r=t.$implicit,i=ja();Pa("ngClass",po(5,ik,i.isForeignFolder(r))),Rr(4),ts(" ",r.id," "),Rr(2),ns(" ",r.name," ",i.getPermissionsHint(r)," "),Rr(1),Pa("ngIf",r.deleteAllowed)}}function sk(e,t){if(1&e){var n=Na();Ma(0,"div",11),Ma(1,"div",12),Ma(2,"div",13),Ma(3,"input",14,15),Va("ngModelChange",(function(e){return qt(n),ja().editFolderNewName=e}))("keydown.enter",(function(){return qt(n),ja().persistEditFolderChanges()})),Ea(),Ma(5,"label",16),Xa(6,"Ordnername \xe4ndern"),Ea(),Ea(),Ma(7,"button",17),Va("click",(function(){return qt(n),ja().cancelEditMode()})),Xa(8," Abbrechen "),Ea(),Ma(9,"button",18),Va("click",(function(){return qt(n),ja().persistEditFolderChanges()})),Xa(10," \xdcbernehmen "),Ea(),Ea(),Ea()}if(2&e){var r=Aa(4),i=ja();Rr(3),Pa("ngModel",i.editFolderNewName),Rr(6),Pa("disabled",!r.valid)}}function ok(e,t){if(1&e){var n=Na();Ma(0,"div",11),Ma(1,"form",19,20),Va("ngSubmit",(function(){return qt(n),ja().addNewFolder()})),Ma(3,"div",12),Ma(4,"div",21),Ma(5,"input",22,23),Va("ngModelChange",(function(e){return qt(n),ja().newFolder.name=e}))("keyup",(function(e){return qt(n),ja().somethingChanged(e)})),Ea(),Ma(7,"label",24),Xa(8,"Ordnername"),Ea(),Ea(),Ma(9,"div",25),Ma(10,"button",26),Xa(11,"Ordner\xa0anlegen"),Ea(),Ea(),Ea(),Ea(),Ea()}if(2&e){var r=Aa(2),i=ja();Rr(5),Pa("ngModel",i.newFolder.name),Rr(5),Pa("disabled",!r.valid)}}var uk,ck=((uk=function(){function e(t,n,r){_classCallCheck(this,e),this.settingsService=t,this.folderService=n,this.principalService=r,this.usersDisplayName="",this.folders=[],this.userMayCreateNewFolder=!1,this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Ordneransicht"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.userMayCreateNewFolder=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this._initMembers()}},{key:"_initMembers",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName="",this.newFolder={id:"",resourceId:"",orgaId:this.principal.orgaId,name:""},e&&(this.folders=this.folderService.getAllAccessibleFolders4CurrentUser())}},{key:"isForeignFolder",value:function(e){return e.orgaId!==this.principal.orgaId}},{key:"getPermissionsHint",value:function(e){var t=" (";return e.readAllowed&&(t+="r"),e.writeAllowed&&(t+="w"),e.deleteAllowed&&(t+="d"),t+=")",this.isForeignFolder(e)&&(t+=" (von: "+e.orgaId+")"),t}},{key:"enterEditMode",value:function(e){e<0||e>=this.folders.length||(this._initMembers(!1),this.editFolderIdx=e,this.editFolderNewName=this.folders[e].name)}},{key:"cancelEditMode",value:function(){this._initMembers(!1)}},{key:"persistEditFolderChanges",value:function(){var e=this.folders[this.editFolderIdx],t=e.name;e.name!==this.editFolderNewName?(this.folders[this.editFolderIdx].name=this.editFolderNewName,this.folderService.renameFolder(this.folders[this.editFolderIdx])?this.cancelEditMode():(this.errorMessage="Der Ordnername wird schon verwendet.",e.name=t)):this.cancelEditMode()}},{key:"removeFolder",value:function(e){this.folderService.removeFolder(e)?this._initMembers():this.errorMessage="Du darfst diesen Ordner nicht l\xf6schen, fehlende Berechtigung!"}},{key:"addNewFolder",value:function(){this.userMayCreateNewFolder&&(this.folderService.addNewFolder(this.newFolder)?this._initMembers():this.errorMessage="Der Ordnername wird schon verwendet.")}},{key:"somethingChanged",value:function(e){"Enter"!==e.code&&(this.errorMessage="")}}]),e}()).\u0275fac=function(e){return new(e||uk)(Ra(cd),Ra(Jy),Ra(hd))},uk.\u0275cmp=ht({type:uk,selectors:[["app-listfolders"]],decls:10,vars:6,consts:[[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-1"],["class","container-form",4,"ngIf"],[1,"error-text",3,"hidden"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text",3,"click"],["class","btnInListe btnDelete","style","position: absolute; right: 0.7em;",3,"click",4,"ngIf"],[1,"btnInListe","btnDelete",2,"position","absolute","right","0.7em",3,"click"],[1,"container-form"],[1,"row"],[1,"input-field","col","s8","m6","mb-0","mr-1"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],["for","editName"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newFolderForm","ngForm"],[1,"input-field","col","s8","m6","mb-0"],["type","text","id","folderName","name","folderName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["folderName","ngModel"],["for","folderName"],[1,"col","s6","m4"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Ma(0,"h6"),Xa(1),Ea(),Ma(2,"ul",0),xa(3,ak,8,7,"li",1),Fa(4,"hr",2),Ea(),xa(5,sk,11,2,"div",3),xa(6,ok,12,2,"div",3),Ma(7,"div",4),Ma(8,"p"),Xa(9),Ea(),Ea()),2&e&&(Rr(1),ts(" Hallo ",t.usersDisplayName,", auf folgende Ordner hast du mind. eine Berechtigung (egal welche):"),Rr(2),Pa("ngForOf",t.folders),Rr(2),Pa("ngIf",t.editFolderIdx>=0),Rr(1),Pa("ngIf",t.userMayCreateNewFolder&&t.editFolderIdx<0),Rr(1),Pa("hidden",!t.errorMessage),Rr(2),ts("Hinweis/Fehler: ",t.errorMessage,""))},directives:[gc,pc,hc,Sd,tf,rf,of,Fd,Yh,Xh,Nd,Gh],styles:[".liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{cursor:pointer}.error-text[_ngcontent-%COMP%]{font-weight:700;color:#dc143c}"]}),uk);function lk(e,t){if(1&e&&(Ma(0,"h4"),Xa(1),Ea()),2&e){var n=ja();Rr(1),ts("",n.principal.name,", du hast keine Nachrichten.")}}var dk=function(e){return{editMode:e}};function hk(e,t){if(1&e){var n=Na();Ma(0,"li",4),Va("click",(function(){qt(n);var e=t.index;return ja(2).showNotification(e)})),Ma(1,"span",5),Xa(2),Ea(),Ma(3,"span",6),Xa(4),Ea(),Ea()}if(2&e){var r=t.$implicit,i=t.index,a=ja(2);Pa("ngClass",po(3,dk,r.id===(null==a.notificationTodo?null:a.notificationTodo.id))),Rr(2),ts(" ",a.getTypeAsString(i)," "),Rr(2),ts(" ",a.getDetailsOfNotification(i)," ")}}function fk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2,"Du hast deine Mail-Adresse erfolgreich verifiziert und damit deinen Account aktiviert. "),Fa(3,"br"),Xa(4," Dies ist nur eine Information, du musst weiter nichts unternehmen. "),Ea(),Ma(5,"button",8),Va("click",(function(){return qt(n),ja(3).removeNotification()})),Xa(6,"Verstanden"),Ea(),Ea()}}function gk(e,t){1&e&&(Ma(0,"p"),Xa(1," Mithilfe der Identifikationsdaten der Organisation kannst du deren Identit\xe4t \xfcberpr\xfcfen. "),Ea())}function vk(e,t){1&e&&(Ma(0,"p"),Xa(1," Die Organisation hat (noch) keine Identifizierungsdaten. "),Ea())}function pk(e,t){if(1&e){var n=Na();Ma(0,"button",12),Va("click",(function(){return qt(n),ja(4).showIdentification(!0)})),Xa(1,"Identifizierungsinfo einblenden"),Ea()}2&e&&Pa("disabled",!ja(4).hasIdents)}function mk(e,t){if(1&e){var n=Na();Ma(0,"button",12),Va("click",(function(){return qt(n),ja(4).showIdentification(!1)})),Xa(1,"Identifizierungsinfo ausblenden"),Ea()}2&e&&Pa("disabled",!ja(4).hasIdents)}function yk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Fa(3,"br"),Xa(4,' Durch "Annehmen" akzeptierst du die Einladung und die Weiterbearbeitung geht an die Organisation \xfcber. '),Ea(),xa(5,gk,2,0,"p",0),xa(6,vk,2,0,"p",0),Ma(7,"button",9),Va("click",(function(){return qt(n),ja(3).declineInvitation()})),Xa(8,"Ablehnen"),Ea(),Ma(9,"button",10),Va("click",(function(){return qt(n),ja(3).acceptInvitation()})),Xa(10,"Annehmen"),Ea(),xa(11,pk,2,1,"button",11),xa(12,mk,2,1,"button",11),Ea()}if(2&e){var r=ja(3);Rr(2),ts('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',null==r.notificationTodo||null==r.notificationTodo.organization?null:r.notificationTodo.organization.name,'" vorgesehen. '),Rr(3),Pa("ngIf",r.hasIdents),Rr(1),Pa("ngIf",!r.hasIdents),Rr(5),Pa("ngIf",!r.showIdent),Rr(1),Pa("ngIf",r.showIdent)}}function kk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Fa(3,"br"),Xa(4," F\xfcr den entsprechenden Benutzer kann im Organisation-Management erneut eine Einladung verschickt werden. "),Ea(),Ma(5,"button",10),Va("click",(function(){return qt(n),ja(3).removeNotification()})),Xa(6,"Verstanden"),Ea(),Ea()}if(2&e){var r=ja(3);Rr(2),ts("Der Benutzer ",null==r.notificationTodo||null==r.notificationTodo.orgaUser?null:r.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation abgelehnt. ")}}function bk(e,t){1&e&&(Ma(0,"p"),Xa(1," Mithilfe der Identifikationsdaten des Anwenders kannst du seine Identit\xe4t \xfcberpr\xfcfen. "),Ea())}function _k(e,t){1&e&&(Ma(0,"p"),Xa(1," Der Benutzer hat (noch) keine Identifizierungsdaten. "),Ea())}function wk(e,t){if(1&e){var n=Na();Ma(0,"button",12),Va("click",(function(){return qt(n),ja(4).showIdentification(!0)})),Xa(1,"Identifizierungsinfo einblenden"),Ea()}2&e&&Pa("disabled",!ja(4).hasIdents)}function Ck(e,t){if(1&e){var n=Na();Ma(0,"button",12),Va("click",(function(){return qt(n),ja(4).showIdentification(!1)})),Xa(1,"Identifizierungsinfo ausblenden"),Ea()}2&e&&Pa("disabled",!ja(4).hasIdents)}function Ok(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Ea(),xa(3,bk,2,0,"p",0),xa(4,_k,2,0,"p",0),Ma(5,"button",9),Va("click",(function(){return qt(n),ja(3).declineInvitation()})),Xa(6,"Ablehnen"),Ea(),Ma(7,"button",10),Va("click",(function(){return qt(n),ja(3).acceptInvitation()})),Xa(8,"Annehmen"),Ea(),xa(9,wk,2,1,"button",11),xa(10,Ck,2,1,"button",11),Ea()}if(2&e){var r=ja(3);Rr(2),ts("Der Benutzer ",null==r.notificationTodo||null==r.notificationTodo.orgaUser?null:r.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation angenommen. "),Rr(1),Pa("ngIf",r.hasIdents),Rr(1),Pa("ngIf",!r.hasIdents),Rr(5),Pa("ngIf",!r.showIdent),Rr(1),Pa("ngIf",r.showIdent)}}function Ik(e,t){1&e&&(Ma(0,"p"),Xa(1," Mithilfe der Identifikationsdaten des Anwenders kannst du seine Identit\xe4t \xfcberpr\xfcfen. "),Ea())}function Sk(e,t){1&e&&(Ma(0,"p"),Xa(1," Der Benutzer hat (noch) keine Identifizierungsdaten. "),Ea())}function xk(e,t){if(1&e){var n=Na();Ma(0,"button",12),Va("click",(function(){return qt(n),ja(4).showIdentification(!0)})),Xa(1,"Identifizierungsinfo einblenden"),Ea()}2&e&&Pa("disabled",!ja(4).hasIdents)}function Ak(e,t){if(1&e){var n=Na();Ma(0,"button",12),Va("click",(function(){return qt(n),ja(4).showIdentification(!1)})),Xa(1,"Identifizierungsinfo ausblenden"),Ea()}2&e&&Pa("disabled",!ja(4).hasIdents)}function Rk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Ea(),xa(3,Ik,2,0,"p",0),xa(4,Sk,2,0,"p",0),Ma(5,"button",9),Va("click",(function(){return qt(n),ja(3).declineInvitation()})),Xa(6,"Ablehnen"),Ea(),Ma(7,"button",10),Va("click",(function(){return qt(n),ja(3).acceptInvitation()})),Xa(8,"Annehmen"),Ea(),xa(9,xk,2,1,"button",11),xa(10,Ak,2,1,"button",11),Ea()}if(2&e){var r=ja(3);Rr(2),ts("Der Benutzer ",null==r.notificationTodo||null==r.notificationTodo.account?null:r.notificationTodo.account.name," m\xf6chte in deiner Organisation mitarbeiten."),Rr(1),Pa("ngIf",r.hasIdents),Rr(1),Pa("ngIf",!r.hasIdents),Rr(5),Pa("ngIf",!r.showIdent),Rr(1),Pa("ngIf",r.showIdent)}}function Uk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Ea(),Ma(3,"button",10),Va("click",(function(){return qt(n),ja(3).removeNotification()})),Xa(4,"Verstanden"),Ea(),Ea()}if(2&e){var r=ja(3);Rr(2),ts("Die Organisation ",null==r.notificationTodo||null==r.notificationTodo.organization?null:r.notificationTodo.organization.name," hat deine Aufnahme in die Organisation abgelehnt. ")}}function Pk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Fa(3,"br"),Xa(4," Diese Organisation wird dir ggf. beim Anmelden als Anmelde-Option angeboten. "),Ea(),Ma(5,"button",10),Va("click",(function(){return qt(n),ja(3).removeNotification()})),Xa(6,"Verstanden"),Ea(),Ea()}if(2&e){var r=ja(3);Rr(2),ts("Die Organisation ",null==r.notificationTodo||null==r.notificationTodo.organization?null:r.notificationTodo.organization.name," hat deiner Aufnahme in die Organisation zugestimmt. Somit bist die Mitglied (Mitarbeiter) dieser Organisation. ")}}function Tk(e,t){if(1&e&&(Ma(0,"div",7),xa(1,fk,7,0,"div",0),xa(2,yk,13,5,"div",0),xa(3,kk,7,1,"div",0),xa(4,Ok,11,5,"div",0),xa(5,Rk,11,5,"div",0),xa(6,Uk,5,1,"div",0),xa(7,Pk,7,1,"div",0),Ea()),2&e){var n=ja(2);Rr(1),Pa("ngIf",n.isAccountVerification(null==n.notificationTodo?null:n.notificationTodo.type)),Rr(1),Pa("ngIf",n.isInvitationOrgaUserByOrga(null==n.notificationTodo?null:n.notificationTodo.type)),Rr(1),Pa("ngIf",n.isDeclinedOrgaUserInvitationByUser(null==n.notificationTodo?null:n.notificationTodo.type)),Rr(1),Pa("ngIf",n.isAcceptedOrgaUserInvitationByUser(null==n.notificationTodo?null:n.notificationTodo.type)),Rr(1),Pa("ngIf",n.isWishOfMembershipByUser(null==n.notificationTodo?null:n.notificationTodo.type)),Rr(1),Pa("ngIf",n.isDeclinedOrgaUserInvitationByOrga(null==n.notificationTodo?null:n.notificationTodo.type)),Rr(1),Pa("ngIf",n.isAcceptedOrgaUserInvitationByOrga(null==n.notificationTodo?null:n.notificationTodo.type))}}function Mk(e,t){if(1&e&&(Ma(0,"option",19),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n.ident),Rr(1),ts(" ",n.text,"")}}function Ek(e,t){1&e&&Fa(0,"img",26)}function Fk(e,t){if(1&e&&Fa(0,"img",27),2&e){var n=ja(4);Ha("src",null==n.identSelected||null==n.identSelected.account?null:n.identSelected.account.photo,lr)}}function Nk(e,t){if(1&e&&(Ma(0,"div",20),Ma(1,"div",21),Ma(2,"span",22),Xa(3),Ea(),xa(4,Ek,1,0,"img",23),xa(5,Fk,1,1,"img",24),Ma(6,"p"),Xa(7,"Name: "),Ma(8,"span",25),Xa(9),Ea(),Ea(),Ma(10,"p"),Xa(11,"Geburtsdatum: "),Ma(12,"span",25),Xa(13),Ea(),Ea(),Ma(14,"p"),Xa(15,"Adresse: "),Ma(16,"span",25),Xa(17),Ea(),Ea(),Ea(),Ea()),2&e){var n=ja(3);Rr(3),es(n.getCardTitle(n.identSelected)),Rr(1),Pa("ngIf",!(null!=n.identSelected&&null!=n.identSelected.account&&n.identSelected.account.photo)),Rr(1),Pa("ngIf",null==n.identSelected||null==n.identSelected.account?null:n.identSelected.account.photo),Rr(4),ns("",null==n.identSelected||null==n.identSelected.account?null:n.identSelected.account.firstname," ",null==n.identSelected||null==n.identSelected.account?null:n.identSelected.account.lastname,""),Rr(4),es(n.getDateString(null==n.identSelected||null==n.identSelected.account?null:n.identSelected.account.dateOfBirth)),Rr(4),rs("",null==n.identSelected||null==n.identSelected.account||null==n.identSelected.account.address?null:n.identSelected.account.address.street,", ",null==n.identSelected||null==n.identSelected.account||null==n.identSelected.account.address?null:n.identSelected.account.address.zipCode," ",null==n.identSelected||null==n.identSelected.account||null==n.identSelected.account.address?null:n.identSelected.account.address.city,"")}}function Dk(e,t){1&e&&Fa(0,"img",29)}function zk(e,t){if(1&e&&Fa(0,"img",27),2&e){var n=ja(4);Ha("src",null==n.identSelected||null==n.identSelected.organization?null:n.identSelected.organization.logo,lr)}}function Vk(e,t){if(1&e&&(Ma(0,"div",20),Ma(1,"div",21),Ma(2,"span",22),Xa(3),Ea(),xa(4,Dk,1,0,"img",28),xa(5,zk,1,1,"img",24),Ma(6,"p"),Xa(7,"Name: "),Ma(8,"span",25),Xa(9),Ea(),Ea(),Ma(10,"p"),Xa(11,"Adresse: "),Ma(12,"span",25),Xa(13),Ea(),Ea(),Ea(),Ea()),2&e){var n=ja(3);Rr(3),es(n.getCardTitle(n.identSelected)),Rr(1),Pa("ngIf",!(null!=n.identSelected&&null!=n.identSelected.organization&&n.identSelected.organization.logo)),Rr(1),Pa("ngIf",null==n.identSelected||null==n.identSelected.organization?null:n.identSelected.organization.logo),Rr(4),es(null==n.identSelected||null==n.identSelected.organization?null:n.identSelected.organization.name),Rr(4),rs("",null==n.identSelected||null==n.identSelected.organization||null==n.identSelected.organization.address?null:n.identSelected.organization.address.street,", ",null==n.identSelected||null==n.identSelected.organization||null==n.identSelected.organization.address?null:n.identSelected.organization.address.zipCode," ",null==n.identSelected||null==n.identSelected.organization||null==n.identSelected.organization.address?null:n.identSelected.organization.address.city,"")}}function Bk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"div",13),Ma(2,"div",14),Ma(3,"select",15,16),Va("ngModelChange",(function(e){return qt(n),ja(2).identSelected=e})),xa(5,Mk,2,2,"option",17),Ea(),Ea(),Ea(),xa(6,Nk,18,9,"div",18),xa(7,Vk,14,7,"div",18),Ea()}if(2&e){var r=ja(2);Rr(3),Pa("ngModel",r.identSelected),Rr(2),Pa("ngForOf",r.identSelect),Rr(1),Pa("ngIf",null==r.identSelected?null:r.identSelected.account),Rr(1),Pa("ngIf",null==r.identSelected?null:r.identSelected.organization)}}function Lk(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"h6"),Xa(2),Ea(),Ma(3,"ul",1),xa(4,hk,5,5,"li",2),Ea(),xa(5,Tk,8,7,"div",3),xa(6,Bk,8,4,"div",0),Ea()),2&e){var n=ja();Rr(2),ts("",n.principal.name,", du hast folgende Nachrichten:"),Rr(2),Pa("ngForOf",n.allNotifications),Rr(1),Pa("ngIf",null==n.notificationTodo?null:n.notificationTodo.id),Rr(1),Pa("ngIf",n.showIdent)}}var jk,Hk=((jk=function(){function e(t,n,r,i){_classCallCheck(this,e),this.notificationService=t,this.principalService=n,this.settingsService=r,this.identService=i,this.allNotifications=[],this.notificationDescription="",this.showIdent=!1,this.hasIdents=!1,this.identSelect=[],this.settingsService.setTitle("Nachrichten")}return _createClass(e,[{key:"ngOnInit",value:function(){this.principal=this.principalService.getAccount(),this.initMembers()}},{key:"initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.notificationDescription="",this._resetIdentifications(),e.next=4,this.notificationService.getAllNotificationsForCurrentPrincipal();case 4:if(this.allNotifications=e.sent,e.t0=this.allNotifications.length>0,!e.t0){e.next=11;break}return this.idxNotificationTodo||(this.idxNotificationTodo=0),this.allNotifications[this.idxNotificationTodo]||(this.idxNotificationTodo=this.idxNotificationTodo-1),e.next=11,this.showNotification(this.idxNotificationTodo,!0);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"_resetIdentifications",value:function(){this.showIdent=!1,this.hasIdents=!1,this.identSelected=void 0,this.identSelect=[]}},{key:"_initIdentifications",value:function(){var e,t,n;return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._resetIdentifications(),i=[],r.t0=(null===(e=this.notificationTodo)||void 0===e?void 0:e.type)!==fd.RequestForInvitationAsOrgaUserToOrga&&(null===(t=this.notificationTodo)||void 0===t?void 0:t.type)!==fd.WishOfMembershipToOrga&&(null===(n=this.notificationTodo)||void 0===n?void 0:n.type)!==fd.RequestForInvitationAsOrgaUserToUser,r.t0){r.next=8;break}return r.next=6,this.identService.getAllIdentificationsBasedOnNotification(this.notificationTodo);case 6:i=r.sent,this.hasIdents=i.length>0;case 8:this.hasIdents&&(this.identSelected=i[0],this.identSelect=i.map((function(e){return{text:a.getIdentSelectText(e),ident:e}})));case 9:case"end":return r.stop()}}),r,this)})))}},{key:"getIdentSelectText",value:function(e){return"".concat(ad[e.provider]," am ").concat(e.doneAt.toLocaleDateString())}},{key:"getCardTitle",value:function(e){return e?"Identifiziert am ".concat(e.doneAt.toLocaleDateString()," durch Anbieter ").concat(ad[e.provider]):""}},{key:"_getTypeAsString",value:function(e){switch(e){case fd.InfoForSuccessfulAccountVerification:return"Account-Verifizierung abgeschlossen";case fd.RequestForInvitationAsOrgaUserToUser:return"Einladung von einer Organisation";case fd.RequestForInvitationAsOrgaUserToOrga:return"Benutzer hat Einladung angenommen";case fd.InfoForDenialOfInvitationAsOrgaUserToOrga:return"Benutzer hat Einladung abgelehnt";case fd.WishOfMembershipToOrga:return"Benutzer erbittet Mitgliedschaft in deiner Organisation";case fd.InfoForApprovalInvitationOfOrgaUserToUser:return"Admin hat Einladung angenommen";case fd.InfoForDenialOfInvitationOfOrgaUserToUser:return"Admin hat Einladung abgelehnt"}return""}},{key:"getTypeAsString",value:function(e){return e+1+": "+this._getTypeAsString(this.allNotifications[e].type)}},{key:"getDateString",value:function(e){return e?e.toLocaleDateString():""}},{key:"isAccountVerification",value:function(e){return e===fd.InfoForSuccessfulAccountVerification}},{key:"isInvitationOrgaUserByOrga",value:function(e){return e===fd.RequestForInvitationAsOrgaUserToUser}},{key:"isDeclinedOrgaUserInvitationByUser",value:function(e){return e===fd.InfoForDenialOfInvitationAsOrgaUserToOrga}},{key:"isAcceptedOrgaUserInvitationByUser",value:function(e){return e===fd.RequestForInvitationAsOrgaUserToOrga}},{key:"isWishOfMembershipByUser",value:function(e){return e===fd.WishOfMembershipToOrga}},{key:"isDeclinedOrgaUserInvitationByOrga",value:function(e){return e===fd.InfoForDenialOfInvitationOfOrgaUserToUser}},{key:"isAcceptedOrgaUserInvitationByOrga",value:function(e){return e===fd.InfoForApprovalInvitationOfOrgaUserToUser}},{key:"getDetailsOfNotification",value:function(e){var t=this.allNotifications[e];switch(t.type){case fd.InfoForSuccessfulAccountVerification:case fd.WishOfMembershipToOrga:return t.account.name;case fd.RequestForInvitationAsOrgaUserToUser:return"Von Organisation "+t.organization.name;case fd.InfoForDenialOfInvitationAsOrgaUserToOrga:case fd.RequestForInvitationAsOrgaUserToOrga:return t.orgaUser.name;case fd.InfoForDenialOfInvitationOfOrgaUserToUser:case fd.InfoForApprovalInvitationOfOrgaUserToUser:return"Von Organisation "+t.organization.name}}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t||e!==this.idxNotificationTodo,!n.t0){n.next=6;break}return this.idxNotificationTodo=e,this.notificationTodo=this.allNotifications[e],n.next=6,this._initIdentifications();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"showIdentification",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.showIdent=e;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"acceptInvitation",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.notificationService.acceptInvitation(this.notificationTodo.id);case 2:return e.next=4,this.initMembers();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"declineInvitation",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.notificationService.declineInvitation(this.notificationTodo.id);case 2:return e.next=4,this.initMembers();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"removeNotification",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.notificationService.removeNotification(this.notificationTodo.id);case 2:return e.next=4,this.initMembers();case 4:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||jk)(Ra(ry),Ra(hd),Ra(cd),Ra(vd))},jk.\u0275cmp=ht({type:jk,selectors:[["app-notification-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"liste"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"mt-2"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-delete",3,"click"],[1,"btn",3,"click"],["class","btn btn-blue ml-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-blue","ml-2",3,"disabled","click"],[1,"row","mt-1","mb-1"],[1,"input-field","col","s4"],["name","identTyp",1,"browser-default",3,"ngModel","ngModelChange"],["identTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["class","card grey lighten-4",4,"ngIf"],[3,"ngValue"],[1,"card","grey","lighten-4"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],["class","left-float","width","100px","height","100px","alt","Kein Bild vorhanden",4,"ngIf"],["class","left-float","width","100px","height","100px","alt","Passbild",3,"src",4,"ngIf"],[1,"bold"],["width","100px","height","100px","alt","Kein Bild vorhanden",1,"left-float"],["width","100px","height","100px","alt","Passbild",1,"left-float",3,"src"],["class","left-float","width","100px","height","100px","alt","Kein Logo vorhanden",4,"ngIf"],["width","100px","height","100px","alt","Kein Logo vorhanden",1,"left-float"]],template:function(e,t){1&e&&(xa(0,lk,2,1,"h4",0),xa(1,Lk,7,4,"div",0)),2&e&&(Pa("ngIf",0===t.allNotifications.length),Rr(1),Pa("ngIf",t.allNotifications.length>0))},directives:[pc,gc,hc,lh,Fd,Yh,dh,mh],styles:[".editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}.list-item-text-left[_ngcontent-%COMP%]{width:30rem}.liste[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}select[_ngcontent-%COMP%]{border:3px solid teal}.card[_ngcontent-%COMP%]{width:40rem;height:12rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding-top:1rem!important}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3rem!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.left-float[_ngcontent-%COMP%]{float:left;margin-right:2rem}"]}),jk);function Gk(e,t){if(1&e){var n=Na();Ma(0,"li",2),Ma(1,"div",3),Ma(2,"label",4),Va("click",(function(){qt(n);var e=t.index;return ja().toggleValue(e)})),Xa(3),Ea(),Ma(4,"label",5),Xa(5," Nee "),Ma(6,"input",6),Va("change",(function(){qt(n);var e=t.index;return ja().toggleValue(e)})),Ea(),Fa(7,"span",7),Xa(8," Jaa "),Ea(),Ea(),Ea()}if(2&e){var r=t.$implicit;Rr(3),ts("",r.key,":"),Rr(3),Pa("checked",r.value)}}var Wk,qk,Kk=((Wk=function(){function e(t,n){_classCallCheck(this,e),this.settingsService=t,this.eventService=n,this.checked=!1,this.boolSettings=[]}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Programmeinstellungen"),e.next=3,this.settingsService.getAllBooleanSettings();case 3:for(n in t=e.sent)this.boolSettings.push({key:n,value:t[n]});case 5:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.settingsService.sendChangesToBackend()}},{key:"toggleValue",value:function(e){var t=this.boolSettings[e];t.value=!t.value,this.settingsService.booleanValueSet(t.key,t.value),"useGreenLikeColors"!==t.key&&"useAccountName4DisplayingUsername"!==t.key||this.eventService.publishRefreshMainViewEvent()}}]),e}()).\u0275fac=function(e){return new(e||Wk)(Ra(cd),Ra(sd))},Wk.\u0275cmp=ht({type:Wk,selectors:[["app-settings"]],decls:2,vars:1,consts:[[1,"row"],["class","col s12 m12 l12",4,"ngFor","ngForOf"],[1,"col","s12","m12","l12"],[1,"switch"],[1,"switch-description",3,"click"],[1,"switch-text"],["type","checkbox",3,"checked","change"],[1,"lever"]],template:function(e,t){1&e&&(Ma(0,"ul",0),xa(1,Gk,9,2,"li",1),Ea()),2&e&&(Rr(1),Pa("ngForOf",t.boolSettings))},directives:[gc],styles:[".switch-description[_ngcontent-%COMP%]{width:30em;font-weight:700}.switch-description[_ngcontent-%COMP%], .switch-text[_ngcontent-%COMP%]{margin-bottom:1em;float:left;text-align:left}.switch-text[_ngcontent-%COMP%]{margin-left:2rem;width:10em}li[_ngcontent-%COMP%]{white-space:nowrap;display:inline-block}"]}),Wk),Zk=function(e){return e[e.LoggedIn=1]="LoggedIn",e[e.LoggedOut=2]="LoggedOut",e[e.AccountDetails=3]="AccountDetails",e[e.OrgaUserDetails=4]="OrgaUserDetails",e[e.OrganizationDetails=5]="OrganizationDetails",e}({}),$k=((qk=function(){function e(t,n,r,i,a){var s=this;_classCallCheck(this,e),this.fakeBackend=t,this.eventService=n,this.principalService=r,this.authService=i,this.settingsService=a,this.isActive=!0,this.useValueFromBackend=!0,this.callBackend=!1,this.eventService.tokenChanged.pipe(wm((function(){return s.isActive}))).subscribe((function(e){return s._onTokenChanged(e)})),this.initMembers()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"initMembers",value:function(){this.token={authType:Iu.None},this.token.account={name:"",email:""},this.token.orgaUser={name:""},this.token.organization={name:"",email:""}}},{key:"_onTokenChanged",value:function(e){var t,n,r,i,a=!1;switch(e.type){case Zk.LoggedIn:a=!0;break;case Zk.AccountDetails:(null===(t=this.token.account)||void 0===t?void 0:t.id)===(null===(n=e.account)||void 0===n?void 0:n.id)&&(a=!0,this.token.account=this.fakeBackend.findAccountById(this.token.account.id),this.principalService.setPrincipal(this.token));break;case Zk.OrgaUserDetails:case Zk.OrganizationDetails:e.type===Zk.OrgaUserDetails&&(null===(r=this.token.orgaUser)||void 0===r?void 0:r.id)===(null===(i=e.orgaUser)||void 0===i?void 0:i.id)&&(a=!0,this.token.orgaUser=this.fakeBackend.findOrgaUserById(e.orgaUser.id),this.principalService.setPrincipal(this.token))}if(a&&this.principalService.isLoggedInInOrga()){var s=this.principalService.getOrgaUser(),o=this.fakeBackend.getAllAllowedSubOrgas(null==s?void 0:s.orgaId,null==s?void 0:s.id).map((function(e){return e.id}));this.principalService.setSubOrgaIdsWithAdminsPermissions(o)}}},{key:"register",value:function(e,t,n){return ku(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.callBackend){r.next=6;break}return r.next=3,this.authService.register(e,t,n);case 3:if(i=r.sent,!this.useValueFromBackend){r.next=6;break}return r.abrupt("return",(this._finishRegistration(i),!0));case 6:return a=this.fakeBackend.register(e,t,n),r.abrupt("return",(this._finishRegistration(a),!!a));case 8:case"end":return r.stop()}}),r,this)})))}},{key:"_finishRegistration",value:function(e){this.logout(),e&&e.authType!==Iu.None&&(this.callBackend&&this.useValueFromBackend?e.accessToken&&this.setToken(e):!this.settingsService.afterRegistrationLoginIsRequired()&&this.setToken(e))}},{key:"login",value:function(e,t){return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.callBackend){n.next=6;break}return n.next=3,this.authService.login(e.kennung,e.secret,t);case 3:if(r=n.sent,!this.useValueFromBackend||!r){n.next=6;break}return n.abrupt("return",(this.tempToken=Object.assign({},r),r));case 6:return i=this.fakeBackend.login(e,t),n.abrupt("return",(this.tempToken=Object.assign({},i),i));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"logoutFromOrganization",value:function(e){var t,n=Object.assign({},this.token);n.authType=Iu.Account,n.organization=void 0,n.orgaUser=void 0,null===(t=n.availableOrgas)||void 0===t||t.splice(n.availableOrgas.findIndex((function(t){return t.id===e})),1),this.setToken(n)}},{key:"getTempToken",value:function(){return this.tempToken}},{key:"loginWithOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.authService.loginInOrganization(e);case 3:if(n=t.sent,!this.useValueFromBackend||!n){t.next=6;break}return t.abrupt("return",void this.setToken(n));case 6:this.tempToken.authType=Iu.OrgaUser,r={authType:Iu.OrgaUser},Object.assign(r,this.tempToken),i=r.availableOrgas.find((function(t){return t.id===e})),r.organization=i,r.orgaUser=this.fakeBackend.findOrgaUserByAccountId(i.id,r.account.id),this.setToken(r);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"loginWithAccountOnly",value:function(){var e,t,n,r={authType:Iu.Account};r.authLevel=null===(e=this.tempToken)||void 0===e?void 0:e.authLevel,r.account=null===(t=this.tempToken)||void 0===t?void 0:t.account,r.availableOrgas=null===(n=this.tempToken)||void 0===n?void 0:n.availableOrgas,this.setToken(r)}},{key:"logout",value:function(){this.setToken({authType:Iu.None})}},{key:"setToken",value:function(e){this.initMembers(),this.token.authType=e.authType,this.token.authType!==Iu.None&&(this.tempToken=void 0,Object.assign(this.token,e)),this.principalService.setPrincipal(this.token),this.principalService.isLoggedIn()?this.principalService.isLoggedInInOrga()?this.eventService.publishTokenChangedEvent({type:Zk.LoggedIn,account:this.token.account,orgaUser:this.token.orgaUser}):this.eventService.publishTokenChangedEvent({type:Zk.LoggedIn,account:this.token.account}):this.eventService.publishTokenChangedEvent({type:Zk.LoggedOut})}},{key:"getToken",value:function(){return this.token}}]),e}()).\u0275fac=function(e){return new(e||qk)(Je(iy),Je(sd),Je(hd),Je(ml),Je(cd))},qk.\u0275prov=he({token:qk,factory:qk.\u0275fac,providedIn:"root"}),qk);function Jk(e,t){1&e&&(Ma(0,"h4"),Xa(1,'Derzeit sind keine "Mails" vorhanden.'),Ea())}var Qk=function(e){return{editMode:e}};function Yk(e,t){if(1&e){var n=Na();Ma(0,"li",3),Va("click",(function(){qt(n);var e=t.index;return ja(2).showTask(e)})),Ma(1,"span",4),Xa(2),Ea(),Ma(3,"span",5),Xa(4),Ea(),Ea()}if(2&e){var r=t.$implicit,i=t.index,a=ja(2);Pa("ngClass",po(3,Qk,r.id===(null==a.taskTodo?null:a.taskTodo.id))),Rr(2),ts(" ",a.getTypeAsString(i)," "),Rr(2),ts(" ",a.getDetailsOfTask(i)," ")}}function Xk(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2,"Du hast dich registriert, aber deine Email-Adresse noch nicht verifiziert. "),Fa(3,"br"),Xa(4," Wenn du untenstehendem Link folgst und dich mit deinem registrierten Account anmeldest, best\xe4tigst du deine Email-Adresse. "),Ea(),Ma(5,"p"),Xa(6,'Damit wird dein Account "aktiv" (und du kannst die E-Mail l\xf6schen)'),Ea(),Ma(7,"a",6),Va("click",(function(){return qt(n),ja(3).wantsToFulfill("/iam/login")})),Xa(8,"Hiermit verifizierst du deine Email-Adresse."),Ea(),Ma(9,"p"),Ma(10,"button",7),Va("click",(function(){return qt(n),ja(3).removeTask()})),Xa(11,"E-Mail l\xf6schen"),Ea(),Ea(),Ea()}}function eb(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Fa(3,"br"),Xa(4," Wenn dies in Ordnung ist, f\xfchre folgende Schritte durch:"),Ea(),Ma(5,"ul",8),Ma(6,"li"),Ma(7,"a",6),Va("click",(function(){return qt(n),ja(3).wantsToFulfill("/iam/login")})),Xa(8,"Melde dich mit deinem Account an - wenn du bereits einen hast."),Ea(),Ea(),Ma(9,"li"),Ma(10,"a",6),Va("click",(function(){return qt(n),ja(3).wantsToFulfill("/iam/register")})),Xa(11," Oder registriere dich zun\xe4chst und melde dich danach an."),Ea(),Ea(),Ma(12,"li"),Xa(13," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Ea(),Ea(),Ma(14,"button",7),Va("click",(function(){return qt(n),ja(3).removeTask()})),Xa(15,"E-Mail l\xf6schen"),Ea(),Ea()}if(2&e){var r=ja(3);Rr(2),ts('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',r.getOrganame(),'" vorgesehen.')}}var tb=function(){return["/iam/login"]};function nb(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"p"),Xa(2),Fa(3,"br"),Xa(4," Dir wurde eine Nachricht an deinen Account geschickt. Daher einfach anmelden und deine Nachrichten pr\xfcfen. "),Ea(),Ma(5,"ul",8),Ma(6,"li"),Ma(7,"a",9),Xa(8,"Melde dich mit deinem Account an."),Ea(),Ea(),Ma(9,"li"),Xa(10," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Ea(),Ea(),Ma(11,"button",7),Va("click",(function(){return qt(n),ja(3).removeTask()})),Xa(12,"E-Mail l\xf6schen"),Ea(),Ea()}if(2&e){var r=ja(3);Rr(2),ts('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',r.getOrganame(),'" vorgesehen.'),Rr(5),Pa("routerLink",vo(2,tb))}}function rb(e,t){if(1&e&&(Ma(0,"div"),xa(1,Xk,12,0,"div",0),xa(2,eb,16,1,"div",0),xa(3,nb,13,3,"div",0),Ea()),2&e){var n=ja(2);Rr(1),Pa("ngIf",n.isAccountVerification(n.taskTodo.type)),Rr(1),Pa("ngIf",n.isInvitationOrgaUser(n.taskTodo.type)),Rr(1),Pa("ngIf",n.isInfoOfInvitationOrgaUser(n.taskTodo.type))}}function ib(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"h6"),Xa(2,'Folgende "Mails" sind vorhanden:'),Ea(),Ma(3,"ul",1),xa(4,Yk,5,5,"li",2),Ea(),xa(5,rb,4,3,"div",0),Ea()),2&e){var n=ja();Rr(4),Pa("ngForOf",n.allTasks),Rr(1),Pa("ngIf",n.taskTodo)}}var ab,sb,ob,ub,cb=((ub=function(){function e(t,n,r,i){_classCallCheck(this,e),this.router=t,this.taskService=n,this.tokenService=r,this.settingsService=i,this.allTasks=[],this.taskTodoDescription="",this.tokenService.logout(),this.settingsService.setTitle("Fake Mailbox"),this.taskService.resetTaskInProgress()}return _createClass(e,[{key:"ngOnInit",value:function(){this.initMembers()}},{key:"initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.taskService.getAllMails();case 2:this.allTasks=e.sent,this.allTasks.length>0?(this.idxTaskTodo||(this.idxTaskTodo=0),this.allTasks[this.idxTaskTodo]||(this.idxTaskTodo=this.idxTaskTodo-1),this.showTask(this.idxTaskTodo)):(this.idxTaskTodo=void 0,this.taskTodo=void 0,this.taskTodoDescription="");case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_getTypeAsString",value:function(e){switch(e){case Xm.AccountVerification:return"Account-Verifizierung";case Xm.InfoOfInvitationOrgaUser:return"Einladung in Organisation an Account";case Xm.InvitationOrgaUser:return"Einladung in Organisation per Mail"}}},{key:"getTypeAsString",value:function(e){return e+1+": "+this._getTypeAsString(this.allTasks[e].type)}},{key:"getOrganame",value:function(){var e,t,n;return null!==(n=null===(t=null===(e=this.taskTodo)||void 0===e?void 0:e.organization)||void 0===t?void 0:t.name)&&void 0!==n?n:"unknown-Orga"}},{key:"getDetailsOfTask",value:function(e){var t=this.allTasks[e];switch(t.type){case Xm.AccountVerification:return t.email+", "+t.account.name;case Xm.InvitationOrgaUser:return t.email;case Xm.InfoOfInvitationOrgaUser:return t.email+", "+t.account.name}}},{key:"isAccountVerification",value:function(e){return e===Xm.AccountVerification}},{key:"isInvitationOrgaUser",value:function(e){return e===Xm.InvitationOrgaUser}},{key:"isInfoOfInvitationOrgaUser",value:function(e){return e===Xm.InfoOfInvitationOrgaUser}},{key:"showTask",value:function(e){this.idxTaskTodo=e,this.taskTodo=this.allTasks[e]}},{key:"wantsToFulfill",value:function(e){this.taskTodo&&(this.taskService.setTaskInProgress(this.taskTodo.id)?e&&this.router.navigateByUrl(e):alert("Da stimmt was mit der aktuellen Best\xe4tigung/Task nicht?!?"))}},{key:"removeTask",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.taskTodo,!e.t0){e.next=6;break}return e.next=4,this.taskService.removeTask(this.taskTodo.id);case 4:return e.next=6,this.initMembers();case 6:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ub)(Ra(Tp),Ra(ty),Ra($k),Ra(cd))},ub.\u0275cmp=ht({type:ub,selectors:[["app-fake-mail-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"liste"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[3,"click"],[1,"btn","btn-danger",3,"click"],[1,"browser-default"],[3,"routerLink"]],template:function(e,t){1&e&&(xa(0,Jk,2,0,"h4",0),xa(1,ib,6,2,"div",0)),2&e&&(Pa("ngIf",0===t.allTasks.length),Rr(1),Pa("ngIf",t.allTasks.length>0))},directives:[pc,gc,hc,Mp],styles:[".liste[_ngcontent-%COMP%]{width:60rem}.editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}a[_ngcontent-%COMP%]{cursor:pointer}.list-item-text-left[_ngcontent-%COMP%]{width:25rem}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}"]}),ub),lb=((ob=function(){function e(t,n,r){_classCallCheck(this,e),this.principalService=t,this.router=n,this.settingsService=r}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=!0,r="",i=!!e.data.allowSubAdmin;return this.settingsService.setRedirectUri(t.url),Su(Iu.OrgaUser,this.principalService.getAuthType())?(this.principalService.isAdminOfCurrentOrga()||(n=!1,i&&(n=!0)),n||(r=i?"Du musst Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du musst Admin dieser Organisation sein.")):(n=!1,r=i?"Du must in einer Organisation angemeldet- und Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du must in einer Organisation angemeldet- und Admin dieser Organisation sein."),n?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(r),this.settingsService.showInfoPageAfterOrgaAdminGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}]),e}()).\u0275fac=function(e){return new(e||ob)(Je(hd),Je(Tp),Je(cd))},ob.\u0275prov=he({token:ob,factory:ob.\u0275fac,providedIn:"root"}),ob),db=((sb=function(){function e(t){_classCallCheck(this,e),this.http=t,this.backendURI=yu+"accounts/"}return _createClass(e,[{key:"updateAccount",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Object.assign({},e),t.next=4,this.http.patch(this.backendURI+e.id,n).toPromise();case 4:return t.abrupt("return",!0);case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"deleteAccount",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.delete(this.backendURI+e).toPromise();case 3:return t.abrupt("return",!0);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"findAccountById",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.http.get(this.backendURI+e).toPromise();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),_u(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"findAccountByMail",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={params:new Rc({fromString:"mail="+e})},t.next=4,this.http.get(this.backendURI,n).toPromise();case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(0),_u(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}()).\u0275fac=function(e){return new(e||sb)(Je(tl))},sb.\u0275prov=he({token:sb,factory:sb.\u0275fac,providedIn:"root"}),sb),hb=((ab=function(){function e(t,n){_classCallCheck(this,e),this.fakeBackend=t,this.beAccountService=n,this.useValueFromBackend=!0,this.callBackend=!1}return _createClass(e,[{key:"updateAccount",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beAccountService.updateAccount(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.updateAccount(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"deleteAccount",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beAccountService.deleteAccount(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",this.fakeBackend.deleteAccount(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findAccountById",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beAccountService.findAccountById(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",null!=n?n:void 0);case 6:return t.abrupt("return",this.fakeBackend.findAccountById(e));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findAccountByMail",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callBackend){t.next=6;break}return t.next=3,this.beAccountService.findAccountByMail(e);case 3:if(n=t.sent,!this.useValueFromBackend){t.next=6;break}return t.abrupt("return",null!=n?n:void 0);case 6:return t.abrupt("return",this.fakeBackend.findAccountByMail(e));case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ab)(Je(iy),Je(db))},ab.\u0275prov=he({token:ab,factory:ab.\u0275fac,providedIn:"root"}),ab);function fb(e,t){1&e&&(Ma(0,"div"),Ma(1,"p"),Xa(2,"Du kannst deinen Account derzeit noch nicht l\xf6schen, da du noch in mind. einer Organisation Mitglied bist."),Ea(),Ma(3,"a",14),Xa(4," Weiter zur Verwaltung deiner Mitgliedschaften... "),Ea(),Ea())}function gb(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"button",15),Va("click",(function(){return qt(n),ja().deleteAccount()})),Xa(2,"Account l\xf6schen"),Ea(),Ea()}}var vb,pb=((vb=function(){function e(t,n,r,i,a,s,o){_classCallCheck(this,e),this.accountService=t,this.orgaService=n,this.tokenService=r,this.principalService=i,this.eventService=a,this.settingsService=s,this.router=o,this.account={},this.deleteAccountAllowed=!1}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Account-Verwaltung"),this.principalsAccountId=this.principalService.getAccount().id,e.next=4,this.initMembers();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.findAccountById(this.principalsAccountId);case 2:(t=e.sent)&&(this.account=Object.assign({},t),this.accountPrevious=Object.assign({},this.account),this.deleteAccountAllowed=!this.orgaService.accountHasAnyOrgaMembership(this.account.id)||this.settingsService.allowDeletionOfAccountWithOrgaMemberships());case 4:case"end":return e.stop()}}),e,this)})))}},{key:"dirty",value:function(){var e,t,n,r;return(null===(e=this.accountPrevious)||void 0===e?void 0:e.name)!==(null===(t=this.account)||void 0===t?void 0:t.name)||(null===(n=this.accountPrevious)||void 0===n?void 0:n.email)!==(null===(r=this.account)||void 0===r?void 0:r.email)}},{key:"resetForm",value:function(){this.initMembers()}},{key:"submitForm",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.updateAccount(this.account);case 2:if(!e.sent){e.next=6;break}this.eventService.publishTokenChangedEvent({type:Zk.AccountDetails,account:this.account}),this.initMembers(),e.next=7;break;case 6:alert("\xc4nderungen konnten nicht \xfcbernommen werden ???");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"deleteAccount",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=confirm("Willst du deinen Account wirklich l\xf6schen?"),!e.t0){e.next=5;break}return e.next=4,this.accountService.deleteAccount(this.principalsAccountId);case 4:e.t0=e.sent;case 5:if(e.t1=e.t0,!e.t1){e.next=8;break}this.tokenService.logout(),this.router.navigateByUrl("/");case 8:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||vb)(Ra(hb),Ra(oy),Ra($k),Ra(hd),Ra(sd),Ra(cd),Ra(Tp))},vb.\u0275cmp=ht({type:vb,selectors:[["app-iam-account-mgmt"]],decls:24,vars:10,consts:[[1,"mt-1","mb-2"],[3,"ngSubmit"],["changeAccountForm","ngForm"],[1,"input-field"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","name"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email"],["type","button",1,"btn","mr-1","mt-1",3,"disabled","click"],["type","submit",1,"btn","mt-1",3,"disabled"],[1,"hr-3"],[4,"ngIf"],["routerLink","/iam/organization-management",2,"font-size","larger"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){if(1&e&&(Ma(0,"p",0),Xa(1,"Hier kannst du deine Accountdaten \xe4ndern:"),Ea(),Ma(2,"form",1,2),Va("ngSubmit",(function(){return t.submitForm()})),Ma(4,"div",3),Ma(5,"input",4,5),Va("ngModelChange",(function(e){return t.account.name=e})),Ea(),Ma(7,"label",6),Xa(8,"Name (muss mind. 3 Zeichen haben)"),Ea(),Ea(),Ma(9,"div",3),Ma(10,"input",7,8),Va("ngModelChange",(function(e){return t.account.email=e})),Ea(),Ma(12,"label",9),Xa(13,"Email (Pflichtfeld, eindeutig)"),Ea(),Ea(),Ma(14,"button",10),Va("click",(function(){return t.resetForm()})),Xa(15,"\xc4nderungen verwerfen"),Ea(),Ma(16,"button",11),Xa(17,"\xc4nderungen \xfcbernehmen"),Ea(),Ea(),Ma(18,"div"),Fa(19,"hr",12),Ma(20,"p"),Xa(21,"Hier kannst du deinen Account l\xf6schen."),Ea(),Ea(),xa(22,fb,5,0,"div",13),xa(23,gb,3,0,"div",13)),2&e){var n=Aa(3);Rr(5),Pa("ngModel",t.account.name),Rr(2),Za("active",(null==t.account.name?null:t.account.name.length)>0),Rr(3),Pa("ngModel",t.account.email),Rr(2),Za("active",(null==t.account||null==t.account.email?null:t.account.email.length)>0),Rr(2),Pa("disabled",!t.dirty()),Rr(2),Pa("disabled",!n.valid||!t.dirty()),Rr(6),Pa("ngIf",!t.deleteAccountAllowed),Rr(1),Pa("ngIf",t.deleteAccountAllowed)}},directives:[Xh,Nd,Gh,Sd,tf,rf,of,Fd,Yh,pc,Mp],styles:["form[_ngcontent-%COMP%]{max-width:600px}.input-field[_ngcontent-%COMP%]{max-width:400px}"]}),vb);function mb(e,t){if(1&e){var n=Na();Ma(0,"li"),Ma(1,"span",26),Xa(2),Ea(),Ma(3,"span",27),Xa(4),Ea(),Ma(5,"button",28),Va("click",(function(){qt(n);var e=t.index;return ja().leaveOrganization(e)})),Xa(6," Organisation verlassen"),Ea(),Ea()}if(2&e){var r=t.$implicit,i=ja();Rr(2),ts(" ",i.getOrganizationTypeAsString(r.orga.type)," "),Rr(2),ns(" ",r.orga.name," (",r.orgaUser.name,") ")}}function yb(e,t){1&e&&(Ma(0,"button",40),Xa(1," Beitrittswunsch an ... senden "),Ea())}function kb(e,t){if(1&e){var n=Na();Ma(0,"button",41),Va("click",(function(){return qt(n),ja(2).joinFoundOrganization()})),Xa(1),Ea()}if(2&e){var r=ja(2);Rr(1),ts(" Beitrittswunsch an <",r.foundOrgaDisplayname,"> senden ")}}function bb(e,t){if(1&e){var n=Na();Ma(0,"div",3),Ma(1,"div",29),Ma(2,"label",30),Ma(3,"input",31),Va("ngModelChange",(function(e){return qt(n),ja().showSearch=e})),Ea(),Ma(4,"span"),Xa(5),Ea(),Ea(),Ea(),Ma(6,"div",32),Ma(7,"div",9),Ma(8,"div",33),Ma(9,"input",34),Va("ngModelChange",(function(e){return qt(n),ja().searchOrgaByMail=e}))("keydown.enter",(function(){return qt(n),ja().searchOrganization()})),Ea(),Ea(),Ma(10,"div",35),Ma(11,"button",36),Va("click",(function(){return qt(n),ja().searchOrganization()})),Xa(12," Suche Organisation "),Ea(),Ea(),Ea(),Ma(13,"div",37),Ma(14,"div",29),xa(15,yb,2,0,"button",38),xa(16,kb,2,1,"button",39),Ea(),Ea(),Ea(),Ea()}if(2&e){var r=ja();Rr(3),Pa("ngModel",r.showSearch),Rr(2),es(r.showSearch?"<Beitrittswunsch an eine Organisation senden> ausblenden":"<Beitrittswunsch an eine Organisation senden> einblenden"),Rr(1),Pa("hidden",!r.showSearch),Rr(3),Pa("ngModel",r.searchOrgaByMail),Rr(6),Pa("ngIf",void 0===r.foundOrganization),Rr(1),Pa("ngIf",void 0!==r.foundOrganization)}}function _b(e,t){if(1&e&&(Ma(0,"option",42),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n.type),Rr(1),ts(" ",n.text,"")}}var wb,Cb=function(e){return{active:e}},Ob=((wb=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.tokenService=r,this.organizationService=i,this.notificationService=a,this.usersDisplayName="",this.orgas=[],this.allowJoiningOrgaByAccount=!0,this.searchOrgaByMail="",this.foundOrgaDisplayname="",this.mShowSearch=!1,this.mShowNewPart=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Organisations-Verwaltung"),this.principal=this.principalService.getAccount(),this.allowJoiningOrgaByAccount=this.settingsService.allowJoiningOrganizationByAccount(),this.usersDisplayName=this.principal.name,this.typeOptions=[{text:"Privat",type:Qm.Privat},{text:"Unternehmen",type:Qm.Unternehmen},{text:"Kanzlei",type:Qm.Kanzlei}],this.initMembers()}},{key:"initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.foundOrgaDisplayname="Bitte erst suchen...",this.foundOrganization=void 0,this.newOrganization={name:"",email:"",type:Qm.Privat},this.newOrgaUserNewOrga={id:"",orgaId:"",accountId:this.principal.id,adminType:ld.SuperAdmin,name:this.principal.name},this.searchOrgaByMail="",e.next=7,this.organizationService.getAllOrgasAndUserForAccount(this.principal.id);case 7:this.orgas=e.sent;case 8:case"end":return e.stop()}}),e,this)})))}},{key:"getOrganizationTypeAsString",value:function(e){return Qm[e]}},{key:"leaveOrganization",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.orgas[e].orgaUser,r=this.tokenService.getToken().orgaUser,i=!1,t.t0=(null==r?void 0:r.id)!==n.id||(i=confirm("Du verl\xe4sst die Organisation, in der du angemeldet bist.\nDu wirst damit umgemeldet! Ist das OK?")),!t.t0){t.next=9;break}return t.next=6,this.organizationService.removeOrgaUser(n.id);case 6:return i&&this.tokenService.logoutFromOrganization(r.orgaId),t.next=9,this.initMembers();case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_arrangeFoundDisplayname",value:function(){this.foundOrgaDisplayname="Bitte erst suchen...";var e=this.foundOrganization;e?this.organizationService.accountIsAlreadyMemberInOrga(e.id,this.principal.id)?(this.foundOrgaDisplayname="In "+e.name+" bist du schon Mitglied.",this.foundOrganization=void 0):this.foundOrgaDisplayname=e.name:this.foundOrgaDisplayname="Eine Organisation mit angegebener Mail-Addresse gibt es nicht."}},{key:"searchOrganization",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=0!==this.searchOrgaByMail.trim().length,!e.t0){e.next=6;break}return e.next=4,this.organizationService.findOrgaByMail(this.searchOrgaByMail);case 4:this.foundOrganization=e.sent,this._arrangeFoundDisplayname();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"joinFoundOrganization",value:function(){var e;return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===(e=this.foundOrganization)||void 0===e?void 0:e.id,!t.t0){t.next=6;break}return t.next=4,this.organizationService.wishOfMembership(this.foundOrganization.id);case 4:return t.next=6,this.initMembers();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewOrganization",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.organizationService.createNewOrganization(this.newOrganization,this.newOrgaUserNewOrga);case 2:if(!e.sent){e.next=7;break}return e.next=5,this.initMembers();case 5:e.next=8;break;case 7:alert("Die Mail-Adresse ist bei Organisationen bereits vergeben, bitte w\xe4hlen sie eine andere.");case 8:case"end":return e.stop()}}),e,this)})))}},{key:"showSearch",get:function(){return this.mShowSearch},set:function(e){this.mShowSearch=e,this.mShowSearch&&(this.mShowNewPart=!1)}},{key:"showNewPart",get:function(){return this.mShowNewPart},set:function(e){this.mShowNewPart=e,this.mShowNewPart&&(this.mShowSearch=!1)}}]),e}()).\u0275fac=function(e){return new(e||wb)(Ra(cd),Ra(hd),Ra($k),Ra(oy),Ra(ry))},wb.\u0275cmp=ht({type:wb,selectors:[["app-iam-orga-mgmt"]],decls:38,vars:18,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","container-form",4,"ngIf"],[1,"container-form"],["for","toggle-new"],["type","checkbox","id","toggle-new",3,"ngModel","ngModelChange"],[1,"row","mt-1",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["newOrgaForm","ngForm"],[1,"row","m-0"],[1,"input-field","col","s8","m6","l4"],["name","orgaTyp",1,"browser-default",3,"ngModel","ngModelChange"],["orgaTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["type","text","id","orgaName","name","orgaName","required","",1,"form-control",3,"ngModel","ngModelChange"],["orgaName","ngModel"],["for","orgaName"],["type","text","id","orgaMail","name","orgaMail","required","",1,"form-control",3,"ngModel","ngModelChange"],["orgaMail","ngModel"],["for","orgaMail",3,"ngClass"],[1,"row","mt-1"],["type","text","id","userName","name","userName","required","",1,"form-control",3,"ngModel","ngModelChange"],["userName","ngModel"],["for","userName",3,"ngClass"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-primary",3,"click"],[1,"col","s12"],["for","toggle-suche"],["type","checkbox","id","toggle-suche",3,"ngModel","ngModelChange"],[1,"col","s12",3,"hidden"],[1,"input-field","col","s6","m4"],["type","email","placeholder","via Mailadresse Organisation suchen...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s6","m4"],[1,"btn","btn-success",3,"click"],[1,"row","mb-2"],["type","button","class","btn btn-success disabled",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","disabled"],["type","button",1,"btn","btn-success",3,"click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ma(0,"p"),Xa(1),Ea(),Ma(2,"ul",0),xa(3,mb,7,3,"li",1),Ea(),xa(4,bb,17,6,"div",2),Ma(5,"div",3),Ma(6,"div"),Ma(7,"label",4),Ma(8,"input",5),Va("ngModelChange",(function(e){return t.showNewPart=e})),Ea(),Ma(9,"span"),Xa(10),Ea(),Ea(),Ea(),Ma(11,"div",6),Ma(12,"form",7,8),Va("ngSubmit",(function(){return t.createNewOrganization()})),Ma(14,"div",9),Ma(15,"div",10),Ma(16,"select",11,12),Va("ngModelChange",(function(e){return t.newOrganization.type=e})),xa(18,_b,2,2,"option",13),Ea(),Ea(),Ea(),Ma(19,"div",9),Ma(20,"div",14),Ma(21,"input",15,16),Va("ngModelChange",(function(e){return t.newOrganization.name=e})),Ea(),Ma(23,"label",17),Xa(24,"Name der Organisation"),Ea(),Ea(),Ma(25,"div",14),Ma(26,"input",18,19),Va("ngModelChange",(function(e){return t.newOrganization.email=e})),Ea(),Ma(28,"label",20),Xa(29,"E-Mail der Organisation"),Ea(),Ea(),Ea(),Ma(30,"div",21),Ma(31,"div",14),Ma(32,"input",22,23),Va("ngModelChange",(function(e){return t.newOrgaUserNewOrga.name=e})),Ea(),Ma(34,"label",24),Xa(35,"Dein Mitarbeitername in der Organisation"),Ea(),Ea(),Ea(),Ma(36,"button",25),Xa(37,"Organisation anlegen"),Ea(),Ea(),Ea(),Ea()),2&e){var n=Aa(13);Rr(1),ts(" Hallo ",t.usersDisplayName,", in diesen Organisationen bist du Mitglied:"),Rr(2),Pa("ngForOf",t.orgas),Rr(1),Pa("ngIf",!0===t.allowJoiningOrgaByAccount),Rr(4),Pa("ngModel",t.showNewPart),Rr(2),es(t.showNewPart?"<Eine neue Organisation anlegen> ausblenden":"<Eine neue Organisation anlegen> einblenden"),Rr(1),Pa("hidden",!t.showNewPart),Rr(5),Pa("ngModel",t.newOrganization.type),Rr(2),Pa("ngForOf",t.typeOptions),Rr(3),Pa("ngModel",t.newOrganization.name),Rr(5),Pa("ngModel",t.newOrganization.email),Rr(2),Pa("ngClass",po(14,Cb,t.newOrganization.email)),Rr(4),Pa("ngModel",t.newOrgaUserNewOrga.name),Rr(2),Pa("ngClass",po(16,Cb,t.newOrgaUserNewOrga.name)),Rr(2),Pa("disabled",!n.valid)}},directives:[gc,pc,Cd,Fd,Yh,Xh,Nd,Gh,lh,Sd,tf,hc,dh,mh],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:10rem}.list-item-text_left[_ngcontent-%COMP%]{width:30rem}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{margin-bottom:0}"]}),wb);function Ib(e,t){if(1&e&&(Ma(0,"li"),Xa(1),Ea()),2&e){var n=t.$implicit;Rr(1),ts(" ",n," ")}}var Sb,xb,Ab,Rb,Ub,Pb,Tb=((Sb=function(){function e(t){_classCallCheck(this,e),this.settingsService=t,this.requirements=[],this.redirectUri=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Seite gesch\xfctzt..."),this.redirectUri=this.settingsService.getRedirectUri(),this.requirements=this.settingsService.getRequiredByGuardHelptext(!0).split("-")}}]),e}()).\u0275fac=function(e){return new(e||Sb)(Ra(cd))},Sb.\u0275cmp=ht({type:Sb,selectors:[["app-iam-guard-fail"]],decls:12,vars:2,consts:[[2,"font-weight","bold"],[1,"bullet"],[4,"ngFor","ngForOf"],["routerLink","/iam/login",2,"font-size","larger"]],template:function(e,t){1&e&&(Ma(0,"h4"),Xa(1,"Die Seite, die du aufgerufen hast, ist gesch\xfctzt."),Ea(),Ma(2,"p"),Xa(3,"Folgende Seite hast du aufgerufen: "),Ma(4,"span",0),Xa(5),Ea(),Ea(),Ma(6,"h6"),Xa(7,"Du must folgende Bedingung(en) erf\xfcllen, um die Seite aufzurufen:"),Ea(),Ma(8,"ol",1),xa(9,Ib,2,1,"li",2),Ea(),Ma(10,"a",3),Xa(11," Weiter zum Login...\n"),Ea()),2&e&&(Rr(5),es(t.redirectUri),Rr(4),Pa("ngForOf",t.requirements))},directives:[gc,Mp],styles:["ol.bullet[_ngcontent-%COMP%]{list-style-type:circle;margin-bottom:2em}"]}),Sb),Mb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?_get(_getPrototypeOf(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"schedule",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),n}(h))),Eb=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;_classCallCheck(this,e),this.SchedulerAction=t,this.now=n}return _createClass(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),Fb=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eb.now;return _classCallCheck(this,n),(r=t.call(this,e,(function(){return n.delegate&&n.delegate!==_assertThisInitialized(r)?n.delegate.now():i()}))).actions=[],r.active=!1,r.scheduled=void 0,r}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(Eb)))(Mb),Nb=((xb=function(){function e(t,n,r){_classCallCheck(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return _createClass(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return xu(this.value);case"E":return e=this.error,new w((function(t){return t.error(e)}));case"C":return Tf()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}()).completeNotification=new xb("C"),xb.undefinedValueNotification=new xb("N",void 0),xb),Db=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,n),(i=t.call(this,e)).scheduler=r,i.delay=a,i}return _createClass(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new zb(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(Nb.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(Nb.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(Nb.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(v),zb=function e(t,n){_classCallCheck(this,e),this.notification=t,this.destination=n},Vb=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(e=t.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return _createClass(n,[{key:"nextInfiniteTimeWindow",value:function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this._events.push(new Bb(this._getNow(),e)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new I;if(this.isStopped||this.hasError?t=h.EMPTY:(this.observers.push(e),t=new S(this,e)),i&&e.add(e=new Db(e,i)),n)for(var s=0;s<a&&!e.closed;s++)e.next(r[s]);else for(var o=0;o<a&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||Fb).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r}}]),n}(A),Bb=function e(t,n){_classCallCheck(this,e),this.time=t,this.value=n},Lb=function(){function e(t){var n,r=this;_classCallCheck(this,e),this.lazyLoad=!1,this.providers=new Map,this._ready=new Vb,(n=t)&&(n instanceof w||"function"==typeof n.lift&&"function"==typeof n.subscribe)?t.pipe(Xf()).subscribe((function(e){r.initialize(e)})):this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.providers.set(n.id,n.provider),this.lazyLoad=this.lazyLoad||n.lazyLoad}this._ready.next(),this._ready.complete()}}]),e}(),jb=((Rb=Ab=function(){function e(t){var n=this;_classCallCheck(this,e),this._user=null,this._authState=new Vb(1),this._readyState=new Sf([]),this.initialized=!1,t._ready.subscribe((function(){n.providers=t.providers,t.lazyLoad||n.initialize()}))}return _createClass(e,[{key:"initialize",value:function(){var e=this;this.initialized=!0,this.providers.forEach((function(t,n){t.initialize().then((function(){var r=e._readyState.getValue();r.push(n),e._readyState.next(r),t.getLoginStatus().then((function(t){t.provider=n,e._user=t,e._authState.next(t)})).catch((function(t){e._authState.next(null)}))}))}))}},{key:"signIn",value:function(e,t){var n=this;return this.initialized||this.initialize(),new Promise((function(r,i){var a=n.providers.get(e);a?a.signIn(t).then((function(t){t.provider=e,r(t),n._user=t,n._authState.next(t)})).catch((function(e){i(e)})):i(Ab.ERR_LOGIN_PROVIDER_NOT_FOUND)}))}},{key:"signOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.initialized||this.initialize(),new Promise((function(n,r){if(e._user){var i=e.providers.get(e._user.provider);i?i.signOut(t).then((function(){n(),e._user=null,e._authState.next(null)})).catch((function(e){r(e)})):r(Ab.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(Ab.ERR_NOT_LOGGED_IN)}))}},{key:"authState",get:function(){return this._authState.asObservable()}},{key:"readyState",get:function(){return this._readyState.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||Rb)(Je(Lb))},Rb.\u0275prov=he({token:Rb,factory:Rb.\u0275fac}),Rb.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",Rb.ERR_NOT_LOGGED_IN="Not logged in",Rb),Hb=((Pb=Ub=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}return _createClass(e,null,[{key:"initialize",value:function(e){return{ngModule:Ub,providers:[jb,{provide:Lb,useValue:e}]}}}]),e}()).\u0275mod=pt({type:Pb}),Pb.\u0275inj=fe({factory:function(e){return new(e||Pb)(Je(Pb,12))},providers:[jb],imports:[[_c]]}),Pb),Gb=function e(){_classCallCheck(this,e)},Wb=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scope:"email"};return _classCallCheck(this,n),(r=t.call(this)).clientId=e,r.opt=i,r}return _createClass(n,[{key:"initialize",value:function(){var e=this;return new Promise((function(t,r){e.loadScript(n.PROVIDER_ID,"https://apis.google.com/js/platform.js",(function(){gapi.load("auth2",(function(){e.auth2=gapi.auth2.init(Object.assign(Object.assign({},e.opt),{client_id:e.clientId})),e.auth2.then((function(){e._readyState.next(!0),t()})).catch((function(e){r(e)}))}))}))}))}},{key:"getLoginStatus",value:function(){var e=this;return new Promise((function(t,n){e.onReady().then((function(){if(e.auth2.isSignedIn.get()){var r=new Gb,i=e.auth2.currentUser.get().getBasicProfile(),a=e.auth2.currentUser.get().getAuthResponse(!0).access_token,s=e.auth2.currentUser.get().getAuthResponse(!0).id_token;r.id=i.getId(),r.name=i.getName(),r.email=i.getEmail(),r.photoUrl=i.getImageUrl(),r.firstName=i.getGivenName(),r.lastName=i.getFamilyName(),r.authToken=a,r.idToken=s,t(r)}else n("No user is currently logged in.")}))}))}},{key:"signIn",value:function(e){var t=this;return new Promise((function(n,r){t.onReady().then((function(){(e&&e.offline_access||t.opt&&t.opt.offline_access?t.auth2.grantOfflineAccess(e):t.auth2.signIn(e)).then((function(e){var r=new Gb,i=t.auth2.currentUser.get().getBasicProfile(),a=t.auth2.currentUser.get().getAuthResponse(!0).access_token,s=t.auth2.currentUser.get().getAuthResponse(!0).id_token;r.id=i.getId(),r.name=i.getName(),r.email=i.getEmail(),r.photoUrl=i.getImageUrl(),r.firstName=i.getGivenName(),r.lastName=i.getFamilyName(),r.authToken=a,r.idToken=s,e&&e.code&&(r.authorizationCode=e.code),n(r)}),(function(e){r("User cancelled login or did not fully authorize.")})).catch((function(e){r(e)}))}))}))}},{key:"signOut",value:function(e){var t=this;return new Promise((function(n,r){t.onReady().then((function(){(e?t.auth2.disconnect():t.auth2.signOut()).then((function(e){e?r(e):n()})).catch((function(e){r(e)}))}))}))}}]),n}(function(){function e(){_classCallCheck(this,e),this._readyState=new Sf(!1)}return _createClass(e,[{key:"onReady",value:function(){var e=this;return new Promise((function(t,n){e._readyState.subscribe((function(e){e&&t()}))}))}},{key:"loadScript",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("undefined"!=typeof document&&!document.getElementById(e)){var i=document.createElement("script");i.async=r,i.src=t,i.onload=n,document.head.appendChild(i)}}}]),e}());return e.PROVIDER_ID="GOOGLE",e}();function qb(e,t){if(1&e){var n=Na();Ma(0,"button",22),Va("click",(function(){qt(n);var e=ja().index;return ja().removeCredential(e)})),Xa(1," L\xf6schen"),Ea()}2&e&&Pa("disabled",ja().$implicit.type>9)}function Kb(e,t){if(1&e&&(Ma(0,"li"),Ma(1,"span",19),Xa(2),Ea(),Ma(3,"span",20),Xa(4),Ea(),xa(5,qb,2,1,"button",21),Ea()),2&e){var n=t.index,r=ja();Rr(2),ts(" ",r.getCredentialTypeAsString(n)," "),Rr(2),ts(" ",r.getCredentialDescription(n)," "),Rr(1),Pa("ngIf",1!==r.credentials.length)}}function Zb(e,t){if(1&e&&(Ma(0,"option",23),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n.type),Rr(1),ts(" ",n.text,"")}}var $b,Jb=(($b=function(){function e(t,n,r,i){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.credentialService=r,this.authService=i,this.usersDisplayName="",this.credentials=[],this.newCredential={type:Bm.Benutzerkonto}}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Zugangsmedien-Verwaltung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this.enumOptions=[{text:"Benutzerkonto",type:Bm.Benutzerkonto},{text:"Benutzerkonto mit Sms-Tan",type:Bm.SmsTan},{text:"SmartCard",type:Bm.SmartCard},{text:"SmartLogin",type:Bm.SmartLogin}],this._initMembers()}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.credentialService.getAllCredentialsForUser(this.principal.id);case 2:this.credentials=e.sent,this.newCredential={accountId:this.principal.id,type:Bm.Benutzerkonto,kennung:"",secret:""};case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getCredentialTypeAsString",value:function(e){return Bm[this.credentials[e].type]}},{key:"getCredentialDescription",value:function(e){var t=this.credentials[e],n="";return Lm(t.type)&&t.orgaId&&(n=" ("+t.orgaId+")"),t.type===Bm.SocialLogin?t.provider+"-ID: "+t.userIdFromProvider:t.kennung+n}},{key:"removeCredential",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.credentialService.removeCredential(this.credentials[e].id);case 2:this._initMembers();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"addNewCredential",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.credentialService.addNewCredential(this.newCredential);case 2:if(!e.sent){e.next=6;break}this._initMembers(),e.next=7;break;case 6:alert("Das Anlegen des Zugangsmediums hat nicht geklappt...");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"linkWithGoogleLogin",value:function(){var e=this;this.authService.signIn(Wb.PROVIDER_ID).then((function(t){t?(console.log("provider: "+t.provider),console.log("id: "+t.id),e.newCredential.type=Bm.SocialLogin,e.newCredential.kennung="",e.newCredential.secret="",e.newCredential.provider="google",e.newCredential.userIdFromProvider=t.id,e.addNewCredential()):(alert("Google-Login hat nicht geklappt."),console.log("Google-Login hat nicht geklappt."))})).catch((function(e){return alert("Google-Login hat nicht geklappt: "+e)}))}}]),e}()).\u0275fac=function(e){return new(e||$b)(Ra(cd),Ra(hd),Ra(Fy),Ra(jb))},$b.\u0275cmp=ht({type:$b,selectors:[["app-iam-creds-mgmt"]],decls:31,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["registrationForm","ngForm"],[1,"input-field","col","s4"],["name","credTyp",1,"browser-default",3,"ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],["for","kennung"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","secret"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"list-item-text-left"],[1,"list-item-text"],["class","btn-danger",3,"disabled","click",4,"ngIf"],[1,"btn-danger",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ma(0,"h6"),Xa(1),Ea(),Ma(2,"ul",0),xa(3,Kb,6,3,"li",1),Ea(),Fa(4,"hr",2),Ma(5,"div",3),Ma(6,"h6"),Xa(7,'Hier kannst du neue Zugangsmedien "bestellen".'),Ea(),Ma(8,"form",4,5),Va("ngSubmit",(function(){return t.addNewCredential()})),Ma(10,"div",3),Ma(11,"div",6),Ma(12,"select",7,8),Va("ngModelChange",(function(e){return t.newCredential.type=e})),xa(14,Zb,2,2,"option",9),Ea(),Ea(),Ea(),Ma(15,"div",3),Ma(16,"div",10),Ma(17,"input",11,12),Va("ngModelChange",(function(e){return t.newCredential.kennung=e})),Ea(),Ma(19,"label",13),Xa(20,"Kennung (Mussfeld, darf noch nicht existieren)"),Ea(),Ea(),Ma(21,"div",10),Ma(22,"input",14,15),Va("ngModelChange",(function(e){return t.newCredential.secret=e})),Ea(),Ma(24,"label",16),Xa(25,"Passwort (Mussfeld)"),Ea(),Ea(),Ea(),Ma(26,"div",3),Ma(27,"button",17),Xa(28,"Hinzuf\xfcgen"),Ea(),Ma(29,"button",18),Va("click",(function(){return t.linkWithGoogleLogin()})),Xa(30,"mit Google-Login verkn\xfcpfen"),Ea(),Ea(),Ea(),Ea()),2&e){var n=Aa(9);Rr(1),ts(" Hallo ",t.usersDisplayName,", das sind deine Zugangsmedien:"),Rr(2),Pa("ngForOf",t.credentials),Rr(9),Pa("ngModel",t.newCredential.type),Rr(2),Pa("ngForOf",t.enumOptions),Rr(3),Pa("ngModel",t.newCredential.kennung),Rr(5),Pa("ngModel",t.newCredential.secret),Rr(5),Pa("disabled",!n.valid)}},directives:[gc,Xh,Nd,Gh,lh,Fd,Yh,Sd,tf,of,pc,dh,mh],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:15em}.row[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),$b),Qb=function(){return["/fakes/mail-view"]};function Yb(e,t){1&e&&(Ma(0,"div"),Ma(1,"p"),Xa(2,"Um die Registrierung abzuschlie\xdfen, must du deine Email-Adresse noch verifizieren."),Ea(),Fa(3,"p"),Ma(4,"a",1),Xa(5," Dazu haben wir dir eine E-Mail mit den notwendigen Informationen gesendet. "),Ea(),Ma(6,"p",2),Xa(7,"Per Link funktioniert das nur im Prototyp. In Wirklichkeit muss er seine Mails checken..."),Ea(),Ea()),2&e&&(Rr(4),Pa("routerLink",vo(1,Qb)))}function Xb(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"ul",3),Ma(2,"li"),Xa(3,"dein Authentifizierungslevel ist: "),Ma(4,"span",4),Xa(5),Ea(),Ea(),Ea(),Fa(6,"br"),Ma(7,"p"),Xa(8,"Du kannst nun auch entsprechend gesch\xfctzte Seiten aufrufen..."),Ea(),Ea()),2&e){var n=ja();Rr(5),es(n.authLevel)}}function e_(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"a",1),Xa(2,"Weiter zum eigentlichen Ziel (redirect)"),Ea(),Ea()),2&e){var n=ja();Rr(1),Pa("routerLink",n.redirectUri)}}var t_=function(){return["/iam/login"]};function n_(e,t){1&e&&(Ma(0,"div"),Ma(1,"p"),Xa(2,"Du hast dich zwar erfolgreich registriert, musst dich aber nach der Registrierung erst anmelden..."),Ea(),Ma(3,"a",1),Xa(4,"Direkt zum Login..."),Ea(),Ea()),2&e&&(Rr(3),Pa("routerLink",vo(1,t_)))}var r_,i_=((r_=function(){function e(t,n){_classCallCheck(this,e),this.principalService=t,this.settingsService=n,this.usersDisplayname="",this.action="angemeldet",this.authLevel="",this.redirectUri="",this.alreadyLoggedIn=!1,this.showVerificationNeeded=!1,this.showLinkToLoginPage=!1}return _createClass(e,[{key:"ngOnInit",value:function(){if(this.alreadyLoggedIn=this.principalService.isLoggedIn(),window&&window.history&&window.history.state){var e=window.history.state.actionDone;(null==e?void 0:e.toLowerCase().includes("regist"))&&(this.action="registriert",this.settingsService.setTitle("Erfolgreich registriert..."),this.showVerificationNeeded=this.settingsService.registeredAccountMustBeVerifiedByMail())}this.redirectUri=this.settingsService.getRedirectUri(),this.alreadyLoggedIn?(this.usersDisplayname=this.principalService.getUsersDisplayName(),this.authLevel=this.principalService.getAuthLevelAsString(),this.settingsService.setTitle("Erfolgreich angemeldet...")):this.showVerificationNeeded?this.redirectUri="":this.settingsService.afterRegistrationLoginIsRequired()?this.showLinkToLoginPage=!0:this.redirectUri||(this.showLinkToLoginPage=!0)}}]),e}()).\u0275fac=function(e){return new(e||r_)(Ra(hd),Ra(cd))},r_.\u0275cmp=ht({type:r_,selectors:[["app-iam-successful-registration"]],decls:11,vars:6,consts:[[4,"ngIf"],[2,"font-size","larger",3,"routerLink"],[2,"font-size","smaller"],[1,"browser-default"],[2,"font-weight","bold"]],template:function(e,t){1&e&&(Ma(0,"h4"),Xa(1),Ea(),Ma(2,"h5"),Xa(3,"Herzlich willkommen in unserem \xd6kosystem."),Ea(),Fa(4,"br"),Ma(5,"h6"),Xa(6),Ea(),xa(7,Yb,8,2,"div",0),xa(8,Xb,9,1,"div",0),xa(9,e_,3,1,"div",0),xa(10,n_,5,2,"div",0)),2&e&&(Rr(1),ts("Hallo ",t.usersDisplayname,""),Rr(5),ts("Du hast dich erfolgreich ",t.action,"."),Rr(1),Pa("ngIf",t.showVerificationNeeded),Rr(1),Pa("ngIf",t.alreadyLoggedIn),Rr(1),Pa("ngIf",t.redirectUri),Rr(1),Pa("ngIf",t.showLinkToLoginPage))},directives:[pc,Mp],styles:[""]}),r_);function a_(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"h5",3),Xa(2),Ea(),Ea()),2&e){var n=ja();Rr(2),ts(" Hallo ",n.displayName,", herzlich willkommen auf unserer Plattform.")}}function s_(e,t){1&e&&(Ma(0,"div"),Ma(1,"h5",3),Xa(2," Herzlich willkommen auf unserer Plattform."),Ea(),Ea())}function o_(e,t){if(1&e&&(Ma(0,"span",6),Xa(1),Ea()),2&e){var n=ja().$implicit;Rr(1),es(n.newBadgeCount)}}function u_(e,t){if(1&e){var n=Na();Ma(0,"li"),Ma(1,"a",4),Va("click",(function(){qt(n);var e=t.$implicit;return ja().onClick(e.text)})),Xa(2),xa(3,o_,2,1,"span",5),Ea(),Ea()}if(2&e){var r=t.$implicit;Rr(1),Pa("routerLink",r.link),Rr(1),ts(" ",r.text," "),Rr(1),Pa("ngIf",r.newBadgeCount>0)}}var c_,l_,d_=((l_=function(){function e(t,n,r,i,a,s){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.tokenService=r,this.taskService=i,this.eventService=a,this.router=s,this.isActive=!0,this.loggedIn=!1,this.displayName="",this.availableLinks=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(wm((function(){return e.isActive}))).subscribe((function(t){return e.initMembers(t)})),this.initMembers()}},{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"initMembers",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==e?void 0:e.titleOnly)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.taskService.mailsAvailable();case 4:n=t.sent,this.loggedIn=this.principalService.isLoggedIn(),this.displayName=this.principalService.getUsersDisplayName(),this.availableLinks=[],this.availableLinks.push({text:"Du meldest dich an",link:"/iam/login"},{text:"Du meldest dich mittels externem IdP an",link:"/marketplace"}),this.principalService.isLoggedIn()?this.availableLinks.push({text:"Du meldest dich ab",link:""}):this.availableLinks.push({text:"Du registrierst dich",link:"/iam/register"}),this.availableLinks.push({text:"Du willst alles \xfcber dich wissen",link:"/iam/user-info"},{text:"Du verwaltest deinen Account",link:"/iam/account-management"},{text:"Du l\xe4sst dich identifizieren a la Video-Ident...",link:"/iam/identification-management"},{text:"Du l\xe4sst deine Organisation identifizieren...",link:"/iam/organization-identification-management"},{text:"Du verwaltest deine Zugangsmedien",link:"/iam/credentials-management"},{text:"Du verwaltest deine Mitgliedschaften bei Organisationen",link:"/iam/organization-management"},{text:"Du verwaltest die Benutzer deiner Organisation (incl. Admin-Rolle)",link:"/iam/organization-administration"},{text:"Du verwaltest Unterstrukturen deiner Organisation",link:"/iam/suborga-management"},{text:"Du best\xfcckst Unterstrukturen mit Benutzern und Ressourcen",link:"/iam/suborga-administration"},{text:"Du administrierst zentral die Berechtigungen deiner User",link:"/iam/central-administration"},{text:"Du vertickst eine Unterstruktur (Pseudo-MGV)",link:"/iam/pseudo-mgv"}),this.availableLinks.push({text:"Du nutzt die Belegverwaltung",link:"/folderApp/main"},{text:"Du administrierst einzelne Ordner",link:"/folderApp/admin"},{text:"Du verwaltest Lizenzen zu den Produkten",link:"/products-main"},{text:"Fibu als Beispielprodukt ohne vorherige Pr\xfcfung via Guard",link:"/generic-product/fibu"},{text:"Bilanz als Beispielprodukt mit Lizenz- und damit Loginpr\xfcfung im Guard",link:"/generic-product/bilanz"},{text:"Gehe zum Marktplatz als allgemeine Einstiegsseite",link:"/marketplace"}),n&&this.availableLinks.push({text:"Es sind Mails vorhanden",link:"/fakes/mail-view",newBadgeCount:this.taskService.getNumberOfMails()});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"onClick",value:function(e){e.includes("meldest dich ab")?this.logout():e.includes("IdP")&&this.router.navigateByUrl("tokenapp")}},{key:"logout",value:function(){this.tokenService.logout()}}]),e}()).\u0275fac=function(e){return new(e||l_)(Ra(cd),Ra(hd),Ra($k),Ra(ty),Ra(sd),Ra(Tp))},l_.\u0275cmp=ht({type:l_,selectors:[["app-oes-main"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],["data-test-id","main-greeting"],[3,"routerLink","click"],["class","new badge red","data-badge-caption","",4,"ngIf"],["data-badge-caption","",1,"new","badge","red"]],template:function(e,t){1&e&&(xa(0,a_,3,1,"div",0),xa(1,s_,3,0,"div",0),Ma(2,"h6"),Xa(3,"Du hast folgende M\xf6glichkeiten:"),Ea(),Ma(4,"ul",1),xa(5,u_,4,3,"li",2),Ea()),2&e&&(Pa("ngIf",t.loggedIn),Rr(1),Pa("ngIf",!t.loggedIn),Rr(4),Pa("ngForOf",t.availableLinks))},directives:[pc,gc,Mp],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:40em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:red}.verweise[_ngcontent-%COMP%]   .knubbel[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:2.2em;min-width:16px;text-align:rigth;margin-right:.8em;border-radius:4px 0 0 4px}.badge[_ngcontent-%COMP%]{margin-right:.5em}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}"]}),l_),h_=((c_=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.loginService=t,this.router=n,this.settingsService=r,this.taskService=i,this.authService=a}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Anmeldung"),this.initMembers()}},{key:"ngOnDestroy",value:function(){this.settingsService.resetRedirectUri()}},{key:"initMembers",value:function(){this.credential={kennung:"",secret:""}}},{key:"clearForm",value:function(){this.initMembers()}},{key:"loginWithGoogle",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.authService.signIn(Wb.PROVIDER_ID).then((function(e){return ku(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return console.log("provider: "+e.provider),console.log("id: "+e.id),n={accountId:"",type:Bm.SocialLogin,kennung:"",secret:"",provider:"google",userIdFromProvider:e.id},t.next=5,this.loginService.login(n);case 5:return r=t.sent,t.abrupt("return",this._onLogin(r));case 7:alert("not logged in..."),console.log("not logged in...");case 8:case"end":return t.stop()}}),t,this)})))})).catch((function(e){return alert("Sociallogin failed: "+e)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_fakeLoginSecretWithFakeMailId",value:function(){var e=this.taskService.getTaskInProgress();return this.taskService.resetTaskInProgress(),null==e?void 0:e.id}},{key:"_orgaSelectionNeeded",value:function(e){return!!e.availableOrgas&&e.availableOrgas.length>1}},{key:"onLogin",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._fakeLoginSecretWithFakeMailId(),e.prev=1,e.next=4,this.loginService.login(this.credential,n);case 4:t=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",void alert("Das Anmelden hat nicht geklappt: "+e.t0));case 10:t&&t.authType!==Iu.None?(this.loginService.logout(),this._orgaSelectionNeeded(t)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(t),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri()))):alert("Das Anmelden hat nicht geklappt...");case 11:case"end":return e.stop()}}),e,this,[[1,7]])})))}},{key:"_onLogin",value:function(e){e&&e.authType!==Iu.None?(this.loginService.logout(),this._orgaSelectionNeeded(e)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(e),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri()))):alert("Das Anmelden hat nicht geklappt...")}}]),e}()).\u0275fac=function(e){return new(e||c_)(Ra($k),Ra(Tp),Ra(cd),Ra(ty),Ra(jb))},c_.\u0275cmp=ht({type:c_,selectors:[["app-iam-login"]],decls:21,vars:3,consts:[[1,"mt-3",3,"ngSubmit"],["loginForm","ngForm"],[1,"input-field"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],["for","kennung"],[1,"input-field","mb-1"],["type","password","id","secret","name","secret",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","secret"],["type","button",1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"mt-2"],["routerLink","/iam/register"]],template:function(e,t){if(1&e&&(Ma(0,"form",0,1),Va("ngSubmit",(function(){return t.onLogin()})),Ma(2,"div",2),Ma(3,"input",3,4),Va("ngModelChange",(function(e){return t.credential.kennung=e})),Ea(),Ma(5,"label",5),Xa(6,"Kennung"),Ea(),Ea(),Ma(7,"div",6),Ma(8,"input",7,8),Va("ngModelChange",(function(e){return t.credential.secret=e})),Ea(),Ma(10,"label",9),Xa(11,"Passwort"),Ea(),Ea(),Ma(12,"button",10),Va("click",(function(){return t.clearForm()})),Xa(13,"Zur\xfccksetzen"),Ea(),Ma(14,"button",11),Xa(15,"Anmelden"),Ea(),Ma(16,"button",12),Va("click",(function(){return t.loginWithGoogle()})),Xa(17,"Anmelden mit Google"),Ea(),Ma(18,"h6",13),Ma(19,"a",14),Xa(20," Neu bei uns? Ab zur Registrierung... "),Ea(),Ea(),Ea()),2&e){var n=Aa(1);Rr(3),Pa("ngModel",t.credential.kennung),Rr(5),Pa("ngModel",t.credential.secret),Rr(6),Pa("disabled",!n.valid)}},directives:[Xh,Nd,Gh,Sd,tf,of,Fd,Yh,Mp],styles:["form[_ngcontent-%COMP%]{max-width:600px}"]}),c_);function f_(e,t){if(1&e){var n=Na();Ma(0,"div",2),Ma(1,"input",17,18),Va("ngModelChange",(function(e){return qt(n),ja().credential.secret=e})),Ea(),Ma(3,"label",19),Xa(4,"Passwort"),Ea(),Ea()}if(2&e){var r=ja();Rr(1),Pa("ngModel",r.credential.secret)}}function g_(e,t){if(1&e){var n=Na();Ma(0,"div",2),Ma(1,"input",20,21),Va("ngModelChange",(function(e){return qt(n),ja().credential.userIdFromProvider=e})),Ea(),Ma(3,"label",22),Xa(4,"User-ID vom Provider"),Ea(),Ea()}if(2&e){var r=ja();Rr(1),Pa("ngModel",r.credential.userIdFromProvider)("disabled",!0)}}function v_(e,t){1&e&&(Ma(0,"button",23),Xa(1,"Registrieren"),Ea()),2&e&&(ja(),Pa("disabled",!Aa(1).valid))}function p_(e,t){if(1&e){var n=Na();Ma(0,"button",24),Va("click",(function(){return qt(n),ja().startRegistrationWithGoogle()})),Xa(1,"Registrieren mit Google"),Ea()}}function m_(e,t){if(1&e){var n=Na();Ma(0,"button",24),Va("click",(function(){return qt(n),ja().finishRegistrationWithGoogle()})),Xa(1,"Registrieren mit Google abschlie\xdfen"),Ea()}}var y_,k_,b_=((k_=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.registerService=t,this.router=n,this.settingsService=r,this.authService=i,this.taskService=a,this.registrationSuccessful=!0,this.errorFromBackend="",this.registrationViaGoogle=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.initMembers(),this.settingsService.setTitle("Registrierung")}},{key:"initMembers",value:function(){this.account={name:"",email:""},this.credential={kennung:"",secret:"",type:Bm.Benutzerkonto},this.registrationSuccessful=!0,this.errorFromBackend="",this.registrationViaGoogle=!1}},{key:"clearForm",value:function(){this.initMembers()}},{key:"startRegistrationWithGoogle",value:function(){var e=this;this.authService.signIn(Wb.PROVIDER_ID).then((function(t){t?(console.log("provider: "+t.provider),console.log("id: "+t.id),e.registrationViaGoogle=!0,e.account={name:t.name,email:t.email},e.credential={kennung:"",secret:"",provider:"google",userIdFromProvider:t.id,type:Bm.SocialLogin}):(alert("Registration via Google-Login nicht erfolgreich!"),console.log("not registered with google"))})).catch((function(e){return alert("SocialRegistration failed: "+e)}))}},{key:"finishRegistrationWithGoogle",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.registerService.register(this.account,this.credential);case 2:if(!e.sent){e.next=6;break}this._finishRegistration(),e.next=7;break;case 6:this._handleRegistrationFailure();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_fakeLoginSecretWithFakeMailId",value:function(){var e=this.taskService.getTaskInProgress();return this.taskService.resetTaskInProgress(),null==e?void 0:e.id}},{key:"register",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.credential.kennung=this.account.email,t=this._fakeLoginSecretWithFakeMailId(),e.prev=2,e.next=5,this.registerService.register(this.account,this.credential,t);case 5:if(!e.sent){e.next=9;break}this._finishRegistration(),e.next=10;break;case 9:this._handleRegistrationFailure();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this._handleRegistrationFailure(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})))}},{key:"_handleRegistrationFailure",value:function(e){alert("Das Registrieren hat nicht geklappt... "+e),this.registrationViaGoogle?this.errorFromBackend="Dieser Google-Account wird schon verwendet.":(this.errorFromBackend="Die Email-Adresse muss eindeutig sein.",e&&(this.errorFromBackend=e)),this.registrationSuccessful=!1}},{key:"_finishRegistration",value:function(){this.settingsService.registeredAccountMustBeVerifiedByMail()||this.settingsService.showInfoPageAfterRegistration()?this.router.navigateByUrl("/iam/registration-successful",{state:{actionDone:"Registration"}}):this.settingsService.afterRegistrationLoginIsRequired()?this.router.navigateByUrl("/iam/login"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}}]),e}()).\u0275fac=function(e){return new(e||k_)(Ra($k),Ra(Tp),Ra(cd),Ra(jb),Ra(ty))},k_.\u0275cmp=ht({type:k_,selectors:[["app-iam-register"]],decls:26,vars:9,consts:[[1,"mt-3",3,"ngSubmit"],["registrationForm","ngForm"],[1,"input-field"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","name"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email"],["class","input-field",4,"ngIf"],[1,"alert","alert-danger",3,"hidden"],[1,"mb-1"],["id","id-btn-clear-form","type","button",1,"btn","btn-default",3,"click"],["id","id-btn-register","type","submit","class","btn btn-success mr-3",3,"disabled",4,"ngIf"],["type","button","class","btn btn-google",3,"click",4,"ngIf"],[1,"mt-2"],["routerLink","/iam/login"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","secret"],["id","providersUserId","name","providersUserId","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["providersUserId","ngModel"],["for","providersUserId"],["id","id-btn-register","type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"]],template:function(e,t){1&e&&(Ma(0,"form",0,1),Va("ngSubmit",(function(){return t.register()})),Ma(2,"div",2),Ma(3,"input",3,4),Va("ngModelChange",(function(e){return t.account.name=e})),Ea(),Ma(5,"label",5),Xa(6,"Wie m\xf6chtest du angesprochen werden? (mind. 3 Zeichen)"),Ea(),Ea(),Ma(7,"div",2),Ma(8,"input",6,7),Va("ngModelChange",(function(e){return t.account.email=e})),Ea(),Ma(10,"label",8),Xa(11,"Email (Anmeldename)"),Ea(),Ea(),xa(12,f_,5,1,"div",9),xa(13,g_,5,2,"div",9),Ma(14,"div",10),Ma(15,"p"),Xa(16),Ea(),Ea(),Fa(17,"div",11),Ma(18,"button",12),Va("click",(function(){return t.clearForm()})),Xa(19,"Zur\xfccksetzen"),Ea(),xa(20,v_,2,1,"button",13),xa(21,p_,2,0,"button",14),xa(22,m_,2,0,"button",14),Ma(23,"h6",15),Ma(24,"a",16),Xa(25," Du bist bereits registriert? Ab zum Login... "),Ea(),Ea(),Ea()),2&e&&(Rr(3),Pa("ngModel",t.account.name),Rr(5),Pa("ngModel",t.account.email),Rr(4),Pa("ngIf",!t.registrationViaGoogle),Rr(1),Pa("ngIf",t.registrationViaGoogle),Rr(1),Pa("hidden",t.registrationSuccessful),Rr(2),ts("Fehlermeldung vom Server: ",t.errorFromBackend,""),Rr(4),Pa("ngIf",!t.registrationViaGoogle),Rr(1),Pa("ngIf",!t.registrationViaGoogle),Rr(1),Pa("ngIf",t.registrationViaGoogle))},directives:[Xh,Nd,Gh,Sd,tf,rf,of,Fd,Yh,pc,Mp],styles:["form[_ngcontent-%COMP%]{max-width:600px}"]}),k_),__=((y_=function(){function e(t){_classCallCheck(this,e),this.settingsService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Information - Page not found")}}]),e}()).\u0275fac=function(e){return new(e||y_)(Ra(cd))},y_.\u0275cmp=ht({type:y_,selectors:[["app-page-not-found"]],decls:4,vars:0,template:function(e,t){1&e&&(Ma(0,"h2"),Xa(1,"Hoppla, da hast du dich wohl verirrt."),Ea(),Ma(2,"h3"),Xa(3,"Die Seite, die du aufgerufen hast, gibt es nicht."),Ea())},styles:[""]}),y_);function w_(e,t){if(1&e){var n=Na();Ma(0,"li"),Ma(1,"div",3),Ma(2,"button",4),Va("click",(function(){qt(n);var e=t.index;return ja().selectOrga(e)})),Xa(3),Ea(),Ea(),Ea()}if(2&e){var r=t.$implicit;Rr(3),ts("Anmelden f\xfcr Organisation: ",r.name,"")}}var C_,O_,I_=((O_=function(){function e(t,n,r){_classCallCheck(this,e),this.loginService=t,this.router=n,this.settingsService=r,this.accountName="",this.orgas=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Organisationsauswahl"),this.initMembers()}},{key:"initMembers",value:function(){var e,t,n,r,i,a=this;this.token=this.loginService.getTempToken(),this.accountName=null!==(n=null===(t=null===(e=this.token)||void 0===e?void 0:e.account)||void 0===t?void 0:t.name)&&void 0!==n?n:"",null===(i=null===(r=this.token)||void 0===r?void 0:r.availableOrgas)||void 0===i||i.forEach((function(e){return a.orgas.push(e)}))}},{key:"selectOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loginService.loginWithOrganization(this.orgas[e].id);case 2:this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri());case 3:case"end":return t.stop()}}),t,this)})))}},{key:"cancelLogin",value:function(){this.loginService.logout(),this.settingsService.resetRedirectUri(),this.router.navigateByUrl("")}},{key:"loginWithAccountOnly",value:function(){this.loginService.loginWithAccountOnly(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}}]),e}()).\u0275fac=function(e){return new(e||O_)(Ra($k),Ra(Tp),Ra(cd))},O_.\u0275cmp=ht({type:O_,selectors:[["app-iam-select-orga"]],decls:11,vars:2,consts:[[4,"ngFor","ngForOf"],["type","button",1,"btn","btn2","additionalButton",3,"click"],["type","button",1,"btn","cancelButton",3,"click"],[2,"display","flex"],["type","button",1,"btn","btn2",3,"click"]],template:function(e,t){1&e&&(Ma(0,"h5"),Xa(1),Ea(),Ma(2,"h6"),Xa(3,"W\xe4hle bitte die gew\xfcnschte Organisation aus:"),Ea(),Ma(4,"ul"),xa(5,w_,4,1,"li",0),Ea(),Ma(6,"button",1),Va("click",(function(){return t.loginWithAccountOnly()})),Xa(7,"Ohne Organisation anmelden"),Ea(),Fa(8,"br"),Ma(9,"button",2),Va("click",(function(){return t.cancelLogin()})),Xa(10,"Anmelden abbrechen"),Ea()),2&e&&(Rr(1),ts("Hallo ",t.accountName,", du bist in mehreren Organisationen Mitglied."),Rr(4),Pa("ngForOf",t.orgas))},directives:[gc],styles:[".btn2[_ngcontent-%COMP%]{margin-top:.5em;width:40em;text-align:left}.additionalButton[_ngcontent-%COMP%]{margin-top:-.5em}.cancelButton[_ngcontent-%COMP%]{margin-top:3em;background-color:#f08080}"]}),O_),S_=((C_=function(){function e(t,n,r,i){_classCallCheck(this,e),this.router=t,this.principalService=n,this.licenceService=r,this.settingsService=i}return _createClass(e,[{key:"_addText",value:function(e,t){return e.length>0?e+="- "+t:e=t,e}},{key:"canActivate",value:function(e,t){var n,r=!0,i="";this.settingsService.setRedirectUri(t.url),this.principalService.isLoggedIn()||(r=!1,i=this._addText(i,"Du must angemeldet sein "));var a,s,o=e.data.requiredAuthLevel;a=o,s=this.principalService.getAuthLevel(),!a||s&&(a===dd.Low||(a===dd.Medium?s!==dd.Low:a===dd.Secure&&s===dd.Secure||s===dd.HighSecure))||(r=!1,i=this._addText(i,"mindestens mit Level: "+dd[o]));var u=e.data.requiredAuthType;if(Su(u,this.principalService.getAuthType())||(r=!1,i=this._addText(i,"mindestens mit Typ: "+Iu[u])),null!==(n=e.data.checkLicenceInGuard)&&void 0!==n&&n){var c=this.principalService.getOrgaUser(),l=e.data.dataProductId;c&&+c.id>0&&l?this.licenceService.checkLicence(l,c.id)||(r=!1,i=this._addText(i,"Benutzer <"+c.name+"> hat keine Lizenz f\xfcr Produkt mit Id: "+l)):(r=!1,i=this._addText(i,"f\xfcr eine Lizenzpr\xfcfung muss man in einer Organisation angemeldet sein."))}return r?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(i),this.settingsService.showInfoPageAfterGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}]),e}()).\u0275fac=function(e){return new(e||C_)(Je(Tp),Je(hd),Je(dm),Je(cd))},C_.\u0275prov=he({token:C_,factory:C_.\u0275fac,providedIn:"root"}),C_);function x_(e,t){if(1&e){var n=Na();Ma(0,"button",43),Va("click",(function(){qt(n);var e=ja().index;return ja().removeUserFromOrga(e)})),Xa(1," Dich aus Organisation entfernen"),Ea()}}function A_(e,t){if(1&e){var n=Na();Ma(0,"button",44),Va("click",(function(){qt(n);var e=ja().index;return ja().removeUserFromOrga(e)})),Xa(1," Benutzer aus Organisation entfernen"),Ea()}if(2&e){var r=ja().$implicit;Pa("disabled",!ja().deletionOfUserAllowed(r))}}var R_=function(e){return{"foreign-user":e}};function U_(e,t){if(1&e){var n=Na();Ma(0,"li",35),Ma(1,"div",36),Va("click",(function(){qt(n);var e=t.index;return ja().enterEditMode(e)})),Ma(2,"span",37),Xa(3),Ea(),Ea(),Ma(4,"div",36),Va("click",(function(){qt(n);var e=t.index;return ja().enterEditMode(e)})),Ma(5,"span",38),Xa(6),Ea(),Ea(),Ma(7,"div",36),Va("click",(function(){qt(n);var e=t.index;return ja().enterEditMode(e)})),Ma(8,"span",39),Xa(9),Ea(),Ea(),Ma(10,"div",40),xa(11,x_,2,0,"button",41),xa(12,A_,2,1,"button",42),Ea(),Ea()}if(2&e){var r=t.$implicit,i=t.index,a=ja();Pa("ngClass",po(6,R_,a.isForeign(r))),Rr(3),ts(" ",a.getUserIdAndAdminTypeAsString(i),"\xa0 "),Rr(3),ts(" ",r.status," "),Rr(3),ts(" ",r.name," "),Rr(2),Pa("ngIf",r.id===a.principal.id),Rr(1),Pa("ngIf",r.id!==a.principal.id)}}function P_(e,t){if(1&e&&(Ma(0,"option",55),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n.type),Rr(1),ts(" ",n.text,"")}}function T_(e,t){if(1&e){var n=Na();Ma(0,"div",10),Ma(1,"div",27),Ma(2,"div",10),Ma(3,"div",45),Ma(4,"select",46,47),Va("ngModelChange",(function(e){return qt(n),ja().user2edit.adminType=e})),xa(6,P_,2,2,"option",48),Ea(),Ea(),Ma(7,"div",49),Ma(8,"input",50,51),Va("ngModelChange",(function(e){return qt(n),ja().user2edit.name=e}))("keydown.enter",(function(){return qt(n),ja().persistEditUserChanges()})),Ea(),Ma(10,"label",52),Xa(11,"Anwendernamen \xe4ndern (mind. 3 Zeichen)"),Ea(),Ea(),Ea(),Ea(),Ma(12,"button",53),Va("click",(function(){return qt(n),ja().cancelEditMode()})),Xa(13," Abbrechen "),Ea(),Ma(14,"button",54),Va("click",(function(){return qt(n),ja().persistEditUserChanges()})),Xa(15," \xdcbernehmen "),Ea(),Fa(16,"hr",3),Ea()}if(2&e){var r=Aa(9),i=ja();Rr(4),Pa("disabled",!i.changeOfAdminRoleAllowed(i.user2edit))("ngModel",i.user2edit.adminType),Rr(2),Pa("ngForOf",i.enumOptions),Rr(2),Pa("ngModel",i.user2edit.name),Rr(6),Pa("disabled",!r.valid)}}function M_(e,t){1&e&&(Ma(0,"span"),Xa(1,"(Ben\xf6tigt SuperAdmin-Rolle)"),Ea())}var E_,F_=function(e){return{active:e}},N_=((E_=function(){function e(t,n,r,i,a,s,o,u){_classCallCheck(this,e),this.settingsService=t,this.tokenService=n,this.principalService=r,this.eventService=i,this.orgaService=a,this.mailService=s,this.organizationService=o,this.router=u,this.users=[],this.usersDisplayName="",this.principalIsSuperAdmin=!1,this.mShowInviteUser=!1,this.mShowInviteForeign=!1,this.newUser={},this.nothingFound=!0,this.searchForeignInput="",this.searchResult2Display="",this.newForeignProxyUser={newName:""}}return _createClass(e,[{key:"cancelInvite",value:function(){this.showInviteUser=!1,this.showInviteForeign=!1}},{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Organisations-Administration"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,e.next=5,this.orgaService.findOrgaById(this.principal.orgaId);case 5:return this.organization=e.sent,this.enumOptions=[{text:"Kein Administrator",type:ld.Member},{text:"Administrator",type:ld.Admin},{text:"Haupt-Administrator",type:ld.SuperAdmin}],e.next=9,this.initMembers();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.principalIsSuperAdmin=this.principalService.isSuperAdminOfCurrentOrga(),e.next=3,this.orgaService.getAllOrgaUsers(this.principal.orgaId,!1,!0);case 3:this.users=e.sent,this.cancelEditMode(),this.newUser={name:"",email:""},this.searchResult2Display="",this.searchForeignInput="",this.nothingFound=!0,this.newForeignProxyUser={newName:""};case 10:case"end":return e.stop()}}),e,this)})))}},{key:"changeOfAdminRoleAllowed",value:function(e){return!!this.principalIsSuperAdmin&&!this.isForeign(e)}},{key:"deletionOfUserAllowed",value:function(e){return!!this.principalIsSuperAdmin||!e.adminType||e.adminType===ld.Member}},{key:"enterEditMode",value:function(e){this.user2edit=Object.assign({},this.users[e]),this.user2editId=this.user2edit.id,this.user2edit.adminType||(this.user2edit.adminType=ld.Member),this.mShowInviteUser=!1,this.mShowInviteForeign=!1}},{key:"cancelEditMode",value:function(){this.user2edit=void 0,this.user2editId=""}},{key:"persistEditUserChanges",value:function(){var e,t;return ku(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,a,s,o,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(e=this.user2edit)||void 0===e?void 0:e.name){n.next=2;break}return n.abrupt("return");case 2:if(r=!1,i=!1,a=this.users.find((function(e){return e.id===u.user2editId})),s=(null===(t=this.principalService.getOrgaUser())||void 0===t?void 0:t.id)===this.user2editId,a.adminType===this.user2edit.adminType||!s){n.next=14;break}o="",n.t0=this.user2edit.adminType,n.next=n.t0===ld.Admin?9:n.t0===ld.Member?11:12;break;case 9:return o="Du degradierst dich vom SuperAdmin zum Admin. Willst du das wirklich?",n.abrupt("break",12);case 11:o="Du nimmst dir gerade alle Admin-Rechte. Willst du das wirklich?",i=!0;case 12:if(confirm(o)){n.next=14;break}return n.abrupt("return");case 14:return s&&(r=!0),n.next=17,this.orgaService.updateOrgaUser(this.user2edit);case 17:if(r&&this.eventService.publishTokenChangedEvent({type:Zk.OrgaUserDetails,orgaUser:this.user2edit}),!i){n.next=22;break}this.router.navigateByUrl("/"),n.next=24;break;case 22:return n.next=24,this.initMembers();case 24:case"end":return n.stop()}}),n,this)})))}},{key:"getUserIdAndAdminTypeAsString",value:function(e){var t=this.users[e];return t.adminType!==ld.Member?t.adminType:""}},{key:"removeUserFromOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.users[e],r=!1,this.principal.id!==n.id){t.next=6;break}if(confirm("Du l\xf6schst dich gerade selbst? \nIst das OK?")){t.next=5;break}return t.abrupt("return");case 5:r=!0;case 6:return t.next=8,this.orgaService.removeOrgaUser(n.id);case 8:if(!r){t.next=12;break}this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/"),t.next=14;break;case 12:return t.next=14,this.initMembers();case 14:case"end":return t.stop()}}),t,this)})))}},{key:"deleteOrganisation",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=confirm("Willst du wirklich die gesamte Organsation \n- mit allen Anwendern, Ressourcen und Rechten l\xf6schen?"),!e.t0){e.next=6;break}return e.next=4,this.orgaService.deleteOrganization(this.organization.id);case 4:this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/");case 6:case"end":return e.stop()}}),e,this)})))}},{key:"_inviteUserisValid",value:function(){return!(!this.newUser.name||0===this.newUser.name.trim().length||!this.newUser.email||0===this.newUser.email.trim().length)}},{key:"inviteUser",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._inviteUserisValid()){e.next=3;break}return e.abrupt("return",void alert("Name and E-Mail sind Pflichtfelder!"));case 3:return e.next=5,this.orgaService.inviteUser(this.newUser.name,this.newUser.email);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}alert("Einladen hat nicht geklappt...");case 8:return e.next=10,this.mailService.mailsAvailable();case 10:return e.next=12,this.initMembers();case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),alert(e.t1);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})))}},{key:"isForeign",value:function(e){return!(!e.foreignOrgaId&&!e.foreignUserId)}},{key:"inviteForeign",value:function(){var e;if(this.newForeignProxyUser.foreignOrganization||this.newForeignProxyUser.foreignUser){var t={id:"",name:this.newForeignProxyUser.newName,orgaId:this.organization.id,adminType:ld.Member};this.newForeignProxyUser.foreignOrganization?t.foreignOrgaId=this.newForeignProxyUser.foreignOrganization.id:t.foreignUserId=null===(e=this.newForeignProxyUser.foreignUser)||void 0===e?void 0:e.id,this.orgaService.joinOrganization(this.organization.id,t)}this.initMembers()}},{key:"getOrganizationTypeAsString",value:function(e){return Qm[e]}},{key:"_arrangeDisplaynameForFoundOrga",value:function(e){e&&e.id&&(this.principal.orgaId===e.id?this.searchResult2Display="Das ist deine eigene Organisation!":this.organizationService.foreignOrgaIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: "+this.getOrganizationTypeAsString(e.type)+")",this.newForeignProxyUser.foreignOrganization=e,this.newForeignProxyUser.newName="Orga - <"+e.name+">"))}},{key:"_arrangeDisplaynameForFoundOrgaUser",value:function(e){e&&(this.principal.orgaId===e.orgaId?this.searchResult2Display="Der Benutzer ist direktes Mitglied deiner Organisation!":this.organizationService.foreignUserIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: Anwender)",this.newForeignProxyUser.foreignUser=e,this.newForeignProxyUser.newName="User - <"+e.name+">"))}},{key:"search4ForeignUserOrOrga",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.newForeignProxyUser={newName:""},this.nothingFound=!0,!(t=+this.searchForeignInput)){e.next=9;break}return e.next=5,this.organizationService.findOrgaUserByOrgaUserId(t.toString());case 5:(n=e.sent)?this._arrangeDisplaynameForFoundOrgaUser(n):this.searchResult2Display="Benutzer nicht gefunden.",e.next=13;break;case 9:return e.next=11,this.organizationService.findOrgaByMail(this.searchForeignInput);case 11:(r=e.sent)?this._arrangeDisplaynameForFoundOrga(r):this.searchResult2Display="Organisation nicht gefunden.";case 13:case"end":return e.stop()}}),e,this)})))}},{key:"showInviteUser",get:function(){return this.mShowInviteUser},set:function(e){this.mShowInviteUser=e,this.mShowInviteUser&&(this.mShowInviteForeign=!1,this.cancelEditMode())}},{key:"showInviteForeign",get:function(){return this.mShowInviteForeign},set:function(e){this.mShowInviteForeign=e,this.mShowInviteForeign&&(this.mShowInviteUser=!1,this.cancelEditMode())}}]),e}()).\u0275fac=function(e){return new(e||E_)(Ra(cd),Ra($k),Ra(hd),Ra(sd),Ra(oy),Ra(ty),Ra(oy),Ra(Tp))},E_.\u0275cmp=ht({type:E_,selectors:[["app-iam-orga-admin"]],decls:69,vars:22,consts:[[1,"container-list"],[1,"liste"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"hr-2"],["class","row",4,"ngIf"],["for","toggle-invite"],["type","checkbox","id","toggle-invite",3,"ngModel","ngModelChange"],[1,"toggled-container",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["inviteUserForm","ngForm"],[1,"row"],[1,"input-field","col","s6"],["type","text","id","name","name","name","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","name"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email"],["type","reset",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],["for","toggle-invite-orga"],["type","checkbox","id","toggle-invite-orga",3,"ngModel","ngModelChange"],[1,"toggled-container","col","s12",3,"hidden"],[1,"row","valign-wrapper"],["type","text","placeholder","via Organisation-Mail oder User-ID suchen...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s6"],[1,"btn","btn-success",3,"click"],[1,"col","s12"],[2,"font-weight","bold","margin-right","0.5em"],["inviteForeignForm","ngForm"],["type","text","id","nameProxyForeign","name","nameProxyForeign","required","","minlength","3",1,"form-control",3,"disabled","ngModel","ngModelChange"],["nameProxyForeign","ngModel"],["for","nameProxyForeign",3,"ngClass"],[4,"ngIf"],["type","button",1,"btn","btn-default","btn-delete",3,"disabled","click"],[3,"ngClass"],[3,"click"],[1,"list-item-col-1"],[1,"list-item-col-2"],[1,"list-item-col-3"],[1,"buttons-right-div"],["class","btn-delete",3,"click",4,"ngIf"],["class","",3,"disabled","click",4,"ngIf"],[1,"btn-delete",3,"click"],[1,"",3,"disabled","click"],[1,"input-field","col","s5"],["name","credTyp",1,"browser-default",3,"disabled","ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s7"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],["for","editName"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ma(0,"div",0),Ma(1,"p"),Xa(2),Ea(),Ma(3,"ul",1),xa(4,U_,13,8,"li",2),Ea(),Fa(5,"hr",3),xa(6,T_,17,5,"div",4),Ma(7,"div"),Ma(8,"label",5),Ma(9,"input",6),Va("ngModelChange",(function(e){return t.showInviteUser=e})),Ea(),Ma(10,"span"),Xa(11),Ea(),Ea(),Ea(),Ma(12,"div",7),Ma(13,"form",8,9),Va("ngSubmit",(function(){return t.inviteUser()})),Ma(15,"div",10),Ma(16,"div",11),Ma(17,"input",12,13),Va("ngModelChange",(function(e){return t.newUser.name=e})),Ea(),Ma(19,"label",14),Xa(20,"Name des Mitarbeiters"),Ea(),Ea(),Ma(21,"div",11),Ma(22,"input",15,16),Va("ngModelChange",(function(e){return t.newUser.email=e})),Ea(),Ma(24,"label",17),Xa(25,"Adresse f\xfcr Einladungs-Mail"),Ea(),Ea(),Ea(),Ma(26,"button",18),Va("click",(function(){return t.cancelInvite()})),Xa(27," Abbrechen "),Ea(),Ma(28,"button",19),Xa(29,"Benutzer einladen"),Ea(),Ea(),Ea(),Fa(30,"hr",3),Ma(31,"div"),Ma(32,"label",20),Ma(33,"input",21),Va("ngModelChange",(function(e){return t.showInviteForeign=e})),Ea(),Ma(34,"span"),Xa(35),Ea(),Ea(),Ea(),Ma(36,"div",22),Ma(37,"div",23),Ma(38,"div",11),Ma(39,"input",24),Va("ngModelChange",(function(e){return t.searchForeignInput=e}))("keydown.enter",(function(){return t.search4ForeignUserOrOrga()})),Ea(),Ea(),Ma(40,"div",25),Ma(41,"button",26),Va("click",(function(){return t.search4ForeignUserOrOrga()})),Xa(42," Suchen "),Ea(),Ea(),Ea(),Ma(43,"div",10),Ma(44,"div",27),Ma(45,"span",28),Xa(46,"Suchergebnis: "),Ea(),Ma(47,"span"),Xa(48),Ea(),Ea(),Ea(),Ma(49,"form",8,29),Va("ngSubmit",(function(){return t.inviteForeign()})),Ma(51,"div",23),Ma(52,"div",11),Ma(53,"input",30,31),Va("ngModelChange",(function(e){return t.newForeignProxyUser.newName=e})),Ea(),Ma(55,"label",32),Xa(56,"Bezeichnung des Stellvertreters"),Ea(),Ea(),Ma(57,"div",25),Ma(58,"button",18),Va("click",(function(){return t.cancelInvite()})),Xa(59," Abbrechen "),Ea(),Ma(60,"button",19),Xa(61,"einladen"),Ea(),Ea(),Ea(),Ea(),Ea(),Ma(62,"div",27),Fa(63,"hr",3),Ma(64,"p"),Xa(65,"Hier kannst du die komplette Organisation l\xf6schen. "),xa(66,M_,2,0,"span",33),Ea(),Ma(67,"button",34),Va("click",(function(){return t.deleteOrganisation()})),Xa(68,"Organisation l\xf6schen"),Ea(),Ea(),Ea()),2&e){var n=Aa(14),r=Aa(50);Rr(2),ts("Hier verwaltest du die Mitglieder von <",null==t.organization?null:t.organization.name,">."),Rr(2),Pa("ngForOf",t.users),Rr(2),Pa("ngIf",t.user2edit),Rr(3),Pa("ngModel",t.showInviteUser),Rr(2),es(t.showInviteUser?"<Benutzer einladen> ausblenden":"<Benutzer einladen> einblenden"),Rr(1),Pa("hidden",!t.showInviteUser),Rr(5),Pa("ngModel",t.newUser.name),Rr(5),Pa("ngModel",t.newUser.email),Rr(6),Pa("disabled",!n.valid),Rr(5),Pa("ngModel",t.showInviteForeign),Rr(2),es(t.showInviteUser?"<mit anderer Organisation oder Benutzer aus anderer Organisation zusammenarbeiten> ausblenden":"<mit anderer Organisation oder Benutzer aus anderer Organisation zusammenarbeiten> einblenden"),Rr(1),Pa("hidden",!t.showInviteForeign),Rr(3),Pa("ngModel",t.searchForeignInput),Rr(9),es(t.searchResult2Display),Rr(5),Pa("disabled",t.nothingFound)("ngModel",t.newForeignProxyUser.newName),Rr(2),Pa("ngClass",po(20,F_,t.newForeignProxyUser.newName)),Rr(5),Pa("disabled",t.nothingFound||!r.valid),Rr(6),Pa("ngIf",!t.principalIsSuperAdmin),Rr(1),Pa("disabled",!t.principalIsSuperAdmin)}},directives:[gc,pc,Cd,Fd,Yh,Xh,Nd,Gh,Sd,tf,rf,hc,lh,of,dh,mh],styles:[".liste[_ngcontent-%COMP%], .liste[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:70em}.liste[_ngcontent-%COMP%]   .foreign-user[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-col-1[_ngcontent-%COMP%], .list-item-col-2[_ngcontent-%COMP%], .list-item-col-3[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.list-item-col-1[_ngcontent-%COMP%]{margin-left:.7rem;width:10rem;float:left;font-weight:700}.list-item-col-2[_ngcontent-%COMP%]{width:15em;float:left}.list-item-col-3[_ngcontent-%COMP%]{width:30em;float:left}.buttons-right-div[_ngcontent-%COMP%]{float:right;margin-right:.7em}.liste[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.row[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),E_);function D_(e,t){if(1&e&&(Ma(0,"option",16),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n),Rr(1),ts(" ",n.name,"")}}function z_(e,t){if(1&e&&(Ma(0,"option",16),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n),Rr(1),ts(" ",n.displayName,"")}}function V_(e,t){if(1&e&&(Ma(0,"option",16),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n),Rr(1),ts(" ",n.name,"")}}function B_(e,t){1&e&&(Ma(0,"div"),Ma(1,"span"),Xa(2,"Vom gew\xe4hltem Ressourcen-Typ hast du keine Ressourcen."),Ea(),Fa(3,"br"),Ma(4,"span"),Xa(5,"Weil du entweder diese App nicht lizenziert hast, oder noch keine Ressourcen diesen Typs angelegt hast."),Ea(),Ea())}function L_(e,t){if(1&e){var n=Na();Ma(0,"label",22),Ma(1,"input",23),Va("ngModelChange",(function(e){return qt(n),t.$implicit.allowed=e}))("ngModelChange",(function(){qt(n);var e=ja().index;return ja(2).onChangedPermission(e)})),Ea(),Ma(2,"span"),Xa(3),Ea(),Ea()}if(2&e){var r=t.$implicit;Rr(1),Pa("ngModel",r.allowed)("disabled",r.disabled),Rr(2),es(r.name)}}var j_=function(e){return{"foreign-resource":e}};function H_(e,t){if(1&e&&(Ma(0,"li",19),Ma(1,"span",20),Xa(2),Ea(),xa(3,L_,4,3,"label",21),Ea()),2&e){var n=t.$implicit,r=ja(2);Pa("ngClass",po(3,j_,r.isForeignResource(n))),Rr(2),ts(" ",r.getResourceDisplayName(n)," "),Rr(1),Pa("ngForOf",n.permissions)}}function G_(e,t){if(1&e&&(Ma(0,"ul",17),xa(1,H_,4,5,"li",18),Ea()),2&e){var n=ja();Rr(1),Pa("ngForOf",n.resourcesAndAccessRights)}}var W_,q_=function(e){return{"foreign-user":e}},K_=((W_=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.changeDetector=t,this.settingsService=n,this.principalService=r,this.orgaService=i,this.accessService=a,this.usersDisplayName="",this.subOrgas2Admin=[],this.users2Admin=[],this.resourceTypes2Admin=[],this.resourcesAndAccessRights=[],this.dirty=!1,this.callBackend=!1}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("zentrale Rechte-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),e.next=5,this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId);case 5:return this.subOrgas2Admin=e.sent,this.selectedSubOrga2Admin=this.subOrgas2Admin[0],e.next=9,this.accessService.getAllResourceTypes();case 9:this.resourceTypes2Admin=e.sent,this.selectedResourceType2Admin=this.resourceTypes2Admin[0],this._initMembers(!0);case 12:case"end":return e.stop()}}),e,this)})))}},{key:"_initMembers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dirty=!1,this.selectedSubOrgaId=void 0,this.selectedSubOrga2Admin&&(this.selectedSubOrgaId=this.selectedSubOrga2Admin.id),this.selectedResourceTypesId=this.selectedResourceType2Admin.type,t.t0=e&&this.selectedSubOrga2Admin,!t.t0){t.next=10;break}return t.next=8,this.orgaService.getAllOrgaUsers4SubOrga(this.principal.orgaId,this.selectedSubOrga2Admin.id);case 8:this.users2Admin=t.sent,this.users2Admin.length>0&&(this.selectedUser2Admin=this.users2Admin[0]);case 10:if(this.selectedUser2Admin&&(this.selectedUsersId=this.selectedUser2Admin.id),this.resourcesAndAccessRights=[],t.t1=void 0!==this.selectedSubOrgaId,!t.t1){t.next=17;break}return t.next=16,this.accessService.getResourcesWithPermissions(this.selectedResourceType2Admin,this.selectedUser2Admin,this.principal.orgaId,this.selectedSubOrgaId);case 16:this.resourcesAndAccessRights=t.sent;case 17:case"end":return t.stop()}}),t,this)})))}},{key:"getResourceDisplayName",value:function(e){return e.displayName}},{key:"isForeignUser",value:function(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}},{key:"isForeignResource",value:function(e){return!!e&&e.orgaId!==this.principal.orgaId}},{key:"discardChanges",value:function(){this._initMembers()}},{key:"savePermissions",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callBackend){e.next=7;break}return t=[],n={userId:this.selectedUser2Admin.id,subOrgaId:this.selectedSubOrgaId,resources:t},this.resourcesAndAccessRights.forEach((function(e){if(e.dirty){var n=e.permissions.filter((function(e){return e.allowed})).map((function(e){return e.name}));t.push({resourceId:e.id,permissions:n})}})),e.next=5,this.accessService.setPermissionsOfGivenUser(n);case 5:e.next=8;break;case 7:this.resourcesAndAccessRights.forEach((function(e){if(e.dirty){var t=e.permissions.filter((function(e){return e.allowed})).map((function(e){return e.name}));r.accessService.setPermissionsOfUser2resource(r.selectedUser2Admin,e,t,r.selectedSubOrgaId)}}));case 8:this._afterSavingPermissions();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"_afterSavingPermissions",value:function(){this.dirty=!1,this.resourcesAndAccessRights.forEach((function(e){return e.dirty=!1}))}},{key:"onChangedUser",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){var t=this.users2Admin.find((function(t){return t.id===e.selectedUsersId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=t)}this._initMembers()}},{key:"onChangedSubOrga",value:function(){var e=this;if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){var t=this.subOrgas2Admin.find((function(t){return t.id===e.selectedSubOrgaId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedSubOrga2Admin=t)}this._initMembers(!0)}},{key:"onChangedResourceType",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den Ressourcentyp wechseln und deine \xc4nderungen verwerfen?")){var t=this.resourceTypes2Admin.find((function(t){return t.type===e.selectedResourceTypesId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedResourceType2Admin=t)}this._initMembers()}},{key:"onChangedPermission",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this.dirty=!0,e>=0){var t=this.resourcesAndAccessRights[e];t&&(t.dirty=!0)}}}]),e}()).\u0275fac=function(e){return new(e||W_)(Ra($i),Ra(cd),Ra(hd),Ra(oy),Ra(Rm))},W_.\u0275cmp=ht({type:W_,selectors:[["app-iam-central-admin"]],decls:31,vars:14,consts:[[1,"mb-1"],[1,"row"],[1,"col","s12"],[1,"input-field","label-for-select","col","s5","m3"],[1,"input-field","col","s8","m5"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["name","resourceType2admin",1,"browser-default",3,"ngModel","ngModelChange"],["resourceType2adminCtrl","ngModel"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[4,"ngIf"],["class","liste",4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],["class","valign-wrapper mr-1",4,"ngFor","ngForOf"],[1,"valign-wrapper","mr-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(Ma(0,"h6",0),Xa(1),Ea(),Ma(2,"div",1),Ma(3,"div",2),Ma(4,"div",1),Ma(5,"div",3),Xa(6," Sub-Organisation w\xe4hlen: "),Ea(),Ma(7,"div",4),Ma(8,"select",5,6),Va("ngModelChange",(function(e){return t.selectedSubOrga2Admin=e}))("ngModelChange",(function(){return t.onChangedSubOrga()})),xa(10,D_,2,2,"option",7),Ea(),Ea(),Ea(),Ma(11,"div",1),Ma(12,"div",3),Xa(13," Ressourcen-Typ w\xe4hlen: "),Ea(),Ma(14,"div",4),Ma(15,"select",8,9),Va("ngModelChange",(function(e){return t.selectedResourceType2Admin=e}))("ngModelChange",(function(){return t.onChangedResourceType()})),xa(17,z_,2,2,"option",7),Ea(),Ea(),Ea(),Ma(18,"div",1),Ma(19,"div",3),Xa(20," Benutzer w\xe4hlen: "),Ea(),Ma(21,"div",4),Ma(22,"select",10,11),Va("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),xa(24,V_,2,2,"option",7),Ea(),Ea(),Ea(),Ea(),Ea(),xa(25,B_,6,0,"div",12),xa(26,G_,2,1,"ul",13),Ma(27,"button",14),Va("click",(function(){return t.discardChanges()})),Xa(28,"\xc4nderungen verwerfen"),Ea(),Ma(29,"button",15),Va("click",(function(){return t.savePermissions()})),Xa(30,"\xc4nderungen \xfcbernehmen"),Ea()),2&e&&(Rr(1),ts(" Hallo ",t.usersDisplayName,", hier kannst du die Berechtigungen f\xfcr alle deine Organisationen und alle Unterstrukturen zentral regeln."),Rr(7),Pa("ngModel",t.selectedSubOrga2Admin),Rr(2),Pa("ngForOf",t.subOrgas2Admin),Rr(5),Pa("ngModel",t.selectedResourceType2Admin),Rr(2),Pa("ngForOf",t.resourceTypes2Admin),Rr(5),Pa("ngClass",po(12,q_,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),Rr(2),Pa("ngForOf",t.users2Admin),Rr(1),Pa("ngIf",0===t.resourcesAndAccessRights.length),Rr(1),Pa("ngIf",t.resourcesAndAccessRights.length>0),Rr(1),Pa("disabled",!t.dirty),Rr(2),Pa("disabled",!t.dirty))},directives:[lh,Fd,Yh,gc,hc,pc,dh,mh,Cd],styles:[".liste[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text[_ngcontent-%COMP%], .list-item-text-left[_ngcontent-%COMP%]{width:25rem}select[_ngcontent-%COMP%]{border:3px solid teal}.foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:0!important}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem;white-space:nowrap}@media screen and (max-width:500px){.label-for-select[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;margin:0}}"]}),W_);function Z_(e,t){1&e&&(Ma(0,"div",2),Ma(1,"p"),Xa(2,"Du hast noch keine Unterstrukturen erstellt..."),Ea(),Ea())}function $_(e,t){if(1&e&&(Ma(0,"option",14),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n),Rr(1),ts(" ",n.name,"")}}var J_=function(e){return{"foreign-user":e}};function Q_(e,t){if(1&e){var n=Na();Ma(0,"li",17),Ma(1,"span",18),Xa(2),Ea(),Ma(3,"label",19),Ma(4,"input",20),Va("ngModelChange",(function(e){return qt(n),t.$implicit.isInSubOrgaNew=e}))("ngModelChange",(function(){qt(n);var e=t.index;return ja(3).onChangedUserInSubOrga(e)})),Ea(),Ma(5,"span",21),Xa(6,"in Unterstruktur"),Ea(),Ea(),Ma(7,"label",19),Ma(8,"input",22),Va("ngModelChange",(function(e){return qt(n),t.$implicit.subAdminNew=e}))("ngModelChange",(function(){qt(n);var e=t.index;return ja(3).onChangedUserSubAdmin(e)})),Ea(),Ma(9,"span",23),Xa(10,"Sub-Admin"),Ea(),Ea(),Ea()}if(2&e){var r=t.$implicit,i=t.index,a=ja(3);Pa("ngClass",po(5,J_,a.isForeignUser(r))),Rr(2),ts(" ",r.name," "),Rr(2),Pa("ngModel",r.isInSubOrgaNew),Rr(4),Pa("disabled",a.disableSubAdminCheckbox(i))("ngModel",r.subAdminNew)}}function Y_(e,t){if(1&e&&(Ma(0,"ul",15),xa(1,Q_,11,7,"li",16),Ea()),2&e){var n=ja(2);Rr(1),Pa("ngForOf",n.mixedUsers)}}var X_=function(e){return{"foreign-resource":e}};function ew(e,t){if(1&e){var n=Na();Ma(0,"li",17),Ma(1,"span",18),Xa(2),Ea(),Ma(3,"label",19),Ma(4,"input",20),Va("ngModelChange",(function(e){return qt(n),t.$implicit.isInSubOrgaNew=e}))("ngModelChange",(function(){qt(n);var e=t.index;return ja(3).onChangedResourceInSubOrga(e)})),Ea(),Ma(5,"span",21),Xa(6,"in Unterstruktur"),Ea(),Ea(),Ea()}if(2&e){var r=t.$implicit,i=ja(3);Pa("ngClass",po(3,X_,i.isForeignResource(r))),Rr(2),ts(" ",r.displayName," "),Rr(2),Pa("ngModel",r.isInSubOrgaNew)}}function tw(e,t){if(1&e&&(Ma(0,"ul",15),xa(1,ew,7,5,"li",16),Ea()),2&e){var n=ja(2);Rr(1),Pa("ngForOf",n.mixedResources)}}function nw(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"div",2),Ma(2,"div",3),Ma(3,"div",4),Ma(4,"div",5),Xa(5," Unterstruktur ausw\xe4hlen: "),Ea(),Ma(6,"div",6),Ma(7,"select",7,8),Va("ngModelChange",(function(e){return qt(n),ja().selectedSubOrga=e}))("ngModelChange",(function(){return qt(n),ja().onChangedSubOrga()})),xa(9,$_,2,2,"option",9),Ea(),Ea(),Ea(),Ea(),Ea(),Ma(10,"span",10),Xa(11,"Diese Benutzer kannst du zuteilen:"),Ea(),xa(12,Y_,2,1,"ul",11),Ma(13,"span",10),Xa(14,"Diese Resourcen kannst du zuteilen:"),Ea(),xa(15,tw,2,1,"ul",11),Ma(16,"button",12),Va("click",(function(){return qt(n),ja().discardChanges()})),Xa(17,"\xc4nderungen verwerfen"),Ea(),Ma(18,"button",13),Va("click",(function(){return qt(n),ja().saveChanges()})),Xa(19,"\xc4nderungen \xfcbernehmen"),Ea(),Ea()}if(2&e){var r=ja();Rr(7),Pa("ngModel",r.selectedSubOrga),Rr(2),Pa("ngForOf",r.subOrgas),Rr(3),Pa("ngIf",r.mixedUsers.length>0),Rr(3),Pa("ngIf",r.mixedResources.length>0),Rr(1),Pa("disabled",!r.dirty),Rr(2),Pa("disabled",!r.dirty)}}var rw,iw,aw=((iw=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.changeDetector=t,this.settingsService=n,this.principalService=r,this.orgaService=i,this.accessService=a,this.usersDisplayName="",this.subOrgas=[],this.orgaUsers=[],this.mixedUsers=[],this.orgaResources=[],this.mixedResources=[],this.dirty=!1}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Unterstruktur Best\xfcckung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),e.next=5,this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1);case 5:return this.subOrgas=e.sent,this.subOrgas.length>0&&(this.selectedSubOrga=this.subOrgas[0]),e.next=9,this.orgaService.getAllOrgaUsers(this.principal.orgaId);case 9:return this.orgaUsers=e.sent,e.next=12,this.accessService.getAllResourcesOfOrga(this.principal.orgaId);case 12:this.orgaResources=e.sent,this._initMembers();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dirty=!1,this.selectedSubOrga&&(this.selectedSubOrgaId=this.selectedSubOrga.id,this._initMixedOrgaUsers(),this._initMixedSubResources());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_initMixedOrgaUsers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mixedUsers=[],e.next=3,this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);case 3:t=e.sent,this.orgaUsers.forEach((function(e){var r=Object.assign(Object.assign({},e),{dirty:!1,subAdmin:!1,subAdminNew:!1,isInSubOrga:!1,isInSubOrgaNew:!1}),i=t.find((function(t){return t.orgaUserId===e.id}));i&&(r.subUserId=i.id,r.isInSubOrga=!0,r.isInSubOrgaNew=!0,r.subAdmin=i.subAdmin,r.subAdminNew=i.subAdmin),n.mixedUsers.push(r)}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"_initMixedSubResources",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mixedResources=[],t=[],t=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id),this.orgaResources.forEach((function(e){var r=Object.assign(Object.assign({},e),{subResourceId:"",dirty:!1,isInSubOrga:!1,isInSubOrgaNew:!1}),i=t.find((function(t){return t.orgaResourceId===e.id&&t.typeId===e.type}));i&&(r.subResourceId=i.id,r.isInSubOrga=!0,r.isInSubOrgaNew=!0),n.mixedResources.push(r)})),console.log(this.mixedResources);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"_reCalcMixedUsers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);case 2:t=e.sent,this.mixedUsers.forEach((function(e){e.dirty=!1,e.isInSubOrga=e.isInSubOrgaNew,e.subAdmin=e.subAdminNew,e.subUserId="";var n=t.find((function(t){return t.orgaUserId===e.id}));n&&(e.subUserId=n.id)}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_reCalcMixedResources",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],t=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id),this.mixedResources.forEach((function(e){e.dirty=!1,e.isInSubOrga=e.isInSubOrgaNew,e.subResourceId="";var n=t.find((function(t){return t.orgaResourceId===e.id&&t.typeId===e.type}));n&&(e.subResourceId=n.id,e.orgaId=n.orgaId)})),console.log(this.mixedResources);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"isForeignUser",value:function(e){return!(!(null==e?void 0:e.foreignOrgaId)&&!(null==e?void 0:e.foreignUserId))}},{key:"isForeignResource",value:function(e){return e.orgaId!==this.principal.orgaId}},{key:"disableSubAdminCheckbox",value:function(e){var t=this.mixedUsers[e],n=this.orgaUsers.find((function(e){return e.id===t.id}));return!t.isInSubOrgaNew||this.isForeignUser(n)}},{key:"discardChanges",value:function(){this._initMembers()}},{key:"_saveUserChanges",value:function(){var e=this,t=[];this.mixedUsers.forEach((function(n){if(n.dirty){var r={id:n.subUserId,orgaId:e.selectedSubOrga.orgaId,subOrgaId:e.selectedSubOrga.id,orgaUserId:n.id,subAdmin:n.subAdminNew};n.dirty=!1,n.isInSubOrga!==n.isInSubOrgaNew&&(n.dirty=!0,n.isInSubOrgaNew?r.id="":r.subOrgaId=""),n.subAdmin!==n.subAdminNew&&(n.dirty=!0),n.dirty&&t.push(r)}})),this.orgaService.changeSubOrgaUsers(t)}},{key:"_saveResourceChanges",value:function(){var e=this,t=[];this.mixedResources.forEach((function(n){if(n.dirty){var r={id:n.subResourceId,typeId:n.type,orgaResourceId:n.id,orgaId:e.selectedSubOrga.orgaId,subOrgaId:e.selectedSubOrgaId};n.isInSubOrga!==n.isInSubOrgaNew&&(n.isInSubOrgaNew?r.id=void 0:r.subOrgaId=void 0,t.push(r))}})),console.log(t),this.accessService.changeSubResources(this.selectedSubOrgaId,t)}},{key:"saveChanges",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._saveUserChanges(),this._saveResourceChanges(),this._afterSavingChanges();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_afterSavingChanges",value:function(){this.dirty=!1,this._reCalcMixedUsers(),this._reCalcMixedResources()}},{key:"onChangedSubOrga",value:function(){var e=this;if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){var t=this.subOrgas.find((function(t){return t.id===e.selectedSubOrgaId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedSubOrga=t)}this._initMembers()}},{key:"_onChangedUserItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mixedUsers[e];n&&(t&&!n.isInSubOrgaNew&&(n.subAdminNew=!1),n.dirty=!0,this.dirty=!0)}},{key:"onChangedUserSubAdmin",value:function(e){this._onChangedUserItem(e)}},{key:"onChangedUserInSubOrga",value:function(e){this._onChangedUserItem(e,!0)}},{key:"onChangedResourceInSubOrga",value:function(e){var t=this.mixedResources[e];t&&(t.dirty=!0,this.dirty=!0)}}]),e}()).\u0275fac=function(e){return new(e||iw)(Ra($i),Ra(cd),Ra(hd),Ra(oy),Ra(Rm))},iw.\u0275cmp=ht({type:iw,selectors:[["app-iam-sub-orga-admin"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s5"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[2,"font-weight","bold"],["class","verweise",4,"ngIf"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"],[3,"ngValue"],[1,"verweise"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text"],[1,"valign-wrapper"],["type","checkbox",1,"filled-in",3,"ngModel","ngModelChange"],[1,"first-checkbox"],["type","checkbox",1,"filled-in",3,"disabled","ngModel","ngModelChange"],[1,"second-checkbox"]],template:function(e,t){1&e&&(Ma(0,"h5"),Xa(1),Ea(),xa(2,Z_,3,0,"div",0),xa(3,nw,20,6,"div",1)),2&e&&(Rr(1),ts(" Hallo ",t.usersDisplayName,", hier kannst du deinen Unterstrukturen Benutzer und Ressourcen zuweisen."),Rr(1),Pa("ngIf",0===t.subOrgas.length),Rr(1),Pa("ngIf",t.subOrgas.length>0))},directives:[pc,lh,Fd,Yh,gc,dh,mh,hc,Cd],styles:[".verweise[_ngcontent-%COMP%]{margin:1rem 0 2rem;list-style-type:none;padding:8px;width:62rem;max-height:14rem;overflow-y:auto}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:60rem;position:relative;background-color:#eee;margin-bottom:.5rem;padding:.3rem 0;height:2.2rem;border-radius:4px}.verweise[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%], .verweise[_ngcontent-%COMP%]   .foreign-user[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:5em}.list-item-text[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:25em;text-align:left}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1em;margin-right:1em}.first-checkbox[_ngcontent-%COMP%]{float:left;width:10em;text-align:left}.second-checkbox[_ngcontent-%COMP%]{float:left;width:15em;text-align:left}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),iw),sw=((rw=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"canActivate",value:function(e,t){return window.location.href=e.data.externalUrl,!0}}]),e}()).\u0275fac=function(e){return new(e||rw)(Je(Tp))},rw.\u0275prov=he({token:rw,factory:rw.\u0275fac,providedIn:"root"}),rw);function ow(e,t){1&e&&(Ma(0,"h5"),Xa(1,"Dein Login hat nicht geklappt, ggf. gespeichertes Token abgelaufen oder ung\xfcltig..."),Ea())}function uw(e,t){if(1&e&&(Ma(0,"h5"),Xa(1),Ea()),2&e){var n=ja();Rr(1),ts("Account-Name: ",null==n.principal||null==n.principal.account?null:n.principal.account.name,"")}}var cw,lw=((cw=function(){function e(t,n,r,i,a,s){_classCallCheck(this,e),this.route=t,this.http=n,this.loginService=r,this.authService=i,this.settingsService=a,this.router=s,this.token=null,this.principal={}}return _createClass(e,[{key:"_setPrincipal",value:function(){if(this.principal){var e=Object.assign({},this.principal);this.loginService.setToken(e),this.token&&this.authService.setPrincipalAndToken(this.principal,this.token)}}},{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.queryParamMap.subscribe((function(e){return ku(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(JSON.stringify(e)),this.token=e.get("token"),console.log("Token? "+!!this.token),!this.token){t.next=17;break}return t.prev=1,n=(new Sc).set("Authorization",this.token),t.next=5,this.http.get("http://localhost:5010/pttbe/idp/principal",{headers:n}).toPromise();case 5:if(this.principal=t.sent,this._setPrincipal(),!this.settingsService.showInfoPageAfterLogin()){t.next=9;break}return t.abrupt("return",void this.router.navigateByUrl("/successful-login"));case 9:if(console.log("REDIRECT_IN_APP: "+this.settingsService.getRedirectUri()),!this.settingsService.getRedirectUri()){t.next=11;break}return t.abrupt("return",void this.router.navigateByUrl(this.settingsService.getRedirectUri()));case 11:this.router.navigateByUrl("iam/registration-successful"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),_u(t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,14]])})))}));case 1:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||cw)(Ra(Cv),Ra(tl),Ra($k),Ra(ml),Ra(cd),Ra(Tp))},cw.\u0275cmp=ht({type:cw,selectors:[["app-callback"]],decls:4,vars:2,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(Ma(0,"h5"),Xa(1,"Callback-Seite f\xfcr Antwort vom Idp-Login"),Ea(),xa(2,ow,2,0,"h5",0),xa(3,uw,2,1,"h5",0)),2&e&&(Rr(2),Pa("ngIf",!(null!=t.principal&&t.principal.account)),Rr(1),Pa("ngIf",null==t.principal?null:t.principal.account))},directives:[pc],styles:[""]}),cw);function dw(e,t){1&e&&(Ma(0,"div",4),Ma(1,"p"),Xa(2,"Du hast noch keine Unterstrukturen erstellt..."),Ea(),Ea())}function hw(e,t){if(1&e&&(Ma(0,"option",27),Xa(1),Ea()),2&e){var n=t.$implicit;Pa("ngValue",n),Rr(1),ts(" ",n.name,"")}}function fw(e,t){if(1&e&&(Ma(0,"li",30),Ma(1,"span",31),Xa(2),Ea(),Ea()),2&e){var n=t.$implicit;Rr(2),es(n.name)}}function gw(e,t){if(1&e&&(Ma(0,"ul",28),xa(1,fw,3,1,"li",29),Ea()),2&e){var n=ja(2);Rr(1),Pa("ngForOf",n.subOrgaUsers)}}function vw(e,t){if(1&e&&(Ma(0,"li",30),Ma(1,"span",31),Xa(2),Ea(),Ea()),2&e){var n=t.$implicit;Rr(2),es(n.displayName)}}function pw(e,t){if(1&e&&(Ma(0,"ul",28),xa(1,vw,3,1,"li",29),Ea()),2&e){var n=ja(2);Rr(1),Pa("ngForOf",n.subOrgaResources)}}function mw(e,t){if(1&e&&(Ma(0,"div"),Ma(1,"div",32),Ma(2,"div",33),Ma(3,"span",34),Xa(4),Ea(),Ma(5,"p"),Xa(6,"Name: "),Ma(7,"span",35),Xa(8),Ea(),Ea(),Ma(9,"p"),Xa(10,"Adresse: "),Ma(11,"span",35),Xa(12),Ea(),Ea(),Ea(),Ea(),Ea()),2&e){var n=ja(2);Rr(4),es(n.getDetailCardTitle()),Rr(4),es(null==n.firstIdentification||null==n.firstIdentification.organization?null:n.firstIdentification.organization.name),Rr(4),rs("",null==n.firstIdentification||null==n.firstIdentification.organization||null==n.firstIdentification.organization.address?null:n.firstIdentification.organization.address.street,", ",null==n.firstIdentification||null==n.firstIdentification.organization||null==n.firstIdentification.organization.address?null:n.firstIdentification.organization.address.zipCode," ",null==n.firstIdentification||null==n.firstIdentification.organization||null==n.firstIdentification.organization.address?null:n.firstIdentification.organization.address.city,"")}}function yw(e,t){if(1&e){var n=Na();Ma(0,"div"),Ma(1,"div",4),Ma(2,"div",5),Ma(3,"div",6),Ma(4,"div",7),Xa(5," Zu \xfcbertragende Struktur ausw\xe4hlen: "),Ea(),Ma(6,"div",8),Ma(7,"select",9),Va("ngModelChange",(function(e){return qt(n),ja().selectedSubOrga=e}))("ngModelChange",(function(){return qt(n),ja().onChangedSubOrga()})),xa(8,hw,2,2,"option",10),Ea(),Ea(),Ea(),Ea(),Ea(),Ma(9,"div",11),Ma(10,"div",12),Ma(11,"span",13),Xa(12),Ea(),xa(13,gw,2,1,"ul",14),Ea(),Ma(14,"div",12),Ma(15,"span",13),Xa(16),Ea(),xa(17,pw,2,1,"ul",14),Ea(),Ea(),Ma(18,"div",4),Ma(19,"div",15),Ma(20,"label"),Ma(21,"input",16),Va("ngModelChange",(function(e){return qt(n),ja().includePermissions=e})),Ea(),Ma(22,"span"),Xa(23,"Berechtigungen mit \xfcbertragen"),Ea(),Ea(),Ea(),Ea(),Ma(24,"div",11),Ma(25,"div",17),Ma(26,"input",18),Va("ngModelChange",(function(e){return qt(n),ja().foreignOrgaSearchInput=e}))("keydown.enter",(function(){return qt(n),ja().searchForeignOrga()})),Ea(),Ma(27,"label",19),Xa(28,"Mailadresse der gesuchten Organisation"),Ea(),Ea(),Ma(29,"div",20),Ma(30,"button",21),Va("click",(function(){return qt(n),ja().searchForeignOrga()})),Xa(31," Suchen"),Ea(),Ea(),Ea(),Ma(32,"div",4),Ma(33,"div",22),Ma(34,"span",23),Xa(35,"Gefundene Organisation: "),Ea(),Ma(36,"span"),Xa(37),Ea(),Ea(),Ma(38,"div",12),Ma(39,"button",24),Va("click",(function(){qt(n);var e=ja();return e.showIdentifcation=!e.showIdentifcation})),Xa(40),Ea(),Ea(),Ea(),xa(41,mw,13,5,"div",3),Ma(42,"div",25),Ma(43,"button",26),Va("click",(function(){return qt(n),ja().saveChanges()})),Xa(44," \xdcbertragungsauftrag best\xe4tigen "),Ea(),Ea(),Ea()}if(2&e){var r=ja();Rr(7),Pa("ngModel",r.selectedSubOrga),Rr(1),Pa("ngForOf",r.subOrgas),Rr(4),ts("Diese Benutzer werden mit\xfcbertragen: ",r.subOrgaUsers.length,""),Rr(1),Pa("ngIf",r.subOrgaUsers.length>0),Rr(3),ts("Diese Resourcen werden mit\xfcbertragen: ",r.subOrgaResources.length,""),Rr(1),Pa("ngIf",r.subOrgaResources.length>0),Rr(4),Pa("ngModel",r.includePermissions),Rr(5),Pa("ngModel",r.foreignOrgaSearchInput),Rr(11),es(r.searchResult2Display),Rr(2),Pa("disabled",!r.firstIdentification),Rr(1),ts(" Identifikation ",r.showIdentifcation?"ausblenden":"anzeigen"," "),Rr(1),Pa("ngIf",r.showIdentifcation),Rr(2),Pa("disabled",!r.foreignOrga)}}var kw,bw,_w=[{path:"",component:d_},{path:"iam/login",component:h_},{path:"iam/select-organization",component:I_},{path:"iam/register",component:b_},{path:"iam/registration-successful",component:i_},{path:"iam/guard-fail",component:Tb},{path:"iam/account-management",component:pb,canActivate:[S_]},{path:"iam/user-info",component:$y,canActivate:[S_]},{path:"iam/credentials-management",component:Jb,canActivate:[S_]},{path:"iam/identification-management",component:Of,canActivate:[S_]},{path:"iam/organization-identification-management",component:yf,canActivate:[lb]},{path:"iam/organization-management",component:Ob,canActivate:[S_],data:{requiredAuthLevel:dd.Low}},{path:"iam/organization-administration",component:N_,canActivate:[lb]},{path:"iam/central-administration",component:K_,canActivate:[lb],data:{allowSubAdmin:!0}},{path:"iam/suborga-management",component:Ty,canActivate:[lb]},{path:"iam/suborga-administration",component:aw,canActivate:[lb]},{path:"iam/pseudo-mgv",component:(kw=function(){function e(t,n,r,i,a,s,o){_classCallCheck(this,e),this.changeDetector=t,this.settingsService=n,this.principalService=r,this.orgaService=i,this.accessService=a,this.identService=s,this.usersDisplayName="",this.subOrgas=[],this.subOrgaUsers=[],this.subOrgaResources=[],this.foreignOrga=void 0,this.foreignOrgaSearchInput="",this.searchResult2Display="",this.firstIdentification=void 0,this.showIdentifcation=!1,this.includePermissions=!0,o.assureExists()}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Pseudo-MGV"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),e.next=5,this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1);case 5:return this.subOrgas=e.sent,this.subOrgas.length>0&&(this.selectedSubOrga=this.subOrgas[0]),e.next=9,this._initMembers();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"_initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.selectedSubOrga,!e.t0){e.next=7;break}return this.selectedSubOrgaId=this.selectedSubOrga.id,e.next=5,this.orgaService.getAllOrgaUsers4SubOrga(this.principal.orgaId,this.selectedSubOrga.id,!0);case 5:this.subOrgaUsers=e.sent,this.subOrgaResources=this.accessService.getAllResourcesOfSubOrga(this.principal.orgaId,this.selectedSubOrga.id,!0);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_arrangeDisplaynameForFoundOrga",value:function(e){return ku(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.id){t.next=10;break}if(this.principal.orgaId!==e.id){t.next=5;break}this.searchResult2Display="Das ist deine eigene Organisation!",t.next=10;break;case 5:return this.foreignOrga=e,t.next=8,this.identService.getAllIdentificationsForOrga(this.principal.orgaId);case 8:(n=t.sent).length>0&&(this.firstIdentification=n[0]),this.searchResult2Display=e.name+" (Typ: "+Qm[e.type]+")";case 10:case"end":return t.stop()}}),t,this)})))}},{key:"searchForeignOrga",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.foreignOrga=void 0,this.firstIdentification=void 0,e.next=3,this.orgaService.findOrgaByMail(this.foreignOrgaSearchInput);case 3:if(!(t=e.sent)){e.next=9;break}return e.next=7,this._arrangeDisplaynameForFoundOrga(t);case 7:e.next=10;break;case 9:this.searchResult2Display="Keine Organisation gefunden...";case 10:case"end":return e.stop()}}),e,this)})))}},{key:"getDetailCardTitle",value:function(){var e=this.firstIdentification;return e?"Identifiziert am ".concat(e.doneAt.toLocaleDateString(),"\n                    durch Anbieter ").concat(ad[e.provider]):""}},{key:"saveChanges",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.foreignOrga,!e.t0){e.next=6;break}return e.next=4,this.orgaService.executePseudoMgv(this.principal.orgaId,this.selectedSubOrgaId,this.foreignOrga.id,this.includePermissions);case 4:return e.next=6,this._initMembers();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onChangedSubOrga",value:function(){this._initMembers().then()}}]),e}(),kw.\u0275fac=function(e){return new(e||kw)(Ra($i),Ra(cd),Ra(hd),Ra(oy),Ra(Rm),Ra(vd),Ra(Jy))},kw.\u0275cmp=ht({type:kw,selectors:[["app-iam-pseudo-mgv"]],decls:8,vars:3,consts:[[1,"mb-0"],[1,"mt-0"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s3"],[1,"input-field","col","s5"],["name","subOrga2moveCtrl",1,"browser-default",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"row","mt-1"],[1,"col","s6"],[2,"font-weight","bold"],["class","verweise",4,"ngIf"],[1,"col"],["type","checkbox",1,"filled-in",3,"ngModel","ngModelChange"],[1,"input-field","col","s6"],["id","searchfield","type","text",3,"ngModel","ngModelChange","keydown.enter"],["for","searchfield"],[1,"col","s6",2,"position","relative","top","5px"],[1,"btn","btn-success",3,"click"],[1,"col","s6",2,"position","relative","top","18px"],[2,"font-weight","bold","margin-right","0.5em"],[1,"btn","btn-success",3,"disabled","click"],[1,"row","mt-2"],[1,"btn",2,"position","relative","top","-5px",3,"disabled","click"],[3,"ngValue"],[1,"verweise"],["class","valign-wrapper",4,"ngFor","ngForOf"],[1,"valign-wrapper"],[1,"list-item-text"],[1,"card","grey","lighten-4","mt-2"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],[1,"bold"]],template:function(e,t){1&e&&(Ma(0,"h5"),Xa(1),Ea(),Ma(2,"p",0),Xa(3," Dazu legst du dir eine Unterstruktur an. Best\xfcckst diese mit den Benutzern und Ressourcen, die zur anderen Organisation \xfcbertragen werden sollen.\n"),Ea(),Ma(4,"p",1),Xa(5," Danach adressierst du die andere Organisation, versicherst dich, dass es die Richtige ist und best\xe4tigst den \xdcbertragungsauftrag.\n"),Ea(),xa(6,dw,3,0,"div",2),xa(7,yw,45,13,"div",3)),2&e&&(Rr(1),ts(" Hallo ",t.usersDisplayName,", hier kannst du einen Teil deiner Organisation an eine andere Organisation \xfcbertragen."),Rr(5),Pa("ngIf",0===t.subOrgas.length),Rr(1),Pa("ngIf",t.subOrgas.length>0))},directives:[pc,lh,Fd,Yh,gc,Cd,Sd,dh,mh],styles:[".verweise[_ngcontent-%COMP%]{margin:1rem 0 2rem;list-style-type:none;padding:8px;width:32rem;max-height:14rem;overflow-y:auto}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:30rem;position:relative;background-color:#eee;margin-bottom:.5rem;padding:.3rem 0;height:2.2rem;border-radius:4px}.list-item-text[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:auto;text-align:left}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:0!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),kw),canActivate:[lb]},{path:"notification-view",component:Hk,canActivate:[S_]},{path:"fakes/mail-view",component:cb},{path:"iam/settings",component:Kk},{path:"help",component:My},{path:"products-main",component:Cy},{path:"generic-product/fibu",component:Vm,data:{dataProductId:If.FIBU}},{path:"generic-product/tax",component:Vm,data:{dataProductId:If.TAX}},{path:"generic-product/bilanz",component:Vm,canActivate:[S_],data:{requiredAuthType:Iu.OrgaUser,dataProductId:If.BILANZ,checkLicenceInGuard:!0}},{path:"marketplace",component:bm},{path:"folderApp/main",component:ck,canActivate:[S_],data:{requiredAuthLevel:dd.Low,requiredAuthType:Iu.OrgaUser}},{path:"folderApp/admin",component:nk,canActivate:[lb]},{path:"x/geschuetzt-mit-beidem-mit-parametern",component:Jb,canActivate:[S_],data:{requiredAuthLevel:dd.Secure,requiredAuthType:Iu.OrgaUser}},{path:"tokenapp",canActivate:[sw],component:sw,data:{externalUrl:"http://localhost:5010/pttbe/idp/authorize/?redirect_to=http://localhost:4200/callback&client=Gesamt-Frontend"}},{path:"callback",component:lw},{path:"**",component:__}],ww=((bw=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:bw}),bw.\u0275inj=fe({factory:function(e){return new(e||bw)},imports:[[Qp.forRoot(_w)],Qp]}),bw);function Cw(e,t){if(1&e&&(Ma(0,"span",21),Xa(1),Ea()),2&e){var n=ja();Rr(1),es(n.orgaName)}}function Ow(e,t){if(1&e&&(Ma(0,"span",22),Xa(1),Ea()),2&e){var n=ja();Rr(1),es(n.countOfNewBadgeItems)}}function Iw(e,t){1&e&&(Ma(0,"i",23),Xa(1,"arrow_drop_down"),Ea())}function Sw(e,t){if(1&e&&(Ma(0,"span",22),Xa(1),Ea()),2&e){var n=ja().$implicit;Rr(1),es(n.newCount)}}var xw=function(e){return{divider:e}};function Aw(e,t){if(1&e){var n=Na();Ma(0,"li",24),Va("click",(function(){qt(n);var e=t.index;return ja().onDropDownProfileClick(e)})),Ma(1,"a"),Xa(2),xa(3,Sw,2,1,"span",7),Ea(),Ea()}if(2&e){var r=t.$implicit;Pa("ngClass",po(3,xw,r.isDivider)),Rr(2),ts(" ",r.text," "),Rr(1),Pa("ngIf",r.newCount>0)}}var Rw,Uw=function(e,t){return{"blue darken-2":e,"teal lighten-2":t}},Pw=function(e,t){return{orange:e,"teal accent-4":t}},Tw=((Rw=function(){function e(t,n,r,i,a,s,o,u,c){_classCallCheck(this,e),this.router=t,this.principalService=n,this.tokenService=r,this.notificationService=i,this.eventService=o,this.settingsService=u,this.changeDetector=c,this.isActive=!0,this.title="Home",this.orgaName="",this.usersDisplayName="",this.useMyColors=!0,this.dropDownItems=[],this.countOfNewBadgeItems=0,this.dropdownLogoutId=9999,this.notificationTimer=1e4,a.assureServiceIsCreated(),a.setOrgaServiceHelper(s)}return _createClass(e,[{key:"ngOnInit",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(wm((function(){return t.isActive}))).subscribe((function(e){return t._onMainViewChanged(e)})),this._fakeLogin(),e.next=5,this.initMembers();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"_fakeLogin",value:function(){this.principalService.setPrincipal({account:{id:"110",name:"Klaus",email:"mail.de",verified:!0},authType:Iu.OrgaUser,orgaUser:{id:"400",name:"Klaus Heinzelmann fake",orgaId:"300",adminType:ld.Admin},organization:{id:"300",name:"Kanzlei Heinzelmann fake",email:"info@Kanzlei-Heinzelmann",type:Qm.Kanzlei}})}},{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"_onMainViewChanged",value:function(e){e.titleOnly?this.title=this.settingsService.getTitle():this.initMembers()}},{key:"initMembers",value:function(){return ku(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.title=this.settingsService.getTitle(),this.changeDetector.detectChanges(),this.countOfNewBadgeItems=0,!this.principalService.isLoggedIn()){e.next=11;break}return this.orgaName=this.principalService.getOrgaName(),this.usersDisplayName=this.principalService.getUsersDisplayName(),e.next=8,this.notificationService.getNumberOfNotificationsForCurrentPrincipal();case 8:this.countOfNewBadgeItems=e.sent,e.next=12;break;case 11:this.orgaName="",this.usersDisplayName="";case 12:this.useMyColors=!this.settingsService.useGreenLikeColors(),this.dropDownItems=[],this.principalService.isLoggedIn()&&(this.dropDownItems.push({id:1,link:"/iam/user-info",text:"User-Infos"},{isDivider:!0}),this.countOfNewBadgeItems>0&&this.dropDownItems.push({id:10,link:"/notification-view",text:"Nachrichten f\xfcr dich",newCount:this.countOfNewBadgeItems},{isDivider:!0}),this.dropDownItems.push({id:20,link:"/iam/credentials-management",text:"zu deinen Zugangsmedien"},{id:30,link:"/iam/organization-management",text:"zu deinen Mitgliedschaften"},{id:40,link:"/iam/organization-administration",text:"zur Organisations-Administration"},{id:45,link:"/iam/central-administration",text:"zur zentralen Rechte-Administration"}),this.dropDownItems.push({isDivider:!0},{id:50,link:"/folderApp/main",text:"zur Ordner-App"},{id:60,link:"/folderApp/admin",text:"zur Ordner-Administration"}),this.dropDownItems.push({isDivider:!0},{id:70,link:"/iam/login",text:"anders anmelden"},{id:this.dropdownLogoutId,text:"abmelden"}));case 15:case"end":return e.stop()}}),e,this)})))}},{key:"onProfileClick",value:function(){this.principalService.isLoggedIn||this.router.navigateByUrl("/iam/login")}},{key:"onDropDownProfileClick",value:function(e){var t=this.dropDownItems[e];if(t.id===this.dropdownLogoutId)return this.tokenService.logout(),void this.router.navigateByUrl("/");t.link&&this.router.navigateByUrl(t.link)}}]),e}()).\u0275fac=function(e){return new(e||Rw)(Ra(Tp),Ra(hd),Ra($k),Ra(ry),Ra(Rm),Ra(oy),Ra(sd),Ra(cd),Ra($i))},Rw.\u0275cmp=ht({type:Rw,selectors:[["app-root"]],decls:33,vars:14,consts:[[1,"nav-extended",3,"ngClass"],["data-test-id","header-title","routerLink","","title","zur\xfcck zur Startseite...",1,"header-text-left","ml-3"],[1,"right"],[1,"header-text"],["class","ml-3 p-1",4,"ngIf"],["data-target","dd-profile",1,"dropdown-trigger","header-text","valign-wrapper","m-3",3,"click"],["data-test-id","user-display-name"],["class","new badge red","data-badge-caption","",4,"ngIf"],["class","material-icons right",4,"ngIf"],[1,"nav-content"],["id","dd-profile",1,"dropdown-content","vertical-tabs"],["style","font-weight: 450; color: black !important",3,"ngClass","click",4,"ngFor","ngForOf"],["id","index-banner",1,"section","no-pad-bot"],[1,"container"],[1,"page-footer",3,"ngClass"],[1,"row"],[1,"col","m7","push-m1","s6"],[1,"col","m2","push-m2","s3"],["routerLink","/iam/settings",1,"white-text","mr-1"],[1,"material-icons"],["routerLink","/help",1,"white-text"],[1,"ml-3","p-1"],["data-badge-caption","",1,"new","badge","red"],[1,"material-icons","right"],[2,"font-weight","450","color","black !important",3,"ngClass","click"]],template:function(e,t){1&e&&(Ma(0,"nav",0),Ma(1,"ul"),Ma(2,"li"),Ma(3,"a",1),Xa(4),Ea(),Ea(),Ma(5,"div",2),Ma(6,"li",3),xa(7,Cw,2,1,"span",4),Ea(),Ma(8,"li"),Ma(9,"a",5),Va("click",(function(){return t.onProfileClick()})),Ma(10,"span",6),Xa(11),Ea(),xa(12,Ow,2,1,"span",7),xa(13,Iw,2,0,"i",8),Ea(),Ea(),Ea(),Ea(),Ma(14,"div",9),Ma(15,"ul",10),xa(16,Aw,4,5,"li",11),Ea(),Ea(),Ea(),Ma(17,"main"),Ma(18,"div",12),Ma(19,"div",13),Fa(20,"router-outlet"),Ea(),Ea(),Ea(),Ma(21,"footer",14),Ma(22,"div",15),Ma(23,"div",16),Ma(24,"span"),Xa(25,"Made by Klaus Hetzelein (c) 2019 - 2021"),Ea(),Ea(),Ma(26,"div",17),Ma(27,"a",18),Ma(28,"i",19),Xa(29,"settings_applications"),Ea(),Ea(),Ma(30,"a",20),Ma(31,"i",19),Xa(32,"help_outline"),Ea(),Ea(),Ea(),Ea(),Ea()),2&e&&(Pa("ngClass",mo(8,Uw,t.useMyColors,!t.useMyColors)),Rr(4),es(t.title),Rr(3),Pa("ngIf",t.orgaName.length>0),Rr(4),es(t.usersDisplayName),Rr(1),Pa("ngIf",t.countOfNewBadgeItems>0),Rr(1),Pa("ngIf",t.usersDisplayName.length>0),Rr(3),Pa("ngForOf",t.dropDownItems),Rr(5),Pa("ngClass",mo(11,Pw,t.useMyColors,!t.useMyColors)))},directives:[hc,Mp,pc,gc,Bp],styles:[".header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.5rem}.header-text[_ngcontent-%COMP%]{font-style:italic}.vertical-tabs[_ngcontent-%COMP%]{border-left:3px solid #1976d2!important;padding:0!important}.vertical-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important}.divider[_ngcontent-%COMP%]{border-bottom:2px solid #1976d2}.badge[_ngcontent-%COMP%]{margin-left:1rem}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}body[_ngcontent-%COMP%]{font-family:Roboto,Arial,sans-serif;margin:0;width:-webkit-max-content;width:-moz-max-content;width:max-content}@media screen and (max-width:540px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:42px}i.material-icons[_ngcontent-%COMP%]{line-height:42px;height:42px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.2rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}@media screen and (max-width:360px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:32px}i.material-icons[_ngcontent-%COMP%]{line-height:32px;height:32px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.1rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}"]}),Rw),Mw=new Lb([{id:Wb.PROVIDER_ID,provider:new Wb("239975901698-c4lmv7l5ku13p51014vtr4af014ejacc.apps.googleusercontent.com")}]);function Ew(){return Mw}var Fw,Nw=((Fw=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:Fw,bootstrap:[Tw]}),Fw.\u0275inj=fe({factory:function(e){return new(e||Fw)},providers:[{provide:Lb,useFactory:Ew},{provide:rl,useClass:yl,multi:!0}],imports:[[$l,pl,ww,sf,Hb]]}),Fw);(function(){if(ar)throw new Error("Cannot enable prod mode after platform setup.");ir=!1})(),Kl().bootstrapModule(Nw).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);