function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,s=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},FWf1:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=n("pshJ"),o=n("GiSu"),a=n("zB/H"),u=n("p//D"),c=n("n3uD"),l=n("MkmW"),d=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.empty;break;case 1:if(!n){s.destination=o.empty;break}if("object"==typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new h(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new h(s,n,r,i)}return s}return i(t,e),t.prototype[u.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(a.Subscription);t.Subscriber=d;var h=function(e){function t(t,n,r,i){var a,u=e.call(this)||this;u._parentSubscriber=t;var c=u;return s.isFunction(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==o.empty&&(c=Object.create(n),s.isFunction(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=a,u._error=r,u._complete=i,u}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw n;l.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(l.hostReportError(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(d);t.SafeSubscriber=h},GMZp:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,n){"use strict";var r=n("n3uD"),i=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(r.config.useDeprecatedSynchronousErrorHandling)throw e;i.hostReportError(e)},complete:function(){}}},LBXl:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},MkmW:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},mbIT:function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},n3uD:function(e,t,n){"use strict";var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"p//D":function(e,t,n){"use strict";t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},pshJ:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},"s3+Z":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=n("FWf1");t.takeWhile=function(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new o(e,t))}};var o=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.inclusive))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(s.Subscriber)},"zB/H":function(e,t,n){"use strict";var r=n("mbIT"),i=n("GMZp"),s=n("pshJ"),o=n("LBXl");function a(e){return e.reduce((function(e,t){return e.concat(t instanceof o.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,u=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var l=0;l<n.length;++l)n[l].remove(this);if(s.isFunction(u))try{u.call(this)}catch(f){t=f instanceof o.UnsubscriptionError?a(f.errors):[f]}if(r.isArray(c)){l=-1;for(var d=c.length;++l<d;){var h=c[l];if(i.isObject(h))try{h.unsubscribe()}catch(f){t=t||[],f instanceof o.UnsubscriptionError?t=t.concat(a(f.errors)):t.push(f)}}}if(t)throw new o.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var i=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function o(e){setTimeout((function(){throw e}),0)}var a={closed:!0,next:function(e){},error:function(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete:function(){}},u=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!==e&&"object"==typeof e}var l,d=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),h=((l=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o)n[o].remove(this);if(r(i))try{i.call(this)}catch(g){t=g instanceof d?f(g.errors):[g]}if(u(s))for(var a=-1,l=s.length;++a<l;){var h=s[a];if(c(h))try{h.unsubscribe()}catch(g){t=t||[],g instanceof d?t=t.concat(f(g.errors)):t.push(g)}}if(t)throw new d(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new l),l);function f(e){return e.reduce((function(e,t){return e.concat(t instanceof d?t.errors:t)}),[])}var g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;switch(_classCallCheck(this,n),(s=t.call(this)).syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=a;break;case 1:if(!e){s.destination=a;break}if("object"==typeof e){e instanceof n?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(_assertThisInitialized(s))):(s.syncErrorThrowable=!0,s.destination=new p(_assertThisInitialized(s),e));break}default:s.syncErrorThrowable=!0,s.destination=new p(_assertThisInitialized(s),e,r,i)}return s}return _createClass(n,[{key:g,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var i=new n(e,t,r);return i.syncErrorThrowable=!1,i}}]),n}(h),p=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,s,o){var u,c;_classCallCheck(this,n),(u=t.call(this))._parentSubscriber=e;var l=_assertThisInitialized(u);return r(i)?c=i:i&&(c=i.next,s=i.error,o=i.complete,i!==a&&(r((l=Object.create(i)).unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(_assertThisInitialized(u)))),u._context=l,u._next=c,u._error=s,u._complete=o,u}return _createClass(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(o(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(v),m="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(e){return e}function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k(t)}function k(e){return 0===e.length?y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var b,C=((b=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof v)return e;if(e[g])return e[g]()}return e||t||n?new v(e,t,n):new v(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof v?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=w(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:m,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:k(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=w(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new b(e)},b);function w(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var O,I=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),S=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(h),A=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).destination=e,r}return n}(v),x=((O=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:g,value:function(){return new A(this)}},{key:"lift",value:function(e){var t=new P(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new I;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new I;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new I;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new I;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new I;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new S(this,e))}},{key:"asObservable",value:function(){var e=new C;return e.source=this,e}}]),n}(C)).create=function(e,t){return new P(e,t)},O),P=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).destination=e,i.source=r,i}return _createClass(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):h.EMPTY}}]),n}(x);function T(e){return e&&"function"==typeof e.schedule}var R=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this)).parent=e,s.outerValue=r,s.outerIndex=i,s.index=0,s}return _createClass(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(v),E=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",F=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function N(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var D=function(e){if(e&&"function"==typeof e[m])return r=e,function(e){var t=r[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(F(e))return E(e);if(N(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,o),e};if(e&&"function"==typeof e[U])return t=e,function(e){for(var n=t[U]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=c(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(i," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function L(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new R(e,n,r);if(!i.closed)return t instanceof C?t.subscribe(i):D(t)(i)}var V=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(v);function z(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new j(e,t))}}var j=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new B(e,this.project,this.thisArg))}}]),e}(),B=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e)).project=r,s.count=0,s.thisArg=i||_assertThisInitialized(s),s}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(v);function H(e,t){return new C((function(n){var r=new h,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function G(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new C((function(n){var r=new h;return r.add(t.schedule((function(){var i=e[m]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(N(e))return function(e,t){return new C((function(n){var r=new h;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(F(e))return H(e,t);if(function(e){return e&&"function"==typeof e[U]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new C((function(n){var r,i=new h;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[U](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(s){return void n.error(s)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof C?e:new C(D(e))}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(K((function(n,r){return G(e(n,r)).pipe(z((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new W(e,n))})}var W=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new q(e,this.project,this.concurrent))}}]),e}(),q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.concurrent=s,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new R(this,t,n),i=this.destination;i.add(r);var s=L(this,e,void 0,void 0,r);s!==r&&i.add(s)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(V);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return K(y,e)}function $(e,t){return t?H(e,t):new C(E(e))}function J(){return function(e){return e.lift(new X(e))}}var Q,X=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new Y(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),Y=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(v),ee={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h).add(this.source.subscribe(new te(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}},{key:"refCount",value:function(){return J()(this)}}]),n}(C).prototype)._subscribe},_isComplete:{value:Q._isComplete,writable:!0},getSubject:{value:Q.getSubject},connect:{value:Q.connect},refCount:{value:Q.refCount}},te=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(A);function ne(){return new x}function re(e){return{toString:e}.toString()}function ie(e,t,n){return re((function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var s=_construct(i,t);return o.annotation=s,o;function o(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(s),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}))}var se=ie("Inject",(function(e){return{token:e}})),oe=ie("Optional"),ae=ie("Self"),ue=ie("SkipSelf"),ce=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function le(e){for(var t in e)if(e[t]===le)return t;throw Error("Could not find renamed property on target object.")}function de(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fe(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function ge(e){return ve(e,e[me])||ve(e,e[ke])}function ve(e,t){return t&&t.token===e?t:null}function pe(e){return e&&(e.hasOwnProperty(ye)||e.hasOwnProperty(be))?e[ye]:null}var me=le({"\u0275prov":le}),ye=le({"\u0275inj":le}),_e=le({"\u0275provFallback":le}),ke=le({ngInjectableDef:le}),be=le({ngInjectorDef:le});function Ce(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ce).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function we(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var Oe=le({__forward_ref__:le});function Ie(e){return e.__forward_ref__=Ie,e.toString=function(){return Ce(this())},e}function Se(e){return Ae(e)?e():e}function Ae(e){return"function"==typeof e&&e.hasOwnProperty(Oe)&&e.__forward_ref__===Ie}var xe,Pe="undefined"!=typeof globalThis&&globalThis,Te="undefined"!=typeof window&&window,Re="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ee="undefined"!=typeof global&&global,Ue=Pe||Ee||Te||Re,Me=le({"\u0275cmp":le}),Fe=le({"\u0275dir":le}),Ne=le({"\u0275pipe":le}),De=le({"\u0275mod":le}),Le=le({"\u0275loc":le}),Ve=le({"\u0275fac":le}),ze=le({__NG_ELEMENT_ID__:le}),je=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=he({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),e}(),Be=new je("INJECTOR",-1),He={},Ge=/\n/gm,Ke=le({provide:String,useValue:le}),We=void 0;function qe(e){var t=We;return We=e,t}function Ze(e){var t=xe;return xe=e,t}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default;if(void 0===We)throw new Error("inject() must be called from an injection context");return null===We?Qe(e,void 0,t):We.get(e,t&ce.Optional?null:void 0,t)}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default;return(xe||$e)(Se(e),t)}function Qe(e,t,n){var r=ge(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ce.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(Ce(e),"]"))}function Xe(e){for(var t=[],n=0;n<e.length;n++){var r=Se(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,s=ce.Default,o=0;o<r.length;o++){var a=r[o];a instanceof oe||"Optional"===a.ngMetadataName||a===oe?s|=ce.Optional:a instanceof ue||"SkipSelf"===a.ngMetadataName||a===ue?s|=ce.SkipSelf:a instanceof ae||"Self"===a.ngMetadataName||a===ae?s|=ce.Self:i=a instanceof se||a===se?a.token:a}t.push(Je(i,s))}else t.push(Je(r))}return t}var Ye=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;if(t===He){var n=new Error("NullInjectorError: No provider for ".concat(Ce(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),et=function e(){_classCallCheck(this,e)},tt=function e(){_classCallCheck(this,e)};function nt(e,t){e.forEach((function(e){return Array.isArray(e)?nt(e,t):t(e)}))}function rt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function it(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function st(e,t){var n=ot(e,t);if(n>=0)return e[1|n]}function ot(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var s=r+(i-r>>1),o=e[s<<1];if(t===o)return s<<1;o>t?i=s:r=s+1}return~(i<<1)}(e,t)}var at=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),ut=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ct={},lt=[],dt=0;function ht(e){return re((function(){var t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===at.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||lt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ut.Emulated,id:"c",styles:e.styles||lt,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.directives,o=e.features,a=e.pipes;return i.id+=dt++,i.inputs=mt(e.inputs,r),i.outputs=mt(e.outputs),o&&o.forEach((function(e){return e(i)})),i.directiveDefs=s?function(){return("function"==typeof s?s():s).map(ft)}:null,i.pipeDefs=a?function(){return("function"==typeof a?a():a).map(gt)}:null,i}))}function ft(e){return _t(e)||function(e){return e[Fe]||null}(e)}function gt(e){return function(e){return e[Ne]||null}(e)}var vt={};function pt(e){var t={type:e.type,bootstrap:e.bootstrap||lt,declarations:e.declarations||lt,imports:e.imports||lt,exports:e.exports||lt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&re((function(){vt[e.id]=e.type})),t}function mt(e,t){if(null==e)return ct;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}var yt=ht;function _t(e){return e[Me]||null}function kt(e,t){return e.hasOwnProperty(Ve)?e[Ve]:null}function bt(e,t){var n=e[De]||null;if(!n&&!0===t)throw new Error("Type ".concat(Ce(e)," does not have '\u0275mod' property."));return n}function Ct(e){return Array.isArray(e)&&"object"==typeof e[1]}function wt(e){return Array.isArray(e)&&!0===e[1]}function Ot(e){return 0!=(8&e.flags)}function It(e){return 2==(2&e.flags)}function St(e){return 1==(1&e.flags)}function At(e){return null!==e.template}function xt(e){return 0!=(512&e[2])}var Pt=void 0;function Tt(e){return!!e.listen}var Rt={createRenderer:function(e,t){return void 0!==Pt?Pt:"undefined"!=typeof document?document:void 0}};function Et(e){for(;Array.isArray(e);)e=e[0];return e}function Ut(e,t){return Et(t[e+20])}function Mt(e,t){return Et(t[e.index])}function Ft(e,t){return e.data[t+20]}function Nt(e,t){var n=t[e];return Ct(n)?n:n[0]}function Dt(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Lt(e){return 128==(128&e[2])}function Vt(e,t){return null===e||null==t?null:e[t]}function zt(e){e[18]=0}function jt(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var Bt={lFrame:un(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ht(){return Bt.bindingsEnabled}function Gt(){return Bt.lFrame.lView}function Kt(){return Bt.lFrame.tView}function Wt(e){Bt.lFrame.contextLView=e}function qt(){return Bt.lFrame.previousOrParentTNode}function Zt(e,t){Bt.lFrame.previousOrParentTNode=e,Bt.lFrame.isParent=t}function $t(){return Bt.lFrame.isParent}function Jt(){return Bt.checkNoChangesMode}function Qt(e){Bt.checkNoChangesMode=e}function Xt(){var e=Bt.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Yt(){return Bt.lFrame.bindingIndex++}function en(e){var t=Bt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function tn(e,t){var n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=e,nn(t)}function nn(e){Bt.lFrame.currentDirectiveIndex=e}function rn(e){Bt.lFrame.currentQueryIndex=e}function sn(e,t){var n=an();Bt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function on(e,t){var n=an(),r=e[1];Bt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function an(){var e=Bt.lFrame,t=null===e?null:e.child;return null===t?un(e):t}function un(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function cn(){var e=Bt.lFrame;return Bt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var ln=cn;function dn(){var e=cn();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function hn(){return Bt.lFrame.selectedIndex}function fn(e){Bt.lFrame.selectedIndex=e}function gn(){var e=Bt.lFrame;return Ft(e.tView,e.selectedIndex)}function vn(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n];i.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,i.afterContentInit),i.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,i.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i.afterContentChecked)),i.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,i.afterViewInit),i.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,i.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i.afterViewChecked)),null!=i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,i.onDestroy)}}function pn(e,t,n){_n(e,t,3,n)}function mn(e,t,n,r){(3&e[2])===n&&_n(e,t,n,r)}function yn(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function _n(e,t,n,r){for(var i=null!=r?r:-1,s=0,o=void 0!==r?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(s=t[o],null!=r&&s>=r)break}else t[o]<0&&(e[18]+=65536),(s<i||-1==i)&&(kn(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function kn(e,t,n,r){var i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];i?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,s.call(o)):s.call(o)}var bn=function e(t,n,r){_classCallCheck(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Cn(e,t,n){for(var r=Tt(e),i=0;i<n.length;){var s=n[i];if("number"==typeof s){if(0!==s)break;i++;var o=n[i++],a=n[i++],u=n[i++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{var c=s,l=n[++i];On(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function wn(e){return 3===e||4===e||6===e}function On(e){return 64===e.charCodeAt(0)}function In(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Sn(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Sn(e,t,n,r,i){var s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){var a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){var u=e[s];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function An(e){return-1!==e}function xn(e){return 32767&e}function Pn(e){return e>>16}function Tn(e,t){for(var n=Pn(e),r=t;n>0;)r=r[15],n--;return r}function Rn(e){return"string"==typeof e?e:null==e?"":""+e}function En(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Rn(e)}var Un=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ue);function Mn(e){return e instanceof Function?e():e}var Fn=!0;function Nn(e){var t=Fn;return Fn=e,t}var Dn=0;function Ln(e,t){var n=zn(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Vn(r.data,e),Vn(t,null),Vn(r.blueprint,null));var i=jn(e,t),s=e.injectorIndex;if(An(i))for(var o=xn(i),a=Tn(i,t),u=a[1].data,c=0;c<8;c++)t[s+c]=a[o+c]|u[o+c];return t[s+8]=i,s}function Vn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function zn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function jn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],r=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Bn(e,t,n){!function(e,t,n){var r="string"!=typeof n?n[ze]:n.charCodeAt(0)||0;null==r&&(r=n[ze]=Dn++);var i=255&r,s=1<<i,o=64&i,a=32&i,u=t.data;128&i?o?a?u[e+7]|=s:u[e+6]|=s:a?u[e+5]|=s:u[e+4]|=s:o?a?u[e+3]|=s:u[e+2]|=s:a?u[e+1]|=s:u[e]|=s}(e,t,n)}function Hn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[ze];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof s){sn(t,e);try{var o=s();if(null!=o||r&ce.Optional)return o;throw new Error("No provider for ".concat(En(n),"!"))}finally{ln()}}else if("number"==typeof s){if(-1===s)return new $n(e,t);var a=null,u=zn(e,t),c=-1,l=r&ce.Host?t[16][6]:null;for((-1===u||r&ce.SkipSelf)&&(c=-1===u?jn(e,t):t[u+8],Zn(r,!1)?(a=t[1],u=xn(c),t=Tn(c,t)):u=-1);-1!==u;){c=t[u+8];var d=t[1];if(qn(s,u,d.data)){var h=Kn(u,t,n,a,r,l);if(h!==Gn)return h}Zn(r,t[1].data[u+8]===l)&&qn(s,u,t)?(a=d,u=xn(c),t=Tn(c,t)):u=-1}}}if(r&ce.Optional&&void 0===i&&(i=null),0==(r&(ce.Self|ce.Host))){var f=t[9],g=Ze(void 0);try{return f?f.get(n,i,r&ce.Optional):Qe(n,i,r&ce.Optional)}finally{Ze(g)}}if(r&ce.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(En(n),"]"))}var Gn={};function Kn(e,t,n,r,i,s){var o=t[1],a=o.data[e+8],u=function(e,t,n,r,i){for(var s=e.providerIndexes,o=t.data,a=65535&s,u=e.directiveStart,c=s>>16,l=i?a+c:e.directiveEnd,d=r?a:a+c;d<l;d++){var h=o[d];if(d<u&&n===h||d>=u&&h.type===n)return d}if(i){var f=o[u];if(f&&At(f)&&f.type===n)return u}return null}(a,o,n,null==r?It(a)&&Fn:r!=o&&3===a.type,i&ce.Host&&s===a);return null!==u?Wn(t,o,u,a):Gn}function Wn(e,t,n,r){var i=e[n],s=t.data;if(i instanceof bn){var o=i;if(o.resolving)throw new Error("Circular dep for "+En(s[n]));var a,u=Nn(o.canSeeViewProviders);o.resolving=!0,o.injectImpl&&(a=Ze(o.injectImpl)),sn(e,r);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.onChanges,i=t.onInit,s=t.doCheck;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{o.injectImpl&&Ze(a),Nn(u),o.resolving=!1,ln()}}return i}function qn(e,t,n){var r=64&e,i=32&e;return!!((128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t])&1<<e)}function Zn(e,t){return!(e&ce.Self||e&ce.Host&&t)}var $n=function(){function e(t,n){_classCallCheck(this,e),this._tNode=t,this._lView=n}return _createClass(e,[{key:"get",value:function(e,t){return Hn(this._tNode,this._lView,e,void 0,t)}}]),e}();function Jn(e){return re((function(){var t=Object.getPrototypeOf(e.prototype).constructor,n=t[Ve]||function e(t){var n=t;if(Ae(t))return function(){var t=e(Se(n));return t?t():null};var r=kt(n);if(null===r){var i=pe(n);r=i&&i.factory}return r||null}(t);return null!==n?n:function(e){return new e}}))}function Qn(e){return e.ngDebugContext}function Xn(e){return e.ngOriginalError}function Yn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var er=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Yn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Qn(e)?Qn(e):this._findContext(Xn(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Xn(e);t&&Xn(t);)t=Xn(t);return t}}]),e}(),tr=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),e}();function nr(e){return e instanceof tr?e.changingThisBreaksApplicationSecurity:e}var rr=!0,ir=!1;function sr(){return ir=!0,rr}var or=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ar=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,ur=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();function cr(e){var t,n,r=(t=Gt())&&t[12];return r?r.sanitize(ur.URL,e)||"":function(e,t){var n=function(e){return e instanceof tr&&e.getTypeName()||null}(e);if(null!=n&&"URL"!==n){if("ResourceURL"===n)return!0;throw new Error("Required a safe ".concat("URL",", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return"URL"===n}(e)?nr(e):(n=Rn(e),(n=String(n)).match(or)||n.match(ar)?n:(sr()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(n," (see http://g.co/ng/security#xss)")),"unsafe:"+n))}function lr(e,t){e.__ngContext__=t}function dr(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function hr(){throw new Error("Cannot mix multi providers and regular providers")}function fr(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function gr(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==fr((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function vr(e){return 0===e.type&&"ng-template"!==e.tagName}function pr(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function mr(e,t,n){for(var r=4,i=e.attrs||[],s=function(e){for(var t=0;t<e.length;t++)if(wn(e[t]))return t;return e.length}(i),o=!1,a=0;a<t.length;a++){var u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!pr(e,u,n)||""===u&&1===t.length){if(yr(r))return!1;o=!0}}else{var c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!gr(e.attrs,c,n)){if(yr(r))return!1;o=!0}continue}var l=_r(8&r?"class":u,i,vr(e),n);if(-1===l){if(yr(r))return!1;o=!0;continue}if(""!==c){var d;d=l>s?"":i[l+1].toLowerCase();var h=8&r?d:null;if(h&&-1!==fr(h,c,0)||2&r&&c!==d){if(yr(r))return!1;o=!0}}}}else{if(!o&&!yr(r)&&!yr(u))return!1;if(o&&yr(u))continue;o=!1,r=u|1&r}}return yr(r)||o}function yr(e){return 0==(1&e)}function _r(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var s=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){for(var a=t[++i];"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function kr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(mr(e,t[r],n))return!0;return!1}function br(e,t){return e?":not("+t.trim()+")":t}function Cr(e){for(var t=e[0],n=1,r=2,i="",s=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||yr(o)||(t+=br(s,i),i=""),r=o,s=s||!yr(r);n++}return""!==i&&(t+=br(s,i)),t}var wr={};function Or(e){var t=e[3];return wt(t)?t[3]:t}function Ir(e){return Ar(e[13])}function Sr(e){return Ar(e[4])}function Ar(e){for(;null!==e&&!wt(e);)e=e[4];return e}function xr(e){Pr(Kt(),Gt(),hn()+e,Jt())}function Pr(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&pn(t,i,n)}else{var s=e.preOrderHooks;null!==s&&mn(t,s,0,n)}fn(n)}function Tr(e,t){return e<<17|t<<2}function Rr(e){return e>>17&32767}function Er(e){return 2|e}function Ur(e){return(131068&e)>>2}function Mr(e,t){return-131069&e|t<<2}function Fr(e){return 1|e}function Nr(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1];if(-1!==s){var o=e.data[s];rn(i),o.contentQueries(2,t[s],s)}}}function Dr(e,t,n){return Tt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Lr(e,t,n,r,i,s,o,a,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,zt(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function Vr(e,t,n,r,i,s){var o=n+20,a=e.data[o]||function(e,t,n,r,i,s){var o=qt(),a=$t(),u=a?o:o&&o.parent,c=e.data[n]=Zr(0,u&&u!==t?u:null,r,n,i,s);return null===e.firstChild&&(e.firstChild=c),o&&(!a||null!=o.child||null===c.parent&&2!==o.type?a||(o.next=c):o.child=c),c}(e,t,o,r,i,s);return Zt(a,!0),a}function zr(e,t,n){on(t,t[6]);try{var r=e.viewQuery;null!==r&&pi(1,r,n);var i=e.template;null!==i&&Hr(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Nr(e,t),e.staticViewQueries&&pi(2,e.viewQuery,n);var s=e.components;null!==s&&function(e,t){for(var n=0;n<t.length;n++)di(e,t[n])}(t,s)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,dn()}}function jr(e,t,n,r){var i=t[2];if(256!=(256&i)){on(t,t[6]);var s=Jt();try{zt(t),Bt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Hr(e,t,n,2,r);var o=3==(3&i);if(!s)if(o){var a=e.preOrderCheckHooks;null!==a&&pn(t,a,null)}else{var u=e.preOrderHooks;null!==u&&mn(t,u,0,null),yn(t,0)}if(function(e){for(var t=Ir(e);null!==t;t=Sr(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],s=i[3];0==(1024&i[2])&&jt(s,1),i[2]|=1024}}(t),function(e){for(var t=Ir(e);null!==t;t=Sr(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];Lt(r)&&jr(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Nr(e,t),!s)if(o){var c=e.contentCheckHooks;null!==c&&pn(t,c)}else{var l=e.contentHooks;null!==l&&mn(t,l,1),yn(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var r=e.expandoStartIndex,i=-1,s=0;s<n.length;s++){var o=n[s];"number"==typeof o?o<=0?(fn(0-o),i=r+=9+n[++s]):r+=o:(null!==o&&(tn(r,i),o(2,t[i])),i++)}}finally{fn(-1)}}(e,t);var d=e.components;null!==d&&function(e,t){for(var n=0;n<t.length;n++)li(e,t[n])}(t,d);var h=e.viewQuery;if(null!==h&&pi(2,h,r),!s)if(o){var f=e.viewCheckHooks;null!==f&&pn(t,f)}else{var g=e.viewHooks;null!==g&&mn(t,g,2),yn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,jt(t[3],-1))}finally{dn()}}}function Br(e,t,n,r){var i=t[10],s=!Jt(),o=4==(4&t[2]);try{s&&!o&&i.begin&&i.begin(),o&&zr(e,t,r),jr(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Hr(e,t,n,r,i){var s=hn();try{fn(-1),2&r&&t.length>20&&Pr(e,t,0,Jt()),n(r,i)}finally{fn(s)}}function Gr(e,t,n){Ht()&&(function(e,t,n,r){var i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Ln(n,t),lr(r,t);for(var o=n.initialInputs,a=i;a<s;a++){var u=e.data[a],c=At(u);c&&oi(t,n,u);var l=Wn(t,e,a,n);lr(l,t),null!==o&&ai(0,a-i,l,u,0,o),c&&(Nt(n.index,t)[8]=l)}}(e,t,n,Mt(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,s=e.expandoInstructions,o=e.firstCreatePass,a=n.index-20,u=Bt.lFrame.currentDirectiveIndex;try{fn(a);for(var c=r;c<i;c++){var l=e.data[c],d=t[c];nn(c),null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs?ei(l,d):o&&s.push(null)}}finally{fn(-1),nn(u)}}(e,t,n))}function Kr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt,r=t.localNames;if(null!==r)for(var i=t.index+1,s=0;s<r.length;s+=2){var o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}function Wr(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=qr(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function qr(e,t,n,r,i,s,o,a,u,c){var l=20+r,d=l+i,h=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:wr);return n}(l,d);return h[1]={type:e,id:t,blueprint:h,template:n,queries:null,viewQuery:a,node:null,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function Zr(e,t,n,r,i,s){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $r(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Jr(e,t,n,r,i,s,o,a){var u,c,l=Mt(t,n),d=t.inputs;!a&&null!=d&&(u=d[r])?(ki(e,n,u,r,i),It(t)&&function(e,t){var n=Nt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=o?o(i,t.tagName||"",r):i,Tt(s)?s.setProperty(l,r,i):On(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Qr(e,t,n,r){var i=!1;if(Ht()){var s=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var s=0;s<r.length;s++){var o=r[s];kr(n,o.selectors,!1)&&(i||(i=[]),Bn(Ln(n,t),e,o.type),At(o)?(2&n.flags&&dr(n),ni(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){var a=0;i=!0,ii(n,e.data.length,s.length);for(var u=0;u<s.length;u++){var c=s[u];c.providersResolver&&c.providersResolver(c)}ti(e,n,s.length);for(var l=!1,d=!1,h=0;h<s.length;h++){var f=s[h];n.mergedAttrs=In(n.mergedAttrs,f.hostAttrs),si(e,t,f),ri(e.data.length-1,f,o),null!==f.contentQueries&&(n.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=128),!l&&(f.onChanges||f.onInit||f.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-20),l=!0),d||!f.onChanges&&!f.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-20),d=!0),Xr(e,f),a+=f.hostVars}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,s=[],o=null,a=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs,d=null===i||vr(t)?null:ui(l,i);s.push(d),o=$r(l,u,o),a=$r(c.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n),Yr(e,t,a)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var s=n[t[i+1]];if(null==s)throw new Error("Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],s)}}(n,r,o)}return n.mergedAttrs=In(n.mergedAttrs,n.attrs),i}function Xr(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Yr(e,t,n){for(var r=0;r<n;r++)t.push(wr),e.blueprint.push(wr),e.data.push(null)}function ei(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ti(e,t,n){var r=20-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function ni(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ri(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;At(t)&&(n[""]=e)}}function ii(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function si(e,t,n){e.data.push(n);var r=n.factory||(n.factory=kt(n.type)),i=new bn(r,At(n),null);e.blueprint.push(i),t.push(i)}function oi(e,t,n){var r=Mt(t,e),i=Wr(n),s=e[10],o=hi(e,Lr(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n)));e[t.index]=o}function ai(e,t,n,r,i,s){var o=s[t];if(null!==o)for(var a=r.setInput,u=0;u<o.length;){var c=o[u++],l=o[u++],d=o[u++];null!==a?r.setInput(n,d,c,l):n[l]=d}}function ui(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function ci(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function li(e,t){var n=Nt(t,e);if(Lt(n)){var r=n[1];80&n[2]?jr(r,n,r.template,n[8]):n[5]>0&&function e(t){for(var n=Ir(t);null!==n;n=Sr(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var s=i[1];jr(s,i,s.template,i[8])}else i[5]>0&&e(i)}var o=t[1].components;if(null!==o)for(var a=0;a<o.length;a++){var u=Nt(o[a],t);Lt(u)&&u[5]>0&&e(u)}}(n)}}function di(e,t){var n=Nt(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),zr(r,n,n[8])}function hi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function fi(e){for(;e;){e[2]|=64;var t=Or(e);if(xt(e)&&!t)return e;e=t}return null}function gi(e,t,n){var r=t[10];r.begin&&r.begin();try{jr(e,t,e.template,n)}catch(i){throw _i(t,i),i}finally{r.end&&r.end()}}function vi(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Dt(n),i=r[1];Br(i,r,i.template,n)}}(e[8])}function pi(e,t,n){rn(0),t(e,n)}var mi=Promise.resolve(null);function yi(e){return e[7]||(e[7]=[])}function _i(e,t){var n=e[9],r=n?n.get(er,null):null;r&&r.handleError(t)}function ki(e,t,n,r,i){for(var s=0;s<n.length;){var o=n[s++],a=n[s++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function bi(e,t,n){var r=Ut(t,e),i=e[11];Tt(i)?i.setValue(r,n):r.textContent=n}function Ci(e,t){var n=t[3];return-1===e.index?wt(n)?n:null:n}function wi(e,t){var n=Ci(e,t);return n?Mi(t[11],n[7]):null}function Oi(e,t,n,r,i){if(null!=r){var s,o=!1;wt(r)?s=r:Ct(r)&&(o=!0,r=r[0]);var a=Et(r);0===e&&null!==n?null==i?Ei(t,n,a):Ri(t,n,a,i||null):1===e&&null!==n?Ri(t,n,a,i||null):2===e?function(e,t,n){var r=Mi(e,t);r&&function(e,t,n,r){Tt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){var s=n[7];s!==Et(n)&&Oi(t,e,r,s,i);for(var o=10;o<n.length;o++){var a=n[o];Li(a[1],a,e,t,r,s)}}(t,e,s,n,i)}}function Ii(e,t,n,r){var i=wi(e.node,t);i&&Li(e,t,t[11],n?1:2,i,r)}function Si(e,t){var n=e[9],r=n.indexOf(t);1024&t[2]&&jt(t[3],-1),n.splice(r,1)}function Ai(e,t){if(!(e.length<=10)){var n=10+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&Si(i,r),t>0&&(e[n-1][4]=r[4]);var s=it(e,10+t);Ii(r[1],r,!1,null);var o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function xi(e,t){if(!(256&t[2])){var n=t[11];Tt(n)&&n.destroyNode&&Li(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Ti(e[1],e);for(;t;){var n=null;if(Ct(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)Ct(t)&&Ti(t[1],t),t=Pi(t,e);null===t&&(t=e),Ct(t)&&Ti(t[1],t),n=t&&t[4]}t=n}}(t)}}function Pi(e,t){var n;return Ct(e)&&(n=e[6])&&2===n.type?Ci(n,e):e[3]===t?null:e[3]}function Ti(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof bn)){var s=n[r+1];if(Array.isArray(s))for(var o=0;o<s.length;o+=2)s[o+1].call(i[s[o]]);else s.call(i)}}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var r=t[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var s=n[i+1],o="function"==typeof s?s(t):Et(t[s]),a=r[n[i+2]],u=n[i+3];"boolean"==typeof u?o.removeEventListener(n[i],a,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&Tt(t[11])&&t[11].destroy();var r=t[17];if(null!==r&&wt(t[3])){r!==t[3]&&Si(r,t);var i=t[19];null!==i&&i.detachView(e)}}}function Ri(e,t,n,r){Tt(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function Ei(e,t,n){Tt(e)?e.appendChild(t,n):t.appendChild(n)}function Ui(e,t,n,r){null!==r?Ri(e,t,n,r):Ei(e,t,n)}function Mi(e,t){return Tt(e)?e.parentNode(t):t.parentNode}function Fi(e,t,n,r){var i=function(e,t,n){for(var r=t.parent;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){var i=n[6];return 2===i.type?wi(i,n):n[0]}if(t&&5===t.type&&4&t.flags)return Mt(t,n).parentNode;if(2&r.flags){var s=e.data,o=s[s[r.index].directiveStart].encapsulation;if(o!==ut.ShadowDom&&o!==ut.Native)return null}return Mt(r,n)}(e,r,t);if(null!=i){var s=t[11],o=function(e,t){if(2===e.type){var n=Ci(e,t);return null===n?null:Ni(n.indexOf(t,10)-10,n)}return 4===e.type||5===e.type?Mt(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(var a=0;a<n.length;a++)Ui(s,i,n[a],o);else Ui(s,i,n,o)}}function Ni(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return function e(t,n){if(null!==n){var r=n.type;if(3===r)return Mt(n,t);if(0===r)return Ni(-1,t[n.index]);if(4===r||5===r){var i=n.child;if(null!==i)return e(t,i);var s=t[n.index];return wt(s)?Ni(-1,s):Et(s)}var o=t[16],a=o[6],u=Or(o),c=a.projection[n.projection];return null!=c?e(u,c):e(t,n.next)}return null}(r,i)}return t[7]}function Di(e,t,n,r,i,s,o){for(;null!=n;){var a=r[n.index],u=n.type;o&&0===t&&(a&&lr(Et(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Di(e,t,n.child,r,i,s,!1),Oi(t,e,i,a,s)):1===u?Vi(e,t,r,n,i,s):Oi(t,e,i,a,s)),n=o?n.projectionNext:n.next}}function Li(e,t,n,r,i,s){Di(n,r,e.node.child,t,i,s,!1)}function Vi(e,t,n,r,i,s){var o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(var u=0;u<a.length;u++)Oi(t,e,i,a[u],s);else Di(e,t,a,o[3],i,s,!0)}function zi(e,t,n){Tt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ji(e,t,n){Tt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var Bi,Hi,Gi,Ki=function(){function e(t,n){_classCallCheck(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return _createClass(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}xi(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,n,r;t=this._lView[1],r=e,yi(n=this._lView).push(r),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(n[7].length-1,null)}},{key:"markForCheck",value:function(){fi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){gi(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){Qt(!0);try{gi(e,t,n)}finally{Qt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,Li(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,n,r,i){for(var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var o=n[r.index];if(null!==o&&i.push(Et(o)),wt(o))for(var a=10;a<o.length;a++){var u=o[a],c=u[1].firstChild;null!==c&&e(u[1],u,c,i)}var l=r.type;if(4===l||5===l)e(t,n,r.child,i);else if(1===l){var d=n[16],h=d[6].projection[r.projection];if(Array.isArray(h))i.push.apply(i,_toConsumableArray(h));else{var f=Or(d);e(f[1],f,h,i,!0)}}r=s?r.projectionNext:r.next}return i}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}(),Wi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._view=e,r}return _createClass(n,[{key:"detectChanges",value:function(){vi(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Qt(!0);try{vi(e)}finally{Qt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Ki);function qi(e,t,n){return Bi||(Bi=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(e)),new Bi(Mt(t,n))}var Zi=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return $i()},e}(),$i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n){if(!n&&It(e)){var r=Nt(e.index,t);return new Ki(r,r)}return 3===e.type||0===e.type||4===e.type||5===e.type?new Ki(t[16],t):null}(qt(),Gt(),e)},Ji=new je("Set Injector scope."),Qi={},Xi={},Yi=[],es=void 0;function ts(){return void 0===es&&(es=new Ye),es}function ns(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new rs(e,n,t||ts(),r)}var rs=function(){function e(t,n,r){var i=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&nt(n,(function(e){return i.processProvider(e,t,n)})),nt([t],(function(e){return i.processInjectorType(e,[],o)})),this.records.set(Be,os(void 0,this));var a=this.records.get(Ji);this.scope=null!=a?a.value:null,this.source=s||("object"==typeof t?null:Ce(t))}return _createClass(e,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.Default;this.assertNotDestroyed();var r,i=qe(this);try{if(!(n&ce.SkipSelf)){var s=this.records.get(e);if(void 0===s){var o=("function"==typeof(r=e)||"object"==typeof r&&r instanceof je)&&ge(e);s=o&&this.injectableDefInScope(o)?os(is(e),Qi):null,this.records.set(e,s)}if(null!=s)return this.hydrate(e,s)}return(n&ce.Self?ts():this.parent).get(e,t=n&ce.Optional&&t===He?null:t)}catch(a){if("NullInjectorError"===a.name){if((a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(Ce(e)),i)throw a;return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=Ce(t);if(Array.isArray(t))i=t.map(Ce).join(" -> ");else if("object"==typeof t){var s=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ce(a)))}i="{".concat(s.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Ge,"\n  "))}("\n"+e.message,i,"R3InjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(a,e,0,this.source)}throw a}finally{qe(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(Ce(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=Se(e)))return!1;var i=pe(e),s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==n.indexOf(o);if(void 0!==s&&(i=pe(s)),null==i)return!1;if(null!=i.imports&&!a){var u;n.push(o);try{nt(i.imports,(function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))}))}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,i=t.providers;nt(i,(function(e){return r.processProvider(e,n,i||Yi)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(o),this.records.set(o,os(i.factory,Qi));var d=i.providers;if(null!=d&&!a){var h=e;nt(d,(function(e){return r.processProvider(e,h,d)}))}return void 0!==s&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=us(e=Se(e))?e:Se(e&&e.provide),i=function(e,t,n){return as(e)?os(void 0,e.useValue):os(ss(e,t,n),Qi)}(e,t,n);if(us(e)||!0!==e.multi){var s=this.records.get(r);s&&void 0!==s.multi&&hr()}else{var o=this.records.get(r);o?void 0===o.multi&&hr():((o=os(void 0,Qi,!0)).factory=function(){return Xe(o.multi)},this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===Xi?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(Ce(e)):t.value===Qi&&(t.value=Xi,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function is(e){var t=ge(e),n=null!==t?t.factory:kt(e);if(null!==n)return n;var r=pe(e);if(null!==r)return r.factory;if(e instanceof je)throw new Error("Token ".concat(Ce(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(Ce(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[me]||e[ke]||e[_e]&&e[_e]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function ss(e,t,n){var r,i=void 0;if(us(e)){var s=Se(e);return kt(s)||is(s)}if(as(e))i=function(){return Se(e.useValue)};else if((r=e)&&r.useFactory)i=function(){return e.useFactory.apply(e,_toConsumableArray(Xe(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return Je(Se(e.useExisting))};else{var o=Se(e&&(e.useClass||e.provide));if(o||function(e,t,n){var r="";throw e&&t&&(r=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(Ce(e),"'")+r)}(t,n,e),!function(e){return!!e.deps}(e))return kt(o)||is(o);i=function(){return _construct(o,_toConsumableArray(Xe(e.deps)))}}return i}function os(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function as(e){return null!==e&&"object"==typeof e&&Ke in e}function us(e){return"function"==typeof e}var cs=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=ns(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},ls=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?cs(e,t,""):cs(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=He,e.NULL=new Ye,e.\u0275prov=he({token:e,providedIn:"any",factory:function(){return Je(Be)}}),e.__NG_ELEMENT_ID__=-1,e}(),ds=new je("AnalyzeForEntryComponents"),hs=new Map,fs=new Set;function gs(e){return"string"==typeof e?e:e.text()}function vs(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(var o=0;o<t.length;o++){var a=t[o];"number"==typeof a?s=a:1==s?i=we(i,a):2==s&&(r=we(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ps=null;function ms(){if(!ps){var e=Ue.Symbol;if(e&&e.iterator)ps=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ps=r)}}return ps}function ys(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function _s(e){return!!ks(e)&&(Array.isArray(e)||!(e instanceof Map)&&ms()in e)}function ks(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function bs(e,t,n){return e[t]=n}function Cs(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ws(e,t,n,r){var i=Cs(e,t,n);return Cs(e,t+1,r)||i}function Os(e,t,n,r){var i=Gt();return Cs(i,Yt(),t)&&(Kt(),function(e,t,n,r,i,s){var o=Mt(e,t),a=t[11];if(null==r)Tt(a)?a.removeAttribute(o,n,s):o.removeAttribute(n);else{var u=null==i?Rn(r):i(r,e.tagName||"",n);Tt(a)?a.setAttribute(o,n,u,s):s?o.setAttributeNS(s,n,u):o.setAttribute(n,u)}}(gn(),i,e,t,n,r)),Os}function Is(e,t,n,r,i,s,o,a){var u=Gt(),c=Kt(),l=e+20,d=c.firstCreatePass?function(e,t,n,r,i,s,o,a,u){var c=t.consts,l=Vr(t,n[6],e,0,o||null,Vt(c,a));Qr(t,n,l,Vt(c,u)),vn(t,l);var d=l.tViews=qr(2,-1,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c),h=Zr(0,null,2,-1,null,null);return h.injectorIndex=l.injectorIndex,d.node=h,null!==t.queries&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}(e,c,u,t,n,r,i,s,o):c.data[l];Zt(d,!1);var h=u[11].createComment("");Fi(c,u,h,d),lr(h,u),hi(u,u[l]=ci(h,u,h,d)),St(d)&&Gr(c,u,d),null!=o&&Kr(u,d,a)}function Ss(e){return function(e,t){return e[t+20]}(Bt.lFrame.contextLView,e)}function As(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default,n=Gt();return null==n?Je(e,t):Hn(qt(),n,Se(e),t)}function xs(){throw new Error("invalid")}function Ps(e,t,n){var r=Gt();return Cs(r,Yt(),t)&&Jr(Kt(),gn(),r,e,t,r[11],n,!1),Ps}function Ts(e,t,n,r,i){var s=i?"class":"style";ki(e,n,t.inputs[s],s,r)}function Rs(e,t,n,r){var i=Gt(),s=Kt(),o=20+e,a=i[11],u=i[o]=Dr(t,a,Bt.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){var a=t.consts,u=Vt(a,s),c=Vr(t,n[6],e,3,i,u);return Qr(t,n,c,Vt(a,o)),null!==c.attrs&&vs(c,c.attrs,!1),null!==c.mergedAttrs&&vs(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(e,s,i,0,t,n,r):s.data[o];Zt(c,!0);var l=c.mergedAttrs;null!==l&&Cn(a,u,l);var d=c.classes;null!==d&&ji(a,u,d);var h=c.styles;null!==h&&zi(a,u,h),Fi(s,i,u,c),0===Bt.lFrame.elementDepthCount&&lr(u,i),Bt.lFrame.elementDepthCount++,St(c)&&(Gr(s,i,c),function(e,t,n){if(Ot(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var s=e.data[i];s.contentQueries&&s.contentQueries(1,n[i],i)}}(s,c,i)),null!==r&&Kr(i,c)}function Es(){var e=qt();$t()?Bt.lFrame.isParent=!1:Zt(e=e.parent,!1);var t=e;Bt.lFrame.elementDepthCount--;var n=Kt();n.firstCreatePass&&(vn(n,e),Ot(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ts(n,t,Gt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ts(n,t,Gt(),t.stylesWithoutHost,!1)}function Us(e,t,n,r){Rs(e,t,n,r),Es()}function Ms(){return Gt()}function Fs(e){return!!e&&"function"==typeof e.then}function Ns(e){return!!e&&"function"==typeof e.subscribe}function Ds(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Gt(),s=Kt(),o=qt();return function(e,t,n,r,i,s){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7?arguments[7]:void 0,u=St(r),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),l=yi(t),d=!0;if(3===r.type){var h=Mt(r,t),f=a?a(h):ct,g=f.target||h,v=l.length,p=a?function(e){return a(Et(e[r.index])).target}:r.index;if(Tt(n)){var m=null;if(!a&&u&&(m=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var s=0;s<i.length-1;s+=2){var o=i[s];if(o===n&&i[s+1]===r){var a=t[7],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=s,m.__ngLastListenerFn__=s,d=!1;else{s=Vs(r,t,s,!1);var y=n.listen(f.name||g,i,s);l.push(s,y),c&&c.push(i,p,v,v+1)}}else s=Vs(r,t,s,!0),g.addEventListener(i,s,o),l.push(s),c&&c.push(i,p,v,o)}var _,k=r.outputs;if(d&&null!==k&&(_=k[i])){var b=_.length;if(b)for(var C=0;C<b;C+=2){var w=t[_[C]][_[C+1]].subscribe(s),O=l.length;l.push(s,w),c&&c.push(i,r.index,O,-(O+1))}}}(s,i,i[11],o,e,t,n,r),Ds}function Ls(e,t,n){try{return!1!==t(n)}catch(r){return _i(e,r),!1}}function Vs(e,t,n,r){return function i(s){if(s===Function)return n;var o=2&e.flags?Nt(e.index,t):t;0==(32&t[2])&&fi(o);for(var a=Ls(t,n,s),u=i.__ngNextListenerFn__;u;)a=Ls(t,u,s)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Bt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Bt.lFrame.contextLView))[8]}(e)}var js=[];function Bs(e,t,n,r,i){for(var s=e[n+1],o=null===t,a=r?Rr(s):Ur(s),u=!1;0!==a&&(!1===u||o);){var c=e[a+1];Hs(e[a],t)&&(u=!0,e[a+1]=r?Fr(c):Er(c)),a=r?Rr(c):Ur(c)}u&&(e[n+1]=r?Er(s):Fr(s))}function Hs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&ot(e,t)>=0}function Gs(e,t){return function(e,t,n,r){var i,s,o=Gt(),a=Kt(),u=en(2);(a.firstUpdatePass&&function(e,t,n,r){var i=e.data;if(null===i[n+1]){var s=i[hn()+20],o=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(s)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=Bt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),s=t.residualClasses;if(null===i)0===t.classBindings&&(n=Ws(n=Ks(null,e,t,n,!0),t.attrs,!0),s=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Ks(i,e,t,n,!0),null===s){var a=function(e,t,n){var r=t.classBindings;if(0!==Ur(r))return e[Rr(r)]}(e,t);void 0!==a&&Array.isArray(a)&&function(e,t,n,r){e[Rr(t.classBindings)]=r}(e,t,0,a=Ws(a=Ks(null,e,t,a[1],!0),t.attrs,!0))}else s=function(e,t,n){for(var r=void 0,i=t.directiveEnd,s=1+t.directiveStylingLast;s<i;s++)r=Ws(r,e[s].hostAttrs,!0);return Ws(r,t.attrs,!0)}(e,t)}return void 0!==s&&(t.residualClasses=s),n}(i,s,t),function(e,t,n,r,i,s){var o=t.classBindings,a=Rr(o),u=Ur(o);e[r]=n;var c,l=!1;if(Array.isArray(n)){var d=n;(null===(c=d[1])||ot(d,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var h=Rr(e[a+1]);e[r+1]=Tr(h,a),0!==h&&(e[h+1]=Mr(e[h+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Tr(a,0),0!==a&&(e[a+1]=Mr(e[a+1],r)),a=r;else e[r+1]=Tr(u,0),0===a?a=r:e[u+1]=Mr(e[u+1],r),u=r;l&&(e[r+1]=Er(e[r+1])),Bs(e,c,r,!0),Bs(e,c,r,!1),function(e,t,n,r,i){var s=e.residualClasses;null!=s&&"string"==typeof t&&ot(s,t)>=0&&(n[r+1]=Fr(n[r+1]))}(t,c,e,r),o=Tr(a,u),t.classBindings=o}(i,s,t,n,o)}}(a,e,u),t!==wr&&Cs(o,u,t))&&(null==n&&(i=null===(s=Bt.lFrame)?null:s.currentSanitizer)&&(n=i),function(e,t,n,r,i,s,o,a){if(3===t.type){var u=e.data,c=u[a+1];Zs(1==(1&c)?qs(u,t,n,i,Ur(c),!0):void 0)||(Zs(s)||2==(2&c)&&(s=qs(u,null,n,i,a,!0)),function(e,t,n,r,i){var s=Tt(e);i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r)}(r,0,Ut(hn(),n),i,s))}}(a,a.data[hn()+20],o,o[11],e,o[u+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=Ce(nr(e)))),e}(t,n),0,u))}(e,t,null),Gs}function Ks(e,t,n,r,i){var s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(r=Ws(r,(s=t[a]).hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Ws(e,t,n){var r,i,s,o,a=n?1:2,u=-1;if(null!==t)for(var c=0;c<t.length;c++){var l=t[c];"number"==typeof l?u=l:u===a&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),r=e,i=l,s=!!n||t[++c],o=void 0,(o=ot(r,i))>=0?r[1|o]=s:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(r,o=~o,i,s))}return void 0===e?null:e}function qs(e,t,n,r,i,s){for(var o=null===t,a=void 0;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l,h=n[i+1];h===wr&&(h=d?js:void 0);var f=d?st(h,r):l===r?h:void 0;if(c&&!Zs(f)&&(f=st(u,r)),Zs(f)&&(a=f,o))return a;var g=e[i+1];i=o?Rr(g):Ur(g)}if(null!==t){var v=s?t.residualClasses:t.residualStyles;null!=v&&(a=st(v,r))}return a}function Zs(e){return void 0!==e}function $s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Gt(),r=Kt(),i=e+20,s=r.firstCreatePass?Vr(r,n[6],e,3,null,null):r.data[i],o=n[i]=function(e,t){return Tt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Fi(r,n,o,s),Zt(s,!1)}function Js(e){return Qs("",e,""),Js}function Qs(e,t,n){var r=Gt(),i=function(e,t,n,r){return Cs(e,Yt(),n)?t+Rn(n)+r:wr}(r,e,t,n);return i!==wr&&bi(r,hn(),i),Qs}function Xs(e,t,n,r,i){var s=Gt(),o=function(e,t,n,r,i,s){var o=ws(e,Bt.lFrame.bindingIndex,n,i);return en(2),o?t+Rn(n)+r+Rn(i)+s:wr}(s,e,t,n,r,i);return o!==wr&&bi(s,hn(),o),Xs}function Ys(e,t,n){var r=Gt();return Cs(r,Yt(),t)&&Jr(Kt(),gn(),r,e,t,r[11],n,!0),Ys}function eo(e,t){var n=Dt(e)[1],r=n.data.length-1;vn(n,{directiveStart:r,directiveEnd:r+1})}function to(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var i=void 0;if(At(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var s=e;s.inputs=no(e.inputs),s.declaredInputs=no(e.declaredInputs),s.outputs=no(e.outputs);var o=i.hostBindings;o&&so(e,o);var a=i.viewQuery,u=i.contentQueries;if(a&&ro(e,a),u&&io(e,u),de(e.inputs,i.inputs),de(e.declaredInputs,i.declaredInputs),de(e.outputs,i.outputs),At(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}s.afterContentChecked=s.afterContentChecked||i.afterContentChecked,s.afterContentInit=e.afterContentInit||i.afterContentInit,s.afterViewChecked=e.afterViewChecked||i.afterViewChecked,s.afterViewInit=e.afterViewInit||i.afterViewInit,s.doCheck=e.doCheck||i.doCheck,s.onDestroy=e.onDestroy||i.onDestroy,s.onInit=e.onInit||i.onInit}var l=i.features;if(l)for(var d=0;d<l.length;d++){var h=l[d];h&&h.ngInherit&&h(e),h===to&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=In(i.hostAttrs,n=In(n,i.hostAttrs))}}(r)}function no(e){return e===ct?{}:e===lt?[]:e}function ro(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function io(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function so(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var oo=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function ao(e){e.type.prototype.ngOnChanges&&(e.setInput=uo,e.onChanges=function(){var e=co(this),t=e&&e.current;if(t){var n=e.previous;if(n===ct)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}})}function uo(e,t,n,r){var i=co(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ct,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new oo(u&&u.currentValue,t,o===ct),e[r]=t}function co(e){return e.__ngSimpleChanges__||null}function lo(e,t,n,r,i){if(e=Se(e),Array.isArray(e))for(var s=0;s<e.length;s++)lo(e[s],t,n,r,i);else{var o=Kt(),a=Gt(),u=us(e)?e:Se(e.provide),c=ss(e),l=qt(),d=65535&l.providerIndexes,h=l.directiveStart,f=l.providerIndexes>>16;if(us(e)||!e.multi){var g=new bn(c,i,As),v=go(u,t,i?d:d+f,h);-1===v?(Bn(Ln(l,a),o,u),ho(o,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(g),a.push(g)):(n[v]=g,a[v]=g)}else{var p=go(u,t,d+f,h),m=go(u,t,d,d+f),y=p>=0&&n[p],_=m>=0&&n[m];if(i&&!_||!i&&!y){Bn(Ln(l,a),o,u);var k=function(e,t,n,r,i){var s=new bn(e,n,As);return s.multi=[],s.index=t,s.componentProviders=0,fo(s,i,r&&!n),s}(i?po:vo,n.length,i,r,c);!i&&_&&(n[m].providerFactory=k),ho(o,e,t.length,0),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(k),a.push(k)}else ho(o,e,p>-1?p:m,fo(n[i?m:p],c,!i&&r));!i&&r&&_&&n[m].componentProviders++}}}function ho(e,t,n,r){var i=us(t);if(i||t.useClass){var s=(t.useClass||t).prototype.ngOnDestroy;if(s){var o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var a=o.indexOf(n);-1===a?o.push(n,[r,s]):o[a+1].push(r,s)}else o.push(n,s)}}}function fo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function go(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function vo(e,t,n,r){return mo(this.multi,[])}function po(e,t,n,r){var i,s=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,a=Wn(n,n[1],this.providerFactory.index,r);mo(s,i=a.slice(0,o));for(var u=o;u<a.length;u++)i.push(a[u])}else mo(s,i=[]);return i}function mo(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function yo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=Kt();if(r.firstCreatePass){var i=At(e);lo(n,r.data,r.blueprint,i,!0),lo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}ao.ngInherit=!0;var _o=function e(){_classCallCheck(this,e)},ko=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(Ce(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),bo=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new ko,e}(),Co=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return wo(e)},e}(),wo=function(e){return qi(e,qt(),Gt())},Oo=function e(){_classCallCheck(this,e)},Io=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),So=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ao()},e}(),Ao=function(){var e=Gt(),t=Nt(qt().index,e);return function(e){var t=e[11];if(Tt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ct(t)?t:e)},xo=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return null}}),e}(),Po=new function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("9.1.11"),To=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return _s(e)}},{key:"create",value:function(e){return new Eo(e)}}]),e}(),Ro=function(e,t){return t},Eo=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ro}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var s=!n||t&&t.currentIndex<No(n,r,i)?t:n,o=No(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);var u=o-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var d=l<i.length?i[l]:i[l]=0,h=d+l;c<=h&&h<u&&(i[l]=d+1)}i[s.previousIndex]=c-u}}o!==a&&e(s,o,a)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!_s(e))throw new Error("Error trying to diff '".concat(Ce(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,s=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var a=0;a<this.length;a++)r=e[a],i=this._trackByFn(a,r),null!==s&&ys(s.trackById,i)?(o&&(s=this._verifyReinsertion(s,r,i,a)),ys(s.item,r)||this._addIdentityChange(s,r)):(s=this._mismatch(s,r,i,a),o=!0),s=s._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[ms()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==s&&ys(s.trackById,i)?(o&&(s=t._verifyReinsertion(s,e,i,n)),ys(s.item,e)||t._addIdentityChange(s,e)):(s=t._mismatch(s,e,i,n),o=!0),s=s._next,n++})),this.length=n;return this._truncate(s),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(ys(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(ys(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Uo(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Fo),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),Uo=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Mo=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&ys(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Fo=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Mo,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function No(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Do=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||ks(e)}},{key:"create",value:function(){return new Lo}}]),e}(),Lo=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||ks(e)))throw new Error("Error trying to diff '".concat(Ce(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var s=new Vo(e);return this._records.set(e,s),s.currentValue=t,this._addToAdditions(s),s}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){ys(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),Vo=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},zo=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new oe]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new To])}}),e}(),jo=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new oe]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new Do])}}),e}(),Bo=[new Do],Ho=new zo([new To]),Go=new jo(Bo),Ko=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Wo(e,Co)},e}(),Wo=function(e,t){return function(e,t,n,r){return Hi||(Hi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this))._declarationView=e,s._declarationTContainer=r,s.elementRef=i,s}return _createClass(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Lr(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),zr(t,n,e),new Ki(n)}}]),n}(e)),0===n.type?new Hi(r,n,qi(t,n,r)):null}(e,t,qt(),Gt())},qo=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Zo(e,Co)},e}(),Zo=function(e,t){return function(e,t,n,r){var i;Gi||(Gi=function(e){_inherits(r,e);var n=_createSuper(r);function r(e,t,i){var s;return _classCallCheck(this,r),(s=n.call(this))._lContainer=e,s._hostTNode=t,s._hostView=i,s}return _createClass(r,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){var o=s.get(et,null);o&&(i=o)}var a=e.create(s,r,void 0,i);return this.insert(a.hostView,t),a}},{key:"insert",value:function(e,t){var n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),wt(n[3])){var i=this.indexOf(e);if(-1!==i)this.detach(i);else{var s=n[3],o=new Gi(s,s[6],s[3]);o.detach(o.indexOf(e))}}var a=this._adjustIndex(t);return function(e,t,n,r){var i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],rt(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,this._lContainer,a),Ii(r,n,!0,Ni(a,this._lContainer)),e.attachToViewContainerRef(this),rt(this._lContainer[8],a,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);!function(e,t){var n=Ai(e,t);n&&xi(n[1],n)}(this._lContainer,t),it(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=Ai(this._lContainer,t);return n&&null!=it(this._lContainer[8],t)?new Ki(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return qi(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new $n(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=jn(this._hostTNode,this._hostView),t=Tn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.parent.injectorIndex;)i=i.parent;return i}for(var s=Pn(e),o=t,a=t[6];s>1;)a=(o=o[15])[6],s--;return a}(e,this._hostView,this._hostTNode);return An(e)&&null!=n?new $n(n,t):new $n(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-10}}]),r}(e));var s=r[n.index];if(wt(s))i=s;else{var o;if(4===n.type)o=Et(s);else if(o=r[11].createComment(""),xt(r)){var a=r[11],u=Mt(n,r);Ri(a,Mi(a,u),o,function(e,t){return Tt(e)?e.nextSibling(t):t.nextSibling}(a,u))}else Fi(r[1],r,o,n);r[n.index]=i=ci(s,r,o,n),hi(r,i)}return new Gi(i,n,r)}(e,t,qt(),Gt())},$o={},Jo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).ngModule=e,r}return _createClass(n,[{key:"resolveComponentFactory",value:function(e){var t=_t(e);return new Yo(t,this.ngModule)}}]),n}(bo);function Qo(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Xo=new je("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Un}}),Yo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(Cr).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return _createClass(n,[{key:"create",value:function(e,t,n,r){var i,s,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var s=e.get(n,$o,i);return s!==$o||r===$o?s:t.get(n,r,i)}}}(e,r.injector):e,a=o.get(Oo,Rt),u=o.get(xo,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=n?function(e,t,n){if(Tt(e))return e.selectRootElement(t,n===ut.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Dr(l,a.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,f="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),g={components:[],scheduler:Un,clean:mi,playerHandler:null,flags:0},v=qr(0,-1,null,1,0,null,null,null,null,null),p=Lr(null,v,g,h,null,null,a,c,u,o);on(p,null);try{var m=function(e,t,n,r,i,s){var o=n[1];n[20]=e;var a=Vr(o,null,0,3,null,null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(vs(a,u,!0),null!==e&&(Cn(i,e,u),null!==a.classes&&ji(i,e,a.classes),null!==a.styles&&zi(i,e,a.styles)));var c=r.createRenderer(e,t),l=Lr(n,Wr(t),null,t.onPush?64:16,n[20],a,r,c,void 0);return o.firstCreatePass&&(Bn(Ln(a,n),o,t.type),ni(o,a),ii(a,n.length,1)),hi(n,l),n[20]=l}(d,this.componentDef,p,a,c);if(d)if(n)Cn(c,d,["ng-version",Po.full]);else{var y=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!yr(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),_=y.attrs,k=y.classes;_&&Cn(c,d,_),k&&k.length>0&&ji(c,d,k.join(" "))}if(s=Ft(v,0),void 0!==t)for(var b=s.projection=[],C=0;C<this.ngContentSelectors.length;C++){var w=t[C];b.push(null!=w?Array.from(w):null)}i=function(e,t,n,r,i){var s=n[1],o=function(e,t,n){var r=qt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ti(e,r,1),si(e,t,n));var i=Wn(t,e,t.length-1,r);lr(i,t);var s=Mt(r,t);return s&&lr(s,t),i}(s,n,t);r.components.push(o),e[8]=o,i&&i.forEach((function(e){return e(o,t)})),t.contentQueries&&t.contentQueries(1,o,n.length-1);var a=qt();if(s.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){fn(a.index-20);var u=n[1];Xr(u,t),Yr(u,n,t.hostVars),ei(t,o)}return o}(m,this.componentDef,p,g,[eo]),zr(v,p,null)}finally{dn()}var O=new ea(this.componentType,i,qi(Co,s,p),p,s);return n&&!f||(v.node.child=s),O}},{key:"inputs",get:function(){return Qo(this.componentDef.inputs)}},{key:"outputs",get:function(){return Qo(this.componentDef.outputs)}}]),n}(_o),ea=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s,o){var a,u,c,l;return _classCallCheck(this,n),(a=t.call(this)).location=i,a._rootLView=s,a._tNode=o,a.destroyCbs=[],a.instance=r,a.hostView=a.changeDetectorRef=new Wi(s),u=s[1],c=s,null==(l=u.node)&&(u.node=l=Zr(0,null,2,-1,null,null)),c[6]=l,a.componentType=e,a}return _createClass(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new $n(this._tNode,this._rootLView)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),ta=void 0,na=["en",[["a","p"],["AM","PM"],ta],[["AM","PM"],ta,ta],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ta,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ta,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ta,"{1} 'at' {0}",ta],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],ra={};function ia(e){return e in ra||(ra[e]=Ue.ng&&Ue.ng.common&&Ue.ng.common.locales&&Ue.ng.common.locales[e]),ra[e]}var sa=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function oa(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var aa=new Map,ua=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=_assertThisInitialized(i),i.destroyCbs=[],i.componentFactoryResolver=new Jo(_assertThisInitialized(i));var s=bt(e),o=e[Le]||null;return o&&oa(o),i._bootstrapComponents=Mn(s.bootstrap),i._r3Injector=ns(e,r,[{provide:et,useValue:_assertThisInitialized(i)},{provide:bo,useValue:i.componentFactoryResolver}],Ce(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return _createClass(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ls.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.Default;return e===ls||e===et||e===Be?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(et),ca=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).moduleType=e,null!==bt(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(Ce(t)," vs ").concat(Ce(t.name)))})(n,aa.get(n),t),aa.set(n,t)}var r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(t){return e(t)}))}(e),r}return _createClass(n,[{key:"create",value:function(e){return new ua(this.moduleType,e)}}]),n}(tt);function la(e,t,n){var r=Xt()+e,i=Gt();return i[r]===wr?bs(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function da(e,t,n,r){return function(e,t,n,r,i,s){var o=t+n;return Cs(e,o,i)?bs(e,o+1,s?r.call(s,i):r(i)):fa(e,o+1)}(Gt(),Xt(),e,t,n,r)}function ha(e,t,n,r,i){return function(e,t,n,r,i,s,o){var a=t+n;return ws(e,a,i,s)?bs(e,a+2,o?r.call(o,i,s):r(i,s)):fa(e,a+2)}(Gt(),Xt(),e,t,n,r,i)}function fa(e,t){var n=e[t];return n===wr?void 0:n}var ga=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(e=t.call(this)).__isAsync=r,e}return _createClass(n,[{key:"emit",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,s=function(e){return null},o=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(s=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(o=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(s=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),r&&(o=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var a=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,i,s,o);return e instanceof h&&e.add(a),a}}]),n}(x),va=new je("Application Initializer"),pa=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Fs(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(va,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),ma=new je("AppId"),ya={provide:ma,useFactory:function(){return"".concat(_a()).concat(_a()).concat(_a())},deps:[]};function _a(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var ka=new je("Platform Initializer"),ba=new je("Platform ID"),Ca=new je("appBootstrapListener"),wa=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Oa=new je("LocaleId"),Ia=new je("DefaultCurrencyCode"),Sa=function e(t,n){_classCallCheck(this,e),this.ngModuleFactory=t,this.componentFactories=n},Aa=function(e){return new ca(e)},xa=Aa,Pa=function(e){return Promise.resolve(Aa(e))},Ta=function(e){var t=Aa(e),n=Mn(bt(e).declarations).reduce((function(e,t){var n=_t(t);return n&&e.push(new Yo(n)),e}),[]);return new Sa(t,n)},Ra=Ta,Ea=function(e){return Promise.resolve(Ta(e))},Ua=function(){var e=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=xa,this.compileModuleAsync=Pa,this.compileModuleAndAllComponentsSync=Ra,this.compileModuleAndAllComponentsAsync=Ea}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Ma=new je("compilerOptions"),Fa=Promise.resolve(0);function Na(e){"undefined"==typeof Zone?Fa.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Da=function(){function e(t){var n,r,i=t.enableLongStackTrace,s=void 0!==i&&i,o=t.shouldCoalesceEventChangeDetection,a=void 0!==o&&o;if(_classCallCheck(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ga(!1),this.onMicrotaskEmpty=new ga(!1),this.onStable=new ga(!1),this.onError=new ga(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=a,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Ue.requestAnimationFrame,t=Ue.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ue,(function(){e.lastRequestAnimationFrameId=-1,ja(e),za(e)})),ja(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(e,t,i,s,o,a){try{return Ba(n),e.invokeTask(i,s,o,a)}finally{r&&"eventTask"===s.type&&r(),Ha(n)}},onInvoke:function(e,t,r,i,s,o,a){try{return Ba(n),e.invoke(r,i,s,o,a)}finally{Ha(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,ja(n),za(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Va,La,La);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function La(){}var Va={};function za(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function ja(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Ba(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ha(e){e._nesting--,za(e)}var Ga,Ka=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ga,this.onMicrotaskEmpty=new ga,this.onStable=new ga,this.onError=new ga}return _createClass(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),Wa=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){Da.assertNotInAngularZone(),Na((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Na((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(Da))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),qa=function(){var e=function(){function e(){_classCallCheck(this,e),this._applications=new Map,Za.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Za.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Za=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),$a=function(e,t,n){var r=e.get(Ma,[]).concat(t),i=new ca(n);if(0===hs.size)return Promise.resolve(i);var s,o,a=(s=r.map((function(e){return e.providers})),o=[],s.forEach((function(e){return e&&o.push.apply(o,_toConsumableArray(e))})),o);if(0===a.length)return Promise.resolve(i);var u=function(){var e=Ue.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),c=ls.create({providers:a}).get(u.ResourceLoader);return function(e){var t=[],n=new Map;function r(e){var t=n.get(e);if(!t){var r=function(e){return Promise.resolve(c.get(e))}(e);n.set(e,t=r.then(gs))}return t}return hs.forEach((function(e,n){var i=[];e.templateUrl&&i.push(r(e.templateUrl).then((function(t){e.template=t})));var s=e.styleUrls,o=e.styles||(e.styles=[]),a=e.styles.length;s&&s.forEach((function(t,n){o.push(""),i.push(r(t).then((function(r){o[a+n]=r,s.splice(s.indexOf(t),1),0==s.length&&(e.styleUrls=void 0)})))}));var u=Promise.all(i).then((function(){return function(e){fs.delete(e)}(n)}));t.push(u)})),hs=new Map,Promise.all(t).then((function(){}))}().then((function(){return i}))},Ja=new je("AllowMultipleToken"),Qa=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function Xa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+t,i=new je(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=Ya();if(!s||s.injector.get(Ja,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:Ji,useValue:"platform"});!function(e){if(Ga&&!Ga.destroyed&&!Ga.injector.get(Ja,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ga=e.get(eu);var t=e.get(ka,null);t&&t.forEach((function(e){return e()}))}(ls.create({providers:o,name:r}))}return function(e){var t=Ya();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Ya(){return Ga&&!Ga.destroyed?Ga:null}var eu=function(){var e=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,s=(n=t?t.ngZone:void 0,r=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new Ka:("zone.js"===n?void 0:n)||new Da({enableLongStackTrace:sr(),shouldCoalesceEventChangeDetection:r})),o=[{provide:Da,useValue:s}];return s.run((function(){var t=ls.create({providers:o,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(er,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return iu(i._modules,n)})),s.runOutsideAngular((function(){return s.onError.subscribe({next:function(e){r.handleError(e)}})})),function(e,t,r){try{var s=((o=n.injector.get(pa)).runInitializers(),o.donePromise.then((function(){return oa(n.injector.get(Oa,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return Fs(s)?s.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):s}catch(a){throw t.runOutsideAngular((function(){return e.handleError(a)})),a}var o}(r,s)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=tu({},n);return $a(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(ru);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(Ce(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(ls))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function tu(e,t){return Array.isArray(t)?t.reduce(tu,e):Object.assign(Object.assign({},e),t)}var nu,ru=((nu=function(){function e(t,n,r,i,s,o){var a=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=sr(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run((function(){a.tick()}))}});var u=new C((function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular((function(){e.next(a._stable),e.complete()}))})),c=new C((function(e){var t;a._zone.runOutsideAngular((function(){t=a._zone.onStable.subscribe((function(){Da.assertNotInAngularZone(),Na((function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,e.next(!0))}))}))}));var n=a._zone.onUnstable.subscribe((function(){Da.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,s=t[t.length-1];return T(s)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof s&&(r=t.pop()),null===i&&1===t.length&&t[0]instanceof C?t[0]:Z(r)($(t,i))}(u,c.pipe((function(e){return J()((t=ne,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,ee);return r.source=e,r.subjectFactory=n,r})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof _o?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(et),s=n.create(ls.NULL,[],t||n.selector,i);s.onDestroy((function(){r._unloadComponent(s)}));var o=s.injector.get(Wa,null);return o&&s.injector.get(qa).registerApplication(s.location.nativeElement,o),this._loadComponent(s),sr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(s){n.e(s)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;)r.value.checkNoChanges()}catch(s){i.e(s)}finally{i.f()}}}catch(o){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(o)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;iu(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ca,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),iu(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||nu)(Je(Da),Je(wa),Je(ls),Je(er),Je(bo),Je(pa))},nu.\u0275prov=he({token:nu,factory:nu.\u0275fac}),nu);function iu(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var su=function e(){_classCallCheck(this,e)},ou=function e(){_classCallCheck(this,e)},au={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},uu=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._compiler=t,this._config=n||au}return _createClass(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=_slicedToArray(e.split("#"),2),i=r[0],s=r[1];return void 0===s&&(s="default"),n("zn8P")(i).then((function(e){return e[s]})).then((function(e){return cu(e,i,s)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),r=t[0],i=t[1],s="NgFactory";return void 0===i&&(i="default",s=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(e){return e[i+s]})).then((function(e){return cu(e,r,i)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Je(Ua),Je(ou,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function cu(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var lu=Xa(null,"core",[{provide:ba,useValue:"unknown"},{provide:eu,deps:[ls]},{provide:qa,deps:[]},{provide:wa,deps:[]}]),du=[{provide:ru,useClass:ru,deps:[Da,wa,ls,er,bo,pa]},{provide:Xo,deps:[Da],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:pa,useClass:pa,deps:[[new oe,va]]},{provide:Ua,useClass:Ua,deps:[]},ya,{provide:zo,useFactory:function(){return Ho},deps:[]},{provide:jo,useFactory:function(){return Go},deps:[]},{provide:Oa,useFactory:function(e){return oa(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new se(Oa),new oe,new ue]]},{provide:Ia,useValue:"USD"}],hu=function(){var e=function e(t){_classCallCheck(this,e)};return e.\u0275mod=pt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Je(ru))},providers:du}),e}(),fu=null;function gu(){return fu}var vu,pu=new je("DocumentToken"),mu=((vu=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||vu)},vu.\u0275prov=he({factory:yu,token:vu,providedIn:"platform"}),vu);function yu(){return Je(bu)}var _u,ku=new je("Location Initialized"),bu=((_u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=gu().getLocation(),this._history=gu().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return gu().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){gu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){gu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,n){Cu()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Cu()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(mu)).\u0275fac=function(e){return new(e||_u)(Je(pu))},_u.\u0275prov=he({factory:wu,token:_u,providedIn:"platform"}),_u);function Cu(){return!!window.history.pushState}function wu(){return new bu(Je(pu))}function Ou(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Iu(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Su(e){return e&&"?"!==e[0]?"?"+e:e}var Au,xu=((Au=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Au)},Au.\u0275prov=he({factory:Pu,token:Au,providedIn:"root"}),Au);function Pu(e){var t=Je(pu).location;return new Mu(Je(mu),t&&t.origin||"")}var Tu,Ru,Eu,Uu=new je("appBaseHref"),Mu=((Eu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;if(_classCallCheck(this,n),(i=t.call(this))._platformLocation=e,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,_possibleConstructorReturn(i)}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return Ou(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Su(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Su(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Su(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(xu)).\u0275fac=function(e){return new(e||Eu)(Je(mu),Je(Uu,8))},Eu.\u0275prov=he({token:Eu,factory:Eu.\u0275fac}),Eu),Fu=((Ru=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",null!=r&&(i._baseHref=r),i}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=Ou(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Su(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Su(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(xu)).\u0275fac=function(e){return new(e||Ru)(Je(mu),Je(Uu,8))},Ru.\u0275prov=he({token:Ru,factory:Ru.\u0275fac}),Ru),Nu=((Tu=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._subject=new ga,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Iu(Lu(i)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Su(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Lu(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Su(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Su(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}()).\u0275fac=function(e){return new(e||Tu)(Je(xu),Je(mu))},Tu.normalizeQueryParams=Su,Tu.joinWithSlash=Ou,Tu.stripTrailingSlash=Iu,Tu.\u0275prov=he({factory:Du,token:Tu,providedIn:"root"}),Tu);function Du(){return new Nu(Je(xu),Je(mu))}function Lu(e){return e.replace(/\/index.html$/,"")}var Vu,zu=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),ju=function e(){_classCallCheck(this,e)},Bu=((Vu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).locale=e,r}return _createClass(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return function(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=ia(t);if(n)return n;var r=t.split("-")[0];if(n=ia(r))return n;if("en"===r)return na;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[sa.PluralCase]}(t||this.locale)(e)){case zu.Zero:return"zero";case zu.One:return"one";case zu.Two:return"two";case zu.Few:return"few";case zu.Many:return"many";default:return"other"}}}]),n}(ju)).\u0275fac=function(e){return new(e||Vu)(Je(Oa))},Vu.\u0275prov=he({token:Vu,factory:Vu.\u0275fac}),Vu);function Hu(e,t){t=encodeURIComponent(t);var n,r=_createForOfIteratorHelper(e.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,s=i.indexOf("="),o=_slicedToArray(-1==s?[i,""]:[i.slice(0,s),i.slice(s+1)],2),a=o[0],u=o[1];if(a.trim()===t)return decodeURIComponent(u)}}catch(c){r.e(c)}finally{r.f()}return null}var Gu,Ku,Wu,qu=((Gu=function(){function e(t,n,r,i){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Ce(e.item));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}},{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(_s(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}}]),e}()).\u0275fac=function(e){return new(e||Gu)(As(zo),As(jo),As(Co),As(So))},Gu.\u0275dir=yt({type:Gu,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Gu),Zu=function(){function e(t,n,r,i){_classCallCheck(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return _createClass(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),$u=((Ku=function(){function e(t,n,r){_classCallCheck(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,r,i){if(null==e.previousIndex){var s=t._viewContainer.createEmbeddedView(t._template,new Zu(null,t._ngForOf,-1,-1),null===i?void 0:i),o=new Ju(e,s);n.push(o)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var a=t._viewContainer.get(r);t._viewContainer.move(a,i);var u=new Ju(e,a);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,s=this._viewContainer.length;i<s;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=s,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}},{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(e){sr()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=e},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||Ku)(As(qo),As(Ko),As(zo))},Ku.\u0275dir=yt({type:Ku,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Ku),Ju=function e(t,n){_classCallCheck(this,e),this.record=t,this.view=n},Qu=((Wu=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new Xu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){Yu("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){Yu("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||Wu)(As(qo),As(Ko))},Wu.\u0275dir=yt({type:Wu,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Wu),Xu=function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null};function Yu(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(Ce(t),"'."))}var ec,tc,nc,rc,ic,sc,oc=((tc=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:tc}),tc.\u0275inj=fe({factory:function(e){return new(e||tc)},providers:[{provide:ju,useClass:Bu}]}),tc),ac=((ec=function e(){_classCallCheck(this,e)}).\u0275prov=he({token:ec,providedIn:"root",factory:function(){return new uc(Je(pu),window,Je(er))}}),ec),uc=function(){function e(t,n,r){_classCallCheck(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#"+e);if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),cc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=lc||(lc=document.querySelector("base"))?lc.getAttribute("href"):null;return null==n?null:(t=n,nc||(nc=document.createElement("a")),nc.setAttribute("href",t),"/"===nc.pathname.charAt(0)?nc.pathname:"/"+nc.pathname)}},{key:"resetBaseElement",value:function(){lc=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return Hu(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,fu||(fu=e)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function e(){_classCallCheck(this,e)}}())),lc=null,dc=new je("TRANSITION_ID"),hc=[{provide:va,useFactory:function(e,t,n){return function(){n.get(pa).donePromise.then((function(){var n=gu();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[dc,pu,ls],multi:!0}],fc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){Ue.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ue.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Ue.getAllAngularRootElements=function(){return e.getAllRootElements()},Ue.frameworkStabilizers||(Ue.frameworkStabilizers=[]),Ue.frameworkStabilizers.push((function(e){var t=Ue.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?gu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,Za=t}}]),e}(),gc=new je("EventManagerPlugins"),vc=((rc=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)}}]),e}()).\u0275fac=function(e){return new(e||rc)(Je(gc),Je(Da))},rc.\u0275prov=he({token:rc,factory:rc.\u0275fac}),rc),pc=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=gu().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),mc=((sc=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||sc)},sc.\u0275prov=he({token:sc,factory:sc.\u0275fac}),sc),yc=((ic=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return gu().remove(e)}))}}]),n}(mc)).\u0275fac=function(e){return new(e||ic)(Je(pu))},ic.\u0275prov=he({token:ic,factory:ic.\u0275fac}),ic),_c={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},kc=/%COMP%/g;function bc(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?bc(e,i,n):(i=i.replace(kc,e),n.push(i))}return n}function Cc(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var wc,Oc,Ic,Sc,Ac=((wc=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new xc(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ut.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Pc(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case ut.Native:case ut.ShadowDom:return new Tc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=bc(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||wc)(Je(vc),Je(yc),Je(ma))},wc.\u0275prov=he({token:wc,factory:wc.\u0275fac}),wc),xc=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(_c[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=_c[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=_c[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&Io.DashCase?e.style.setProperty(t,n,r&Io.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&Io.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Cc(n)):this.eventManager.addEventListener(e,t,Cc(n))}}]),e}(),Pc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;_classCallCheck(this,n),(o=t.call(this,e)).component=i;var a,u=bc(s+"-"+i.id,i.styles,[]);return r.addStyles(u),o.contentAttr="_ngcontent-%COMP%".replace(kc,s+"-"+i.id),o.hostAttr=(a=s+"-"+i.id,"_nghost-%COMP%".replace(kc,a)),o}return _createClass(n,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,e,t);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(xc),Tc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;_classCallCheck(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=i,o.component=s,o.shadowRoot=s.encapsulation===ut.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=bc(s.id,s.styles,[]),u=0;u<a.length;u++){var c=document.createElement("style");c.textContent=a[u],o.shadowRoot.appendChild(c)}return o}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(xc),Rc=((Oc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(pc)).\u0275fac=function(e){return new(e||Oc)(Je(pu))},Oc.\u0275prov=he({token:Oc,factory:Oc.\u0275fac}),Oc),Ec=["alt","control","meta","shift"],Uc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fc={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Nc=((Ic=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),s=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return gu().onAndCancel(e,i.domEventName,s)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),s="";if(Ec.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),s+=e+".")})),s+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=s,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Mc.hasOwnProperty(t)&&(t=Mc[t]))}return Uc[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ec.forEach((function(r){r!=n&&(0,Fc[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded((function(){return t(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(pc)).\u0275fac=function(e){return new(e||Ic)(Je(pu))},Ic.\u0275prov=he({token:Ic,factory:Ic.\u0275fac}),Ic),Dc=Xa(lu,"browser",[{provide:ba,useValue:"browser"},{provide:ka,useValue:function(){cc.makeCurrent(),fc.init()},multi:!0},{provide:pu,useFactory:function(){return function(e){Pt=e}(document),document},deps:[]}]),Lc=[[],{provide:Ji,useValue:"root"},{provide:er,useFactory:function(){return new er},deps:[]},{provide:gc,useClass:Rc,multi:!0,deps:[pu,Da,ba]},{provide:gc,useClass:Nc,multi:!0,deps:[pu]},[],{provide:Ac,useClass:Ac,deps:[vc,yc,ma]},{provide:Oo,useExisting:Ac},{provide:mc,useExisting:yc},{provide:yc,useClass:yc,deps:[pu]},{provide:Wa,useClass:Wa,deps:[Da]},{provide:vc,useClass:vc,deps:[gc,Da]},[]],Vc=((Sc=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:ma,useValue:t.appId},{provide:dc,useExisting:ma},hc]}}}]),e}()).\u0275mod=pt({type:Sc}),Sc.\u0275inj=fe({factory:function(e){return new(e||Sc)(Je(Sc,12))},providers:Lc,imports:[oc,hu]}),Sc);function zc(){return new Bc(Je(pu))}var jc,Bc=((jc=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"getTitle",value:function(){return this._doc.title}},{key:"setTitle",value:function(e){this._doc.title=e||""}}]),e}()).\u0275fac=function(e){return new(e||jc)(Je(pu))},jc.\u0275prov=he({factory:zc,token:jc,providedIn:"root"}),jc);"undefined"!=typeof window&&window;var Hc=function(e){return e[e.FIBU=1]="FIBU",e[e.FOLDERS_AND_DOCS=2]="FOLDERS_AND_DOCS",e[e.BILANZ=3]="BILANZ",e[e.TAX=4]="TAX",e}({});function Gc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return T(r)?(t.pop(),H(t,r)):$(t)}var Kc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._value=e,r}return _createClass(n,[{key:"_subscribe",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new I;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),n}(x),Wc=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),qc={},Zc=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new $c(e,this.resultSelector))}}]),e}(),$c=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return _createClass(n,[{key:"_next",value:function(e){this.values.push(qc),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(L(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,i){var s=this.values,o=this.toRespond?s[n]===qc?--this.toRespond:this.toRespond:0;s[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(V),Jc=new C((function(e){return e.complete()}));function Qc(e){return e?function(e){return new C((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Jc}function Xc(e){return new C((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?G(n):Qc()).subscribe(t)}))}function Yc(){return Z(1)}function el(e,t){return function(n){return n.lift(new tl(e,t))}}var tl=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new nl(e,this.predicate,this.thisArg))}}]),e}(),nl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e)).predicate=r,s.thisArg=i,s.count=0,s}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(v),rl=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function il(e){return function(t){return 0===e?Qc():t.lift(new sl(e))}}var sl=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new rl}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ol(e,this.total))}}]),e}(),ol=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return _createClass(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var s=t++%n;e.next(r[s])}e.complete()}}]),n}(v);function al(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ll;return function(t){return t.lift(new ul(e))}}var ul=function(){function e(t){_classCallCheck(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new cl(e,this.errorFactory))}}]),e}(),cl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(v);function ll(){return new Wc}function dl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new hl(e))}}var hl=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new fl(e,this.defaultValue))}}]),e}(),fl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return _createClass(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(v);function gl(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?el((function(t,n){return e(t,n,r)})):y,il(1),n?dl(t):al((function(){return new Wc})))}}function vl(e){return function(t){var n=new pl(e),r=t.lift(n);return n.caught=r}}var pl=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ml(e,this.selector,this.caught))}}]),e}(),ml=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e)).selector=r,s.caught=i,s}return _createClass(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(s){return void _get(_getPrototypeOf(n.prototype),"error",this).call(this,s)}this._unsubscribeAndRecycle();var r=new R(this,void 0,void 0);this.add(r);var i=L(this,t,void 0,void 0,r);i!==r&&this.add(i)}}}]),n}(V);function yl(e){return function(t){return 0===e?Qc():t.lift(new _l(e))}}var _l=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new rl}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new kl(e,this.total))}}]),e}(),kl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return _createClass(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(v);function bl(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?el((function(t,n){return e(t,n,r)})):y,yl(1),n?dl(t):al((function(){return new Wc})))}}var Cl=function(){function e(t,n,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=n,this.source=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new wl(e,this.predicate,this.thisArg,this.source))}}]),e}(),wl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this,e)).predicate=r,o.thisArg=i,o.source=s,o.index=0,o.thisArg=i||_assertThisInitialized(o),o}return _createClass(n,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(v);function Ol(e,t){return"function"==typeof t?function(n){return n.pipe(Ol((function(n,r){return G(e(n,r)).pipe(z((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Il(e))}}var Il=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Sl(e,this.project))}}]),e}(),Sl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new R(this,t,n),s=this.destination;s.add(i),this.innerSubscription=L(this,e,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}}]),n}(V);function Al(){return Yc()(Gc.apply(void 0,arguments))}function xl(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Pl(e,t,n))}}var Pl=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Tl(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),Tl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=s,o.index=0,o}return _createClass(n,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),n}(v);function Rl(e,t){return K(e,t,1)}function El(){}function Ul(e,t,n){return function(r){return r.lift(new Fl(e,t,n))}}var Ml,Fl=function(){function e(t,n,r){_classCallCheck(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Nl(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),Nl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,s,o){var a;return _classCallCheck(this,n),(a=t.call(this,e))._tapNext=El,a._tapError=El,a._tapComplete=El,a._tapError=s||El,a._tapComplete=o||El,r(i)?(a._context=_assertThisInitialized(a),a._tapNext=i):i&&(a._context=i,a._tapNext=i.next||El,a._tapError=i.error||El,a._tapComplete=i.complete||El),a}return _createClass(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(v),Dl=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Ll(e,this.callback))}}]),e}(),Ll=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).add(new h(r)),i}return n}(v),Vl=function e(t,n){_classCallCheck(this,e),this.id=t,this.url=n},zl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(i=t.call(this,e,r)).navigationTrigger=s,i.restoredState=o,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Vl),jl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Vl),Bl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).reason=i,s}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Vl),Hl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).error=i,s}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Vl),Gl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=s,o}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Vl),Kl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=s,o}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Vl),Wl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=s,a.shouldActivate=o,a}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Vl),ql=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=s,o}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Vl),Zl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=s,o}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Vl),$l=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Jl=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Ql=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Xl=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Yl=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),ed=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),td=function(){function e(t,n,r){_classCallCheck(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),nd=((Ml=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Ml)},Ml.\u0275cmp=ht({type:Ml,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Us(0,"router-outlet")},directives:function(){return[lf]},encapsulation:2}),Ml),rd=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function id(e){return new rd(e)}function sd(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function od(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},s=0;s<r.length;s++){var o=r[s],a=e[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}var ad=function e(t,n){_classCallCheck(this,e),this.routes=t,this.module=n};function ud(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];cd(r,ld(t,r))}}function cd(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&ud(e.children,t)}function ld(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function dd(e){var t=e.children&&e.children.map(dd),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=nd),n}function hd(e,t){var n,r=Object.keys(e),i=Object.keys(t);if(!r||!i||r.length!=i.length)return!1;for(var s=0;s<r.length;s++)if(!fd(e[n=r[s]],t[n]))return!1;return!0}function fd(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function gd(e){return Array.prototype.concat.apply([],e)}function vd(e){return e.length>0?e[e.length-1]:null}function pd(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function md(e){return Ns(e)?e:Fs(e)?G(Promise.resolve(e)):Gc(e)}function yd(e,t,n){return n?function(e,t){return hd(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Cd(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return fd(e[n],t[n])}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!Cd(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Cd(n.segments,i))return!1;for(var s in r.children){if(!n.children[s])return!1;if(!e(n.children[s],r.children[s]))return!1}return!0}var o=i.slice(0,n.segments.length),a=i.slice(n.segments.length);return!!Cd(n.segments,o)&&!!n.children.primary&&t(n.children.primary,r,a)}(t,n,n.segments)}(e.root,t.root)}var _d=function(){function e(t,n,r){_classCallCheck(this,e),this.root=t,this.queryParams=n,this.fragment=r}return _createClass(e,[{key:"toString",value:function(){return Sd.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=id(this.queryParams)),this._queryParamMap}}]),e}(),kd=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.segments=t,this.children=n,this.parent=null,pd(n,(function(e,t){return e.parent=r}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Ad(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),bd=function(){function e(t,n){_classCallCheck(this,e),this.path=t,this.parameters=n}return _createClass(e,[{key:"toString",value:function(){return Ud(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=id(this.parameters)),this._parameterMap}}]),e}();function Cd(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function wd(e,t){var n=[];return pd(e.children,(function(e,r){"primary"===r&&(n=n.concat(t(e,r)))})),pd(e.children,(function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))})),n}var Od=function e(){_classCallCheck(this,e)},Id=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new Ld(e);return new _d(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){return"".concat("/"+function e(t,n){if(!t.hasChildren())return Ad(t);if(n){var r=t.children.primary?e(t.children.primary,!1):"",i=[];return pd(t.children,(function(t,n){"primary"!==n&&i.push("".concat(n,":").concat(e(t,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var s=wd(t,(function(n,r){return"primary"===r?[e(t.children.primary,!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(Ad(t),"/(").concat(s.join("//"),")")}(e.root,!0)).concat((t=e.queryParams,n=Object.keys(t).map((function(e){var n=t[e];return Array.isArray(n)?n.map((function(t){return"".concat(Pd(e),"=").concat(Pd(t))})).join("&"):"".concat(Pd(e),"=").concat(Pd(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"");var t,n}}]),e}(),Sd=new Id;function Ad(e){return e.segments.map((function(e){return Ud(e)})).join("/")}function xd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pd(e){return xd(e).replace(/%3B/gi,";")}function Td(e){return xd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rd(e){return decodeURIComponent(e)}function Ed(e){return Rd(e.replace(/\+/g,"%20"))}function Ud(e){return"".concat(Td(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(Td(e),"=").concat(Td(t[e]))})).join("")));var t}var Md=/^[^\/()?;=#]+/;function Fd(e){var t=e.match(Md);return t?t[0]:""}var Nd=/^[^=?&#]+/,Dd=/^[^?&#]+/,Ld=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kd([],{}):new kd([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new kd(e,t)),n}},{key:"parseSegment",value:function(){var e=Fd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new bd(Rd(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Fd(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Fd(this.remaining);r&&(n=r,this.capture(n))}e[Rd(t)]=Rd(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Nd);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Dd);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Ed(t),s=Ed(n);if(e.hasOwnProperty(i)){var o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Fd(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new kd([],s),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Vd=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=zd(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=zd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=jd(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return jd(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function zd(e,t){if(e===t.value)return t;var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var i=zd(e,n.value);if(i)return i}}catch(s){r.e(s)}finally{r.f()}return null}function jd(e,t){if(e===t.value)return[t];var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var i=jd(e,n.value);if(i.length)return i.unshift(t),i}}catch(s){r.e(s)}finally{r.f()}return[]}var Bd=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.children=n}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Hd(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var Gd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).snapshot=r,Jd(_assertThisInitialized(i),e),i}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Vd);function Kd(e,t){var n=function(e,t){var n=new Zd([],{},{},"",{},"primary",t,null,e.root,-1,{});return new $d("",new Bd(n,[]))}(e,t),r=new Kc([new bd("",{})]),i=new Kc({}),s=new Kc({}),o=new Kc({}),a=new Kc(""),u=new Wd(r,i,o,a,s,"primary",t,n.root);return u.snapshot=n.root,new Gd(new Bd(u,[]),n)}var Wd=function(){function e(t,n,r,i,s,o,a,u){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=u}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(z((function(e){return id(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(z((function(e){return id(e)})))),this._queryParamMap}}]),e}();function qd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Zd=function(){function e(t,n,r,i,s,o,a,u,c,l,d){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=d}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=id(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=id(this.queryParams)),this._queryParamMap}}]),e}(),$d=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,r)).url=e,Jd(_assertThisInitialized(i),r),i}return _createClass(n,[{key:"toString",value:function(){return Qd(this._root)}}]),n}(Vd);function Jd(e,t){t.value._routerState=e,t.children.forEach((function(t){return Jd(e,t)}))}function Qd(e){var t=e.children.length>0?" { ".concat(e.children.map(Qd).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Xd(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,hd(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),hd(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!hd(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),hd(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Yd(e,t){var n,r;return hd(e.params,t.params)&&Cd(n=e.url,r=t.url)&&n.every((function(e,t){return hd(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||Yd(e.parent,t.parent))}function eh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function th(e,t,n,r,i){var s={};return r&&pd(r,(function(e,t){s[t]=Array.isArray(e)?e.map((function(e){return""+e})):""+e})),new _d(n.root===e?t:function e(t,n,r){var i={};return pd(t.children,(function(t,s){i[s]=t===n?r:e(t,n,r)})),new kd(t.segments,i)}(n.root,e,t),s,i)}var nh=function(){function e(t,n,r){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&eh(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(i&&i!==vd(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),rh=function e(t,n,r){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function ih(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function sh(e,t,n){if(e||(e=new kd([],{})),0===e.segments.length&&e.hasChildren())return oh(e,t,n);var r=function(e,t,n){for(var r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return s;var o=e.segments[i],a=ih(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!lh(a,u,o))return s;r+=2}else{if(!lh(a,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var s=new kd(e.segments.slice(0,r.pathIndex),{});return s.children.primary=new kd(e.segments.slice(r.pathIndex),e.children),oh(s,0,i)}return r.match&&0===i.length?new kd(e.segments,{}):r.match&&!e.hasChildren()?ah(e,t,n):r.match?oh(e,0,i):ah(e,t,n)}function oh(e,t,n){if(0===n.length)return new kd(e.segments,{});var r=function(e){return"object"!=typeof e[0]||void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),i={};return pd(r,(function(n,r){null!==n&&(i[r]=sh(e.children[r],t,n))})),pd(e.children,(function(e,t){void 0===r[t]&&(i[t]=e)})),new kd(e.segments,i)}function ah(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var s=uh(n[i].outlets);return new kd(r,s)}if(0===i&&eh(n[0]))r.push(new bd(e.segments[t].path,n[0])),i++;else{var o=ih(n[i]),a=i<n.length-1?n[i+1]:null;o&&a&&eh(a)?(r.push(new bd(o,ch(a))),i+=2):(r.push(new bd(o,{})),i++)}}return new kd(r,{})}function uh(e){var t={};return pd(e,(function(e,n){null!==e&&(t[n]=ah(new kd([],{}),0,e))})),t}function ch(e){var t={};return pd(e,(function(e,n){return t[n]=""+e})),t}function lh(e,t,n){return e==n.path&&hd(t,n.parameters)}var dh=function(){function e(t,n,r,i){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Xd(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=Hd(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]})),pd(i,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var i=Hd(e),s=e.value.component?r.children:t;pd(i,(function(e,t){return n.deactivateRouteAndItsChildren(e,s)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=Hd(t);e.children.forEach((function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new ed(e.value.snapshot))})),e.children.length&&this.forwardEvent(new Xl(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Xd(r),r===i)if(r.component){var s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hh(a.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function hh(e){Xd(e.value),e.children.forEach(hh)}function fh(e){return"function"==typeof e}function gh(e){return e instanceof _d}var vh=function e(t){_classCallCheck(this,e),this.segmentGroup=t||null},ph=function e(t){_classCallCheck(this,e),this.urlTree=t};function mh(e){return new C((function(t){return t.error(new vh(e))}))}function yh(e){return new C((function(t){return t.error(new ph(e))}))}function _h(e){return new C((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var kh=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(et)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(z((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(vl((function(t){if(t instanceof ph)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof vh)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(z((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(vl((function(e){if(e instanceof vh)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new kd([],{primary:e}):e;return new _d(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(z((function(e){return new kd([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Gc({});var s=[],o=[],a={};return pd(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(e,t,c,u)).pipe(z((function(e){return a[i]=e})));"primary"===i?s.push(l):o.push(l)})),Gc.apply(null,s.concat(o)).pipe(Yc(),gl(),z((function(){return a})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,i,s){var o=this;return Gc.apply(void 0,_toConsumableArray(n)).pipe(z((function(a){return o.expandSegmentAgainstRoute(e,t,n,a,r,i,s).pipe(vl((function(e){if(e instanceof vh)return Gc(null);throw e})))})),Yc(),bl((function(e){return!!e})),vl((function(e,n){if(e instanceof Wc||"EmptyError"===e.name){if(o.noLeftoversInUrl(t,r,i))return Gc(new kd([],{}));throw new vh(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,s,o){return Oh(r)!==s?mh(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):mh(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?yh(s):this.lineralizeSegments(n,s).pipe(K((function(n){var s=new kd(n,{});return i.expandSegment(e,s,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,s){var o=this,a=bh(t,r,i),u=a.matched,c=a.consumedSegments,l=a.lastChild,d=a.positionalParamSegments;if(!u)return mh(t);var h=this.applyRedirectCommands(c,r.redirectTo,d);return r.redirectTo.startsWith("/")?yh(h):this.lineralizeSegments(r,h).pipe(K((function(r){return o.expandSegment(e,t,n,r.concat(i.slice(l)),s,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(z((function(e){return n._loadedConfig=e,new kd(r,{})}))):Gc(new kd(r,{}));var s=bh(t,n,r),o=s.matched,a=s.consumedSegments,u=s.lastChild;if(!o)return mh(t);var c=r.slice(u);return this.getChildConfig(e,n,r).pipe(K((function(e){var n=e.module,r=e.routes,s=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return wh(e,t,n)&&"primary"!==Oh(n)}))}(e,n,r)?{segmentGroup:Ch(new kd(t,function(e,t){var n={};n.primary=t;var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var s=r.value;""===s.path&&"primary"!==Oh(s)&&(n[Oh(s)]=new kd([],{}))}}catch(o){i.e(o)}finally{i.f()}return n}(r,new kd(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return wh(e,t,n)}))}(e,n,r)?{segmentGroup:Ch(new kd(e.segments,function(e,t,n,r){var i,s={},o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;wh(e,t,a)&&!r[Oh(a)]&&(s[Oh(a)]=new kd([],{}))}}catch(u){o.e(u)}finally{o.f()}return Object.assign(Object.assign({},r),s)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,a,c,r),o=s.segmentGroup,u=s.slicedSegments;return 0===u.length&&o.hasChildren()?i.expandChildren(n,r,o).pipe(z((function(e){return new kd(a,e)}))):0===r.length&&0===u.length?Gc(new kd(a,{})):i.expandSegment(n,o,r,u,"primary",!0).pipe(z((function(e){return new kd(a.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?Gc(new ad(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Gc(t._loadedConfig):function(e,t,n){var r,i=t.canLoad;return i&&0!==i.length?G(i).pipe(z((function(r){var i,s=e.get(r);if(function(e){return e&&fh(e.canLoad)}(s))i=s.canLoad(t,n);else{if(!fh(s))throw new Error("Invalid CanLoad guard");i=s(t,n)}return md(i)}))).pipe(Yc(),(r=function(e){return!0===e},function(e){return e.lift(new Cl(r,void 0,e))})):Gc(!0)}(e.injector,t,n).pipe(K((function(n){return n?r.configLoader.load(e.injector,t).pipe(z((function(e){return t._loadedConfig=e,e}))):function(e){return new C((function(t){return t.error(sd("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):Gc(new ad([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Gc(n);if(r.numberOfChildren>1||!r.children.primary)return _h(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new _d(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return pd(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,s=this.createSegments(e,t.segments,n,r),o={};return pd(t.children,(function(t,s){o[s]=i.createSegmentGroup(e,t,n,r)})),new kd(s,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map((function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(s.path===e.path)return t.splice(r),s;r++}}catch(o){i.e(o)}finally{i.f()}return e}}]),e}();function bh(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||od)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ch(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new kd(e.segments.concat(t.segments),t.children)}return e}function wh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Oh(e){return e.outlet||"primary"}var Ih=function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]},Sh=function e(t,n){_classCallCheck(this,e),this.component=t,this.route=n};function Ah(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function xh(e,t,n){var r=Hd(e),i=e.value;pd(r,(function(e,r){xh(e,i.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new Sh(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Ph=Symbol("INITIAL_VALUE");function Th(){return Ol((function(e){return(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,i=null;return T(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),$(t,i).lift(new Zc(r))}).apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(yl(1),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return T(r)?(t.pop(),function(e){return Al(t,e,r)}):function(e){return Al(t,e)}}(Ph))})))).pipe(xl((function(e,t){var n=!1;return t.reduce((function(e,r,i){if(e!==Ph)return e;if(r===Ph&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||gh(r))return r}return e}),e)}),Ph),el((function(e){return e!==Ph})),z((function(e){return gh(e)?e:!0===e})),yl(1))}))}function Rh(e,t){return null!==e&&t&&t(new Yl(e)),Gc(!0)}function Eh(e,t){return null!==e&&t&&t(new Ql(e)),Gc(!0)}function Uh(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Gc(r.map((function(r){return Xc((function(){var i,s=Ah(r,t,n);if(function(e){return e&&fh(e.canActivate)}(s))i=md(s.canActivate(t,e));else{if(!fh(s))throw new Error("Invalid CanActivate guard");i=md(s(t,e))}return i.pipe(bl())}))}))).pipe(Th()):Gc(!0)}function Mh(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return Xc((function(){return Gc(t.guards.map((function(i){var s,o=Ah(i,t.node,n);if(function(e){return e&&fh(e.canActivateChild)}(o))s=md(o.canActivateChild(r,e));else{if(!fh(o))throw new Error("Invalid CanActivateChild guard");s=md(o(r,e))}return s.pipe(bl())}))).pipe(Th())}))}));return Gc(i).pipe(Th())}var Fh=function e(){_classCallCheck(this,e)},Nh=function(){function e(t,n,r,i,s,o){_classCallCheck(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}return _createClass(e,[{key:"recognize",value:function(){try{var e=Vh(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Zd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Bd(n,t),i=new $d(this.url,r);return this.inheritParamsAndData(i._root),Gc(i)}catch(s){return new C((function(e){return e.error(s)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=qd(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,i=wd(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},i.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),i=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[e.value.outlet]=e.value})),i.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),i}},{key:"processSegment",value:function(e,t,n,r){var i,s=_createForOfIteratorHelper(e);try{for(s.s();!(i=s.n()).done;){var o=i.value;try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(a){if(!(a instanceof Fh))throw a}}}catch(u){s.e(u)}finally{s.f()}if(this.noLeftoversInUrl(t,n,r))return[];throw new Fh}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new Fh;if((e.outlet||"primary")!==r)throw new Fh;var i,s=[],o=[];if("**"===e.path){var a=n.length>0?vd(n).parameters:{};i=new Zd(n,a,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bh(e),r,e.component,e,Dh(t),Lh(t)+n.length,Hh(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new Fh;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||od)(n,e,t);if(!r)throw new Fh;var i={};pd(r.posParams,(function(e,t){i[t]=e.path}));var s=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(t,e,n);s=u.consumedSegments,o=n.slice(u.lastChild),i=new Zd(s,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bh(e),r,e.component,e,Dh(t),Lh(t)+s.length,Hh(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Vh(t,s,o,c,this.relativeLinkResolution),d=l.segmentGroup,h=l.slicedSegments;if(0===h.length&&d.hasChildren()){var f=this.processChildren(c,d);return[new Bd(i,f)]}if(0===c.length&&0===h.length)return[new Bd(i,[])];var g=this.processSegment(c,d,h,"primary");return[new Bd(i,g)]}}]),e}();function Dh(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Lh(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Vh(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some((function(n){return zh(e,t,n)&&"primary"!==jh(n)}))}(e,n,r)){var s=new kd(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var s,o=_createForOfIteratorHelper(n);try{for(o.s();!(s=o.n()).done;){var a=s.value;if(""===a.path&&"primary"!==jh(a)){var u=new kd([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,i[jh(a)]=u}}}catch(c){o.e(c)}finally{o.f()}return i}(e,t,r,new kd(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return zh(e,t,n)}))}(e,n,r)){var o=new kd(e.segments,function(e,t,n,r,i,s){var o,a={},u=_createForOfIteratorHelper(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(zh(e,n,c)&&!i[jh(c)]){var l=new kd([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===s?e.segments.length:t.length,a[jh(c)]=l}}}catch(d){u.e(d)}finally{u.f()}return Object.assign(Object.assign({},i),a)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var a=new kd(e.segments,e.children);return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}function zh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function jh(e){return e.outlet||"primary"}function Bh(e){return e.data||{}}function Hh(e){return e.resolve||{}}function Gh(e,t,n,r){var i=Ah(e,t,r);return md(i.resolve?i.resolve(t,n):i(t,n))}function Kh(e){return function(t){return t.pipe(Ol((function(t){var n=e(t);return n?G(n).pipe(z((function(){return t}))):G([t])})))}}var Wh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),qh=new je("ROUTES"),Zh=function(){function e(t,n,r,i){_classCallCheck(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(z((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new ad(gd(i.injector.get(qh)).map(dd),i)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?G(this.loader.load(e)):md(e()).pipe(K((function(e){return e instanceof tt?Gc(e):G(t.compiler.compileModuleAsync(e))})))}}]),e}(),$h=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function Jh(e){throw e}function Qh(e,t,n){return t.parse("/")}function Xh(e,t){return Gc(null)}var Yh,ef,tf=((ef=function(){function e(t,n,r,i,s,o,a,u){var c=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=Jh,this.malformedUriErrorHandler=Qh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xh,afterPreactivation:Xh},this.urlHandlingStrategy=new $h,this.routeReuseStrategy=new Wh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(et),this.console=s.get(wa);var l=s.get(Da);this.isNgZoneEnabled=l instanceof Da,this.resetConfig(u),this.currentUrlTree=new _d(new kd([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Zh(o,a,(function(e){return c.triggerEvent(new $l(e))}),(function(e){return c.triggerEvent(new Jl(e))})),this.routerState=Kd(this.currentUrlTree,this.rootComponentType),this.transitions=new Kc({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(el((function(e){return 0!==e.id})),z((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),Ol((function(e){var r,i,s,o,a=!1,u=!1;return Gc(e).pipe(Ul((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Ol((function(e){var r,i,s,o,a=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||a)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Gc(e).pipe(Ol((function(e){var r=t.transitions.getValue();return n.next(new zl(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Jc:[e]})),Ol((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,i=t.configLoader,s=t.urlSerializer,o=t.config,function(e){return e.pipe(Ol((function(e){return function(e,t,n,r,i){return new kh(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe(z((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),Ul((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,n,r,i,s){return function(r){return r.pipe(K((function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new Nh(e,t,n,r,i,s).recognize()}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),i,s).pipe(z((function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})})));var o})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),Ul((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),Ul((function(e){var r=new Gl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(a&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,c=e.extractedUrl,l=e.source,d=e.restoredState,h=e.extras,f=new zl(u,t.serializeUrl(c),l,d);n.next(f);var g=Kd(c,t.rootComponentType).snapshot;return Gc(Object.assign(Object.assign({},e),{targetSnapshot:g,urlAfterRedirects:c,extras:Object.assign(Object.assign({},h),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Jc})),Kh((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,s=e.rawUrl,o=e.extras,a=o.skipLocationChange,u=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:s,skipLocationChange:!!a,replaceUrl:!!u})})),Ul((function(e){var n=new Kl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),z((function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,r=e.currentSnapshot,i=t.rootContexts,s=n._root,function e(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Hd(n);return t.children.forEach((function(t){!function(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,a=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Cd(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Cd(e.url,t.url)||!hd(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yd(e,t)||!hd(e.queryParams,t.queryParams);case"paramsChange":default:return!Yd(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new Ih(i)):(o.data=a.data,o._resolvedData=a._resolvedData),e(t,n,o.component?u?u.children:null:r,i,s),c&&s.canDeactivateChecks.push(new Sh(u&&u.outlet&&u.outlet.component||null,a))}else a&&xh(n,u,s),s.canActivateChecks.push(new Ih(i)),e(t,null,o.component?u?u.children:null:r,i,s)}(t,o[t.value.outlet],r,i.concat([t.value]),s),delete o[t.value.outlet]})),pd(o,(function(e,t){return xh(e,r.getContext(t),s)})),s}(s,r?r._root:null,i,[s.value]))});var n,r,i,s})),function(e,t){return function(n){return n.pipe(K((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,s=n.guards,o=s.canActivateChecks,a=s.canDeactivateChecks;return 0===a.length&&0===o.length?Gc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return G(e).pipe(K((function(e){return function(e,t,n,r,i){var s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Gc(s.map((function(s){var o,a=Ah(s,t,i);if(function(e){return e&&fh(e.canDeactivate)}(a))o=md(a.canDeactivate(e,t,n,r));else{if(!fh(a))throw new Error("Invalid CanDeactivate guard");o=md(a(e,t,n,r))}return o.pipe(bl())}))).pipe(Th()):Gc(!0)}(e.component,e.route,n,t,r)})),bl((function(e){return!0!==e}),!0))}(a,r,i,e).pipe(K((function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return G(t).pipe(Rl((function(t){return G([Eh(t.route.parent,r),Rh(t.route,r),Mh(e,t.path,n),Uh(e,t.route,n)]).pipe(Yc(),bl((function(e){return!0!==e}),!0))})),bl((function(e){return!0!==e}),!0))}(r,o,e,t):Gc(n)})),z((function(e){return Object.assign(Object.assign({},n),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),Ul((function(e){if(gh(e.guardsResult)){var n=sd('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),Ul((function(e){var n=new Wl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),el((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new Bl(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),Kh((function(e){if(e.guards.canActivateChecks.length)return Gc(e).pipe(Ul((function(e){var n=new ql(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),(n=t.paramsInheritanceStrategy,r=t.ngModule.injector,function(e){return e.pipe(K((function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;return i.length?G(i).pipe(Rl((function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return Gc({});if(1===i.length){var s=i[0];return Gh(e[s],t,n,r).pipe(z((function(e){return _defineProperty({},s,e)})))}var o={};return G(i).pipe(K((function(i){return Gh(e[i],t,n,r).pipe(z((function(e){return o[i]=e,e})))}))).pipe(gl(),z((function(){return o})))}(e._resolve,e,t,r).pipe(z((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),qd(e,n).resolve),null})))}(e.route,t,n,r)})),function(e,t){return arguments.length>=2?function(n){return _(xl(e,t),il(1),dl(t))(n)}:function(t){return _(xl((function(t,n,r){return e(t,n,r+1)})),il(1))(t)}}((function(e,t){return e})),z((function(t){return e}))):Gc(e)})))}),Ul((function(e){var n=new Zl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})));var n,r})),Kh((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,s=e.rawUrl,o=e.extras,a=o.skipLocationChange,u=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:s,skipLocationChange:!!a,replaceUrl:!!u})})),z((function(e){var n=function(e,t,n){var r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var s=function(t,n,r){return n.children.map((function(n){var i,s=_createForOfIteratorHelper(r.children);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(t.shouldReuseRoute(o.value.snapshot,n.value))return e(t,n,o)}}catch(a){s.e(a)}finally{s.f()}return e(t,n)}))}(t,n,r);return new Bd(i,s)}var o=t.retrieve(n.value);if(o){var a=o.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,a),a}var u,c=new Wd(new Kc((u=n.value).url),new Kc(u.params),new Kc(u.queryParams),new Kc(u.fragment),new Kc(u.data),u.outlet,u.component,u),l=n.children.map((function(n){return e(t,n)}));return new Bd(c,l)}(e,t._root,n?n._root:void 0);return new Gd(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})})),Ul((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(i=t.rootContexts,s=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},z((function(e){return new dh(s,e.targetRouterState,e.currentRouterState,o).activate(i),e}))),Ul({next:function(){a=!0},complete:function(){a=!0}}),(r=function(){if(!a&&!u){t.resetUrlToCurrentUrlTree();var r=new Bl(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new Dl(r))}),vl((function(r){if(u=!0,(a=r)&&a.ngNavigationCancelingError){var i=gh(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var s=new Bl(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(s),i?setTimeout((function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);return t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new Hl(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(c){e.reject(c)}}var a;return Jc})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){ud(e),this.config=e.map(dd),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,s=t.preserveQueryParams,o=t.queryParamsHandling,a=t.preserveFragment;sr()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:i,l=null;if(o)switch(o){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=s?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return th(t.root,t.root,t,r,i);var s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new nh(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var s={};return pd(r.outlets,(function(e,t){s[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:s}])}if(r.segmentPath)return[].concat(_toConsumableArray(e),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(e),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(_toConsumableArray(e),[r])}),[]);return new nh(n,t,r)}(n);if(s.toRoot())return th(t.root,new kd([],{}),t,r,i);var o=function(e,t,n){if(e.isAbsolute)return new rh(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new rh(n.snapshot._urlSegment,!0,0);var r=eh(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,s=n;s>i;){if(s-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new rh(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?oh(o.segmentGroup,o.index,s.commands):sh(o.segmentGroup,o.index,s.commands);return th(o.segmentGroup,a,t,r,i)}(u,this.currentUrlTree,e,l,c)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};sr()&&this.isNgZoneEnabled&&!Da.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=gh(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(gh(e))return yd(this.currentUrlTree,e,t);var n=this.parseUrl(e);return yd(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new jl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var s,o,a,u=this.getTransition();if(u&&"imperative"!==t&&"imperative"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"hashchange"==t&&"popstate"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"popstate"==t&&"hashchange"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);i?(s=i.resolve,o=i.reject,a=i.promise):a=new Promise((function(e,t){s=e,o=t}));var c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:s,reject:o,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),e}()).\u0275fac=function(e){xs()},ef.\u0275dir=yt({type:ef}),ef),nf=((Yh=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=t.events.subscribe((function(e){e instanceof jl&&i.updateTargetUrlAndHref()}))}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:rf(this.skipLocationChange),replaceUrl:rf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){sr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:rf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:rf(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||Yh)(As(tf),As(Wd),As(xu))},Yh.\u0275dir=yt({type:Yh,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Ds("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(Ys("href",t.href,cr),Os("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[ao]}),Yh);function rf(e){return""===e||!!e}var sf,of,af,uf=function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new cf,this.attachRef=null},cf=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new uf,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),lf=((sf=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new ga,this.deactivateEvents=new ga,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new df(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}()).\u0275fac=function(e){return new(e||sf)(As(cf),As(qo),As(bo),function(e,t){var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var s=n[i];if(wn(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if("name"===s)return n[i+1];i+=2}}return null}(qt()),As(Zi))},sf.\u0275dir=yt({type:sf,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),sf),df=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.childContexts=n,this.parent=r}return _createClass(e,[{key:"get",value:function(e,t){return e===Wd?this.route:e===cf?this.childContexts:this.parent.get(e,t)}}]),e}(),hf=function e(){_classCallCheck(this,e)},ff=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return Gc(null)}}]),e}(),gf=((af=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new Zh(n,r,(function(e){return t.triggerEvent(new $l(e))}),(function(e){return t.triggerEvent(new Jl(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(el((function(e){return e instanceof jl})),Rl((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(et);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(s.loadChildren&&!s.canLoad&&s._loadedConfig){var o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children))}}catch(a){i.e(a)}finally{i.f()}return G(r).pipe(Z(),z((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(K((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||af)(Je(tf),Je(su),Je(Ua),Je(ls),Je(hf))},af.\u0275prov=he({token:af,factory:af.\u0275fac}),af),vf=((of=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof zl?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jl&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof td&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new td(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){xs()},of.\u0275dir=yt({type:of}),of),pf=new je("ROUTER_CONFIGURATION"),mf=new je("ROUTER_FORROOT_GUARD"),yf=[Nu,{provide:Od,useClass:Id},{provide:tf,useFactory:function(e,t,n,r,i,s,o){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new tf(null,e,t,n,r,i,s,gd(o));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),a.errorHandler&&(l.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(l.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){var d=gu();l.events.subscribe((function(e){d.logGroup("Router Event: "+e.constructor.name),d.log(e.toString()),d.log(e),d.logGroupEnd()}))}return a.onSameUrlNavigation&&(l.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(l.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(l.relativeLinkResolution=a.relativeLinkResolution),l},deps:[Od,cf,Nu,ls,su,Ua,qh,pf,[function(){return function e(){_classCallCheck(this,e)}}(),new oe],[function(){return function e(){_classCallCheck(this,e)}}(),new oe]]},cf,{provide:Wd,useFactory:function(e){return e.routerState.root},deps:[tf]},{provide:su,useClass:uu},gf,ff,function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(vl((function(){return Gc(null)})))}}]),e}(),{provide:pf,useValue:{enableTracing:!1}}];function _f(){return new Qa("Router",tf)}var kf,bf=((kf=function(){function e(t,n){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[yf,If(t),{provide:mf,useFactory:Of,deps:[[tf,new oe,new ue]]},{provide:pf,useValue:n||{}},{provide:xu,useFactory:wf,deps:[mu,[new se(Uu),new oe],pf]},{provide:vf,useFactory:Cf,deps:[tf,ac,pf]},{provide:hf,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ff},{provide:Qa,multi:!0,useFactory:_f},[Af,{provide:va,multi:!0,useFactory:xf,deps:[Af]},{provide:Uf,useFactory:Pf,deps:[Af]},{provide:Ca,multi:!0,useExisting:Uf}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[If(t)]}}}]),e}()).\u0275mod=pt({type:kf}),kf.\u0275inj=fe({factory:function(e){return new(e||kf)(Je(mf,8),Je(tf,8))}}),kf);function Cf(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new vf(e,t,n)}function wf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Fu(e,t):new Mu(e,t)}function Of(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function If(e){return[{provide:ds,multi:!0,useValue:e},{provide:qh,multi:!0,useValue:e}]}var Sf,Af=((Sf=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new x}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(ku,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get(tf),i=e.injector.get(pf);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?Gc(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(pf),n=this.injector.get(gf),r=this.injector.get(vf),i=this.injector.get(tf),s=this.injector.get(ru);e===s.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||Sf)(Je(ls))},Sf.\u0275prov=he({token:Sf,factory:Sf.\u0275fac}),Sf);function xf(e){return e.appInitializer.bind(e)}function Pf(e){return e.bootstrapListener.bind(e)}var Tf,Rf,Ef,Uf=new je("Router Initializer"),Mf=function(e){return e[e.MemberOnly=1]="MemberOnly",e[e.Admin=2]="Admin",e[e.SuperAdmin=3]="SuperAdmin",e}({}),Ff=function(e){return e[e.None=0]="None",e[e.Account=1]="Account",e[e.OrgaUser=2]="OrgaUser",e}({}),Nf=function(e){return e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.Secure=3]="Secure",e[e.HighSecure=4]="HighSecure",e}({}),Df=function(e){return e[e.Benutzerkonto=1]="Benutzerkonto",e[e.SmsTan=2]="SmsTan",e[e.SmartCard=3]="SmartCard",e[e.SmartLogin=4]="SmartLogin",e[e.SocialLogin=8]="SocialLogin",e[e.StartSpezialTypen=10]="StartSpezialTypen",e[e.OrgaDependent_DID=20]="OrgaDependent_DID",e}({}),Lf=((Ef=function(){function e(){_classCallCheck(this,e),this.refreshMainView=new ga,this.tokenChanged=new ga,this.idmEvent=new ga,this.taskEvent=new ga}return _createClass(e,[{key:"publishRefreshMainViewEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.refreshMainView.emit({titleOnly:e})}},{key:"publishTokenChangedEvent",value:function(e){this.tokenChanged.emit(e),this.publishRefreshMainViewEvent()}},{key:"publishIdmEvent",value:function(e){this.idmEvent.emit(e)}},{key:"publishTaskEvent",value:function(e){this.taskEvent.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||Ef)},Ef.\u0275prov=he({token:Ef,factory:Ef.\u0275fac,providedIn:"root"}),Ef),Vf=((Rf=function(){function e(t,n){_classCallCheck(this,e),this.titleService=t,this.eventService=n,this.stringSettings={},this.booleanSettings={},this._initWithDefaults()}return _createClass(e,[{key:"_initWithDefaults",value:function(){this.booleanValueSet(this.afterRegistrationLoginIsRequired.name,!1),this.booleanValueSet(this.registeredAccountMustBeVerifiedByMail.name,!1),this.booleanValueSet(this.allowJoiningOrganizationByAccount.name,!1),this.booleanValueSet(this.showInfoPageAfterRegistration.name,!0),this.booleanValueSet(this.showInfoPageAfterLogin.name,!1),this.booleanValueSet(this.showInfoPageAfterGuardNotFulfilled.name,!1),this.booleanValueSet(this.showInfoPageAfterOrgaAdminGuardNotFulfilled.name,!0),this.booleanValueSet(this.allowDeletionOfAccountWithOrgaMemberships.name,!1),this.booleanValueSet(this.useGreenLikeColors.name,!1),this.booleanValueSet(this.useAccountName4DisplayingUsername.name,!0)}},{key:"getAllBooleanSettings",value:function(){return this.booleanSettings}},{key:"_stringValueGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.stringSettings[e];return t&&(this.stringSettings[e]=""),n||""}},{key:"_stringValueSet",value:function(e,t){this.stringSettings[e]=t}},{key:"_booleanValueGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.booleanSettings[e];return void 0===n?t:n}},{key:"booleanValueSet",value:function(e,t){this.booleanSettings[e]=t}},{key:"getRedirectUri",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._stringValueGet("redirectUri",e)}},{key:"redirectUriIsSet",value:function(){return!!this.getRedirectUri()}},{key:"setRedirectUri",value:function(e){this._stringValueSet("redirectUri",e)}},{key:"resetRedirectUri",value:function(){this.setRedirectUri("")}},{key:"getTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._stringValueGet("title",e)}},{key:"setTitle",value:function(e){var t=this;this._stringValueSet("title",e),this.titleService.setTitle("Gesamt-Frontend: "+e),setTimeout((function(){t.eventService.publishRefreshMainViewEvent(!0)}),0)}},{key:"getRequiredByGuardHelptext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._stringValueGet("requiredByGuardHelptext",e)}},{key:"resetRequiredByGuardHelptext",value:function(){this._stringValueSet("requiredByGuardHelptext","")}},{key:"setRequiredByGuardHelptext",value:function(e){this._stringValueSet("requiredByGuardHelptext",e)}},{key:"afterRegistrationLoginIsRequired",value:function(){return this._booleanValueGet(this.afterRegistrationLoginIsRequired.name)}},{key:"registeredAccountMustBeVerifiedByMail",value:function(){return this._booleanValueGet(this.registeredAccountMustBeVerifiedByMail.name)}},{key:"allowJoiningOrganizationByAccount",value:function(){return this._booleanValueGet(this.allowJoiningOrganizationByAccount.name)}},{key:"showInfoPageAfterRegistration",value:function(){return this._booleanValueGet(this.showInfoPageAfterRegistration.name)}},{key:"showInfoPageAfterLogin",value:function(){return this._booleanValueGet(this.showInfoPageAfterLogin.name)}},{key:"showInfoPageAfterGuardNotFulfilled",value:function(){return this._booleanValueGet(this.showInfoPageAfterGuardNotFulfilled.name)}},{key:"showInfoPageAfterOrgaAdminGuardNotFulfilled",value:function(){return this._booleanValueGet(this.showInfoPageAfterOrgaAdminGuardNotFulfilled.name)}},{key:"allowDeletionOfAccountWithOrgaMemberships",value:function(){return this._booleanValueGet(this.allowDeletionOfAccountWithOrgaMemberships.name)}},{key:"setAllowDeletionOfAccountWithOrgaMemberships",value:function(e){this.booleanValueSet(this.allowDeletionOfAccountWithOrgaMemberships.name,e)}},{key:"useGreenLikeColors",value:function(){return this._booleanValueGet(this.useGreenLikeColors.name)}},{key:"useAccountName4DisplayingUsername",value:function(){return this._booleanValueGet(this.useAccountName4DisplayingUsername.name)}}]),e}()).\u0275fac=function(e){return new(e||Rf)(Je(Bc),Je(Lf))},Rf.\u0275prov=he({token:Rf,factory:Rf.\u0275fac,providedIn:"root"}),Rf),zf=((Tf=function(){function e(t){_classCallCheck(this,e),this.settingsService=t,this.adminOfTheseSubOrgas=[],this.principal={authType:Ff.None},this.principal.credential={kennung:"",secret:""},this.principal.account={name:"",email:""},this.principal.orgaUser={name:""},this.principal.organization={name:""}}return _createClass(e,[{key:"_initAdminInfos",value:function(){this.adminOfTheseSubOrgas=[]}},{key:"setPrincipal",value:function(e){this.principal=Object.assign({},e),this.isLoggedIn()||this._initAdminInfos()}},{key:"isAdminOfCurrentOrga",value:function(e){var t,n,r=this.isLoggedInInOrga()&&(null===(n=null===(t=this.principal)||void 0===t?void 0:t.orgaUser)||void 0===n?void 0:n.adminType)>Mf.MemberOnly;return r&&e&&(r=this.principal.orgaUser.orgaId===e),r}},{key:"isSuperAdminOfCurrentOrga",value:function(e){var t,n,r=(null===(n=null===(t=this.principal)||void 0===t?void 0:t.orgaUser)||void 0===n?void 0:n.adminType)===Mf.SuperAdmin;return r&&e&&(r=this.principal.orgaUser.orgaId===e),r}},{key:"setSubOrgaIdsWithAdminsPermissions",value:function(e){var t;this.adminOfTheseSubOrgas=[],(t=this.adminOfTheseSubOrgas).push.apply(t,_toConsumableArray(e))}},{key:"isAdminOfSubOrga",value:function(e){return this.isAdminOfCurrentOrga()||this.adminOfTheseSubOrgas.includes(e)}},{key:"isSubAdminOfAtLeastOneSubOrga",value:function(){return this.adminOfTheseSubOrgas.length>0}},{key:"getPrincipal",value:function(){return this.principal}},{key:"safelyGetAccountId",value:function(){return this.principal&&this.principal.account&&this.principal.account.id||void 0}},{key:"isLoggedIn",value:function(){return this.principal.authType!==Ff.None}},{key:"getAuthType",value:function(){return this.principal&&this.principal.authType}},{key:"isLoggedInInOrga",value:function(){return this.principal&&this.principal.authType&&this.principal.authType===Ff.OrgaUser}},{key:"getAuthLevel",value:function(){return this.principal&&this.principal.authLevel}},{key:"getAuthLevelAsString",value:function(){return this.principal&&this.principal.authLevel&&Nf[this.principal.authLevel]}},{key:"getAccount",value:function(){return this.principal&&this.principal.account}},{key:"getOrgaUser",value:function(){return this.principal&&this.principal.orgaUser}},{key:"getCredential",value:function(){return this.principal&&this.principal.credential}},{key:"getOrgaName",value:function(){return this.principal&&this.principal.organization?this.principal.organization.name:""}},{key:"getUsersDisplayName",value:function(){return this.principal?this.principal.authType!==Ff.OrgaUser||this.settingsService.useAccountName4DisplayingUsername()?this.principal.account.name:this.principal.orgaUser.name:""}},{key:"determineAuthLevel",value:function(e){switch(e.type){case Df.Benutzerkonto:return Nf.Low;case Df.SmsTan:return Nf.Medium;case Df.SmartCard:case Df.SmartLogin:return Nf.Secure}return Nf.Low}},{key:"getAllAvailableOrgas",value:function(){return this.principal.availableOrgas||[]}},{key:"guardPrincipalIsThisAccount",value:function(e){if(!this.principal||!this.principal.account||this.principal.account.id!==e)throw new Error("Principal is not correct AccountId")}},{key:"guardPrincipalBelongsToThisOrga",value:function(e){if(!this.principal||!this.principal.orgaUser||this.principal.orgaUser.orgaId!==e)throw new Error("Principal is not a member of this orga")}},{key:"guardPrincipalIsOrgaAdmin",value:function(e){if(!this.principal||!this.principal.orgaUser||!this.isAdminOfCurrentOrga(e))throw new Error("Principal is not admin of this orga")}},{key:"guardPrincipalIsOrgaSuperAdmin",value:function(e){if(!this.principal||!this.principal.orgaUser||!this.isSuperAdminOfCurrentOrga(e))throw new Error("Principal is not super-admin of this orga")}},{key:"guardPrincipalIsSubOrgaAdmin",value:function(e){if(!this.principal||!this.principal.orgaUser||!this.isAdminOfCurrentOrga()&&!this.isAdminOfSubOrga(e))throw new Error("Principal is not sub-admin of given sub-organization")}}]),e}()).\u0275fac=function(e){return new(e||Tf)(Je(Vf))},Tf.\u0275prov=he({token:Tf,factory:Tf.\u0275fac,providedIn:"root"}),Tf),jf=function(e){return e[e.FolderRoot=1]="FolderRoot",e[e.Folder=2]="Folder",e[e.Fibu=3]="Fibu",e[e.Bilanz=4]="Bilanz",e[e.TaxPrivate=5]="TaxPrivate",e[e.TaxCorporation=6]="TaxCorporation",e}({});function Bf(e){return!e||!Array.isArray(e)||e.length<=0||"object"!=typeof e[0]?e:e.map((function(e){return Object.assign({},e)}))}var Hf,Gf=n("s3+Z"),Kf=function(e){return e[e.OrganisationCreated=1]="OrganisationCreated",e[e.OrgaUserRemoved=2]="OrgaUserRemoved",e[e.OrganisationRemoved=3]="OrganisationRemoved",e[e.SubOrganizationRemoved=4]="SubOrganizationRemoved",e[e.SubOrgaUserRemoved=5]="SubOrgaUserRemoved",e[e.AccountDeleted=6]="AccountDeleted",e}({}),Wf=((Hf=function(){function e(t){var n=this;_classCallCheck(this,e),this.eventService=t,this.SUBST_FOR_TOTAL_LICENCES=-11,this.SUBST_FOR_FREE_LICENCES=-22,this.productSettings=[],this.licences=[],this.isActive=!0,this._initProductSettingsList(),this._initLicenceForOrga(),this.eventService.idmEvent.pipe(Object(Gf.takeWhile)((function(){return n.isActive}))).subscribe((function(e){return n._onIdmEvent(e)}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"_onIdmEvent",value:function(e){switch(e.type){case Kf.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser.id);break;case Kf.OrganisationRemoved:this._onOrgaRemoval(e.organizationId)}}},{key:"_onOrgaUserRemoval",value:function(e){var t=this,n=this.licences.filter((function(t){return t.orgaUserId===e}));this.licences=this.licences.filter((function(t){return t.orgaUserId!==e})),n.forEach((function(e){if(e.numberOfLicences>0){var n=t.licences.find((function(n){return n.orgaId===e.orgaId&&n.orgaUserId===t.SUBST_FOR_FREE_LICENCES&&n.productId===e.productId}));n?n.numberOfLicences+=e.numberOfLicences:t.licences.push({orgaId:e.orgaId,orgaUserId:t.SUBST_FOR_FREE_LICENCES,productId:e.productId,numberOfLicences:e.numberOfLicences})}}))}},{key:"_onOrgaRemoval",value:function(e){this.licences=this.licences.filter((function(t){return t.orgaId!==e}))}},{key:"_initProductSettingsList",value:function(){this.productSettings.push({id:Hc.FIBU,name:"Finanzbuchf\xfchrung",licenceNeeded:!0,description:"Hier kannst du alles rund um die Finanzbuchf\xfchrung erledigen.",resourceTypes:[jf.Fibu]}),this.productSettings.push({id:Hc.FOLDERS_AND_DOCS,name:"Belegverwaltung",description:"Hier befasst du dich mit Ordnern, Belegen etc..",resourceTypes:[jf.FolderRoot,jf.Folder]}),this.productSettings.push({id:Hc.BILANZ,name:"Jahresabschluss",licenceNeeded:!0,description:"Hier k\xfcmmerst du dich um den Jahresabschluss.",resourceTypes:[jf.Bilanz]}),this.productSettings.push({id:Hc.TAX,name:"Steuern",licenceNeeded:!0,description:"Hier machst du die Steuer f\xfcr deinen Mandanten.",resourceTypes:[jf.TaxPrivate,jf.TaxCorporation]})}},{key:"_initLicenceForOrga",value:function(){this.licences.push({productId:Hc.BILANZ,orgaId:300,orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:4}),this.licences.push({productId:Hc.BILANZ,orgaId:300,orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:2}),this.licences.push({productId:Hc.BILANZ,orgaId:300,orgaUserId:400,numberOfLicences:1}),this.licences.push({productId:Hc.BILANZ,orgaId:300,orgaUserId:401,numberOfLicences:1}),this.licences.push({productId:Hc.TAX,orgaId:300,orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:1}),this.licences.push({productId:Hc.TAX,orgaId:300,orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:0}),this.licences.push({productId:Hc.TAX,orgaId:300,orgaUserId:400,numberOfLicences:1})}},{key:"checkLicence",value:function(e,t){return!!this.licences.find((function(n){return n.productId===e&&n.orgaUserId===t&&n.numberOfLicences>0}))}},{key:"getAllProductAndLicenceInfos",value:function(e,t){var n=this,r=Bf(this.productSettings);return e&&r.forEach((function(r){var i,s;if(r.licenceNeeded){r.orgaId=e,r.orgaUserId=t;var o=n.licences.find((function(t){return t.orgaId===e&&t.productId===r.id&&t.orgaUserId===n.SUBST_FOR_TOTAL_LICENCES}));r.totalLicences=null!==(i=null==o?void 0:o.numberOfLicences)&&void 0!==i?i:0,o=n.licences.find((function(t){return t.orgaId===e&&t.productId===r.id&&t.orgaUserId===n.SUBST_FOR_FREE_LICENCES})),r.freeLicences=null!==(s=null==o?void 0:o.numberOfLicences)&&void 0!==s?s:0,o=n.licences.find((function(n){return n.orgaId===e&&n.productId===r.id&&n.orgaUserId===t})),r.licencedToUser=(null==o?void 0:o.numberOfLicences)>0}})),r}},{key:"getProductAndLicenceInfo",value:function(e,t,n){var r,i,s=this,o=this.productSettings.find((function(t){return t.id===e}));if(o&&t&&o.licenceNeeded){o.orgaId=t,o.orgaUserId=n;var a=this.licences.find((function(e){return e.orgaId===t&&e.productId===o.id&&e.orgaUserId===s.SUBST_FOR_TOTAL_LICENCES}));o.totalLicences=null!==(r=null==a?void 0:a.numberOfLicences)&&void 0!==r?r:0,a=this.licences.find((function(e){return e.orgaId===t&&e.productId===o.id&&e.orgaUserId===s.SUBST_FOR_FREE_LICENCES})),o.freeLicences=null!==(i=null==a?void 0:a.numberOfLicences)&&void 0!==i?i:0,a=this.licences.find((function(e){return e.orgaId===t&&e.productId===o.id&&e.orgaUserId===n})),o.licencedToUser=(null==a?void 0:a.numberOfLicences)>0}return o&&Object.assign({},o)}},{key:"saveProductAndLicenceInfo",value:function(e){var t=this;e.forEach((function(e){e.licenceNeeded&&(t._setLicenceInfo(t.SUBST_FOR_TOTAL_LICENCES,e,e.totalLicences),t._setLicenceInfo(t.SUBST_FOR_FREE_LICENCES,e,e.freeLicences),t._setLicenceInfo(e.orgaUserId,e,e.licencedToUser?1:0))}))}},{key:"_setLicenceInfo",value:function(e,t,n){var r=this.licences.find((function(n){return n.orgaId===t.orgaId&&n.productId===t.id&&n.orgaUserId===e}));r?r.numberOfLicences=n:this.licences.push({productId:t.id,orgaId:t.orgaId,orgaUserId:e,numberOfLicences:n})}}]),e}()).\u0275fac=function(e){return new(e||Hf)(Je(Lf))},Hf.\u0275prov=he({token:Hf,factory:Hf.\u0275fac,providedIn:"root"}),Hf);function qf(e,t){1&e&&(Rs(0,"div"),Rs(1,"h5"),$s(2,"\xdcbersicht \xfcber alle Produkte"),Es(),Rs(3,"p"),$s(4,"Zum Anzeigen der f\xfcr dich verf\xfcgbaren Produkte bitte in Organisation einloggen..."),Es(),Es())}function Zf(e,t){1&e&&(Rs(0,"div"),Rs(1,"h5"),$s(2,"\xdcbersicht \xfcber alle Produkte und der dazugeh\xf6rigen Lizenzinfo."),Es(),Es())}var $f=function(){return[]};function Jf(e,t){if(1&e){var n=Ms();Rs(0,"a",11),Ds("click",(function(){Wt(n);var e=zs(2).index;return zs().gotoProduct(e)})),$s(1),Es()}if(2&e){var r=zs(2).index,i=zs();Ps("routerLink",la(2,$f)),xr(1),Qs("Zu ",i.getProductName(r),"")}}function Qf(e,t){1&e&&(Rs(0,"p",12),$s(1,"Du hast keine Lizenz f\xfcr das Produkt. "),Es())}function Xf(e,t){if(1&e&&(Rs(0,"div",8),Us(1,"br"),Is(2,Jf,2,3,"a",9),Is(3,Qf,2,0,"p",10),Es()),2&e){var n=zs().$implicit;xr(2),Ps("ngIf",n.licencedToUser),xr(1),Ps("ngIf",!n.licencedToUser)}}function Yf(e,t){if(1&e&&(Rs(0,"div",3),Rs(1,"div",4),Rs(2,"div",5),Rs(3,"span",6),$s(4),Es(),Rs(5,"p"),$s(6),Es(),Is(7,Xf,4,2,"div",7),Es(),Es(),Es()),2&e){var n=t.index,r=zs();xr(4),Js(r.getProductName(n)),xr(2),Js(r.getProductDescription(n)),xr(1),Ps("ngIf",r.loggedInInOrga)}}var eg,tg=((eg=function(){function e(t,n,r,i){_classCallCheck(this,e),this.router=t,this.principalService=n,this.settingsService=r,this.licenceService=i,this.usersDisplayName="",this.loggedInInOrga=!1,this.products=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Marktplatz der Produkte..."),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.loggedInInOrga&&(this.principal=this.principalService.getOrgaUser()),this._initMembers()}},{key:"_initMembers",value:function(){var e,t;this.products=this.licenceService.getAllProductAndLicenceInfos(null===(e=this.principal)||void 0===e?void 0:e.orgaId,null===(t=this.principal)||void 0===t?void 0:t.id),this.products.forEach((function(e){e.licenceNeeded||(e.licencedToUser=!0)}))}},{key:"getProductIdAsString",value:function(e){return this.products[e].id}},{key:"getProductName",value:function(e){return this.products[e].name}},{key:"getProductDescription",value:function(e){return this.products[e].description}},{key:"getProductLink",value:function(e){switch(this.products[e].id){case Hc.BILANZ:case Hc.FIBU:return"/generic-product/bilanz";case Hc.FOLDERS_AND_DOCS:return"/folderApp/main";case Hc.TAX:return"/generic-product/tax"}}},{key:"gotoProduct",value:function(e){this.router.navigateByUrl(this.getProductLink(e))}}]),e}()).\u0275fac=function(e){return new(e||eg)(As(tf),As(zf),As(Vf),As(Wf))},eg.\u0275cmp=ht({type:eg,selectors:[["app-marketplace"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"row","mt-1"],["class","col s10 m6",4,"ngFor","ngForOf"],[1,"col","s10","m6"],[1,"card","teal","darken-1"],[1,"card-content","white-text"],[1,"card-title"],["class","card-action_x",4,"ngIf"],[1,"card-action_x"],["class","orange-text",3,"routerLink","click",4,"ngIf"],["class","white-text",4,"ngIf"],[1,"orange-text",3,"routerLink","click"],[1,"white-text"]],template:function(e,t){1&e&&(Is(0,qf,5,0,"div",0),Is(1,Zf,3,0,"div",0),Rs(2,"div",1),Is(3,Yf,8,3,"div",2),Es()),2&e&&(Ps("ngIf",!t.loggedInInOrga),xr(1),Ps("ngIf",t.loggedInInOrga),xr(2),Ps("ngForOf",t.products))},directives:[Qu,$u,nf],styles:[".card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{height:12rem}"]}),eg),ng=function(e){return e.DefaultResourceDeletePermissionKey="l\xf6schen",e.FolderReadPermissionKey="lesen",e.FolderWritePermissionKey="schreiben",e.FolderDeletePermissionKey="l\xf6schen",e.FolderCreatePermissionKey="neuen Ordner anlegen",e.FibuBookPermissionKey="buchen",e.FibuEvaluatePermissionKey="auswerten",e.BilanzViewPermissionKey="pr\xfcfen",e.BilanzWritePermissionKey="erstellen",e.TaxViewPermissionKey="nachschauen",e.TaxWritePermissionKey="erstellen",e}({});function rg(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return n.lift(new sg(e,t))}}var ig,sg=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.inclusive=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new og(e,this.predicate,this.inclusive))}}]),e}(),og=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e)).predicate=r,s.inclusive=i,s.index=0,s}return _createClass(n,[{key:"_next",value:function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)}},{key:"nextOrComplete",value:function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}]),n}(v),ag=((ig=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.principalService=t,this.eventService=n,this.isActive=!0,this.resourceTypes=[],this.resources=[],this.subResources=[],this.accessRights=[],this._setTestResourceTypes(),this._setTestResources(),this._setTestSubResources(),this._setTestPermissions(),this.eventService.idmEvent.pipe(rg((function(){return r.isActive}))).subscribe((function(e){return r._onIdmEvent(e)}))}return _createClass(e,[{key:"setOrgaServiceHelper",value:function(e){this.orgaServiceHelper=e}},{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"assureServiceIsCreated",value:function(){}},{key:"getAllResourceTypes",value:function(){return Bf(this.resourceTypes)}},{key:"_findResourceType",value:function(e){return this.resourceTypes.find((function(t){return t.typeId===e}))}},{key:"createNewResource",value:function(e){var t=this;if(this._assertDynamicResource(e),this._assertCreatePermission4resource(e),this._findResource(e.typeId,e.id))throw new Error("Resource ist schon bekannt...");this.resources.push(e);var n=this._findResourceType(e.typeId);n.defaultPermissionsOnCreate&&n.defaultPermissionsOnCreate.forEach((function(n){t._setAccessRight(0,t._getPrincipal().id,t._getPrincipal().orgaId,e,n)}))}},{key:"renameResource",value:function(e){var t=this._findResource(e.typeId,e.id);t&&(t.displayName=e.displayName)}},{key:"_createNewStaticResource",value:function(e,t){var n={id:1,typeId:e.typeId,orgaId:t,displayName:e.displayName};this._assertStaticResource(n);var r=this.resources.filter((function(t){return t.typeId===e.typeId}));r&&r.length>0&&(n.id=1+Math.max.apply(Math,r.map((function(e){return e.id})))),this.resources.push(n)}},{key:"_removeAllSubResourcesOfResource",value:function(e){for(;;){var t=this.subResources.findIndex((function(t){return t.orgaResourceId===e.id}));if(!(t>=0))break;this.subResources.splice(t,1)}}},{key:"removeResource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ng.DefaultResourceDeletePermissionKey;if(this.hasPermission(e,t))return this._removeResource(e)}},{key:"_removeResource",value:function(e){for(;;){var t=this.accessRights.findIndex((function(t){return t.resourceType===e.typeId&&t.resourceId===e.id}));if(!(t>=0))break;this.accessRights.splice(t,1)}this._removeAllSubResourcesOfResource(e);var n=this.resources.findIndex((function(t){return t.id===e.id}));n>=0&&this.resources.splice(n,1)}},{key:"_findFakeDelegatedResource4Orga",value:function(e,t){var n=this.accessRights.filter((function(n){return n.resourceType===e.typeId&&n.resourceId===e.id&&n.proxyResourceOrgaId===t})).map((function(e){return e.resourceId}));if((n=n.filter((function(e,t){return n.indexOf(e)===t}))).length>1)throw new Error("Mehr als eine ProxyRessource gefunden ?!!?");if(1===n.length){var r=Object.assign({},e);return r.orgaId=t,r}}},{key:"_getAllResourcesOwnedByOrDelegatedToOrga",value:function(e,t){this._assertIsAdminOfCurrentOrga(t);var n=this.resources.filter((function(n){return n.typeId===e&&n.orgaId===t})),r=this._getAllDelegatedResources4Orga(e,t);return n.push.apply(n,_toConsumableArray(r)),Bf(n)}},{key:"getAllResourcesOfOrga",value:function(e){var t=this;this._assertIsAdminOfCurrentOrga(e);var n=this.resources.filter((function(t){return t.orgaId===e}));return this.getAllResourceTypes().forEach((function(r){var i=t._getAllDelegatedResources4Orga(r.typeId,e);n.push.apply(n,_toConsumableArray(i))})),Bf(n)}},{key:"_getAllResources4UserWithAtLeastOneOfGivenPermissions",value:function(e,t,n){var r=this;if(!n)return[];var i=this.accessRights.filter((function(r){return r.userId===e&&r.resourceType===t&&n.includes(r.permission)})).map((function(e){return e.resourceId}));i=i.filter((function(e,t){return i.indexOf(e)===t}));var s=[];return i.forEach((function(e){return s.push(r._findResource(t,e))})),Bf(s)}},{key:"_getAllResources4UserWithAllOfGivenPermissions",value:function(e,t,n){if(!n)return[];var r=this.accessRights.filter((function(n){return n.userId===e&&n.resourceType===t})),i=[];return r.forEach((function(e){var t=!0,s=function(i){if(!r.find((function(t){return t.resourceId===e.resourceId&&t.permission===n[i]})))return t=!1,"break"};for(var o in n)if("break"===s(o))break;t&&i.push(e.resourceId)})),i.filter((function(e,t){return i.indexOf(e)===t}))}},{key:"getAllResources4PrincipalWithAtLeastOnePermission",value:function(e){var t=this,n=this.accessRights.filter((function(n){return n.userId===t._getPrincipal().id&&n.resourceType===e})).map((function(e){return e.resourceId}));n=n.filter((function(e,t){return n.indexOf(e)===t}));var r=[];return n.forEach((function(n){return r.push(t._findResource(e,n))})),Bf(r)}},{key:"getAllPermissions4Principal4ResourceType",value:function(e){var t=this,n=this.accessRights.filter((function(n){return n.userId===t._getPrincipal().id&&n.resourceType===e}));return(n=n.filter((function(e,t){return n.indexOf(e)===t}))).forEach((function(e){var n;e.displayName=null===(n=t._findResource(e.resourceType,e.resourceId))||void 0===n?void 0:n.displayName})),Bf(n)}},{key:"getAllResourceIdsOwnedByOrDelegatedToOrga",value:function(e,t){this._assertIsAdminOfCurrentOrga(t);var n=this.resources.filter((function(n){return n.typeId===e&&n.orgaId===t})).map((function(e){return e.id})),r=this.accessRights.filter((function(n){return n.resourceType===e&&n.proxyResourceOrgaId===t})).map((function(e){return e.resourceId}));return r=r.filter((function(e,t){return r.indexOf(e)===t})),n.push.apply(n,_toConsumableArray(r)),n}},{key:"_getAllDelegatedResources4Orga",value:function(e,t){var n=this,r=[],i=this.accessRights.filter((function(n){return n.resourceType===e&&n.proxyResourceOrgaId===t})).map((function(e){return e.resourceId}));return(i=i.filter((function(e,t){return i.indexOf(e)===t}))).forEach((function(t){var i=n._findResource(e,t);r.push(i)})),r}},{key:"_findResource",value:function(e,t){return this.resources.find((function(n){return n.typeId===e&&n.id===t}))}},{key:"_findStaticResourceByTypeAndOrgaId",value:function(e){return this.resources.find((function(t){return t.typeId===e.typeId&&t.orgaId===e.orgaId}))}},{key:"_createSubResource",value:function(e){var t=0;this.subResources.forEach((function(e){e.id>t&&(t=e.id)}));var n=Object.assign(Object.assign({},e),{id:t+1});this.subResources.push(n)}},{key:"_findSubResource",value:function(e){return this.subResources.find((function(t){return t.id===e}))}},{key:"_removeSubResource",value:function(e){var t=this,n=this.subResources.findIndex((function(t){return t.id===e}));if(!(n<0)){var r=this.subResources[n];this.subResources.splice(n,1);var i=this._findResource(r.typeId,r.orgaResourceId);this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(r.subOrgaId).forEach((function(e){var n=t.orgaServiceHelper.findOrgaUserByOrgaUserId(e.orgaUserId);t._setPermissionsOfUser2resource(n,i,[],r.subOrgaId)}))}}},{key:"getAllResourcesOfSubOrgaByResourceType",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return this._getAllResourcesOwnedByOrDelegatedToOrga(e,t);this._assertIsSubAdminOfSubOrga(n);var r=this.subResources.filter((function(r){return r.orgaId===t&&r.subOrgaId===n&&r.typeId===e})).map((function(e){return e.orgaResourceId}));return Bf(this.resources.filter((function(t){return t.typeId===e&&r.includes(t.id)})))}},{key:"getAllSubResourcesOfSubOrga",value:function(e){return this._assertIsSubAdminOfSubOrga(e),Bf(this.subResources.filter((function(t){return t.subOrgaId===e})))}},{key:"changeSubResources",value:function(e,t){var n=this;return this._assertIsSubAdminOfSubOrga(e),t.forEach((function(t){if(t.id){if(!t.subOrgaId){var r=n._findSubResource(t.id);n._assertIsSameSubOrga(e,r.subOrgaId),n._removeSubResource(t.id)}}else n._assertIsSameSubOrga(e,t.subOrgaId),n._createSubResource(t)})),!0}},{key:"setPermissionsOfUser2resource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._assertIsSubAdminOfSubOrga(r),this._assertIsMemberOfCurrentOrga(e),this._assertIsResourceOfCurrentOrga(t),this._setPermissionsOfUser2resource(e,t,n,r)}},{key:"_setPermissionsOfUser2resource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._isForeignUser(e)?this._setPermissionsOfUser2resource4directForeignUser(e,t,n,r):this._isForeignOrga(e)?this._setPermissionsOfUser2resource4ForeignOrga(e,t,n,r):this._isForeignResourceOfUser(e,t)?this._setPermissionsOfUser2foreignResourceApplyDelegationPermission(e,t,n,r):this._setPermissionsOfUser2resource4ownUser(e,t,n,r)}},{key:"setPermissionsOfUser2staticResource",value:function(e,t,n){if(this._assertIsAdminOfCurrentOrga(e.orgaId),this._assertStaticResource(t),this._assertIsMemberOfCurrentOrga(e),!this._isOwnResource(t,e))throw new Error("Das geht f\xfcr statische Ressourcen noch nicht");var r=this._findStaticResourceByTypeAndOrgaId(t);if(r)return t.id=r.id,this._setPermissionsOfUser2resource4ownUser(e,t,n)}},{key:"hasPermission4staticResource",value:function(e,t){this._assertStaticResource(e);var n=this._findStaticResourceByTypeAndOrgaId(e);return!!n&&this.hasPermission(n,t)}},{key:"hasPermission4staticResource4administration",value:function(e,t,n){this._assertStaticResource(t),this._assertIsAdminOfCurrentOrga(t.orgaId);var r=this._findStaticResourceByTypeAndOrgaId(t);return!!r&&this._hasPermission(e.id,r,n)}},{key:"hasAdministratedPermission",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._assertIsSubAdminOfSubOrga(r),this._hasPermission4administration(t,e,n,r)}},{key:"_hasPermission",value:function(e,t,n){return!!this.accessRights.find((function(r){return r.userId===e&&r.resourceType===t.typeId&&r.resourceId===t.id&&r.permission===n}))}},{key:"hasPermission",value:function(e,t){var n=this._assertAndGetPrincipal().id;return this._hasPermission(n,e,t)}},{key:"_hasPermission4administration",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this._isForeignUser(e)?e.foreignUserId:e.id;return this._isForeignResource(t)||this._isForeignOrga(e)?!!this.accessRights.find((function(e){return e.userId===i&&e.resourceType===t.typeId&&e.resourceId===t.id&&e.permission===n&&void 0!==e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===r})):!!this.accessRights.find((function(e){return e.userId===i&&e.resourceType===t.typeId&&e.resourceId===t.id&&e.permission===n&&void 0===e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===r}))}},{key:"permissionIsEnabled4Administration",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._assertIsSubAdminOfSubOrga(r),!!this._isOwnResource(e)||!this._isForeignUserOrOrga(t)&&this._hasDelegatedPermissionToCurrentOrga(e,n)}},{key:"_setPermissionsOfUser2resource4ownUser",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._removeAllPermissionsOfUser4resource(e.id,t,void 0,i),n.forEach((function(n){return r._setAccessRight(i,e.id,e.orgaId,t,n,void 0)}))}},{key:"_setPermissionsOfUser2resource4directForeignUser",value:function(e,t,n,r){var i=this.orgaServiceHelper.findCorrespondingForeignOrgaUser(e);this._setPermissionsOfUser2resource4ownUser(i,t,n,r)}},{key:"_setPermissionsOfUser2foreignResourceApplyDelegationPermission",value:function(e,t,n,r){var i=this,s=e.orgaId;this._removeAllPermissionsOfUser4resource(e.id,t,s,r),n.forEach((function(n){return i._setAccessRight(r,e.id,e.orgaId,t,n,s)}))}},{key:"_setPermissionsOfUser2resource4ForeignOrga",value:function(e,t,n,r){var i=this,s=e.foreignOrgaId,o=this._getAllDelegatedPermissions4resource(e.id,s,t);this._removeAllPermissionsOfUser4resource(e.id,t,s,r),n.forEach((function(n){return i._setAccessRight(r,e.id,e.orgaId,t,n,s)}));var a=this._getAllDelegatedPermissions4resource(e.id,s,t);a.length<=0?this._removeProxyResourceAndAllPermissions2it(s,t):(a.forEach((function(e){var t=o.findIndex((function(t){return t===e}));t>=0&&o.splice(t,1)})),o.forEach((function(e){i._removePermission4resourceDelegatedFromAllUsersOfGivenOrga(s,t,e)})))}},{key:"_getNewUniqueId",value:function(){var e=0;return this.accessRights.forEach((function(t){t.id>e&&(e=t.id)})),e+1}},{key:"_isForeignUser",value:function(e){return!!e&&!!e.foreignUserId}},{key:"_isForeignOrga",value:function(e){return!!e.foreignOrgaId}},{key:"_isForeignUserOrOrga",value:function(e){return this._isForeignUser(e)||this._isForeignOrga(e)}},{key:"_isForeignResource",value:function(e){return!this._isOwnResource(e)}},{key:"_isForeignResourceOfUser",value:function(e,t){return t.orgaId!==e.orgaId}},{key:"_isOwnResource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getPrincipal();return!!e.orgaId&&e.orgaId===t.orgaId}},{key:"_isStaticResource",value:function(e){var t=this._findResourceType(e.typeId);return!(!t||t.dynamic)}},{key:"_isDynamicResource",value:function(e){var t=this._findResourceType(e.typeId);return!(!t||!t.dynamic)}},{key:"_assertAndGetPrincipal",value:function(){var e=this._getPrincipal();if(!(null==e?void 0:e.id))throw new Error("Principal not set to OrgaUser...");return e}},{key:"_assertIsAdminOfCurrentOrga",value:function(e){if(this._getPrincipal(),!this.principalService.isAdminOfCurrentOrga(e))throw new Error("AssertAdmin: principal is not an admin of orga")}},{key:"_assertIsSubAdminOfSubOrga",value:function(e){if(!this.principalService.isAdminOfSubOrga(e))throw new Error("AssertSubAdmin: principal is not an sub-admin of sub-orga")}},{key:"_assertIsSameSubOrga",value:function(e,t){if(e!==t)throw new Error("AssertSameSubOrga: subOrgaIds are not the same.")}},{key:"_assertIsMemberOfCurrentOrga",value:function(e){if(this._getPrincipal().orgaId!==e.orgaId)throw new Error("AssertMember: principal.orgaId !== user.orgaId");if(!this.orgaServiceHelper.findOrgaUserByOrgaUserId(e.id))throw new Error("AssertMember: user is not member of orga")}},{key:"_assertIsProxyResourceOfCurrentOrga",value:function(e){var t=this._findFakeDelegatedResource4Orga(e,this._getPrincipal().orgaId);if(!t||t.orgaId!==this._getPrincipal().orgaId)throw new Error("AssertResource: weder eigene Ressouce noch ProxyRessouce")}},{key:"_assertIsResourceOfCurrentOrga",value:function(e){if(this._getPrincipal().orgaId!==e.orgaId&&this._assertIsProxyResourceOfCurrentOrga(e),!this._findResource(e.typeId,e.id))throw new Error("AssertResource: resource does not exist")}},{key:"_assertStaticResource",value:function(e){if(!this._isStaticResource(e))throw new Error("Resource ist nicht statisch...")}},{key:"_assertDynamicResource",value:function(e){if(!this._isDynamicResource(e))throw new Error("Resource ist nicht dynamisch...")}},{key:"_assertCreatePermission4resource",value:function(e){var t=this._findResourceType(e.typeId),n=this._findStaticResourceByTypeAndOrgaId({id:-1,typeId:t.resourceType4CreatePermission,orgaId:e.orgaId});if(!n)throw new Error("Static Resource not found...");if(!this.hasPermission4staticResource(n,t.permission4CreatePermission))throw new Error("Principal does not have create-permission for resource")}},{key:"_onIdmEvent",value:function(e){switch(e.type){case Kf.OrganisationCreated:this._onOrganizationCreation(e.organizationId);break;case Kf.OrganisationRemoved:this._onOrganizationRemoval(e.organizationId);break;case Kf.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser);break;case Kf.SubOrganizationRemoved:this._onSubOrganizationRemoval(e.subOrganizationId);break;case Kf.SubOrgaUserRemoved:this._onSubOrgaUserRemoval(e.subOrganizationId,e.orgaUser)}}},{key:"_onOrganizationRemoval",value:function(e){var t=this;for(this.resources.filter((function(t){return t.orgaId===e})).forEach((function(e){return t._removeResource(e)}));;){var n=this.accessRights.findIndex((function(t){return t.usersOrgaId===e||t.resourceOwningOrgaId===e}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_onOrganizationCreation",value:function(e){var t=this;this.resourceTypes.filter((function(e){return!e.dynamic})).forEach((function(n){t._findStaticResourceByTypeAndOrgaId({id:-1,typeId:n.typeId,orgaId:e})||t._createNewStaticResource(n,e)}))}},{key:"_onSubOrganizationRemoval",value:function(e){var t=this,n=this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(e),r=this.getAllSubResourcesOfSubOrga(e);for(n.forEach((function(n){var i=t.orgaServiceHelper.findOrgaUserByOrgaUserId(n.orgaUserId);t._isForeignOrga(i)&&r.forEach((function(n){var r=t._findResource(n.typeId,n.orgaResourceId);t._setPermissionsOfUser2resource(i,r,[],e)}))})),this.subResources=this.subResources.filter((function(t){return t.subOrgaId!==e}));;){var i=this.accessRights.findIndex((function(t){return t.administratedViaSubOrgaId===e}));if(!(i>=0))break;this.accessRights.splice(i,1)}}},{key:"_onForeignOrgaSubUserRemoval",value:function(e,t){var n=this;this.getAllSubResourcesOfSubOrga(e).forEach((function(r){var i=n._findResource(r.typeId,r.orgaResourceId);n._setPermissionsOfUser2resource4ForeignOrga(t,i,[],e)}))}},{key:"_onSubOrgaUserRemoval",value:function(e,t){var n=this;if(!e)throw new Error("_onSubOrgaUserRemoval: subOrgaId not set!");this._isForeignOrga(t)?this._onForeignOrgaSubUserRemoval(e,t):function(){for(var r=n._isForeignUser(t)?t.foreignUserId:t.id;;){var i=n.accessRights.findIndex((function(t){return t.administratedViaSubOrgaId===e&&t.userId===r}));if(!(i>=0))break;n.accessRights.splice(i,1)}}()}},{key:"_onOrgaUserRemoval",value:function(e){this._isForeignUser(e)?this._removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId(e.foreignUserId,e.orgaId):this._isForeignOrga(e)?(this._removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId(e.foreignOrgaId,e.orgaId),this._removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId(e.foreignOrgaId,e.orgaId)):this._removeAllPermissionsOfUser(e.id)}},{key:"_assertPermissionRange",value:function(e,t){var n=this._findResourceType(e.typeId),r=this._findResource(e.typeId,e.id);if(!(n&&r&&n.possiblePermissions.includes(t)))throw new Error("Permission "+t+" not valid for type "+r.typeId)}},{key:"_setAccessRight",value:function(e,t,n,r,i,s){this._assertPermissionRange(r,i),this.accessRights.push({id:this._getNewUniqueId(),userId:t,usersOrgaId:n,resourceType:r.typeId,resourceId:r.id,resourceOwningOrgaId:r.orgaId,permission:i,proxyResourceOrgaId:s,administratedViaSubOrgaId:e})}},{key:"_getPrincipal",value:function(){var e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}},{key:"_getAllDelegatedPermissions4resource",value:function(e,t,n){var r=this.accessRights.filter((function(r){return r.userId===e&&r.proxyResourceOrgaId===t&&r.resourceType===n.typeId&&r.resourceId===n.id})).map((function(e){return e.permission}));return r.filter((function(e,t){return r.indexOf(e)===t}))}},{key:"_hasDelegatedPermissionToCurrentOrga",value:function(e,t){var n=this;return!!this.accessRights.find((function(r){return r.proxyResourceOrgaId===n._getPrincipal().orgaId&&r.resourceType===e.typeId&&r.resourceId===e.id&&r.permission===t}))}},{key:"_removeAllPermissionsOfUser4resource",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;;){var i=this.accessRights.findIndex((function(i){return i.userId===e&&i.resourceType===t.typeId&&i.resourceId===t.id&&i.proxyResourceOrgaId===n&&i.administratedViaSubOrgaId===r}));if(!(i>=0))break;this.accessRights.splice(i,1)}}},{key:"_removeAllPermissionsOfUser",value:function(e){console.log("accessrights length: "+this.accessRights.length),this.accessRights=this.accessRights.filter((function(t){return t.userId!==e})),console.log("accessrights length: "+this.accessRights.length)}},{key:"_removePermission4resourceDelegatedFromAllUsersOfGivenOrga",value:function(e,t,n){var r;do{(r=this.accessRights.findIndex((function(r){return r.resourceType===t.typeId&&r.resourceId===t.id&&r.permission===n&&r.usersOrgaId===e&&r.proxyResourceOrgaId===e})))>=0&&this.accessRights.splice(r,1)}while(r>=0)}},{key:"_removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.userId===e&&n.resourceOwningOrgaId===t&&void 0===n.proxyResourceOrgaId}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.usersOrgaId===e&&n.resourceOwningOrgaId===t&&void 0!==n.proxyResourceOrgaId}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.proxyResourceOrgaId===e&&n.resourceOwningOrgaId===t}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_removeProxyResourceAndAllPermissions2it",value:function(e,t){for(;;){var n=this.accessRights.findIndex((function(n){return n.proxyResourceOrgaId===e&&n.resourceType===t.typeId&&n.resourceId===t.id}));if(!(n>=0))break;this.accessRights.splice(n,1)}}},{key:"_setTestResourceTypes",value:function(){this.resourceTypes.push({typeId:jf.FolderRoot,dynamic:!1,displayName:"Belegverwaltung",possiblePermissions:[ng.FolderCreatePermissionKey]},{typeId:jf.Folder,dynamic:!0,displayName:"Ordner",possiblePermissions:[ng.FolderReadPermissionKey,ng.FolderWritePermissionKey,ng.FolderDeletePermissionKey],defaultPermissionsOnCreate:[ng.FolderReadPermissionKey],resourceType4CreatePermission:jf.FolderRoot,permission4CreatePermission:ng.FolderCreatePermissionKey},{typeId:jf.Fibu,dynamic:!1,displayName:"Finanzbuchf\xfchrung",possiblePermissions:[ng.FibuEvaluatePermissionKey,ng.FibuBookPermissionKey]},{typeId:jf.Bilanz,dynamic:!1,displayName:"Jahresabschluss",possiblePermissions:[ng.BilanzViewPermissionKey,ng.BilanzWritePermissionKey]},{typeId:jf.TaxPrivate,dynamic:!1,displayName:"Steuern f\xfcr Privatleute",possiblePermissions:[ng.TaxViewPermissionKey,ng.TaxWritePermissionKey]},{typeId:jf.TaxCorporation,dynamic:!1,displayName:"Steuern f\xfcr Unternehmen",possiblePermissions:[ng.TaxViewPermissionKey,ng.TaxWritePermissionKey]})}},{key:"_setTestResources",value:function(){this.resources.push({typeId:jf.FolderRoot,id:1,orgaId:300,displayName:"Belegverwaltung"},{typeId:jf.Folder,id:1,orgaId:300,displayName:"Notizen"},{typeId:jf.Folder,id:2,orgaId:300,displayName:"Steuersachen"},{typeId:jf.Folder,id:3,orgaId:300,displayName:"Golfausfl\xfcge"},{typeId:jf.Folder,id:4,orgaId:300,displayName:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{typeId:jf.Bilanz,id:20,orgaId:300,displayName:"Jahresabschluss"},{typeId:jf.TaxPrivate,id:30,orgaId:300,displayName:"Steuern f\xfcr Privatleute"},{typeId:jf.TaxCorporation,id:31,orgaId:300,displayName:"Steuern f\xfcr Unternehmen"},{typeId:jf.FolderRoot,id:2,orgaId:301,displayName:"Belegverwaltung"},{typeId:jf.Folder,id:10,orgaId:301,displayName:"Rechtliches"},{typeId:jf.Folder,id:11,orgaId:301,displayName:"Kassenarchiv"},{typeId:jf.FolderRoot,id:3,orgaId:302,displayName:"Belegverwaltung"},{typeId:jf.Folder,id:20,orgaId:302,displayName:"Finanzen"},{typeId:jf.Folder,id:21,orgaId:302,displayName:"Rechnungen"}),this._onOrganizationCreation(300),this._onOrganizationCreation(301),this._onOrganizationCreation(302)}},{key:"_setTestSubResources",value:function(){this.subResources.push({id:7e3,typeId:jf.Folder,orgaId:300,subOrgaId:1e3,orgaResourceId:1},{id:7001,typeId:jf.Folder,orgaId:300,subOrgaId:1001,orgaResourceId:1},{id:7005,typeId:jf.Folder,orgaId:300,subOrgaId:1e3,orgaResourceId:2},{id:7010,typeId:jf.Folder,orgaId:300,subOrgaId:1e3,orgaResourceId:4},{id:7100,typeId:jf.Folder,orgaId:302,subOrgaId:1100,orgaResourceId:20})}},{key:"_setTestPermissions",value:function(){this._setAccessRight(0,400,300,{typeId:jf.FolderRoot,id:1,orgaId:300},ng.FolderCreatePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:1,orgaId:300},ng.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:1,orgaId:300},ng.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:1,orgaId:300},ng.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:2,orgaId:300},ng.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:2,orgaId:300},ng.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:2,orgaId:300},ng.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:3,orgaId:300},ng.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:3,orgaId:300},ng.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:3,orgaId:300},ng.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Bilanz,id:20,orgaId:300},ng.BilanzViewPermissionKey),this._setAccessRight(0,400,300,{typeId:jf.Bilanz,id:20,orgaId:300},ng.BilanzWritePermissionKey),this._setAccessRight(0,401,300,{typeId:jf.Bilanz,id:20,orgaId:300},ng.BilanzViewPermissionKey),this._setAccessRight(0,400,300,{typeId:jf.TaxPrivate,id:30,orgaId:300},ng.TaxViewPermissionKey),this._setAccessRight(0,400,300,{typeId:jf.TaxPrivate,id:30,orgaId:300},ng.TaxWritePermissionKey),this._setAccessRight(0,400,300,{typeId:jf.TaxCorporation,id:31,orgaId:300},ng.TaxViewPermissionKey),this._setAccessRight(0,401,300,{typeId:jf.TaxPrivate,id:30,orgaId:300},ng.TaxViewPermissionKey),this._setAccessRight(0,401,300,{typeId:jf.Folder,id:1,orgaId:300},ng.FolderReadPermissionKey),this._setAccessRight(0,401,300,{typeId:jf.Folder,id:1,orgaId:300},ng.FolderWritePermissionKey),this._setAccessRight(0,401,300,{typeId:jf.Folder,id:2,orgaId:300},ng.FolderReadPermissionKey),this._setAccessRight(0,401,300,{typeId:jf.Folder,id:2,orgaId:300},ng.FolderWritePermissionKey),this._setAccessRight(0,401,300,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderReadPermissionKey),this._setAccessRight(0,401,300,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderWritePermissionKey),this._setAccessRight(0,405,300,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderReadPermissionKey,302),this._setAccessRight(0,405,300,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderWritePermissionKey,302),this._setAccessRight(0,420,302,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderReadPermissionKey,302),this._setAccessRight(0,421,302,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderReadPermissionKey,302),this._setAccessRight(0,421,302,{typeId:jf.Folder,id:4,orgaId:300},ng.FolderWritePermissionKey,302),this._setAccessRight(0,410,301,{typeId:jf.FolderRoot,id:2,orgaId:301},ng.FolderCreatePermissionKey),this._setAccessRight(0,410,301,{typeId:jf.Folder,id:10,orgaId:301},ng.FolderReadPermissionKey),this._setAccessRight(0,410,301,{typeId:jf.Folder,id:10,orgaId:301},ng.FolderWritePermissionKey),this._setAccessRight(0,410,301,{typeId:jf.Folder,id:10,orgaId:301},ng.FolderDeletePermissionKey),this._setAccessRight(0,410,301,{typeId:jf.Folder,id:11,orgaId:301},ng.FolderReadPermissionKey),this._setAccessRight(0,410,301,{typeId:jf.Folder,id:11,orgaId:301},ng.FolderWritePermissionKey),this._setAccessRight(0,410,301,{typeId:jf.Folder,id:11,orgaId:301},ng.FolderDeletePermissionKey),this._setAccessRight(0,411,301,{typeId:jf.Folder,id:10,orgaId:301},ng.FolderReadPermissionKey),this._setAccessRight(0,411,301,{typeId:jf.Folder,id:10,orgaId:301},ng.FolderWritePermissionKey),this._setAccessRight(0,411,301,{typeId:jf.Folder,id:11,orgaId:301},ng.FolderReadPermissionKey),this._setAccessRight(0,411,301,{typeId:jf.Folder,id:11,orgaId:301},ng.FolderWritePermissionKey),this._setAccessRight(0,412,301,{typeId:jf.Folder,id:10,orgaId:301},ng.FolderWritePermissionKey),this._setAccessRight(0,412,301,{typeId:jf.Folder,id:11,orgaId:301},ng.FolderWritePermissionKey),this._setAccessRight(0,420,302,{typeId:jf.FolderRoot,id:3,orgaId:302},ng.FolderCreatePermissionKey),this._setAccessRight(0,420,302,{typeId:jf.Folder,id:20,orgaId:302},ng.FolderReadPermissionKey),this._setAccessRight(0,420,302,{typeId:jf.Folder,id:20,orgaId:302},ng.FolderWritePermissionKey),this._setAccessRight(0,420,302,{typeId:jf.Folder,id:20,orgaId:302},ng.FolderDeletePermissionKey),this._setAccessRight(0,420,302,{typeId:jf.Folder,id:21,orgaId:302},ng.FolderReadPermissionKey),this._setAccessRight(0,420,302,{typeId:jf.Folder,id:21,orgaId:302},ng.FolderWritePermissionKey),this._setAccessRight(0,420,302,{typeId:jf.Folder,id:21,orgaId:302},ng.FolderDeletePermissionKey),this._setAccessRight(0,421,302,{typeId:jf.Folder,id:20,orgaId:302},ng.FolderReadPermissionKey),this._setAccessRight(0,421,302,{typeId:jf.Folder,id:20,orgaId:302},ng.FolderWritePermissionKey),this._setAccessRight(0,421,302,{typeId:jf.Folder,id:21,orgaId:302},ng.FolderReadPermissionKey),this._setAccessRight(0,421,302,{typeId:jf.Folder,id:21,orgaId:302},ng.FolderWritePermissionKey)}}]),e}()).\u0275fac=function(e){return new(e||ig)(Je(zf),Je(Lf))},ig.\u0275prov=he({token:ig,factory:ig.\u0275fac,providedIn:"root"}),ig);function ug(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"h5"),$s(2),Es(),Rs(3,"p"),$s(4,"Zum Anzeigen der detaillierten Informationen bitte in Organisation einloggen..."),Es(),Es()),2&e){var n=zs();xr(2),Qs("Lizenz- und Rechteinfo f\xfcr das Produkt ",n.product.name,"")}}function cg(e,t){1&e&&(Rs(0,"p"),$s(1,"Du besitzt eine Lizenz f\xfcr das Produkt und darfst es somit nutzen."),Es())}function lg(e,t){1&e&&(Rs(0,"p"),$s(1,"Du besitzt keine Lizenz f\xfcr das Produkt."),Es())}function dg(e,t){1&e&&(Rs(0,"p"),$s(1,"Du hast keinerlei - das Produkt betreffende - Freigaben."),Es())}function hg(e,t){1&e&&(Rs(0,"p"),$s(1,"Du hast folgende - das Produkt betreffende - Freigaben:"),Es())}function fg(e,t){if(1&e&&(Rs(0,"li"),Rs(1,"span",4),$s(2),Es(),Rs(3,"span",5),$s(4),Es(),Rs(5,"span",6),$s(6),Es(),Es()),2&e){var n=t.$implicit;xr(2),Qs(" ",n.displayName," "),xr(2),Qs(" ",n.resourceId," "),xr(2),Qs(" ",n.permission," ")}}function gg(e,t){if(1&e&&(Rs(0,"ul",2),Rs(1,"li",3),Rs(2,"span",4),$s(3," Ressourcename "),Es(),Rs(4,"span",5),$s(5," RessourceId "),Es(),Rs(6,"span",6),$s(7," Freigabe "),Es(),Es(),Is(8,fg,7,3,"li",7),Es()),2&e){var n=zs(2);xr(8),Ps("ngForOf",n.product.permissions4User)}}function vg(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"h5"),$s(2),Es(),Rs(3,"p"),$s(4),Es(),Rs(5,"p"),$s(6),Es(),Is(7,cg,2,0,"p",0),Is(8,lg,2,0,"p",0),Is(9,dg,2,0,"p",0),Is(10,hg,2,0,"p",0),Is(11,gg,9,1,"ul",1),Es()),2&e){var n=zs();xr(2),Qs("Lizenz- und Rechteinfo f\xfcr das Produkt ",n.product.name,""),xr(2),Qs("Deine Organisation hat insgesamt ",n.product.totalLicences," Lizenzen f\xfcr das Produkt gekauft."),xr(2),Qs("",n.product.freeLicences," Lizenzen sind noch keinem Benutzer zugeordnet und damit frei."),xr(1),Ps("ngIf",n.product.licencedToUser),xr(1),Ps("ngIf",!n.product.licencedToUser),xr(1),Ps("ngIf",0==n.product.permissions4User.length),xr(1),Ps("ngIf",n.product.permissions4User.length>0),xr(1),Ps("ngIf",n.product.permissions4User.length>0)}}var pg,mg,yg,_g=((pg=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.route=t,this.principalService=n,this.settingsService=r,this.licenceService=i,this.accessService=s,this.loggedInInOrga=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t,n,r,i,s=this,o=null!==(t=null===(e=this.route.snapshot.data)||void 0===e?void 0:e.dataProductId)&&void 0!==t?t:Hc.BILANZ;this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.orgaUser=this.principalService.getOrgaUser(),this.product=this.licenceService.getProductAndLicenceInfo(o,null===(n=this.orgaUser)||void 0===n?void 0:n.orgaId,null===(r=this.orgaUser)||void 0===r?void 0:r.id),this.settingsService.setTitle("Beispielprodukt: "+this.product.name),this.loggedInInOrga&&(this.product.permissions4User=[],null===(i=this.product.resourceTypes)||void 0===i||i.forEach((function(e){var t;(t=s.product.permissions4User).push.apply(t,_toConsumableArray(s.accessService.getAllPermissions4Principal4ResourceType(e)))})))}}]),e}()).\u0275fac=function(e){return new(e||pg)(As(Wd),As(zf),As(Vf),As(Wf),As(ag))},pg.\u0275cmp=ht({type:pg,selectors:[["app-generic-product"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","liste",4,"ngIf"],[1,"liste"],[1,"valign-wrapper"],[1,"list-item-text-left"],[1,"list-item-text","small"],[1,"list-item-text"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(Is(0,ug,5,1,"div",0),Is(1,vg,12,8,"div",0)),2&e&&(Ps("ngIf",!t.loggedInInOrga),xr(1),Ps("ngIf",t.loggedInInOrga))},directives:[Qu,$u],styles:[".list-item-text[_ngcontent-%COMP%], .list-item-text-left[_ngcontent-%COMP%]{width:15em}.small[_ngcontent-%COMP%]{width:10em}"]}),pg),kg=function(e){return e[e.Privat=1]="Privat",e[e.Unternehmen=2]="Unternehmen",e[e.Kanzlei=3]="Kanzlei",e}({}),bg=function(e){return e[e.AccountVerified=1]="AccountVerified",e[e.AccountVerificationDeclined=2]="AccountVerificationDeclined",e[e.OrgaUserInvitationDeclined=3]="OrgaUserInvitationDeclined",e[e.OrgaUserInvitationAccepted=4]="OrgaUserInvitationAccepted",e}({}),Cg=((yg=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.settingsService=t,this.eventService=n,this.principalService=r,this.accounts=[{id:100,verified:!0,name:"System Admin",email:"sysadmin@bk"},{id:110,verified:!0,name:"Klaus",email:"klaus@bk"},{id:111,name:"Simone",email:"simone@bk"},{id:120,verified:!0,name:"Martin",email:"martin@bk"},{id:121,name:"Sonja",email:"sonja@bk"},{id:122,verified:!0,name:"Kasse Kanzlei Palmengarten",email:"dummy@martin"},{id:130,verified:!0,name:"Tom",email:"tom@bk"},{id:131,name:"Petra",email:"petra@bk"},{id:140,verified:!0,name:"Resi",email:"resi@bk"}],this.creds=[{id:200,accountId:100,kennung:"sysadmin@bk",secret:"test",type:Df.Benutzerkonto},{id:210,accountId:110,kennung:"klaus@bk",secret:"test",type:Df.Benutzerkonto},{id:211,accountId:110,kennung:"klaus@sc",secret:"test",type:Df.SmartCard},{id:212,accountId:110,kennung:"",secret:"",type:Df.SocialLogin,provider:"google",userIdFromProvider:"113153024055027519050"},{id:215,accountId:111,kennung:"simone@bk",secret:"test",type:Df.Benutzerkonto},{id:216,accountId:111,kennung:"simone@sc",secret:"test",type:Df.SmartCard},{id:220,accountId:120,kennung:"martin@bk",secret:"test",type:Df.Benutzerkonto},{id:221,accountId:120,kennung:"martin@st",secret:"test",type:Df.SmsTan},{id:222,accountId:120,kennung:"martin@sc",secret:"test",type:Df.SmartCard},{id:223,accountId:120,orgaId:301,kennung:"martin@did",secret:"test",type:Df.OrgaDependent_DID},{id:224,accountId:120,orgaId:999,kennung:"martinNoOrga@did",secret:"test",type:Df.OrgaDependent_DID},{id:225,accountId:121,kennung:"sonja@bk",secret:"test",type:Df.Benutzerkonto},{id:227,accountId:122,orgaId:301,kennung:"kasse@martin",secret:"test",type:Df.OrgaDependent_DID},{id:230,accountId:130,kennung:"tom@bk",secret:"test",type:Df.Benutzerkonto},{id:231,accountId:130,kennung:"tom@sc",secret:"test",type:Df.SmartCard},{id:235,accountId:131,kennung:"petra@bk",secret:"test",type:Df.Benutzerkonto},{id:240,accountId:140,kennung:"resi@bk",secret:"test",type:Df.Benutzerkonto},{id:241,accountId:140,kennung:"resi@sc",secret:"test",type:Df.SmartCard}],this.organizations=[{id:300,name:"Kanzlei Heinzelmann",type:kg.Kanzlei},{id:301,name:"Kanzlei Palmengarten",type:kg.Kanzlei},{id:302,name:"Holzhandel Grubinger",type:kg.Unternehmen},{id:303,name:"Familie Martin privat",type:kg.Privat}],this.orgaUsers=[{id:400,accountId:110,orgaId:300,name:"Klaus Heinzelmann",adminType:Mf.SuperAdmin},{id:401,accountId:111,orgaId:300,name:"Simone Heinzelmann",adminType:Mf.Admin},{id:10401,orgaId:300,name:"Hans Fallada"},{id:10402,orgaId:300,name:"Friedrich Schiller"},{id:10403,orgaId:300,name:"Wolfgang G\xf6the"},{id:10404,orgaId:300,name:"Rainer Maria Rilke"},{id:10405,orgaId:300,name:"G\xfcnther Grass"},{id:10406,orgaId:300,name:"Heinrich Heine"},{id:405,orgaId:300,foreignOrgaId:302,name:"Mandant Grubinger"},{id:407,orgaId:300,foreignUserId:421,name:"Petra - Mandant Grubinger"},{id:410,accountId:120,orgaId:301,name:"Martin Palmengarten",adminType:Mf.SuperAdmin},{id:411,accountId:121,orgaId:301,name:"Sonja Hohlraab"},{id:412,accountId:122,orgaId:301,name:"Kasse von Kanzlei Palmengarten"},{id:420,accountId:130,orgaId:302,name:"Tom Grubinger",adminType:Mf.SuperAdmin},{id:421,accountId:131,orgaId:302,name:"Petra Elfenbein"},{id:430,accountId:120,orgaId:303,name:"Martin privat",adminType:Mf.SuperAdmin}],this.subOrganizations=[{id:1e3,orgaId:300,name:"Filiale F\xfcrth"},{id:1001,orgaId:300,name:"Filiale N\xfcrnberg"},{id:1100,orgaId:302,name:"Eigene Buchhaltung"}],this.subOrgaUsers=[{id:5e3,orgaId:300,orgaUserId:400,subOrgaId:1e3,subAdmin:!0},{id:5001,orgaId:300,orgaUserId:400,subOrgaId:1001,subAdmin:!0},{id:5005,orgaId:300,orgaUserId:401,subOrgaId:1e3},{id:5010,orgaId:300,orgaUserId:405,subOrgaId:1e3},{id:5011,orgaId:300,orgaUserId:407,subOrgaId:1e3},{id:5100,orgaId:302,orgaUserId:420,subOrgaId:1100,subAdmin:!0},{id:5101,orgaId:302,orgaUserId:421,subOrgaId:1100,subAdmin:!1}],this.eventService.taskEvent.subscribe((function(e){return i._onTaskEvent(e)}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){}},{key:"_onTaskEvent",value:function(e){switch(e.type){case bg.AccountVerified:this._updateAccountVerificationFlag(e.account.id);break;case bg.AccountVerificationDeclined:this._deleteAccount(e.account.id);break;case bg.OrgaUserInvitationDeclined:this._onOrgaUserRemoval(e.orgaUser);break;case bg.OrgaUserInvitationAccepted:this._onOrgaUserInvitationAccepted(e.account.id,e.orgaUser.id)}}},{key:"_onOrgaUserInvitationAccepted",value:function(e,t){var n=this.findAccountById(e),r=this.orgaUsers.find((function(e){return e.id===t}));n&&r&&(r.accountId=n.id)}},{key:"_guardArgument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null==e){if(t)throw new Error("Argument <"+t+"> is null or undefined!");throw new Error("Argument is null or undefined!")}}},{key:"login",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.provider)t=this.creds.find((function(t){return t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider}));else{if(!e.kennung||0===e.kennung.length)return{authType:Ff.None};t=this.creds.find((function(t){return t.kennung.toLowerCase()===e.kennung.toLowerCase()}))}if(!t)return{authType:Ff.None};if(e.secret.length>0&&e.secret!==t.secret)return{authType:Ff.None};var i=this.accounts.find((function(e){return e.id===t.accountId}));if(this.settingsService.registeredAccountMustBeVerifiedByMail()&&!i.verified&&!r)return{authType:Ff.None};var s=[];if(t.type>Df.StartSpezialTypen){if(!t.orgaId)return console.log("OrgaDependent Credential, but no orgaId => login failed..."),{authType:Ff.None};var o=this.orgaUsers.find((function(e){return e.accountId===i.id&&e.orgaId===t.orgaId}));if(!o)return console.log("OrgaDependent Credential, but orgaUser not found => login failed..."),{authType:Ff.None};s.push(o)}else this.orgaUsers.forEach((function(e){e.accountId===i.id&&s.push(e)}));if(s.length<=0)return{authType:Ff.Account,credential:Object.assign({},t),account:Object.assign({},i)};var a=[];s.forEach((function(e){a.push(n.organizations.find((function(t){return t.id===e.orgaId})))}));var u={authType:Ff.Account,credential:Object.assign({},t),account:Object.assign({},i),availableOrgas:Bf(a)};return 1===a.length&&(u.authType=Ff.OrgaUser,u.orgaUser=Object.assign({},s[0]),u.organization=a[0]),u}},{key:"register",value:function(e,t){if(this._checkAccountIsValid(e)&&this._checkCredentialIsValid(t)){var n=this._addNewAccount(e);t.accountId=n.id;var r=this._addNewCredential(t);return this.login(r,!0)}}},{key:"addNewCredential",value:function(e){if(this.principalService.guardPrincipalIsThisAccount(e.accountId),this._checkCredentialIsValid(e))return Object.assign({},this._addNewCredential(e))}},{key:"getAllCredentials",value:function(e){return e?(this.principalService.guardPrincipalIsThisAccount(e),Bf(this.creds.filter((function(t){return t.accountId===e})))):[]}},{key:"removeCredential",value:function(e){var t=this.creds.findIndex((function(t){return t.id===e}));t>=0&&(this.principalService.guardPrincipalIsThisAccount(this.creds[t].accountId),this.creds.splice(t,1))}},{key:"_checkCredentialIsValid",value:function(e){if(e.provider){if(!e.userIdFromProvider)return!1;if(this.creds.find((function(t){return t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider})))return!1}else{if(!e.kennung||e.kennung.length<3)return!1;if(this.creds.find((function(t){return t.kennung.toLowerCase()===e.kennung.toLowerCase()})))return!1}return!0}},{key:"_addNewCredential",value:function(e){var t=0;return this.creds.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1,this.creds.push(e),e}},{key:"_deleteAllCredentialsOfAccount",value:function(e){this.creds=this.creds.filter((function(t){return t.accountId!==e}))}},{key:"findAccountByMail",value:function(e){var t=this.accounts.find((function(t){return t.email.toLowerCase()===e.toLowerCase()}));return t?Object.assign({},t):void 0}},{key:"findAccountById",value:function(e){var t=this.accounts.find((function(t){return t.id===e}));return t?Object.assign({},t):void 0}},{key:"updateAccount",value:function(e){if(this.principalService.guardPrincipalIsThisAccount(e.id),!this._checkAccountIsValid(e))return!1;var t=this.accounts.find((function(t){return t.id===e.id}));return t&&(t.name=e.name,t.email=e.email,t.verified=e.verified),!!t}},{key:"_updateAccountVerificationFlag",value:function(e){var t=this.accounts.find((function(t){return t.id===e}));return t&&(t.verified=!0),!!t}},{key:"deleteAccount",value:function(e){return this.principalService.guardPrincipalIsThisAccount(e),this._deleteAccount(e)}},{key:"_deleteAccount",value:function(e){return!(this._accountIsMemberInAtLeastOneOrga(e)&&!this.settingsService.allowDeletionOfAccountWithOrgaMemberships()||!this.accounts.find((function(t){return t.id===e}))||(this._deleteAllOrgaUsersOfAccount(e),this._deleteAllCredentialsOfAccount(e),this._removeAccountFromList(e),this.eventService.publishIdmEvent({type:Kf.AccountDeleted,accountId:e}),0))}},{key:"_accountIsMemberInAtLeastOneOrga",value:function(e){return void 0!==this.orgaUsers.find((function(t){return t.accountId===e}))}},{key:"_checkAccountIsValid",value:function(e){if(!e.name||e.name.length<3)return!1;var t=this.accounts.find((function(t){return t.email.toLowerCase()===e.email.toLowerCase()}));return!t||e.id===t.id}},{key:"_addNewAccount",value:function(e){var t=0;return this.accounts.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1,this.accounts.push(e),e}},{key:"_removeAccountFromList",value:function(e){var t=this.accounts.findIndex((function(t){return t.id===e}));t>=0&&this.accounts.splice(t,1)}},{key:"isForeignUser",value:function(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}},{key:"getAllOrgaUsers",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return[];this.principalService.guardPrincipalBelongsToThisOrga(e);var r=Bf(this.orgaUsers.filter((function(t){return t.orgaId===e})));return n&&(r=r.filter((function(e){return!t.isForeignUser(e)}))),r}},{key:"getAllOrgaUsers4SubOrga",value:function(e,t){if(this.principalService.guardPrincipalIsSubOrgaAdmin(t),void 0===t||0===t)return this.getAllOrgaUsers(e);var n=this.subOrgaUsers.filter((function(e){return e.subOrgaId===t})).map((function(e){return e.orgaUserId}));return Bf(this.orgaUsers.filter((function(e){return n.includes(e.id)})))}},{key:"updateOrgaUser",value:function(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this.orgaUsers.find((function(t){return t.id===e.id}));return t&&(t.name=e.name,t.adminType=e.adminType),t}},{key:"findOrgaUserByAccountId",value:function(e,t){if(e&&t){var n=this.orgaUsers.find((function(n){return n.orgaId===e&&n.accountId===t}));return n&&Object.assign({},n)}}},{key:"accountHasAnyOrgaMembership",value:function(e){return this.principalService.guardPrincipalIsThisAccount(e),!!this.orgaUsers.find((function(t){return t.accountId===e}))}},{key:"findForeignUserByOrgaId",value:function(e,t){if(this.principalService.guardPrincipalBelongsToThisOrga(e),e&&t){var n=this.orgaUsers.find((function(n){return n.orgaId===e&&n.foreignUserId===t}));return n&&Object.assign({},n)}}},{key:"_findOrgaUserById",value:function(e){if(e)return this.orgaUsers.find((function(t){return t.id===e}))}},{key:"findOrgaUserById",value:function(e){var t=this._findOrgaUserById(e);return this.principalService.guardPrincipalIsOrgaAdmin(null==t?void 0:t.orgaId),t&&Object.assign({},t)}},{key:"findCorrespondingForeignOrgaUser",value:function(e){if(!e.foreignUserId)throw new Error("Method findCorrespondingForeignOrgaUser called with wrong orgaUser-Type");this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this._findOrgaUserById(e.foreignUserId);return t&&Object.assign({},t)}},{key:"_findAllDirectProxyUsersOfUser",value:function(e){return this.orgaUsers.filter((function(t){return t.foreignUserId===e.id}))}},{key:"_addNewOrgaUser",value:function(e){var t=0;return this.orgaUsers.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1,this.orgaUsers.push(e),e}},{key:"_deleteAllOrgaUsersOfAccount",value:function(e){var t=this;this.orgaUsers.filter((function(t){return t.accountId===e})).forEach((function(e){return t._onOrgaUserRemoval(e)}))}},{key:"_isAdmin",value:function(e){var t=this._findOrgaUserById(e);return!!t&&(!!(t.adminType&&t.adminType>=Mf.Admin)||!this.orgaUsers.find((function(e){return e.orgaId===t.orgaId&&e.adminType>=Mf.Admin}))&&this.orgaUsers.findIndex((function(t){return t.id===e}))===this.orgaUsers.findIndex((function(e){return e.orgaId===t.orgaId})))}},{key:"_onOrgaUserRemoval",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return!1;this._removeAllSubUsersOfOrgaUser(e);var r=this._findAllDirectProxyUsersOfUser(e);r&&r.forEach((function(e){return t._onOrgaUserRemoval(e)}));var i=this.orgaUsers.findIndex((function(t){return t.id===e.id}));return i>=0&&(this.orgaUsers.splice(i,1),n&&this.eventService.publishIdmEvent({type:Kf.OrgaUserRemoved,orgaUser:e}),!0)}},{key:"getAllSubOrgaUsers4SubOrga",value:function(e){return this.principalService.guardPrincipalIsSubOrgaAdmin(e),Bf(this.subOrgaUsers.filter((function(t){return t.subOrgaId===e})))}},{key:"changeSubOrgaUsers",value:function(e){var t=this,n=this.principalService.getOrgaUser().orgaId;return this.principalService.guardPrincipalIsOrgaAdmin(n),e.forEach((function(e){if(e.orgaId!==n)throw new Error("Method changeSubOrgaUsers called with wrong orgaId!")})),e.forEach((function(e){var n=t.subOrgaUsers.findIndex((function(t){return t.id===e.id}));n>=0?e.subOrgaId?t.subOrgaUsers[n].subAdmin=e.subAdmin:t._removeSubOrgaUser(e.id):t._createSubUser(e)})),!0}},{key:"_removeSubOrgaUser",value:function(e){var t=this.subOrgaUsers.findIndex((function(t){return t.id===e}));if(t>=0){var n=this.subOrgaUsers[t];return this.subOrgaUsers.splice(t,1),this.eventService.publishIdmEvent({type:Kf.SubOrgaUserRemoved,subOrganizationId:n.subOrgaId,orgaUser:{id:n.orgaUserId,name:""}}),!0}return!1}},{key:"_createSubUser",value:function(e){var t=0;this.subOrgaUsers.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1;var n={};return Object.assign(n,e),this.subOrgaUsers.push(n),!0}},{key:"_removeAllSubUsersOfOrgaUser",value:function(e){this.subOrgaUsers=this.subOrgaUsers.filter((function(t){return t.orgaUserId!==e.id}))}},{key:"_findForeignOrgaByOrgaId",value:function(e,t){if(e&&t)return this.orgaUsers.find((function(n){return n.orgaId===e&&n.foreignOrgaId===t}))}},{key:"foreignOrgaIsAlreadyMemberInOrga",value:function(e,t){return void 0!==this._findForeignOrgaByOrgaId(e,t)}},{key:"findOrgaById",value:function(e){var t=this.organizations.find((function(t){return t.id===e}));return t&&Object.assign({},t)}},{key:"getAllOrganizationsForAccount",value:function(e){var t=this;if(!e)return[];var n=[];return this.orgaUsers.filter((function(t){return t.accountId===e})).forEach((function(e){n.push({orga:t.organizations.find((function(t){return t.id===e.orgaId})),orgaUser:e})})),Bf(n)}},{key:"removeOrgaUserByAccountId",value:function(e,t){this._guardArgument(e),this._guardArgument(t),this.principalService.guardPrincipalIsThisAccount(t);var n=this.orgaUsers.find((function(n){return n.orgaId===e&&n.accountId===t}));return this._onOrgaUserRemoval(n)}},{key:"removeOrgaUser",value:function(e){this._guardArgument(e);var t=this.orgaUsers.find((function(t){return t.id===e}));return this.principalService.guardPrincipalIsOrgaAdmin(t.orgaId),this._onOrgaUserRemoval(t)}},{key:"deleteOrganization",value:function(e){var t=this;this.principalService.guardPrincipalIsOrgaSuperAdmin(e);var n=this.organizations.findIndex((function(t){return t.id===e}));n<0||(this.orgaUsers.filter((function(t){return t.orgaId===e})).forEach((function(e){return t._onOrgaUserRemoval(e,!1)})),this.organizations.splice(n,1),this.eventService.publishIdmEvent({type:Kf.OrganisationRemoved,organizationId:e}))}},{key:"joinOrganization",value:function(e,t){if(!(t.accountId&&this.findOrgaUserByAccountId(e,t.accountId)||t.foreignOrgaId&&this._findForeignOrgaByOrgaId(e,t.foreignOrgaId)||t.foreignUserId&&this.findForeignUserByOrgaId(e,t.foreignUserId))){t.orgaId=e;var n=this._addNewOrgaUser(t);return n&&Object.assign({},n)}}},{key:"createNewOrganization",value:function(e,t){var n=this._addNewOrganization(e);return t.orgaId=n.id,this._addNewOrgaUser(t),this.eventService.publishIdmEvent({type:Kf.OrganisationCreated,organizationId:e.id}),n&&Object.assign({},n)}},{key:"_addNewOrganization",value:function(e){var t=0;return this.organizations.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1,this.organizations.push(e),e}},{key:"_getAllAllowedSubOrgas",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];r&&i.push(this._getOrgaAsSubOrga(e)),i.push.apply(i,_toConsumableArray(this.subOrganizations.filter((function(t){return t.orgaId===e}))));var s=[];return i.forEach((function(e){n._isSubAdmin(t,e.id)&&s.push(e)})),s}},{key:"getAllAllowedSubOrgas",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Bf(this._getAllAllowedSubOrgas(e,t,n))}},{key:"createSubOrganization",value:function(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=0;return this.subOrganizations.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1,this.subOrganizations.push(e),!0}},{key:"removeSubOrganization",value:function(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this.subOrganizations.findIndex((function(t){return t.id===e.id}));return!(t<0||(this.subOrgaUsers=this.subOrgaUsers.filter((function(t){return t.subOrgaId!==e.id})),this.subOrganizations.splice(t,1),this.eventService.publishIdmEvent({type:Kf.SubOrganizationRemoved,subOrganizationId:e.id}),0))}},{key:"_isSubAdmin",value:function(e,t){if(this._isAdmin(e))return!0;var n=this.subOrgaUsers.find((function(n){return n.orgaUserId===e&&n.subOrgaId===t}));return!!n&&n.subAdmin}},{key:"renameSubOrganization",value:function(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);var t=this.subOrganizations.find((function(t){return t.id===e.id}));return!!t&&(t.name=e.name,!0)}},{key:"_getOrgaAsSubOrga",value:function(e){var t=this.findOrgaById(e);return{id:0,name:t.name+" Gesamt",orgaId:t.id}}}]),e}()).\u0275fac=function(e){return new(e||yg)(Je(Vf),Je(Lf),Je(zf))},yg.\u0275prov=he({token:yg,factory:yg.\u0275fac,providedIn:"root"}),yg),wg=((mg=function(){function e(t,n){_classCallCheck(this,e),this.fakeBackend=t,this.principalService=n}return _createClass(e,[{key:"_getPrincipal",value:function(){var e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}},{key:"getAllOrgasForUser",value:function(e){return this.fakeBackend.getAllOrganizationsForAccount(e)}},{key:"removeOrgaUserByAccountId",value:function(e,t){this.fakeBackend.removeOrgaUserByAccountId(e,t)}},{key:"removeOrgaUser",value:function(e){this.fakeBackend.removeOrgaUser(e)}},{key:"deleteOrganization",value:function(e){this.fakeBackend.deleteOrganization(e)}},{key:"findOrgaById",value:function(e){return this.fakeBackend.findOrgaById(e)}},{key:"findOrgaUserByAccountId",value:function(e,t){return this.fakeBackend.findOrgaUserByAccountId(e,t)}},{key:"findOrgaUserByOrgaUserId",value:function(e){return this.fakeBackend.findOrgaUserById(e)}},{key:"findCorrespondingForeignOrgaUser",value:function(e){return this.fakeBackend.findCorrespondingForeignOrgaUser(e)}},{key:"accountIsAlreadyMemberInOrga",value:function(e,t){return void 0!==this.fakeBackend.findOrgaUserByAccountId(e,t)}},{key:"accountHasAnyOrgaMembership",value:function(e){return this.fakeBackend.accountHasAnyOrgaMembership(e)}},{key:"foreignOrgaIsAlreadyMemberInOrga",value:function(e,t){return this.fakeBackend.foreignOrgaIsAlreadyMemberInOrga(e,t)}},{key:"foreignUserIsAlreadyMemberInOrga",value:function(e,t){return void 0!==this.fakeBackend.findForeignUserByOrgaId(e,t)}},{key:"joinOrganization",value:function(e,t){return this.fakeBackend.joinOrganization(e,t)}},{key:"createNewOrganization",value:function(e,t){return this.fakeBackend.createNewOrganization(e,t)}},{key:"getAllOrgaUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.fakeBackend.getAllOrgaUsers(e,t)}},{key:"getAllOrgaUsers4SubOrga",value:function(e,t){return this.fakeBackend.getAllOrgaUsers4SubOrga(e,t)}},{key:"getAllSubOrgaUsers4SubOrga",value:function(e){return this.fakeBackend.getAllSubOrgaUsers4SubOrga(e)}},{key:"getAllAllowedSubOrgas",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.fakeBackend.getAllAllowedSubOrgas(e,this._getPrincipal().id,t)}},{key:"removeSubOrganization",value:function(e){return this.fakeBackend.removeSubOrganization(e)}},{key:"createSubOrganization",value:function(e){return this.fakeBackend.createSubOrganization(e)}},{key:"changeSubOrgaUsers",value:function(e){return this.fakeBackend.changeSubOrgaUsers(e)}},{key:"renameSubOrganization",value:function(e){return this.fakeBackend.renameSubOrganization(e)}},{key:"updateOrgaUser",value:function(e){return this.fakeBackend.updateOrgaUser(e)}}]),e}()).\u0275fac=function(e){return new(e||mg)(Je(Cg),Je(zf))},mg.\u0275prov=he({token:mg,factory:mg.\u0275fac,providedIn:"root"}),mg);function Og(e,t){return new C((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),s=0,o=0,a=function(a){var u=G(e[a]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,o++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++s!==r&&c||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)a(u);else n.complete()}))}var Ig,Sg,Ag,xg,Pg=new je("NgValueAccessor"),Tg={provide:Pg,useExisting:Ie((function(){return Rg})),multi:!0},Rg=((Ig=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Ig)(As(So),As(Co))},Ig.\u0275dir=yt({type:Ig,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[yo([Tg])]}),Ig),Eg={provide:Pg,useExisting:Ie((function(){return Mg})),multi:!0},Ug=new je("CompositionEventMode"),Mg=((xg=function(){function e(t,n,r){var i;_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=r,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=gu()?gu().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||xg)(As(So),As(Co),As(Ug,8))},xg.\u0275dir=yt({type:xg,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Ds("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[yo([Eg])]}),xg),Fg=((Ag=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),e}()).\u0275fac=function(e){return new(e||Ag)},Ag.\u0275dir=yt({type:Ag}),Ag),Ng=((Sg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Fg)).\u0275fac=function(e){return Dg(e||Sg)},Sg.\u0275dir=yt({type:Sg,features:[to]}),Sg),Dg=Jn(Ng);function Lg(){throw new Error("unimplemented")}var Vg,zg,jg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _createClass(n,[{key:"validator",get:function(){return Lg()}},{key:"asyncValidator",get:function(){return Lg()}}]),n}(Fg),Bg=function(){function e(t){_classCallCheck(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),Hg=((zg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return n}(Bg)).\u0275fac=function(e){return new(e||zg)(As(jg,2))},zg.\u0275dir=yt({type:zg,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Gs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[to]}),zg),Gg=((Vg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return n}(Bg)).\u0275fac=function(e){return new(e||Vg)(As(Ng,2))},Vg.\u0275dir=yt({type:Vg,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Gs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[to]}),Vg);function Kg(e){return null==e||0===e.length}var Wg=new je("NgValidators"),qg=new je("NgAsyncValidators"),Zg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$g=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(Kg(t.value)||Kg(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(Kg(t.value)||Kg(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return Kg(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return Kg(e.value)||Zg.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(Kg(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}},{key:"maxLength",value:function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Kg(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(Jg);return 0==t.length?null:function(e){return Xg(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(Jg);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(u(r))return Og(r,null);if(c(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return Og(i.map((function(e){return r[e]})),i)}}if("function"==typeof t[t.length-1]){var s=t.pop();return Og(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(z((function(e){return s.apply(void 0,_toConsumableArray(e))})))}return Og(t,null)}(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(Qg)).pipe(z(Xg))}}}]),e}();function Jg(e){return null!=e}function Qg(e){var t=Fs(e)?G(e):e;if(!Ns(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Xg(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function Yg(e){return e.validate?function(t){return e.validate(t)}:e}function ev(e){return e.validate?function(t){return e.validate(t)}:e}var tv,nv,rv,iv,sv={provide:Pg,useExisting:Ie((function(){return ov})),multi:!0},ov=((tv=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||tv)(As(So),As(Co))},tv.\u0275dir=yt({type:tv,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[yo([sv])]}),tv),av={provide:Pg,useExisting:Ie((function(){return cv})),multi:!0},uv=((rv=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||rv)},rv.\u0275prov=he({token:rv,factory:rv.\u0275fac}),rv),cv=((nv=function(){function e(t,n,r,i){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(jg),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()).\u0275fac=function(e){return new(e||nv)(As(So),As(Co),As(uv),As(ls))},nv.\u0275dir=yt({type:nv,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[yo([av])]}),nv),lv={provide:Pg,useExisting:Ie((function(){return dv})),multi:!0},dv=((iv=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||iv)(As(So),As(Co))},iv.\u0275dir=yt({type:iv,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[yo([lv])]}),iv),hv='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',fv='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',gv={provide:Pg,useExisting:Ie((function(){return yv})),multi:!0};function vv(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var pv,mv,yv=((mv=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=ys}return _createClass(e,[{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=vv(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||mv)(As(So),As(Co))},mv.\u0275dir=yt({type:mv,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Ds("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[yo([gv])]}),mv),_v=((pv=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return _createClass(e,[{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(vv(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}}]),e}()).\u0275fac=function(e){return new(e||pv)(As(Co),As(So),As(yv,9))},pv.\u0275dir=yt({type:pv,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),pv),kv={provide:Pg,useExisting:Ie((function(){return Ov})),multi:!0};function bv(e,t){return null==e?""+t:("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var Cv,wv,Ov=((wv=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=ys}return _createClass(e,[{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,s=0;s<i.length;s++){var o=i.item(s),a=t._getOptionValue(o.value);r.push(a)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var d=t._getOptionValue(l.value);r.push(d)}}t.value=r,e(r)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||wv)(As(So),As(Co))},wv.\u0275dir=yt({type:wv,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[yo([kv])]}),wv),Iv=((Cv=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return _createClass(e,[{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(bv(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(bv(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}}]),e}()).\u0275fac=function(e){return new(e||Cv)(As(Co),As(So),As(Ov,9))},Cv.\u0275dir=yt({type:Cv,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Cv);function Sv(e,t){return[].concat(_toConsumableArray(t.path),[e])}function Av(e,t){e||Pv(t,"Cannot find control with"),t.valueAccessor||Pv(t,"No value accessor for form control with"),e.validator=$g.compose([e.validator,t.validator]),e.asyncValidator=$g.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&xv(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&xv(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function xv(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Pv(e,t){var n;throw n=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(n))}function Tv(e){return null!=e?$g.compose(e.map(Yg)):null}function Rv(e){return null!=e?$g.composeAsync(e.map(ev)):null}var Ev=[Rg,dv,ov,yv,Ov,cv];function Uv(e){var t=Fv(e)?e.validators:e;return Array.isArray(t)?Tv(t):t||null}function Mv(e,t){var n=Fv(t)?t.asyncValidators:e;return Array.isArray(n)?Rv(n):n||null}function Fv(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Nv,Dv,Lv,Vv,zv,jv,Bv,Hv,Gv,Kv=function(){function e(t,n){_classCallCheck(this,e),this.validator=t,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"setValidators",value:function(e){this.validator=Uv(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=Mv(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=Qg(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof qv?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Zv&&r.at(e)||null})),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new ga,this.statusChanges=new ga}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){Fv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}}]),e}(),Wv=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(e=t.call(this,Uv(i),Mv(s,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _createClass(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(Kv),qv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,Uv(r),Mv(i,r))).controls=e,s._initObservables(),s._setUpdateStrategy(r),s._setUpControls(),s.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),s}return _createClass(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof Wv?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,n=!1;return this._forEachChild((function(r,i){n=n||t.contains(i)&&e(r)})),n}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(Kv),Zv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,Uv(r),Mv(i,r))).controls=e,s._initObservables(),s._setUpdateStrategy(r),s._setUpControls(),s.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),s}return _createClass(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof Wv?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e,t=_createForOfIteratorHelper(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),n}(Kv),$v={provide:Ng,useExisting:Ie((function(){return Qv}))},Jv=Promise.resolve(null),Qv=((Dv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).submitted=!1,i._directives=[],i.ngSubmit=new ga,i.form=new qv({},Tv(e),Rv(r)),i}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(e){var t=this;Jv.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Av(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;Jv.then((function(){var n,r,i,s=t._findContainer(e.path);s&&s.removeControl(e.name),n=t._directives,r=e,(i=n.indexOf(r))>-1&&n.splice(i,1)}))}},{key:"addFormGroup",value:function(e){var t=this;Jv.then((function(){var n=t._findContainer(e.path),r=new qv({});(function(e,t){null==e&&Pv(t,"Cannot find control with"),e.validator=$g.compose([e.validator,t.validator]),e.asyncValidator=$g.composeAsync([e.asyncValidator,t.asyncValidator])})(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;Jv.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;Jv.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})),this.ngSubmit.emit(e),!1;var t}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),n}(Ng)).\u0275fac=function(e){return new(e||Dv)(As(Wg,10),As(qg,10))},Dv.\u0275dir=yt({type:Dv,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Ds("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yo([$v]),to]}),Dv),Xv=((Nv=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return Sv(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Tv(this._validators)}},{key:"asyncValidator",get:function(){return Rv(this._asyncValidators)}}]),n}(Ng)).\u0275fac=function(e){return Yv(e||Nv)},Nv.\u0275dir=yt({type:Nv,features:[to]}),Nv),Yv=Jn(Xv),ep=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(hv,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(fv))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(hv,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(fv))}}]),e}(),tp={provide:Ng,useExisting:Ie((function(){return np}))},np=((Lv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this))._parent=e,s._validators=r,s._asyncValidators=i,s}return _createClass(n,[{key:"_checkParentType",value:function(){this._parent instanceof n||this._parent instanceof Qv||ep.modelGroupParentException()}}]),n}(Xv)).\u0275fac=function(e){return new(e||Lv)(As(Ng,5),As(Wg,10),As(qg,10))},Lv.\u0275dir=yt({type:Lv,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[yo([tp]),to]}),Lv),rp={provide:jg,useExisting:Ie((function(){return sp}))},ip=Promise.resolve(null),sp=((zv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this)).control=new Wv,o._registered=!1,o.update=new ga,o._parent=e,o._rawValidators=r||[],o._rawAsyncValidators=i||[],o.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||Pv(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return t.forEach((function(t){var s;t.constructor===Mg?n=t:(s=t,Ev.some((function(e){return s.constructor===e}))?(r&&Pv(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Pv(e,"More than one custom value accessor matches form control with"),i=t))})),i||r||n||(Pv(e,"No valid value accessor for form control with"),null)}(_assertThisInitialized(o),s),o}return _createClass(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!ys(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){Av(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof np)&&this._parent instanceof Xv?ep.formGroupNameException():this._parent instanceof np||this._parent instanceof Qv||ep.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||ep.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;ip.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;ip.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))}},{key:"path",get:function(){return this._parent?Sv(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Tv(this._rawValidators)}},{key:"asyncValidator",get:function(){return Rv(this._rawAsyncValidators)}}]),n}(jg)).\u0275fac=function(e){return new(e||zv)(As(Ng,9),As(Wg,10),As(qg,10),As(Pg,10))},zv.\u0275dir=yt({type:zv,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yo([rp]),to,ao]}),zv),op=((Vv=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Vv)},Vv.\u0275dir=yt({type:Vv,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Vv),ap={provide:Wg,useExisting:Ie((function(){return up})),multi:!0},up=((jv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"validate",value:function(e){return this.required?$g.required(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()}}]),e}()).\u0275fac=function(e){return new(e||jv)},jv.\u0275dir=yt({type:jv,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&Os("required",t.required?"":null)},inputs:{required:"required"},features:[yo([ap])]}),jv),cp={provide:Wg,useExisting:Ie((function(){return lp})),multi:!0},lp=((Gv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null==this.minlength?null:this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=$g.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}]),e}()).\u0275fac=function(e){return new(e||Gv)},Gv.\u0275dir=yt({type:Gv,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Os("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[yo([cp]),ao]}),Gv),dp=((Hv=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:Hv}),Hv.\u0275inj=fe({factory:function(e){return new(e||Hv)}}),Hv),hp=((Bv=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:Bv}),Bv.\u0275inj=fe({factory:function(e){return new(e||Bv)},providers:[uv],imports:[dp]}),Bv);function fp(e,t){1&e&&(Rs(0,"div"),Rs(1,"h5"),$s(2,"\xdcbersicht \xfcber alle Produkte"),Es(),Rs(3,"p"),$s(4,"Zum Anzeigen der gekauften Lizenzen bitte in Organisation einloggen..."),Es(),Es())}function gp(e,t){1&e&&(Rs(0,"p"),$s(1,"F\xfcr \xc4nderungen ben\xf6tigt man Adminrechte in der Organisation."),Es())}function vp(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"h5"),$s(2,"\xdcbersicht \xfcber alle Produkte und davon gekaufte Lizenzen f\xfcr deine Organisation"),Es(),Is(3,gp,2,0,"p",1),Es()),2&e){var n=zs();xr(3),Ps("ngIf",!n.changesAllowed)}}function pp(e,t){if(1&e&&(Rs(0,"option",13),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n),xr(1),Qs(" ",n.name,"")}}function mp(e,t){if(1&e){var n=Ms();Rs(0,"div",5),Rs(1,"div",6),Rs(2,"div",7),Rs(3,"div",8),$s(4," Benutzer w\xe4hlen: "),Es(),Rs(5,"div",9),Rs(6,"select",10,11),Ds("ngModelChange",(function(e){return Wt(n),zs().selectedUser2Admin=e}))("ngModelChange",(function(){return Wt(n),zs().onChangedUser()})),Is(8,pp,2,2,"option",12),Es(),Es(),Es(),Es(),Es()}if(2&e){var r=zs();xr(6),Ps("ngModel",r.selectedUser2Admin),xr(2),Ps("ngForOf",r.users2Admin)}}function yp(e,t){1&e&&(Rs(0,"span",15),$s(1,"Lizenz notwendig "),Es())}function _p(e,t){1&e&&(Rs(0,"span",15),$s(1,"keine Lizenz notwendig "),Es())}function kp(e,t){if(1&e&&(Rs(0,"span",19),$s(1),Es()),2&e){var n=zs().$implicit;xr(1),Qs("gesamt: ",n.totalLicences,"")}}function bp(e,t){if(1&e&&(Rs(0,"span",19),$s(1),Es()),2&e){var n=zs().$implicit;xr(1),Qs("davon frei: ",n.freeLicences,"")}}function Cp(e,t){if(1&e&&(Rs(0,"span"),$s(1),Es()),2&e){var n=zs(3);xr(1),Qs("Lizenz ",n.selectedUser2Admin.name," entziehen")}}function wp(e,t){if(1&e&&(Rs(0,"span"),$s(1),Es()),2&e){var n=zs(3);xr(1),Qs("Lizenz ",n.selectedUser2Admin.name," zuweisen")}}function Op(e,t){if(1&e){var n=Ms();Rs(0,"div",20),Rs(1,"button",21),Ds("click",(function(){Wt(n);var e=zs().index;return zs().removeOneLicence(e)})),$s(2,"-"),Es(),Rs(3,"button",22),Ds("click",(function(){Wt(n);var e=zs().index;return zs().addOneLicence(e)})),$s(4,"+"),Es(),Rs(5,"label"),Rs(6,"input",23),Ds("ngModelChange",(function(e){return Wt(n),zs().$implicit.licencedToUser=e}))("ngModelChange",(function(){Wt(n);var e=zs().index;return zs().onUserLicenceChanged(e)})),Es(),Is(7,Cp,2,1,"span",1),Is(8,wp,2,1,"span",1),Es(),Es()}if(2&e){var r=zs().$implicit;xr(1),Ps("disabled",r.freeLicences<=0),xr(5),Ps("ngModel",r.licencedToUser)("disabled",r.freeLicences<=0&&!r.licencedToUser),xr(1),Ps("ngIf",r.licencedToUser),xr(1),Ps("ngIf",!r.licencedToUser)}}function Ip(e,t){if(1&e&&(Rs(0,"li"),Rs(1,"div"),Rs(2,"span",14),$s(3),Es(),Es(),Rs(4,"div"),Rs(5,"span",15),$s(6),Es(),Is(7,yp,2,0,"span",16),Es(),Rs(8,"div"),Is(9,_p,2,0,"span",16),Is(10,kp,2,1,"span",17),Is(11,bp,2,1,"span",17),Es(),Is(12,Op,9,5,"div",18),Es()),2&e){var n=t.$implicit,r=t.index,i=zs();xr(3),Qs(" ",i.getProductIdAsString(r)," "),xr(3),Qs(" ",i.getProductName(r)," "),xr(1),Ps("ngIf",n.licenceNeeded),xr(2),Ps("ngIf",!n.licenceNeeded),xr(1),Ps("ngIf",n.orgaId>0),xr(1),Ps("ngIf",n.orgaId>0),xr(1),Ps("ngIf",i.changesAllowed&&n.licenceNeeded)}}function Sp(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"button",24),Ds("click",(function(){return Wt(n),zs().discardChanges()})),$s(2,"\xc4nderungen verwerfen"),Es(),Rs(3,"button",25),Ds("click",(function(){return Wt(n),zs().saveChanges()})),$s(4,"\xc4nderungen \xfcbernehmen"),Es(),Es()}if(2&e){var r=zs();xr(1),Ps("disabled",!r.dirty),xr(2),Ps("disabled",!r.dirty)}}var Ap,xp,Pp=((xp=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.changeDetector=t,this.principalService=n,this.settingsService=r,this.licenceService=i,this.orgaService=s,this.usersDisplayName="",this.loggedInInOrga=!1,this.orgaId=0,this.changesAllowed=!1,this.dirty=!1,this.products=[],this.users2Admin=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Produkte und Lizenzen"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.loggedInInOrga&&(this.orgaId=this.principalService.getOrgaUser().orgaId,this.users2Admin=this.orgaService.getAllOrgaUsers(this.orgaId,!0),this.selectedUser2Admin=this.users2Admin[0]),this.changesAllowed=this.principalService.isAdminOfCurrentOrga(this.orgaId),this._initMembers()}},{key:"_initMembers",value:function(){this.dirty=!1,this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,this.products=this.licenceService.getAllProductAndLicenceInfos(this.orgaId,this.selectedUsersId)}},{key:"onChangedUser",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den Benutzer wechseln und damit deine \xc4nderungen verwerfen?")){var t=this.users2Admin.find((function(t){return t.id===e.selectedUsersId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=t)}this._initMembers()}},{key:"getProductIdAsString",value:function(e){return this.products[e].id}},{key:"getProductName",value:function(e){return this.products[e].name}},{key:"addOneLicence",value:function(e){this.dirty=!0,this.products[e].totalLicences++,this.products[e].freeLicences++}},{key:"removeOneLicence",value:function(e){this.dirty=!0,this.products[e].totalLicences--,this.products[e].freeLicences--}},{key:"saveChanges",value:function(){this.dirty&&(this.licenceService.saveProductAndLicenceInfo(this.products),this._initMembers())}},{key:"discardChanges",value:function(){this._initMembers()}},{key:"onUserLicenceChanged",value:function(e){this.dirty=!0,this.products[e].licencedToUser?this.products[e].freeLicences--:this.products[e].freeLicences++}}]),e}()).\u0275fac=function(e){return new(e||xp)(As(Zi),As(zf),As(Vf),As(Wf),As(wg))},xp.\u0275cmp=ht({type:xp,selectors:[["app-products-main"]],decls:7,vars:5,consts:[[1,"container"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s6"],["name","user2admin",1,"browser-default",3,"ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"list-item-text-left"],[1,"list-item-text"],["class","list-item-text",4,"ngIf"],["class","list-item-text-small",4,"ngIf"],["class","buttons-right-div",4,"ngIf"],[1,"list-item-text-small"],[1,"buttons-right-div"],[3,"disabled","click"],[3,"click"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"]],template:function(e,t){1&e&&(Rs(0,"div",0),Is(1,fp,5,0,"div",1),Is(2,vp,4,1,"div",1),Is(3,mp,9,2,"div",2),Rs(4,"ul",3),Is(5,Ip,13,7,"li",4),Es(),Is(6,Sp,5,2,"div",1),Es()),2&e&&(xr(1),Ps("ngIf",!t.loggedInInOrga),xr(1),Ps("ngIf",t.loggedInInOrga),xr(1),Ps("ngIf",t.changesAllowed),xr(2),Ps("ngForOf",t.products),xr(1),Ps("ngIf",t.changesAllowed))},directives:[Qu,$u,yv,Hg,sp,_v,Iv,Rg],styles:[".container[_ngcontent-%COMP%]{display:flex 2 1;margin-top:0;float:left;width:70em}.verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:70em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:70em;position:relative;background-color:#eee;margin-bottom:.5em;padding:.3em 0;height:2em;border-radius:4px}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:2em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:13em;text-align:left}.list-item-text-small[_ngcontent-%COMP%]{float:left;width:6em;text-align:left}hr[_ngcontent-%COMP%]{float:left;width:50em;height:3px;background:teal;margin-top:.4em;margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.buttons-right-div[_ngcontent-%COMP%]{margin-right:.7em;margin-top:-.3em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff;height:2em}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:3em;color:#000}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4db6ac}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),xp),Tp=((Ap=function(){function e(t){_classCallCheck(this,e),this.el=t}return _createClass(e,[{key:"ngAfterViewInit",value:function(){this.el.nativeElement.focus()}}]),e}()).\u0275fac=function(e){return new(e||Ap)(As(Co))},Ap.\u0275dir=yt({type:Ap,selectors:[["","appAutofocus",""]]}),Ap);function Rp(e,t){if(1&e){var n=Ms();Rs(0,"li"),Rs(1,"span",6),Ds("click",(function(){Wt(n);var e=t.$implicit;return zs().enterEditMode(e.id)})),$s(2),Es(),Rs(3,"div",7),Rs(4,"button",8),Ds("click",(function(){Wt(n);var e=t.$implicit;return zs().removeSubOrganization(e.id)})),$s(5,"Unterstruktur\xa0l\xf6schen"),Es(),Es(),Es()}if(2&e){var r=t.$implicit;xr(2),Qs(" ",r.name," ")}}function Ep(e,t){1&e&&Us(0,"hr",9)}function Up(e,t){if(1&e){var n=Ms();Rs(0,"div",10),Rs(1,"div",11),Rs(2,"label",12),$s(3,"Unterstrukturname \xe4ndern"),Es(),Rs(4,"input",13,14),Ds("ngModelChange",(function(e){return Wt(n),zs().editItemNewName=e}))("keydown.enter",(function(){return Wt(n),zs().persistEditChanges()})),Es(),Es(),Rs(6,"div",15),Rs(7,"button",16),Ds("click",(function(){return Wt(n),zs().cancelEditMode()})),$s(8," Abbrechen "),Es(),Rs(9,"button",17),Ds("click",(function(){return Wt(n),zs().persistEditChanges()})),$s(10," \xdcbernehmen "),Es(),Es(),Es()}if(2&e){var r=Ss(5),i=zs();xr(4),Ps("ngModel",i.editItemNewName),xr(5),Ps("disabled",!r.valid)}}function Mp(e,t){if(1&e){var n=Ms();Rs(0,"form",18,19),Ds("ngSubmit",(function(){return Wt(n),zs().createNewSubOrganization()})),Rs(2,"div",10),Rs(3,"div",11),Rs(4,"label",20),$s(5,"Name der neuen Unterstruktur"),Es(),Rs(6,"input",21,22),Ds("ngModelChange",(function(e){return Wt(n),zs().newSubOrganization.name=e}))("keyup",(function(e){return Wt(n),zs().somethingChanged(e)})),Es(),Es(),Rs(8,"div",15),Rs(9,"button",23),$s(10,"Neue Unterstruktur anlegen"),Es(),Es(),Es(),Es()}if(2&e){var r=Ss(1),i=zs();xr(6),Ps("ngModel",i.newSubOrganization.name),xr(3),Ps("disabled",!r.valid)}}var Fp,Np,Dp,Lp=((Dp=function(){function e(t,n,r){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.orgaService=r,this.usersDisplayName="",this.subOrgas=[],this.errorMessage="",this.editSubOrgaId=0,this.editItemNewName="",this.errorMsgNameAlreadyInUse="Eine Unterstruktur mit diesen Namen gibt es bereits."}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Unterstruktur-Verwaltung"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,this._initMembers()}},{key:"_initMembers",value:function(){this.editSubOrgaId=0,this.editItemNewName="",this.errorMessage="",this.newSubOrganization={name:"",orgaId:this.principal.orgaId},this.subOrgas=this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1)}},{key:"_checkNameAlreadyInUse",value:function(e){return!!this.subOrgas.find((function(t){return t.name.toLocaleLowerCase()===e.toLocaleLowerCase()}))}},{key:"removeSubOrganization",value:function(e){var t=this.subOrgas.find((function(t){return t.id===e}));t&&confirm("Willst du die Unterstruktur <"+t.name+"> unwiderruflich l\xf6schen?")&&(this.orgaService.removeSubOrganization(t),this._initMembers())}},{key:"createNewSubOrganization",value:function(){this._checkNameAlreadyInUse(this.newSubOrganization.name)?this.errorMessage=this.errorMsgNameAlreadyInUse:(this.orgaService.createSubOrganization(this.newSubOrganization),this._initMembers())}},{key:"somethingChanged",value:function(e){"Enter"!==e.code&&(this.errorMessage="")}},{key:"enterEditMode",value:function(e){var t=this.subOrgas.find((function(t){return t.id===e}));t&&(this.newSubOrganization={name:"",orgaId:this.principal.orgaId},this.editSubOrgaId=e,this.editItemNewName=t.name)}},{key:"cancelEditMode",value:function(){this._initMembers()}},{key:"persistEditChanges",value:function(){var e=this,t=this.subOrgas.find((function(t){return t.id===e.editSubOrgaId}));if(!t)return this.cancelEditMode();if(t.name!==this.editItemNewName){if(this._checkNameAlreadyInUse(this.editItemNewName))return void(this.errorMessage=this.errorMsgNameAlreadyInUse);if(!this.orgaService.renameSubOrganization({id:t.id,orgaId:t.orgaId,name:this.editItemNewName}))return void(this.errorMessage="\xc4nderung hat nicht geklappt...")}this.cancelEditMode()}}]),e}()).\u0275fac=function(e){return new(e||Dp)(As(Vf),As(zf),As(wg))},Dp.\u0275cmp=ht({type:Dp,selectors:[["app-iam-sub-orga-mgmt"]],decls:11,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","hr-1 mt-0 mb-1",4,"ngIf"],["class","row",4,"ngIf"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[1,"error",3,"hidden"],[1,"list-item-text-left",3,"click"],[1,"right"],[1,"btn-danger",3,"click"],[1,"hr-1","mt-0","mb-1"],[1,"row"],[1,"input-field","col","s8","m6","mb-0"],["for","editName"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],[1,"col","s8","m6"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newSubOrgaForm","ngForm"],["for","subOrgaName"],["type","text","id","subOrgaName","name","subOrgaName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["subOrgaName","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Rs(0,"p"),$s(1),Es(),Rs(2,"ul",0),Is(3,Rp,6,1,"li",1),Es(),Is(4,Ep,1,0,"hr",2),Is(5,Up,11,2,"div",3),Is(6,Mp,11,2,"form",4),Us(7,"br"),Rs(8,"div",5),Rs(9,"p"),$s(10),Es(),Es()),2&e&&(xr(1),Qs(" Hallo ",t.usersDisplayName,", hier verwaltest du deine Unterstrukturen:"),xr(2),Ps("ngForOf",t.subOrgas),xr(1),Ps("ngIf",t.subOrgas.length>0),xr(1),Ps("ngIf",t.editSubOrgaId>0),xr(1),Ps("ngIf",t.editSubOrgaId<=0),xr(2),Ps("hidden",!t.errorMessage),xr(2),Js(t.errorMessage))},directives:[$u,Qu,Mg,up,lp,Tp,Hg,sp,op,Gg,Qv],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;cursor:pointer}"]}),Dp),Vp=((Np=function(){function e(t){_classCallCheck(this,e),this.settingsService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Hilfe / Anleitung");var e=document.querySelectorAll(".collapsible");M.Collapsible.init(e,{})}}]),e}()).\u0275fac=function(e){return new(e||Np)(As(Vf))},Np.\u0275cmp=ht({type:Np,selectors:[["app-help"]],decls:141,vars:0,consts:[[1,"collapsible","popout"],[1,"collapsible-header"],[1,"material-icons"],[1,"collapsible-body"],[1,"browser-default"],["href","https://drive.google.com/file/d/1KuLdvRku0cAIhHtSCc7eHb9x66mxTGoW/view?usp=sharing","target","_blank"],["href","https://drive.google.com/file/d/1ijSAEeJenHyFINcc92VGVjEnDYAvcRcy/view?usp=sharing","target","_blank"]],template:function(e,t){1&e&&(Rs(0,"h5"),$s(1,"Hier gibt's Hilfe bzw. Anleitungen, nat\xfcrlich nur in aller K\xfcrze..."),Es(),Us(2,"br"),Rs(3,"ul",0),Rs(4,"li"),Rs(5,"div",1),Rs(6,"i",2),$s(7,"dehaze"),Es(),$s(8,"Wozu das Ganze? Was kann ich machen? "),Es(),Rs(9,"div",3),Rs(10,"ul",4),Rs(11,"li"),$s(12,"Kurz gesagt, man kann sich registrieren, einloggen, Organisationen beitreten/anlegen/verwalten."),Es(),Rs(13,"li"),$s(14,"Ferner kann man Ordner (dynamische Resourcen) anlegen und verrechten."),Es(),Rs(15,"li"),$s(16,"Und als Highlight kann man Kollaboration auf so einem Ordner einrichten."),Es(),Rs(17,"li"),Rs(18,"a",5),$s(19,"Infovideo \xfcber Identit\xe4ten und Organisationen"),Es(),Es(),Rs(20,"li"),Rs(21,"a",6),$s(22,"Infovideo \xfcber Rechtemanagement und Kollaboration"),Es(),Es(),Es(),Es(),Es(),Rs(23,"li"),Rs(24,"div",1),Rs(25,"i",2),$s(26,"dehaze"),Es(),$s(27,"Was sehe ich wo?"),Es(),Rs(28,"div",3),Rs(29,"ul",4),Rs(30,"li"),$s(31,'Auf der Startseite sieht man ein "Men\xfc" der M\xf6glicheiten.'),Es(),Rs(32,"li"),$s(33,"Unten rechts gibt es Einstellungen, womit man das Verhalten des Prototyps beeinflussen kann."),Es(),Rs(34,"li"),$s(35,"Ist man angemeldet, wird in der Titelzeile die Organisation (so vorhanden) und der Username angezeigt."),Es(),Rs(36,"li"),$s(37,'Au\xdferdem gibt es ein "Kontext-Men\xfc" mit mehr-oder-weniger sinnigen Aktionen.'),Es(),Es(),Es(),Es(),Rs(38,"li"),Rs(39,"div",1),Rs(40,"i",2),$s(41,"dehaze"),Es(),$s(42,"Das Datenmodell"),Es(),Rs(43,"div",3),Rs(44,"ul",4),Rs(45,"li"),$s(46,"Ein Account hat 1-n Credentials (Zugangsmedien)"),Es(),Rs(47,"li"),$s(48,"Ein Account kann in 0-n Organisationen eine Organisations-Identit\xe4t haben."),Es(),Rs(49,"li"),$s(50,"Ist man in mehreren Organisationen Mitglied, muss man beim Login eine Organisation ausw\xe4hlen."),Es(),Rs(51,"li"),$s(52,"Eine Organisation beherbergt User, Resourcen und deren Rechte."),Es(),Rs(53,"li"),$s(54,'Ein Recht besteht aus (Subjekt = User, Objekt = Resource, Erlaubnis = "lesen")'),Es(),Rs(55,"li"),$s(56,'Pro Berechtigung entsteht ein Eintrag in der "Rechte-Liste"'),Es(),Es(),Es(),Es(),Rs(57,"li"),Rs(58,"div",1),Rs(59,"i",2),$s(60,"dehaze"),Es(),$s(61,"Sicherheit? Passw\xf6rter?"),Es(),Rs(62,"div",3),Rs(63,"ul",4),Rs(64,"li"),$s(65,"Die Seite hat echte Logik, speichert aber nichts dauerhaft."),Es(),Rs(66,"li"),$s(67,"Alles spielt sich im Browser ab."),Es(),Rs(68,"li"),$s(69,"Durch Neu-Laden der Seite (F5) ist man wieder am Anfang!"),Es(),Rs(70,"li"),$s(71,'Eingegebene Passw\xf6rter werden im Klartext "gespeichert".'),Es(),Rs(72,"li"),$s(73,'Die Testpassw\xf6rter lauten s\xe4mtlich "test".'),Es(),Es(),Es(),Es(),Rs(74,"li"),Rs(75,"div",1),Rs(76,"i",2),$s(77,"dehaze"),Es(),$s(78,"Tipps und Tricks"),Es(),Rs(79,"div",3),Rs(80,"ul",4),Rs(81,"li"),$s(82,'Man muss beim Login kein Passwort eingeben (geht schneller), gibt man aber eines ein, muss es mit dem "registrierten" \xfcbereinstimmen.'),Es(),Rs(83,"li"),$s(84,"Es sind einige vor-eingetragende Testdaten vorhanden. Bei den Test-Kennungen (Username) gibt die Endung Aufschluss \xfcber den Authentifizierungs-Grad. z.B. tom@bk entspricht einem BenutzerKonto, tom@sc einer SmartCard. "),Es(),Rs(85,"li"),$s(86,' Kommt einfach "so" die Login-Seite erneut, ist die Ziel-Seite gesch\xfctzt. Entweder generell, dass man eingeloggt sein muss, oder es muss ein "besonderer" Login sein. (Admin, Secure). Meist hilft das Anmelden mit *@sc. '),Es(),Es(),Es(),Es(),Rs(87,"li"),Rs(88,"div",1),Rs(89,"i",2),$s(90,"dehaze"),Es(),$s(91,"Testdaten"),Es(),Rs(92,"div",3),Rs(93,"ul",4),Rs(94,"li"),$s(95,"Kanzlei Heinzelmann mit Simone und Klaus (Admin) (@sc etc.)"),Es(),Rs(96,"li"),$s(97,"Kanzlei Palmengarten mit Sonja und Martin (Admin)"),Es(),Rs(98,"li"),$s(99,'Familie Martin privat mit Martin (Admin). D.h. bei Login mit "Martin" kommt eine Organisationsauswahl'),Es(),Rs(100,"li"),$s(101,"Holzhandel Grubinger mit Petra und Tom (Admin)"),Es(),Rs(102,"li"),$s(103,"Resi ohne Organisation, d.h. nur Account"),Es(),Rs(104,"li"),$s(105,"Kanzlei Heinzelmann und Holzhandel Grubinger kollaborieren bereits auf einem Ordner"),Es(),Es(),Es(),Es(),Rs(106,"li"),Rs(107,"div",1),Rs(108,"i",2),$s(109,"dehaze"),Es(),$s(110,"Kollaboration, was ist damit gemeint?"),Es(),Rs(111,"div",3),Rs(112,"ul",4),Rs(113,"li"),$s(114,"Kollaboration meint hier, dass Mitarbeiter verschiedener Organisationen auf ein-und-derselben Resource (Ordner) arbeiten."),Es(),Rs(115,"li"),$s(116,"Das Ganze geht via Delegation, d.h. ein Admin einer Organisation berechtigt eine zweite Organisation. Ein Admin dieser zweiten Organisation vergibt dann letztendlich die Rechte an seine Mitarbeiter, aber nur die, welche er delegiert bekommen hat."),Es(),Rs(117,"li"),$s(118,"Am besten ausprobieren: "),Rs(119,"ul",4),Rs(120,"li"),$s(121,"Zwei Organisationen mit jeweils zwei Mitarbieter anlegen"),Es(),Rs(122,"li"),$s(123,"In der einen einen Ordner anlegen"),Es(),Rs(124,"li"),$s(125,'Dann der zweiten Organisation "freigeben"'),Es(),Rs(126,"li"),$s(127,'Und dort an einen der beiden Mitarbieter "freigeben"'),Es(),Es(),Es(),Rs(128,"li"),$s(129,"und folgende Szenarien nachvollziehen, was mit den Zugriffs-Rechten passiert: "),Rs(130,"ul",4),Rs(131,"li"),$s(132,"Die Rechte werden vom Original-Admin eingeschr\xe4nkt"),Es(),Rs(133,"li"),$s(134,'Der "geteilte" Ordner wird gel\xf6scht'),Es(),Rs(135,"li"),$s(136,"Der Kollaborations-Users wird aus einladender Organisation entfernt"),Es(),Rs(137,"li"),$s(138,"die ganze einladende Organisation wird gel\xf6scht"),Es(),Rs(139,"li"),$s(140,"..."),Es(),Es(),Es(),Es(),Es(),Es(),Es())},styles:["br[_ngcontent-%COMP%]{margin-bottom:.4em}"]}),Np),zp=((Fp=function(){function e(t){_classCallCheck(this,e),this.fakeBackend=t}return _createClass(e,[{key:"getAllCredentialsForUser",value:function(e){return this.fakeBackend.getAllCredentials(e)}},{key:"removeCredential",value:function(e){this.fakeBackend.removeCredential(e)}},{key:"addNewCredential",value:function(e){return this.fakeBackend.addNewCredential(e)}}]),e}()).\u0275fac=function(e){return new(e||Fp)(Je(Cg))},Fp.\u0275prov=he({token:Fp,factory:Fp.\u0275fac,providedIn:"root"}),Fp);function jp(e,t){if(1&e&&(Rs(0,"li"),Rs(1,"span",3),$s(2),Es(),Rs(3,"span",4),$s(4),Es(),Es()),2&e){var n=t.index,r=zs();xr(2),Qs(" ",r.getCredentialTypeAsString(n)," "),xr(2),Qs(" ",r.getCredentialDescription(n)," ")}}function Bp(e,t){if(1&e&&(Rs(0,"li"),Rs(1,"span",3),$s(2),Es(),Rs(3,"span",4),$s(4),Es(),Es()),2&e){var n=t.$implicit;xr(2),Xs(" ",n.orga.name," (",n.orga.id,") "),xr(2),Xs(" ",n.user.name," (",n.user.id,") ")}}function Hp(e,t){if(1&e&&(Rs(0,"div"),Us(1,"hr",5),Rs(2,"p"),$s(3,"In folgenden Organisationen bist du Mitglied, hast also eine Organisations-Identit\xe4t:"),Es(),Rs(4,"ul",0),Is(5,Bp,5,4,"li",1),Es(),Es()),2&e){var n=zs();xr(5),Ps("ngForOf",n.orgaAndUserList)}}var Gp,Kp,Wp=((Kp=function(){function e(t,n,r,i){_classCallCheck(this,e),this.settingsService=t,this.credentialService=n,this.orgaService=r,this.principalService=i,this.usersDisplayName="",this.loggedInAs="",this.authLevel="",this.credentials=[],this.orgaAndUserList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("User-Infos"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this._initMembers()}},{key:"_initMembers",value:function(){this.credentials=this.credentialService.getAllCredentialsForUser(this.principal.id),this._setLoggedInInfo(),this._setOrgasMemberships()}},{key:"_setLoggedInInfo",value:function(){var e=this.principalService.getOrgaUser();e&&e.id?this.loggedInAs="Organisations-Identit\xe4t <"+e.name+"> in der Organisation: <"+this.principalService.getOrgaName()+">":(e=this.principalService.getAccount(),this.loggedInAs="Account-Identit\xe4t <"+e.name+">"),this.authLevel=this.principalService.getAuthLevelAsString()}},{key:"_setOrgasMemberships",value:function(){var e=this;this.principalService.getAllAvailableOrgas().forEach((function(t){e.orgaAndUserList.push({orga:t,user:e.orgaService.findOrgaUserByAccountId(t.id,e.principal.id)})}))}},{key:"getCredentialTypeAsString",value:function(e){return Df[this.credentials[e].type]}},{key:"getCredentialDescription",value:function(e){var t=this.credentials[e],n="Kennung: <"+t.kennung+">";return t.type>9&&t.orgaId&&(n+=" ("+t.orgaId+")"),t.type===Df.SocialLogin&&(n=t.provider+"-ID: "+t.userIdFromProvider),n+=", Auth-Level: <"+Nf[this.principalService.determineAuthLevel(t)]+">"}}]),e}()).\u0275fac=function(e){return new(e||Kp)(As(Vf),As(zp),As(wg),As(zf))},Kp.\u0275cmp=ht({type:Kp,selectors:[["app-iam-user-info"]],decls:11,vars:5,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"hr-2"]],template:function(e,t){1&e&&(Rs(0,"h6"),$s(1),Es(),Rs(2,"p"),$s(3),Es(),Rs(4,"p"),$s(5),Es(),Rs(6,"p"),$s(7,"Du hast folgende Zugangsmedien:"),Es(),Rs(8,"ul",0),Is(9,jp,5,2,"li",1),Es(),Is(10,Hp,6,1,"div",2)),2&e&&(xr(1),Qs(" Hallo ",t.usersDisplayName,""),xr(2),Qs("Du bist angemeldet als ",t.loggedInAs,"."),xr(2),Qs("Dein aktuelles Authentifizierungsniveau ist: <",t.authLevel,">."),xr(4),Ps("ngForOf",t.credentials),xr(1),Ps("ngIf",t.orgaAndUserList.length>0))},directives:[$u,Qu],styles:[""]}),Kp),qp=((Gp=function(){function e(t,n){_classCallCheck(this,e),this.principalService=t,this.accessService=n,this.allFolders=[],this.dummyResourceId=-1,this._fillTestdata()}return _createClass(e,[{key:"_fillTestdata",value:function(){this.allFolders.push({id:1,orgaId:300,name:"Notizen"},{id:2,orgaId:300,name:"Steuersachen"},{id:3,orgaId:300,name:"Golfausfl\xfcge"},{id:4,orgaId:300,name:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{id:10,orgaId:301,name:"Rechtliches"},{id:11,orgaId:301,name:"Kassenarchiv"},{id:20,orgaId:302,name:"Finanzen"},{id:21,orgaId:302,name:"Rechnungen"})}},{key:"_getPrincipal",value:function(){var e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}},{key:"_assureCurrentPrincipalHasAdminPermission",value:function(){if(!this.principalService.isAdminOfCurrentOrga())throw new Error("Principal is not admin of current orga!")}},{key:"_findFolderById",value:function(e){return this.allFolders.find((function(t){return t.id===e}))}},{key:"_toResource",value:function(e){return{id:e.id,typeId:jf.Folder,orgaId:e.orgaId,displayName:e.name}}},{key:"renameFolder",value:function(e){if(!this.accessService.hasPermission(this._toResource(e),ng.FolderWritePermissionKey))return!1;var t=this._findFolderById(e.id);if(!t)throw new Error("RenameFolder: Ordner existiert gar nicht.");return t.name===e.name||!this._isFolderNameAlreadyUsedInOrga(e)&&(t.name=e.name,this.accessService.renameResource(this._toResource(e)),!0)}},{key:"_sort",value:function(e){var t=this._getPrincipal().orgaId;return e.sort((function(e,n){if(e.orgaId===t&&n.orgaId===t)return e.id-n.id;if(e.orgaId===t)return-1;if(n.orgaId===t)return 1;var r=e.orgaId-n.orgaId;return 0===r?e.id-n.id:r}))}},{key:"getAllFoldersOfOrgaWithRightsOfGivenUser4Administration",value:function(e){var t=this;this._assureCurrentPrincipalHasAdminPermission();var n=this._getPrincipal().orgaId,r=this.accessService.getAllResourceIdsOwnedByOrDelegatedToOrga(jf.Folder,n),i=[];return r.forEach((function(n){var r=t._findFolderById(n),s={id:n,orgaId:r.orgaId,name:r.name};i.push(s),t._setMaxEnabledPermissions(r,e,s),t._setAdministratedPermissions(r,e,s)})),Bf(this._sort(i))}},{key:"_setAdministratedPermissions",value:function(e,t,n){var r={typeId:jf.Folder,id:n.id,orgaId:e.orgaId};n.readAllowed=this.accessService.hasAdministratedPermission(r,t,ng.FolderReadPermissionKey),n.writeAllowed=this.accessService.hasAdministratedPermission(r,t,ng.FolderWritePermissionKey),n.deleteAllowed=this.accessService.hasAdministratedPermission(r,t,ng.FolderDeletePermissionKey)}},{key:"_setMaxEnabledPermissions",value:function(e,t,n){var r={typeId:jf.Folder,id:n.id,orgaId:e.orgaId};n.readDisabled=!this.accessService.permissionIsEnabled4Administration(r,t,ng.FolderReadPermissionKey),n.writeDisabled=!this.accessService.permissionIsEnabled4Administration(r,t,ng.FolderWritePermissionKey),n.deleteDisabled=!this.accessService.permissionIsEnabled4Administration(r,t,ng.FolderDeletePermissionKey)}},{key:"getAllAccessibleFolders4CurrentUser",value:function(){var e=this,t=this.accessService.getAllResources4PrincipalWithAtLeastOnePermission(jf.Folder),n=[];return t.forEach((function(t){var r=e.allFolders.find((function(e){return e.id===t.id}));if(r){var i={};Object.assign(i,r);var s={typeId:jf.Folder,id:r.id};i.readAllowed=e.accessService.hasPermission(s,ng.FolderReadPermissionKey),i.writeAllowed=e.accessService.hasPermission(s,ng.FolderWritePermissionKey),i.deleteAllowed=e.accessService.hasPermission(s,ng.FolderDeletePermissionKey),n.push(i)}})),Bf(this._sort(n))}},{key:"setFolderRightsOfGivenUser",value:function(e,t){var n=this;this._assureCurrentPrincipalHasAdminPermission(),t.forEach((function(t){if(t.dirty){var r=[];t.readAllowed&&r.push(ng.FolderReadPermissionKey),t.writeAllowed&&r.push(ng.FolderWritePermissionKey),t.deleteAllowed&&r.push(ng.FolderDeletePermissionKey),n.accessService.setPermissionsOfUser2resource(e,{typeId:jf.Folder,id:t.id,orgaId:t.orgaId},r)}}))}},{key:"removeFolder",value:function(e){if(!this.accessService.hasPermission({typeId:jf.Folder,id:e},ng.FolderDeletePermissionKey))return!1;this.accessService.removeResource({typeId:jf.Folder,id:e},ng.FolderDeletePermissionKey);var t=this.allFolders.findIndex((function(t){return t.id===e}));return t>=0&&this.allFolders.splice(t,1),!0}},{key:"_isFolderNameAlreadyUsedInOrga",value:function(e){return!!this.allFolders.find((function(t){return t.orgaId===e.orgaId&&t.name===e.name}))}},{key:"user2adminMayCreateNewFolder",value:function(e){return this.accessService.hasPermission4staticResource4administration(e,{typeId:jf.FolderRoot,id:this.dummyResourceId,orgaId:e.orgaId},ng.FolderCreatePermissionKey)}},{key:"userMayCreateNewFolder",value:function(e){return this.accessService.hasPermission4staticResource({typeId:jf.FolderRoot,id:this.dummyResourceId,orgaId:e},ng.FolderCreatePermissionKey)}},{key:"setUserMayCreateNewFolder",value:function(e,t){this._assureCurrentPrincipalHasAdminPermission(),this.accessService.setPermissionsOfUser2staticResource(e,{typeId:jf.FolderRoot,id:this.dummyResourceId,orgaId:e.orgaId},t?[ng.FolderCreatePermissionKey]:[])}},{key:"_getNewUniqueId",value:function(){var e=0;return this.allFolders.forEach((function(t){t.id>e&&(e=t.id)})),e+1}},{key:"addNewFolder",value:function(e){if(this._isFolderNameAlreadyUsedInOrga(e))return!1;var t=this._getPrincipal();return!!this.userMayCreateNewFolder(t.orgaId)&&(e.id=this._getNewUniqueId(),this.allFolders.push(e),this.accessService.createNewResource({typeId:jf.Folder,id:e.id,orgaId:e.orgaId,displayName:e.name}),!0)}}]),e}()).\u0275fac=function(e){return new(e||Gp)(Je(zf),Je(ag))},Gp.\u0275prov=he({token:Gp,factory:Gp.\u0275fac,providedIn:"root"}),Gp);function Zp(e,t){if(1&e&&(Rs(0,"option",14),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n),xr(1),Qs(" ",n.name,"")}}var $p=function(e){return{"foreign-folder":e}};function Jp(e,t){if(1&e){var n=Ms();Rs(0,"li",15),Rs(1,"span",16),Rs(2,"i",17),$s(3,"folder"),Es(),$s(4),Es(),Rs(5,"span",18),$s(6),Es(),Rs(7,"label",3),Rs(8,"input",9),Ds("ngModelChange",(function(e){return Wt(n),t.$implicit.readAllowed=e}))("ngModelChange",(function(){Wt(n);var e=t.index;return zs().onChanged(e)})),Es(),Rs(9,"span"),$s(10,"lesen"),Es(),Es(),Rs(11,"label",3),Rs(12,"input",9),Ds("ngModelChange",(function(e){return Wt(n),t.$implicit.writeAllowed=e}))("ngModelChange",(function(){Wt(n);var e=t.index;return zs().onChanged(e)})),Es(),Rs(13,"span"),$s(14,"schreiben"),Es(),Es(),Rs(15,"label"),Rs(16,"input",9),Ds("ngModelChange",(function(e){return Wt(n),t.$implicit.deleteAllowed=e}))("ngModelChange",(function(){Wt(n);var e=t.index;return zs().onChanged(e)})),Es(),Rs(17,"span"),$s(18,"l\xf6schen"),Es(),Es(),Es()}if(2&e){var r=t.$implicit,i=zs();Ps("ngClass",da(9,$p,i.isForeignFolder(r))),xr(4),Qs(" ",r.id," "),xr(2),Qs(" ",r.name," "),xr(2),Ps("ngModel",r.readAllowed)("disabled",r.readDisabled),xr(4),Ps("ngModel",r.writeAllowed)("disabled",r.writeDisabled),xr(4),Ps("ngModel",r.deleteAllowed)("disabled",r.deleteDisabled)}}var Qp,Xp=function(e){return{"foreign-user":e}},Yp=((Qp=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.changeDetector=t,this.settingsService=n,this.folderService=r,this.principalService=i,this.orgaService=s,this.usersDisplayName="",this.users2Admin=[],this.folders=[],this.createNewFolderAllowed=!1,this.createNewFolderOldValue=!1,this.dirty=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("dezentrale Ordner-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.users2Admin=this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.selectedUser2Admin=this.users2Admin[0],this._initMembers()}},{key:"_initMembers",value:function(){this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,this.folders=this.folderService.getAllFoldersOfOrgaWithRightsOfGivenUser4Administration(this.selectedUser2Admin),this.createNewFolderAllowed=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this.createNewFolderOldValue=this.createNewFolderAllowed,this.dirty=!1}},{key:"isForeignUser",value:function(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}},{key:"isForeignFolder",value:function(e){return!!e&&e.orgaId!==this.principal.orgaId}},{key:"resetFolderRights",value:function(){this._initMembers()}},{key:"_afterSavingPermissions",value:function(){this.dirty=!1,this.createNewFolderOldValue=this.createNewFolderAllowed,this.folders.forEach((function(e){return e.dirty=!1}))}},{key:"saveFolderRights",value:function(){this.createNewFolderAllowed!==this.createNewFolderOldValue&&this.folderService.setUserMayCreateNewFolder(this.selectedUser2Admin,this.createNewFolderAllowed);var e=this.folders.filter((function(e){return e.dirty}));this.folderService.setFolderRightsOfGivenUser(this.selectedUser2Admin,e),this._afterSavingPermissions()}},{key:"onChangedUser",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){var t=this.users2Admin.find((function(t){return t.id===e.selectedUsersId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=t)}this._initMembers()}},{key:"onChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this.dirty=!0,e>=0){var t=this.folders[e];t&&(t.dirty=!0)}}}]),e}()).\u0275fac=function(e){return new(e||Qp)(As(Zi),As(Vf),As(qp),As(zf),As(wg))},Qp.\u0275cmp=ht({type:Qp,selectors:[["app-admin-folders"]],decls:21,vars:11,consts:[[1,"container-form"],[1,"row"],[1,"col","s12"],[1,"mr-1"],[1,"input-field","inline"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text"]],template:function(e,t){1&e&&(Rs(0,"h6"),$s(1),Es(),Rs(2,"div",0),Rs(3,"div",1),Rs(4,"div",2),Rs(5,"span",3),$s(6,"Benutzer\xa0w\xe4hlen:"),Es(),Rs(7,"div",4),Rs(8,"select",5,6),Ds("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),Is(10,Zp,2,2,"option",7),Es(),Es(),Es(),Es(),Rs(11,"label",8),Rs(12,"input",9),Ds("ngModelChange",(function(e){return t.createNewFolderAllowed=e}))("ngModelChange",(function(){return t.onChanged()})),Es(),Rs(13,"span"),$s(14,"Darf neue Ordner anlegen"),Es(),Es(),Rs(15,"ul",10),Is(16,Jp,19,11,"li",11),Es(),Rs(17,"button",12),Ds("click",(function(){return t.resetFolderRights()})),$s(18,"Zur\xfccksetzen"),Es(),Rs(19,"button",13),Ds("click",(function(){return t.saveFolderRights()})),$s(20,"\xdcbernehmen"),Es(),Es()),2&e&&(xr(1),Qs(" Hallo ",t.usersDisplayName,", hier kannst du f\xfcr bestimmte Ordner Rechte vergeben."),xr(7),Ps("ngClass",da(9,Xp,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),xr(2),Ps("ngForOf",t.users2Admin),xr(2),Ps("ngModel",t.createNewFolderAllowed)("disabled",t.isForeignUser(t.selectedUser2Admin)),xr(4),Ps("ngForOf",t.folders),xr(1),Ps("disabled",!t.dirty),xr(2),Ps("disabled",!t.dirty))},directives:[yv,qu,Hg,sp,$u,Rg,_v,Iv],styles:[".foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}.liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.liste[_ngcontent-%COMP%]{max-width:70rem}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{width:25em}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0!important}.input-field.inline[_ngcontent-%COMP%]{margin-left:0!important}"]}),Qp);function em(e,t){if(1&e){var n=Ms();Rs(0,"button",10),Ds("click",(function(){Wt(n);var e=zs().$implicit;return zs().removeFolder(e.id)})),$s(1," L\xf6schen"),Es()}}var tm=function(e){return{"foreign-folder":e}};function nm(e,t){if(1&e){var n=Ms();Rs(0,"li",5),Rs(1,"span",6),Rs(2,"i",7),$s(3,"folder"),Es(),$s(4),Es(),Rs(5,"span",8),Ds("click",(function(){Wt(n);var e=t.index;return zs().enterEditMode(e)})),$s(6),Es(),Is(7,em,2,0,"button",9),Es()}if(2&e){var r=t.$implicit,i=zs();Ps("ngClass",da(5,tm,i.isForeignFolder(r))),xr(4),Qs(" ",r.id," "),xr(2),Xs(" ",r.name," ",i.getPermissionsHint(r)," "),xr(1),Ps("ngIf",r.deleteAllowed)}}function rm(e,t){if(1&e){var n=Ms();Rs(0,"div",11),Rs(1,"div",12),Rs(2,"div",13),Rs(3,"label",14),$s(4,"Ordnername \xe4ndern"),Es(),Rs(5,"input",15,16),Ds("ngModelChange",(function(e){return Wt(n),zs().editFolderNewName=e}))("keydown.enter",(function(){return Wt(n),zs().persistEditFolderChanges()})),Es(),Es(),Rs(7,"button",17),Ds("click",(function(){return Wt(n),zs().cancelEditMode()})),$s(8," Abbrechen "),Es(),Rs(9,"button",18),Ds("click",(function(){return Wt(n),zs().persistEditFolderChanges()})),$s(10," \xdcbernehmen "),Es(),Es(),Es()}if(2&e){var r=Ss(6),i=zs();xr(5),Ps("ngModel",i.editFolderNewName),xr(4),Ps("disabled",!r.valid)}}function im(e,t){if(1&e){var n=Ms();Rs(0,"div",11),Rs(1,"form",19,20),Ds("ngSubmit",(function(){return Wt(n),zs().addNewFolder()})),Rs(3,"div",12),Rs(4,"div",21),Rs(5,"label",22),$s(6,"Ordnername"),Es(),Rs(7,"input",23,24),Ds("ngModelChange",(function(e){return Wt(n),zs().newFolder.name=e}))("keyup",(function(e){return Wt(n),zs().somethingChanged(e)})),Es(),Es(),Rs(9,"div",25),Rs(10,"button",26),$s(11,"Ordner\xa0anlegen"),Es(),Es(),Es(),Es(),Es()}if(2&e){var r=Ss(2),i=zs();xr(7),Ps("ngModel",i.newFolder.name),xr(3),Ps("disabled",!r.valid)}}var sm,om,am=((sm=function(){function e(t,n,r){_classCallCheck(this,e),this.settingsService=t,this.folderService=n,this.principalService=r,this.usersDisplayName="",this.folders=[],this.userMayCreateNewFolder=!1,this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Ordneransicht"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.userMayCreateNewFolder=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this._initMembers()}},{key:"_initMembers",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName="",this.newFolder={orgaId:this.principal.orgaId,name:""},e&&(this.folders=this.folderService.getAllAccessibleFolders4CurrentUser())}},{key:"isForeignFolder",value:function(e){return e.orgaId!==this.principal.orgaId}},{key:"getPermissionsHint",value:function(e){var t=" (";return e.readAllowed&&(t+="r"),e.writeAllowed&&(t+="w"),e.deleteAllowed&&(t+="d"),t+=")",this.isForeignFolder(e)&&(t+=" (von: "+e.orgaId+")"),t}},{key:"enterEditMode",value:function(e){e<0||e>=this.folders.length||(this._initMembers(!1),this.editFolderIdx=e,this.editFolderNewName=this.folders[e].name)}},{key:"cancelEditMode",value:function(){this._initMembers(!1)}},{key:"persistEditFolderChanges",value:function(){var e=this.folders[this.editFolderIdx],t=e.name;e.name!==this.editFolderNewName?(this.folders[this.editFolderIdx].name=this.editFolderNewName,this.folderService.renameFolder(this.folders[this.editFolderIdx])?this.cancelEditMode():(this.errorMessage="Der Ordnername wird schon verwendet.",e.name=t)):this.cancelEditMode()}},{key:"removeFolder",value:function(e){this.folderService.removeFolder(e)?this._initMembers():this.errorMessage="Du darfst diesen Ordner nicht l\xf6schen, fehlende Berechtigung!"}},{key:"addNewFolder",value:function(){this.userMayCreateNewFolder&&(this.folderService.addNewFolder(this.newFolder)?this._initMembers():this.errorMessage="Der Ordnername wird schon verwendet.")}},{key:"somethingChanged",value:function(e){"Enter"!==e.code&&(this.errorMessage="")}}]),e}()).\u0275fac=function(e){return new(e||sm)(As(Vf),As(qp),As(zf))},sm.\u0275cmp=ht({type:sm,selectors:[["app-listfolders"]],decls:10,vars:6,consts:[[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-1"],["class","container-form",4,"ngIf"],[1,"error-text",3,"hidden"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text",3,"click"],["class","btnInListe btnDelete","style","position: absolute; right: 0.7em;",3,"click",4,"ngIf"],[1,"btnInListe","btnDelete",2,"position","absolute","right","0.7em",3,"click"],[1,"container-form"],[1,"row"],[1,"input-field","col","s8","m6","mb-0","mr-1"],["for","editName"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newFolderForm","ngForm"],[1,"input-field","col","s8","m6","mb-0"],["for","folderName"],["type","text","id","folderName","name","folderName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["folderName","ngModel"],[1,"col","s6","m4"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Rs(0,"h6"),$s(1),Es(),Rs(2,"ul",0),Is(3,nm,8,7,"li",1),Us(4,"hr",2),Es(),Is(5,rm,11,2,"div",3),Is(6,im,12,2,"div",3),Rs(7,"div",4),Rs(8,"p"),$s(9),Es(),Es()),2&e&&(xr(1),Qs(" Hallo ",t.usersDisplayName,", auf folgende Ordner hast du mind. eine Berechtigung (egal welche):"),xr(2),Ps("ngForOf",t.folders),xr(2),Ps("ngIf",t.editFolderIdx>=0),xr(1),Ps("ngIf",t.userMayCreateNewFolder&&t.editFolderIdx<0),xr(1),Ps("hidden",!t.errorMessage),xr(2),Qs("Hinweis/Fehler: ",t.errorMessage,""))},directives:[$u,Qu,qu,Mg,up,lp,Tp,Hg,sp,op,Gg,Qv],styles:[".liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{cursor:pointer}.error-text[_ngcontent-%COMP%]{font-weight:700;color:#dc143c}"]}),sm),um=function(e){return e[e.None=0]="None",e[e.AccountVerification=1]="AccountVerification",e[e.InvitationOrgaUser=2]="InvitationOrgaUser",e[e.DeclinedOrgaUserInvitation=3]="DeclinedOrgaUserInvitation",e[e.AcceptedOrgaUserInvitation=4]="AcceptedOrgaUserInvitation",e}({}),cm=((om=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.principalService=t,this.orgaService=n,this.eventService=r,this.notificationList=[],this.eventService.idmEvent.subscribe((function(e){return i._onIdmEvent(e)}))}return _createClass(e,[{key:"_onIdmEvent",value:function(e){var t=this.notificationList.length;switch(e.type){case Kf.AccountDeleted:this._removeItemsForThisAccount(e.accountId);break;case Kf.OrgaUserRemoved:this._removeItemsForThisOrgaUser(e.orgaUser.id);break;case Kf.OrganisationRemoved:this._removeItemsForThisOrganisation(e.organizationId)}this.notificationList.length!==t&&this.eventService.publishRefreshMainViewEvent()}},{key:"_removeItemsForThisAccount",value:function(e){this.notificationList=this.notificationList.filter((function(t){var n;return(null===(n=t.accountAsRecipient)||void 0===n?void 0:n.id)!==e}))}},{key:"_removeItemsForThisOrgaUser",value:function(e){this.notificationList=this.notificationList.filter((function(t){var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)!==e}))}},{key:"_removeItemsForThisOrganisation",value:function(e){this.notificationList=this.notificationList.filter((function(t){return t.orgaIdAsRecipient!==e})),this.notificationList=this.notificationList.filter((function(t){var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.orgaId)!==e}))}},{key:"_fillWithTestData",value:function(){this.notificationList.push({id:1,type:um.AccountVerification,accountAsRecipient:{id:110,name:"Klaus",email:""}},{id:3,type:um.InvitationOrgaUser,accountAsRecipient:{id:110,name:"Klaus",email:""},orgaUser:{id:410,name:"Klaus Kraus",orgaId:300}},{id:4,type:um.AcceptedOrgaUserInvitation,orgaIdAsRecipient:300,orgaUser:{id:410,name:"Klaus Kraus",orgaId:302}},{id:5,type:um.DeclinedOrgaUserInvitation,orgaIdAsRecipient:301,orgaUser:{id:410,name:"Klaus Kraus",orgaId:301}})}},{key:"addNotification",value:function(e){var t=0;this.notificationList.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1,this.notificationList.push(e)}},{key:"getAllNotificationsForCurrentPrincipal",value:function(){var e,t,n=this;if(!this.principalService.isLoggedIn())return[];var r=null!==(t=null===(e=this.principalService.getOrgaUser())||void 0===e?void 0:e.orgaId)&&void 0!==t?t:0;return r&&!this.principalService.isAdminOfCurrentOrga()&&(r=0),this.notificationList.filter((function(e){var t;return(null===(t=e.accountAsRecipient)||void 0===t?void 0:t.id)===n.principalService.getAccount().id||e.orgaIdAsRecipient===r?e:void 0}))}},{key:"getNumberOfNotificationsForCurrentPrincipal",value:function(){return this.getAllNotificationsForCurrentPrincipal().length}},{key:"_declineInvitationOrgaUser",value:function(e){this.eventService.publishTaskEvent({type:bg.OrgaUserInvitationDeclined,orgaUser:e.orgaUser}),this.addNotification({type:um.DeclinedOrgaUserInvitation,orgaIdAsRecipient:e.orgaUser.orgaId,orgaUser:e.orgaUser})}},{key:"declineInvitation",value:function(e){var t=this.notificationList.find((function(t){return t.id===e}));if(t){switch(t.type){case um.AccountVerification:break;case um.InvitationOrgaUser:this._declineInvitationOrgaUser(t)}this.removeNotification(e)}}},{key:"acceptInvitation",value:function(e){var t=this.notificationList.find((function(t){return t.id===e}));if(t){switch(t.type){case um.AccountVerification:break;case um.InvitationOrgaUser:this._acceptInvitationOrgaUser(t)}this.removeNotification(e)}}},{key:"removeNotification",value:function(e){var t=this.notificationList.findIndex((function(t){return t.id===e}));t>=0&&this.notificationList.splice(t,1),this.eventService.publishRefreshMainViewEvent()}},{key:"_acceptInvitationOrgaUser",value:function(e){return this.eventService.publishTaskEvent({type:bg.OrgaUserInvitationAccepted,account:this.principalService.getAccount(),orgaUser:e.orgaUser}),!!this.orgaService.findOrgaUserByAccountId(e.orgaUser.orgaId,this.principalService.getAccount().id)&&(this.addNotification({type:um.AcceptedOrgaUserInvitation,orgaIdAsRecipient:e.orgaUser.orgaId,orgaUser:e.orgaUser}),!0)}}]),e}()).\u0275fac=function(e){return new(e||om)(Je(zf),Je(wg),Je(Lf))},om.\u0275prov=he({token:om,factory:om.\u0275fac,providedIn:"root"}),om);function lm(e,t){if(1&e&&(Rs(0,"h4"),$s(1),Es()),2&e){var n=zs();xr(1),Qs("",n.principal.name,", du hast keine Nachrichten.")}}var dm=function(e){return{editMode:e}};function hm(e,t){if(1&e){var n=Ms();Rs(0,"li",3),Ds("click",(function(){Wt(n);var e=t.index;return zs(2).showNotification(e)})),Rs(1,"span",4),$s(2),Es(),Rs(3,"span",5),$s(4),Es(),Es()}if(2&e){var r=t.$implicit,i=t.index,s=zs(2);Ps("ngClass",da(3,dm,r.id===s.notificationTodo.id)),xr(2),Qs(" ",s.getTypeAsString(i)," "),xr(2),Qs(" ",s.getDetailsOfNotification(i)," ")}}function fm(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"p"),$s(2,"Du hast deine Mail-Adresse erfolgreich verifiziert und damit deinen Account aktiviert. "),Us(3,"br"),$s(4," Dies ist nur eine Information, du musst weiter nichts unternehmen."),Es(),Rs(5,"button",6),Ds("click",(function(){return Wt(n),zs(3).declineInvitation()})),$s(6,"Nachricht l\xf6schen"),Es(),Es()}}function gm(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"p"),$s(2),Us(3,"br"),$s(4,' Durch "Annehmen" akzeptierst du die Einladung und der Vorgang ist abgeschlossen. '),Es(),Rs(5,"button",7),Ds("click",(function(){return Wt(n),zs(3).declineInvitation()})),$s(6,"Ablehnen"),Es(),Rs(7,"button",8),Ds("click",(function(){return Wt(n),zs(3).acceptInvitation()})),$s(8,"Annehmen"),Es(),Es()}if(2&e){var r=zs(3);xr(2),Qs('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',r.getOrgaName(r.notificationTodo.orgaUser.orgaId),'" vorgesehen. ')}}function vm(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"p"),$s(2),Us(3,"br"),$s(4," Dies ist nur eine Information. "),Es(),Rs(5,"button",8),Ds("click",(function(){return Wt(n),zs(3).acceptInvitation()})),$s(6,"Nachricht l\xf6schen"),Es(),Es()}if(2&e){var r=zs(3);xr(2),Qs("Der Benutzer ",r.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation abgelehnt. Der entsprechende Organisations-User wurde entfernt. ")}}function pm(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"p"),$s(2),Us(3,"br"),$s(4," Dies ist nur eine Information. "),Es(),Rs(5,"button",8),Ds("click",(function(){return Wt(n),zs(3).acceptInvitation()})),$s(6,"Nachricht l\xf6schen"),Es(),Es()}if(2&e){var r=zs(3);xr(2),Qs("Der Benutzer ",r.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation angenommen. ")}}function mm(e,t){if(1&e&&(Rs(0,"div"),Is(1,fm,7,0,"div",0),Is(2,gm,9,1,"div",0),Is(3,vm,7,1,"div",0),Is(4,pm,7,1,"div",0),Es()),2&e){var n=zs(2);xr(1),Ps("ngIf",1===n.notificationTodo.type),xr(1),Ps("ngIf",2===n.notificationTodo.type),xr(1),Ps("ngIf",3===n.notificationTodo.type),xr(1),Ps("ngIf",4===n.notificationTodo.type)}}function ym(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"h6"),$s(2),Es(),Rs(3,"ul",1),Is(4,hm,5,5,"li",2),Es(),Is(5,mm,5,4,"div",0),Es()),2&e){var n=zs();xr(2),Qs("",n.principal.name,", du hast folgende Nachrichten:"),xr(2),Ps("ngForOf",n.allNotifications),xr(1),Ps("ngIf",n.notificationTodo.id>0)}}var _m,km=((_m=function(){function e(t,n,r,i){_classCallCheck(this,e),this.notificationService=t,this.principalService=n,this.settingsService=r,this.orgaService=i,this.allNotifications=[],this.notificationDescription="",this.settingsService.setTitle("Nachrichten")}return _createClass(e,[{key:"ngOnInit",value:function(){this.principal=this.principalService.getAccount(),this.initMembers()}},{key:"initMembers",value:function(){this.allNotifications=this.notificationService.getAllNotificationsForCurrentPrincipal(),this.allNotifications.length>0?(this.idxNotificationTodo||(this.idxNotificationTodo=0),this.allNotifications[this.idxNotificationTodo]||(this.idxNotificationTodo=this.idxNotificationTodo-1),this.showNotification(this.idxNotificationTodo)):(this.idxNotificationTodo=void 0,this.notificationTodo={type:um.None,accountAsRecipient:void 0,id:0},this.notificationDescription="")}},{key:"getTypeAsString",value:function(e){var t=this.allNotifications[e];return t.id+": "+um[t.type]}},{key:"getOrgaName",value:function(e){var t=this.orgaService.findOrgaById(e);return t&&t.name||"unknown-Orga"}},{key:"getDetailsOfNotification",value:function(e){var t=this.allNotifications[e];switch(t.type){case um.AccountVerification:return t.accountAsRecipient.name;case um.InvitationOrgaUser:case um.DeclinedOrgaUserInvitation:case um.AcceptedOrgaUserInvitation:return t.orgaUser.name+" in Organisation "+this.getOrgaName(t.orgaUser.orgaId)}}},{key:"showNotification",value:function(e){this.idxNotificationTodo=e,this.notificationTodo=this.allNotifications[e]}},{key:"acceptInvitation",value:function(){this.notificationService.acceptInvitation(this.notificationTodo.id),this.initMembers()}},{key:"declineInvitation",value:function(){this.notificationService.declineInvitation(this.notificationTodo.id),this.initMembers()}}]),e}()).\u0275fac=function(e){return new(e||_m)(As(cm),As(zf),As(Vf),As(wg))},_m.\u0275cmp=ht({type:_m,selectors:[["app-notification-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"verweise"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-delete",3,"click"],[1,"btn",3,"click"]],template:function(e,t){1&e&&(Is(0,lm,2,1,"h4",0),Is(1,ym,6,3,"div",0)),2&e&&(Ps("ngIf",0===t.allNotifications.length),xr(1),Ps("ngIf",t.allNotifications.length>0))},directives:[Qu,$u,qu],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:60em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:15em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:40em;text-align:left}hr[_ngcontent-%COMP%]{height:3px;background:#000;margin-top:2em;margin-bottom:1em;width:60em}li[_ngcontent-%COMP%]{margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}"]}),_m);function bm(e,t){if(1&e){var n=Ms();Rs(0,"li"),Rs(1,"div",1),Rs(2,"label",2),Ds("click",(function(){Wt(n);var e=t.index;return zs().toggleValue(e)})),$s(3),Es(),Rs(4,"label",3),$s(5," Nee "),Rs(6,"input",4),Ds("change",(function(){Wt(n);var e=t.index;return zs().toggleValue(e)})),Es(),Us(7,"span",5),$s(8," Jaa "),Es(),Es(),Es()}if(2&e){var r=t.$implicit;xr(3),Qs("",r.key,":"),xr(3),Ps("checked",r.value)}}var Cm,wm,Om,Im=((Cm=function(){function e(t,n){_classCallCheck(this,e),this.settingsService=t,this.eventService=n,this.checked=!1,this.boolSettings=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Programmeinstellungen");var e=this.settingsService.getAllBooleanSettings();for(var t in e)this.boolSettings.push({key:t,value:e[t]})}},{key:"toggleValue",value:function(e){var t=this.boolSettings[e];t.value=!t.value,this.settingsService.booleanValueSet(t.key,t.value),"useGreenLikeColors"!==t.key&&"useAccountName4DisplayingUsername"!==t.key||this.eventService.publishRefreshMainViewEvent()}}]),e}()).\u0275fac=function(e){return new(e||Cm)(As(Vf),As(Lf))},Cm.\u0275cmp=ht({type:Cm,selectors:[["app-settings"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"switch"],[1,"switch-description",3,"click"],[1,"switch-text"],["type","checkbox",3,"checked","change"],[1,"lever"]],template:function(e,t){1&e&&(Rs(0,"ul"),Is(1,bm,9,2,"li",0),Es()),2&e&&(xr(1),Ps("ngForOf",t.boolSettings))},directives:[$u],styles:[".switch-description[_ngcontent-%COMP%]{width:30em;font-weight:700}.switch-description[_ngcontent-%COMP%], .switch-text[_ngcontent-%COMP%]{margin-bottom:1em;float:left;text-align:left}.switch-text[_ngcontent-%COMP%]{margin-left:2rem;width:10em}li[_ngcontent-%COMP%]{white-space:nowrap;display:inline-block}"]}),Cm),Sm=function(e){return e[e.None=0]="None",e[e.AccountVerification=1]="AccountVerification",e[e.InvitationOrgaUser=2]="InvitationOrgaUser",e[e.InfoOfInvitationOrgaUser=3]="InfoOfInvitationOrgaUser",e}({}),Am=((wm=function(){function e(t,n,r){_classCallCheck(this,e),this.notificationService=t,this.orgaService=n,this.eventService=r,this.mailList=[]}return _createClass(e,[{key:"_fillWithTestData",value:function(){this.mailList.push({type:Sm.AccountVerification,id:1,email:"Klaus.Hetzelein@datev.de",account:{name:"Klaus Hetzelein",email:""}},{type:Sm.InvitationOrgaUser,id:2,email:"klaus@bk",orgaUser:{id:110,name:"Orga Klaus Name",orgaId:300}},{type:Sm.InfoOfInvitationOrgaUser,id:3,email:"klaus@mail.de",account:{name:"Klaus",email:""},orgaUser:{id:110,name:"Orga Klaus Name",orgaId:300}})}},{key:"mailsAvailable",value:function(){return this.mailList.length>0}},{key:"getNumberOfMails",value:function(){return this.mailList.length}},{key:"setTaskInProgress",value:function(e){if(this.taskByMailInProgress)return!1;var t=this.mailList.find((function(t){return t.id===e}));return!!t&&(this.taskByMailInProgress=t,!0)}},{key:"resetTaskInProgress",value:function(){this.taskByMailInProgress=void 0}},{key:"getTaskInProgress",value:function(){return this.taskByMailInProgress}},{key:"addMailTask",value:function(e){var t=0;this.mailList.forEach((function(e){e.id>t&&(t=e.id)})),e.id=t+1,this.mailList.push(e),this.resetTaskInProgress()}},{key:"getAllMailsByType",value:function(e){return this.mailList.filter((function(t){return t.type===e}))}},{key:"getAllMails",value:function(){return this.mailList}},{key:"_declineAccountVerification",value:function(e){this.eventService.publishTaskEvent({type:bg.AccountVerificationDeclined,account:e.account})}},{key:"_declineInvitationOrgaUser",value:function(e){this.eventService.publishTaskEvent({type:bg.OrgaUserInvitationDeclined,orgaUser:e.orgaUser})}},{key:"declineTask",value:function(e){var t=this.mailList.find((function(t){return t.id===e}));if(t){switch(t.type){case Sm.AccountVerification:this._declineAccountVerification(t);break;case Sm.InvitationOrgaUser:this._declineInvitationOrgaUser(t)}this.removeTask(e)}}},{key:"removeTask",value:function(e){var t=this.getTaskInProgress();t&&t.id===e&&this.resetTaskInProgress();var n=this.mailList.findIndex((function(t){return t.id===e}));n>=0&&this.mailList.splice(n,1)}},{key:"_fulfillInvitationOrgaUserTask",value:function(e){var t=this.getTaskInProgress();return!(!t||t.type!==Sm.InvitationOrgaUser||this.orgaService.accountIsAlreadyMemberInOrga(t.orgaUser.orgaId,e.account.id)||(this.notificationService.addNotification({type:um.InvitationOrgaUser,accountAsRecipient:e.account,orgaUser:t.orgaUser}),this.removeTask(t.id),this.eventService.publishRefreshMainViewEvent(),0))}},{key:"_fulfillAccountVerificationTask",value:function(e){var t=this.getTaskInProgress();return!!t&&t.account.id===e.account.id&&(this.eventService.publishTaskEvent({type:bg.AccountVerified,account:e.account}),this.notificationService.addNotification({type:um.AccountVerification,accountAsRecipient:e.account}),this.removeTask(t.id),!0)}},{key:"thisFulfillsPendingTask",value:function(e){if(this.taskByMailInProgress){var t=Object.assign({},this.taskByMailInProgress);return t.type===Sm.AccountVerification&&this._fulfillAccountVerificationTask(e)||t.type===Sm.InvitationOrgaUser&&this._fulfillInvitationOrgaUserTask(e)?t:void this.resetTaskInProgress()}}}]),e}()).\u0275fac=function(e){return new(e||wm)(Je(cm),Je(wg),Je(Lf))},wm.\u0275prov=he({token:wm,factory:wm.\u0275fac,providedIn:"root"}),wm),xm=function(e){return e[e.LoggedIn=1]="LoggedIn",e[e.LoggedOut=2]="LoggedOut",e[e.AccountDetails=3]="AccountDetails",e[e.OrgaUserDetails=4]="OrgaUserDetails",e[e.OrganizationDetails=5]="OrganizationDetails",e}({}),Pm=((Om=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.fakeBackend=t,this.eventService=n,this.principalService=r,this.isActive=!0,this.eventService.tokenChanged.pipe(rg((function(){return i.isActive}))).subscribe((function(e){return i._onTokenChanged(e)})),this.initMembers()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"initMembers",value:function(){this.token={authType:Ff.None},this.token.credential={kennung:"",secret:""},this.token.account={name:"",email:""},this.token.orgaUser={name:""},this.token.organization={name:""}}},{key:"_onTokenChanged",value:function(e){var t,n=!1;switch(e.type){case xm.LoggedIn:n=!0;break;case xm.AccountDetails:this.token.account.id===e.account.id&&(n=!0,this.token.account=this.fakeBackend.findAccountById(this.token.account.id),this.principalService.setPrincipal(this.token));break;case xm.OrgaUserDetails:case xm.OrganizationDetails:e.type===xm.OrgaUserDetails&&(null===(t=this.token.orgaUser)||void 0===t?void 0:t.id)===e.orgaUser.id&&(n=!0,this.token.orgaUser=this.fakeBackend.findOrgaUserById(e.orgaUser.id),this.principalService.setPrincipal(this.token))}if(n&&this.principalService.isLoggedInInOrga()){var r=this.principalService.getOrgaUser(),i=this.fakeBackend.getAllAllowedSubOrgas(r.orgaId,r.id).map((function(e){return e.id}));this.principalService.setSubOrgaIdsWithAdminsPermissions(i)}}},{key:"register",value:function(e,t){return this.fakeBackend.register(e,t)}},{key:"login",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.fakeBackend.login(e,t);return this.tempToken=Object.assign({},n),n}},{key:"logoutFromOrganization",value:function(e){var t=Object.assign({},this.token);t.authType=Ff.Account,t.organization=void 0,t.orgaUser=void 0,t.availableOrgas.splice(t.availableOrgas.findIndex((function(t){return t.id===e})),1),this.setToken(t)}},{key:"getTempToken",value:function(){return this.tempToken}},{key:"loginWithOrganization",value:function(e){this.tempToken.authType=Ff.OrgaUser;var t={authType:Ff.OrgaUser};Object.assign(t,this.tempToken);var n=t.availableOrgas.find((function(t){return t.id===e}));t.organization=n,t.orgaUser=this.fakeBackend.findOrgaUserByAccountId(n.id,t.account.id),this.setToken(t)}},{key:"loginWithAccountOnly",value:function(){var e={authType:Ff.Account};e.credential=this.tempToken.credential,e.account=this.tempToken.account,e.availableOrgas=this.tempToken.availableOrgas,this.setToken(e)}},{key:"logout",value:function(){this.setToken({authType:Ff.None})}},{key:"_determineAuthLevel",value:function(e){switch(e.type){case Df.Benutzerkonto:return Nf.Low;case Df.SmsTan:return Nf.Medium;case Df.SmartCard:case Df.SmartLogin:return Nf.Secure}return Nf.Low}},{key:"setToken",value:function(e){this.initMembers(),this.token.authType=e.authType,this.token.authType!==Ff.None&&(this.tempToken=void 0,Object.assign(this.token,e),this.token.authLevel=this._determineAuthLevel(e.credential)),this.principalService.setPrincipal(this.token),this.principalService.isLoggedIn()?this.principalService.isLoggedInInOrga()?this.eventService.publishTokenChangedEvent({type:xm.LoggedIn,account:this.token.account,orgaUser:this.token.orgaUser}):this.eventService.publishTokenChangedEvent({type:xm.LoggedIn,account:this.token.account}):this.eventService.publishTokenChangedEvent({type:xm.LoggedOut})}},{key:"getToken",value:function(){return this.token}}]),e}()).\u0275fac=function(e){return new(e||Om)(Je(Cg),Je(Lf),Je(zf))},Om.\u0275prov=he({token:Om,factory:Om.\u0275fac,providedIn:"root"}),Om);function Tm(e,t){1&e&&(Rs(0,"h4"),$s(1,'Derzeit sind keine "Mails" vorhanden.'),Es())}var Rm=function(e){return{editMode:e}};function Em(e,t){if(1&e){var n=Ms();Rs(0,"li",3),Ds("click",(function(){Wt(n);var e=t.index;return zs(2).showTask(e)})),Rs(1,"span",4),$s(2),Es(),Rs(3,"span",5),$s(4),Es(),Es()}if(2&e){var r=t.$implicit,i=t.index,s=zs(2);Ps("ngClass",da(3,Rm,r.id===s.taskTodo.id)),xr(2),Qs(" ",s.getTypeAsString(i)," "),xr(2),Qs(" ",s.getDetailsOfTask(i)," ")}}function Um(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"p"),$s(2,"Du hast dich registriert, aber deine Email-Adresse noch nicht verifiziert. "),Us(3,"br"),$s(4," Wenn du untenstehendem Link folgst und dich mit deinem registrierten Account anmeldest, best\xe4tigst du deine Email-Adresse. "),Es(),Rs(5,"p"),$s(6,'Damit wird dein Account "aktiv" (und die "Nachricht" verschwindet automatisch...)'),Es(),Rs(7,"a",7),Ds("click",(function(){return Wt(n),zs(3).wantsToFulfill()})),$s(8,"Hiermit verifizierst du deine Email-Adresse."),Es(),Es()}}function Mm(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"p"),$s(2),Us(3,"br"),$s(4," Wenn dies in Ordnung ist, f\xfchre folgende Schritte durch:"),Es(),Rs(5,"ul",8),Rs(6,"li"),Rs(7,"a",7),Ds("click",(function(){return Wt(n),zs(3).wantsToFulfill()})),$s(8,"Melde dich mit deinem Account an."),Es(),Es(),Rs(9,"li"),Rs(10,"a",9),Ds("click",(function(){return Wt(n),zs(3).wantsToFulfill()})),$s(11," Oder registriere dich zun\xe4chst und melde dich danach an."),Es(),Es(),Rs(12,"li"),$s(13," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Es(),Es(),Es()}if(2&e){var r=zs(3);xr(2),Qs('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',r.getOrganame(r.taskTodo.orgaUser.orgaId),'" vorgesehen.')}}function Fm(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"p"),$s(2),Us(3,"br"),$s(4," Dir wurde eine Nachricht an deinen Account geschickt. Daher einfach anmelden und deine Nachrichten pr\xfcfen. "),Es(),Rs(5,"ul",8),Rs(6,"li"),Rs(7,"a",7),Ds("click",(function(){return Wt(n),zs(3).wantsToFulfill()})),$s(8,"Melde dich mit deinem Account an."),Es(),Es(),Rs(9,"li"),$s(10," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Es(),Es(),Es()}if(2&e){var r=zs(3);xr(2),Qs('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',r.getOrganame(r.taskTodo.orgaUser.orgaId),'" vorgesehen.')}}function Nm(e,t){if(1&e){var n=Ms();Rs(0,"div"),Is(1,Um,9,0,"div",0),Is(2,Mm,14,1,"div",0),Is(3,Fm,11,1,"div",0),Rs(4,"button",6),Ds("click",(function(){return Wt(n),zs(2).declineInvitation()})),$s(5,"Ablehnen und l\xf6schen"),Es(),Es()}if(2&e){var r=zs(2);xr(1),Ps("ngIf",1===r.taskTodo.type),xr(1),Ps("ngIf",2===r.taskTodo.type),xr(1),Ps("ngIf",3===r.taskTodo.type)}}function Dm(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"h6"),$s(2,'Folgende "Mails" sind vorhanden:'),Es(),Rs(3,"ul",1),Is(4,Em,5,5,"li",2),Es(),Is(5,Nm,6,3,"div",0),Es()),2&e){var n=zs();xr(4),Ps("ngForOf",n.allTasks),xr(1),Ps("ngIf",n.taskTodo.id>0)}}var Lm,Vm,zm,jm=((zm=function(){function e(t,n,r,i){_classCallCheck(this,e),this.taskService=t,this.tokenService=n,this.settingsService=r,this.orgaService=i,this.allTasks=[],this.taskTodoDescription="",this.tokenService.logout(),this.settingsService.setTitle("Fake Mailbox"),this.taskService.resetTaskInProgress()}return _createClass(e,[{key:"ngOnInit",value:function(){this.initMembers()}},{key:"initMembers",value:function(){this.allTasks=this.taskService.getAllMails(),this.allTasks.length>0?(this.idxTaskTodo||(this.idxTaskTodo=0),this.allTasks[this.idxTaskTodo]||(this.idxTaskTodo=this.idxTaskTodo-1),this.showTask(this.idxTaskTodo)):(this.idxTaskTodo=void 0,this.taskTodo={type:Sm.None,id:0},this.taskTodoDescription="")}},{key:"getTypeAsString",value:function(e){var t=this.allTasks[e];return t.id+": "+Sm[t.type]}},{key:"getOrganame",value:function(e){var t=this.orgaService.findOrgaById(e);return t&&t.name||"unknown-Orga"}},{key:"getDetailsOfTask",value:function(e){var t=this.allTasks[e];switch(t.type){case Sm.AccountVerification:return t.email+", "+t.account.name;case Sm.InvitationOrgaUser:return t.email;case Sm.InfoOfInvitationOrgaUser:return t.email+", "+t.account.name}}},{key:"showTask",value:function(e){this.idxTaskTodo=e,this.taskTodo=this.allTasks[e]}},{key:"wantsToFulfill",value:function(){this.taskTodo.type!==Sm.InfoOfInvitationOrgaUser?this.taskService.setTaskInProgress(this.taskTodo.id)||alert("Da stimmt was mit der aktuellen Best\xe4tigung/Task nicht?!?"):this.taskService.removeTask(this.taskTodo.id)}},{key:"declineInvitation",value:function(){this.taskService.declineTask(this.taskTodo.id),this.initMembers()}}]),e}()).\u0275fac=function(e){return new(e||zm)(As(Am),As(Pm),As(Vf),As(wg))},zm.\u0275cmp=ht({type:zm,selectors:[["app-fake-mail-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"verweise"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn","btn-delete",3,"click"],["routerLink","/iam/login",3,"click"],[1,"browser-default"],["routerLink","/iam/register",3,"click"]],template:function(e,t){1&e&&(Is(0,Tm,2,0,"h4",0),Is(1,Dm,6,2,"div",0)),2&e&&(Ps("ngIf",0===t.allTasks.length),xr(1),Ps("ngIf",t.allTasks.length>0))},directives:[Qu,$u,qu,nf],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:50em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:15em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:30em;text-align:left}hr[_ngcontent-%COMP%]{height:3px;background:#000;margin-top:2em;margin-bottom:1em;width:50em}li[_ngcontent-%COMP%]{margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}"]}),zm),Bm=((Vm=function(){function e(t,n,r){_classCallCheck(this,e),this.principalService=t,this.router=n,this.settingsService=r}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=!0,r="",i=!!e.data.allowSubAdmin;return this.settingsService.setRedirectUri(t.url),this.principalService.getAuthType()<Ff.OrgaUser?(n=!1,r=i?"Du must in einer Organisation angemeldet- und Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du must in einer Organisation angemeldet- und Admin dieser Organisation sein."):(this.principalService.isAdminOfCurrentOrga()||(n=!1,i&&this.principalService.isSubAdminOfAtLeastOneSubOrga()&&(n=!0)),n||(r=i?"Du musst Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du musst Admin dieser Organisation sein.")),n?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(r),this.settingsService.showInfoPageAfterOrgaAdminGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}]),e}()).\u0275fac=function(e){return new(e||Vm)(Je(zf),Je(tf),Je(Vf))},Vm.\u0275prov=he({token:Vm,factory:Vm.\u0275fac,providedIn:"root"}),Vm),Hm=((Lm=function(){function e(t){_classCallCheck(this,e),this.fakeBackend=t}return _createClass(e,[{key:"updateAccount",value:function(e){return this.fakeBackend.updateAccount(e)}},{key:"deleteAccount",value:function(e){return this.fakeBackend.deleteAccount(e)}},{key:"findAccountById",value:function(e){return this.fakeBackend.findAccountById(e)}},{key:"findAccountByMail",value:function(e){return this.fakeBackend.findAccountByMail(e)}}]),e}()).\u0275fac=function(e){return new(e||Lm)(Je(Cg))},Lm.\u0275prov=he({token:Lm,factory:Lm.\u0275fac,providedIn:"root"}),Lm);function Gm(e,t){1&e&&(Rs(0,"div"),Rs(1,"p"),$s(2,"Du kannst deinen Account derzeit noch nicht l\xf6schen, da du noch in mind. einer Organisation Mitglied bist."),Es(),Rs(3,"a",14),$s(4," Weiter zur Verwaltung deiner Mitgliedschaften... "),Es(),Es())}function Km(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"button",15),Ds("click",(function(){return Wt(n),zs().deleteAccount()})),$s(2,"Account l\xf6schen"),Es(),Es()}}var Wm,qm=((Wm=function(){function e(t,n,r,i,s,o,a){_classCallCheck(this,e),this.accountService=t,this.orgaService=n,this.tokenService=r,this.principalService=i,this.eventService=s,this.settingsService=o,this.router=a,this.deleteAccountAllowed=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e;this.settingsService.setTitle("Account-Verwaltung"),this.principalsAccountId=null===(e=this.principalService.getAccount())||void 0===e?void 0:e.id,this.initMembers()}},{key:"initMembers",value:function(){this.account=this.accountService.findAccountById(this.principalsAccountId),this.accountPrevious=Object.assign({},this.account),this.deleteAccountAllowed=!this.orgaService.accountHasAnyOrgaMembership(this.account.id)||this.settingsService.allowDeletionOfAccountWithOrgaMemberships()}},{key:"dirty",value:function(){return this.accountPrevious.name!==this.account.name||this.accountPrevious.email!==this.account.email}},{key:"resetForm",value:function(){this.initMembers()}},{key:"submitForm",value:function(){this.accountService.updateAccount(this.account)?(this.eventService.publishTokenChangedEvent({type:xm.AccountDetails,account:this.account}),this.initMembers()):alert("\xc4nderungen konnten nicht \xfcbernommen werden ???")}},{key:"deleteAccount",value:function(){confirm("Willst du deinen Account wirklich l\xf6schen?")&&this.accountService.deleteAccount(this.principalsAccountId)&&(this.tokenService.logout(),this.router.navigateByUrl("/"))}}]),e}()).\u0275fac=function(e){return new(e||Wm)(As(Hm),As(wg),As(Pm),As(zf),As(Lf),As(Vf),As(tf))},Wm.\u0275cmp=ht({type:Wm,selectors:[["app-iam-account-mgmt"]],decls:25,vars:6,consts:[[1,"container"],[3,"ngSubmit"],["changeAccountForm","ngForm"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["type","button",1,"btn","mr-1","mt-1",3,"disabled","click"],["type","submit",1,"btn","mt-1",3,"disabled"],[1,"hr-3"],[4,"ngIf"],["routerLink","/iam/organization-management",2,"font-size","larger"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){if(1&e&&(Rs(0,"div",0),Rs(1,"p"),$s(2,"Hier kannst du deine Accountdaten \xe4ndern:"),Es(),Rs(3,"form",1,2),Ds("ngSubmit",(function(){return t.submitForm()})),Rs(5,"div",3),Rs(6,"label",4),$s(7,"Name (muss mind. 3 Zeichen haben)"),Es(),Rs(8,"input",5,6),Ds("ngModelChange",(function(e){return t.account.name=e})),Es(),Es(),Rs(10,"div",3),Rs(11,"label",7),$s(12,"Email (Pflichtfeld, eindeutig)"),Es(),Rs(13,"input",8,9),Ds("ngModelChange",(function(e){return t.account.email=e})),Es(),Es(),Rs(15,"button",10),Ds("click",(function(){return t.resetForm()})),$s(16,"\xc4nderungen verwerfen"),Es(),Rs(17,"button",11),$s(18,"\xc4nderungen \xfcbernehmen"),Es(),Es(),Es(),Rs(19,"div"),Us(20,"hr",12),Rs(21,"p"),$s(22,"Hier kannst du deinen Account l\xf6schen."),Es(),Es(),Is(23,Gm,5,0,"div",13),Is(24,Km,3,0,"div",13)),2&e){var n=Ss(4);xr(8),Ps("ngModel",t.account.name),xr(5),Ps("ngModel",t.account.email),xr(2),Ps("disabled",!t.dirty()),xr(2),Ps("disabled",!n.valid||!t.dirty()),xr(6),Ps("ngIf",!t.deleteAccountAllowed),xr(1),Ps("ngIf",t.deleteAccountAllowed)}},directives:[op,Gg,Qv,Mg,up,lp,Tp,Hg,sp,Qu,nf],styles:[""]}),Wm);function Zm(e,t){if(1&e){var n=Ms();Rs(0,"li"),Rs(1,"span",22),$s(2),Es(),Rs(3,"span",23),$s(4),Es(),Rs(5,"button",24),Ds("click",(function(){Wt(n);var e=t.index;return zs().leaveOrganization(e)})),$s(6," Organisation verlassen"),Es(),Es()}if(2&e){var r=t.$implicit,i=zs();xr(2),Qs(" ",i.getOrganizationTypeAsString(r.orga.type)," "),xr(2),Xs(" ",r.orga.name," (",r.orgaUser.name,") ")}}var $m=function(e){return{active:e}};function Jm(e,t){if(1&e){var n=Ms();Rs(0,"div",3),Rs(1,"div",25),Rs(2,"label",26),Rs(3,"input",27),Ds("ngModelChange",(function(e){return Wt(n),zs().showSearch=e})),Es(),Rs(4,"span"),$s(5),Es(),Es(),Es(),Rs(6,"div",28),Rs(7,"div",9),Rs(8,"div",14),Rs(9,"input",29),Ds("ngModelChange",(function(e){return Wt(n),zs().searchOrgaId=e}))("keydown.enter",(function(){return Wt(n),zs().searchOrganization()})),Es(),Es(),Rs(10,"div",30),Rs(11,"button",31),Ds("click",(function(){return Wt(n),zs().searchOrganization()})),$s(12," Suche Organisation "),Es(),Es(),Es(),Rs(13,"div",32),Rs(14,"div",25),Rs(15,"span",33),$s(16),Es(),Rs(17,"span"),$s(18),Es(),Es(),Es(),Rs(19,"form",34,35),Ds("ngSubmit",(function(){return Wt(n),zs().joinFoundOrganization()})),Rs(21,"div",14),Rs(22,"label",36),$s(23,"Dein Mitarbeitername in der Organisation"),Es(),Rs(24,"input",37,38),Ds("ngModelChange",(function(e){return Wt(n),zs().newOrgaUserJoinOrga.name=e})),Es(),Es(),Rs(26,"div",30),Rs(27,"button",21),$s(28,"Organisation beitreten"),Es(),Es(),Es(),Es(),Es()}if(2&e){var r=Ss(20),i=zs();xr(3),Ps("ngModel",i.showSearch),xr(2),Js(i.showSearch?"<Einer bestehenden Organisation beitreten> ausblenden":"<Einer bestehenden Organisation beitreten> einblenden"),xr(1),Ps("hidden",!i.showSearch),xr(3),Ps("ngModel",i.searchOrgaId),xr(7),Js(i.getOrganizationTypeAsString(i.foundOrganization.type)),xr(2),Js(i.foundOrgaDisplayname),xr(4),Ps("ngClass",da(9,$m,i.newOrgaUserJoinOrga.name)),xr(2),Ps("ngModel",i.newOrgaUserJoinOrga.name),xr(3),Ps("disabled",void 0===i.foundOrganization.id||!r.valid)}}function Qm(e,t){if(1&e&&(Rs(0,"option",39),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n.type),xr(1),Qs(" ",n.text,"")}}var Xm,Ym=((Xm=function(){function e(t,n,r,i){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.tokenService=r,this.organizationService=i,this.usersDisplayName="",this.orgas=[],this.allowJoiningOrgaByAccount=!0,this.searchOrgaId="",this.foundOrgaDisplayname="",this.mShowSearch=!1,this.mShowNewPart=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Organisations-Verwaltung"),this.principal=this.principalService.getAccount(),this.allowJoiningOrgaByAccount=this.settingsService.allowJoiningOrganizationByAccount(),this.usersDisplayName=this.principal.name,this.typeOptions=[{text:"Privat",type:kg.Privat},{text:"Unternehmen",type:kg.Unternehmen},{text:"Kanzlei",type:kg.Kanzlei}],this.initMembers()}},{key:"initMembers",value:function(){this.foundOrgaDisplayname="Bitte erst suchen...",this.foundOrganization={name:""},this.newOrganization={name:"",type:kg.Privat},this.newOrgaUserJoinOrga={accountId:this.principal.id,name:this.principal.name},this.newOrgaUserNewOrga={accountId:this.principal.id,adminType:Mf.SuperAdmin,name:this.principal.name},this.searchOrgaId="",this.orgas=this.organizationService.getAllOrgasForUser(this.principal.id)}},{key:"getOrganizationTypeAsString",value:function(e){return kg[e]}},{key:"leaveOrganization",value:function(e){var t=this.orgas[e].orga.id,n=this.tokenService.getToken().organization;if(n&&t===n.id){if(!confirm("Du verl\xe4sst die Organisation, in der du angemeldet bist.\nDu wirst damit umgemeldet! Ist das OK?"))return;this.tokenService.logoutFromOrganization(n.id)}this.organizationService.removeOrgaUserByAccountId(this.orgas[e].orga.id,this.principal.id),this.initMembers()}},{key:"_arrangeFoundDisplayname",value:function(){this.foundOrgaDisplayname="Bitte erst suchen...";var e=this.foundOrganization;void 0===e.id?this.foundOrgaDisplayname="Gesuchte Organisation gibt es nicht.":this.organizationService.accountIsAlreadyMemberInOrga(e.id,this.principal.id)?(this.foundOrgaDisplayname="In "+e.name+" bist du schon Mitglied.",this.foundOrganization.id=void 0):this.foundOrgaDisplayname=e.name}},{key:"searchOrganization",value:function(){var e=parseInt(this.searchOrgaId,10);this.foundOrganization=Object.assign({},this.organizationService.findOrgaById(e)),this._arrangeFoundDisplayname()}},{key:"joinFoundOrganization",value:function(){this.foundOrganization.id&&this.organizationService.joinOrganization(this.foundOrganization.id,this.newOrgaUserJoinOrga)&&this.initMembers()}},{key:"createNewOrganization",value:function(){this.organizationService.createNewOrganization(this.newOrganization,this.newOrgaUserNewOrga),this.initMembers()}},{key:"showSearch",get:function(){return this.mShowSearch},set:function(e){this.mShowSearch=e,this.mShowSearch&&(this.mShowNewPart=!1)}},{key:"showNewPart",get:function(){return this.mShowNewPart},set:function(e){this.mShowNewPart=e,this.mShowNewPart&&(this.mShowSearch=!1)}}]),e}()).\u0275fac=function(e){return new(e||Xm)(As(Vf),As(zf),As(Pm),As(wg))},Xm.\u0275cmp=ht({type:Xm,selectors:[["app-iam-orga-mgmt"]],decls:32,vars:14,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","container-form",4,"ngIf"],[1,"container-form"],["for","toggle-new"],["type","checkbox","id","toggle-new",3,"ngModel","ngModelChange"],[1,"row","mt-1",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["newOrgaForm","ngForm"],[1,"row","m-0"],[1,"input-field","col","s8","m6","l4"],["name","orgaTyp",1,"browser-default",3,"ngModel","ngModelChange"],["orgaTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["for","orgaName"],["type","text","id","orgaName","name","orgaName","required","",1,"form-control",3,"ngModel","ngModelChange"],["orgaName","ngModel"],["for","userName",3,"ngClass"],["type","text","id","userName","name","userName","required","",1,"form-control",3,"ngModel","ngModelChange"],["userName","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-primary",3,"click"],[1,"col","s12"],["for","toggle-suche"],["type","checkbox","id","toggle-suche",3,"ngModel","ngModelChange"],[1,"col","s12",3,"hidden"],["type","text","placeholder","hier Organisations-ID eingeben...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s8","m6"],[1,"btn","btn-success",3,"click"],[1,"row","mt-1","mb-1"],[1,"bold","mr-1"],[1,"row","m-0",3,"ngSubmit"],["newOrgaUserForm","ngForm"],["for","userName1",3,"ngClass"],["type","text","id","userName1","name","userName1","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["userName1","ngModel"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Rs(0,"p"),$s(1),Es(),Rs(2,"ul",0),Is(3,Zm,7,3,"li",1),Es(),Is(4,Jm,29,11,"div",2),Rs(5,"div",3),Rs(6,"div"),Rs(7,"label",4),Rs(8,"input",5),Ds("ngModelChange",(function(e){return t.showNewPart=e})),Es(),Rs(9,"span"),$s(10),Es(),Es(),Es(),Rs(11,"div",6),Rs(12,"form",7,8),Ds("ngSubmit",(function(){return t.createNewOrganization()})),Rs(14,"div",9),Rs(15,"div",10),Rs(16,"select",11,12),Ds("ngModelChange",(function(e){return t.newOrganization.type=e})),Is(18,Qm,2,2,"option",13),Es(),Es(),Es(),Rs(19,"div",9),Rs(20,"div",14),Rs(21,"label",15),$s(22,"Name der Organisation"),Es(),Rs(23,"input",16,17),Ds("ngModelChange",(function(e){return t.newOrganization.name=e})),Es(),Es(),Rs(25,"div",14),Rs(26,"label",18),$s(27,"Dein Mitarbeitername in der Organisation"),Es(),Rs(28,"input",19,20),Ds("ngModelChange",(function(e){return t.newOrgaUserNewOrga.name=e})),Es(),Es(),Es(),Rs(30,"button",21),$s(31,"Organisation anlegen"),Es(),Es(),Es(),Es()),2&e){var n=Ss(13);xr(1),Qs(" Hallo ",t.usersDisplayName,", in diesen Organisationen bist du Mitglied:"),xr(2),Ps("ngForOf",t.orgas),xr(1),Ps("ngIf",!0===t.allowJoiningOrgaByAccount),xr(4),Ps("ngModel",t.showNewPart),xr(2),Js(t.showNewPart?"<Eine neue Organisation anlegen> ausblenden":"<Eine neue Organisation anlegen> einblenden"),xr(1),Ps("hidden",!t.showNewPart),xr(5),Ps("ngModel",t.newOrganization.type),xr(2),Ps("ngForOf",t.typeOptions),xr(5),Ps("ngModel",t.newOrganization.name),xr(3),Ps("ngClass",da(12,$m,t.newOrgaUserNewOrga.name)),xr(2),Ps("ngModel",t.newOrgaUserNewOrga.name),xr(2),Ps("disabled",!n.valid)}},directives:[$u,Qu,Rg,Hg,sp,op,Gg,Qv,yv,Mg,up,qu,lp,_v,Iv],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:10rem}.list-item-text_left[_ngcontent-%COMP%]{width:30rem}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{margin-bottom:0}"]}),Xm);function ey(e,t){if(1&e&&(Rs(0,"li"),$s(1),Es()),2&e){var n=t.$implicit;xr(1),Qs(" ",n," ")}}var ty,ny,ry,iy,sy,oy,ay=((ty=function(){function e(t){_classCallCheck(this,e),this.settingsService=t,this.requirements=[],this.redirectUri=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Seite gesch\xfctzt..."),this.redirectUri=this.settingsService.getRedirectUri(),this.requirements=this.settingsService.getRequiredByGuardHelptext(!0).split("-")}}]),e}()).\u0275fac=function(e){return new(e||ty)(As(Vf))},ty.\u0275cmp=ht({type:ty,selectors:[["app-iam-guard-fail"]],decls:12,vars:2,consts:[[2,"font-weight","bold"],[1,"bullet"],[4,"ngFor","ngForOf"],["routerLink","/iam/login",2,"font-size","larger"]],template:function(e,t){1&e&&(Rs(0,"h4"),$s(1,"Die Seite, die du aufgerufen hast, ist gesch\xfctzt."),Es(),Rs(2,"p"),$s(3,"Folgende Seite hast du aufgerufen: "),Rs(4,"span",0),$s(5),Es(),Es(),Rs(6,"h6"),$s(7,"Du must folgende Bedingung(en) erf\xfcllen, um die Seite aufzurufen:"),Es(),Rs(8,"ol",1),Is(9,ey,2,1,"li",2),Es(),Rs(10,"a",3),$s(11," Weiter zum Login...\n"),Es()),2&e&&(xr(5),Js(t.redirectUri),xr(4),Ps("ngForOf",t.requirements))},directives:[$u,nf],styles:["ol.bullet[_ngcontent-%COMP%]{list-style-type:circle;margin-bottom:2em}"]}),ty),uy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?_get(_getPrototypeOf(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"schedule",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),n}(h))),cy=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;_classCallCheck(this,e),this.SchedulerAction=t,this.now=n}return _createClass(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),ly=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cy.now;return _classCallCheck(this,n),(r=t.call(this,e,(function(){return n.delegate&&n.delegate!==_assertThisInitialized(r)?n.delegate.now():i()}))).actions=[],r.active=!1,r.scheduled=void 0,r}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(cy)))(uy),dy=((ny=function(){function e(t,n,r){_classCallCheck(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return _createClass(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Gc(this.value);case"E":return e=this.error,new C((function(t){return t.error(e)}));case"C":return Qc()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}()).completeNotification=new ny("C"),ny.undefinedValueNotification=new ny("N",void 0),ny),hy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,n),(i=t.call(this,e)).scheduler=r,i.delay=s,i}return _createClass(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new fy(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(dy.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(dy.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(dy.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(v),fy=function e(t,n){_classCallCheck(this,e),this.notification=t,this.destination=n},gy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,s=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(e=t.call(this)).scheduler=s,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return _createClass(n,[{key:"nextInfiniteTimeWindow",value:function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this._events.push(new vy(this._getNow(),e)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=r.length;if(this.closed)throw new I;if(this.isStopped||this.hasError?t=h.EMPTY:(this.observers.push(e),t=new S(this,e)),i&&e.add(e=new hy(e,i)),n)for(var o=0;o<s&&!e.closed;o++)e.next(r[o]);else for(var a=0;a<s&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||ly).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,s=0;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}]),n}(x),vy=function e(t,n){_classCallCheck(this,e),this.time=t,this.value=n},py=function(){function e(t){var n,r=this;_classCallCheck(this,e),this.lazyLoad=!1,this.providers=new Map,this._ready=new gy,(n=t)&&(n instanceof C||"function"==typeof n.lift&&"function"==typeof n.subscribe)?t.pipe(bl()).subscribe((function(e){r.initialize(e)})):this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.providers.set(n.id,n.provider),this.lazyLoad=this.lazyLoad||n.lazyLoad}this._ready.next(),this._ready.complete()}}]),e}(),my=((iy=ry=function(){function e(t){var n=this;_classCallCheck(this,e),this._user=null,this._authState=new gy(1),this._readyState=new Kc([]),this.initialized=!1,t._ready.subscribe((function(){n.providers=t.providers,t.lazyLoad||n.initialize()}))}return _createClass(e,[{key:"initialize",value:function(){var e=this;this.initialized=!0,this.providers.forEach((function(t,n){t.initialize().then((function(){var r=e._readyState.getValue();r.push(n),e._readyState.next(r),t.getLoginStatus().then((function(t){t.provider=n,e._user=t,e._authState.next(t)})).catch((function(t){e._authState.next(null)}))}))}))}},{key:"signIn",value:function(e,t){var n=this;return this.initialized||this.initialize(),new Promise((function(r,i){var s=n.providers.get(e);s?s.signIn(t).then((function(t){t.provider=e,r(t),n._user=t,n._authState.next(t)})).catch((function(e){i(e)})):i(ry.ERR_LOGIN_PROVIDER_NOT_FOUND)}))}},{key:"signOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.initialized||this.initialize(),new Promise((function(n,r){if(e._user){var i=e.providers.get(e._user.provider);i?i.signOut(t).then((function(){n(),e._user=null,e._authState.next(null)})).catch((function(e){r(e)})):r(ry.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(ry.ERR_NOT_LOGGED_IN)}))}},{key:"authState",get:function(){return this._authState.asObservable()}},{key:"readyState",get:function(){return this._readyState.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||iy)(Je(py))},iy.\u0275prov=he({token:iy,factory:iy.\u0275fac}),iy.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",iy.ERR_NOT_LOGGED_IN="Not logged in",iy),yy=((oy=sy=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}return _createClass(e,null,[{key:"initialize",value:function(e){return{ngModule:sy,providers:[my,{provide:py,useValue:e}]}}}]),e}()).\u0275mod=pt({type:oy}),oy.\u0275inj=fe({factory:function(e){return new(e||oy)(Je(oy,12))},providers:[my],imports:[[oc]]}),oy),_y=function e(){_classCallCheck(this,e)},ky=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scope:"email"};return _classCallCheck(this,n),(r=t.call(this)).clientId=e,r.opt=i,r}return _createClass(n,[{key:"initialize",value:function(){var e=this;return new Promise((function(t,r){e.loadScript(n.PROVIDER_ID,"https://apis.google.com/js/platform.js",(function(){gapi.load("auth2",(function(){e.auth2=gapi.auth2.init(Object.assign(Object.assign({},e.opt),{client_id:e.clientId})),e.auth2.then((function(){e._readyState.next(!0),t()})).catch((function(e){r(e)}))}))}))}))}},{key:"getLoginStatus",value:function(){var e=this;return new Promise((function(t,n){e.onReady().then((function(){if(e.auth2.isSignedIn.get()){var r=new _y,i=e.auth2.currentUser.get().getBasicProfile(),s=e.auth2.currentUser.get().getAuthResponse(!0).access_token,o=e.auth2.currentUser.get().getAuthResponse(!0).id_token;r.id=i.getId(),r.name=i.getName(),r.email=i.getEmail(),r.photoUrl=i.getImageUrl(),r.firstName=i.getGivenName(),r.lastName=i.getFamilyName(),r.authToken=s,r.idToken=o,t(r)}else n("No user is currently logged in.")}))}))}},{key:"signIn",value:function(e){var t=this;return new Promise((function(n,r){t.onReady().then((function(){(e&&e.offline_access||t.opt&&t.opt.offline_access?t.auth2.grantOfflineAccess(e):t.auth2.signIn(e)).then((function(e){var r=new _y,i=t.auth2.currentUser.get().getBasicProfile(),s=t.auth2.currentUser.get().getAuthResponse(!0).access_token,o=t.auth2.currentUser.get().getAuthResponse(!0).id_token;r.id=i.getId(),r.name=i.getName(),r.email=i.getEmail(),r.photoUrl=i.getImageUrl(),r.firstName=i.getGivenName(),r.lastName=i.getFamilyName(),r.authToken=s,r.idToken=o,e&&e.code&&(r.authorizationCode=e.code),n(r)}),(function(e){r("User cancelled login or did not fully authorize.")})).catch((function(e){r(e)}))}))}))}},{key:"signOut",value:function(e){var t=this;return new Promise((function(n,r){t.onReady().then((function(){(e?t.auth2.disconnect():t.auth2.signOut()).then((function(e){e?r(e):n()})).catch((function(e){r(e)}))}))}))}}]),n}(function(){function e(){_classCallCheck(this,e),this._readyState=new Kc(!1)}return _createClass(e,[{key:"onReady",value:function(){var e=this;return new Promise((function(t,n){e._readyState.subscribe((function(e){e&&t()}))}))}},{key:"loadScript",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("undefined"!=typeof document&&!document.getElementById(e)){var i=document.createElement("script");i.async=r,i.src=t,i.onload=n,document.head.appendChild(i)}}}]),e}());return e.PROVIDER_ID="GOOGLE",e}();function by(e,t){if(1&e){var n=Ms();Rs(0,"button",22),Ds("click",(function(){Wt(n);var e=zs().index;return zs().removeCredential(e)})),$s(1," L\xf6schen"),Es()}2&e&&Ps("disabled",zs().$implicit.type>9)}function Cy(e,t){if(1&e&&(Rs(0,"li"),Rs(1,"span",19),$s(2),Es(),Rs(3,"span",20),$s(4),Es(),Is(5,by,2,1,"button",21),Es()),2&e){var n=t.index,r=zs();xr(2),Qs(" ",r.getCredentialTypeAsString(n)," "),xr(2),Qs(" ",r.getCredentialDescription(n)," "),xr(1),Ps("ngIf",1!==r.credentials.length)}}function wy(e,t){if(1&e&&(Rs(0,"option",23),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n.type),xr(1),Qs(" ",n.text,"")}}var Oy,Iy=((Oy=function(){function e(t,n,r,i){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.credentialService=r,this.authService=i,this.usersDisplayName="",this.credentials=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Zugangsmedien-Verwaltung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this.enumOptions=[{text:"Benutzerkonto",type:Df.Benutzerkonto},{text:"Benutzerkonto mit Sms-Tan",type:Df.SmsTan},{text:"SmartCard",type:Df.SmartCard},{text:"SmartLogin",type:Df.SmartLogin}],this._initMembers()}},{key:"_initMembers",value:function(){this.credentials=this.credentialService.getAllCredentialsForUser(this.principal.id),this.newCredential={accountId:this.principal.id,type:Df.Benutzerkonto,kennung:"",secret:""}}},{key:"getCredentialTypeAsString",value:function(e){return Df[this.credentials[e].type]}},{key:"getCredentialDescription",value:function(e){var t=this.credentials[e],n="";return t.type>=Df.StartSpezialTypen&&t.orgaId&&(n=" ("+t.orgaId+")"),t.type===Df.SocialLogin?t.provider+"-ID: "+t.userIdFromProvider:t.kennung+n}},{key:"removeCredential",value:function(e){this.credentialService.removeCredential(this.credentials[e].id),this._initMembers()}},{key:"addNewCredential",value:function(){this.credentialService.addNewCredential(this.newCredential)?this._initMembers():alert("Das Anlegen des Zugangsmediums hat nicht geklappt...")}},{key:"linkWithGoogleLogin",value:function(){var e=this;this.authService.signIn(ky.PROVIDER_ID).then((function(t){t?(console.log("provider: "+t.provider),console.log("id: "+t.id),e.newCredential.type=Df.SocialLogin,e.newCredential.kennung="",e.newCredential.secret="",e.newCredential.provider="google",e.newCredential.userIdFromProvider=t.id,e.addNewCredential()):(alert("Google-Login hat nicht geklappt."),console.log("Google-Login hat nicht geklappt."))})).catch((function(e){return alert("Google-Login hat nicht geklappt: "+e)}))}}]),e}()).\u0275fac=function(e){return new(e||Oy)(As(Vf),As(zf),As(zp),As(my))},Oy.\u0275cmp=ht({type:Oy,selectors:[["app-iam-creds-mgmt"]],decls:31,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["registrationForm","ngForm"],[1,"input-field","col","s4"],["name","credTyp",1,"browser-default",3,"ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["for","kennung"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],["for","secret"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"list-item-text-left"],[1,"list-item-text"],["class","btn-danger",3,"disabled","click",4,"ngIf"],[1,"btn-danger",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Rs(0,"h6"),$s(1),Es(),Rs(2,"ul",0),Is(3,Cy,6,3,"li",1),Es(),Us(4,"hr",2),Rs(5,"div",3),Rs(6,"h6"),$s(7,'Hier kannst du neue Zugangsmedien "bestellen".'),Es(),Rs(8,"form",4,5),Ds("ngSubmit",(function(){return t.addNewCredential()})),Rs(10,"div",3),Rs(11,"div",6),Rs(12,"select",7,8),Ds("ngModelChange",(function(e){return t.newCredential.type=e})),Is(14,wy,2,2,"option",9),Es(),Es(),Es(),Rs(15,"div",3),Rs(16,"div",10),Rs(17,"label",11),$s(18,"Kennung (Mussfeld, darf noch nicht existieren)"),Es(),Rs(19,"input",12,13),Ds("ngModelChange",(function(e){return t.newCredential.kennung=e})),Es(),Es(),Rs(21,"div",10),Rs(22,"label",14),$s(23,"Passwort (Mussfeld)"),Es(),Rs(24,"input",15,16),Ds("ngModelChange",(function(e){return t.newCredential.secret=e})),Es(),Es(),Es(),Rs(26,"div",3),Rs(27,"button",17),$s(28,"Hinzuf\xfcgen"),Es(),Rs(29,"button",18),Ds("click",(function(){return t.linkWithGoogleLogin()})),$s(30,"mit Google-Login verkn\xfcpfen"),Es(),Es(),Es(),Es()),2&e){var n=Ss(9);xr(1),Qs(" Hallo ",t.usersDisplayName,", das sind deine Zugangsmedien:"),xr(2),Ps("ngForOf",t.credentials),xr(9),Ps("ngModel",t.newCredential.type),xr(2),Ps("ngForOf",t.enumOptions),xr(5),Ps("ngModel",t.newCredential.kennung),xr(5),Ps("ngModel",t.newCredential.secret),xr(3),Ps("disabled",!n.valid)}},directives:[$u,op,Gg,Qv,yv,Hg,sp,Mg,up,Tp,Qu,_v,Iv],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:15em}.row[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),Oy),Sy=function(){return["/fakes/mail-view"]};function Ay(e,t){1&e&&(Rs(0,"div"),Rs(1,"p"),$s(2,"Um die Registrierung abzuschlie\xdfen, must du deine Email-Adresse noch verifizieren."),Es(),Us(3,"p"),Rs(4,"a",1),$s(5," Alle notwendigen Informationen dazu finden sich in der Email."),Es(),Es()),2&e&&(xr(4),Ps("routerLink",la(1,Sy)))}function xy(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"ul",2),Rs(2,"li"),$s(3,"mit folgender Kennung: "),Rs(4,"span",3),$s(5),Es(),Es(),Rs(6,"li"),$s(7,"diesem Medien-Typ: "),Rs(8,"span",3),$s(9),Es(),Es(),Rs(10,"li"),$s(11,"dein Authentifizierungslevel ist somit: "),Rs(12,"span",3),$s(13),Es(),Es(),Es(),Us(14,"br"),Rs(15,"p"),$s(16,"Du kannst nun auch entsprechend gesch\xfctzte Seiten aufrufen..."),Es(),Es()),2&e){var n=zs();xr(5),Js(n.credential.kennung),xr(4),Js(n.credentialType),xr(4),Js(n.authLevel)}}function Py(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"a",1),$s(2,"Weiter zum eigentlichen Ziel (redirect)"),Es(),Es()),2&e){var n=zs();xr(1),Ps("routerLink",n.redirectUri)}}var Ty=function(){return["/iam/login"]};function Ry(e,t){1&e&&(Rs(0,"div"),Rs(1,"a",1),$s(2,"Direkt zum Login..."),Es(),Es()),2&e&&(xr(1),Ps("routerLink",la(1,Ty)))}var Ey,Uy=((Ey=function(){function e(t,n){_classCallCheck(this,e),this.principalService=t,this.settingsService=n,this.usersDisplayname="",this.action="angemeldet",this.credentialType="",this.authLevel="",this.redirectUri="",this.alreadyLoggedIn=!1,this.showVerificationNeeded=!1,this.showLinkToLoginPage=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.alreadyLoggedIn=this.principalService.isLoggedIn(),window&&window.history&&window.history.state&&window.history.state.actionDone.toLowerCase().includes("regist")&&(this.action="registriert",this.settingsService.setTitle("Erfolgreich registriert..."),this.showVerificationNeeded=this.settingsService.registeredAccountMustBeVerifiedByMail()),this.redirectUri=this.settingsService.getRedirectUri(),this.alreadyLoggedIn?(this.usersDisplayname=this.principalService.getUsersDisplayName(),this.credential=this.principalService.getCredential(),this.credentialType=Df[this.credential.type],this.authLevel=this.principalService.getAuthLevelAsString(),this.settingsService.setTitle("Erfolgreich angemeldet...")):this.showVerificationNeeded?this.redirectUri="":this.redirectUri||(this.showLinkToLoginPage=!0)}}]),e}()).\u0275fac=function(e){return new(e||Ey)(As(zf),As(Vf))},Ey.\u0275cmp=ht({type:Ey,selectors:[["app-iam-successful-registration"]],decls:11,vars:6,consts:[[4,"ngIf"],[2,"font-size","larger",3,"routerLink"],[1,"browser-default"],[2,"font-weight","bold"]],template:function(e,t){1&e&&(Rs(0,"h4"),$s(1),Es(),Rs(2,"h5"),$s(3,"Herzlich willkommen im unserem \xd6kosystem."),Es(),Us(4,"br"),Rs(5,"h6"),$s(6),Es(),Is(7,Ay,6,2,"div",0),Is(8,xy,17,3,"div",0),Is(9,Py,3,1,"div",0),Is(10,Ry,3,2,"div",0)),2&e&&(xr(1),Qs("Hallo ",t.usersDisplayname,""),xr(5),Qs("Du hast dich erfolgreich ",t.action,"."),xr(1),Ps("ngIf",t.showVerificationNeeded),xr(1),Ps("ngIf",t.alreadyLoggedIn),xr(1),Ps("ngIf",t.redirectUri),xr(1),Ps("ngIf",t.showLinkToLoginPage))},directives:[Qu,nf],styles:[""]}),Ey);function My(e,t){if(1&e&&(Rs(0,"div"),Rs(1,"h5",3),$s(2),Es(),Es()),2&e){var n=zs();xr(2),Qs(" Hallo ",n.displayName,", herzlich willkommen auf unserer Plattform.")}}function Fy(e,t){1&e&&(Rs(0,"div"),Rs(1,"h5",3),$s(2," Herzlich willkommen auf unserer Plattform."),Es(),Es())}function Ny(e,t){if(1&e&&(Rs(0,"span",6),$s(1),Es()),2&e){var n=zs().$implicit;xr(1),Js(n.newBadgeCount)}}function Dy(e,t){if(1&e){var n=Ms();Rs(0,"li"),Rs(1,"a",4),Ds("click",(function(){Wt(n);var e=t.$implicit;return zs().onClick(e.text)})),$s(2),Is(3,Ny,2,1,"span",5),Es(),Es()}if(2&e){var r=t.$implicit;xr(1),Ps("routerLink",r.link),xr(1),Qs(" ",r.text," "),xr(1),Ps("ngIf",r.newBadgeCount>0)}}var Ly,Vy,zy=((Vy=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.settingsService=t,this.principalService=n,this.tokenService=r,this.taskService=i,this.eventService=s,this.isActive=!0,this.loggedIn=!1,this.displayName="",this.availableLinks=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(rg((function(){return e.isActive}))).subscribe((function(){return e.initMembers()})),this.initMembers()}},{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"initMembers",value:function(){this.loggedIn=this.principalService.isLoggedIn(),this.displayName=this.principalService.getUsersDisplayName(),this.availableLinks=[],this.availableLinks.push({text:"Du meldest dich an",link:"/iam/login"}),this.availableLinks.push(this.principalService.isLoggedIn?{text:"Du meldest dich ab",link:""}:{text:"Du registrierst dich",link:"/iam/register"}),this.availableLinks.push({text:"Du willst alles \xfcber dich wissen",link:"/iam/user-info"},{text:"Du verwaltest deinen Account",link:"/iam/account-management"},{text:"Du verwaltest deine Zugangsmedien",link:"/iam/credentials-management"},{text:"Du verwaltest deine Mitgliedschaften",link:"/iam/organization-management"},{text:"Du administrierst deine Organisation (User & Rechte)",link:"/iam/organization-administration"},{text:"Du nutzt die Belegverwaltung",link:"/folderApp/main"},{text:"Du administrierst einzelne Ordner",link:"/folderApp/admin"},{text:"Du administrierst zentral die Berechtigungen deiner User",link:"/iam/central-administration"},{text:"Du verwaltest Unterstrukturen deiner Organisation",link:"/iam/suborga-management"},{text:"Du best\xfcckst Unterstrukturen mit Benutzern und Ressourcen",link:"/iam/suborga-administration"},{text:"Du verwaltest Lizenzen zu den Produkten",link:"/products-main"},{text:"Fibu als Beispielprodukt ohne vorherige Pr\xfcfung via Guard",link:"/generic-product/fibu"},{text:"Bilanz als Beispielprodukt mit Lizenz- und damit Loginpr\xfcfung im Guard",link:"/generic-product/bilanz"},{text:"Gehe zum Marktplatz als allgemeine Einstiegsseite",link:"/marketplace"}),this.taskService.mailsAvailable()&&this.availableLinks.push({text:"Es sind Mails vorhanden",link:"/fakes/mail-view",newBadgeCount:this.taskService.getNumberOfMails()})}},{key:"onClick",value:function(e){return e.includes("meldest dich ab")&&this.logout(),!1}},{key:"logout",value:function(){this.tokenService.logout(),this.initMembers()}}]),e}()).\u0275fac=function(e){return new(e||Vy)(As(Vf),As(zf),As(Pm),As(Am),As(Lf))},Vy.\u0275cmp=ht({type:Vy,selectors:[["app-oes-main"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],["data-test-id","main-greeting"],[3,"routerLink","click"],["class","new badge red","data-badge-caption","",4,"ngIf"],["data-badge-caption","",1,"new","badge","red"]],template:function(e,t){1&e&&(Is(0,My,3,1,"div",0),Is(1,Fy,3,0,"div",0),Rs(2,"h6"),$s(3,"Du hast folgende M\xf6glichkeiten:"),Es(),Rs(4,"ul",1),Is(5,Dy,4,3,"li",2),Es()),2&e&&(Ps("ngIf",t.loggedIn),xr(1),Ps("ngIf",!t.loggedIn),xr(4),Ps("ngForOf",t.availableLinks))},directives:[Qu,$u,nf],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:40em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:red}.verweise[_ngcontent-%COMP%]   .knubbel[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:2.2em;min-width:16px;text-align:rigth;margin-right:.8em;border-radius:4px 0 0 4px}.badge[_ngcontent-%COMP%]{margin-right:.5em}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}"]}),Vy),jy=((Ly=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.loginService=t,this.router=n,this.settingsService=r,this.taskService=i,this.authService=s}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Anmeldung"),this.initMembers()}},{key:"ngOnDestroy",value:function(){this.settingsService.resetRedirectUri()}},{key:"initMembers",value:function(){this.credential={kennung:"",secret:""}}},{key:"clearForm",value:function(){this.initMembers()}},{key:"loginWithGoogle",value:function(){var e=this;this.authService.signIn(ky.PROVIDER_ID).then((function(t){if(t){console.log("provider: "+t.provider),console.log("id: "+t.id);var n=e.loginService.login({type:Df.SocialLogin,kennung:"",secret:"",provider:"google",userIdFromProvider:t.id});return e._onLogin(n)}alert("not logged in..."),console.log("not logged in...")})).catch((function(e){return alert("Sociallogin failed: "+e)}))}},{key:"_getAllowUnverifiedState",value:function(){var e=this.taskService.getTaskInProgress();return!(!e||e.type!==Sm.AccountVerification)}},{key:"_handleAccountVerification",value:function(e){if(e.account.verified||this.taskService.thisFulfillsPendingTask(e))return this.taskService.resetTaskInProgress(),e;this.taskService.resetTaskInProgress()}},{key:"_handleTaskInProgressIfAny",value:function(e){this.taskService.thisFulfillsPendingTask(e)}},{key:"_orgaSelectionNeeded",value:function(e){return e.availableOrgas&&e.availableOrgas.length>1}},{key:"onLogin",value:function(){var e=this._getAllowUnverifiedState(),t=this.loginService.login(this.credential,e);t&&t.authType!==Ff.None?(this.loginService.logout(),e&&!(t=this._handleAccountVerification(t))||(this._handleTaskInProgressIfAny(t),this._orgaSelectionNeeded(t)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(t),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())))):alert("Das Anmelden hat nicht geklappt...")}},{key:"_onLogin",value:function(e){e&&e.authType!==Ff.None?(this.loginService.logout(),this._orgaSelectionNeeded(e)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(e),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri()))):alert("Das Anmelden hat nicht geklappt...")}}]),e}()).\u0275fac=function(e){return new(e||Ly)(As(Pm),As(tf),As(Vf),As(Am),As(my))},Ly.\u0275cmp=ht({type:Ly,selectors:[["app-iam-login"]],decls:21,vars:3,consts:[[1,"mt-3",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["for","kennung"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],[1,"form-group","mb-1"],["for","secret"],["type","password","id","secret","name","secret",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["type","button",1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"mt-2"],["routerLink","/iam/register"]],template:function(e,t){if(1&e&&(Rs(0,"form",0,1),Ds("ngSubmit",(function(){return t.onLogin()})),Rs(2,"div",2),Rs(3,"label",3),$s(4,"Kennung"),Es(),Rs(5,"input",4,5),Ds("ngModelChange",(function(e){return t.credential.kennung=e})),Es(),Es(),Rs(7,"div",6),Rs(8,"label",7),$s(9,"Passwort"),Es(),Rs(10,"input",8,9),Ds("ngModelChange",(function(e){return t.credential.secret=e})),Es(),Es(),Rs(12,"button",10),Ds("click",(function(){return t.clearForm()})),$s(13,"Zur\xfccksetzen"),Es(),Rs(14,"button",11),$s(15,"Anmelden"),Es(),Rs(16,"button",12),Ds("click",(function(){return t.loginWithGoogle()})),$s(17,"Anmelden mit Google"),Es(),Rs(18,"h6",13),Rs(19,"a",14),$s(20," Neu bei uns? Ab zur Registrierung... "),Es(),Es(),Es()),2&e){var n=Ss(1);xr(5),Ps("ngModel",t.credential.kennung),xr(5),Ps("ngModel",t.credential.secret),xr(4),Ps("disabled",!n.valid)}},directives:[op,Gg,Qv,Mg,up,Tp,Hg,sp,nf],styles:["form[_ngcontent-%COMP%]{max-width:600px}"]}),Ly);function By(e,t){if(1&e){var n=Ms();Rs(0,"div",2),Rs(1,"label",17),$s(2,"Passwort"),Es(),Rs(3,"input",18,19),Ds("ngModelChange",(function(e){return Wt(n),zs().credential.secret=e})),Es(),Es()}if(2&e){var r=zs();xr(3),Ps("ngModel",r.credential.secret)}}function Hy(e,t){if(1&e){var n=Ms();Rs(0,"div",2),Rs(1,"label",20),$s(2,"User-ID vom Provider"),Es(),Rs(3,"input",21,22),Ds("ngModelChange",(function(e){return Wt(n),zs().credential.userIdFromProvider=e})),Es(),Es()}if(2&e){var r=zs();xr(3),Ps("ngModel",r.credential.userIdFromProvider)("disabled",!0)}}function Gy(e,t){1&e&&(Rs(0,"button",23),$s(1,"Registrieren"),Es()),2&e&&(zs(),Ps("disabled",!Ss(1).valid))}function Ky(e,t){if(1&e){var n=Ms();Rs(0,"button",24),Ds("click",(function(){return Wt(n),zs().startRegistrationWithGoogle()})),$s(1,"Registrieren mit Google"),Es()}}function Wy(e,t){if(1&e){var n=Ms();Rs(0,"button",24),Ds("click",(function(){return Wt(n),zs().finishRegistrationWithGoogle()})),$s(1,"Registrieren mit Google abschlie\xdfen"),Es()}}var qy,Zy,$y=((Zy=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.registerService=t,this.router=n,this.settingsService=r,this.taskService=i,this.authService=s,this.registrationSuccessful=!0,this.errorFromBackend="",this.registrationViaGoogle=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.initMembers(),this.settingsService.setTitle("Registrierung")}},{key:"initMembers",value:function(){this.account={name:"",email:""},this.credential={kennung:"",secret:"",type:Df.Benutzerkonto},this.registrationSuccessful=!0,this.errorFromBackend="",this.settingsService.registeredAccountMustBeVerifiedByMail()||(this.account.verified=!0),this.registrationViaGoogle=!1}},{key:"clearForm",value:function(){this.initMembers()}},{key:"startRegistrationWithGoogle",value:function(){var e=this;this.authService.signIn(ky.PROVIDER_ID).then((function(t){t?(console.log("provider: "+t.provider),console.log("id: "+t.id),e.registrationViaGoogle=!0,e.account={name:t.name,email:t.email},e.credential={kennung:"",secret:"",provider:"google",userIdFromProvider:t.id,type:Df.SocialLogin}):(alert("Registration via Google-Login nicht erfolgreich!"),console.log("not registered with google"))})).catch((function(e){return alert("SocialRegistration failed: "+e)}))}},{key:"finishRegistrationWithGoogle",value:function(){var e=this.registerService.register(this.account,this.credential);this._finishRegistration(e)}},{key:"register",value:function(){this.credential.kennung=this.account.email;var e=this.registerService.register(this.account,this.credential);this._finishRegistration(e)}},{key:"_finishRegistration",value:function(e){if(e){if(this.registerService.logout(),this.settingsService.registeredAccountMustBeVerifiedByMail())return this.taskService.addMailTask({type:Sm.AccountVerification,email:e.account.email,account:e.account}),void this.router.navigateByUrl("/iam/registration-successful",{state:{actionDone:"Registration"}});if(!this.settingsService.afterRegistrationLoginIsRequired()&&(this.registerService.setToken(e),this.taskService.thisFulfillsPendingTask(e)),this.settingsService.showInfoPageAfterRegistration())return void this.router.navigateByUrl("/iam/registration-successful",{state:{actionDone:"Registration"}});if(this.settingsService.afterRegistrationLoginIsRequired())return void this.router.navigateByUrl("/iam/login");this.router.navigateByUrl(this.settingsService.getRedirectUri())}else alert("Das Registrieren hat nicht geklappt..."),this.errorFromBackend=this.registrationViaGoogle?"Dieser Google-Account wird schon verwendet.":"Die Email-Adresse muss eindeutig sein.",this.registrationSuccessful=!1}}]),e}()).\u0275fac=function(e){return new(e||Zy)(As(Pm),As(tf),As(Vf),As(Am),As(my))},Zy.\u0275cmp=ht({type:Zy,selectors:[["app-iam-register"]],decls:26,vars:9,consts:[[1,"mt-3",3,"ngSubmit"],["registrationForm","ngForm"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","form-group",4,"ngIf"],[1,"alert","alert-danger",3,"hidden"],[1,"mb-1"],["id","id-btn-clear-form","type","button",1,"btn","btn-default",3,"click"],["id","id-btn-register","type","submit","class","btn btn-success mr-3",3,"disabled",4,"ngIf"],["type","button","class","btn btn-google",3,"click",4,"ngIf"],[1,"mt-2"],["routerLink","/iam/login"],["for","secret"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","providersUserId"],["id","providersUserId","name","providersUserId","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["providersUserId","ngModel"],["id","id-btn-register","type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"]],template:function(e,t){1&e&&(Rs(0,"form",0,1),Ds("ngSubmit",(function(){return t.register()})),Rs(2,"div",2),Rs(3,"label",3),$s(4,"Wie m\xf6chtest du angesprochen werden? (mind. 3 Zeichen)"),Es(),Rs(5,"input",4,5),Ds("ngModelChange",(function(e){return t.account.name=e})),Es(),Es(),Rs(7,"div",2),Rs(8,"label",6),$s(9,"Email (Anmeldename)"),Es(),Rs(10,"input",7,8),Ds("ngModelChange",(function(e){return t.account.email=e})),Es(),Es(),Is(12,By,5,1,"div",9),Is(13,Hy,5,2,"div",9),Rs(14,"div",10),Rs(15,"p"),$s(16),Es(),Es(),Us(17,"div",11),Rs(18,"button",12),Ds("click",(function(){return t.clearForm()})),$s(19,"Zur\xfccksetzen"),Es(),Is(20,Gy,2,1,"button",13),Is(21,Ky,2,0,"button",14),Is(22,Wy,2,0,"button",14),Rs(23,"h6",15),Rs(24,"a",16),$s(25," Du bist bereits registriert? Ab zum Login... "),Es(),Es(),Es()),2&e&&(xr(5),Ps("ngModel",t.account.name),xr(5),Ps("ngModel",t.account.email),xr(2),Ps("ngIf",!t.registrationViaGoogle),xr(1),Ps("ngIf",t.registrationViaGoogle),xr(1),Ps("hidden",t.registrationSuccessful),xr(2),Qs("Fehlermeldung vom Server: ",t.errorFromBackend,""),xr(4),Ps("ngIf",!t.registrationViaGoogle),xr(1),Ps("ngIf",!t.registrationViaGoogle),xr(1),Ps("ngIf",t.registrationViaGoogle))},directives:[op,Gg,Qv,Mg,up,lp,Tp,Hg,sp,Qu,nf],styles:["form[_ngcontent-%COMP%]{max-width:700px}"]}),Zy),Jy=((qy=function(){function e(t){_classCallCheck(this,e),this.settingsService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Information - Page not found")}}]),e}()).\u0275fac=function(e){return new(e||qy)(As(Vf))},qy.\u0275cmp=ht({type:qy,selectors:[["app-page-not-found"]],decls:4,vars:0,template:function(e,t){1&e&&(Rs(0,"h2"),$s(1,"Hoppla, da hast du dich wohl verirrt."),Es(),Rs(2,"h3"),$s(3,"Die Seite, die du aufgerufen hast, gibt es nicht."),Es())},styles:[""]}),qy);function Qy(e,t){if(1&e){var n=Ms();Rs(0,"li"),Rs(1,"div",3),Rs(2,"button",4),Ds("click",(function(){Wt(n);var e=t.index;return zs().selectOrga(e)})),$s(3),Es(),Es(),Es()}if(2&e){var r=t.$implicit;xr(3),Xs("Anmelden mit: ",r.id,"-",r.name,"")}}var Xy,Yy,e_=((Yy=function(){function e(t,n,r){_classCallCheck(this,e),this.loginService=t,this.router=n,this.settingsService=r,this.accountName="",this.orgas=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Organisationsauswahl"),this.initMembers()}},{key:"initMembers",value:function(){var e=this;this.token=this.loginService.getTempToken(),this.token.account&&(this.accountName=this.token.account.name||""),this.token.availableOrgas.forEach((function(t){return e.orgas.push(t)}))}},{key:"selectOrga",value:function(e){this.loginService.loginWithOrganization(this.orgas[e].id),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}},{key:"cancelLogin",value:function(){this.loginService.logout(),this.settingsService.resetRedirectUri(),this.router.navigateByUrl("")}},{key:"loginWithAccountOnly",value:function(){this.loginService.loginWithAccountOnly(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}}]),e}()).\u0275fac=function(e){return new(e||Yy)(As(Pm),As(tf),As(Vf))},Yy.\u0275cmp=ht({type:Yy,selectors:[["app-iam-select-orga"]],decls:11,vars:2,consts:[[4,"ngFor","ngForOf"],["type","button",1,"btn","btn2","additionalButton",3,"click"],["type","button",1,"btn","cancelButton",3,"click"],[2,"display","flex"],["type","button",1,"btn","btn2",3,"click"]],template:function(e,t){1&e&&(Rs(0,"h5"),$s(1),Es(),Rs(2,"h6"),$s(3,"W\xe4hle bitte die gew\xfcnschte Organisation aus:"),Es(),Rs(4,"ul"),Is(5,Qy,4,2,"li",0),Es(),Rs(6,"button",1),Ds("click",(function(){return t.loginWithAccountOnly()})),$s(7,"Ohne Organisation anmelden"),Es(),Us(8,"br"),Rs(9,"button",2),Ds("click",(function(){return t.cancelLogin()})),$s(10,"Anmelden abbrechen"),Es()),2&e&&(xr(1),Qs("Hallo ",t.accountName,", du bist in mehreren Organisationen Mitglied."),xr(4),Ps("ngForOf",t.orgas))},directives:[$u],styles:[".btn2[_ngcontent-%COMP%]{margin-top:.5em;width:40em;text-align:left}.additionalButton[_ngcontent-%COMP%]{margin-top:-.5em}.cancelButton[_ngcontent-%COMP%]{margin-top:3em;background-color:#f08080}"]}),Yy),t_=((Xy=function(){function e(t,n,r,i){_classCallCheck(this,e),this.router=t,this.principalService=n,this.licenceService=r,this.settingsService=i}return _createClass(e,[{key:"_addText",value:function(e,t){return e.length>0?e+="- "+t:e=t,e}},{key:"canActivate",value:function(e,t){var n,r=!0,i="";this.settingsService.setRedirectUri(t.url),this.principalService.isLoggedIn()||(r=!1,i=this._addText(i,"Du must angemeldet sein "));var s=e.data.requiredAuthLevel;s&&this.principalService.getAuthLevel()<s&&(r=!1,i=this._addText(i,"mindestens mit Level: "+Nf[s]));var o=e.data.requiredAuthType;if(o&&this.principalService.getAuthType()<o&&(r=!1,i=this._addText(i,"mindestens mit Typ: "+Ff[o])),null!==(n=e.data.checkLicenceInGuard)&&void 0!==n&&n){var a=this.principalService.getOrgaUser(),u=e.data.dataProductId;(null==a?void 0:a.id)>0&&u?this.licenceService.checkLicence(u,a.id)||(r=!1,i=this._addText(i,"Benutzer <"+a.name+"> hat keine Lizenz f\xfcr Produkt mit Id: "+u)):(r=!1,i=this._addText(i,"f\xfcr eine Lizenzpr\xfcfung muss man in einer Organisation angemeldet sein."))}return r?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(i),this.settingsService.showInfoPageAfterGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}]),e}()).\u0275fac=function(e){return new(e||Xy)(Je(tf),Je(zf),Je(Wf),Je(Vf))},Xy.\u0275prov=he({token:Xy,factory:Xy.\u0275fac,providedIn:"root"}),Xy);function n_(e,t){if(1&e){var n=Ms();Rs(0,"button",41),Ds("click",(function(){Wt(n);var e=zs().index;return zs().removeUserFromOrga(e)})),$s(1," Dich aus Organisation entfernen"),Es()}}function r_(e,t){if(1&e){var n=Ms();Rs(0,"button",42),Ds("click",(function(){Wt(n);var e=zs().index;return zs().removeUserFromOrga(e)})),$s(1," Benutzer aus Organisation entfernen"),Es()}if(2&e){var r=zs().$implicit;Ps("disabled",!zs().deletionOfUserAllowed(r))}}var i_=function(e){return{"foreign-user":e}};function s_(e,t){if(1&e){var n=Ms();Rs(0,"li",33),Rs(1,"div"),Rs(2,"span",34),$s(3),Es(),Es(),Rs(4,"div",35),Rs(5,"span",36),Ds("click",(function(){Wt(n);var e=t.index;return zs().enterEditMode(e)})),$s(6),Es(),Rs(7,"span",37),$s(8,"Klicken zum \xc4ndern..."),Es(),Es(),Rs(9,"div",38),Is(10,n_,2,0,"button",39),Is(11,r_,2,1,"button",40),Es(),Es()}if(2&e){var r=t.$implicit,i=t.index,s=zs();Ps("ngClass",da(5,i_,s.isForeign(r))),xr(3),Qs(" ",s.getUserIdAndAdminTypeAsString(i)," "),xr(3),Qs(" ",r.name," "),xr(4),Ps("ngIf",r.id===s.principal.id),xr(1),Ps("ngIf",r.id!==s.principal.id)}}function o_(e,t){if(1&e&&(Rs(0,"option",54),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n.type),xr(1),Qs(" ",n.text,"")}}function a_(e,t){if(1&e){var n=Ms();Rs(0,"div",43),Rs(1,"div",25),Rs(2,"div",9),Rs(3,"div",44),Rs(4,"select",45,46),Ds("ngModelChange",(function(e){return Wt(n),zs().user2edit.adminType=e})),Is(6,o_,2,2,"option",47),Es(),Es(),Rs(7,"div",48),Rs(8,"label",49),$s(9,"Anwendernamen \xe4ndern (mind. 3 Zeichen)"),Es(),Rs(10,"input",50,51),Ds("ngModelChange",(function(e){return Wt(n),zs().user2edit.name=e}))("keydown.enter",(function(){return Wt(n),zs().persistEditUserChanges()})),Es(),Es(),Es(),Es(),Rs(12,"button",52),Ds("click",(function(){return Wt(n),zs().cancelEditMode()})),$s(13," Abbrechen "),Es(),Rs(14,"button",53),Ds("click",(function(){return Wt(n),zs().persistEditUserChanges()})),$s(15," \xdcbernehmen "),Es(),Us(16,"hr"),Es()}if(2&e){var r=Ss(11),i=zs();xr(4),Ps("disabled",!i.changeOfAdminRoleAllowed(i.user2edit))("ngModel",i.user2edit.adminType),xr(2),Ps("ngForOf",i.enumOptions),xr(4),Ps("ngModel",i.user2edit.name),xr(4),Ps("disabled",!r.valid)}}function u_(e,t){1&e&&(Rs(0,"span"),$s(1,"(Ben\xf6tigt SuperAdmin-Rolle)"),Es())}var c_=function(e){return{active:e}};function l_(e,t){if(1&e&&(Rs(0,"option",16),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n),xr(1),Qs(" ",n.name,"")}}function d_(e,t){if(1&e&&(Rs(0,"option",16),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n),xr(1),Qs(" ",n.displayName,"")}}function h_(e,t){if(1&e&&(Rs(0,"option",16),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n),xr(1),Qs(" ",n.name,"")}}function f_(e,t){1&e&&(Rs(0,"div"),Rs(1,"span"),$s(2,"Vom gew\xe4hltem Ressourcen-Typ hast du keine Ressourcen."),Es(),Us(3,"br"),Rs(4,"span"),$s(5,"Weil du entweder diese App nicht lizenziert hast, oder noch keine Ressourcen diesen Typs angelegt hast."),Es(),Es())}function g_(e,t){if(1&e){var n=Ms();Rs(0,"label",23),Rs(1,"input",24),Ds("ngModelChange",(function(e){return Wt(n),t.$implicit.allowed=e}))("ngModelChange",(function(){Wt(n);var e=zs().index;return zs(2).onChangedPermission(e)})),Es(),Rs(2,"span"),$s(3),Es(),Es()}if(2&e){var r=t.$implicit;xr(1),Ps("ngModel",r.allowed)("disabled",r.disabled),xr(2),Js(r.name)}}var v_=function(e){return{"foreign-resource":e}};function p_(e,t){if(1&e&&(Rs(0,"li",19),Rs(1,"span",20),$s(2),Es(),Rs(3,"span",21),$s(4),Es(),Is(5,g_,4,3,"label",22),Es()),2&e){var n=t.$implicit,r=zs(2);Ps("ngClass",da(4,v_,r.isForeignResource(n))),xr(2),Qs(" ",n.id," "),xr(2),Qs(" ",r.getResourceDisplayName(n)," "),xr(1),Ps("ngForOf",n.permissions)}}function m_(e,t){if(1&e&&(Rs(0,"ul",17),Is(1,p_,6,6,"li",18),Es()),2&e){var n=zs();xr(1),Ps("ngForOf",n.resourcesAndAccessRights)}}var y_=function(e){return{"foreign-user":e}};function __(e,t){1&e&&(Rs(0,"div",2),Rs(1,"p"),$s(2,"Du hast noch keine Unterstrukturen erstellt..."),Es(),Es())}function k_(e,t){if(1&e&&(Rs(0,"option",14),$s(1),Es()),2&e){var n=t.$implicit;Ps("ngValue",n),xr(1),Qs(" ",n.name,"")}}function b_(e,t){if(1&e){var n=Ms();Rs(0,"li",17),Rs(1,"span",18),$s(2),Es(),Rs(3,"label",17),Rs(4,"input",19),Ds("ngModelChange",(function(e){return Wt(n),t.$implicit.isInSubOrgaNew=e}))("ngModelChange",(function(){Wt(n);var e=t.index;return zs(3).onChangedUserInSubOrga(e)})),Es(),Rs(5,"span",20),$s(6,"in Unterstruktur"),Es(),Es(),Rs(7,"label",17),Rs(8,"input",21),Ds("ngModelChange",(function(e){return Wt(n),t.$implicit.subAdminNew=e}))("ngModelChange",(function(){Wt(n);var e=t.index;return zs(3).onChangedUserSubAdmin(e)})),Es(),Rs(9,"span",22),$s(10,"Sub-Admin"),Es(),Es(),Es()}if(2&e){var r=t.$implicit,i=t.index,s=zs(3);xr(2),Qs(" ",r.name," "),xr(2),Ps("ngModel",r.isInSubOrgaNew),xr(4),Ps("disabled",s.disableSubAdminCheckbox(i))("ngModel",r.subAdminNew)}}function C_(e,t){if(1&e&&(Rs(0,"ul",15),Is(1,b_,11,4,"li",16),Es()),2&e){var n=zs(2);xr(1),Ps("ngForOf",n.mixedUsers)}}function w_(e,t){if(1&e){var n=Ms();Rs(0,"li",17),Rs(1,"span",18),$s(2),Es(),Rs(3,"label",17),Rs(4,"input",19),Ds("ngModelChange",(function(e){return Wt(n),t.$implicit.isInSubOrgaNew=e}))("ngModelChange",(function(){Wt(n);var e=t.index;return zs(3).onChangedResourceInSubOrga(e)})),Es(),Rs(5,"span",20),$s(6,"in Unterstruktur"),Es(),Es(),Es()}if(2&e){var r=t.$implicit;xr(2),Qs(" ",r.name," "),xr(2),Ps("ngModel",r.isInSubOrgaNew)}}function O_(e,t){if(1&e&&(Rs(0,"ul",15),Is(1,w_,7,2,"li",16),Es()),2&e){var n=zs(2);xr(1),Ps("ngForOf",n.mixedResources)}}function I_(e,t){if(1&e){var n=Ms();Rs(0,"div"),Rs(1,"div",2),Rs(2,"div",3),Rs(3,"div",4),Rs(4,"div",5),$s(5," Unterstruktur ausw\xe4hlen: "),Es(),Rs(6,"div",6),Rs(7,"select",7,8),Ds("ngModelChange",(function(e){return Wt(n),zs().selectedSubOrga=e}))("ngModelChange",(function(){return Wt(n),zs().onChangedSubOrga()})),Is(9,k_,2,2,"option",9),Es(),Es(),Es(),Es(),Es(),Rs(10,"span",10),$s(11,"Diese Benutzer kannst du zuteilen:"),Es(),Is(12,C_,2,1,"ul",11),Rs(13,"span",10),$s(14,"Diese Resourcen kannst du zuteilen:"),Es(),Is(15,O_,2,1,"ul",11),Rs(16,"button",12),Ds("click",(function(){return Wt(n),zs().discardChanges()})),$s(17,"\xc4nderungen verwerfen"),Es(),Rs(18,"button",13),Ds("click",(function(){return Wt(n),zs().saveChanges()})),$s(19,"\xc4nderungen \xfcbernehmen"),Es(),Es()}if(2&e){var r=zs();xr(7),Ps("ngModel",r.selectedSubOrga),xr(2),Ps("ngForOf",r.subOrgas),xr(3),Ps("ngIf",r.mixedUsers.length>0),xr(3),Ps("ngIf",r.mixedResources.length>0),xr(1),Ps("disabled",!r.dirty),xr(2),Ps("disabled",!r.dirty)}}var S_,A_,x_,P_,T_=[{path:"",component:zy},{path:"iam/login",component:jy},{path:"iam/select-organization",component:e_},{path:"iam/register",component:$y},{path:"iam/registration-successful",component:Uy},{path:"iam/guard-fail",component:ay},{path:"iam/account-management",component:qm,canActivate:[t_]},{path:"iam/user-info",component:Wp,canActivate:[t_]},{path:"iam/credentials-management",component:Iy,canActivate:[t_]},{path:"iam/organization-management",component:Ym,canActivate:[t_],data:{requiredAuthLevel:Nf.Low}},{path:"iam/organization-administration",component:(x_=function(){function e(t,n,r,i,s,o,a,u,c,l){_classCallCheck(this,e),this.settingsService=t,this.tokenService=n,this.principalService=r,this.eventService=i,this.accountService=s,this.orgaService=o,this.mailService=a,this.notificationService=u,this.organizationService=c,this.router=l,this.users=[],this.usersDisplayName="",this.principalIsSuperAdmin=!1,this.mShowInviteUser=!1,this.mShowInviteForeign=!0,this.nothingFound=!0,this.searchResult2Display="",this.newForeignProxyUser={}}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Organisations-Administration"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,this.organization=this.orgaService.findOrgaById(this.principal.orgaId),this.enumOptions=[{text:"Kein Administrator",type:Mf.MemberOnly},{text:"Administrator",type:Mf.Admin},{text:"Haupt-Administrator",type:Mf.SuperAdmin}],this.initMembers()}},{key:"initMembers",value:function(){this.principalIsSuperAdmin=this.principalService.isSuperAdminOfCurrentOrga(),this.users=this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.user2edit={name:""},this.user2editId=0,this.newUser={name:"",email:""},this.searchResult2Display="",this.searchForeignInput="",this.nothingFound=!0,this.newForeignProxyUser={}}},{key:"changeOfAdminRoleAllowed",value:function(e){return!!this.principalIsSuperAdmin&&!this.isForeign(e)}},{key:"deletionOfUserAllowed",value:function(e){return!!this.principalIsSuperAdmin||!e.adminType||e.adminType===Mf.MemberOnly}},{key:"enterEditMode",value:function(e){this.user2edit=Object.assign({},this.users[e]),this.user2editId=this.user2edit.id,this.user2edit.adminType||(this.user2edit.adminType=Mf.MemberOnly),this.mShowInviteUser=!1,this.mShowInviteForeign=!1}},{key:"cancelEditMode",value:function(){this.user2edit={name:""},this.user2editId=0}},{key:"persistEditUserChanges",value:function(){var e=this;if(!(this.user2edit.name.length<=0)){var t=!1,n=!1,r=this.users.find((function(t){return t.id===e.user2editId})),i=this.principalService.getOrgaUser().id===this.user2editId;if(r.adminType!==this.user2edit.adminType&&i){var s="";switch(this.user2edit.adminType){case Mf.Admin:s="Du degradierst dich vom SuperAdmin zum Admin. Willst du das wirklich?";break;case Mf.MemberOnly:s="Du nimmst dir gerade alle Admin-Rechte. Willst du das wirklich?",n=!0}if(!confirm(s))return}i&&(t=!0),this.orgaService.updateOrgaUser(this.user2edit),t&&this.eventService.publishTokenChangedEvent({type:xm.OrgaUserDetails,orgaUser:this.user2edit}),n?this.router.navigateByUrl("/"):this.initMembers()}}},{key:"getUserIdAndAdminTypeAsString",value:function(e){var t="",n=this.users[e];return n.adminType&&n.adminType>=Mf.Admin&&(t=": "+Mf[n.adminType]),n.id+t}},{key:"removeUserFromOrga",value:function(e){var t=this.users[e],n=!1;if(this.principal.id===t.id){if(!confirm("Du l\xf6schst dich gerade selbst? \nIst das OK?"))return;n=!0}this.orgaService.removeOrgaUser(t.id),n?(this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/")):this.initMembers()}},{key:"deleteOrganisation",value:function(){confirm("Willst du wirklich die gesamte Organsation \n- mit allen Anwendern, Ressourcen und Rechten l\xf6schen?")&&(this.orgaService.deleteOrganization(this.organization.id),this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/"))}},{key:"inviteUser",value:function(){var e=this.accountService.findAccountByMail(this.newUser.email);if(e&&this.orgaService.accountIsAlreadyMemberInOrga(this.organization.id,e.id))alert("Der einzuladende Benutzer ist bereits Mitglied in deiner Organsation!");else{var t={name:this.newUser.name,orgaId:this.organization.id};t=this.orgaService.joinOrganization(this.organization.id,t);var n,r=Sm.InvitationOrgaUser;e&&(this.notificationService.addNotification({type:um.InvitationOrgaUser,accountAsRecipient:e,orgaUser:t}),r=Sm.InfoOfInvitationOrgaUser,n=e),this.mailService.addMailTask({type:r,email:this.newUser.email,account:n,orgaUser:t}),this.initMembers()}}},{key:"isForeign",value:function(e){return!(!e.foreignOrgaId&&!e.foreignUserId)}},{key:"inviteForeign",value:function(){if(this.newForeignProxyUser.foreignOrganization||this.newForeignProxyUser.foreignUser){var e={name:this.newForeignProxyUser.newName,orgaId:this.organization.id};this.newForeignProxyUser.foreignOrganization?e.foreignOrgaId=this.newForeignProxyUser.foreignOrganization.id:e.foreignUserId=this.newForeignProxyUser.foreignUser.id,e=this.orgaService.joinOrganization(this.organization.id,e)}this.initMembers()}},{key:"getOrganizationTypeAsString",value:function(e){return kg[e]}},{key:"_arrangeDisplaynameForFoundOrga",value:function(e){e&&e.id&&(this.principal.orgaId===e.id?this.searchResult2Display="Das ist deine eigene Organisation!":this.organizationService.foreignOrgaIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: "+this.getOrganizationTypeAsString(e.type)+")",this.newForeignProxyUser.foreignOrganization=e,this.newForeignProxyUser.newName="Orga - <"+e.name+">"))}},{key:"_arrangeDisplaynameForFoundOrgaUser",value:function(e){e&&(this.principal.orgaId===e.orgaId?this.searchResult2Display="Der Benutzer ist direktes Mitglied deiner Organisation!":this.organizationService.foreignUserIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: Anwender)",this.newForeignProxyUser.foreignUser=e,this.newForeignProxyUser.newName="User - <"+e.name+">"))}},{key:"search4ForeignUserOrOrga",value:function(){this.newForeignProxyUser={},this.nothingFound=!0;var e=parseInt(this.searchForeignInput,10),t=this.organizationService.findOrgaById(e);if(t)this._arrangeDisplaynameForFoundOrga(t);else{var n=this.organizationService.findOrgaUserByOrgaUserId(e);n?this._arrangeDisplaynameForFoundOrgaUser(n):this.searchResult2Display="Weder Organisation noch User mit dieser ID gefunden."}}},{key:"showInviteUser",get:function(){return this.mShowInviteUser},set:function(e){this.mShowInviteUser=e,this.mShowInviteUser&&(this.mShowInviteForeign=!1,this.cancelEditMode())}},{key:"showInviteForeign",get:function(){return this.mShowInviteForeign},set:function(e){this.mShowInviteForeign=e,this.mShowInviteForeign&&(this.mShowInviteUser=!1,this.cancelEditMode())}}]),e}(),x_.\u0275fac=function(e){return new(e||x_)(As(Vf),As(Pm),As(zf),As(Lf),As(Hm),As(wg),As(Am),As(cm),As(wg),As(tf))},x_.\u0275cmp=ht({type:x_,selectors:[["app-iam-orga-admin"]],decls:65,vars:22,consts:[[1,"container"],[1,"verweise"],[3,"ngClass",4,"ngFor","ngForOf"],["class","row editButtons",4,"ngIf"],["for","toggle-invite"],["type","checkbox","id","toggle-invite",3,"ngModel","ngModelChange"],[1,"toggled-container",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["inviteUserForm","ngForm"],[1,"row"],[1,"input-field","col","s6"],["for","name"],["type","text","id","name","name","name","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"],["for","toggle-invite-orga"],["type","checkbox","id","toggle-invite-orga",3,"ngModel","ngModelChange"],[1,"toggled-container","col","s12",3,"hidden"],[1,"row","valign-wrapper"],["type","text","placeholder","via Orga-ID oder User-ID suchen...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s6"],[1,"btn","btn-success",3,"click"],[1,"col","s12"],[2,"font-weight","bold","margin-right","0.5em"],["inviteForeignForm","ngForm"],["for","nameProxyForeign",3,"ngClass"],["type","text","id","nameProxyForeign","name","nameProxyForeign","required","","minlength","3",1,"form-control",3,"disabled","ngModel","ngModelChange"],["nameProxyForeign","ngModel"],[4,"ngIf"],["type","button",1,"btn","btn-default","btn-delete",3,"disabled","click"],[3,"ngClass"],[1,"list-item-text-left"],[1,"tooltip"],[1,"list-item-text","tooltip",3,"click"],[1,"tooltiptext"],[1,"buttons-right-div"],["class","btnInListe btn-delete",3,"click",4,"ngIf"],["class","btnInListe",3,"disabled","click",4,"ngIf"],[1,"btnInListe","btn-delete",3,"click"],[1,"btnInListe",3,"disabled","click"],[1,"row","editButtons"],[1,"input-field","col","s5"],["name","credTyp",1,"browser-default",3,"disabled","ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s7"],["for","editName"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Rs(0,"div",0),Rs(1,"p"),$s(2),Es(),Rs(3,"ul",1),Is(4,s_,12,7,"li",2),Es(),Us(5,"hr"),Is(6,a_,17,5,"div",3),Rs(7,"div"),Rs(8,"label",4),Rs(9,"input",5),Ds("ngModelChange",(function(e){return t.showInviteUser=e})),Es(),Rs(10,"span"),$s(11),Es(),Es(),Es(),Rs(12,"div",6),Rs(13,"form",7,8),Ds("ngSubmit",(function(){return t.inviteUser()})),Rs(15,"div",9),Rs(16,"div",10),Rs(17,"label",11),$s(18,"Name des Mitarbeiters"),Es(),Rs(19,"input",12,13),Ds("ngModelChange",(function(e){return t.newUser.name=e})),Es(),Es(),Rs(21,"div",10),Rs(22,"label",14),$s(23,"Adresse f\xfcr Einladungs-Mail"),Es(),Rs(24,"input",15,16),Ds("ngModelChange",(function(e){return t.newUser.email=e})),Es(),Es(),Es(),Rs(26,"button",17),$s(27,"Benutzer einladen"),Es(),Es(),Es(),Us(28,"hr"),Rs(29,"div"),Rs(30,"label",18),Rs(31,"input",19),Ds("ngModelChange",(function(e){return t.showInviteForeign=e})),Es(),Rs(32,"span"),$s(33),Es(),Es(),Es(),Rs(34,"div",20),Rs(35,"div",21),Rs(36,"div",10),Rs(37,"input",22),Ds("ngModelChange",(function(e){return t.searchForeignInput=e}))("keydown.enter",(function(){return t.search4ForeignUserOrOrga()})),Es(),Es(),Rs(38,"div",23),Rs(39,"button",24),Ds("click",(function(){return t.search4ForeignUserOrOrga()})),$s(40," Suchen "),Es(),Es(),Es(),Rs(41,"div",9),Rs(42,"div",25),Rs(43,"span",26),$s(44,"Suchergebnis: "),Es(),Rs(45,"span"),$s(46),Es(),Es(),Es(),Rs(47,"form",7,27),Ds("ngSubmit",(function(){return t.inviteForeign()})),Rs(49,"div",21),Rs(50,"div",10),Rs(51,"label",28),$s(52,"Bezeichnung des Stellvertreters"),Es(),Rs(53,"input",29,30),Ds("ngModelChange",(function(e){return t.newForeignProxyUser.newName=e})),Es(),Es(),Rs(55,"div",23),Rs(56,"button",17),$s(57,"einladen"),Es(),Es(),Es(),Es(),Es(),Rs(58,"div",25),Us(59,"hr"),Rs(60,"p"),$s(61,"Hier kannst du die komplette Organisation l\xf6schen. "),Is(62,u_,2,0,"span",31),Es(),Rs(63,"button",32),Ds("click",(function(){return t.deleteOrganisation()})),$s(64,"Organisation l\xf6schen"),Es(),Es(),Es()),2&e){var n=Ss(14),r=Ss(48);xr(2),Qs("Hier verwaltest du die Mitglieder von <",t.organization.name,">."),xr(2),Ps("ngForOf",t.users),xr(2),Ps("ngIf",t.user2edit.id),xr(3),Ps("ngModel",t.showInviteUser),xr(2),Js(t.showInviteUser?"<Benutzer einladen> ausblenden":"<Benutzer einladen> einblenden"),xr(1),Ps("hidden",!t.showInviteUser),xr(7),Ps("ngModel",t.newUser.name),xr(5),Ps("ngModel",t.newUser.email),xr(2),Ps("disabled",!n.valid),xr(5),Ps("ngModel",t.showInviteForeign),xr(2),Js(t.showInviteUser?"<mit Organisation zusammenarbeiten> ausblenden":"<mit Organisation zusammenarbeiten> einblenden"),xr(1),Ps("hidden",!t.showInviteForeign),xr(3),Ps("ngModel",t.searchForeignInput),xr(9),Js(t.searchResult2Display),xr(5),Ps("ngClass",da(20,c_,t.newForeignProxyUser.newName)),xr(2),Ps("disabled",t.nothingFound)("ngModel",t.newForeignProxyUser.newName),xr(3),Ps("disabled",t.nothingFound||!r.valid),xr(6),Ps("ngIf",!t.principalIsSuperAdmin),xr(1),Ps("disabled",!t.principalIsSuperAdmin)}},directives:[$u,Qu,Rg,Hg,sp,op,Gg,Qv,Mg,up,lp,qu,yv,Tp,_v,Iv],styles:['.verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:60em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:60em;position:relative;background-color:#eee;margin-bottom:.3em;padding:.3em 0;height:2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   .foreign-user[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:10em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:30em;text-align:left}.buttons-right-div[_ngcontent-%COMP%]{float:right;margin-right:.7em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff}.editButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4db6ac}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#d3d3d3}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}.btn-delete[_ngcontent-%COMP%]:disabled{background-color:#d3d3d3!important}hr[_ngcontent-%COMP%]{height:2px;background:#000;margin-top:1em;margin-bottom:1em;width:60em}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-right:3px solid #26a69a}.ng-invalid[_ngcontent-%COMP%]:not(form){border-right:3px solid #d0181e}.container[_ngcontent-%COMP%]{display:flex 2 1;margin-top:.5em;float:left}.form-group[_ngcontent-%COMP%]{width:20em;height:5em}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;border-bottom:.5px dotted #000}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:120px;background-color:#90ee90;color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;transition:opacity .3s}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border:5px solid transparent;border-top-color:#555}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}.row[_ngcontent-%COMP%]{margin-bottom:0!important}']}),x_),canActivate:[Bm]},{path:"iam/central-administration",component:(A_=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.changeDetector=t,this.settingsService=n,this.principalService=r,this.orgaService=i,this.accessService=s,this.usersDisplayName="",this.subOrgas2Admin=[],this.users2Admin=[],this.resourceTypes2Admin=[],this.resourcesAndAccessRights=[],this.dirty=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("zentrale Rechte-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.subOrgas2Admin=this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId),this.selectedSubOrga2Admin=this.subOrgas2Admin[0],this.resourceTypes2Admin=this.accessService.getAllResourceTypes(),this.selectedResourceType2Admin=this.resourceTypes2Admin[0],this._initMembers(!0)}},{key:"_initMembers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dirty=!1,this.selectedSubOrgaId=void 0,this.selectedSubOrga2Admin&&(this.selectedSubOrgaId=this.selectedSubOrga2Admin.id),this.selectedResourceTypesId=this.selectedResourceType2Admin.typeId,t&&this.selectedSubOrga2Admin&&(this.users2Admin=this.orgaService.getAllOrgaUsers4SubOrga(this.principal.orgaId,this.selectedSubOrga2Admin.id),this.users2Admin.length>0&&(this.selectedUser2Admin=this.users2Admin[0])),this.selectedUser2Admin&&(this.selectedUsersId=this.selectedUser2Admin.id),this.resourcesAndAccessRights=[],void 0!==this.selectedSubOrgaId&&this.accessService.getAllResourcesOfSubOrgaByResourceType(this.selectedResourceType2Admin.typeId,this.principal.orgaId,this.selectedSubOrgaId).forEach((function(t){var n=[];e.selectedResourceType2Admin.possiblePermissions.forEach((function(r){var i={name:r};i.disabled=!e.accessService.permissionIsEnabled4Administration(t,e.selectedUser2Admin,r,e.selectedSubOrgaId),i.allowed=e.accessService.hasAdministratedPermission(t,e.selectedUser2Admin,r,e.selectedSubOrgaId),n.push(i)}));var r={};Object.assign(r,t),r.permissions=n,e.resourcesAndAccessRights.push(r)}))}},{key:"getResourceDisplayName",value:function(e){return this.isForeignResource(e)?e.displayName+" (von Orga#: "+e.orgaId+")":e.displayName}},{key:"isForeignUser",value:function(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}},{key:"isForeignResource",value:function(e){return!!e&&e.orgaId!==this.principal.orgaId}},{key:"discardChanges",value:function(){this._initMembers()}},{key:"savePermissions",value:function(){var e=this;this.resourcesAndAccessRights.forEach((function(t){if(t.dirty){var n=t.permissions.filter((function(e){return e.allowed})).map((function(e){return e.name}));e.accessService.setPermissionsOfUser2resource(e.selectedUser2Admin,t,n,e.selectedSubOrgaId)}})),this._afterSavingPermissions()}},{key:"_afterSavingPermissions",value:function(){this.dirty=!1,this.resourcesAndAccessRights.forEach((function(e){return e.dirty=!1}))}},{key:"onChangedUser",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){var t=this.users2Admin.find((function(t){return t.id===e.selectedUsersId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=t)}this._initMembers()}},{key:"onChangedSubOrga",value:function(){var e=this;if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){var t=this.subOrgas2Admin.find((function(t){return t.id===e.selectedSubOrgaId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedSubOrga2Admin=t)}this._initMembers(!0)}},{key:"onChangedResourceType",value:function(){var e=this;if(this.dirty&&!confirm("Willst du den Ressourcentyp wechseln und deine \xc4nderungen verwerfen?")){var t=this.resourceTypes2Admin.find((function(t){return t.typeId===e.selectedResourceTypesId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedResourceType2Admin=t)}this._initMembers()}},{key:"onChangedPermission",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this.dirty=!0,e>=0){var t=this.resourcesAndAccessRights[e];t&&(t.dirty=!0)}}}]),e}(),A_.\u0275fac=function(e){return new(e||A_)(As(Zi),As(Vf),As(zf),As(wg),As(ag))},A_.\u0275cmp=ht({type:A_,selectors:[["app-iam-central-admin"]],decls:31,vars:14,consts:[[1,"mb-1"],[1,"row"],[1,"col","s12"],[1,"input-field","label-for-select","col","s5","m3"],[1,"input-field","col","s8","m5"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["name","resourceType2admin",1,"browser-default",3,"ngModel","ngModelChange"],["resourceType2adminCtrl","ngModel"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[4,"ngIf"],["class","liste",4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"list-item-text"],["class","valign-wrapper mr-1",4,"ngFor","ngForOf"],[1,"valign-wrapper","mr-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(Rs(0,"h6",0),$s(1),Es(),Rs(2,"div",1),Rs(3,"div",2),Rs(4,"div",1),Rs(5,"div",3),$s(6," Sub-Organisation w\xe4hlen: "),Es(),Rs(7,"div",4),Rs(8,"select",5,6),Ds("ngModelChange",(function(e){return t.selectedSubOrga2Admin=e}))("ngModelChange",(function(){return t.onChangedSubOrga()})),Is(10,l_,2,2,"option",7),Es(),Es(),Es(),Rs(11,"div",1),Rs(12,"div",3),$s(13," Ressourcen-Typ w\xe4hlen: "),Es(),Rs(14,"div",4),Rs(15,"select",8,9),Ds("ngModelChange",(function(e){return t.selectedResourceType2Admin=e}))("ngModelChange",(function(){return t.onChangedResourceType()})),Is(17,d_,2,2,"option",7),Es(),Es(),Es(),Rs(18,"div",1),Rs(19,"div",3),$s(20," Benutzer w\xe4hlen: "),Es(),Rs(21,"div",4),Rs(22,"select",10,11),Ds("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),Is(24,h_,2,2,"option",7),Es(),Es(),Es(),Es(),Es(),Is(25,f_,6,0,"div",12),Is(26,m_,2,1,"ul",13),Rs(27,"button",14),Ds("click",(function(){return t.discardChanges()})),$s(28,"\xc4nderungen verwerfen"),Es(),Rs(29,"button",15),Ds("click",(function(){return t.savePermissions()})),$s(30,"\xc4nderungen \xfcbernehmen"),Es()),2&e&&(xr(1),Qs(" Hallo ",t.usersDisplayName,", hier kannst du die Berechtigungen f\xfcr alle deine Organisationen und alle Unterstrukturen zentral regeln."),xr(7),Ps("ngModel",t.selectedSubOrga2Admin),xr(2),Ps("ngForOf",t.subOrgas2Admin),xr(5),Ps("ngModel",t.selectedResourceType2Admin),xr(2),Ps("ngForOf",t.resourceTypes2Admin),xr(5),Ps("ngClass",da(12,y_,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),xr(2),Ps("ngForOf",t.users2Admin),xr(1),Ps("ngIf",0===t.resourcesAndAccessRights.length),xr(1),Ps("ngIf",t.resourcesAndAccessRights.length>0),xr(1),Ps("disabled",!t.dirty),xr(2),Ps("disabled",!t.dirty))},directives:[yv,Hg,sp,$u,qu,Qu,_v,Iv,Rg],styles:[".liste[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{width:2rem}.list-item-text[_ngcontent-%COMP%]{width:25rem}select[_ngcontent-%COMP%]{border:3px solid teal}.foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:0!important}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem;white-space:nowrap}@media screen and (max-width:500px){.label-for-select[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;margin:0}}"]}),A_),canActivate:[Bm],data:{allowSubAdmin:!0}},{path:"iam/suborga-management",component:Lp,canActivate:[Bm]},{path:"iam/suborga-administration",component:(S_=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.changeDetector=t,this.settingsService=n,this.principalService=r,this.orgaService=i,this.accessService=s,this.usersDisplayName="",this.subOrgas=[],this.orgaUsers=[],this.mixedUsers=[],this.orgaResources=[],this.mixedResources=[],this.dirty=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.settingsService.setTitle("Unterstruktur Best\xfcckung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.subOrgas=this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1),this.subOrgas.length>0&&(this.selectedSubOrga=this.subOrgas[0]),this._initMembers()}},{key:"_removeForeignItems",value:function(){}},{key:"_initMembers",value:function(){this.dirty=!1,this.selectedSubOrga&&(this.selectedSubOrgaId=this.selectedSubOrga.id,this.orgaUsers=this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.orgaResources=this.accessService.getAllResourcesOfOrga(this.principal.orgaId),this._removeForeignItems(),this._initMixedOrgaUsers(),this._initMixedSubResources())}},{key:"_initMixedOrgaUsers",value:function(){var e=this;this.mixedUsers=[];var t=this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);this.orgaUsers.forEach((function(n){var r={orgaUserId:n.id,name:n.name,dirty:!1,subAdmin:!1,subAdminNew:!1,isInSubOrga:!1,isInSubOrgaNew:!1},i=t.find((function(e){return e.orgaUserId===n.id}));i&&(r.subUserId=i.id,r.isInSubOrga=!0,r.isInSubOrgaNew=!0,r.subAdmin=i.subAdmin,r.subAdminNew=i.subAdmin),e.mixedUsers.push(r)}))}},{key:"_initMixedSubResources",value:function(){var e=this;this.mixedResources=[];var t=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id);console.log(t),this.orgaResources.forEach((function(n){var r={typeId:n.typeId,orgaResourceId:n.id,name:n.displayName,dirty:!1,isInSubOrga:!1,isInSubOrgaNew:!1},i=t.find((function(e){return e.orgaResourceId===n.id&&e.typeId===n.typeId}));i&&(r.subResourceId=i.id,r.isInSubOrga=!0,r.isInSubOrgaNew=!0),e.mixedResources.push(r)})),console.log(this.mixedResources)}},{key:"_reCalcMixedUsers",value:function(){var e=this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);this.mixedUsers.forEach((function(t){t.dirty=!1,t.isInSubOrga=t.isInSubOrgaNew,t.subAdmin=t.subAdminNew,t.subUserId=void 0;var n=e.find((function(e){return e.orgaUserId===t.orgaUserId}));n&&(t.subUserId=n.id)}))}},{key:"_reCalcMixedResources",value:function(){var e=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id);console.log(e),this.mixedResources.forEach((function(t){t.dirty=!1,t.isInSubOrga=t.isInSubOrgaNew,t.subResourceId=void 0;var n=e.find((function(e){return e.orgaResourceId===t.orgaResourceId&&e.typeId===t.typeId}));n&&(t.subResourceId=n.id)})),console.log(this.mixedResources)}},{key:"isForeignUser",value:function(e){return!(!e.foreignOrgaId&&!e.foreignUserId)}},{key:"isForeignResource",value:function(e){return e.orgaId!==this.principal.orgaId}},{key:"disableSubAdminCheckbox",value:function(e){var t=this.mixedUsers[e],n=this.orgaUsers.find((function(e){return e.id===t.orgaUserId}));return!t.isInSubOrgaNew||this.isForeignUser(n)}},{key:"discardChanges",value:function(){this._initMembers()}},{key:"_saveUserChanges",value:function(){var e=this,t=[];this.mixedUsers.forEach((function(n){if(n.dirty){var r={id:n.subUserId,orgaId:e.selectedSubOrga.orgaId,subOrgaId:e.selectedSubOrgaId,orgaUserId:n.orgaUserId,subAdmin:n.subAdminNew};n.dirty=!1,n.isInSubOrga!==n.isInSubOrgaNew&&(n.dirty=!0,n.isInSubOrgaNew?r.id=void 0:r.subOrgaId=void 0),n.subAdmin!==n.subAdminNew&&(n.dirty=!0),n.dirty&&t.push(r)}})),console.log(t),this.orgaService.changeSubOrgaUsers(t)}},{key:"_saveResourceChanges",value:function(){var e=this,t=[];this.mixedResources.forEach((function(n){if(n.dirty){var r={id:n.subResourceId,typeId:n.typeId,orgaResourceId:n.orgaResourceId,orgaId:e.selectedSubOrga.orgaId,subOrgaId:e.selectedSubOrgaId};n.isInSubOrga!==n.isInSubOrgaNew&&(n.isInSubOrgaNew?r.id=void 0:r.subOrgaId=void 0,t.push(r))}})),console.log(t),this.accessService.changeSubResources(this.selectedSubOrgaId,t)}},{key:"saveChanges",value:function(){this._saveUserChanges(),this._saveResourceChanges(),this._afterSavingChanges()}},{key:"_afterSavingChanges",value:function(){this.dirty=!1,this._reCalcMixedUsers(),this._reCalcMixedResources()}},{key:"onChangedSubOrga",value:function(){var e=this;if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){var t=this.subOrgas.find((function(t){return t.id===e.selectedSubOrgaId}));if(t)return this.changeDetector.detectChanges(),void(this.selectedSubOrga=t)}this._initMembers()}},{key:"_onChangedUserItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mixedUsers[e];n&&(t&&!n.isInSubOrgaNew&&(n.subAdminNew=!1),n.dirty=!0,this.dirty=!0)}},{key:"onChangedUserSubAdmin",value:function(e){this._onChangedUserItem(e)}},{key:"onChangedUserInSubOrga",value:function(e){this._onChangedUserItem(e,!0)}},{key:"onChangedResourceInSubOrga",value:function(e){var t=this.mixedResources[e];t&&(t.dirty=!0,this.dirty=!0)}}]),e}(),S_.\u0275fac=function(e){return new(e||S_)(As(Zi),As(Vf),As(zf),As(wg),As(ag))},S_.\u0275cmp=ht({type:S_,selectors:[["app-iam-sub-orga-admin"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s6"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[2,"font-weight","bold"],["class","verweise",4,"ngIf"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"],[3,"ngValue"],[1,"verweise"],["class","valign-wrapper",4,"ngFor","ngForOf"],[1,"valign-wrapper"],[1,"list-item-text"],["type","checkbox",1,"filled-in",3,"ngModel","ngModelChange"],[1,"first-checkbox"],["type","checkbox",1,"filled-in",3,"disabled","ngModel","ngModelChange"],[1,"second-checkbox"]],template:function(e,t){1&e&&(Rs(0,"h5"),$s(1),Es(),Is(2,__,3,0,"div",0),Is(3,I_,20,6,"div",1)),2&e&&(xr(1),Qs(" Hallo ",t.usersDisplayName,", hier kannst du deinen Unterstrukturen Benutzer und Ressourcen zuweisen."),xr(1),Ps("ngIf",0===t.subOrgas.length),xr(1),Ps("ngIf",t.subOrgas.length>0))},directives:[Qu,yv,Hg,sp,$u,_v,Iv,Rg],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:55em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:55em;position:relative;background-color:#eee;margin-bottom:.5em;padding:.3em 0;height:2.2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:5em}.list-item-text[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:25em;text-align:left}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1em;margin-right:1em}.first-checkbox[_ngcontent-%COMP%]{float:left;width:10em;text-align:left}.second-checkbox[_ngcontent-%COMP%]{float:left;width:15em;text-align:left}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}select[_ngcontent-%COMP%]{border:3px solid teal}.foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),S_),canActivate:[Bm],data:{allowSubAdmin:!0}},{path:"notification-view",component:km,canActivate:[t_]},{path:"fakes/mail-view",component:jm},{path:"iam/settings",component:Im},{path:"help",component:Vp},{path:"products-main",component:Pp},{path:"generic-product/fibu",component:_g,data:{dataProductId:Hc.FIBU}},{path:"generic-product/tax",component:_g,data:{dataProductId:Hc.TAX}},{path:"generic-product/bilanz",component:_g,canActivate:[t_],data:{requiredAuthType:Ff.OrgaUser,dataProductId:Hc.BILANZ,checkLicenceInGuard:!0}},{path:"marketplace",component:tg},{path:"folderApp/main",component:am,canActivate:[t_],data:{requiredAuthLevel:Nf.Low,requiredAuthType:Ff.OrgaUser}},{path:"folderApp/admin",component:Yp,canActivate:[Bm]},{path:"x/geschuetzt-mit-beidem-mit-parametern",component:Iy,canActivate:[t_],data:{requiredAuthLevel:Nf.Secure,requiredAuthType:Ff.OrgaUser}},{path:"**",component:Jy}],R_=((P_=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:P_}),P_.\u0275inj=fe({factory:function(e){return new(e||P_)},imports:[[bf.forRoot(T_)],bf]}),P_);function E_(e,t){if(1&e&&(Rs(0,"span",20),$s(1),Es()),2&e){var n=zs();xr(1),Js(n.orgaName)}}function U_(e,t){if(1&e&&(Rs(0,"span",21),$s(1),Es()),2&e){var n=zs();xr(1),Js(n.countOfNewBadgeItems)}}function M_(e,t){1&e&&(Rs(0,"i",22),$s(1,"arrow_drop_down"),Es())}function F_(e,t){if(1&e&&(Rs(0,"span",21),$s(1),Es()),2&e){var n=zs().$implicit;xr(1),Js(n.newCount)}}var N_=function(e){return{divider:e}};function D_(e,t){if(1&e){var n=Ms();Rs(0,"li",23),Ds("click",(function(){Wt(n);var e=t.index;return zs().onDropDownProfileClick(e)})),Rs(1,"a"),$s(2),Is(3,F_,2,1,"span",6),Es(),Es()}if(2&e){var r=t.$implicit;Ps("ngClass",da(3,N_,r.isDivider)),xr(2),Qs(" ",r.text," "),xr(1),Ps("ngIf",r.newCount>0)}}var L_,V_=function(e,t){return{"blue darken-2":e,"teal lighten-2":t}},z_=function(e,t){return{orange:e,"teal accent-4":t}},j_=((L_=function(){function e(t,n,r,i,s,o,a,u,c){_classCallCheck(this,e),this.router=t,this.principalService=n,this.tokenService=r,this.notificationService=i,this.eventService=a,this.settingsService=u,this.changeDetector=c,this.isActive=!0,this.title="Home",this.orgaName="",this.usersDisplayName="",this.useMyColors=!0,this.dropDownItems=[],this.countOfNewBadgeItems=0,this.dropdownLogoutId=9999,s.assureServiceIsCreated(),s.setOrgaServiceHelper(o)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(rg((function(){return e.isActive}))).subscribe((function(t){return e._onMainViewChanged(t)})),this.initMembers()}},{key:"_fakeLogin",value:function(){this.principalService.setPrincipal({account:{id:12,name:"Klaus langer name",email:"mail.de"},authType:Ff.OrgaUser,orgaUser:{id:300,name:"Klaus Orga auch lang"},organization:{id:12,name:"Kanzlei Orga noch l\xe4nger"}})}},{key:"ngOnDestroy",value:function(){this.isActive=!1}},{key:"_onMainViewChanged",value:function(e){e.titleOnly?this.title=this.settingsService.getTitle():this.initMembers()}},{key:"initMembers",value:function(){this.title=this.settingsService.getTitle(),this.changeDetector.detectChanges(),this.countOfNewBadgeItems=0,this.principalService.isLoggedIn?(this.orgaName=this.principalService.getOrgaName(),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.countOfNewBadgeItems=this.notificationService.getNumberOfNotificationsForCurrentPrincipal()):(this.orgaName="",this.usersDisplayName=""),this.useMyColors=!this.settingsService.useGreenLikeColors(),this.dropDownItems=[],this.principalService.isLoggedIn&&(this.dropDownItems.push({id:1,link:"/iam/user-info",text:"User-Infos"},{isDivider:!0}),this.countOfNewBadgeItems>0&&this.dropDownItems.push({id:10,link:"/notification-view",text:"Nachrichten f\xfcr dich",newCount:this.countOfNewBadgeItems},{isDivider:!0}),this.dropDownItems.push({id:20,link:"/iam/credentials-management",text:"zu deinen Zugangsmedien"},{id:30,link:"/iam/organization-management",text:"zu deinen Mitgliedschaften"},{id:40,link:"/iam/organization-administration",text:"zur Organisations-Administration"},{id:45,link:"/iam/central-administration",text:"zur zentralen Rechte-Administration"},{isDivider:!0},{id:50,link:"/folderApp/main",text:"zur Ordner-App"},{id:60,link:"/folderApp/admin",text:"zur Ordner-Administration"},{isDivider:!0},{id:70,link:"/iam/login",text:"anders anmelden"},{id:this.dropdownLogoutId,text:"abmelden"}))}},{key:"onProfileClick",value:function(){this.principalService.isLoggedIn||this.router.navigateByUrl("/iam/login")}},{key:"onDropDownProfileClick",value:function(e){var t=this.dropDownItems[e];if(t.id===this.dropdownLogoutId)return this.tokenService.logout(),void this.router.navigateByUrl("/");t.link&&this.router.navigateByUrl(t.link)}}]),e}()).\u0275fac=function(e){return new(e||L_)(As(tf),As(zf),As(Pm),As(cm),As(ag),As(wg),As(Lf),As(Vf),As(Zi))},L_.\u0275cmp=ht({type:L_,selectors:[["app-root"]],decls:33,vars:14,consts:[[1,"nav-extended",3,"ngClass"],["data-test-id","header-title","routerLink","","title","zur\xfcck zur Startseite...",1,"header-text-left","ml-3"],[1,"right"],["class","header-text ml-3 p-1",4,"ngIf"],["data-target","dd-profile",1,"dropdown-trigger","header-text","valign-wrapper","m-3",3,"click"],["data-test-id","user-display-name"],["class","new badge red","data-badge-caption","",4,"ngIf"],["class","material-icons right",4,"ngIf"],[1,"nav-content"],["id","dd-profile",1,"dropdown-content","vertical-tabs"],["style","font-weight: 450; color: black !important",3,"ngClass","click",4,"ngFor","ngForOf"],["id","index-banner",1,"section","no-pad-bot"],[1,"container"],[1,"page-footer",3,"ngClass"],[1,"row"],[1,"col","m7","push-m1","s6"],[1,"col","m2","push-m2","s3"],["routerLink","/iam/settings",1,"white-text","mr-1"],[1,"material-icons"],["routerLink","/help",1,"white-text"],[1,"header-text","ml-3","p-1"],["data-badge-caption","",1,"new","badge","red"],[1,"material-icons","right"],[2,"font-weight","450","color","black !important",3,"ngClass","click"]],template:function(e,t){1&e&&(Rs(0,"nav",0),Rs(1,"ul"),Rs(2,"li"),Rs(3,"a",1),$s(4),Es(),Es(),Rs(5,"div",2),Rs(6,"li"),Is(7,E_,2,1,"span",3),Es(),Rs(8,"li"),Rs(9,"a",4),Ds("click",(function(){return t.onProfileClick()})),Rs(10,"span",5),$s(11),Es(),Is(12,U_,2,1,"span",6),Is(13,M_,2,0,"i",7),Es(),Es(),Es(),Es(),Rs(14,"div",8),Rs(15,"ul",9),Is(16,D_,4,5,"li",10),Es(),Es(),Es(),Rs(17,"main"),Rs(18,"div",11),Rs(19,"div",12),Us(20,"router-outlet"),Es(),Es(),Es(),Rs(21,"footer",13),Rs(22,"div",14),Rs(23,"div",15),Rs(24,"span"),$s(25,"Made by Klaus Hetzelein (c) 2019 - 2021"),Es(),Es(),Rs(26,"div",16),Rs(27,"a",17),Rs(28,"i",18),$s(29,"settings_applications"),Es(),Es(),Rs(30,"a",19),Rs(31,"i",18),$s(32,"help_outline"),Es(),Es(),Es(),Es(),Es()),2&e&&(Ps("ngClass",ha(8,V_,t.useMyColors,!t.useMyColors)),xr(4),Js(t.title),xr(3),Ps("ngIf",t.orgaName.length>0),xr(4),Js(t.usersDisplayName),xr(1),Ps("ngIf",t.countOfNewBadgeItems>0),xr(1),Ps("ngIf",t.usersDisplayName.length>0),xr(3),Ps("ngForOf",t.dropDownItems),xr(5),Ps("ngClass",ha(11,z_,t.useMyColors,!t.useMyColors)))},directives:[qu,nf,Qu,$u,lf],styles:[".header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.5rem}.header-text[_ngcontent-%COMP%]{font-style:italic}.vertical-tabs[_ngcontent-%COMP%]{border-left:3px solid #1976d2!important;padding:0!important}.vertical-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important}.divider[_ngcontent-%COMP%]{border-bottom:2px solid #1976d2}.badge[_ngcontent-%COMP%]{margin-left:1rem}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}body[_ngcontent-%COMP%]{font-family:Roboto,Arial,sans-serif;margin:0;width:-webkit-max-content;width:-moz-max-content;width:max-content}@media screen and (max-width:540px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:42px}i.material-icons[_ngcontent-%COMP%]{line-height:42px;height:42px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.2rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}@media screen and (max-width:360px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:32px}i.material-icons[_ngcontent-%COMP%]{line-height:32px;height:32px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.1rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}"]}),L_),B_=function e(){_classCallCheck(this,e)},H_=function e(){_classCallCheck(this,e)},G_=function(){function e(t){var n=this;_classCallCheck(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),s=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(s):n.headers.set(i,[s])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))}))}:this.headers=new Map}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var s=this.headers.get(t);if(!s)return;0===(s=s.filter((function(e){return-1===i.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),K_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return W_(e)}},{key:"encodeValue",value:function(e){return W_(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function W_(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var q_=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new K_,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){var n=new Map;return e.length>0&&e.split("&").forEach((function(e){var r=e.indexOf("="),i=_slicedToArray(-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],2),s=i[0],o=i[1],a=n.get(s)||[];a.push(o),n.set(s,a)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])}))):this.map=null}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).filter((function(e){return""!==e})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function Z_(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function $_(e){return"undefined"!=typeof Blob&&e instanceof Blob}function J_(e){return"undefined"!=typeof FormData&&e instanceof FormData}var Q_=function(){function e(t,n,r,i){var s;if(_classCallCheck(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new G_),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new q_,this.urlWithParams=n}return _createClass(e,[{key:"serializeBody",value:function(){return null===this.body?null:Z_(this.body)||$_(this.body)||J_(this.body)||"string"==typeof this.body?this.body:this.body instanceof q_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||J_(this.body)?null:$_(this.body)?this.body.type||null:Z_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof q_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),c)),new e(n,r,s,{params:c,headers:u,reportProgress:a,responseType:i,withCredentials:o})}}]),e}(),X_=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),Y_=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,e),this.headers=t.headers||new G_,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},ek=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=t.call(this,r)).type=X_.ResponseHeader,e}return _createClass(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(Y_),tk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=t.call(this,r)).type=X_.Response,e.body=void 0!==r.body?r.body:null,e}return _createClass(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(Y_),nk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),r.error=e.error||null,r}return n}(Y_);function rk(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var ik,sk,ok,ak,uk,ck,lk,dk,hk,fk=((ik=function(){function e(t){_classCallCheck(this,e),this.handler=t}return _createClass(e,[{key:"request",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Q_)n=e;else{var s=void 0;s=i.headers instanceof G_?i.headers:new G_(i.headers);var o=void 0;i.params&&(o=i.params instanceof q_?i.params:new q_({fromObject:i.params})),n=new Q_(e,t,void 0!==i.body?i.body:null,{headers:s,params:o,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var a=Gc(n).pipe(Rl((function(e){return r.handler.handle(e)})));if(e instanceof Q_||"events"===i.observe)return a;var u=a.pipe(el((function(e){return e instanceof tk})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(z((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return u.pipe(z((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return u.pipe(z((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return u.pipe(z((function(e){return e.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new q_).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,rk(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,rk(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,rk(n,t))}}]),e}()).\u0275fac=function(e){return new(e||ik)(Je(B_))},ik.\u0275prov=he({token:ik,factory:ik.\u0275fac}),ik),gk=function(){function e(t,n){_classCallCheck(this,e),this.next=t,this.interceptor=n}return _createClass(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),vk=new je("HTTP_INTERCEPTORS"),pk=((sk=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||sk)},sk.\u0275prov=he({token:sk,factory:sk.\u0275fac}),sk),mk=/^\)\]\}',?\n/,yk=function e(){_classCallCheck(this,e)},_k=((ak=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}()).\u0275fac=function(e){return new(e||ak)},ak.\u0275prov=he({token:ak,factory:ak.\u0275fac}),ak),kk=((ok=function(){function e(t){_classCallCheck(this,e),this.xhrFactory=t}return _createClass(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new C((function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((function(e,t){return r.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var s=e.responseType.toLowerCase();r.responseType="json"!==s?s:"text"}var o=e.serializeBody(),a=null,u=function(){if(null!==a)return a;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new G_(r.getAllResponseHeaders()),s=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return a=new ek({headers:i,status:t,statusText:n,url:s})},c=function(){var t=u(),i=t.headers,s=t.status,o=t.statusText,a=t.url,c=null;204!==s&&(c=void 0===r.response?r.responseText:r.response),0===s&&(s=c?200:0);var l=s>=200&&s<300;if("json"===e.responseType&&"string"==typeof c){var d=c;c=c.replace(mk,"");try{c=""!==c?JSON.parse(c):null}catch(h){c=d,l&&(l=!1,c={error:h,text:c})}}l?(n.next(new tk({body:c,headers:i,status:s,statusText:o,url:a||void 0})),n.complete()):n.error(new nk({error:c,headers:i,status:s,statusText:o,url:a||void 0}))},l=function(e){var t=u().url,i=new nk({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(i)},d=!1,h=function(t){d||(n.next(u()),d=!0);var i={type:X_.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(e){var t={type:X_.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",c),r.addEventListener("error",l),e.reportProgress&&(r.addEventListener("progress",h),null!==o&&r.upload&&r.upload.addEventListener("progress",f)),r.send(o),n.next({type:X_.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),e.reportProgress&&(r.removeEventListener("progress",h),null!==o&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}}))}}]),e}()).\u0275fac=function(e){return new(e||ok)(Je(yk))},ok.\u0275prov=he({token:ok,factory:ok.\u0275fac}),ok),bk=new je("XSRF_COOKIE_NAME"),Ck=new je("XSRF_HEADER_NAME"),wk=function e(){_classCallCheck(this,e)},Ok=((hk=function(){function e(t,n,r){_classCallCheck(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hu(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}()).\u0275fac=function(e){return new(e||hk)(Je(pu),Je(ba),Je(bk))},hk.\u0275prov=he({token:hk,factory:hk.\u0275fac}),hk),Ik=((dk=function(){function e(t,n){_classCallCheck(this,e),this.tokenService=t,this.headerName=n}return _createClass(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||dk)(Je(wk),Je(Ck))},dk.\u0275prov=he({token:dk,factory:dk.\u0275fac}),dk),Sk=((lk=function(){function e(t,n){_classCallCheck(this,e),this.backend=t,this.injector=n,this.chain=null}return _createClass(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(vk,[]);this.chain=t.reduceRight((function(e,t){return new gk(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||lk)(Je(H_),Je(ls))},lk.\u0275prov=he({token:lk,factory:lk.\u0275fac}),lk),Ak=((ck=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:Ik,useClass:pk}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:bk,useValue:t.cookieName}:[],t.headerName?{provide:Ck,useValue:t.headerName}:[]]}}}]),e}()).\u0275mod=pt({type:ck}),ck.\u0275inj=fe({factory:function(e){return new(e||ck)},providers:[Ik,{provide:vk,useExisting:Ik,multi:!0},{provide:wk,useClass:Ok},{provide:bk,useValue:"XSRF-TOKEN"},{provide:Ck,useValue:"X-XSRF-TOKEN"}]}),ck),xk=((uk=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:uk}),uk.\u0275inj=fe({factory:function(e){return new(e||uk)},providers:[fk,{provide:B_,useClass:Sk},kk,{provide:H_,useExisting:kk},_k,{provide:yk,useExisting:_k}],imports:[[Ak.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),uk),Pk=new py([{id:ky.PROVIDER_ID,provider:new ky("239975901698-c4lmv7l5ku13p51014vtr4af014ejacc.apps.googleusercontent.com")}]);function Tk(){return Pk}var Rk,Ek=((Rk=function e(){_classCallCheck(this,e)}).\u0275mod=pt({type:Rk,bootstrap:[j_]}),Rk.\u0275inj=fe({factory:function(e){return new(e||Rk)},providers:[{provide:py,useFactory:Tk}],imports:[[Vc,R_,hp,xk,yy]]}),Rk);(function(){if(ir)throw new Error("Cannot enable prod mode after platform setup.");rr=!1})(),Dc().bootstrapModule(Ek).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);