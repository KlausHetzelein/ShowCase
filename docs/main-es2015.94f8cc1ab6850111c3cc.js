(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},FWf1:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=n("pshJ"),s=n("GiSu"),o=n("zB/H"),a=n("p//D"),c=n("n3uD"),l=n("MkmW"),u=function(e){function t(n,i,r){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!n){o.destination=s.empty;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new d(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new d(o,n,i,r)}return o}return i(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,n,i){var r=new t(e,n,i);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.Subscription);t.Subscriber=u;var d=function(e){function t(t,n,i,o){var a,c=e.call(this)||this;c._parentSubscriber=t;var l=c;return r.isFunction(n)?a=n:n&&(a=n.next,i=n.error,o=n.complete,n!==s.empty&&(l=Object.create(n),r.isFunction(l.unsubscribe)&&c.add(l.unsubscribe.bind(l)),l.unsubscribe=c.unsubscribe.bind(c))),c._context=l,c._next=a,c._error=i,c._complete=o,c}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw n;l.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(l.hostReportError(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u);t.SafeSubscriber=d},GMZp:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,n){"use strict";var i=n("n3uD"),r=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(i.config.useDeprecatedSynchronousErrorHandling)throw e;r.hostReportError(e)},complete:function(){}}},Gp9u:function(e,t){},LBXl:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},MkmW:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},mbIT:function(e,t,n){"use strict";t.isArray=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},n3uD:function(e,t,n){"use strict";var i=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},"p//D":function(e,t,n){"use strict";t.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),t.$$rxSubscriber=t.rxSubscriber},pshJ:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},"s3+Z":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=n("FWf1");t.takeWhile=function(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.inclusive))},e}(),o=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.predicate=n,r.inclusive=i,r.index=0,r}return i(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(i){return void n.error(i)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(r.Subscriber)},"zB/H":function(e,t,n){"use strict";var i=n("mbIT"),r=n("GMZp"),s=n("pshJ"),o=n("LBXl");function a(e){return e.reduce((function(e,t){return e.concat(t instanceof o.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u)n[u].remove(this);if(s.isFunction(c))try{c.call(this)}catch(g){t=g instanceof o.UnsubscriptionError?a(g.errors):[g]}if(i.isArray(l)){u=-1;for(var d=l.length;++u<d;){var h=l[u];if(r.isObject(h))try{h.unsubscribe()}catch(g){t=t||[],g instanceof o.UnsubscriptionError?t=t.concat(a(g.errors)):t.push(g)}}}if(t)throw new o.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zUnb:function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.r(t);let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function l(e){return null!==e&&"object"==typeof e}const u=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let d=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(i(r))try{r.call(this)}catch(o){t=o instanceof u?h(o.errors):[o]}if(c(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(l(n))try{n.unsubscribe()}catch(o){t=t||[],o instanceof u?t=t.concat(h(o.errors)):t.push(o)}}}if(t)throw new u(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function h(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}const g=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,e,t,n)}}[g](){return this}static create(e,t,n){const i=new f(e,t,n);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class p extends f{constructor(e,t,n,r){let s;super(),this._parentSubscriber=e;let o=this;i(t)?s=t:t&&(s=t.next,n=t.error,r=t.complete,t!==a&&(o=Object.create(t),i(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(o(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(e){return e}function y(...e){return b(e)}function b(e){return 0===e.length?v:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}let w=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:i}=this,r=function(e,t,n){if(e){if(e instanceof f)return e;if(e[g])return e[g]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=_(t))((t,n)=>{let i;i=this.subscribe(t=>{try{e(t)}catch(r){n(r),i&&i.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[m](){return this}pipe(...e){return 0===e.length?this:b(e)(this)}toPromise(e){return new(e=_(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function _(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const O=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class I extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class S extends f{constructor(e){super(e),this.destination=e}}let C=(()=>{class e extends w{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[g](){return new S(this)}lift(e){const t=new A(this,this);return t.operator=e,t}next(e){if(this.closed)throw new O;if(!this.isStopped){const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].next(e)}}error(e){if(this.closed)throw new O;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].error(e);this.observers.length=0}complete(){if(this.closed)throw new O;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let i=0;i<t;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new O;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new O;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new I(this,e))}asObservable(){const e=new w;return e.source=this,e}}return e.create=(e,t)=>new A(e,t),e})();class A extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function k(e){return e&&"function"==typeof e.schedule}class x extends f{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const U=e=>t=>{for(let n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()};function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const T=P(),R=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function E(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const F=e=>{if(e&&"function"==typeof e[m])return i=e,e=>{const t=i[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(R(e))return U(e);if(E(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e);if(e&&"function"==typeof e[T])return t=e,e=>{const n=t[T]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=l(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,i};function N(e,t,n,i,r=new x(e,n,i)){if(!r.closed)return t instanceof w?t.subscribe(r):F(t)(r)}class D extends f{notifyNext(e,t,n,i,r){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function z(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(e,t))}}class V{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new B(e,this.project,this.thisArg))}}class B extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function L(e,t){return new w(n=>{const i=new d;let r=0;return i.add(t.schedule((function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i})}function j(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new w(n=>{const i=new d;return i.add(t.schedule(()=>{const r=e[m]();i.add(r.subscribe({next(e){i.add(t.schedule(()=>n.next(e)))},error(e){i.add(t.schedule(()=>n.error(e)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(e,t);if(E(e))return function(e,t){return new w(n=>{const i=new d;return i.add(t.schedule(()=>e.then(e=>{i.add(t.schedule(()=>{n.next(e),i.add(t.schedule(()=>n.complete()))}))},e=>{i.add(t.schedule(()=>n.error(e)))}))),i})}(e,t);if(R(e))return L(e,t);if(function(e){return e&&"function"==typeof e[T]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new w(n=>{const i=new d;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(()=>{r=e[T](),i.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=r.next();e=n.value,t=n.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())})))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof w?e:new w(F(e))}function H(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(H((n,i)=>j(e(n,i)).pipe(z((e,r)=>t(n,e,i,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new $(e,n)))}class ${constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new G(e,this.project,this.concurrent))}}class G extends D{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const i=new x(this,t,n),r=this.destination;r.add(i);const s=N(this,e,void 0,void 0,i);s!==i&&r.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,i,r){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function W(e=Number.POSITIVE_INFINITY){return H(v,e)}function q(e,t){return t?L(e,t):new w(U(e))}function K(){return function(e){return e.lift(new Z(e))}}class Z{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const i=new J(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class J extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class Q extends w{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new d,e.add(this.source.subscribe(new Y(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}refCount(){return K()(this)}}const X=(()=>{const e=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class Y extends S{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function ee(){return new C}function te(e){return{toString:e}.toString()}function ne(e,t,n){return te(()=>{const i=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function r(...e){if(this instanceof r)return i.apply(this,e),this;const t=new r(...e);return n.annotation=t,n;function n(e,n,i){const r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(t),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}const ie=ne("Inject",e=>({token:e})),re=ne("Optional"),se=ne("Self"),oe=ne("SkipSelf");var ae=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ce(e){for(let t in e)if(e[t]===ce)return t;throw Error("Could not find renamed property on target object.")}function le(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function de(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function he(e){return ge(e,e[pe])||ge(e,e[ye])}function ge(e,t){return t&&t.token===e?t:null}function fe(e){return e&&(e.hasOwnProperty(me)||e.hasOwnProperty(be))?e[me]:null}const pe=ce({"\u0275prov":ce}),me=ce({"\u0275inj":ce}),ve=ce({"\u0275provFallback":ce}),ye=ce({ngInjectableDef:ce}),be=ce({ngInjectorDef:ce});function we(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(we).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function _e(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Oe=ce({__forward_ref__:ce});function Ie(e){return e.__forward_ref__=Ie,e.toString=function(){return we(this())},e}function Se(e){return Ce(e)?e():e}function Ce(e){return"function"==typeof e&&e.hasOwnProperty(Oe)&&e.__forward_ref__===Ie}const Ae="undefined"!=typeof globalThis&&globalThis,ke="undefined"!=typeof window&&window,xe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ue="undefined"!=typeof global&&global,Pe=Ae||Ue||ke||xe,Te=ce({"\u0275cmp":ce}),Me=ce({"\u0275dir":ce}),Re=ce({"\u0275pipe":ce}),Ee=ce({"\u0275mod":ce}),Fe=ce({"\u0275loc":ce}),Ne=ce({"\u0275fac":ce}),De=ce({__NG_ELEMENT_ID__:ce});class ze{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return"InjectionToken "+this._desc}}const Ve=new ze("INJECTOR",-1),Be={},Le=/\n/gm,je=ce({provide:String,useValue:ce});let He,$e=void 0;function Ge(e){const t=$e;return $e=e,t}function We(e){const t=He;return He=e,t}function qe(e,t=ae.Default){if(void 0===$e)throw new Error("inject() must be called from an injection context");return null===$e?Ze(e,void 0,t):$e.get(e,t&ae.Optional?null:void 0,t)}function Ke(e,t=ae.Default){return(He||qe)(Se(e),t)}function Ze(e,t,n){const i=he(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ae.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${we(e)}]`)}function Je(e){const t=[];for(let n=0;n<e.length;n++){const i=Se(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=ae.Default;for(let t=0;t<i.length;t++){const r=i[t];r instanceof re||"Optional"===r.ngMetadataName||r===re?n|=ae.Optional:r instanceof oe||"SkipSelf"===r.ngMetadataName||r===oe?n|=ae.SkipSelf:r instanceof se||"Self"===r.ngMetadataName||r===se?n|=ae.Self:e=r instanceof ie||r===ie?r.token:r}t.push(Ke(e,n))}else t.push(Ke(i))}return t}class Qe{get(e,t=Be){if(t===Be){const t=new Error(`NullInjectorError: No provider for ${we(e)}!`);throw t.name="NullInjectorError",t}return t}}class Xe{}class Ye{}function et(e,t){e.forEach(e=>Array.isArray(e)?et(e,t):t(e))}function tt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function nt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function it(e,t,n){let i=st(e,t);return i>=0?e[1|i]=n:(i=~i,function(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function rt(e,t){const n=st(e,t);if(n>=0)return e[1|n]}function st(e,t){return function(e,t,n){let i=0,r=e.length>>1;for(;r!==i;){const n=i+(r-i>>1),s=e[n<<1];if(t===s)return n<<1;s>t?r=n:i=n+1}return~(r<<1)}(e,t)}const ot=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),at=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ct={},lt=[];let ut=0;function dt(e){return te(()=>{const t=e.type,n=t.prototype,i={},r={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===ot.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||lt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||at.Emulated,id:"c",styles:e.styles||lt,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.directives,o=e.features,a=e.pipes;return r.id+=ut++,r.inputs=mt(e.inputs,i),r.outputs=mt(e.outputs),o&&o.forEach(e=>e(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(ht):null,r.pipeDefs=a?()=>("function"==typeof a?a():a).map(gt):null,r})}function ht(e){return yt(e)||function(e){return e[Me]||null}(e)}function gt(e){return function(e){return e[Re]||null}(e)}const ft={};function pt(e){const t={type:e.type,bootstrap:e.bootstrap||lt,declarations:e.declarations||lt,imports:e.imports||lt,exports:e.exports||lt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&te(()=>{ft[e.id]=e.type}),t}function mt(e,t){if(null==e)return ct;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,t&&(t[r]=s)}return n}const vt=dt;function yt(e){return e[Te]||null}function bt(e,t){return e.hasOwnProperty(Ne)?e[Ne]:null}function wt(e,t){const n=e[Ee]||null;if(!n&&!0===t)throw new Error(`Type ${we(e)} does not have '\u0275mod' property.`);return n}function _t(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ot(e){return Array.isArray(e)&&!0===e[1]}function It(e){return 0!=(8&e.flags)}function St(e){return 2==(2&e.flags)}function Ct(e){return 1==(1&e.flags)}function At(e){return null!==e.template}function kt(e){return 0!=(512&e[2])}let xt=void 0;function Ut(e){return!!e.listen}const Pt={createRenderer:(e,t)=>void 0!==xt?xt:"undefined"!=typeof document?document:void 0};function Tt(e){for(;Array.isArray(e);)e=e[0];return e}function Mt(e,t){return Tt(t[e+20])}function Rt(e,t){return Tt(t[e.index])}function Et(e,t){return e.data[t+20]}function Ft(e,t){const n=t[e];return _t(n)?n:n[0]}function Nt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Dt(e){return 128==(128&e[2])}function zt(e,t){return null===e||null==t?null:e[t]}function Vt(e){e[18]=0}function Bt(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Lt={lFrame:cn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function jt(){return Lt.bindingsEnabled}function Ht(){return Lt.lFrame.lView}function $t(){return Lt.lFrame.tView}function Gt(e){Lt.lFrame.contextLView=e}function Wt(){return Lt.lFrame.previousOrParentTNode}function qt(e,t){Lt.lFrame.previousOrParentTNode=e,Lt.lFrame.isParent=t}function Kt(){return Lt.lFrame.isParent}function Zt(){return Lt.checkNoChangesMode}function Jt(e){Lt.checkNoChangesMode=e}function Qt(){const e=Lt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Xt(){return Lt.lFrame.bindingIndex}function Yt(){return Lt.lFrame.bindingIndex++}function en(e){const t=Lt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function tn(e,t){const n=Lt.lFrame;n.bindingIndex=n.bindingRootIndex=e,nn(t)}function nn(e){Lt.lFrame.currentDirectiveIndex=e}function rn(e){Lt.lFrame.currentQueryIndex=e}function sn(e,t){const n=an();Lt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function on(e,t){const n=an(),i=e[1];Lt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex}function an(){const e=Lt.lFrame,t=null===e?null:e.child;return null===t?cn(e):t}function cn(e){const t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function ln(){const e=Lt.lFrame;return Lt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}const un=ln;function dn(){const e=ln();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function hn(){return Lt.lFrame.selectedIndex}function gn(e){Lt.lFrame.selectedIndex=e}function fn(){const e=Lt.lFrame;return Et(e.tView,e.selectedIndex)}function pn(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const t=e.data[n];t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked)),t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked)),null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}}function mn(e,t,n){bn(e,t,3,n)}function vn(e,t,n,i){(3&e[2])===n&&bn(e,t,n,i)}function yn(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function bn(e,t,n,i){const r=null!=i?i:-1;let s=0;for(let o=void 0!==i?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(s=t[o],null!=i&&s>=i)break}else t[o]<0&&(e[18]+=65536),(s<r||-1==r)&&(wn(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function wn(e,t,n,i){const r=n[i]<0,s=n[i+1],o=e[r?-n[i]:n[i]];r?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,s.call(o)):s.call(o)}class _n{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function On(e,t,n){const i=Ut(e);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const o=n[r++],a=n[r++],c=n[r++];i?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++r];Sn(o)?i&&e.setProperty(t,o,a):i?e.setAttribute(t,o,a):t.setAttribute(o,a),r++}}return r}function In(e){return 3===e||4===e||6===e}function Sn(e){return 64===e.charCodeAt(0)}function Cn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||An(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function An(e,t,n,i,r){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===i)return void(null!==r&&(e[s+1]=r));if(i===e[s+1])return void(e[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==i&&e.splice(s++,0,i),null!==r&&e.splice(s++,0,r)}function kn(e){return-1!==e}function xn(e){return 32767&e}function Un(e){return e>>16}function Pn(e,t){let n=Un(e),i=t;for(;n>0;)i=i[15],n--;return i}function Tn(e){return"string"==typeof e?e:null==e?"":""+e}function Mn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Tn(e)}const Rn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pe))();function En(e){return e instanceof Function?e():e}let Fn=!0;function Nn(e){const t=Fn;return Fn=e,t}let Dn=0;function zn(e,t){const n=Bn(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,Vn(i.data,e),Vn(t,null),Vn(i.blueprint,null));const r=Ln(e,t),s=e.injectorIndex;if(kn(r)){const e=xn(r),n=Pn(r,t),i=n[1].data;for(let r=0;r<8;r++)t[s+r]=n[e+r]|i[e+r]}return t[s+8]=r,s}function Vn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Bn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Ln(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=t[6],i=1;for(;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,i++;return n?n.injectorIndex|i<<16:-1}function jn(e,t,n){!function(e,t,n){let i="string"!=typeof n?n[De]:n.charCodeAt(0)||0;null==i&&(i=n[De]=Dn++);const r=255&i,s=1<<r,o=64&r,a=32&r,c=t.data;128&r?o?a?c[e+7]|=s:c[e+6]|=s:a?c[e+5]|=s:c[e+4]|=s:o?a?c[e+3]|=s:c[e+2]|=s:a?c[e+1]|=s:c[e]|=s}(e,t,n)}function Hn(e,t,n,i=ae.Default,r){if(null!==e){const r=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e[De];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof r){sn(t,e);try{const e=r();if(null!=e||i&ae.Optional)return e;throw new Error(`No provider for ${Mn(n)}!`)}finally{un()}}else if("number"==typeof r){if(-1===r)return new Zn(e,t);let s=null,o=Bn(e,t),a=-1,c=i&ae.Host?t[16][6]:null;for((-1===o||i&ae.SkipSelf)&&(a=-1===o?Ln(e,t):t[o+8],Kn(i,!1)?(s=t[1],o=xn(a),t=Pn(a,t)):o=-1);-1!==o;){a=t[o+8];const e=t[1];if(qn(r,o,e.data)){const e=Gn(o,t,n,s,i,c);if(e!==$n)return e}Kn(i,t[1].data[o+8]===c)&&qn(r,o,t)?(s=e,o=xn(a),t=Pn(a,t)):o=-1}}}if(i&ae.Optional&&void 0===r&&(r=null),0==(i&(ae.Self|ae.Host))){const e=t[9],s=We(void 0);try{return e?e.get(n,r,i&ae.Optional):Ze(n,r,i&ae.Optional)}finally{We(s)}}if(i&ae.Optional)return r;throw new Error(`NodeInjector: NOT_FOUND [${Mn(n)}]`)}const $n={};function Gn(e,t,n,i,r,s){const o=t[1],a=o.data[e+8],c=function(e,t,n,i,r){const s=e.providerIndexes,o=t.data,a=65535&s,c=e.directiveStart,l=s>>16,u=r?a+l:e.directiveEnd;for(let d=i?a:a+l;d<u;d++){const e=o[d];if(d<c&&n===e||d>=c&&e.type===n)return d}if(r){const e=o[c];if(e&&At(e)&&e.type===n)return c}return null}(a,o,n,null==i?St(a)&&Fn:i!=o&&3===a.type,r&ae.Host&&s===a);return null!==c?Wn(t,o,c,a):$n}function Wn(e,t,n,i){let r=e[n];const s=t.data;if(r instanceof _n){const o=r;if(o.resolving)throw new Error("Circular dep for "+Mn(s[n]));const a=Nn(o.canSeeViewProviders);let c;o.resolving=!0,o.injectImpl&&(c=We(o.injectImpl)),sn(e,i);try{r=e[n]=o.factory(void 0,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&function(e,t,n){const{onChanges:i,onInit:r,doCheck:s}=t;i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i)),r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{o.injectImpl&&We(c),Nn(a),o.resolving=!1,un()}}return r}function qn(e,t,n){const i=64&e,r=32&e;let s;return s=128&e?i?r?n[t+7]:n[t+6]:r?n[t+5]:n[t+4]:i?r?n[t+3]:n[t+2]:r?n[t+1]:n[t],!!(s&1<<e)}function Kn(e,t){return!(e&ae.Self||e&ae.Host&&t)}class Zn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Hn(this._tNode,this._lView,e,void 0,t)}}function Jn(e){return te(()=>{const t=Object.getPrototypeOf(e.prototype).constructor,n=t[Ne]||function e(t){const n=t;if(Ce(t))return()=>{const t=e(Se(n));return t?t():null};let i=bt(n);if(null===i){const e=fe(n);i=e&&e.factory}return i||null}(t);return null!==n?n:e=>new e})}function Qn(e){return e.ngDebugContext}function Xn(e){return e.ngOriginalError}function Yn(e,...t){e.error(...t)}class ei{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e.ngErrorLogger||Yn}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Qn(e)?Qn(e):this._findContext(Xn(e)):null}_findOriginalError(e){let t=Xn(e);for(;t&&Xn(t);)t=Xn(t);return t}}class ti{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}function ni(e){return e instanceof ti?e.changingThisBreaksApplicationSecurity:e}let ii=!0,ri=!1;function si(){return ri=!0,ii}const oi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ai=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,ci=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();function li(e){const t=function(){const e=Ht();return e&&e[12]}();return t?t.sanitize(ci.URL,e)||"":function(e,t){const n=function(e){return e instanceof ti&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===t}(e,"URL")?ni(e):(n=Tn(e),(n=String(n)).match(oi)||n.match(ai)?n:(si()&&console.warn(`WARNING: sanitizing unsafe URL value ${n} (see http://g.co/ng/security#xss)`),"unsafe:"+n));var n}function ui(e,t){e.__ngContext__=t}function di(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function hi(){throw new Error("Cannot mix multi providers and regular providers")}function gi(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const n=t.length;if(r+n===i||e.charCodeAt(r+n)<=32)return r}n=r+1}}function fi(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==gi(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function pi(e){return 0===e.type&&"ng-template"!==e.tagName}function mi(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function vi(e,t,n){let i=4;const r=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(In(e[t]))return t;return e.length}(r);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!mi(e,c,n)||""===c&&1===t.length){if(yi(i))return!1;o=!0}}else{const l=8&i?c:t[++a];if(8&i&&null!==e.attrs){if(!fi(e.attrs,l,n)){if(yi(i))return!1;o=!0}continue}const u=bi(8&i?"class":c,r,pi(e),n);if(-1===u){if(yi(i))return!1;o=!0;continue}if(""!==l){let e;e=u>s?"":r[u+1].toLowerCase();const t=8&i?e:null;if(t&&-1!==gi(t,l,0)||2&i&&l!==e){if(yi(i))return!1;o=!0}}}}else{if(!o&&!yi(i)&&!yi(c))return!1;if(o&&yi(c))continue;o=!1,i=c|1&i}}return yi(i)||o}function yi(e){return 0==(1&e)}function bi(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let n=!1;for(;r<t.length;){const i=t[r];if(i===e)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let e=t[++r];for(;"string"==typeof e;)e=t[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function wi(e,t,n=!1){for(let i=0;i<t.length;i++)if(vi(e,t[i],n))return!0;return!1}function _i(e,t){return e?":not("+t.trim()+")":t}function Oi(e){let t=e[0],n=1,i=2,r="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&i){const t=e[++n];r+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""===r||yi(o)||(t+=_i(s,r),r=""),i=o,s=s||!yi(i);n++}return""!==r&&(t+=_i(s,r)),t}const Ii={};function Si(e){const t=e[3];return Ot(t)?t[3]:t}function Ci(e){return ki(e[13])}function Ai(e){return ki(e[4])}function ki(e){for(;null!==e&&!Ot(e);)e=e[4];return e}function xi(e){Ui($t(),Ht(),hn()+e,Zt())}function Ui(e,t,n,i){if(!i)if(3==(3&t[2])){const i=e.preOrderCheckHooks;null!==i&&mn(t,i,n)}else{const i=e.preOrderHooks;null!==i&&vn(t,i,0,n)}gn(n)}function Pi(e,t){return e<<17|t<<2}function Ti(e){return e>>17&32767}function Mi(e){return 2|e}function Ri(e){return(131068&e)>>2}function Ei(e,t){return-131069&e|t<<2}function Fi(e){return 1|e}function Ni(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const n=e.data[s];rn(r),n.contentQueries(2,t[s],s)}}}function Di(e,t,n){return Ut(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function zi(e,t,n,i,r,s,o,a,c,l){const u=t.blueprint.slice();return u[0]=r,u[2]=140|i,Vt(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=c||e&&e[12]||null,u[9]=l||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function Vi(e,t,n,i,r,s){const o=n+20,a=e.data[o]||function(e,t,n,i,r,s){const o=Wt(),a=Kt(),c=a?o:o&&o.parent,l=e.data[n]=Ki(0,c&&c!==t?c:null,i,n,r,s);return null===e.firstChild&&(e.firstChild=l),o&&(!a||null!=o.child||null===l.parent&&2!==o.type?a||(o.next=l):o.child=l),l}(e,t,o,i,r,s);return qt(a,!0),a}function Bi(e,t,n){on(t,t[6]);try{const i=e.viewQuery;null!==i&&mr(1,i,n);const r=e.template;null!==r&&Hi(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ni(e,t),e.staticViewQueries&&mr(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)dr(e,t[n])}(t,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),i}finally{t[2]&=-5,dn()}}function Li(e,t,n,i){const r=t[2];if(256==(256&r))return;on(t,t[6]);const s=Zt();try{Vt(t),Lt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Hi(e,t,n,2,i);const o=3==(3&r);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&mn(t,n,null)}else{const n=e.preOrderHooks;null!==n&&vn(t,n,0,null),yn(t,0)}if(function(e){for(let t=Ci(e);null!==t;t=Ai(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],i=n[3];0==(1024&n[2])&&Bt(i,1),n[2]|=1024}}}(t),function(e){for(let t=Ci(e);null!==t;t=Ai(t))for(let e=10;e<t.length;e++){const n=t[e],i=n[1];Dt(n)&&Li(i,n,i.template,n[8])}}(t),null!==e.contentQueries&&Ni(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&mn(t,n)}else{const n=e.contentHooks;null!==n&&vn(t,n,1),yn(t,1)}!function(e,t){try{const n=e.expandoInstructions;if(null!==n){let i=e.expandoStartIndex,r=-1,s=-1;for(let e=0;e<n.length;e++){const o=n[e];"number"==typeof o?o<=0?(s=0-o,gn(s),i+=9+n[++e],r=i):i+=o:(null!==o&&(tn(i,r),o(2,t[r])),r++)}}}finally{gn(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)ur(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&mr(2,c,i),!s)if(o){const n=e.viewCheckHooks;null!==n&&mn(t,n)}else{const n=e.viewHooks;null!==n&&vn(t,n,2),yn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Bt(t[3],-1))}finally{dn()}}function ji(e,t,n,i){const r=t[10],s=!Zt(),o=4==(4&t[2]);try{s&&!o&&r.begin&&r.begin(),o&&Bi(e,t,i),Li(e,t,n,i)}finally{s&&!o&&r.end&&r.end()}}function Hi(e,t,n,i,r){const s=hn();try{gn(-1),2&i&&t.length>20&&Ui(e,t,0,Zt()),n(i,r)}finally{gn(s)}}function $i(e,t,n){jt()&&(function(e,t,n,i){const r=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||zn(n,t),ui(i,t);const o=n.initialInputs;for(let a=r;a<s;a++){const i=e.data[a],s=At(i);s&&or(t,n,i);const c=Wn(t,e,a,n);ui(c,t),null!==o&&ar(0,a-r,c,i,0,o),s&&(Ft(n.index,t)[8]=c)}}(e,t,n,Rt(n,t)),128==(128&n.flags)&&function(e,t,n){const i=n.directiveStart,r=n.directiveEnd,s=e.expandoInstructions,o=e.firstCreatePass,a=n.index-20,c=Lt.lFrame.currentDirectiveIndex;try{gn(a);for(let n=i;n<r;n++){const i=e.data[n],r=t[n];nn(n),null!==i.hostBindings||0!==i.hostVars||null!==i.hostAttrs?er(i,r):o&&s.push(null)}}finally{gn(-1),nn(c)}}(e,t,n))}function Gi(e,t,n=Rt){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(t,e):e[o];e[r++]=a}}}function Wi(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=qi(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function qi(e,t,n,i,r,s,o,a,c,l){const u=20+i,d=u+r,h=function(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:Ii);return n}(u,d);return h[1]={type:e,id:t,blueprint:h,template:n,queries:null,viewQuery:a,node:null,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:l,incompleteFirstPass:!1}}function Ki(e,t,n,i,r,s){return{type:n,index:i,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Zi(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function Ji(e,t,n,i,r,s,o,a){const c=Rt(t,n);let l,u=t.inputs;var d;!a&&null!=u&&(l=u[i])?(wr(e,n,l,i,r),St(t)&&function(e,t){const n=Ft(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(i="class"===(d=i)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,r=null!=o?o(r,t.tagName||"",i):r,Ut(s)?s.setProperty(c,i,r):Sn(i)||(c.setProperty?c.setProperty(i,r):c[i]=r))}function Qi(e,t,n,i){let r=!1;if(jt()){const s=function(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];wi(n,o.selectors,!1)&&(r||(r=[]),jn(zn(n,t),e,o.type),At(o)?(2&n.flags&&di(n),nr(e,n),r.unshift(o)):r.push(o))}return r}(e,t,n),o=null===i?null:{"":-1};if(null!==s){let i=0;r=!0,rr(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}tr(e,n,s.length);let a=!1,c=!1;for(let r=0;r<s.length;r++){const l=s[r];n.mergedAttrs=Cn(n.mergedAttrs,l.hostAttrs),sr(e,t,l),ir(e.data.length-1,l,o),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128),!a&&(l.onChanges||l.onInit||l.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-20),a=!0),c||!l.onChanges&&!l.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-20),c=!0),Xi(e,l),i+=l.hostVars}!function(e,t){const n=t.directiveEnd,i=e.data,r=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=i[c],n=e.inputs,l=null===r||pi(t)?null:cr(n,r);s.push(l),o=Zi(n,c,o),a=Zi(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n),Yi(e,t,i)}o&&function(e,t,n){if(t){const i=e.localNames=[];for(let e=0;e<t.length;e+=2){const r=n[t[e+1]];if(null==r)throw new Error(`Export of name '${t[e+1]}' not found!`);i.push(t[e],r)}}}(n,i,o)}return n.mergedAttrs=Cn(n.mergedAttrs,n.attrs),r}function Xi(e,t){const n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Yi(e,t,n){for(let i=0;i<n;i++)t.push(Ii),e.blueprint.push(Ii),e.data.push(null)}function er(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function tr(e,t,n){const i=20-t.index,r=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(i,r,n)}function nr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ir(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;At(t)&&(n[""]=e)}}function rr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function sr(e,t,n){e.data.push(n);const i=n.factory||(n.factory=bt(n.type)),r=new _n(i,At(n),null);e.blueprint.push(r),t.push(r)}function or(e,t,n){const i=Rt(t,e),r=Wi(n),s=e[10],o=hr(e,zi(e,r,null,n.onPush?64:16,i,t,s,s.createRenderer(i,n)));e[t.index]=o}function ar(e,t,n,i,r,s){const o=s[t];if(null!==o){const e=i.setInput;for(let t=0;t<o.length;){const r=o[t++],s=o[t++],a=o[t++];null!==e?i.setInput(n,a,r,s):n[s]=a}}}function cr(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function lr(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function ur(e,t){const n=Ft(t,e);if(Dt(n)){const e=n[1];80&n[2]?Li(e,n,e.template,n[8]):n[5]>0&&function e(t){for(let i=Ci(t);null!==i;i=Ai(i))for(let t=10;t<i.length;t++){const n=i[t];if(1024&n[2]){const e=n[1];Li(e,n,e.template,n[8])}else n[5]>0&&e(n)}const n=t[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=Ft(n[i],t);Dt(r)&&r[5]>0&&e(r)}}(n)}}function dr(e,t){const n=Ft(t,e),i=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(i,n),Bi(i,n,n[8])}function hr(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function gr(e){for(;e;){e[2]|=64;const t=Si(e);if(kt(e)&&!t)return e;e=t}return null}function fr(e,t,n){const i=t[10];i.begin&&i.begin();try{Li(e,t,e.template,n)}catch(r){throw br(t,r),r}finally{i.end&&i.end()}}function pr(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],i=Nt(n),r=i[1];ji(r,i,r.template,n)}}(e[8])}function mr(e,t,n){rn(0),t(e,n)}const vr=(()=>Promise.resolve(null))();function yr(e){return e[7]||(e[7]=[])}function br(e,t){const n=e[9],i=n?n.get(ei,null):null;i&&i.handleError(t)}function wr(e,t,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],l=e.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function _r(e,t,n){const i=Mt(t,e),r=e[11];Ut(r)?r.setValue(i,n):i.textContent=n}function Or(e,t){const n=t[3];return-1===e.index?Ot(n)?n:null:n}function Ir(e,t){const n=Or(e,t);return n?Er(t[11],n[7]):null}function Sr(e,t,n,i,r){if(null!=i){let s,o=!1;Ot(i)?s=i:_t(i)&&(o=!0,i=i[0]);const a=Tt(i);0===e&&null!==n?null==r?Mr(t,n,a):Tr(t,n,a,r||null):1===e&&null!==n?Tr(t,n,a,r||null):2===e?function(e,t,n){const i=Er(e,t);i&&function(e,t,n,i){Ut(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,i,r){const s=n[7];s!==Tt(n)&&Sr(t,e,i,s,r);for(let o=10;o<n.length;o++){const r=n[o];zr(r[1],r,e,t,i,s)}}(t,e,s,n,r)}}function Cr(e,t,n,i){const r=Ir(e.node,t);r&&zr(e,t,t[11],n?1:2,r,i)}function Ar(e,t){const n=e[9],i=n.indexOf(t);1024&t[2]&&Bt(t[3],-1),n.splice(i,1)}function kr(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const r=i[17];null!==r&&r!==e&&Ar(r,i),t>0&&(e[n-1][4]=i[4]);const s=nt(e,10+t);Cr(i[1],i,!1,null);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function xr(e,t){if(!(256&t[2])){const n=t[11];Ut(n)&&n.destroyNode&&zr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Pr(e[1],e);for(;t;){let n=null;if(_t(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)_t(t)&&Pr(t[1],t),t=Ur(t,e);null===t&&(t=e),_t(t)&&Pr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ur(e,t){let n;return _t(e)&&(n=e[6])&&2===n.type?Or(n,e):e[3]===t?null:e[3]}function Pr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const e=t[n[i]];if(!(e instanceof _n)){const t=n[i+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2)t[n+1].call(e[t[n]]);else t.call(e)}}}(e,t),function(e,t){const n=e.cleanup;if(null!==n){const e=t[7];for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const r=n[i+1],s="function"==typeof r?r(t):Tt(t[r]),o=e[n[i+2]],a=n[i+3];"boolean"==typeof a?s.removeEventListener(n[i],o,a):a>=0?e[a]():e[-a].unsubscribe(),i+=2}else n[i].call(e[n[i+1]]);t[7]=null}}(e,t);const n=t[6];n&&3===n.type&&Ut(t[11])&&t[11].destroy();const i=t[17];if(null!==i&&Ot(t[3])){i!==t[3]&&Ar(i,t);const n=t[19];null!==n&&n.detachView(e)}}}function Tr(e,t,n,i){Ut(e)?e.insertBefore(t,n,i):t.insertBefore(n,i,!0)}function Mr(e,t,n){Ut(e)?e.appendChild(t,n):t.appendChild(n)}function Rr(e,t,n,i){null!==i?Tr(e,t,n,i):Mr(e,t,n)}function Er(e,t){return Ut(e)?e.parentNode(t):t.parentNode}function Fr(e,t,n,i){const r=function(e,t,n){let i=t.parent;for(;null!=i&&(4===i.type||5===i.type);)i=(t=i).parent;if(null==i){const e=n[6];return 2===e.type?Ir(e,n):n[0]}if(t&&5===t.type&&4&t.flags)return Rt(t,n).parentNode;if(2&i.flags){const t=e.data,n=t[t[i.index].directiveStart].encapsulation;if(n!==at.ShadowDom&&n!==at.Native)return null}return Rt(i,n)}(e,i,t);if(null!=r){const e=t[11],s=function(e,t){if(2===e.type){const n=Or(e,t);return null===n?null:Nr(n.indexOf(t,10)-10,n)}return 4===e.type||5===e.type?Rt(e,t):null}(i.parent||t[6],t);if(Array.isArray(n))for(let t=0;t<n.length;t++)Rr(e,r,n[t],s);else Rr(e,r,n,s)}}function Nr(e,t){const n=10+e+1;if(n<t.length){const e=t[n],i=e[1].firstChild;if(null!==i)return function e(t,n){if(null!==n){const i=n.type;if(3===i)return Rt(n,t);if(0===i)return Nr(-1,t[n.index]);if(4===i||5===i){const i=n.child;if(null!==i)return e(t,i);{const e=t[n.index];return Ot(e)?Nr(-1,e):Tt(e)}}{const i=t[16],r=i[6],s=Si(i),o=r.projection[n.projection];return null!=o?e(s,o):e(t,n.next)}}return null}(e,i)}return t[7]}function Dr(e,t,n,i,r,s,o){for(;null!=n;){const a=i[n.index],c=n.type;o&&0===t&&(a&&ui(Tt(a),i),n.flags|=4),64!=(64&n.flags)&&(4===c||5===c?(Dr(e,t,n.child,i,r,s,!1),Sr(t,e,r,a,s)):1===c?Vr(e,t,i,n,r,s):Sr(t,e,r,a,s)),n=o?n.projectionNext:n.next}}function zr(e,t,n,i,r,s){Dr(n,i,e.node.child,t,r,s,!1)}function Vr(e,t,n,i,r,s){const o=n[16],a=o[6].projection[i.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Sr(t,e,r,a[c],s);else Dr(e,t,a,o[3],r,s,!0)}function Br(e,t,n){Ut(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Lr(e,t,n){Ut(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}class jr{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const e=this._lView;return null==e[0]?function e(t,n,i,r,s=!1){for(;null!==i;){const o=n[i.index];if(null!==o&&r.push(Tt(o)),Ot(o))for(let t=10;t<o.length;t++){const n=o[t],i=n[1].firstChild;null!==i&&e(n[1],n,i,r)}const a=i.type;if(4===a||5===a)e(t,n,i.child,r);else if(1===a){const t=n[16],s=t[6].projection[i.projection];if(Array.isArray(s))r.push(...s);else{const n=Si(t);e(n[1],n,s,r,!0)}}i=s?i.projectionNext:i.next}return r}(e[1],e,e[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}xr(this._lView[1],this._lView)}onDestroy(e){var t,n,i;t=this._lView[1],i=e,yr(n=this._lView).push(i),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(n[7].length-1,null)}markForCheck(){gr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Jt(!0);try{fr(e,t,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,zr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Hr extends jr{constructor(e){super(e),this._view=e}detectChanges(){pr(this._view)}checkNoChanges(){!function(e){Jt(!0);try{pr(e)}finally{Jt(!1)}}(this._view)}get context(){return null}}let $r,Gr,Wr;function qr(e,t,n){return $r||($r=class extends e{}),new $r(Rt(t,n))}let Kr=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Zr(),e})();const Zr=function(e=!1){return function(e,t,n){if(!n&&St(e)){const n=Ft(e.index,t);return new jr(n,n)}return 3===e.type||0===e.type||4===e.type||5===e.type?new jr(t[16],t):null}(Wt(),Ht(),e)},Jr=new ze("Set Injector scope."),Qr={},Xr={},Yr=[];let es=void 0;function ts(){return void 0===es&&(es=new Qe),es}function ns(e,t=null,n=null,i){return new is(e,n,t||ts(),i)}class is{constructor(e,t,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];t&&et(t,n=>this.processProvider(n,e,t)),et([e],e=>this.processInjectorType(e,[],r)),this.records.set(Ve,os(void 0,this));const s=this.records.get(Jr);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof e?null:we(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Be,n=ae.Default){this.assertNotDestroyed();const i=Ge(this);try{if(!(n&ae.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(r=e)||"object"==typeof r&&r instanceof ze)&&he(e);t=n&&this.injectableDefInScope(n)?os(rs(e),Qr):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&ae.Self?ts():this.parent).get(e,t=n&ae.Optional&&t===Be?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(we(e)),i)throw s;return function(e,t,n,i){const r=e.ngTempTokenPath;throw t.__source&&r.unshift(t.__source),e.message=function(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let r=we(t);if(Array.isArray(t))r=t.map(we).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push(n+":"+("string"==typeof i?JSON.stringify(i):we(i)))}r=`{${e.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(Le,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{Ge(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(we(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=Se(e)))return!1;let i=fe(e);const r=null==i&&e.ngModule||void 0,s=void 0===r?e:r,o=-1!==n.indexOf(s);if(void 0!==r&&(i=fe(r)),null==i)return!1;if(null!=i.imports&&!o){let e;n.push(s);try{et(i.imports,i=>{this.processInjectorType(i,t,n)&&(void 0===e&&(e=[]),e.push(i))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:i}=e[t];et(i,e=>this.processProvider(e,n,i||Yr))}}this.injectorDefTypes.add(s),this.records.set(s,os(i.factory,Qr));const a=i.providers;if(null!=a&&!o){const t=e;et(a,e=>this.processProvider(e,t,a))}return void 0!==r&&void 0!==e.providers}processProvider(e,t,n){let i=cs(e=Se(e))?e:Se(e&&e.provide);const r=function(e,t,n){return as(e)?os(void 0,e.useValue):os(ss(e,t,n),Qr)}(e,t,n);if(cs(e)||!0!==e.multi){const e=this.records.get(i);e&&void 0!==e.multi&&hi()}else{let t=this.records.get(i);t?void 0===t.multi&&hi():(t=os(void 0,Qr,!0),t.factory=()=>Je(t.multi),this.records.set(i,t)),i=e,t.multi.push(e)}this.records.set(i,r)}hydrate(e,t){var n;return t.value===Xr?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(we(e)):t.value===Qr&&(t.value=Xr,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function rs(e){const t=he(e),n=null!==t?t.factory:bt(e);if(null!==n)return n;const i=fe(e);if(null!==i)return i.factory;if(e instanceof ze)throw new Error(`Token ${we(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let i=0;i<e;i++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${we(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[pe]||e[ye]||e[ve]&&e[ve]());if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ss(e,t,n){let i=void 0;if(cs(e)){const t=Se(e);return bt(t)||rs(t)}if(as(e))i=()=>Se(e.useValue);else if((r=e)&&r.useFactory)i=()=>e.useFactory(...Je(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))i=()=>Ke(Se(e.useExisting));else{const r=Se(e&&(e.useClass||e.provide));if(r||function(e,t,n){let i="";throw e&&t&&(i=` - only instances of Provider and Type are allowed, got: [${t.map(e=>e==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${we(e)}'`+i)}(t,n,e),!function(e){return!!e.deps}(e))return bt(r)||rs(r);i=()=>new r(...Je(e.deps))}var r;return i}function os(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function as(e){return null!==e&&"object"==typeof e&&je in e}function cs(e){return"function"==typeof e}const ls=function(e,t,n){return function(e,t=null,n=null,i){const r=ns(e,t,n,i);return r._resolveInjectorDefTypes(),r}({name:n},t,e,n)};let us=(()=>{class e{static create(e,t){return Array.isArray(e)?ls(e,t,""):ls(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Be,e.NULL=new Qe,e.\u0275prov=ue({token:e,providedIn:"any",factory:()=>Ke(Ve)}),e.__NG_ELEMENT_ID__=-1,e})();const ds=new ze("AnalyzeForEntryComponents");let hs=new Map;const gs=new Set;function fs(e){return"string"==typeof e?e:e.text()}function ps(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?r=_e(r,e):2==s&&(i=_e(i,e+": "+t[++o]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}let ms=null;function vs(){if(!ms){const e=Pe.Symbol;if(e&&e.iterator)ms=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ms=n)}}}return ms}function ys(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function bs(e){return!!ws(e)&&(Array.isArray(e)||!(e instanceof Map)&&vs()in e)}function ws(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function _s(e,t,n){return e[t]=n}function Os(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Is(e,t,n,i){const r=Os(e,t,n);return Os(e,t+1,i)||r}function Ss(e,t,n,i){const r=Ht();return Os(r,Yt(),t)&&($t(),function(e,t,n,i,r,s){const o=Rt(e,t),a=t[11];if(null==i)Ut(a)?a.removeAttribute(o,n,s):o.removeAttribute(n);else{const t=null==r?Tn(i):r(i,e.tagName||"",n);Ut(a)?a.setAttribute(o,n,t,s):s?o.setAttributeNS(s,n,t):o.setAttribute(n,t)}}(fn(),r,e,t,n,i)),Ss}function Cs(e,t,n,i){return Os(e,Yt(),n)?t+Tn(n)+i:Ii}function As(e,t,n,i,r,s,o,a){const c=Ht(),l=$t(),u=e+20,d=l.firstCreatePass?function(e,t,n,i,r,s,o,a,c){const l=t.consts,u=Vi(t,n[6],e,0,o||null,zt(l,a));Qi(t,n,u,zt(l,c)),pn(t,u);const d=u.tViews=qi(2,-1,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l),h=Ki(0,null,2,-1,null,null);return h.injectorIndex=u.injectorIndex,d.node=h,null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(e,l,c,t,n,i,r,s,o):l.data[u];qt(d,!1);const h=c[11].createComment("");Fr(l,c,h,d),ui(h,c),hr(c,c[u]=lr(h,c,h,d)),Ct(d)&&$i(l,c,d),null!=o&&Gi(c,d,a)}function ks(e){return function(e,t){return e[t+20]}(Lt.lFrame.contextLView,e)}function xs(e,t=ae.Default){const n=Ht();return null==n?Ke(e,t):Hn(Wt(),n,Se(e),t)}function Us(){throw new Error("invalid")}function Ps(e,t,n){const i=Ht();return Os(i,Yt(),t)&&Ji($t(),fn(),i,e,t,i[11],n,!1),Ps}function Ts(e,t,n,i,r){const s=r?"class":"style";wr(e,n,t.inputs[s],s,i)}function Ms(e,t,n,i){const r=Ht(),s=$t(),o=20+e,a=r[11],c=r[o]=Di(t,a,Lt.lFrame.currentNamespace),l=s.firstCreatePass?function(e,t,n,i,r,s,o){const a=t.consts,c=zt(a,s),l=Vi(t,n[6],e,3,r,c);return Qi(t,n,l,zt(a,o)),null!==l.attrs&&ps(l,l.attrs,!1),null!==l.mergedAttrs&&ps(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(e,s,r,0,t,n,i):s.data[o];qt(l,!0);const u=l.mergedAttrs;null!==u&&On(a,c,u);const d=l.classes;null!==d&&Lr(a,c,d);const h=l.styles;null!==h&&Br(a,c,h),Fr(s,r,c,l),0===Lt.lFrame.elementDepthCount&&ui(c,r),Lt.lFrame.elementDepthCount++,Ct(l)&&($i(s,r,l),function(e,t,n){if(It(t)){const i=t.directiveEnd;for(let r=t.directiveStart;r<i;r++){const t=e.data[r];t.contentQueries&&t.contentQueries(1,n[r],r)}}}(s,l,r)),null!==i&&Gi(r,l)}function Rs(){let e=Wt();Kt()?Lt.lFrame.isParent=!1:(e=e.parent,qt(e,!1));const t=e;Lt.lFrame.elementDepthCount--;const n=$t();n.firstCreatePass&&(pn(n,e),It(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ts(n,t,Ht(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ts(n,t,Ht(),t.stylesWithoutHost,!1)}function Es(e,t,n,i){Ms(e,t,n,i),Rs()}function Fs(){return Ht()}function Ns(e){return!!e&&"function"==typeof e.then}function Ds(e){return!!e&&"function"==typeof e.subscribe}function zs(e,t,n=!1,i){const r=Ht(),s=$t(),o=Wt();return function(e,t,n,i,r,s,o=!1,a){const c=Ct(i),l=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),u=yr(t);let d=!0;if(3===i.type){const h=Rt(i,t),g=a?a(h):ct,f=g.target||h,p=u.length,m=a?e=>a(Tt(e[i.index])).target:i.index;if(Ut(n)){let o=null;if(!a&&c&&(o=function(e,t,n,i){const r=e.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const e=r[s];if(e===n&&r[s+1]===i){const e=t[7],n=r[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,r,i.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,d=!1;else{s=Bs(i,t,s,!1);const e=n.listen(g.name||f,r,s);u.push(s,e),l&&l.push(r,m,p,p+1)}}else s=Bs(i,t,s,!0),f.addEventListener(r,s,o),u.push(s),l&&l.push(r,m,p,o)}const h=i.outputs;let g;if(d&&null!==h&&(g=h[r])){const e=g.length;if(e)for(let n=0;n<e;n+=2){const e=t[g[n]][g[n+1]].subscribe(s),o=u.length;u.push(s,e),l&&l.push(r,i.index,o,-(o+1))}}}(s,r,r[11],o,e,t,n,i),zs}function Vs(e,t,n){try{return!1!==t(n)}catch(i){return br(e,i),!1}}function Bs(e,t,n,i){return function r(s){if(s===Function)return n;const o=2&e.flags?Ft(e.index,t):t;0==(32&t[2])&&gr(o);let a=Vs(t,n,s),c=r.__ngNextListenerFn__;for(;c;)a=Vs(t,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Ls(e=1){return function(e){return(Lt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Lt.lFrame.contextLView))[8]}(e)}function js(e,t,n){return Hs(e,"",t,"",n),js}function Hs(e,t,n,i,r){const s=Ht(),o=Cs(s,t,n,i);return o!==Ii&&Ji($t(),fn(),s,e,o,s[11],r,!1),Hs}const $s=[];function Gs(e,t,n,i,r){const s=e[n+1],o=null===t;let a=i?Ti(s):Ri(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];Ws(e[a],t)&&(c=!0,e[a+1]=i?Fi(n):Mi(n)),a=i?Ti(n):Ri(n)}c&&(e[n+1]=i?Mi(s):Fi(s))}function Ws(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&st(e,t)>=0}function qs(e,t){return function(e,t,n,i){const r=Ht(),s=$t(),o=en(2);if(s.firstUpdatePass&&function(e,t,n,i){const r=e.data;if(null===r[n+1]){const i=r[hn()+20],s=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(i)&&null===t&&!s&&(t=!1),t=function(e,t,n,i){const r=function(e){const t=Lt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=t.residualClasses;if(null===r)0===t.classBindings&&(n=Zs(n=Ks(null,e,t,n,!0),t.attrs,!0),s=null);else{const i=t.directiveStylingLast;if(-1===i||e[i]!==r)if(n=Ks(r,e,t,n,!0),null===s){let n=function(e,t,n){const i=t.classBindings;if(0!==Ri(i))return e[Ti(i)]}(e,t);void 0!==n&&Array.isArray(n)&&(n=Ks(null,e,t,n[1],!0),n=Zs(n,t.attrs,!0),function(e,t,n,i){e[Ti(t.classBindings)]=i}(e,t,0,n))}else s=function(e,t,n){let i=void 0;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=Zs(i,e[s].hostAttrs,!0);return Zs(i,t.attrs,!0)}(e,t)}return void 0!==s&&(t.residualClasses=s),n}(r,i,t),function(e,t,n,i,r,s){let o=t.classBindings,a=Ti(o),c=Ri(o);e[i]=n;let l,u=!1;if(Array.isArray(n)){const e=n;l=e[1],(null===l||st(e,l)>0)&&(u=!0)}else l=n;if(r)if(0!==c){const t=Ti(e[a+1]);e[i+1]=Pi(t,a),0!==t&&(e[t+1]=Ei(e[t+1],i)),e[a+1]=131071&e[a+1]|i<<17}else e[i+1]=Pi(a,0),0!==a&&(e[a+1]=Ei(e[a+1],i)),a=i;else e[i+1]=Pi(c,0),0===a?a=i:e[c+1]=Ei(e[c+1],i),c=i;u&&(e[i+1]=Mi(e[i+1])),Gs(e,l,i,!0),Gs(e,l,i,!1),function(e,t,n,i,r){const s=e.residualClasses;null!=s&&"string"==typeof t&&st(s,t)>=0&&(n[i+1]=Fi(n[i+1]))}(t,l,e,i),o=Pi(a,c),t.classBindings=o}(r,i,t,n,s)}}(s,e,o),t!==Ii&&Os(r,o,t)){let i;null==n&&(i=function(){const e=Lt.lFrame;return null===e?null:e.currentSanitizer}())&&(n=i),function(e,t,n,i,r,s,o,a){if(3!==t.type)return;const c=e.data,l=c[a+1];Qs(1==(1&l)?Js(c,t,n,r,Ri(l),!0):void 0)||(Qs(s)||function(e){return 2==(2&e)}(l)&&(s=Js(c,null,n,r,a,!0)),function(e,t,n,i,r){const s=Ut(e);r?s?e.addClass(n,i):n.classList.add(i):s?e.removeClass(n,i):n.classList.remove(i)}(i,0,Mt(hn(),n),r,s))}(s,s.data[hn()+20],r,r[11],e,r[o+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=we(ni(e)))),e}(t,n),0,o)}}(e,t,null),qs}function Ks(e,t,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],i=Zs(i,s.hostAttrs,r),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function Zs(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),it(e,o,!!n||t[++s]))}return void 0===e?null:e}function Js(e,t,n,i,r,s){const o=null===t;let a=void 0;for(;r>0;){const t=e[r],s=Array.isArray(t),c=s?t[1]:t,l=null===c;let u=n[r+1];u===Ii&&(u=l?$s:void 0);let d=l?rt(u,i):c===i?u:void 0;if(s&&!Qs(d)&&(d=rt(t,i)),Qs(d)&&(a=d,o))return a;const h=e[r+1];r=o?Ti(h):Ri(h)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=rt(e,i))}return a}function Qs(e){return void 0!==e}function Xs(e,t=""){const n=Ht(),i=$t(),r=e+20,s=i.firstCreatePass?Vi(i,n[6],e,3,null,null):i.data[r],o=n[r]=function(e,t){return Ut(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Fr(i,n,o,s),qt(s,!1)}function Ys(e){return eo("",e,""),Ys}function eo(e,t,n){const i=Ht(),r=Cs(i,e,t,n);return r!==Ii&&_r(i,hn(),r),eo}function to(e,t,n,i,r){const s=Ht(),o=function(e,t,n,i,r,s){const o=Is(e,Xt(),n,r);return en(2),o?t+Tn(n)+i+Tn(r)+s:Ii}(s,e,t,n,i,r);return o!==Ii&&_r(s,hn(),o),to}function no(e,t,n,i,r,s,o){const a=Ht(),c=function(e,t,n,i,r,s,o,a){const c=function(e,t,n,i,r){const s=Is(e,t,n,i);return Os(e,t+2,r)||s}(e,Xt(),n,r,o);return en(3),c?t+Tn(n)+i+Tn(r)+s+Tn(o)+a:Ii}(a,e,t,n,i,r,s,o);return c!==Ii&&_r(a,hn(),c),no}function io(e,t,n){const i=Ht();return Os(i,Yt(),t)&&Ji($t(),fn(),i,e,t,i[11],n,!0),io}function ro(e,t){const n=Nt(e)[1],i=n.data.length-1;pn(n,{directiveStart:i,directiveEnd:i+1})}function so(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const i=[e];for(;t;){let r=void 0;if(At(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");r=t.\u0275dir}if(r){if(n){i.push(r);const t=e;t.inputs=oo(e.inputs),t.declaredInputs=oo(e.declaredInputs),t.outputs=oo(e.outputs);const n=r.hostBindings;n&&lo(e,n);const s=r.viewQuery,o=r.contentQueries;if(s&&ao(e,s),o&&co(e,o),le(e.inputs,r.inputs),le(e.declaredInputs,r.declaredInputs),le(e.outputs,r.outputs),At(r)&&r.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(r.data.animation)}t.afterContentChecked=t.afterContentChecked||r.afterContentChecked,t.afterContentInit=e.afterContentInit||r.afterContentInit,t.afterViewChecked=e.afterViewChecked||r.afterViewChecked,t.afterViewInit=e.afterViewInit||r.afterViewInit,t.doCheck=e.doCheck||r.doCheck,t.onDestroy=e.onDestroy||r.onDestroy,t.onInit=e.onInit||r.onInit}const t=r.features;if(t)for(let i=0;i<t.length;i++){const r=t[i];r&&r.ngInherit&&r(e),r===so&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Cn(r.hostAttrs,n=Cn(n,r.hostAttrs))}}(i)}function oo(e){return e===ct?{}:e===lt?[]:e}function ao(e,t){const n=e.viewQuery;e.viewQuery=n?(e,i)=>{t(e,i),n(e,i)}:t}function co(e,t){const n=e.contentQueries;e.contentQueries=n?(e,i,r)=>{t(e,i,r),n(e,i,r)}:t}function lo(e,t){const n=e.hostBindings;e.hostBindings=n?(e,i)=>{t(e,i),n(e,i)}:t}class uo{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ho(e){e.type.prototype.ngOnChanges&&(e.setInput=go,e.onChanges=function(){const e=fo(this),t=e&&e.current;if(t){const n=e.previous;if(n===ct)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}})}function go(e,t,n,i){const r=fo(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ct,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],c=o[a];s[a]=new uo(c&&c.currentValue,t,o===ct),e[i]=t}function fo(e){return e.__ngSimpleChanges__||null}function po(e,t,n,i,r){if(e=Se(e),Array.isArray(e))for(let s=0;s<e.length;s++)po(e[s],t,n,i,r);else{const s=$t(),o=Ht();let a=cs(e)?e:Se(e.provide),c=ss(e);const l=Wt(),u=65535&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>16;if(cs(e)||!e.multi){const i=new _n(c,r,xs),g=yo(a,t,r?u:u+h,d);-1===g?(jn(zn(l,o),s,a),mo(s,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=65536),n.push(i),o.push(i)):(n[g]=i,o[g]=i)}else{const g=yo(a,t,u+h,d),f=yo(a,t,u,u+h),p=g>=0&&n[g],m=f>=0&&n[f];if(r&&!m||!r&&!p){jn(zn(l,o),s,a);const u=function(e,t,n,i,r){const s=new _n(e,n,xs);return s.multi=[],s.index=t,s.componentProviders=0,vo(s,r,i&&!n),s}(r?wo:bo,n.length,r,i,c);!r&&m&&(n[f].providerFactory=u),mo(s,e,t.length,0),t.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=65536),n.push(u),o.push(u)}else mo(s,e,g>-1?g:f,vo(n[r?f:g],c,!r&&i));!r&&i&&m&&n[f].componentProviders++}}}function mo(e,t,n,i){const r=cs(t);if(r||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[i,s]):o[e+1].push(i,s)}else o.push(n,s)}}}function vo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function yo(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function bo(e,t,n,i){return _o(this.multi,[])}function wo(e,t,n,i){const r=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Wn(n,n[1],this.providerFactory.index,i);s=t.slice(0,e),_o(r,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],_o(r,s);return s}function _o(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Oo(e,t=[]){return n=>{n.providersResolver=(n,i)=>function(e,t,n){const i=$t();if(i.firstCreatePass){const r=At(e);po(n,i.data,i.blueprint,r,!0),po(t,i.data,i.blueprint,r,!1)}}(n,i?i(e):e,t)}}ho.ngInherit=!0;class Io{}class So{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${we(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let Co=(()=>{class e{}return e.NULL=new So,e})(),Ao=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>ko(e),e})();const ko=function(e){return qr(e,Wt(),Ht())};class xo{}const Uo=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let Po=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>To(),e})();const To=function(){const e=Ht(),t=Ft(Wt().index,e);return function(e){const t=e[11];if(Ut(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(_t(t)?t:e)};let Mo=(()=>{class e{}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>null}),e})();class Ro{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Eo=new Ro("9.1.11");class Fo{constructor(){}supports(e){return bs(e)}create(e){return new Do(e)}}const No=(e,t)=>t;class Do{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||No}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,r=null;for(;t||n;){const s=!n||t&&t.currentIndex<Lo(n,i,r)?t:n,o=Lo(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{r||(r=[]);const e=o-i,t=a-i;if(e!=t){for(let n=0;n<e;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;t<=s&&s<e&&(r[n]=i+1)}r[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!bs(e))throw new Error(`Error trying to diff '${we(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,i,r=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],i=this._trackByFn(t,n),null!==r&&ys(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,t)),ys(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,t),s=!0),r=r._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[vs()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(e,e=>{i=this._trackByFn(t,e),null!==r&&ys(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,e,i,t)),ys(r.item,e)||this._addIdentityChange(r,e)):(r=this._mismatch(r,e,i,t),s=!0),r=r._next,t++}),this.length=t;return this._truncate(r),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(ys(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(ys(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):e=this._addAfter(new zo(t,n),r,i),e}_verifyReinsertion(e,t,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Bo),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class zo{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vo{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&ys(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Bo{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Vo,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lo(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class jo{constructor(){}supports(e){return e instanceof Map||ws(e)}create(){return new Ho}}class Ho{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ws(e)))throw new Error(`Error trying to diff '${we(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new $o(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){ys(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class $o{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Go=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new oe,new re]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e([new Fo])}),e})(),Wo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new oe,new re]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e([new jo])}),e})();const qo=[new jo],Ko=new Go([new Fo]),Zo=new Wo(qo);let Jo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Qo(e,Ao),e})();const Qo=function(e,t){return function(e,t,n,i){return Gr||(Gr=class extends e{constructor(e,t,n){super(),this._declarationView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=zi(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];const i=this._declarationView[19];return null!==i&&(n[19]=i.createEmbeddedView(t)),Bi(t,n,e),new jr(n)}}),0===n.type?new Gr(i,n,qr(t,n,i)):null}(e,t,Wt(),Ht())};let Xo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Yo(e,Ao),e})();const Yo=function(e,t){return function(e,t,n,i){let r;Wr||(Wr=class extends e{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostView=n}get element(){return qr(t,this._hostTNode,this._hostView)}get injector(){return new Zn(this._hostTNode,this._hostView)}get parentInjector(){const e=Ln(this._hostTNode,this._hostView),t=Pn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){const e=n.parent.injectorIndex;let t=n.parent;for(;null!=t.parent&&e==t.parent.injectorIndex;)t=t.parent;return t}let i=Un(e),r=t,s=t[6];for(;i>1;)r=r[15],s=r[6],i--;return s}(e,this._hostView,this._hostTNode);return kn(e)&&null!=n?new Zn(n,t):new Zn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const i=e.createEmbeddedView(t||{});return this.insert(i,n),i}createComponent(e,t,n,i,r){const s=n||this.parentInjector;if(!r&&null==e.ngModule&&s){const e=s.get(Xe,null);e&&(r=e)}const o=e.create(s,i,void 0,r);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,i=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ot(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],i=new Wr(t,t[6],t[3]);i.detach(i.indexOf(e))}}const r=this._adjustIndex(t);return function(e,t,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=t),i<s-10?(t[4]=n[r],tt(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(i,n,this._lContainer,r),Cr(i,n,!0,Nr(r,this._lContainer)),e.attachToViewContainerRef(this),tt(this._lContainer[8],r,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1);!function(e,t){const n=kr(e,t);n&&xr(n[1],n)}(this._lContainer,t),nt(this._lContainer[8],t)}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=kr(this._lContainer,t);return n&&null!=nt(this._lContainer[8],t)?new jr(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=i[n.index];if(Ot(s))r=s;else{let e;if(4===n.type)e=Tt(s);else if(e=i[11].createComment(""),kt(i)){const t=i[11],r=Rt(n,i);Tr(t,Er(t,r),e,function(e,t){return Ut(e)?e.nextSibling(t):t.nextSibling}(t,r))}else Fr(i[1],i,e,n);i[n.index]=r=lr(s,i,e,n),hr(i,r)}return new Wr(r,n,i)}(e,t,Wt(),Ht())},ea={};class ta extends Co{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yt(e);return new ra(t,this.ngModule)}}function na(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const ia=new ze("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rn});class ra extends Io{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Oi).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return na(this.componentDef.inputs)}get outputs(){return na(this.componentDef.outputs)}create(e,t,n,i){const r=(i=i||this.ngModule)?function(e,t){return{get:(n,i,r)=>{const s=e.get(n,ea,r);return s!==ea||i===ea?s:t.get(n,i,r)}}}(e,i.injector):e,s=r.get(xo,Pt),o=r.get(Mo,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=n?function(e,t,n){if(Ut(e))return e.selectRootElement(t,n===at.ShadowDom);let i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(a,n,this.componentDef.encapsulation):Di(c,s.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,d="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),h={components:[],scheduler:Rn,clean:vr,playerHandler:null,flags:0},g=qi(0,-1,null,1,0,null,null,null,null,null),f=zi(null,g,h,u,null,null,s,a,o,r);let p,m;on(f,null);try{const e=function(e,t,n,i,r,s){const o=n[1];n[20]=e;const a=Vi(o,null,0,3,null,null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(ps(a,c,!0),null!==e&&(On(r,e,c),null!==a.classes&&Lr(r,e,a.classes),null!==a.styles&&Br(r,e,a.styles)));const l=i.createRenderer(e,t),u=zi(n,Wi(t),null,t.onPush?64:16,n[20],a,i,l,void 0);return o.firstCreatePass&&(jn(zn(a,n),o,t.type),nr(o,a),rr(a,n.length,1)),hr(n,u),n[20]=u}(l,this.componentDef,f,s,a);if(l)if(n)On(a,l,["ng-version",Eo.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let s=e[i];if("string"==typeof s)2===r?""!==s&&t.push(s,e[++i]):8===r&&n.push(s);else{if(!yi(r))break;r=s}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&On(a,l,e),t&&t.length>0&&Lr(a,l,t.join(" "))}if(m=Et(g,0),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=t[n];e.push(null!=i?Array.from(i):null)}}p=function(e,t,n,i,r){const s=n[1],o=function(e,t,n){const i=Wt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),tr(e,i,1),sr(e,t,n));const r=Wn(t,e,t.length-1,i);ui(r,t);const s=Rt(i,t);return s&&ui(s,t),r}(s,n,t);i.components.push(o),e[8]=o,r&&r.forEach(e=>e(o,t)),t.contentQueries&&t.contentQueries(1,o,n.length-1);const a=Wt();if(s.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){gn(a.index-20);const e=n[1];Xi(e,t),Yi(e,n,t.hostVars),er(t,o)}return o}(e,this.componentDef,f,h,[ro]),Bi(g,f,null)}finally{dn()}const v=new sa(this.componentType,p,qr(Ao,m,f),f,m);return n&&!d||(g.node.child=m),v}}class sa extends class{}{constructor(e,t,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new Hr(i),function(e,t,n,i){let r=e.node;null==r&&(e.node=r=Ki(0,null,2,-1,null,null)),i[6]=r}(i[1],0,0,i),this.componentType=e}get injector(){return new Zn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}const oa=void 0;var aa=["en",[["a","p"],["AM","PM"],oa],[["AM","PM"],oa,oa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oa,"{1} 'at' {0}",oa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ca={};function la(e){return e in ca||(ca[e]=Pe.ng&&Pe.ng.common&&Pe.ng.common.locales&&Pe.ng.common.locales[e]),ca[e]}const ua=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();let da="en-US";function ha(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,i){throw new Error("ASSERTION ERROR: "+e+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(da=e.toLowerCase().replace(/_/g,"-"))}const ga=new Map;class fa extends Xe{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ta(this);const n=wt(e),i=e[Fe]||null;i&&ha(i),this._bootstrapComponents=En(n.bootstrap),this._r3Injector=ns(e,t,[{provide:Xe,useValue:this},{provide:Co,useValue:this.componentFactoryResolver}],we(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=us.THROW_IF_NOT_FOUND,n=ae.Default){return e===us||e===Xe||e===Ve?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class pa extends Ye{constructor(e){super(),this.moduleType=e,null!==wt(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${we(t)} vs ${we(t.name)}`)})(e,ga.get(e),t),ga.set(e,t)}let n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(t=>e(t))}(e)}create(e){return new fa(this.moduleType,e)}}function ma(e,t,n){const i=Qt()+e,r=Ht();return r[i]===Ii?_s(r,i,n?t.call(n):t()):function(e,t){return e[t]}(r,i)}function va(e,t,n,i){return function(e,t,n,i,r,s){const o=t+n;return Os(e,o,r)?_s(e,o+1,s?i.call(s,r):i(r)):ba(e,o+1)}(Ht(),Qt(),e,t,n,i)}function ya(e,t,n,i,r){return function(e,t,n,i,r,s,o){const a=t+n;return Is(e,a,r,s)?_s(e,a+2,o?i.call(o,r,s):i(r,s)):ba(e,a+2)}(Ht(),Qt(),e,t,n,i,r)}function ba(e,t){const n=e[t];return n===Ii?void 0:n}class wa extends C{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let i,r=e=>null,s=()=>null;e&&"object"==typeof e?(i=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(r=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(i,r,s);return e instanceof d&&e.add(o),o}}const _a=new ze("Application Initializer");let Oa=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Ns(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Ke(_a,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Ia=new ze("AppId"),Sa={provide:Ia,useFactory:function(){return`${Ca()}${Ca()}${Ca()}`},deps:[]};function Ca(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Aa=new ze("Platform Initializer"),ka=new ze("Platform ID"),xa=new ze("appBootstrapListener");let Ua=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Pa=new ze("LocaleId"),Ta=new ze("DefaultCurrencyCode");class Ma{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ra=function(e){return new pa(e)},Ea=Ra,Fa=function(e){return Promise.resolve(Ra(e))},Na=function(e){const t=Ra(e),n=En(wt(e).declarations).reduce((e,t)=>{const n=yt(t);return n&&e.push(new ra(n)),e},[]);return new Ma(t,n)},Da=Na,za=function(e){return Promise.resolve(Na(e))};let Va=(()=>{class e{constructor(){this.compileModuleSync=Ea,this.compileModuleAsync=Fa,this.compileModuleAndAllComponentsSync=Da,this.compileModuleAndAllComponentsAsync=za}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Ba=new ze("compilerOptions"),La=(()=>Promise.resolve(0))();function ja(e){"undefined"==typeof Zone?La.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ha{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wa(!1),this.onMicrotaskEmpty=new wa(!1),this.onStable=new wa(!1),this.onError=new wa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=t,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=Pe.requestAnimationFrame,t=Pe.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Pe,()=>{e.lastRequestAnimationFrameId=-1,qa(e),Wa(e)}),qa(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(n,i,r,s,o,a)=>{try{return Ka(e),n.invokeTask(r,s,o,a)}finally{t&&"eventTask"===s.type&&t(),Za(e)}},onInvoke:(t,n,i,r,s,o,a)=>{try{return Ka(e),t.invoke(i,r,s,o,a)}finally{Za(e)}},onHasTask:(t,n,i,r)=>{t.hasTask(i,r),n===i&&("microTask"==r.change?(e._hasPendingMicrotasks=r.microTask,qa(e),Wa(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,n,i,r)=>(t.handleError(i,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ha.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ha.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,Ga,$a,$a);try{return r.runTask(s,t,n)}finally{r.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function $a(){}const Ga={};function Wa(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function qa(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Ka(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Za(e){e._nesting--,Wa(e)}class Ja{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wa,this.onMicrotaskEmpty=new wa,this.onStable=new wa,this.onError=new wa}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,i){return e.apply(t,n)}}let Qa=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ha.assertNotInAngularZone(),ja(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ja(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let i=-1;t&&t>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==i),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ha))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Xa=(()=>{class e{constructor(){this._applications=new Map,tc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return tc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class Ya{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let ec,tc=new Ya,nc=function(e,t,n){const i=e.get(Ba,[]).concat(t),r=new pa(n);if(0===hs.size)return Promise.resolve(r);const s=function(e){const t=[];return e.forEach(e=>e&&t.push(...e)),t}(i.map(e=>e.providers));if(0===s.length)return Promise.resolve(r);const o=function(){const e=Pe.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),a=us.create({providers:s}).get(o.ResourceLoader);return function(e){const t=[],n=new Map;function i(e){let t=n.get(e);if(!t){const i=(e=>Promise.resolve(a.get(e)))(e);n.set(e,t=i.then(fs))}return t}return hs.forEach((e,n)=>{const r=[];e.templateUrl&&r.push(i(e.templateUrl).then(t=>{e.template=t}));const s=e.styleUrls,o=e.styles||(e.styles=[]),a=e.styles.length;s&&s.forEach((t,n)=>{o.push(""),r.push(i(t).then(i=>{o[a+n]=i,s.splice(s.indexOf(t),1),0==s.length&&(e.styleUrls=void 0)}))});const c=Promise.all(r).then(()=>function(e){gs.delete(e)}(n));t.push(c)}),hs=new Map,Promise.all(t).then(()=>{})}().then(()=>r)};const ic=new ze("AllowMultipleToken");class rc{constructor(e,t){this.name=e,this.token=t}}function sc(e,t,n=[]){const i="Platform: "+t,r=new ze(i);return(t=[])=>{let s=oc();if(!s||s.injector.get(ic,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{const e=n.concat(t).concat({provide:r,useValue:!0},{provide:Jr,useValue:"platform"});!function(e){if(ec&&!ec.destroyed&&!ec.injector.get(ic,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ec=e.get(ac);const t=e.get(Aa,null);t&&t.forEach(e=>e())}(us.create({providers:e,name:i}))}return function(e){const t=oc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function oc(){return ec&&!ec.destroyed?ec:null}let ac=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Ja:("zone.js"===e?void 0:e)||new Ha({enableLongStackTrace:si(),shouldCoalesceEventChangeDetection:t}),n}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),i=[{provide:Ha,useValue:n}];return n.run(()=>{const t=us.create({providers:i,parent:this.injector,name:e.moduleType.name}),r=e.create(t),s=r.injector.get(ei,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>uc(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,t,n){try{const i=n();return Ns(i)?i.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(s,n,()=>{const e=r.injector.get(Oa);return e.runInitializers(),e.donePromise.then(()=>(ha(r.injector.get(Pa,"en-US")||"en-US"),this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,t=[]){const n=cc({},t);return nc(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(lc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${we(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Ke(us))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function cc(e,t){return Array.isArray(t)?t.reduce(cc,e):Object.assign(Object.assign({},e),t)}let lc=(()=>{class e{constructor(e,t,n,i,r,s){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=si(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new w(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new w(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Ha.assertNotInAngularZone(),ja(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ha.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return k(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof i&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof w?e[0]:W(t)(q(e,n))}(o,a.pipe(e=>{return K()((t=ee,function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,X);return i.source=e,i.subjectFactory=n,i})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Io?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(Xe),r=n.create(us.NULL,[],t||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const s=r.injector.get(Qa,null);return s&&r.injector.get(Xa).registerApplication(r.location.nativeElement,s),this._loadComponent(r),si()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;uc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(xa,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),uc(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ha),Ke(Ua),Ke(us),Ke(ei),Ke(Co),Ke(Oa))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function uc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class dc{}class hc{}const gc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let fc=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||gc}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,i]=e.split("#");return void 0===i&&(i="default"),n("zn8P")(t).then(e=>e[i]).then(e=>pc(e,t,i)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,i]=e.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[i+r]).then(e=>pc(e,t,i))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Va),Ke(hc,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function pc(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const mc=sc(null,"core",[{provide:ka,useValue:"unknown"},{provide:ac,deps:[us]},{provide:Xa,deps:[]},{provide:Ua,deps:[]}]),vc=[{provide:lc,useClass:lc,deps:[Ha,Ua,us,ei,Co,Oa]},{provide:ia,deps:[Ha],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Oa,useClass:Oa,deps:[[new re,_a]]},{provide:Va,useClass:Va,deps:[]},Sa,{provide:Go,useFactory:function(){return Ko},deps:[]},{provide:Wo,useFactory:function(){return Zo},deps:[]},{provide:Pa,useFactory:function(e){return ha(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new ie(Pa),new re,new oe]]},{provide:Ta,useValue:"USD"}];let yc=(()=>{class e{constructor(e){}}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(Ke(lc))},providers:vc}),e})();const bc="http://localhost:5000/pttbe/iam/";function wc(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}function _c(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function Oc(e,t=!1){var n,i,r,s;if((null===(n=e.error)||void 0===n?void 0:n.statusCode)&&console.log("StatusCode: "+e.error.statusCode),(null===(i=e.error)||void 0===i?void 0:i.message)&&console.log("Message: "+e.error.message),console.log(`server returned code ${e.status} with body "${JSON.stringify(e.error)}"`),t){const t=null!==(s=null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.message)&&void 0!==s?s:JSON.stringify(e.error);throw new Error(t)}}function Ic(e){return e&&Array.isArray(e)?e.map("object"!=typeof e[0]?e=>e:e=>Object.assign({},e)):e}function Sc(e){if(!e)throw new Error("null not allowed");return 0===e.length?"1":(Math.max.apply(Math,e.map(e=>+e.id))+1).toString()}function Cc(e){return e?"true":"false"}var Ac=function(e){return e.None="None",e.Account="Account",e.OrgaUser="OrgaUser",e}({});function kc(e,t){return!e||e===Ac.None||!!t&&(e===Ac.Account?t!==Ac.None:t===Ac.OrgaUser)}function xc(...e){let t=e[e.length-1];return k(t)?(e.pop(),L(e,t)):q(e)}function Uc(e,t){return H(e,t,1)}function Pc(e,t){return function(n){return n.lift(new Tc(e,t))}}class Tc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Mc(e,this.predicate,this.thisArg))}}class Mc extends f{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}let Rc=null;function Ec(){return Rc}const Fc=new ze("DocumentToken");let Nc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:Dc,token:e,providedIn:"platform"}),e})();function Dc(){return Ke(Vc)}const zc=new ze("Location Initialized");let Vc=(()=>{class e extends Nc{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Ec().getLocation(),this._history=Ec().getHistory()}getBaseHrefFromDOM(){return Ec().getBaseHref(this._doc)}onPopState(e){Ec().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Ec().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){Bc()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){Bc()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Ke(Fc))},e.\u0275prov=ue({factory:Lc,token:e,providedIn:"platform"}),e})();function Bc(){return!!window.history.pushState}function Lc(){return new Vc(Ke(Fc))}function jc(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Hc(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function $c(e){return e&&"?"!==e[0]?"?"+e:e}let Gc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:Wc,token:e,providedIn:"root"}),e})();function Wc(e){const t=Ke(Fc).location;return new Kc(Ke(Nc),t&&t.origin||"")}const qc=new ze("appBaseHref");let Kc=(()=>{class e extends Gc{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return jc(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+$c(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,i){const r=this.prepareExternalUrl(n+$c(i));this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){const r=this.prepareExternalUrl(n+$c(i));this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Ke(Nc),Ke(qc,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Zc=(()=>{class e extends Gc{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=jc(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,i){let r=this.prepareExternalUrl(n+$c(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){let r=this.prepareExternalUrl(n+$c(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Ke(Nc),Ke(qc,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Jc=(()=>{class e{constructor(e,t){this._subject=new wa,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Hc(Xc(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+$c(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Xc(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$c(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$c(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(Ke(Gc),Ke(Nc))},e.normalizeQueryParams=$c,e.joinWithSlash=jc,e.stripTrailingSlash=Hc,e.\u0275prov=ue({factory:Qc,token:e,providedIn:"root"}),e})();function Qc(){return new Jc(Ke(Gc),Ke(Nc))}function Xc(e){return e.replace(/\/index.html$/,"")}const Yc=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}();class el{}let tl=(()=>{class e extends el{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=la(t);if(n)return n;const i=t.split("-")[0];if(n=la(i),n)return n;if("en"===i)return aa;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[ua.PluralCase]}(t||this.locale)(e)){case Yc.Zero:return"zero";case Yc.One:return"one";case Yc.Two:return"two";case Yc.Few:return"few";case Yc.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pa))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function nl(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[i,r]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(i.trim()===t)return decodeURIComponent(r)}return null}let il=(()=>{class e{constructor(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(bs(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+we(e.item));this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(xs(Go),xs(Wo),xs(Ao),xs(Po))},e.\u0275dir=vt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class rl{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sl=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){si()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new rl(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new ol(e,n);t.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new ol(e,r);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=i,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(xs(Xo),xs(Jo),xs(Go))},e.\u0275dir=vt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class ol{constructor(e,t){this.record=e,this.view=t}}let al=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new cl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ll("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ll("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(xs(Xo),xs(Jo))},e.\u0275dir=vt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class cl{constructor(){this.$implicit=null,this.ngIf=null}}function ll(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${we(t)}'.`)}let ul=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[{provide:el,useClass:tl}]}),e})(),dl=(()=>{class e{}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new hl(Ke(Fc),window,Ke(ei))}),e})();class hl{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const t=this.document.querySelector("#"+e);if(t)return void this.scrollToElement(t);const n=this.document.querySelector(`[name='${e}']`);if(n)return void this.scrollToElement(n)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}class gl{}class fl{}class pl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),i=n.toLowerCase(),r=e.slice(t+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const i=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof pl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new pl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof pl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":const r=e.value;if(r){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===r.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ml{encodeKey(e){return vl(e)}encodeValue(e){return vl(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function vl(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class yl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ml,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.split("&").forEach(e=>{const i=e.indexOf("="),[r,s]=-1==i?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,i)),t.decodeValue(e.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new yl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function bl(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function wl(e){return"undefined"!=typeof Blob&&e instanceof Blob}function _l(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Ol{constructor(e,t,n,i){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new pl),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new yl,this.urlWithParams=t}serializeBody(){return null===this.body?null:bl(this.body)||wl(this.body)||_l(this.body)||"string"==typeof this.body?this.body:this.body instanceof yl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_l(this.body)?null:wl(this.body)?this.body.type||null:bl(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new Ol(t,n,r,{params:c,headers:a,reportProgress:o,responseType:i,withCredentials:s})}}const Il=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class Sl{constructor(e,t=200,n="OK"){this.headers=e.headers||new pl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Cl extends Sl{constructor(e={}){super(e),this.type=Il.ResponseHeader}clone(e={}){return new Cl({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Al extends Sl{constructor(e={}){super(e),this.type=Il.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Al({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kl extends Sl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function xl(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Ul=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let i;if(e instanceof Ol)i=e;else{let r=void 0;r=n.headers instanceof pl?n.headers:new pl(n.headers);let s=void 0;n.params&&(s=n.params instanceof yl?n.params:new yl({fromObject:n.params})),i=new Ol(e,t,void 0!==n.body?n.body:null,{headers:r,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=xc(i).pipe(Uc(e=>this.handler.handle(e)));if(e instanceof Ol||"events"===n.observe)return r;const s=r.pipe(Pc(e=>e instanceof Al));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe(z(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(z(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(z(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(z(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new yl).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,xl(n,t))}post(e,t,n={}){return this.request("POST",e,xl(n,t))}put(e,t,n={}){return this.request("PUT",e,xl(n,t))}}return e.\u0275fac=function(t){return new(t||e)(Ke(gl))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class Pl{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Tl=new ze("HTTP_INTERCEPTORS");let Ml=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Rl=/^\)\]\}',?\n/;class El{}let Fl=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Nl=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new w(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const i=e.serializeBody();let r=null;const s=()=>{if(null!==r)return r;const t=1223===n.status?204:n.status,i=n.statusText||"OK",s=new pl(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return r=new Cl({headers:s,status:t,statusText:i,url:o}),r},o=()=>{let{headers:i,status:r,statusText:o,url:a}=s(),c=null;204!==r&&(c=void 0===n.response?n.responseText:n.response),0===r&&(r=c?200:0);let l=r>=200&&r<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(Rl,"");try{c=""!==c?JSON.parse(c):null}catch(u){c=e,l&&(l=!1,c={error:u,text:c})}}l?(t.next(new Al({body:c,headers:i,status:r,statusText:o,url:a||void 0})),t.complete()):t.error(new kl({error:c,headers:i,status:r,statusText:o,url:a||void 0}))},a=e=>{const{url:i}=s(),r=new kl({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});t.error(r)};let c=!1;const l=i=>{c||(t.next(s()),c=!0);let r={type:Il.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===e.responseType&&n.responseText&&(r.partialText=n.responseText),t.next(r)},u=e=>{let n={type:Il.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),e.reportProgress&&(n.addEventListener("progress",l),null!==i&&n.upload&&n.upload.addEventListener("progress",u)),n.send(i),t.next({type:Il.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",o),e.reportProgress&&(n.removeEventListener("progress",l),null!==i&&n.upload&&n.upload.removeEventListener("progress",u)),n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Ke(El))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Dl=new ze("XSRF_COOKIE_NAME"),zl=new ze("XSRF_HEADER_NAME");class Vl{}let Bl=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=nl(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Ke(Fc),Ke(ka),Ke(Dl))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Ll=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const i=this.tokenService.getToken();return null===i||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,i)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Ke(Vl),Ke(zl))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),jl=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(Tl,[]);this.chain=e.reduceRight((e,t)=>new Pl(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Ke(fl),Ke(us))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Hl=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:Ll,useClass:Ml}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:Dl,useValue:t.cookieName}:[],t.headerName?{provide:zl,useValue:t.headerName}:[]]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[Ll,{provide:Tl,useExisting:Ll,multi:!0},{provide:Vl,useClass:Bl},{provide:Dl,useValue:"XSRF-TOKEN"},{provide:zl,useValue:"X-XSRF-TOKEN"}]}),e})(),$l=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[Ul,{provide:gl,useClass:jl},Nl,{provide:fl,useExisting:Nl},Fl,{provide:El,useExisting:Fl}],imports:[[Hl.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})(),Gl=(()=>{class e{constructor(e){this.http=e,this.backendURI=bc+"auth/",this.principal={authType:Ac.None}}getAuthorizationToken(){return this.principal.accessToken}setPrincipalAndToken(e,t){this.principal=Object.assign(Object.assign({},e),{accessToken:t})}getPrincipal(){return this.principal}login(e,t,n){return wc(this,void 0,void 0,(function*(){const i={kennung:e,secret:t};n&&(i.fakeMailIdAsSecret=n);try{const e=yield this.http.post(this.backendURI+"login",i).toPromise();if(e)return this.principal=e,e}catch(r){console.log(r.error),Oc(r,!0)}}))}loginInOrganization(e){return wc(this,void 0,void 0,(function*(){const t={usersOrgaId:e};try{const e=yield this.http.post(this.backendURI+"login-in-organization",t).toPromise();if(e)return this.principal=e,e}catch(n){console.log(n.error),Oc(n,!0)}}))}register(e,t,n){return wc(this,void 0,void 0,(function*(){const i={name:e.name,email:e.email,secret:t.secret};n&&(i.fakeMailIdAsSecret=n);try{const e=yield this.http.post(this.backendURI+"register",i).toPromise();if(e)return this.principal=e,e}catch(r){console.log(r.error),Oc(r,!0)}}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Wl=(()=>{class e{constructor(e){this.auth=e}intercept(e,t){const n=this.auth.getAuthorizationToken();let i=e;return n&&(i=e.clone({setHeaders:{Authorization:n}})),t.handle(i)}}return e.\u0275fac=function(t){return new(t||e)(Ke(Gl))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class ql extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new ql,Rc||(Rc=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Zl||(Zl=document.querySelector("base"),Zl)?Zl.getAttribute("href"):null;return null==t?null:(n=t,Kl||(Kl=document.createElement("a")),Kl.setAttribute("href",n),"/"===Kl.pathname.charAt(0)?Kl.pathname:"/"+Kl.pathname);var n}resetBaseElement(){Zl=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return nl(document.cookie,e)}}let Kl,Zl=null;const Jl=new ze("TRANSITION_ID"),Ql=[{provide:_a,useFactory:function(e,t,n){return()=>{n.get(Oa).donePromise.then(()=>{const n=Ec();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Jl,Fc,us],multi:!0}];class Xl{static init(){var e;e=new Xl,tc=e}addToWindow(e){Pe.getAngularTestability=(t,n=!0)=>{const i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},Pe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Pe.getAllAngularRootElements=()=>e.getAllRootElements(),Pe.frameworkStabilizers||(Pe.frameworkStabilizers=[]),Pe.frameworkStabilizers.push(e=>{const t=Pe.getAllAngularTestabilities();let n=t.length,i=!1;const r=function(t){i=i||t,n--,0==n&&e(i)};t.forEach((function(e){e.whenStable(r)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?Ec().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const Yl=new ze("EventManagerPlugins");let eu=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let i=0;i<n.length;i++){const t=n[i];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error("No event manager plugin found for event "+e)}}return e.\u0275fac=function(t){return new(t||e)(Ke(Yl),Ke(Ha))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class tu{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=Ec().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let nu=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),iu=(()=>{class e extends nu{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Ec().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Fc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const ru={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},su=/%COMP%/g;function ou(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?ou(e,r,n):(r=r.replace(su,e),n.push(r))}return n}function au(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let cu=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new lu(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case at.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new uu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case at.Native:case at.ShadowDom:return new du(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=ou(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Ke(eu),Ke(iu),Ke(Ia))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class lu{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(ru[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const r=ru[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=ru[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&Uo.DashCase?e.style.setProperty(t,n,i&Uo.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Uo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,au(n)):this.eventManager.addEventListener(e,t,au(n))}}class uu extends lu{constructor(e,t,n,i){super(e),this.component=n;const r=ou(i+"-"+n.id,n.styles,[]);t.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(su,i+"-"+n.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(su,e)}(i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class du extends lu{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===at.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=ou(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const e=document.createElement("style");e.textContent=r[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let hu=(()=>{class e extends tu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(Ke(Fc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const gu=["alt","control","meta","shift"],fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mu={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let vu=(()=>{class e extends tu{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const r=e.parseEventName(n),s=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ec().onAndCancel(t,r.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=e._normalizeKey(n.pop());let s="";if(gu.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&pu.hasOwnProperty(t)&&(t=pu[t]))}return fu[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),gu.forEach(i=>{i!=n&&(0,mu[i])(e)&&(t+=i+".")}),t+=n,t}static eventCallback(t,n,i){return r=>{e.getEventFullKey(r)===t&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Ke(Fc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const yu=sc(mc,"browser",[{provide:ka,useValue:"browser"},{provide:Aa,useValue:function(){ql.makeCurrent(),Xl.init()},multi:!0},{provide:Fc,useFactory:function(){return function(e){xt=e}(document),document},deps:[]}]),bu=[[],{provide:Jr,useValue:"root"},{provide:ei,useFactory:function(){return new ei},deps:[]},{provide:Yl,useClass:hu,multi:!0,deps:[Fc,Ha,ka]},{provide:Yl,useClass:vu,multi:!0,deps:[Fc]},[],{provide:cu,useClass:cu,deps:[eu,iu,Ia]},{provide:xo,useExisting:cu},{provide:nu,useExisting:iu},{provide:iu,useClass:iu,deps:[Fc]},{provide:Qa,useClass:Qa,deps:[Ha]},{provide:eu,useClass:eu,deps:[Yl,Ha]},[]];let wu=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Ia,useValue:t.appId},{provide:Jl,useExisting:Ia},Ql]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(Ke(e,12))},providers:bu,imports:[ul,yc]}),e})();function _u(){return new Ou(Ke(Fc))}let Ou=(()=>{class e{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return e.\u0275fac=function(t){return new(t||e)(Ke(Fc))},e.\u0275prov=ue({factory:_u,token:e,providedIn:"root"}),e})();"undefined"!=typeof window&&window;var Iu=function(e){return e.SelfIdent="SelfIdent",e.VideoIdent="VideoIdent",e.VeriIdent="VeriIdent",e.RoboIdent="RoboIdent",e}({});let Su=(()=>{class e{constructor(){this.refreshMainView=new wa,this.tokenChanged=new wa,this.idmEvent=new wa,this.taskEvent=new wa,this.resourceEvent=new wa}publishRefreshMainViewEvent(e=!1){this.refreshMainView.emit({titleOnly:e})}publishTokenChangedEvent(e){this.tokenChanged.emit(e),this.publishRefreshMainViewEvent()}publishIdmEvent(e){this.idmEvent.emit(e)}publishTaskEvent(e){this.taskEvent.emit(e)}publishResourceEvent(e){this.resourceEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Cu=(()=>{class e{constructor(e){this.http=e,this.settingsBackendUri=bc+"my/settings/"}getAllSettings(){return wc(this,void 0,void 0,(function*(){try{const e=yield this.http.get(this.settingsBackendUri).toPromise();return console.log(e),e}catch(e){Oc(e)}return{}}))}putAllSettings(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.put(this.settingsBackendUri,e).toPromise()}catch(t){Oc(t)}return!1}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Au=function(e){return e.AfterRegistrationLoginIsRequired="AfterRegistrationLoginIsRequired",e.AccountVerificationNeeded="AccountVerificationNeeded",e.AllowDeletionOfAccountWithOrgaMemberships="AllowDeletionOfAccountWithOrgaMemberships",e.ShowImportantInfosOnly="ShowImportantInfosOnly",e.AcceptHandshakesAutomatically="AcceptHandshakesAutomatically",e.AllowJoiningOrganizationByAccount="AllowJoiningOrganizationByAccount",e.ShowInfoPageAfterRegistration="ShowInfoPageAfterRegistration",e.ShowInfoPageAfterLogin="ShowInfoPageAfterLogin",e.ShowInfoPageAfterGuardNotFulfilled="ShowInfoPageAfterGuardNotFulfilled",e.ShowInfoPageAfterOrgaAdminGuardNotFulfilled="ShowInfoPageAfterOrgaAdminGuardNotFulfilled",e.UseGreenLikeColors="UseGreenLikeColors",e.UseAccountName4DisplayingUsername="UseAccountName4DisplayingUsername",e}({});let ku=(()=>{class e{constructor(e,t,n){this.titleService=e,this.eventService=t,this.beSettingsService=n,this.stringSettings={},this.booleanSettings={},this.backendBooleanSettings={},this.callBackend=!1,this.readFromBackendDone=!this.callBackend,this._initWithDefaults()}sendChangesToBackend(){return wc(this,void 0,void 0,(function*(){if(!this.callBackend)return;const e=Object.keys(this.booleanSettings);for(const t in this.backendBooleanSettings)e.includes(t)&&(this.backendBooleanSettings[t]=this._booleanValueGet(t));yield this.beSettingsService.putAllSettings(this.backendBooleanSettings)}))}getValuesFromBackend(){return wc(this,void 0,void 0,(function*(){if(!this.callBackend)return;this.backendBooleanSettings=yield this.beSettingsService.getAllSettings();const e=Object.keys(this.booleanSettings);for(const t in this.backendBooleanSettings)e.includes(t)&&this.booleanValueSet(t,this.backendBooleanSettings[t]);this.readFromBackendDone=!0}))}_initWithDefaults(){return wc(this,void 0,void 0,(function*(){this.booleanValueSet(Au.AccountVerificationNeeded,!1),this.booleanValueSet(Au.AfterRegistrationLoginIsRequired,!1),this.booleanValueSet(Au.AllowDeletionOfAccountWithOrgaMemberships,!0),this.booleanValueSet(Au.ShowImportantInfosOnly,!0),this.booleanValueSet(Au.AcceptHandshakesAutomatically,!1),this.booleanValueSet(Au.AllowJoiningOrganizationByAccount,!0),this.booleanValueSet(Au.ShowInfoPageAfterRegistration,!0),this.booleanValueSet(Au.ShowInfoPageAfterLogin,!1),this.booleanValueSet(Au.ShowInfoPageAfterGuardNotFulfilled,!1),this.booleanValueSet(Au.ShowInfoPageAfterOrgaAdminGuardNotFulfilled,!0),this.booleanValueSet(Au.UseGreenLikeColors,!1),this.booleanValueSet(Au.UseAccountName4DisplayingUsername,!0),yield this.getValuesFromBackend()}))}getAllBooleanSettings(){return wc(this,void 0,void 0,(function*(){return this.readFromBackendDone||(yield this.getValuesFromBackend()),this.booleanSettings}))}_stringValueGet(e,t=!1){const n=this.stringSettings[e];return t&&(this.stringSettings[e]=""),n||""}_stringValueSet(e,t){this.stringSettings[e]=t}_booleanValueGet(e,t=!1){var n;return null!==(n=this.booleanSettings[e])&&void 0!==n?n:t}booleanValueSet(e,t){this.booleanSettings[e]=t}getRedirectUri(e=!1){return this._stringValueGet("redirectUri",e)}redirectUriIsSet(){return!!this.getRedirectUri()}setRedirectUri(e){this._stringValueSet("redirectUri",e)}resetRedirectUri(){this.setRedirectUri("")}getTitle(e=!1){return this._stringValueGet("title",e)}setTitle(e){this._stringValueSet("title",e),this.titleService.setTitle("Gesamt-Frontend: "+e),setTimeout(()=>{this.eventService.publishRefreshMainViewEvent(!0)},0)}getRequiredByGuardHelptext(e=!1){return this._stringValueGet("requiredByGuardHelptext",e)}resetRequiredByGuardHelptext(){this._stringValueSet("requiredByGuardHelptext","")}setRequiredByGuardHelptext(e){this._stringValueSet("requiredByGuardHelptext",e)}acceptHandshakeDecisionsAutomatically(){return this._booleanValueGet(Au.AcceptHandshakesAutomatically)}showImportantInfosOnly(){return this._booleanValueGet(Au.ShowImportantInfosOnly)}afterRegistrationLoginIsRequired(){return this._booleanValueGet(Au.AfterRegistrationLoginIsRequired)}registeredAccountMustBeVerifiedByMail(){return this._booleanValueGet(Au.AccountVerificationNeeded)}allowJoiningOrganizationByAccount(){return this._booleanValueGet(Au.AllowJoiningOrganizationByAccount)}showInfoPageAfterRegistration(){return this._booleanValueGet(Au.ShowInfoPageAfterRegistration)}showInfoPageAfterLogin(){return this._booleanValueGet(Au.ShowInfoPageAfterLogin)}showInfoPageAfterGuardNotFulfilled(){return this._booleanValueGet(Au.ShowInfoPageAfterGuardNotFulfilled)}showInfoPageAfterOrgaAdminGuardNotFulfilled(){return this._booleanValueGet(Au.ShowInfoPageAfterOrgaAdminGuardNotFulfilled)}allowDeletionOfAccountWithOrgaMemberships(){return this._booleanValueGet(Au.AllowDeletionOfAccountWithOrgaMemberships)}setAllowDeletionOfAccountWithOrgaMemberships(e){this.booleanValueSet(Au.AllowDeletionOfAccountWithOrgaMemberships,e)}useGreenLikeColors(){return this._booleanValueGet(Au.UseGreenLikeColors)}useAccountName4DisplayingUsername(){return this._booleanValueGet(Au.UseAccountName4DisplayingUsername)}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ou),Ke(Su),Ke(Cu))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var xu=function(e){return e.Member="Member",e.Admin="Admin",e.SuperAdmin="SuperAdmin",e}({}),Uu=function(e){return e.Low="Low",e.Medium="Medium",e.Secure="Secure",e.HighSecure="HighSecure",e}({});let Pu=(()=>{class e{constructor(e){this.settingsService=e,this.adminOfTheseSubOrgas=[],this.principal={authType:Ac.None},this.principal.account={},this.principal.orgaUser={},this.principal.organization={}}_initSubOrgaAdmin(){this.adminOfTheseSubOrgas=[]}setPrincipal(e){this.principal.authType=Ac.None,this.principal=Object.assign({},e),this.isLoggedIn()||this._initSubOrgaAdmin()}isAdminOfCurrentOrga(e){var t;let n=!!this.principal.orgaUser&&this.principal.orgaUser.adminType!==xu.Member;return n&&e&&(n=(null===(t=this.principal.orgaUser)||void 0===t?void 0:t.orgaId)===e),n}isSuperAdminOfCurrentOrga(e){var t,n;let i=(null===(t=this.principal.orgaUser)||void 0===t?void 0:t.adminType)===xu.SuperAdmin;return i&&e&&(i=(null===(n=this.principal.orgaUser)||void 0===n?void 0:n.orgaId)===e),i}setSubOrgaIdsWithAdminsPermissions(e){this.adminOfTheseSubOrgas=[],this.adminOfTheseSubOrgas.push(...e)}isAdminOfSubOrga(e){return this.isAdminOfCurrentOrga()||this.adminOfTheseSubOrgas.includes(e)}isSubAdminOfAtLeastOneSubOrga(){return this.adminOfTheseSubOrgas.length>0}getPrincipal(){return this.principal}isLoggedIn(){return this.principal.authType!==Ac.None}getAuthType(){return this.principal.authType}isLoggedInInOrga(){return this.principal.authType===Ac.OrgaUser}getAuthLevel(){return this.principal.authLevel}getAuthLevelAsString(){return this.principal.authLevel?Uu[this.principal.authLevel].toString():""}getAccount(){return this.principal.account}getOrgaUser(){return this.principal.orgaUser}getOrgaName(){var e,t;return null!==(t=null===(e=this.principal.organization)||void 0===e?void 0:e.name)&&void 0!==t?t:""}getUsersDisplayName(){var e,t;return this.isLoggedIn()?this.isLoggedInInOrga()&&!this.settingsService.useAccountName4DisplayingUsername()?this.principal.orgaUser.name:null!==(t=null===(e=this.principal.account)||void 0===e?void 0:e.name)&&void 0!==t?t:"":""}guardPrincipalIsThisAccount(e){var t;if((null===(t=this.principal.account)||void 0===t?void 0:t.id)!==e)throw new Error("Principal is not correct AccountId")}guardPrincipalBelongsToThisOrga(e){var t;if((null===(t=this.principal.orgaUser)||void 0===t?void 0:t.orgaId)!==e)throw new Error("Principal is not a member of this orga")}guardPrincipalIsOrgaAdmin(e){if(!this.isAdminOfCurrentOrga(e))throw new Error("Principal is not admin of this orga")}guardPrincipalIsOrgaSuperAdmin(e){if(!this.principal||!this.principal.orgaUser||!this.isSuperAdminOfCurrentOrga(e))throw new Error("Principal is not super-admin of this orga")}guardPrincipalIsSubOrgaAdmin(e){if(!this.isAdminOfSubOrga(e))throw new Error("Principal is not sub-admin of given sub-organization")}}return e.\u0275fac=function(t){return new(t||e)(Ke(ku))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Tu=function(e){return e.InfoForSuccessfulAccountVerification="InfoForSuccessfulAccountVerification",e.RequestForInvitationAsOrgaUserToUser="RequestForInvitationAsOrgaUserToUser",e.InfoForDenialOfInvitationAsOrgaUserToOrga="InfoForDenialOfInvitationAsOrgaUserToOrga",e.RequestForInvitationAsOrgaUserToOrga="RequestForInvitationAsOrgaUserToOrga",e.WishOfMembershipToOrga="WishOfMembershipToOrga",e.InfoForApprovalInvitationOfOrgaUserToUser="InfoForApprovalInvitationOfOrgaUserToUser",e.InfoForDenialOfInvitationOfOrgaUserToUser="InfoForDenialOfInvitationOfOrgaUserToUser",e}({});let Mu=(()=>{class e{constructor(e){this.http=e,this.backendURI=bc+"identifications/"}convert(e){return Object.assign(Object.assign({},e),{doneAt:new Date(e.doneAt),account:e.account?Object.assign(Object.assign({},e.account),{dateOfBirth:new Date(e.account.dateOfBirth)}):void 0})}getAllIdentificationsForUser(e){return wc(this,void 0,void 0,(function*(){try{return(yield this.http.get(this.backendURI+"accounts/"+e).toPromise()).map(e=>this.convert(e))}catch(t){Oc(t)}return[]}))}getAllIdentificationsForOrga(e){return wc(this,void 0,void 0,(function*(){try{return(yield this.http.get(this.backendURI+"organizations/"+e).toPromise()).map(e=>this.convert(e))}catch(t){Oc(t)}return[]}))}getAllIdentificationsBasedOnNotification(e){return wc(this,void 0,void 0,(function*(){try{return(yield this.http.get(this.backendURI+"notifications/"+e).toPromise()).map(e=>this.convert(e))}catch(t){Oc(t)}return[]}))}removeIdentification(e){return wc(this,void 0,void 0,(function*(){try{return!!(yield this.http.delete(this.backendURI+e).toPromise())}catch(t){Oc(t)}return!1}))}addNewIdentification(e){return wc(this,void 0,void 0,(function*(){try{let t;const n=e.account;t=Object.assign(Object.assign({},e),{account:n?Object.assign(Object.assign({},n),{dateOfBirth:n.dateOfBirth.toISOString()}):void 0});const i=yield this.http.post(this.backendURI,t).toPromise();return this.convert(i)}catch(t){Oc(t)}}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ru=(()=>{class e{constructor(e,t){this.principalService=e,this.beIdentificationService=t,this.useValueFromBackend=!0,this.callBackend=!1,this.idents=[],this._fillWithTestdata()}_fillWithTestdata(){this.idents.push({id:"1",provider:Iu.SelfIdent,doneAt:new Date("1.2.2021"),account:{id:"110",dateOfBirth:new Date("3.3.1981"),firstname:"Klaus",lastname:"H.",address:{zipCode:"90435",city:"N\xfcrnberg",street:"F\xfcrther Str"},photo:"./assets/img/mann-1.png"}},{id:"100",provider:Iu.VeriIdent,doneAt:new Date("1.3.2021"),account:{id:"110",firstname:"Klaus",lastname:"Heinzelmann",dateOfBirth:new Date("8.3.1981"),address:{zipCode:"90433",city:"N\xfcrnberg",street:"F\xfcrther Stra\xdfe 111"},photo:"./assets/img/mann-1.png"}},{id:"101",provider:Iu.RoboIdent,doneAt:new Date("10.1.2020"),account:{id:"111",firstname:"Simone",lastname:"Heinzelmann",dateOfBirth:new Date("11.4.1982"),address:{zipCode:"97234",city:"Leutenbach",street:"Seidmar 12"},photo:"./assets/img/frau-1.png"}},{id:"2",provider:Iu.RoboIdent,doneAt:new Date("2.2.2021"),account:{id:"131",dateOfBirth:new Date("5.6.1962"),firstname:"Petra",lastname:"Grubinger",address:{zipCode:"80666",city:"M\xfcnchen",street:"Ring 12"},photo:"./assets/img/frau-2.png"}},{id:"3",provider:Iu.RoboIdent,doneAt:new Date("3.2.2021"),account:{id:"120",firstname:"Martin",lastname:"Palmengarten",dateOfBirth:new Date("11.12.1960"),address:{zipCode:"34300",city:"Dortmund",street:"Am Stadion 2"},photo:"./assets/img/mann-2.png"}},{id:"4",provider:Iu.RoboIdent,doneAt:new Date("3.28.2021"),organization:{id:"300",name:"Kanzlei Heinzelmann & T\xf6chter",address:{zipCode:"34300",city:"Dortmund",street:"Am Stadion 2"},logo:"./assets/img/logos/heinzelmann.png"}})}_addNewIdentification(e){return e.id=Sc(this.idents),e.doneAt=new Date(Date.now()),this.idents.push(e),e}_checkStringProperty(e){return!!e&&e.trim().length>0}_checkIdentificationIsValid(e){var t,n,i,r,s,o,a,c,l,u,d;let h=!0;return h=h&&this._checkStringProperty(null===(n=null===(t=e.account)||void 0===t?void 0:t.id)||void 0===n?void 0:n.toString()),h=h&&this._checkStringProperty(null===(i=e.provider)||void 0===i?void 0:i.toString()),h=h&&this._checkStringProperty(null===(r=e.account)||void 0===r?void 0:r.firstname),h=h&&this._checkStringProperty(null===(s=e.account)||void 0===s?void 0:s.lastname),h=h&&this._checkStringProperty(null===(a=null===(o=e.account)||void 0===o?void 0:o.address)||void 0===a?void 0:a.city),h=h&&this._checkStringProperty(null===(l=null===(c=e.account)||void 0===c?void 0:c.address)||void 0===l?void 0:l.street),h=h&&this._checkStringProperty(null===(d=null===(u=e.account)||void 0===u?void 0:u.address)||void 0===d?void 0:d.zipCode),h}_checkOrgaIdentificationIsValid(e){var t,n,i,r,s,o,a,c,l,u;let d=!0;return d=d&&this._checkStringProperty(null===(n=null===(t=e.organization)||void 0===t?void 0:t.id)||void 0===n?void 0:n.toString()),d=d&&this._checkStringProperty(null===(i=e.provider)||void 0===i?void 0:i.toString()),d=d&&this._checkStringProperty(null===(r=e.organization)||void 0===r?void 0:r.name),d=d&&this._checkStringProperty(null===(o=null===(s=e.organization)||void 0===s?void 0:s.address)||void 0===o?void 0:o.city),d=d&&this._checkStringProperty(null===(c=null===(a=e.organization)||void 0===a?void 0:a.address)||void 0===c?void 0:c.street),d=d&&this._checkStringProperty(null===(u=null===(l=e.organization)||void 0===l?void 0:l.address)||void 0===u?void 0:u.zipCode),d}getAllIdentificationsForUser(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beIdentificationService.getAllIdentificationsForUser(e);if(this.useValueFromBackend)return t}return Ic(this.idents.filter(t=>{var n;return(null===(n=t.account)||void 0===n?void 0:n.id)===e}))}))}getAllIdentificationsForOrga(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beIdentificationService.getAllIdentificationsForOrga(e);if(this.useValueFromBackend)return t}return Ic(this.idents.filter(t=>{var n;return(null===(n=t.organization)||void 0===n?void 0:n.id)===e}))}))}getAllIdentificationsBasedOnNotification(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beIdentificationService.getAllIdentificationsBasedOnNotification(e.id);if(this.useValueFromBackend)return t}return e.type===Tu.RequestForInvitationAsOrgaUserToUser?Ic(this.idents.filter(t=>{var n,i;return(null===(n=t.organization)||void 0===n?void 0:n.id)===(null===(i=e.organization)||void 0===i?void 0:i.id)})):e.type===Tu.RequestForInvitationAsOrgaUserToOrga||e.type===Tu.WishOfMembershipToOrga?Ic(this.idents.filter(t=>{var n,i;return(null===(n=t.account)||void 0===n?void 0:n.id)===(null===(i=e.account)||void 0===i?void 0:i.id)})):[]}))}addNewIdentification(e){return wc(this,void 0,void 0,(function*(){if(e.account){if(this.principalService.guardPrincipalIsThisAccount(e.account.id),!this._checkIdentificationIsValid(e))return}else if(this.principalService.guardPrincipalBelongsToThisOrga(e.organization.id),!this._checkOrgaIdentificationIsValid(e))return;if(this.callBackend){const t=yield this.beIdentificationService.addNewIdentification(e);if(this.useValueFromBackend)return t}return Object.assign({},this._addNewIdentification(e))}))}removeIdentification(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend)return yield this.beIdentificationService.removeIdentification(e);const t=this.idents.findIndex(t=>t.id===e),n=t>=0;if(n){const e=this.idents[t];e.account?this.principalService.guardPrincipalIsThisAccount(e.account.id):this.principalService.guardPrincipalBelongsToThisOrga(e.organization.id),this.idents.splice(t,1)}return n}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pu),Ke(Mu))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Eu(e,t){return new w(n=>{const i=e.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const c=j(e[a]);let l=!1;n.add(c.subscribe({next:e=>{l||(l=!0,o++),r[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==i&&l||(o===i&&n.next(t?t.reduce((e,t,n)=>(e[t]=r[n],e),{}):r),n.complete())}}))}})}const Fu=new ze("NgValueAccessor"),Nu={provide:Fu,useExisting:Ie(()=>Du),multi:!0};let Du=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(xs(Po),xs(Ao))},e.\u0275dir=vt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&zs("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[Oo([Nu])]}),e})();const zu={provide:Fu,useExisting:Ie(()=>Bu),multi:!0},Vu=new ze("CompositionEventMode");let Bu=(()=>{class e{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Ec()?Ec().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(xs(Po),xs(Ao),xs(Vu,8))},e.\u0275dir=vt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&zs("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[Oo([zu])]}),e})(),Lu=(()=>{class e{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e}),e})(),ju=(()=>{class e extends Lu{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(t){return Hu(t||e)},e.\u0275dir=vt({type:e,features:[so]}),e})();const Hu=Jn(ju);function $u(){throw new Error("unimplemented")}class Gu extends Lu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return $u()}get asyncValidator(){return $u()}}class Wu{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let qu=(()=>{class e extends Wu{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(xs(Gu,2))},e.\u0275dir=vt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&qs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[so]}),e})(),Ku=(()=>{class e extends Wu{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(xs(ju,2))},e.\u0275dir=vt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&qs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[so]}),e})();function Zu(e){return null==e||0===e.length}const Ju=new ze("NgValidators"),Qu=new ze("NgAsyncValidators"),Xu=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Yu{static min(e){return t=>{if(Zu(t.value)||Zu(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(Zu(t.value)||Zu(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return Zu(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Zu(e.value)||Xu.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(Zu(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return Yu.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(Zu(e.value))return null;const i=e.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(ed);return 0==t.length?null:function(e){return nd(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(ed);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(c(t))return Eu(t,null);if(l(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Eu(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Eu(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(z(e=>t(...e)))}return Eu(e,null)}(function(e,t){return t.map(t=>t(e))}(e,t).map(td)).pipe(z(nd))}}}function ed(e){return null!=e}function td(e){const t=Ns(e)?j(e):e;if(!Ds(t))throw new Error("Expected validator to return Promise or Observable.");return t}function nd(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function id(e){return e.validate?t=>e.validate(t):e}function rd(e){return e.validate?t=>e.validate(t):e}const sd={provide:Fu,useExisting:Ie(()=>od),multi:!0};let od=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(xs(Po),xs(Ao))},e.\u0275dir=vt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&zs("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Oo([sd])]}),e})();const ad={provide:Fu,useExisting:Ie(()=>ld),multi:!0};let cd=(()=>{class e{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),ld=(()=>{class e{constructor(e,t,n,i){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Gu),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return e.\u0275fac=function(t){return new(t||e)(xs(Po),xs(Ao),xs(cd),xs(us))},e.\u0275dir=vt({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&zs("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Oo([ad])]}),e})();const ud={provide:Fu,useExisting:Ie(()=>dd),multi:!0};let dd=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(xs(Po),xs(Ao))},e.\u0275dir=vt({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&zs("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Oo([ud])]}),e})();const hd='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',gd='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',fd={provide:Fu,useExisting:Ie(()=>md),multi:!0};function pd(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let md=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=ys}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=pd(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(xs(Po),xs(Ao))},e.\u0275dir=vt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&zs("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Oo([fd])]}),e})(),vd=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(pd(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(xs(Ao),xs(Po),xs(md,9))},e.\u0275dir=vt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const yd={provide:Fu,useExisting:Ie(()=>wd),multi:!0};function bd(e,t){return null==e?""+t:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let wd=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=ys}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const i=e.item(t),r=this._getOptionValue(i.value);n.push(r)}}else{const e=t.options;for(let t=0;t<e.length;t++){const i=e.item(t);if(i.selected){const e=this._getOptionValue(i.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(xs(Po),xs(Ao))},e.\u0275dir=vt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&zs("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Oo([yd])]}),e})(),_d=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(bd(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(bd(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(xs(Ao),xs(Po),xs(wd,9))},e.\u0275dir=vt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();function Od(e,t){return[...t.path,e]}function Id(e,t){e||Cd(t,"Cannot find control with"),t.valueAccessor||Cd(t,"No value accessor for form control with"),e.validator=Yu.compose([e.validator,t.validator]),e.asyncValidator=Yu.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Sd(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Sd(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Sd(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Cd(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function Ad(e){return null!=e?Yu.compose(e.map(id)):null}function kd(e){return null!=e?Yu.composeAsync(e.map(rd)):null}const xd=[Du,dd,od,md,wd,ld];function Ud(e){const t=Td(e)?e.validators:e;return Array.isArray(t)?Ad(t):t||null}function Pd(e,t){const n=Td(t)?t.asyncValidators:e;return Array.isArray(n)?kd(n):n||null}function Td(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Md{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Ud(e)}setAsyncValidators(e){this.asyncValidator=Pd(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING";const t=td(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let i=e;return t.forEach(e=>{i=i instanceof Ed?i.controls.hasOwnProperty(e)?i.controls[e]:null:i instanceof Fd&&i.at(e)||null}),i}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new wa,this.statusChanges=new wa}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Td(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Rd extends Md{constructor(e=null,t,n){super(Ud(t),Pd(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ed extends Md{constructor(e,t,n){super(Ud(t),Pd(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Rd?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,i)=>{t=t||this.contains(i)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,i)=>{n=t(n,e,i)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Fd extends Md{constructor(e,t,n){super(Ud(t),Pd(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Rd?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Nd={provide:ju,useExisting:Ie(()=>zd)},Dd=(()=>Promise.resolve(null))();let zd=(()=>{class e extends ju{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new wa,this.form=new Ed({},Ad(e),kd(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Dd.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Id(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Dd.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),function(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this._directives,e)})}addFormGroup(e){Dd.then(()=>{const t=this._findContainer(e.path),n=new Ed({});(function(e,t){null==e&&Cd(t,"Cannot find control with"),e.validator=Yu.compose([e.validator,t.validator]),e.asyncValidator=Yu.composeAsync([e.asyncValidator,t.asyncValidator])})(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Dd.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Dd.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(xs(Ju,10),xs(Qu,10))},e.\u0275dir=vt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&zs("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Oo([Nd]),so]}),e})(),Vd=(()=>{class e extends ju{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Od(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ad(this._validators)}get asyncValidator(){return kd(this._asyncValidators)}_checkParentType(){}}return e.\u0275fac=function(t){return Bd(t||e)},e.\u0275dir=vt({type:e,features:[so]}),e})();const Bd=Jn(Vd);class Ld{static modelParentException(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${hd}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${gd}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${hd}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${gd}`)}}const jd={provide:ju,useExisting:Ie(()=>Hd)};let Hd=(()=>{class e extends Vd{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){this._parent instanceof e||this._parent instanceof zd||Ld.modelGroupParentException()}}return e.\u0275fac=function(t){return new(t||e)(xs(ju,5),xs(Ju,10),xs(Qu,10))},e.\u0275dir=vt({type:e,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[Oo([jd]),so]}),e})();const $d={provide:Gu,useExisting:Ie(()=>Wd)},Gd=(()=>Promise.resolve(null))();let Wd=(()=>{class e extends Gu{constructor(e,t,n,i){super(),this.control=new Rd,this._registered=!1,this.update=new wa,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||Cd(e,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return t.forEach(t=>{var s;t.constructor===Bu?n=t:(s=t,xd.some(e=>s.constructor===e)?(i&&Cd(e,"More than one built-in value accessor matches form control with"),i=t):(r&&Cd(e,"More than one custom value accessor matches form control with"),r=t))}),r||i||n||(Cd(e,"No valid value accessor for form control with"),null)}(this,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!ys(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Od(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ad(this._rawValidators)}get asyncValidator(){return kd(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Id(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Hd)&&this._parent instanceof Vd?Ld.formGroupNameException():this._parent instanceof Hd||this._parent instanceof zd||Ld.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ld.missingNameException()}_updateValue(e){Gd.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;Gd.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(xs(ju,9),xs(Ju,10),xs(Qu,10),xs(Fu,10))},e.\u0275dir=vt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Oo([$d]),so,ho]}),e})(),qd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const Kd={provide:Ju,useExisting:Ie(()=>Zd),multi:!0};let Zd=(()=>{class e{get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()}validate(e){return this.required?Yu.required(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&Ss("required",t.required?"":null)},inputs:{required:"required"},features:[Oo([Kd])]}),e})();const Jd={provide:Ju,useExisting:Ie(()=>Qd),multi:!0};let Qd=(()=>{class e{ngOnChanges(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null==this.minlength?null:this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=Yu.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Ss("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[Oo([Jd]),ho]}),e})(),Xd=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)}}),e})(),Yd=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[cd],imports:[Xd]}),e})(),eh=(()=>{class e{constructor(e){this.el=e}ngAfterViewInit(){this.el.nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(xs(Ao))},e.\u0275dir=vt({type:e,selectors:[["","appAutofocus",""]]}),e})();function th(e,t){1&e&&(Ms(0,"div"),Ms(1,"p"),Xs(2,"Die Organisation ist noch gar nicht identifiziert."),Rs(),Rs())}function nh(e,t){if(1&e){const e=Fs();Ms(0,"button",35),zs("click",(function(){Gt(e);const t=Ls().index;return Ls(2).showIdentificationView(t)})),Xs(1,"anzeigen"),Rs()}}function ih(e,t){if(1&e){const e=Fs();Ms(0,"button",35),zs("click",(function(){return Gt(e),Ls(3).hideIdentificationView()})),Xs(1,"ausblenden"),Rs()}}function rh(e,t){if(1&e){const e=Fs();Ms(0,"li"),Ms(1,"span",31),Xs(2),Rs(),Ms(3,"span",32),Xs(4),Rs(),Ms(5,"button",33),zs("click",(function(){Gt(e);const n=t.index;return Ls(2).removeIdentification(n)})),Xs(6,"L\xf6schen"),Rs(),As(7,nh,2,0,"button",34),As(8,ih,2,0,"button",34),Rs()}if(2&e){const e=t.index,n=Ls(2);xi(2),eo(" ",n.getIdentificationProviderAsString(e)," "),xi(2),eo(" ",n.getIdentificationDescription(e)," "),xi(3),Ps("ngIf",n.idxDetailIdentification!==e),xi(1),Ps("ngIf",n.idxDetailIdentification===e)}}function sh(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"ul",28),As(2,rh,9,4,"li",29),Rs(),Es(3,"hr",30),Rs()),2&e){const e=Ls();xi(2),Ps("ngForOf",e.allIdentifications)}}function oh(e,t){1&e&&Es(0,"img",42)}function ah(e,t){if(1&e&&Es(0,"img",43),2&e){const e=Ls(2);js("src",null==e.identificationDetailView.organization?null:e.identificationDetailView.organization.logo,li)}}function ch(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"div",36),Ms(2,"div",37),Ms(3,"span",38),Xs(4),Rs(),As(5,oh,1,0,"img",39),As(6,ah,1,1,"img",40),Ms(7,"p"),Xs(8,"Name: "),Ms(9,"span",41),Xs(10),Rs(),Rs(),Ms(11,"p"),Xs(12,"Adresse: "),Ms(13,"span",41),Xs(14),Rs(),Rs(),Rs(),Rs(),Rs()),2&e){const e=Ls();xi(4),Ys(e.getDetailCardTitle()),xi(1),Ps("ngIf",!(null!=e.identificationDetailView.organization&&e.identificationDetailView.organization.logo)),xi(1),Ps("ngIf",null==e.identificationDetailView.organization?null:e.identificationDetailView.organization.logo),xi(4),Ys(null==e.identificationDetailView.organization?null:e.identificationDetailView.organization.name),xi(4),no("",null==e.identificationDetailView.organization||null==e.identificationDetailView.organization.address?null:e.identificationDetailView.organization.address.street,", ",null==e.identificationDetailView.organization||null==e.identificationDetailView.organization.address?null:e.identificationDetailView.organization.address.zipCode," ",null==e.identificationDetailView.organization||null==e.identificationDetailView.organization.address?null:e.identificationDetailView.organization.address.city,"")}}function lh(e,t){if(1&e&&(Ms(0,"option",44),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e.type),xi(1),eo(" ",e.text,"")}}let uh=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.principalService=t,this.identService=n,this.orgaDisplayName="",this.allIdentifications=[],this.newIdentification={provider:Iu.SelfIdent,organization:{address:{}}},this.showDetailView=!1,this.idxDetailIdentification=-1}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Organisations-Identifizierung"),this.orgaDisplayName=this.principalService.getOrgaName(),this.principal=this.principalService.getOrgaUser(),this.enumOptions=[{text:"Selbst-Identifikation",type:Iu.SelfIdent},{text:"Identifikation via Robo-Ident",type:Iu.RoboIdent},{text:"Identifikation via Veri-Ident",type:Iu.VeriIdent},{text:"Identifikation via Video-Ident",type:Iu.VideoIdent}],yield this._initMembers()}))}onSelectFile(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;const n=e.target.files[0];if(n.size>5242880)return void alert("Das Logo darf maximal 5MB gro\xdf sein!");t.readAsDataURL(n),t.onload=e=>{var t,n;this.imageFromFile=null!==(n=null===(t=e.target)||void 0===t?void 0:t.result)&&void 0!==n?n:void 0}}}_initMembers(){return wc(this,void 0,void 0,(function*(){this._resetFileInput(),this.allIdentifications=yield this.identService.getAllIdentificationsForOrga(this.principal.orgaId),this.imageFromFile=void 0,this.newIdentification={provider:Iu.SelfIdent,organization:{id:this.principal.orgaId,address:{}}},this.hideIdentificationView()}))}getIdentificationProviderAsString(e){return Iu[this.allIdentifications[e].provider]}getIdentificationDescription(e){var t;const n=this.allIdentifications[e];return`Vom: ${n.doneAt.toLocaleDateString()} - ${null===(t=n.organization)||void 0===t?void 0:t.name}`}removeIdentification(e){return wc(this,void 0,void 0,(function*(){yield this.identService.removeIdentification(this.allIdentifications[e].id),yield this._initMembers()}))}_resetFileInput(){document.getElementById("logo").value=""}onReset(){return wc(this,void 0,void 0,(function*(){yield this._initMembers()}))}addNewIdentification(){return wc(this,void 0,void 0,(function*(){this.newIdentification.organization.logo=this.imageFromFile,(yield this.identService.addNewIdentification(this.newIdentification))?yield this._initMembers():alert("Das Abspeichern der Identifikationsdaten hat nicht geklappt...")}))}getDetailCardTitle(){const e=this.identificationDetailView;return e?`Identifiziert am ${e.doneAt.toLocaleDateString()} \n                    durch Anbieter ${Iu[e.provider]}`:""}hideIdentificationView(){this.showDetailView=!1,this.idxDetailIdentification=-1,this.identificationDetailView=void 0}showIdentificationView(e){this.idxDetailIdentification=e,this.identificationDetailView=this.allIdentifications[e],this.identificationDetailView?this.showDetailView=!0:this.idxDetailIdentification=-1}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(Pu),xs(Ru))},e.\u0275cmp=dt({type:e,selectors:[["app-orga-ident-mgmt"]],decls:55,vars:12,consts:[[4,"ngIf"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["identForm","ngForm"],[1,"input-field","col","s3"],[1,"input-field","col","s4"],["name","identTyp",1,"browser-default",3,"ngModel","ngModelChange"],["identTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["type","text","id","name","name","name","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["firstname","ngModel"],["for","name"],[1,"input-field","col","s4","m2"],["type","text","id","zipCode","name","zipCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["for","zipCode"],[1,"input-field","col","s6","m5"],["type","text","id","city","name","city","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],["for","city"],["type","text","id","street","name","street","required","",1,"form-control",3,"ngModel","ngModelChange"],["street","ngModel"],["for","street"],["id","logo","name","logo","type","file","accept","image/*",3,"change"],["width","100px","height","100px",3,"src"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-danger",3,"click"],["class","btn-primary",3,"click",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"card","grey","lighten-4"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],["class","left-float","width","100px","height","100px","alt","Kein Logo vorhanden",4,"ngIf"],["class","left-float","width","100px","height","100px","alt","Firmen-Logo",3,"src",4,"ngIf"],[1,"bold"],["width","100px","height","100px","alt","Kein Logo vorhanden",1,"left-float"],["width","100px","height","100px","alt","Firmen-Logo",1,"left-float",3,"src"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ms(0,"h6"),Xs(1),Rs(),As(2,th,3,0,"div",0),As(3,sh,4,1,"div",0),As(4,ch,15,7,"div",0),Ms(5,"div",1),Ms(6,"h6"),Xs(7,"Hier kannst du die Organisation (erneut) identifizieren lassen."),Rs(),Ms(8,"p"),Xs(9,'Hier w\xfcrde man in Wirklichkeit zu einem Identifikations-Anbieter "wechseln", welcher die eigentliche Identifikation vornimmt und die Daten an uns \xfcbermittelt.'),Rs(),Ms(10,"form",2,3),zs("ngSubmit",(function(){return t.addNewIdentification()})),Ms(12,"div",1),Ms(13,"div",4),Ms(14,"p"),Xs(15,"Identifikations-Anbieter"),Rs(),Rs(),Ms(16,"div",5),Ms(17,"select",6,7),zs("ngModelChange",(function(e){return t.newIdentification.provider=e})),As(19,lh,2,2,"option",8),Rs(),Rs(),Rs(),Ms(20,"div",1),Ms(21,"div",9),Ms(22,"input",10,11),zs("ngModelChange",(function(e){return t.newIdentification.organization.name=e})),Rs(),Ms(24,"label",12),Xs(25,"Offizieller Name"),Rs(),Rs(),Rs(),Xs(26," Adresse des Firmensitzes: "),Ms(27,"div",1),Ms(28,"div",13),Ms(29,"input",14,15),zs("ngModelChange",(function(e){return t.newIdentification.organization.address.zipCode=e})),Rs(),Ms(31,"label",16),Xs(32,"Postleitzahl"),Rs(),Rs(),Ms(33,"div",17),Ms(34,"input",18,19),zs("ngModelChange",(function(e){return t.newIdentification.organization.address.city=e})),Rs(),Ms(36,"label",20),Xs(37,"Ort"),Rs(),Rs(),Ms(38,"div",17),Ms(39,"input",21,22),zs("ngModelChange",(function(e){return t.newIdentification.organization.address.street=e})),Rs(),Ms(41,"label",23),Xs(42,"Stra\xdfe incl. Hausnummer"),Rs(),Rs(),Rs(),Es(43,"br"),Ms(44,"p"),Xs(45,"Firmenlogo hochladen...\xa0\xa0\xa0 "),Ms(46,"input",24),zs("change",(function(e){return t.onSelectFile(e)})),Rs(),Rs(),Es(47,"br"),Es(48,"img",25),Es(49,"br"),Ms(50,"div",1),Ms(51,"button",26),zs("click",(function(){return t.onReset()})),Xs(52,"Verwerfen"),Rs(),Ms(53,"button",27),Xs(54,"\xdcbernehmen"),Rs(),Rs(),Rs(),Rs()),2&e){const e=ks(11);xi(1),eo(" Die Organisation ",t.orgaDisplayName," ist derzeit folgenderma\xdfen identifiziert:"),xi(1),Ps("ngIf",0===t.allIdentifications.length),xi(1),Ps("ngIf",t.allIdentifications.length>0),xi(1),Ps("ngIf",t.showDetailView),xi(13),Ps("ngModel",t.newIdentification.provider),xi(2),Ps("ngForOf",t.enumOptions),xi(3),Ps("ngModel",t.newIdentification.organization.name),xi(7),Ps("ngModel",t.newIdentification.organization.address.zipCode),xi(5),Ps("ngModel",t.newIdentification.organization.address.city),xi(5),Ps("ngModel",t.newIdentification.organization.address.street),xi(9),Ps("src",t.imageFromFile,li),xi(5),Ps("disabled",!e.valid)}},directives:[al,qd,Ku,zd,md,qu,Wd,sl,Bu,Zd,eh,vd,_d],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:8rem}.list-item-text[_ngcontent-%COMP%]{width:30rem}.row[_ngcontent-%COMP%]{margin-bottom:0!important}select[_ngcontent-%COMP%]{border:3px solid teal}.card[_ngcontent-%COMP%]{width:40rem;height:12rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding-top:1rem!important}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3rem!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.left-float[_ngcontent-%COMP%]{float:left;margin-right:2rem}.liste[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;margin-left:1rem;color:#fff;cursor:pointer}"]}),e})();function dh(e,t){1&e&&(Ms(0,"div"),Ms(1,"p"),Xs(2,"Du bist noch gar nicht identifiziert."),Rs(),Rs())}function hh(e,t){if(1&e){const e=Fs();Ms(0,"li"),Ms(1,"span",38),Xs(2),Rs(),Ms(3,"span",39),Xs(4),Rs(),Ms(5,"button",40),zs("click",(function(){Gt(e);const n=t.index;return Ls(2).removeIdentification(n)})),Xs(6,"L\xf6schen"),Rs(),Rs()}if(2&e){const e=t.index,n=Ls(2);xi(2),eo(" ",n.getIdentificationProviderAsString(e)," "),xi(2),eo(" ",n.getIdentificationDescription(e)," ")}}function gh(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"ul",35),As(2,hh,7,2,"li",36),Rs(),Es(3,"hr",37),Rs()),2&e){const e=Ls();xi(2),Ps("ngForOf",e.allIdentificationsOfUser)}}function fh(e,t){if(1&e&&(Ms(0,"option",41),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e.type),xi(1),eo(" ",e.text,"")}}let ph=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.principalService=t,this.identService=n,this.usersDisplayName="",this.allIdentificationsOfUser=[],this.newIdentification={provider:Iu.SelfIdent,account:{address:{}}}}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Identifikationsdaten-Verwaltung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this.enumOptions=[{text:"Selbst-Identifikation",type:Iu.SelfIdent},{text:"Identifikation via Robo-Ident",type:Iu.RoboIdent},{text:"Identifikation via Veri-Ident",type:Iu.VeriIdent},{text:"Identifikation via Video-Ident",type:Iu.VideoIdent}],yield this._initMembers()}))}onSelectFile(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;const n=e.target.files[0];if(n.size>5242880)return void alert("Das Photo darf maximal 5MB gro\xdf sein!");t.readAsDataURL(n),t.onload=e=>{var t,n;this.imageFromFile=null!==(n=null===(t=e.target)||void 0===t?void 0:t.result)&&void 0!==n?n:void 0}}}_initMembers(){return wc(this,void 0,void 0,(function*(){this._resetFileInput(),this.allIdentificationsOfUser=yield this.identService.getAllIdentificationsForUser(this.principal.id),this.imageFromFile=void 0,this.dateOfBirthAsString=void 0,this.newIdentification={provider:Iu.SelfIdent,account:{id:this.principal.id,address:{}}}}))}getIdentificationProviderAsString(e){return Iu[this.allIdentificationsOfUser[e].provider]}getIdentificationDescription(e){var t,n,i,r,s,o,a,c,l;const u=this.allIdentificationsOfUser[e];return`Vom: ${u.doneAt.toLocaleDateString()} - \n            ${null===(t=u.account)||void 0===t?void 0:t.firstname} ${null===(n=u.account)||void 0===n?void 0:n.lastname} ${null===(i=u.account)||void 0===i?void 0:i.dateOfBirth.toLocaleDateString()} -\n            ${null===(s=null===(r=u.account)||void 0===r?void 0:r.address)||void 0===s?void 0:s.zipCode} ${null===(a=null===(o=u.account)||void 0===o?void 0:o.address)||void 0===a?void 0:a.city} ${null===(l=null===(c=u.account)||void 0===c?void 0:c.address)||void 0===l?void 0:l.street}`}removeIdentification(e){return wc(this,void 0,void 0,(function*(){yield this.identService.removeIdentification(this.allIdentificationsOfUser[e].id),yield this._initMembers()}))}_resetFileInput(){document.getElementById("photo").value=""}onReset(){return wc(this,void 0,void 0,(function*(){yield this._initMembers()}))}addNewIdentification(){return wc(this,void 0,void 0,(function*(){this.dateOfBirthAsString&&(this.newIdentification.account.dateOfBirth=new Date(this.dateOfBirthAsString)),this.newIdentification.account.photo=this.imageFromFile,(yield this.identService.addNewIdentification(this.newIdentification))?yield this._initMembers():alert("Das Abspeichern der Identifikationsdaten hat nicht geklappt...")}))}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(Pu),xs(Ru))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-ident-mgmt"]],decls:63,vars:13,consts:[[4,"ngIf"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["identForm","ngForm"],[1,"input-field","col","s3"],[1,"input-field","col","s4"],["name","identTyp",1,"browser-default",3,"ngModel","ngModelChange"],["identTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s6","m4"],["type","text","id","firstname","name","firstname","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["firstname","ngModel"],["for","firstname"],["type","text","id","lastname","name","lastname","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastname","ngModel"],["for","lastname"],[1,"input-field","col","s3","m3"],["type","date","id","dateOfBirth","name","dateOfBirth","required","",1,"datepicker",3,"ngModel","ngModelChange"],["dateOfBirth","ngModel"],["for","dateOfBirth"],[1,"input-field","col","s4","m2"],["type","text","id","zipCode","name","zipCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["for","zipCode"],[1,"input-field","col","s6","m5"],["type","text","id","city","name","city","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],["for","city"],["type","text","id","street","name","street","required","",1,"form-control",3,"ngModel","ngModelChange"],["street","ngModel"],["for","street"],["id","photo","name","photo","type","file","accept","image/*",3,"change"],["width","100px","height","100px",3,"src"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-danger",3,"click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ms(0,"h6"),Xs(1),Rs(),As(2,dh,3,0,"div",0),As(3,gh,4,1,"div",0),Ms(4,"div",1),Ms(5,"h6"),Xs(6,"Hier kannst du dich (erneut) identifizieren lassen."),Rs(),Ms(7,"p"),Xs(8,'Hier w\xfcrde man in Wirklichkeit zu einem Identifikations-Anbieter "wechseln", welcher die eigentliche Identifikation vornimmt und die Daten an uns \xfcbermittelt.'),Rs(),Ms(9,"form",2,3),zs("ngSubmit",(function(){return t.addNewIdentification()})),Ms(11,"div",1),Ms(12,"div",4),Ms(13,"p"),Xs(14,"Identifikations-Anbieter"),Rs(),Rs(),Ms(15,"div",5),Ms(16,"select",6,7),zs("ngModelChange",(function(e){return t.newIdentification.provider=e})),As(18,fh,2,2,"option",8),Rs(),Rs(),Rs(),Ms(19,"div",1),Ms(20,"div",9),Ms(21,"input",10,11),zs("ngModelChange",(function(e){return t.newIdentification.account.firstname=e})),Rs(),Ms(23,"label",12),Xs(24,"Vorname"),Rs(),Rs(),Ms(25,"div",9),Ms(26,"input",13,14),zs("ngModelChange",(function(e){return t.newIdentification.account.lastname=e})),Rs(),Ms(28,"label",15),Xs(29,"Nachname"),Rs(),Rs(),Ms(30,"div",16),Ms(31,"input",17,18),zs("ngModelChange",(function(e){return t.dateOfBirthAsString=e})),Rs(),Ms(33,"label",19),Xs(34,"Geburtsdatum"),Rs(),Rs(),Rs(),Ms(35,"div",1),Ms(36,"div",20),Ms(37,"input",21,22),zs("ngModelChange",(function(e){return t.newIdentification.account.address.zipCode=e})),Rs(),Ms(39,"label",23),Xs(40,"Postleitzahl"),Rs(),Rs(),Ms(41,"div",24),Ms(42,"input",25,26),zs("ngModelChange",(function(e){return t.newIdentification.account.address.city=e})),Rs(),Ms(44,"label",27),Xs(45,"Ort"),Rs(),Rs(),Ms(46,"div",24),Ms(47,"input",28,29),zs("ngModelChange",(function(e){return t.newIdentification.account.address.street=e})),Rs(),Ms(49,"label",30),Xs(50,"Stra\xdfe incl. Hausnummer"),Rs(),Rs(),Rs(),Es(51,"br"),Ms(52,"p"),Xs(53,"Bild f\xfcr die Identifikation hochladen...\xa0\xa0\xa0 "),Ms(54,"input",31),zs("change",(function(e){return t.onSelectFile(e)})),Rs(),Rs(),Es(55,"br"),Es(56,"img",32),Es(57,"br"),Ms(58,"div",1),Ms(59,"button",33),zs("click",(function(){return t.onReset()})),Xs(60,"Verwerfen"),Rs(),Ms(61,"button",34),Xs(62,"\xdcbernehmen"),Rs(),Rs(),Rs(),Rs()),2&e){const e=ks(10);xi(1),eo(" Hallo ",t.usersDisplayName,", \xfcber folgende Provider hast du dich identifzieren lassen:"),xi(1),Ps("ngIf",0===t.allIdentificationsOfUser.length),xi(1),Ps("ngIf",t.allIdentificationsOfUser.length>0),xi(13),Ps("ngModel",t.newIdentification.provider),xi(2),Ps("ngForOf",t.enumOptions),xi(3),Ps("ngModel",t.newIdentification.account.firstname),xi(5),Ps("ngModel",t.newIdentification.account.lastname),xi(5),Ps("ngModel",t.dateOfBirthAsString),xi(6),Ps("ngModel",t.newIdentification.account.address.zipCode),xi(5),Ps("ngModel",t.newIdentification.account.address.city),xi(5),Ps("ngModel",t.newIdentification.account.address.street),xi(9),Ps("src",t.imageFromFile,li),xi(5),Ps("disabled",!e.valid)}},directives:[al,qd,Ku,zd,md,qu,Wd,sl,Bu,Zd,eh,vd,_d],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:8em}.row[_ngcontent-%COMP%]{margin-bottom:0!important}select[_ngcontent-%COMP%]{border:3px solid teal}"]}),e})();var mh=function(e){return e[e.FIBU=1]="FIBU",e[e.FOLDERS_AND_DOCS=2]="FOLDERS_AND_DOCS",e[e.BILANZ=3]="BILANZ",e[e.TAX=4]="TAX",e}({});class vh extends C{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new O;return this._value}next(e){super.next(this._value=e)}}const yh=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),bh={};class wh{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new _h(e,this.resultSelector))}}class _h extends D{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(bh),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(N(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,i,r){const s=this.values,o=this.toRespond?s[n]===bh?--this.toRespond:this.toRespond:0;s[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Oh=new w(e=>e.complete());function Ih(e){return e?function(e){return new w(t=>e.schedule(()=>t.complete()))}(e):Oh}function Sh(e){return new w(t=>{let n;try{n=e()}catch(i){return void t.error(i)}return(n?j(n):Ih()).subscribe(t)})}function Ch(){return W(1)}const Ah=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function kh(e){return function(t){return 0===e?Ih():t.lift(new xh(e))}}class xh{constructor(e){if(this.total=e,this.total<0)throw new Ah}call(e,t){return t.subscribe(new Uh(e,this.total))}}class Uh extends f{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=t++%n;e.next(i[r])}}e.complete()}}function Ph(e=Rh){return t=>t.lift(new Th(e))}class Th{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Mh(e,this.errorFactory))}}class Mh extends f{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Rh(){return new yh}function Eh(e=null){return t=>t.lift(new Fh(e))}class Fh{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Nh(e,this.defaultValue))}}class Nh extends f{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Dh(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Pc((t,n)=>e(t,n,i)):v,kh(1),n?Eh(t):Ph(()=>new yh))}function zh(e){return function(t){const n=new Vh(e),i=t.lift(n);return n.caught=i}}class Vh{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Bh(e,this.selector,this.caught))}}class Bh extends D{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const i=new x(this,void 0,void 0);this.add(i);const r=N(this,n,void 0,void 0,i);r!==i&&this.add(r)}}}function Lh(e){return t=>0===e?Ih():t.lift(new jh(e))}class jh{constructor(e){if(this.total=e,this.total<0)throw new Ah}call(e,t){return t.subscribe(new Hh(e,this.total))}}class Hh extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function $h(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Pc((t,n)=>e(t,n,i)):v,Lh(1),n?Eh(t):Ph(()=>new yh))}class Gh{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new Wh(e,this.predicate,this.thisArg,this.source))}}class Wh extends f{constructor(e,t,n,i){super(e),this.predicate=t,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function qh(e,t){return"function"==typeof t?n=>n.pipe(qh((n,i)=>j(e(n,i)).pipe(z((e,r)=>t(n,e,i,r))))):t=>t.lift(new Kh(e))}class Kh{constructor(e){this.project=e}call(e,t){return t.subscribe(new Zh(e,this.project))}}class Zh extends D{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t,e,n)}_innerSub(e,t,n){const i=this.innerSubscription;i&&i.unsubscribe();const r=new x(this,t,n),s=this.destination;s.add(r),this.innerSubscription=N(this,e,void 0,void 0,r),this.innerSubscription!==r&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,i,r){this.destination.next(t)}}function Jh(...e){return Ch()(xc(...e))}function Qh(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new Xh(e,t,n))}}class Xh{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Yh(e,this.accumulator,this.seed,this.hasSeed))}}class Yh extends f{constructor(e,t,n,i){super(e),this.accumulator=t,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function eg(){}function tg(e,t,n){return function(i){return i.lift(new ng(e,t,n))}}class ng{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new ig(e,this.nextOrObserver,this.error,this.complete))}}class ig extends f{constructor(e,t,n,r){super(e),this._tapNext=eg,this._tapError=eg,this._tapComplete=eg,this._tapError=n||eg,this._tapComplete=r||eg,i(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||eg,this._tapError=t.error||eg,this._tapComplete=t.complete||eg)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class rg{constructor(e){this.callback=e}call(e,t){return t.subscribe(new sg(e,this.callback))}}class sg extends f{constructor(e,t){super(e),this.add(new d(t))}}class og{constructor(e,t){this.id=e,this.url=t}}class ag extends og{constructor(e,t,n="imperative",i=null){super(e,t),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cg extends og{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lg extends og{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ug extends og{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dg extends og{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hg extends og{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gg extends og{constructor(e,t,n,i,r){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fg extends og{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pg extends og{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mg{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vg{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yg{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bg{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wg{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _g{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Og{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ig=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=dt({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Es(0,"router-outlet")},directives:function(){return[kp]},encapsulation:2}),e})();class Sg{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Cg(e){return new Sg(e)}function Ag(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function kg(e,t,n){const i=n.path.split("/");if(i.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let s=0;s<i.length;s++){const t=i[s],n=e[s];if(t.startsWith(":"))r[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}class xg{constructor(e,t){this.routes=e,this.module=t}}function Ug(e,t=""){for(let n=0;n<e.length;n++){const i=e[n];Pg(i,Tg(t,i))}}function Pg(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Ug(e.children,t)}function Tg(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Mg(e){const t=e.children&&e.children.map(Mg),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Ig),n}function Rg(e,t){const n=Object.keys(e),i=Object.keys(t);if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Eg(e[r],t[r]))return!1;return!0}function Eg(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every(e=>t.indexOf(e)>-1):e===t}function Fg(e){return Array.prototype.concat.apply([],e)}function Ng(e){return e.length>0?e[e.length-1]:null}function Dg(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function zg(e){return Ds(e)?e:Ns(e)?j(Promise.resolve(e)):xc(e)}function Vg(e,t,n){return n?function(e,t){return Rg(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Hg(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Eg(e[n],t[n]))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,i,r){if(n.segments.length>r.length)return!!Hg(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!Hg(n.segments,r))return!1;for(const t in i.children){if(!n.children[t])return!1;if(!e(n.children[t],i.children[t]))return!1}return!0}{const e=r.slice(0,n.segments.length),s=r.slice(n.segments.length);return!!Hg(n.segments,e)&&!!n.children.primary&&t(n.children.primary,i,s)}}(t,n,n.segments)}(e.root,t.root)}class Bg{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cg(this.queryParams)),this._queryParamMap}toString(){return qg.serialize(this)}}class Lg{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Dg(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kg(this)}}class jg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Cg(this.parameters)),this._parameterMap}toString(){return ef(this)}}function Hg(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function $g(e,t){let n=[];return Dg(e.children,(e,i)=>{"primary"===i&&(n=n.concat(t(e,i)))}),Dg(e.children,(e,i)=>{"primary"!==i&&(n=n.concat(t(e,i)))}),n}class Gg{}class Wg{parse(e){const t=new of(e);return new Bg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${"/"+function e(t,n){if(!t.hasChildren())return Kg(t);if(n){const n=t.children.primary?e(t.children.primary,!1):"",i=[];return Dg(t.children,(t,n)=>{"primary"!==n&&i.push(`${n}:${e(t,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=$g(t,(n,i)=>"primary"===i?[e(t.children.primary,!1)]:[`${i}:${e(n,!1)}`]);return`${Kg(t)}/(${n.join("//")})`}}(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Jg(t)}=${Jg(e)}`).join("&"):`${Jg(t)}=${Jg(n)}`});return t.length?"?"+t.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const qg=new Wg;function Kg(e){return e.segments.map(e=>ef(e)).join("/")}function Zg(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jg(e){return Zg(e).replace(/%3B/gi,";")}function Qg(e){return Zg(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xg(e){return decodeURIComponent(e)}function Yg(e){return Xg(e.replace(/\+/g,"%20"))}function ef(e){return`${Qg(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Qg(e)}=${Qg(t[e])}`).join("")}`;var t}const tf=/^[^\/()?;=#]+/;function nf(e){const t=e.match(tf);return t?t[0]:""}const rf=/^[^=?&#]+/,sf=/^[^?&#]+/;class of{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Lg([],{}):new Lg([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Lg(e,t)),n}parseSegment(){const e=nf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new jg(Xg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nf(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=nf(this.remaining);e&&(n=e,this.capture(n))}e[Xg(t)]=Xg(n)}parseQueryParam(e){const t=function(e){const t=e.match(rf);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(sf);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const i=Yg(t),r=Yg(n);if(e.hasOwnProperty(i)){let t=e[i];Array.isArray(t)||(t=[t],e[i]=t),t.push(r)}else e[i]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=nf(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r="primary");const s=this.parseChildren();t[r]=1===Object.keys(s).length?s.primary:new Lg([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class af{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=cf(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=cf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return lf(e,this._root).map(e=>e.value)}}function cf(e,t){if(e===t.value)return t;for(const n of t.children){const t=cf(e,n);if(t)return t}return null}function lf(e,t){if(e===t.value)return[t];for(const n of t.children){const i=lf(e,n);if(i.length)return i.unshift(t),i}return[]}class uf{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function df(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class hf extends af{constructor(e,t){super(e),this.snapshot=t,yf(this,e)}toString(){return this.snapshot.toString()}}function gf(e,t){const n=function(e,t){const n=new mf([],{},{},"",{},"primary",t,null,e.root,-1,{});return new vf("",new uf(n,[]))}(e,t),i=new vh([new jg("",{})]),r=new vh({}),s=new vh({}),o=new vh({}),a=new vh(""),c=new ff(i,r,o,a,s,"primary",t,n.root);return c.snapshot=n.root,new hf(new uf(c,[]),n)}class ff{constructor(e,t,n,i,r,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(z(e=>Cg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(z(e=>Cg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pf(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const e=n[i],t=n[i-1];if(e.routeConfig&&""===e.routeConfig.path)i--;else{if(t.component)break;i--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class mf{constructor(e,t,n,i,r,s,o,a,c,l,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vf extends af{constructor(e,t){super(t),this.url=e,yf(this,t)}toString(){return bf(this._root)}}function yf(e,t){t.value._routerState=e,t.children.forEach(t=>yf(e,t))}function bf(e){const t=e.children.length>0?` { ${e.children.map(bf).join(", ")} } `:"";return`${e.value}${t}`}function wf(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Rg(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Rg(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Rg(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Rg(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function _f(e,t){var n,i;return Rg(e.params,t.params)&&Hg(n=e.url,i=t.url)&&n.every((e,t)=>Rg(e.parameters,i[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||_f(e.parent,t.parent))}function Of(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function If(e,t,n,i,r){let s={};return i&&Dg(i,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>""+e):""+e}),new Bg(n.root===e?t:function e(t,n,i){const r={};return Dg(t.children,(t,s)=>{r[s]=t===n?i:e(t,n,i)}),new Lg(t.segments,r)}(n.root,e,t),s,r)}class Sf{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Of(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(i&&i!==Ng(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cf{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Af(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function kf(e,t,n){if(e||(e=new Lg([],{})),0===e.segments.length&&e.hasChildren())return xf(e,t,n);const i=function(e,t,n){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return s;const t=e.segments[r],o=Af(n[i]),a=i<n.length-1?n[i+1]:null;if(r>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!Mf(o,a,t))return s;i+=2}else{if(!Mf(o,{},t))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const t=new Lg(e.segments.slice(0,i.pathIndex),{});return t.children.primary=new Lg(e.segments.slice(i.pathIndex),e.children),xf(t,0,r)}return i.match&&0===r.length?new Lg(e.segments,{}):i.match&&!e.hasChildren()?Uf(e,t,n):i.match?xf(e,0,r):Uf(e,t,n)}function xf(e,t,n){if(0===n.length)return new Lg(e.segments,{});{const i=function(e){return"object"!=typeof e[0]||void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),r={};return Dg(i,(n,i)=>{null!==n&&(r[i]=kf(e.children[i],t,n))}),Dg(e.children,(e,t)=>{void 0===i[t]&&(r[t]=e)}),new Lg(e.segments,r)}}function Uf(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){if("object"==typeof n[r]&&void 0!==n[r].outlets){const e=Pf(n[r].outlets);return new Lg(i,e)}if(0===r&&Of(n[0])){i.push(new jg(e.segments[t].path,n[0])),r++;continue}const s=Af(n[r]),o=r<n.length-1?n[r+1]:null;s&&o&&Of(o)?(i.push(new jg(s,Tf(o))),r+=2):(i.push(new jg(s,{})),r++)}return new Lg(i,{})}function Pf(e){const t={};return Dg(e,(e,n)=>{null!==e&&(t[n]=Uf(new Lg([],{}),0,e))}),t}function Tf(e){const t={};return Dg(e,(e,n)=>t[n]=""+e),t}function Mf(e,t,n){return e==n.path&&Rg(t,n.parameters)}class Rf{constructor(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),wf(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const i=df(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,i[t],n),delete i[t]}),Dg(i,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(e,t,r.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:i})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const i=df(e),r=e.value.component?n.children:t;Dg(i,(e,t)=>this.deactivateRouteAndItsChildren(e,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const i=df(t);e.children.forEach(e=>{this.activateRoutes(e,i[e.value.outlet],n),this.forwardEvent(new _g(e.value.snapshot))}),e.children.length&&this.forwardEvent(new bg(e.value.snapshot))}activateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(wf(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,r.children)}else this.activateChildRoutes(e,t,n);else if(i.component){const t=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const e=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Ef(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=i,t.resolver=r,t.outlet&&t.outlet.activateWith(i,r),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Ef(e){wf(e.value),e.children.forEach(Ef)}function Ff(e){return"function"==typeof e}function Nf(e){return e instanceof Bg}class Df{constructor(e){this.segmentGroup=e||null}}class zf{constructor(e){this.urlTree=e}}function Vf(e){return new w(t=>t.error(new Df(e)))}function Bf(e){return new w(t=>t.error(new zf(e)))}function Lf(e){return new w(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class jf{constructor(e,t,n,i,r){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=e.get(Xe)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(z(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(zh(e=>{if(e instanceof zf)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Df)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(z(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(zh(e=>{if(e instanceof Df)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const i=e.segments.length>0?new Lg([],{primary:e}):e;return new Bg(i,t,n)}expandSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(z(e=>new Lg([],e))):this.expandSegment(e,n,t,n.segments,i,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return xc({});const n=[],i=[],r={};return Dg(e,(e,s)=>{const o=t(s,e).pipe(z(e=>r[s]=e));"primary"===s?n.push(o):i.push(o)}),xc.apply(null,n.concat(i)).pipe(Ch(),Dh(),z(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(e,t,i,n))}expandSegment(e,t,n,i,r,s){return xc(...n).pipe(z(o=>this.expandSegmentAgainstRoute(e,t,n,o,i,r,s).pipe(zh(e=>{if(e instanceof Df)return xc(null);throw e}))),Ch(),$h(e=>!!e),zh((e,n)=>{if(e instanceof yh||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,i,r))return xc(new Lg([],{}));throw new Df(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,i,r,s,o){return Wf(i)!==s?Vf(t):void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,r):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s):Vf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Bf(r):this.lineralizeSegments(n,r).pipe(H(n=>{const r=new Lg(n,{});return this.expandSegment(e,r,t,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:l}=Hf(t,i,r);if(!o)return Vf(t);const u=this.applyRedirectCommands(a,i.redirectTo,l);return i.redirectTo.startsWith("/")?Bf(u):this.lineralizeSegments(i,u).pipe(H(i=>this.expandSegment(e,t,n,i.concat(r.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(z(e=>(n._loadedConfig=e,new Lg(i,{})))):xc(new Lg(i,{}));const{matched:r,consumedSegments:s,lastChild:o}=Hf(t,n,i);if(!r)return Vf(t);const a=i.slice(o);return this.getChildConfig(e,n,i).pipe(H(e=>{const n=e.module,i=e.routes,{segmentGroup:r,slicedSegments:o}=function(e,t,n,i){return n.length>0&&function(e,t,n){return n.some(n=>Gf(e,t,n)&&"primary"!==Wf(n))}(e,n,i)?{segmentGroup:$f(new Lg(t,function(e,t){const n={};n.primary=t;for(const i of e)""===i.path&&"primary"!==Wf(i)&&(n[Wf(i)]=new Lg([],{}));return n}(i,new Lg(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>Gf(e,t,n))}(e,n,i)?{segmentGroup:$f(new Lg(e.segments,function(e,t,n,i){const r={};for(const s of n)Gf(e,t,s)&&!i[Wf(s)]&&(r[Wf(s)]=new Lg([],{}));return Object.assign(Object.assign({},i),r)}(e,n,i,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,a,i);return 0===o.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(z(e=>new Lg(s,e))):0===i.length&&0===o.length?xc(new Lg(s,{})):this.expandSegment(n,r,i,o,"primary",!0).pipe(z(e=>new Lg(s.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?xc(new xg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?xc(t._loadedConfig):function(e,t,n){const i=t.canLoad;return i&&0!==i.length?j(i).pipe(z(i=>{const r=e.get(i);let s;if(function(e){return e&&Ff(e.canLoad)}(r))s=r.canLoad(t,n);else{if(!Ff(r))throw new Error("Invalid CanLoad guard");s=r(t,n)}return zg(s)})).pipe(Ch(),(r=e=>!0===e,e=>e.lift(new Gh(r,void 0,e)))):xc(!0);var r}(e.injector,t,n).pipe(H(n=>n?this.configLoader.load(e.injector,t).pipe(z(e=>(t._loadedConfig=e,e))):function(e){return new w(t=>t.error(Ag(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):xc(new xg([],e))}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return xc(n);if(i.numberOfChildren>1||!i.children.primary)return Lf(e.redirectTo);i=i.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,i){const r=this.createSegmentGroup(e,t.root,n,i);return new Bg(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Dg(e,(e,i)=>{if("string"==typeof e&&e.startsWith(":")){const r=e.substring(1);n[i]=t[r]}else n[i]=e}),n}createSegmentGroup(e,t,n,i){const r=this.createSegments(e,t.segments,n,i);let s={};return Dg(t.children,(t,r)=>{s[r]=this.createSegmentGroup(e,t,n,i)}),new Lg(r,s)}createSegments(e,t,n,i){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,i):this.findOrReturn(t,n))}findPosParam(e,t,n){const i=n[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let n=0;for(const i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}}function Hf(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(t.matcher||kg)(n,e,t);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function $f(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Lg(e.segments.concat(t.segments),t.children)}return e}function Gf(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Wf(e){return e.outlet||"primary"}class qf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kf{constructor(e,t){this.component=e,this.route=t}}function Zf(e,t,n){const i=e._root;return function e(t,n,i,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=df(n);return t.children.forEach(t=>{!function(t,n,i,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,a=n?n.value:null,c=i?i.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Hg(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Hg(e.url,t.url)||!Rg(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_f(e,t)||!Rg(e.queryParams,t.queryParams);case"paramsChange":default:return!_f(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new qf(r)):(o.data=a.data,o._resolvedData=a._resolvedData),e(t,n,o.component?c?c.children:null:i,r,s),l&&s.canDeactivateChecks.push(new Kf(c&&c.outlet&&c.outlet.component||null,a))}else a&&Qf(n,c,s),s.canActivateChecks.push(new qf(r)),e(t,null,o.component?c?c.children:null:i,r,s)}(t,o[t.value.outlet],i,r.concat([t.value]),s),delete o[t.value.outlet]}),Dg(o,(e,t)=>Qf(e,i.getContext(t),s)),s}(i,t?t._root:null,n,[i.value])}function Jf(e,t,n){const i=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function Qf(e,t,n){const i=df(e),r=e.value;Dg(i,(e,i)=>{Qf(e,r.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new Kf(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}const Xf=Symbol("INITIAL_VALUE");function Yf(){return qh(e=>function(...e){let t=null,n=null;return k(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),q(e,n).lift(new wh(t))}(...e.map(e=>e.pipe(Lh(1),function(...e){const t=e[e.length-1];return k(t)?(e.pop(),n=>Jh(e,n,t)):t=>Jh(e,t)}(Xf)))).pipe(Qh((e,t)=>{let n=!1;return t.reduce((e,i,r)=>{if(e!==Xf)return e;if(i===Xf&&(n=!0),!n){if(!1===i)return i;if(r===t.length-1||Nf(i))return i}return e},e)},Xf),Pc(e=>e!==Xf),z(e=>Nf(e)?e:!0===e),Lh(1)))}function ep(e,t){return null!==e&&t&&t(new wg(e)),xc(!0)}function tp(e,t){return null!==e&&t&&t(new yg(e)),xc(!0)}function np(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;return i&&0!==i.length?xc(i.map(i=>Sh(()=>{const r=Jf(i,t,n);let s;if(function(e){return e&&Ff(e.canActivate)}(r))s=zg(r.canActivate(t,e));else{if(!Ff(r))throw new Error("Invalid CanActivate guard");s=zg(r(t,e))}return s.pipe($h())}))).pipe(Yf()):xc(!0)}function ip(e,t,n){const i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Sh(()=>xc(t.guards.map(r=>{const s=Jf(r,t.node,n);let o;if(function(e){return e&&Ff(e.canActivateChild)}(s))o=zg(s.canActivateChild(i,e));else{if(!Ff(s))throw new Error("Invalid CanActivateChild guard");o=zg(s(i,e))}return o.pipe($h())})).pipe(Yf())));return xc(r).pipe(Yf())}class rp{}class sp{constructor(e,t,n,i,r,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){try{const e=cp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new mf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new uf(n,t),r=new vf(this.url,i);return this.inheritParamsAndData(r._root),xc(r)}catch(e){return new w(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=pf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=$g(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),i=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${i}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,i){for(const s of e)try{return this.processSegmentAgainstRoute(s,t,n,i)}catch(r){if(!(r instanceof rp))throw r}if(this.noLeftoversInUrl(t,n,i))return[];throw new rp}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,i){if(e.redirectTo)throw new rp;if((e.outlet||"primary")!==i)throw new rp;let r,s=[],o=[];if("**"===e.path){const s=n.length>0?Ng(n).parameters:{};r=new mf(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dp(e),i,e.component,e,op(t),ap(t)+n.length,hp(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new rp;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(t.matcher||kg)(n,e,t);if(!i)throw new rp;const r={};Dg(i.posParams,(e,t)=>{r[t]=e.path});const s=i.consumed.length>0?Object.assign(Object.assign({},r),i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s}}(t,e,n);s=a.consumedSegments,o=n.slice(a.lastChild),r=new mf(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dp(e),i,e.component,e,op(t),ap(t)+s.length,hp(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:l}=cp(t,s,o,a,this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const e=this.processChildren(a,c);return[new uf(r,e)]}if(0===a.length&&0===l.length)return[new uf(r,[])];const u=this.processSegment(a,c,l,"primary");return[new uf(r,u)]}}function op(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function ap(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function cp(e,t,n,i,r){if(n.length>0&&function(e,t,n){return n.some(n=>lp(e,t,n)&&"primary"!==up(n))}(e,n,i)){const r=new Lg(t,function(e,t,n,i){const r={};r.primary=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&"primary"!==up(s)){const n=new Lg([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,r[up(s)]=n}return r}(e,t,i,new Lg(n,e.children)));return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>lp(e,t,n))}(e,n,i)){const s=new Lg(e.segments,function(e,t,n,i,r,s){const o={};for(const a of i)if(lp(e,n,a)&&!r[up(a)]){const n=new Lg([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[up(a)]=n}return Object.assign(Object.assign({},r),o)}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new Lg(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function lp(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function up(e){return e.outlet||"primary"}function dp(e){return e.data||{}}function hp(e){return e.resolve||{}}function gp(e,t,n,i){const r=Jf(e,t,i);return zg(r.resolve?r.resolve(t,n):r(t,n))}function fp(e){return function(t){return t.pipe(qh(t=>{const n=e(t);return n?j(n).pipe(z(()=>t)):j([t])}))}}class pp{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const mp=new ze("ROUTES");class vp{constructor(e,t,n,i){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=i}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(z(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new xg(Fg(i.injector.get(mp)).map(Mg),i)}))}loadModuleFactory(e){return"string"==typeof e?j(this.loader.load(e)):zg(e()).pipe(H(e=>e instanceof Ye?xc(e):j(this.compiler.compileModuleAsync(e))))}}class yp{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function bp(e){throw e}function wp(e,t,n){return t.parse("/")}function _p(e,t){return xc(null)}let Op=(()=>{class e{constructor(e,t,n,i,r,s,o,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=bp,this.malformedUriErrorHandler=wp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_p,afterPreactivation:_p},this.urlHandlingStrategy=new yp,this.routeReuseStrategy=new pp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(Xe),this.console=r.get(Ua);const c=r.get(Ha);this.isNgZoneEnabled=c instanceof Ha,this.resetConfig(a),this.currentUrlTree=new Bg(new Lg([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new vp(s,o,e=>this.triggerEvent(new mg(e)),e=>this.triggerEvent(new vg(e))),this.routerState=gf(this.currentUrlTree,this.rootComponentType),this.transitions=new vh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Pc(e=>0!==e.id),z(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),qh(e=>{let n=!1,i=!1;return xc(e).pipe(tg(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qh(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return xc(e).pipe(qh(e=>{const n=this.transitions.getValue();return t.next(new ag(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Oh:[e]}),qh(e=>Promise.resolve(e)),(i=this.ngModule.injector,r=this.configLoader,s=this.urlSerializer,o=this.config,function(e){return e.pipe(qh(e=>function(e,t,n,i,r){return new jf(e,t,n,i,r).apply()}(i,r,s,e.extractedUrl,o).pipe(z(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),tg(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,i,r){return function(s){return s.pipe(H(s=>function(e,t,n,i,r="emptyOnly",s="legacy"){return new sp(e,t,n,i,r,s).recognize()}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),i,r).pipe(z(e=>Object.assign(Object.assign({},s),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),tg(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),tg(e=>{const n=new dg(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var i,r,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=e,a=new ag(n,this.serializeUrl(i),r,s);t.next(a);const c=gf(i,this.rootComponentType).snapshot;return xc(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:i,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Oh}),fp(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),tg(e=>{const t=new hg(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),z(e=>Object.assign(Object.assign({},e),{guards:Zf(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(H(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?xc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,i){return j(e).pipe(H(e=>function(e,t,n,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?xc(s.map(s=>{const o=Jf(s,t,r);let a;if(function(e){return e&&Ff(e.canDeactivate)}(o))a=zg(o.canDeactivate(e,t,n,i));else{if(!Ff(o))throw new Error("Invalid CanDeactivate guard");a=zg(o(e,t,n,i))}return a.pipe($h())})).pipe(Yf()):xc(!0)}(e.component,e.route,n,t,i)),$h(e=>!0!==e,!0))}(o,i,r,e).pipe(H(n=>n&&"boolean"==typeof n?function(e,t,n,i){return j(t).pipe(Uc(t=>j([tp(t.route.parent,i),ep(t.route,i),ip(e,t.path,n),np(e,t.route,n)]).pipe(Ch(),$h(e=>!0!==e,!0))),$h(e=>!0!==e,!0))}(i,s,e,t):xc(n)),z(e=>Object.assign(Object.assign({},n),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),tg(e=>{if(Nf(e.guardsResult)){const t=Ag(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),tg(e=>{const t=new gg(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Pc(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new lg(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),fp(e=>{if(e.guards.canActivateChecks.length)return xc(e).pipe(tg(e=>{const t=new fg(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(t=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(e){return e.pipe(H(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;return r.length?j(r).pipe(Uc(e=>function(e,t,n,i){return function(e,t,n,i){const r=Object.keys(e);if(0===r.length)return xc({});if(1===r.length){const s=r[0];return gp(e[s],t,n,i).pipe(z(e=>({[s]:e})))}const s={};return j(r).pipe(H(r=>gp(e[r],t,n,i).pipe(z(e=>(s[r]=e,e))))).pipe(Dh(),z(()=>s))}(e._resolve,e,t,i).pipe(z(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),pf(e,n).resolve),null)))}(e.route,i,t,n)),function(e,t){return arguments.length>=2?function(n){return y(Qh(e,t),kh(1),Eh(t))(n)}:function(t){return y(Qh((t,n,i)=>e(t,n,i+1)),kh(1))(t)}}((e,t)=>e),z(t=>e)):xc(e)}))}),tg(e=>{const t=new pg(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}));var t,n}),fp(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),z(e=>{const t=function(e,t,n){const i=function e(t,n,i){if(i&&t.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const s=function(t,n,i){return n.children.map(n=>{for(const r of i.children)if(t.shouldReuseRoute(r.value.snapshot,n.value))return e(t,n,r);return e(t,n)})}(t,n,i);return new uf(r,s)}{const i=t.retrieve(n.value);if(i){const e=i.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let i=0;i<t.children.length;++i)e(t.children[i],n.children[i])}(n,e),e}{const i=new ff(new vh((r=n.value).url),new vh(r.params),new vh(r.queryParams),new vh(r.fragment),new vh(r.data),r.outlet,r.component,r),s=n.children.map(n=>e(t,n));return new uf(i,s)}}var r}(e,t._root,n?n._root:void 0);return new hf(i,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),tg(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),z(e=>(new Rf(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),tg({next(){n=!0},complete(){n=!0}}),(r=()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new lg(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new rg(r))),zh(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=Nf(n.url);i||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const r=new lg(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(r),i?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const i=new ug(e.id,this.serializeUrl(e.extractedUrl),n);t.next(i);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var r;return Oh}));var r,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,n,i,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Ug(e),this.config=e.map(Mg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=t;si()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=a?this.currentUrlTree.fragment:r;let u=null;if(o)switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}else u=s?this.currentUrlTree.queryParams:i||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,i,r){if(0===n.length)return If(t.root,t.root,t,i,r);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Sf(!0,0,e);let t=0,n=!1;const i=e.reduce((e,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const t={};return Dg(i.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(i.segmentPath)return[...e,i.segmentPath]}return"string"!=typeof i?[...e,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?t++:""!=i&&e.push(i))}),e):[...e,i]},[]);return new Sf(n,t,i)}(n);if(s.toRoot())return If(t.root,new Lg([],{}),t,i,r);const o=function(e,t,n){if(e.isAbsolute)return new Cf(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Cf(n.snapshot._urlSegment,!0,0);const i=Of(e.commands[0])?0:1;return function(e,t,n){let i=e,r=t,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Cf(i,!1,r-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?xf(o.segmentGroup,o.index,s.commands):kf(o.segmentGroup,o.index,s.commands);return If(o.segmentGroup,a,t,i,r)}(c,this.currentUrlTree,e,u,l)}navigateByUrl(e,t={skipLocationChange:!1}){si()&&this.isNgZoneEnabled&&!Ha.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Nf(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(Nf(e))return Vg(this.currentUrlTree,e,t);const n=this.parseUrl(e);return Vg(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const i=e[n];return null!=i&&(t[n]=i),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new cg(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,i,r){const s=this.getTransition();if(s&&"imperative"!==t&&"imperative"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"hashchange"==t&&"popstate"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"popstate"==t&&"hashchange"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o,a,c;r?(o=r.resolve,a=r.reject,c=r.promise):c=new Promise((e,t)=>{o=e,a=t});const l=++this.navigationId;return this.setTransition({id:l,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:i,resolve:o,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,i){const r=this.urlSerializer.serialize(e);i=i||{},this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(e){Us()},e.\u0275dir=vt({type:e}),e})(),Ip=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof cg&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){si()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,i){if(0!==e||t||n||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const r={skipLocationChange:Sp(this.skipLocationChange),replaceUrl:Sp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Sp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Sp(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(xs(Op),xs(ff),xs(Gc))},e.\u0275dir=vt({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&zs("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(io("href",t.href,li),Ss("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[ho]}),e})();function Sp(e){return""===e||!!e}class Cp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ap,this.attachRef=null}}class Ap{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Cp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let kp=(()=>{class e{constructor(e,t,n,i,r){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new wa,this.deactivateEvents=new wa,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new xp(e,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(xs(Ap),xs(Xo),xs(Co),("name",function(e,t){const n=e.attrs;if(n){const e=n.length;let t=0;for(;t<e;){const i=n[t];if(In(i))break;if(0===i)t+=2;else if("number"==typeof i)for(t++;t<e&&"string"==typeof n[t];)t++;else{if("name"===i)return n[t+1];t+=2}}}return null}(Wt())),xs(Kr))},e.\u0275dir=vt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class xp{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===ff?this.route:e===Ap?this.childContexts:this.parent.get(e,t)}}class Up{}class Pp{preload(e,t){return xc(null)}}let Tp=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=new vp(t,n,t=>e.triggerEvent(new mg(t)),t=>e.triggerEvent(new vg(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Pc(e=>e instanceof cg),Uc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Xe);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const i of t)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const e=i._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(e,i)):i.children&&n.push(this.processRoutes(e,i.children));return j(n).pipe(W(),z(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(H(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Op),Ke(dc),Ke(Va),Ke(us),Ke(Up))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Mp=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ag?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof cg&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Og&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Og(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(e){Us()},e.\u0275dir=vt({type:e}),e})();const Rp=new ze("ROUTER_CONFIGURATION"),Ep=new ze("ROUTER_FORROOT_GUARD"),Fp=[Jc,{provide:Gg,useClass:Wg},{provide:Op,useFactory:function(e,t,n,i,r,s,o,a={},c,l){const u=new Op(null,e,t,n,i,r,s,Fg(o));if(c&&(u.urlHandlingStrategy=c),l&&(u.routeReuseStrategy=l),a.errorHandler&&(u.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(u.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const e=Ec();u.events.subscribe(t=>{e.logGroup("Router Event: "+t.constructor.name),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return a.onSameUrlNavigation&&(u.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(u.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(u.relativeLinkResolution=a.relativeLinkResolution),u},deps:[Gg,Ap,Jc,us,dc,Va,mp,Rp,[class{},new re],[class{},new re]]},Ap,{provide:ff,useFactory:function(e){return e.routerState.root},deps:[Op]},{provide:dc,useClass:fc},Tp,Pp,class{preload(e,t){return t().pipe(zh(()=>xc(null)))}},{provide:Rp,useValue:{enableTracing:!1}}];function Np(){return new rc("Router",Op)}let Dp=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Fp,Lp(t),{provide:Ep,useFactory:Bp,deps:[[Op,new re,new oe]]},{provide:Rp,useValue:n||{}},{provide:Gc,useFactory:Vp,deps:[Nc,[new ie(qc),new re],Rp]},{provide:Mp,useFactory:zp,deps:[Op,dl,Rp]},{provide:Up,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Pp},{provide:rc,multi:!0,useFactory:Np},[jp,{provide:_a,multi:!0,useFactory:Hp,deps:[jp]},{provide:Gp,useFactory:$p,deps:[jp]},{provide:xa,multi:!0,useExisting:Gp}]]}}static forChild(t){return{ngModule:e,providers:[Lp(t)]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(Ke(Ep,8),Ke(Op,8))}}),e})();function zp(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Mp(e,t,n)}function Vp(e,t,n={}){return n.useHash?new Zc(e,t):new Kc(e,t)}function Bp(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Lp(e){return[{provide:ds,multi:!0,useValue:e},{provide:mp,multi:!0,useValue:e}]}let jp=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(zc,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Op),i=this.injector.get(Rp);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?xc(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(Rp),n=this.injector.get(Tp),i=this.injector.get(Mp),r=this.injector.get(Op),s=this.injector.get(lc);e===s.components[0]&&(this.isLegacyEnabled(t)?r.initialNavigation():this.isLegacyDisabled(t)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(Ke(us))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function Hp(e){return e.appInitializer.bind(e)}function $p(e){return e.bootstrapListener.bind(e)}const Gp=new ze("Router Initializer");var Wp=function(e){return e.FolderRoot="FolderRoot",e.Folder="Folder",e.Fibu="Fibu",e.Bilanz="Bilanz",e.TaxPrivate="TaxPrivate",e.TaxCorporation="TaxCorporation",e}({}),qp=n("s3+Z"),Kp=function(e){return e[e.OrganisationCreated=1]="OrganisationCreated",e[e.OrgaUserRemoved=2]="OrgaUserRemoved",e[e.OrganisationRemoved=3]="OrganisationRemoved",e[e.SubOrganizationRemoved=4]="SubOrganizationRemoved",e[e.SubOrgaUserRemoved=5]="SubOrgaUserRemoved",e[e.AccountDeleted=6]="AccountDeleted",e}({});let Zp=(()=>{class e{constructor(e){this.eventService=e,this.SUBST_FOR_TOTAL_LICENCES="-11",this.SUBST_FOR_FREE_LICENCES="-22",this.productSettings=[],this.licences=[],this.isActive=!0,this._initProductSettingsList(),this._initLicenceForOrga(),this.eventService.idmEvent.pipe(Object(qp.takeWhile)(()=>this.isActive)).subscribe(e=>this._onIdmEvent(e))}ngOnDestroy(){this.isActive=!1}_onIdmEvent(e){switch(e.type){case Kp.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser.id);break;case Kp.OrganisationRemoved:this._onOrgaRemoval(e.organizationId)}}_onOrgaUserRemoval(e){let t=this.licences.filter(t=>t.orgaUserId===e);this.licences=this.licences.filter(t=>t.orgaUserId!==e),t.forEach(e=>{if(e.numberOfLicences>0){let t=this.licences.find(t=>t.orgaId===e.orgaId&&t.orgaUserId===this.SUBST_FOR_FREE_LICENCES&&t.productId===e.productId);t?t.numberOfLicences+=e.numberOfLicences:this.licences.push({orgaId:e.orgaId,orgaUserId:this.SUBST_FOR_FREE_LICENCES,productId:e.productId,numberOfLicences:e.numberOfLicences})}})}_onOrgaRemoval(e){this.licences=this.licences.filter(t=>t.orgaId!==e)}_initProductSettingsList(){this.productSettings.push({id:mh.FIBU,name:"Finanzbuchf\xfchrung",licenceNeeded:!0,description:"Hier kannst du alles rund um die Finanzbuchf\xfchrung erledigen.",resourceTypes:[Wp.Fibu]}),this.productSettings.push({id:mh.FOLDERS_AND_DOCS,name:"Belegverwaltung",description:"Hier befasst du dich mit Ordnern, Belegen etc..",resourceTypes:[Wp.FolderRoot,Wp.Folder]}),this.productSettings.push({id:mh.BILANZ,name:"Jahresabschluss",licenceNeeded:!0,description:"Hier k\xfcmmerst du dich um den Jahresabschluss.",resourceTypes:[Wp.Bilanz]}),this.productSettings.push({id:mh.TAX,name:"Steuern",licenceNeeded:!0,description:"Hier machst du die Steuer f\xfcr deinen Mandanten.",resourceTypes:[Wp.TaxPrivate,Wp.TaxCorporation]})}_initLicenceForOrga(){this.licences.push({productId:mh.BILANZ,orgaId:"300",orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:4}),this.licences.push({productId:mh.BILANZ,orgaId:"300",orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:2}),this.licences.push({productId:mh.BILANZ,orgaId:"300",orgaUserId:"400",numberOfLicences:1}),this.licences.push({productId:mh.BILANZ,orgaId:"300",orgaUserId:"401",numberOfLicences:1}),this.licences.push({productId:mh.TAX,orgaId:"300",orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:1}),this.licences.push({productId:mh.TAX,orgaId:"300",orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:0}),this.licences.push({productId:mh.TAX,orgaId:"300",orgaUserId:"400",numberOfLicences:1})}checkLicence(e,t){return!!this.licences.find(n=>n.productId===e&&n.orgaUserId===t&&n.numberOfLicences>0)}getAllProductAndLicenceInfos(e,t){const n=[];return this.productSettings.forEach(i=>{var r,s;const o=Object.assign({},i);if(n.push(o),e&&i.licenceNeeded){o.orgaId=e,o.orgaUserId=t;let n=this.licences.find(t=>t.orgaId===e&&t.productId===i.id&&t.orgaUserId===this.SUBST_FOR_TOTAL_LICENCES);o.totalLicences=null!==(r=null==n?void 0:n.numberOfLicences)&&void 0!==r?r:0,n=this.licences.find(t=>t.orgaId===e&&t.productId===i.id&&t.orgaUserId===this.SUBST_FOR_FREE_LICENCES),o.freeLicences=null!==(s=null==n?void 0:n.numberOfLicences)&&void 0!==s?s:0,n=this.licences.find(n=>n.orgaId===e&&n.productId===i.id&&n.orgaUserId===t),o.licencedToUser=!!((null==n?void 0:n.numberOfLicences)&&n.numberOfLicences>0)}}),n}getProductAndLicenceInfo(e,t,n){var i,r;const s=this.productSettings.find(t=>t.id===e);if(s&&s.licenceNeeded){s.orgaId=t,s.orgaUserId=n;let e=this.licences.find(e=>e.orgaId===t&&e.productId===s.id&&e.orgaUserId===this.SUBST_FOR_TOTAL_LICENCES);s.totalLicences=null!==(i=null==e?void 0:e.numberOfLicences)&&void 0!==i?i:0,e=this.licences.find(e=>e.orgaId===t&&e.productId===s.id&&e.orgaUserId===this.SUBST_FOR_FREE_LICENCES),s.freeLicences=null!==(r=null==e?void 0:e.numberOfLicences)&&void 0!==r?r:0,e=this.licences.find(e=>e.orgaId===t&&e.productId===s.id&&e.orgaUserId===n),s.licencedToUser=!!((null==e?void 0:e.numberOfLicences)&&e.numberOfLicences>0)}return s&&Object.assign({},s)}saveProductAndLicenceInfo(e){e.forEach(e=>{e.licenceNeeded&&(this._setLicenceInfo(this.SUBST_FOR_TOTAL_LICENCES,e,e.totalLicences),this._setLicenceInfo(this.SUBST_FOR_FREE_LICENCES,e,e.freeLicences),this._setLicenceInfo(e.orgaUserId,e,e.licencedToUser?1:0))})}_setLicenceInfo(e,t,n){let i=this.licences.find(n=>n.orgaId===t.orgaId&&n.productId===t.id&&n.orgaUserId===e);i?i.numberOfLicences=n:this.licences.push({productId:t.id,orgaId:t.orgaId,orgaUserId:e,numberOfLicences:n})}}return e.\u0275fac=function(t){return new(t||e)(Ke(Su))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Jp(e,t){1&e&&(Ms(0,"div"),Ms(1,"h5"),Xs(2,"\xdcbersicht \xfcber alle Produkte"),Rs(),Ms(3,"p"),Xs(4,"Zum Anzeigen der f\xfcr dich verf\xfcgbaren Produkte bitte in Organisation einloggen..."),Rs(),Rs())}function Qp(e,t){1&e&&(Ms(0,"div"),Ms(1,"h5"),Xs(2,"\xdcbersicht \xfcber alle Produkte und der dazugeh\xf6rigen Lizenzinfo."),Rs(),Rs())}const Xp=function(){return[]};function Yp(e,t){if(1&e){const e=Fs();Ms(0,"a",11),zs("click",(function(){Gt(e);const t=Ls(2).index;return Ls().gotoProduct(t)})),Xs(1),Rs()}if(2&e){const e=Ls(2).index,t=Ls();Ps("routerLink",ma(2,Xp)),xi(1),eo("Zu ",t.getProductName(e),"")}}function em(e,t){1&e&&(Ms(0,"p",12),Xs(1,"Du hast keine Lizenz f\xfcr das Produkt. "),Rs())}function tm(e,t){if(1&e&&(Ms(0,"div",8),Es(1,"br"),As(2,Yp,2,3,"a",9),As(3,em,2,0,"p",10),Rs()),2&e){const e=Ls().$implicit;xi(2),Ps("ngIf",e.licencedToUser),xi(1),Ps("ngIf",!e.licencedToUser)}}function nm(e,t){if(1&e&&(Ms(0,"div",3),Ms(1,"div",4),Ms(2,"div",5),Ms(3,"span",6),Xs(4),Rs(),Ms(5,"p"),Xs(6),Rs(),As(7,tm,4,2,"div",7),Rs(),Rs(),Rs()),2&e){const e=t.index,n=Ls();xi(4),Ys(n.getProductName(e)),xi(2),Ys(n.getProductDescription(e)),xi(1),Ps("ngIf",n.loggedInInOrga)}}let im=(()=>{class e{constructor(e,t,n,i){this.router=e,this.principalService=t,this.settingsService=n,this.licenceService=i,this.usersDisplayName="",this.loggedInInOrga=!1,this.products=[]}ngOnInit(){this.settingsService.setTitle("Marktplatz der Produkte..."),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.loggedInInOrga&&(this.principal=this.principalService.getOrgaUser()),this._initMembers()}_initMembers(){var e,t;this.products=this.licenceService.getAllProductAndLicenceInfos(null===(e=this.principal)||void 0===e?void 0:e.orgaId,null===(t=this.principal)||void 0===t?void 0:t.id),this.products.forEach(e=>{e.licenceNeeded||(e.licencedToUser=!0)})}getProductName(e){return this.products[e].name}getProductDescription(e){return this.products[e].description}getProductLink(e){switch(this.products[e].id){case mh.BILANZ:return"/generic-product/bilanz";case mh.FIBU:return"/generic-product/fibu";case mh.FOLDERS_AND_DOCS:return"/folderApp/main";case mh.TAX:return"/generic-product/tax"}}gotoProduct(e){this.router.navigateByUrl(this.getProductLink(e))}}return e.\u0275fac=function(t){return new(t||e)(xs(Op),xs(Pu),xs(ku),xs(Zp))},e.\u0275cmp=dt({type:e,selectors:[["app-marketplace"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"row","mt-1"],["class","col s10 m6",4,"ngFor","ngForOf"],[1,"col","s10","m6"],[1,"card","teal","darken-1"],[1,"card-content","white-text"],[1,"card-title"],["class","card-action_x",4,"ngIf"],[1,"card-action_x"],["class","orange-text",3,"routerLink","click",4,"ngIf"],["class","white-text",4,"ngIf"],[1,"orange-text",3,"routerLink","click"],[1,"white-text"]],template:function(e,t){1&e&&(As(0,Jp,5,0,"div",0),As(1,Qp,3,0,"div",0),Ms(2,"div",1),As(3,nm,8,3,"div",2),Rs()),2&e&&(Ps("ngIf",!t.loggedInInOrga),xi(1),Ps("ngIf",t.loggedInInOrga),xi(2),Ps("ngForOf",t.products))},directives:[al,sl,Ip],styles:[".card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{height:12rem}"]}),e})();var rm=function(e){return e.DefaultResourceDeletePermissionKey="l\xf6schen",e.FolderReadPermissionKey="lesen",e.FolderWritePermissionKey="schreiben",e.FolderDeletePermissionKey="l\xf6schen",e.FolderCreatePermissionKey="anlegen",e.FibuBookPermissionKey="buchen",e.FibuEvaluatePermissionKey="auswerten",e.BilanzViewPermissionKey="pr\xfcfen",e.BilanzWritePermissionKey="erstellen",e.TaxViewPermissionKey="nachschauen",e.TaxWritePermissionKey="erstellen",e}({});function sm(e,t=!1){return n=>n.lift(new om(e,t))}class om{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new am(e,this.predicate,this.inclusive))}}class am extends f{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(i){return void t.error(i)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}var cm=function(e){return e[e.ResourceMoved=1]="ResourceMoved",e}({});let lm=(()=>{class e{constructor(e){this.http=e,this.accessBackendUri=bc+"accessrights/",this.resourceBackendUri=bc+"resources/"}getAllResourceTypes(){return wc(this,void 0,void 0,(function*(){try{const e=yield this.http.get(this.resourceBackendUri+"resource-types").toPromise();return console.log(e),e}catch(e){Oc(e)}return[]}))}findByTypeAndOrgaId(e,t,n,i){return wc(this,void 0,void 0,(function*(){let n=(new yl).append("resourceType",e).append("userId",t);"0"!==i&&(n=n.append("subOrgaId",i));try{const e=yield this.http.get(this.accessBackendUri+"admin-resources",{params:n}).toPromise();return console.log(e),e}catch(r){Oc(r)}return[]}))}setPermissionsOfGivenUser(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.post(this.accessBackendUri+"admin-resources",e).toPromise(),!0}catch(t){Oc(t)}return!1}))}getAllResourcesOfOrga(){return wc(this,void 0,void 0,(function*(){const e=yield this.http.get(this.resourceBackendUri+"admin").toPromise();return console.log(e),e}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),um=(()=>{class e{constructor(e,t,n){this.beAccessService=e,this.principalService=t,this.eventService=n,this.isActive=!0,this.resourceTypes=[],this.resources=[],this.subResources=[],this.accessRights=[],this.useValueFromBackend=!0,this.callBackend=!1,this.initMembers()}initMembers(){return wc(this,void 0,void 0,(function*(){this.callBackend?console.log("No Test-Items set, because we are working with backend..."):(this._setTestResources(),this._setTestSubResources(),yield this._setTestPermissions(),console.log("Resources: "+this.resources.length),console.log("AccessRights: "+this.accessRights.length)),this.eventService.idmEvent.pipe(sm(()=>this.isActive)).subscribe(e=>this._onIdmEvent(e))}))}setOrgaServiceHelper(e){this.orgaServiceHelper=e}ngOnDestroy(){this.isActive=!1}assureServiceIsCreated(){}getAllResourceTypes(){return wc(this,void 0,void 0,(function*(){if(0===this.resourceTypes.length){if(this.callBackend){const e=yield this.beAccessService.getAllResourceTypes();this.useValueFromBackend&&e&&(this.resourceTypes=e)}0===this.resourceTypes.length&&this._initResourceTypes()}return Ic(this.resourceTypes)}))}_findResourceType(e){return wc(this,void 0,void 0,(function*(){return(yield this.getAllResourceTypes()).find(t=>t.type===e)}))}_getAllStaticResourceTypes(){return wc(this,void 0,void 0,(function*(){return(yield this.getAllResourceTypes()).filter(e=>!e.dynamic)}))}getResourcesWithPermissions(e,t,n,i){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const r=yield this.beAccessService.findByTypeAndOrgaId(e.type,t.id,n,i);if(this.useValueFromBackend)return r}const r=[];return(yield this.getAllResourcesOfSubOrgaByResourceType(e.type,n,i)).forEach(n=>{const s=[];e.possiblePermissions.forEach(e=>{const r={name:e};r.disabled=!this.permissionIsEnabled4Administration(n,t,e,i),r.allowed=this.hasAdministratedPermission(n,t,e,i),s.push(r)});const o={};Object.assign(o,n),o.permissions=s,r.push(o)}),r}))}setPermissionsOfGivenUser(e){return wc(this,void 0,void 0,(function*(){return this.callBackend&&("0"===e.subOrgaId&&(e.subOrgaId=void 0),yield this.beAccessService.setPermissionsOfGivenUser(e)),!0}))}_justCreateNewResource(e){const t=Object.assign(Object.assign({},e),{id:Sc(this.resources)});return this.resources.push(t),t}createNewResource(e){var t,n;return wc(this,void 0,void 0,(function*(){this._assertDynamicResource(e),yield this._assertCreatePermission4resource(e);const i=this._justCreateNewResource(Object.assign(Object.assign({},e),{orgaId:this._getPrincipal().orgaId})),r=yield this._findResourceType(i.type);if(null==r?void 0:r.defaultPermissionsOnCreate)try{for(var s,o=_c(r.defaultPermissionsOnCreate);!(s=yield o.next()).done;){const e=s.value;yield this._setAccessRight("0",this._getPrincipal().id,this._getPrincipal().orgaId,i,e)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=o.return)&&(yield n.call(o))}finally{if(t)throw t.error}}return i}))}renameResource(e){const t=this._findResource(e.id);t&&(t.displayName=e.displayName)}_createNewStaticResource(e,t){const n={id:Sc(this.resources),type:e.type,orgaId:t,displayName:e.displayName};this._assertStaticResource(n),this.resources.push(n)}_removeAllSubResourcesOfResource(e){this.subResources=this.subResources.filter(t=>t.orgaResourceId!==e)}removeResource(e,t=rm.DefaultResourceDeletePermissionKey){if(this.hasPermission(e,t))return this._removeResource(e.id)}_removeResource(e){this.accessRights=this.accessRights.filter(t=>t.resourceId!==e),this._removeAllSubResourcesOfResource(e),this.resources=this.resources.filter(t=>t.id!==e)}_getAllResourcesOwnedByOrDelegatedToOrgaByType(e,t){return wc(this,void 0,void 0,(function*(){return this._assertIsAdminOfCurrentOrga(t),(yield this.getAllResourcesOfOrga(t)).filter(t=>t.type===e)}))}getAllResourcesOfOrga(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=yield this.beAccessService.getAllResourcesOfOrga();if(this.useValueFromBackend)return e}this._assertIsAdminOfCurrentOrga(e);const t=this.resources.filter(t=>t.orgaId===e),n=this._getAllDelegatedResources4Orga(e);return t.push(...n),Ic(t)}))}_getAllResources4UserWithAtLeastOneOfGivenPermissionsByType(e,t,n){if(!n)return[];let i=this.accessRights.filter(t=>t.userId===e&&n.includes(t.permission)).map(e=>e.resourceId);i=i.filter((e,t)=>i.indexOf(e)===t);const r=[];return i.forEach(e=>{const n=this._findResource(e);(null==n?void 0:n.type)===t&&r.push(this._findResource(e))}),Ic(r)}_getAllResources4UserWithAllOfGivenPermissionsByType(e,t,n){if(!n)return[];const i=this.accessRights.filter(t=>t.userId===e);let r=[];i.forEach(e=>{let t=!0;for(const r in n)if(!i.find(t=>t.resourceId===e.resourceId&&t.permission===n[r])){t=!1;break}t&&r.push(e.resourceId)}),r=r.filter((e,t)=>r.indexOf(e)===t);const s=[];return r.forEach(e=>{const n=this._findResource(e);(null==n?void 0:n.type)===t&&s.push(e)}),s}getAllResources4PrincipalWithAtLeastOnePermissionByType(e){let t=this.accessRights.filter(e=>e.userId===this._getPrincipal().id).map(e=>e.resourceId);return t=t.filter((e,n)=>t.indexOf(e)===n),Ic(this.resources.filter(n=>n.type===e&&t.includes(n.id)))}getAllPermissions4PrincipalByResourceType(e){let t=this.accessRights.filter(e=>e.userId===this._getPrincipal().id);const n=[];return t.forEach(t=>{const i=this._findResource(t.resourceId);(null==i?void 0:i.type)===e&&n.push(Object.assign(Object.assign({},t),{displayName:i.displayName}))}),Ic(n)}getAllResourceIdsOwnedByOrDelegatedToOrgaByType(e,t){return wc(this,void 0,void 0,(function*(){return this._assertIsAdminOfCurrentOrga(t),(yield this.getAllResourcesOfOrga(t)).map(e=>e.id)}))}_getAllDelegatedResources4Orga(e){let t=this.accessRights.filter(t=>t.proxyResourceOrgaId===e).map(e=>e.resourceId);return t=t.filter((e,n)=>t.indexOf(e)===n),this.resources.filter(e=>t.includes(e.id))}_findResource(e){return this.resources.find(t=>t.id===e)}_findStaticResourceByTypeAndOrgaId(e,t){return this.resources.find(n=>n.type===e&&n.orgaId===t)}_createSubResource(e){const t=Object.assign(Object.assign({},e),{id:Sc(this.subResources)});return this.subResources.push(t),t}_findSubResource(e){return this.subResources.find(t=>t.id===e)}_removeSubResource(e){var t,n;return wc(this,void 0,void 0,(function*(){const i=this.subResources.findIndex(t=>t.id===e);if(i<0)return;const r=this.subResources[i];this.subResources.splice(i,1);const s=this._findResource(r.orgaResourceId),o=yield this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(r.subOrgaId);try{for(var a,c=_c(o);!(a=yield c.next()).done;){const e=a.value,t=yield this.orgaServiceHelper.findOrgaUserByOrgaUserId(e.orgaUserId);t&&this._setPermissionsOfUser2resource(t,s,[],r.subOrgaId)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=c.return)&&(yield n.call(c))}finally{if(t)throw t.error}}}))}getAllResourcesOfSubOrgaByResourceType(e,t,n="0"){return wc(this,void 0,void 0,(function*(){if("0"===n)return this._getAllResourcesOwnedByOrDelegatedToOrgaByType(e,t);this._assertIsSubAdminOfSubOrga(n);const i=this.subResources.filter(i=>i.orgaId===t&&i.subOrgaId===n&&i.typeId===e).map(e=>e.orgaResourceId);return Ic(this.resources.filter(t=>t.type===e&&i.includes(t.id)))}))}getAllSubResourcesOfSubOrga(e){return this._assertIsSubAdminOfSubOrga(e),Ic(this.subResources.filter(t=>t.subOrgaId===e))}getAllResourcesOfSubOrga(e,t,n=!1){this._assertIsSubAdminOfSubOrga(t);const i=this.subResources.filter(e=>e.subOrgaId===t).map(e=>e.orgaResourceId),r=Ic(this.resources.filter(e=>i.includes(e.id)));return n?r.filter(t=>t.orgaId===e):r}changeSubResources(t,n){return this._assertIsSubAdminOfSubOrga(t),n.forEach(n=>{if(n.id){if(!n.subOrgaId){const i=this._findSubResource(n.id);e._assertIsSameSubOrga(t,i.subOrgaId),this._removeSubResource(n.id)}}else e._assertIsSameSubOrga(t,n.subOrgaId),this._createSubResource(n)}),!0}setPermissionsOfUser2resource(e,t,n,i="0"){this._assertIsSubAdminOfSubOrga(i),this._assertIsMemberOfCurrentOrga(e),this._assertIsResourceOfCurrentOrga(t),this._setPermissionsOfUser2resource(e,t,n,i)}_setPermissionsOfUser2resource(t,n,i,r="0"){return wc(this,void 0,void 0,(function*(){return e._isForeignUser(t)?this._setPermissionsOfUser2resource4directForeignUser(t,n,i,r):e._isForeignOrga(t)?this._setPermissionsOfUser2resource4ForeignOrga(t,n,i,r):e._isForeignResourceOfUser(t,n)?yield this._setPermissionsOfUser2foreignResourceApplyDelegationPermission(t,n,i,r):yield this._setPermissionsOfUser2resource4ownUser(t,n,i,r)}))}setPermissionsOfUser2staticResource(e,t,n){return wc(this,void 0,void 0,(function*(){if(this._assertIsAdminOfCurrentOrga(e.orgaId),this._assertStaticResource(t),this._assertIsMemberOfCurrentOrga(e),!this._isOwnResource(t,e))throw new Error("Das geht f\xfcr statische Ressourcen noch nicht");const i=this._findStaticResourceByTypeAndOrgaId(t.type,t.orgaId);if(i)return t.id=i.id,yield this._setPermissionsOfUser2resource4ownUser(e,t,n)}))}hasPermission4staticResource(e,t){this._assertStaticResource(e);const n=this._findStaticResourceByTypeAndOrgaId(e.type,e.orgaId);return!!n&&this.hasPermission(n,t)}hasPermission4staticResource4administration(e,t,n){this._assertStaticResource(t),this._assertIsAdminOfCurrentOrga(t.orgaId);const i=this._findStaticResourceByTypeAndOrgaId(t.type,t.orgaId);return!!i&&this._hasPermission(e.id,i.id,n)}hasAdministratedPermission(e,t,n,i="0"){return this._assertIsSubAdminOfSubOrga(i),this._hasPermission4administration(t,e,n,i)}_hasPermission(e,t,n){return!!this.accessRights.find(i=>i.userId===e&&i.resourceId===t&&i.permission===n)}hasPermission(e,t){const n=this._assertAndGetPrincipal().id;return this._hasPermission(n,e.id,t)}_hasPermission4administration(t,n,i,r="0"){const s=e._isForeignUser(t)?t.foreignUserId:t.id;return this._isForeignResource(n)||e._isForeignOrga(t)?!!this.accessRights.find(e=>e.userId===s&&e.resourceId===n.id&&e.permission===i&&void 0!==e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===r):!!this.accessRights.find(e=>e.userId===s&&e.resourceId===n.id&&e.permission===i&&void 0===e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===r)}permissionIsEnabled4Administration(t,n,i,r="0"){return this._assertIsSubAdminOfSubOrga(r),!!this._isOwnResource(t)||!e._isForeignUserOrOrga(n)&&this._hasDelegatedPermissionToCurrentOrga(t,i)}_setPermissionsOfUser2resource4ownUser(e,t,n,i="0"){var r,s,o,a;return wc(this,void 0,void 0,(function*(){this._removeAllPermissionsOfUser4resource(e.id,t,void 0,i);try{for(r=_c(n);!(s=yield r.next()).done;){const n=s.value;yield this._setAccessRight(i,e.id,e.orgaId,t,n,void 0)}}catch(c){o={error:c}}finally{try{s&&!s.done&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}}))}_setPermissionsOfUser2resource4directForeignUser(e,t,n,i){const r=this.orgaServiceHelper.findCorrespondingForeignOrgaUser(e);this._setPermissionsOfUser2resource4ownUser(r,t,n,i)}_setPermissionsOfUser2foreignResourceApplyDelegationPermission(e,t,n,i){var r,s,o,a;return wc(this,void 0,void 0,(function*(){const c=e.orgaId;this._removeAllPermissionsOfUser4resource(e.id,t,c,i);try{for(r=_c(n);!(s=yield r.next()).done;){const n=s.value;yield this._setAccessRight(i,e.id,e.orgaId,t,n,c)}}catch(l){o={error:l}}finally{try{s&&!s.done&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}}))}_setPermissionsOfUser2resource4ForeignOrga(e,t,n,i){var r,s,o,a;return wc(this,void 0,void 0,(function*(){const c=e.foreignOrgaId,l=this._getAllDelegatedPermissions4resource(e.id,c,t);this._removeAllPermissionsOfUser4resource(e.id,t,c,i);try{for(r=_c(n);!(s=yield r.next()).done;){const n=s.value;yield this._setAccessRight(i,e.id,e.orgaId,t,n,c)}}catch(d){o={error:d}}finally{try{s&&!s.done&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}const u=this._getAllDelegatedPermissions4resource(e.id,c,t);u.length<=0?this._removeProxyResourceAndAllPermissions2it(c,t):(u.forEach(e=>{const t=l.findIndex(t=>t===e);t>=0&&l.splice(t,1)}),l.forEach(e=>{this._removePermission4resourceDelegatedFromAllUsersOfGivenOrga(c,t,e)}))}))}static _isForeignUser(e){return!!e&&!!e.foreignUserId}static _isForeignOrga(e){return!!e&&!!e.foreignOrgaId}static _isForeignUserOrOrga(t){return e._isForeignUser(t)||e._isForeignOrga(t)}_isForeignResource(e){return!this._isOwnResource(e)}static _isForeignResourceOfUser(e,t){return t.orgaId!==e.orgaId}_isOwnResource(e,t=this._getPrincipal()){return!!e.orgaId&&e.orgaId===t.orgaId}_isStaticResource(e){return wc(this,void 0,void 0,(function*(){const t=yield this._findResourceType(e.type);return!(!t||t.dynamic)}))}_isDynamicResource(e){var t;return wc(this,void 0,void 0,(function*(){const n=yield this._findResourceType(e.type);return null!==(t=null==n?void 0:n.dynamic)&&void 0!==t&&t}))}_assertAndGetPrincipal(){const e=this._getPrincipal();if(!(null==e?void 0:e.id))throw new Error("Principal not set to OrgaUser...");return e}_assertIsAdminOfCurrentOrga(e){if(!this.principalService.isAdminOfCurrentOrga(e))throw new Error("AssertAdmin: principal is not an admin of orga")}_assertIsSubAdminOfSubOrga(e){if(!this.principalService.isAdminOfSubOrga(e))throw new Error("AssertSubAdmin: principal is not an sub-admin of sub-orga")}static _assertIsSameSubOrga(e,t){if(e!==t)throw new Error("AssertSameSubOrga: subOrgaIds are not the same.")}_assertIsMemberOfCurrentOrga(e){if(this._getPrincipal().orgaId!==e.orgaId)throw new Error("AssertMember: principal.orgaId !== user.orgaId");if(!this.orgaServiceHelper.findOrgaUserByOrgaUserId(e.id))throw new Error("AssertMember: user is not member of orga")}_assertIsProxyResourceOfCurrentOrga(e){if(1!==this._getAllDelegatedResources4Orga(this._getPrincipal().orgaId).filter(t=>t.id===e.id).length)throw new Error("AssertResource: ist keine ProxyResource!")}_assertIsResourceOfCurrentOrga(e){const t=this._getPrincipal();t.orgaId!==e.orgaId&&this._assertIsProxyResourceOfCurrentOrga(e);const n=this._findResource(e.id);if(!n)throw new Error("AssertResource: resource does not exist");if(n.orgaId!==t.orgaId)throw new Error("AssertResource: Resource does not belong to your orga!")}_assertStaticResource(e){if(!this._isStaticResource(e))throw new Error("Resource ist nicht statisch...")}_assertDynamicResource(e){if(!this._isDynamicResource(e))throw new Error("Resource ist nicht dynamisch...")}_assertCreatePermission4resource(e){return wc(this,void 0,void 0,(function*(){const t=yield this._findResourceType(e.type),n=this._findStaticResourceByTypeAndOrgaId(t.resourceType4CreatePermission,e.orgaId);if(!n)throw new Error("Static Resource not found...");if(!this.hasPermission4staticResource(n,t.permission4CreatePermission))throw new Error("Principal does not have create-permission for resource")}))}_onIdmEvent(e){switch(e.type){case Kp.OrganisationCreated:this._onOrganizationCreation(e.organizationId);break;case Kp.OrganisationRemoved:this._onOrganizationRemoval(e.organizationId);break;case Kp.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser);break;case Kp.SubOrganizationRemoved:this._onSubOrganizationRemoval(e.subOrganizationId);break;case Kp.SubOrgaUserRemoved:this._onSubOrgaUserRemoval(e.subOrganizationId,e.orgaUser)}}_onOrganizationRemoval(e){this.resources.filter(t=>t.orgaId===e).forEach(e=>this._removeResource(e.id))}_onOrganizationCreation(e){return wc(this,void 0,void 0,(function*(){this.callBackend||(yield this._getAllStaticResourceTypes()).forEach(t=>{this._findStaticResourceByTypeAndOrgaId(t.type,e)||this._createNewStaticResource(t,e)})}))}_onSubOrganizationRemoval(t){var n,i;return wc(this,void 0,void 0,(function*(){const r=yield this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(t),s=this.getAllSubResourcesOfSubOrga(t);try{for(var o,a=_c(r);!(o=yield a.next()).done;){const n=o.value,i=yield this.orgaServiceHelper.findOrgaUserByOrgaUserId(n.orgaUserId);i&&e._isForeignOrga(i)&&s.forEach(e=>{const n=this._findResource(e.orgaResourceId);this._setPermissionsOfUser2resource(i,n,[],t)})}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}for(this.subResources=this.subResources.filter(e=>e.subOrgaId!==t);;){const e=this.accessRights.findIndex(e=>e.administratedViaSubOrgaId===t);if(!(e>=0))break;this.accessRights.splice(e,1)}}))}_onForeignOrgaSubUserRemoval(e,t){this.getAllSubResourcesOfSubOrga(e).forEach(n=>{const i=this._findResource(n.orgaResourceId);this._setPermissionsOfUser2resource4ForeignOrga(t,i,[],e)})}_onSubOrgaUserRemoval(t,n){if(!t)throw new Error("_onSubOrgaUserRemoval: subOrgaId not set!");if(e._isForeignOrga(n))this._onForeignOrgaSubUserRemoval(t,n);else{const i=e._isForeignUser(n)?n.foreignUserId:n.id;for(;;){const e=this.accessRights.findIndex(e=>e.administratedViaSubOrgaId===t&&e.userId===i);if(!(e>=0))break;this.accessRights.splice(e,1)}}}_onOrgaUserRemoval(t){e._isForeignUser(t)?this._removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId(t.foreignUserId,t.orgaId):e._isForeignOrga(t)?(this._removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId(t.foreignOrgaId,t.orgaId),this._removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId(t.foreignOrgaId,t.orgaId)):this._removeAllPermissionsOfUser(t.id)}_assertPermissionRange(e,t){return wc(this,void 0,void 0,(function*(){const n=this._findResource(e.id);if(!n)throw new Error("Resource "+e.id+" not found!");const i=yield this._findResourceType(n.type);if(!i)throw new Error("ResourceType "+e.type+" not found!");if(!i.possiblePermissions.includes(t))throw new Error("Permission "+t+" not valid for type "+n.type)}))}_setAccessRight(e,t,n,i,r,s){return wc(this,void 0,void 0,(function*(){yield this._assertPermissionRange(i,r),this.accessRights.push({id:Sc(this.accessRights),userId:t,usersOrgaId:n,resourceId:i.id,resourceOwningOrgaId:i.orgaId,permission:r,proxyResourceOrgaId:s,administratedViaSubOrgaId:e})}))}_getPrincipal(){const e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}_getAllDelegatedPermissions4resource(e,t,n){const i=this.accessRights.filter(i=>i.userId===e&&i.proxyResourceOrgaId===t&&i.resourceId===n.id).map(e=>e.permission);return i.filter((e,t)=>i.indexOf(e)===t)}_hasDelegatedPermissionToCurrentOrga(e,t){return!!this.accessRights.find(n=>n.proxyResourceOrgaId===this._getPrincipal().orgaId&&n.resourceId===e.id&&n.permission===t)}_removeAllPermissionsOfUser4resource(e,t,n,i="0"){for(;;){const r=this.accessRights.findIndex(r=>r.userId===e&&r.resourceId===t.id&&r.proxyResourceOrgaId===n&&r.administratedViaSubOrgaId===i);if(!(r>=0))break;this.accessRights.splice(r,1)}}_removeAllPermissionsOfUser(e){console.log("accessrights length: "+this.accessRights.length),this.accessRights=this.accessRights.filter(t=>t.userId!==e),console.log("accessrights length: "+this.accessRights.length)}_removePermission4resourceDelegatedFromAllUsersOfGivenOrga(e,t,n){let i;do{i=this.accessRights.findIndex(i=>i.resourceId===t.id&&i.permission===n&&i.usersOrgaId===e&&i.proxyResourceOrgaId===e),i>=0&&this.accessRights.splice(i,1)}while(i>=0)}_removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.userId===e&&n.resourceOwningOrgaId===t&&void 0===n.proxyResourceOrgaId);if(!(n>=0))break;this.accessRights.splice(n,1)}}_removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.usersOrgaId===e&&n.resourceOwningOrgaId===t&&void 0!==n.proxyResourceOrgaId);if(!(n>=0))break;this.accessRights.splice(n,1)}}_removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.proxyResourceOrgaId===e&&n.resourceOwningOrgaId===t);if(!(n>=0))break;this.accessRights.splice(n,1)}}_removeProxyResourceAndAllPermissions2it(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.proxyResourceOrgaId===e&&n.resourceId===t.id);if(!(n>=0))break;this.accessRights.splice(n,1)}}_initResourceTypes(){this.resourceTypes.push({id:"1",type:Wp.FolderRoot,dynamic:!1,displayName:"Belegverwaltung",possiblePermissions:[rm.FolderCreatePermissionKey]},{id:"2",type:Wp.Folder,dynamic:!0,displayName:"Ordner",possiblePermissions:[rm.FolderReadPermissionKey,rm.FolderWritePermissionKey,rm.FolderDeletePermissionKey],defaultPermissionsOnCreate:[rm.FolderReadPermissionKey],resourceType4CreatePermission:Wp.FolderRoot,permission4CreatePermission:rm.FolderCreatePermissionKey},{id:"3",type:Wp.Fibu,dynamic:!1,displayName:"Finanzbuchf\xfchrung",possiblePermissions:[rm.FibuEvaluatePermissionKey,rm.FibuBookPermissionKey]},{id:"4",type:Wp.Bilanz,dynamic:!1,displayName:"Jahresabschluss",possiblePermissions:[rm.BilanzViewPermissionKey,rm.BilanzWritePermissionKey]},{id:"5",type:Wp.TaxPrivate,dynamic:!1,displayName:"Steuern f\xfcr Privatleute",possiblePermissions:[rm.TaxViewPermissionKey,rm.TaxWritePermissionKey]},{id:"6",type:Wp.TaxCorporation,dynamic:!1,displayName:"Steuern f\xfcr Unternehmen",possiblePermissions:[rm.TaxViewPermissionKey,rm.TaxWritePermissionKey]})}_setTestResources(){this.resources.push({type:Wp.FolderRoot,id:"101",orgaId:"300",displayName:"Belegverwaltung"},{type:Wp.Folder,id:"1",orgaId:"300",displayName:"Notizen"},{type:Wp.Folder,id:"2",orgaId:"300",displayName:"Steuersachen"},{type:Wp.Folder,id:"3",orgaId:"300",displayName:"Golfausfl\xfcge"},{type:Wp.Folder,id:"4",orgaId:"300",displayName:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{type:Wp.Bilanz,id:"220",orgaId:"300",displayName:"Jahresabschluss"},{type:Wp.TaxPrivate,id:"30",orgaId:"300",displayName:"Steuern f\xfcr Privatleute"},{type:Wp.TaxCorporation,id:"31",orgaId:"300",displayName:"Steuern f\xfcr Unternehmen"},{type:Wp.FolderRoot,id:"102",orgaId:"301",displayName:"Belegverwaltung"},{type:Wp.Folder,id:"10",orgaId:"301",displayName:"Rechtliches"},{type:Wp.Folder,id:"11",orgaId:"301",displayName:"Kassenarchiv"},{type:Wp.FolderRoot,id:"103",orgaId:"302",displayName:"Belegverwaltung"},{type:Wp.Folder,id:"20",orgaId:"302",displayName:"Finanzen"},{type:Wp.Folder,id:"21",orgaId:"302",displayName:"Rechnungen"}),this._onOrganizationCreation("300"),this._onOrganizationCreation("301"),this._onOrganizationCreation("302")}_setTestSubResources(){this.subResources.push({id:"7000",typeId:Wp.Folder,orgaId:"300",subOrgaId:"1000",orgaResourceId:"1"},{id:"7001",typeId:Wp.Folder,orgaId:"300",subOrgaId:"1001",orgaResourceId:"1"},{id:"7005",typeId:Wp.Folder,orgaId:"300",subOrgaId:"1000",orgaResourceId:"2"},{id:"7010",typeId:Wp.Folder,orgaId:"300",subOrgaId:"1000",orgaResourceId:"4"},{id:"7100",typeId:Wp.Folder,orgaId:"302",subOrgaId:"1100",orgaResourceId:"20"})}_setTestPermissions(){return wc(this,void 0,void 0,(function*(){yield this._setAccessRight("0","400","300",{type:Wp.FolderRoot,id:"101",orgaId:"300"},rm.FolderCreatePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"1",orgaId:"300"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"1",orgaId:"300"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"1",orgaId:"300"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"2",orgaId:"300"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"2",orgaId:"300"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"2",orgaId:"300"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"3",orgaId:"300"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"3",orgaId:"300"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"3",orgaId:"300"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Bilanz,id:"220",orgaId:"300"},rm.BilanzViewPermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.Bilanz,id:"220",orgaId:"300"},rm.BilanzWritePermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.Bilanz,id:"220",orgaId:"300"},rm.BilanzViewPermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.TaxPrivate,id:"30",orgaId:"300"},rm.TaxViewPermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.TaxPrivate,id:"30",orgaId:"300"},rm.TaxWritePermissionKey),yield this._setAccessRight("0","400","300",{type:Wp.TaxCorporation,id:"31",orgaId:"300"},rm.TaxViewPermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.TaxPrivate,id:"30",orgaId:"300"},rm.TaxViewPermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.Folder,id:"1",orgaId:"300"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.Folder,id:"1",orgaId:"300"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.Folder,id:"2",orgaId:"300"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.Folder,id:"2",orgaId:"300"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","401","300",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","405","300",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderReadPermissionKey,"302"),yield this._setAccessRight("0","405","300",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderWritePermissionKey,"302"),yield this._setAccessRight("0","420","302",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderReadPermissionKey,"302"),yield this._setAccessRight("0","421","302",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderReadPermissionKey,"302"),yield this._setAccessRight("0","421","302",{type:Wp.Folder,id:"4",orgaId:"300"},rm.FolderWritePermissionKey,"302"),yield this._setAccessRight("0","410","301",{type:Wp.FolderRoot,id:"102",orgaId:"301"},rm.FolderCreatePermissionKey),yield this._setAccessRight("0","410","301",{type:Wp.Folder,id:"10",orgaId:"301"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","410","301",{type:Wp.Folder,id:"10",orgaId:"301"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","410","301",{type:Wp.Folder,id:"10",orgaId:"301"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","410","301",{type:Wp.Folder,id:"11",orgaId:"301"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","410","301",{type:Wp.Folder,id:"11",orgaId:"301"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","410","301",{type:Wp.Folder,id:"11",orgaId:"301"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","411","301",{type:Wp.Folder,id:"10",orgaId:"301"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","411","301",{type:Wp.Folder,id:"10",orgaId:"301"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","411","301",{type:Wp.Folder,id:"11",orgaId:"301"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","411","301",{type:Wp.Folder,id:"11",orgaId:"301"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","412","301",{type:Wp.Folder,id:"10",orgaId:"301"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","412","301",{type:Wp.Folder,id:"11",orgaId:"301"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","420","302",{type:Wp.FolderRoot,id:"103",orgaId:"302"},rm.FolderCreatePermissionKey),yield this._setAccessRight("0","420","302",{type:Wp.Folder,id:"20",orgaId:"302"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","420","302",{type:Wp.Folder,id:"20",orgaId:"302"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","420","302",{type:Wp.Folder,id:"20",orgaId:"302"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","420","302",{type:Wp.Folder,id:"21",orgaId:"302"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","420","302",{type:Wp.Folder,id:"21",orgaId:"302"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","420","302",{type:Wp.Folder,id:"21",orgaId:"302"},rm.FolderDeletePermissionKey),yield this._setAccessRight("0","421","302",{type:Wp.Folder,id:"20",orgaId:"302"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","421","302",{type:Wp.Folder,id:"20",orgaId:"302"},rm.FolderWritePermissionKey),yield this._setAccessRight("0","421","302",{type:Wp.Folder,id:"21",orgaId:"302"},rm.FolderReadPermissionKey),yield this._setAccessRight("0","421","302",{type:Wp.Folder,id:"21",orgaId:"302"},rm.FolderWritePermissionKey)}))}executeAmPartOfMgv(e,t,n,i,r,s){var o,a,c,l,u,d,h,g;return wc(this,void 0,void 0,(function*(){const f=this.getAllResourcesOfSubOrga(e,t),p=[];try{for(var m,v=_c(f);!(m=yield v.next()).done;){const e=m.value;let t;t=(yield this._isStaticResource(e))?this._findStaticResourceByTypeAndOrgaId(e.type,n):this._justCreateNewResource(Object.assign(Object.assign({},e),{orgaId:n,id:""})),t&&(p.push({sourceResourceId:e.id,destinationResourceId:t.id}),this._createSubResource({id:"",orgaId:n,orgaResourceId:t.id,subOrgaId:i,typeId:t.type}))}}catch(w){c={error:w}}finally{try{m&&!m.done&&(l=v.return)&&(yield l.call(v))}finally{if(c)throw c.error}}if(s)try{for(o=_c(r);!(a=yield o.next()).done;){const e=a.value;try{for(var y,b=_c(p);!(y=yield b.next()).done;){const t=y.value;yield this._copyPermissionsOfUser2resource4mgv(e.sourceUserId,t.sourceResourceId,e.destinationUserId,t.destinationResourceId,n,i)}}catch(_){h={error:_}}finally{try{y&&!y.done&&(g=b.return)&&(yield g.call(b))}finally{if(h)throw h.error}}}}catch(O){u={error:O}}finally{try{a&&!a.done&&(d=o.return)&&(yield d.call(o))}finally{if(u)throw u.error}}return f.forEach(e=>{const t=p.filter(t=>t.sourceResourceId===e.id);1===t.length&&this.eventService.publishResourceEvent({type:cm.ResourceMoved,resourceOld:e,resourceNew:{id:t[0].destinationResourceId,orgaId:n}}),this._removeResource(e.id)}),!0}))}_copyPermissionsOfUser2resource4mgv(e,t,n,i,r,s="0"){var o,a;return wc(this,void 0,void 0,(function*(){const c=this._findResource(i);if(!c)return!1;const l=yield this._getAllPermissionsOfUserToResource(e,t);try{for(var u,d=_c(l);!(u=yield d.next()).done;){const e=u.value;yield this._setAccessRight(s,n,r,c,e,void 0)}}catch(h){o={error:h}}finally{try{u&&!u.done&&(a=d.return)&&(yield a.call(d))}finally{if(o)throw o.error}}}))}_getAllPermissionsOfUserToResource(e,t){return wc(this,void 0,void 0,(function*(){const n=this._findResource(t);if(!n)return[];const i=yield this._findResourceType(n.type);if(!i)return[];const r=[];return i.possiblePermissions.forEach(n=>{this._hasPermission(e,t,n)&&r.push(n)}),r}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(lm),Ke(Pu),Ke(Su))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function dm(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"h5"),Xs(2),Rs(),Ms(3,"p"),Xs(4,"Zum Anzeigen der detaillierten Informationen bitte in Organisation einloggen..."),Rs(),Rs()),2&e){const e=Ls();xi(2),eo("Lizenz- und Rechteinfo f\xfcr das Produkt ",null==e.product?null:e.product.name,"")}}function hm(e,t){1&e&&(Ms(0,"p"),Xs(1,"Du besitzt eine Lizenz f\xfcr das Produkt und darfst es somit nutzen."),Rs())}function gm(e,t){1&e&&(Ms(0,"p"),Xs(1,"Du besitzt keine Lizenz f\xfcr das Produkt."),Rs())}function fm(e,t){1&e&&(Ms(0,"p"),Xs(1,"Du hast keinerlei - das Produkt betreffende - Freigaben."),Rs())}function pm(e,t){1&e&&(Ms(0,"p"),Xs(1,"Du hast folgende - das Produkt betreffende - Freigaben:"),Rs())}function mm(e,t){if(1&e&&(Ms(0,"li"),Ms(1,"span",4),Xs(2),Rs(),Ms(3,"span",5),Xs(4),Rs(),Ms(5,"span",6),Xs(6),Rs(),Rs()),2&e){const e=t.$implicit;xi(2),eo(" ",e.displayName," "),xi(2),eo(" ",e.resourceId," "),xi(2),eo(" ",e.permission," ")}}function vm(e,t){if(1&e&&(Ms(0,"ul",2),Ms(1,"li",3),Ms(2,"span",4),Xs(3," Ressourcename "),Rs(),Ms(4,"span",5),Xs(5," RessourceId "),Rs(),Ms(6,"span",6),Xs(7," Freigabe "),Rs(),Rs(),As(8,mm,7,3,"li",7),Rs()),2&e){const e=Ls(2);xi(8),Ps("ngForOf",null==e.product?null:e.product.permissions4User)}}function ym(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"h5"),Xs(2),Rs(),Ms(3,"p"),Xs(4),Rs(),Ms(5,"p"),Xs(6),Rs(),As(7,hm,2,0,"p",0),As(8,gm,2,0,"p",0),As(9,fm,2,0,"p",0),As(10,pm,2,0,"p",0),As(11,vm,9,1,"ul",1),Rs()),2&e){const e=Ls();xi(2),eo("Lizenz- und Rechteinfo f\xfcr das Produkt ",null==e.product?null:e.product.name,""),xi(2),eo("Deine Organisation hat insgesamt ",null==e.product?null:e.product.totalLicences," Lizenzen f\xfcr das Produkt gekauft."),xi(2),eo("",null==e.product?null:e.product.freeLicences," Lizenzen sind noch keinem Benutzer zugeordnet und damit frei."),xi(1),Ps("ngIf",null==e.product?null:e.product.licencedToUser),xi(1),Ps("ngIf",!(null!=e.product&&e.product.licencedToUser)),xi(1),Ps("ngIf",0==(null==e.product||null==e.product.permissions4User?null:e.product.permissions4User.length)),xi(1),Ps("ngIf",(null==e.product||null==e.product.permissions4User?null:e.product.permissions4User.length)>0),xi(1),Ps("ngIf",(null==e.product?null:e.product.permissions4User).length>0)}}let bm=(()=>{class e{constructor(e,t,n,i,r){this.route=e,this.principalService=t,this.settingsService=n,this.licenceService=i,this.accessService=r,this.product={name:""},this.loggedInInOrga=!1}ngOnInit(){var e,t,n,i,r,s;const o=null!==(t=null===(e=this.route.snapshot.data)||void 0===e?void 0:e.dataProductId)&&void 0!==t?t:mh.BILANZ;this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.orgaUser=this.principalService.getOrgaUser(),this.product=this.licenceService.getProductAndLicenceInfo(o,null===(n=this.orgaUser)||void 0===n?void 0:n.orgaId,null===(i=this.orgaUser)||void 0===i?void 0:i.id),this.settingsService.setTitle("Beispielprodukt: "+(null===(r=this.product)||void 0===r?void 0:r.name)),this.loggedInInOrga&&this.product&&(this.product.permissions4User=[],null===(s=this.product.resourceTypes)||void 0===s||s.forEach(e=>{var t;(null===(t=this.product)||void 0===t?void 0:t.permissions4User).push(...this.accessService.getAllPermissions4PrincipalByResourceType(e))}))}}return e.\u0275fac=function(t){return new(t||e)(xs(ff),xs(Pu),xs(ku),xs(Zp),xs(um))},e.\u0275cmp=dt({type:e,selectors:[["app-generic-product"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","liste",4,"ngIf"],[1,"liste"],[1,"valign-wrapper"],[1,"list-item-text-left"],[1,"list-item-text","small"],[1,"list-item-text"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(As(0,dm,5,1,"div",0),As(1,ym,12,8,"div",0)),2&e&&(Ps("ngIf",!t.loggedInInOrga),xi(1),Ps("ngIf",t.loggedInInOrga))},directives:[al,sl],styles:[".list-item-text[_ngcontent-%COMP%], .list-item-text-left[_ngcontent-%COMP%]{width:15em}.small[_ngcontent-%COMP%]{width:10em}"]}),e})();n("Gp9u");var wm=function(e){return e.Benutzerkonto="Benutzerkonto",e.SmsTan="SmsTan",e.SmartCard="SmartCard",e.SmartLogin="SmartLogin",e.SocialLogin="SocialLogin",e.OrgaDependent_DID="OrgaDependent_DID",e}({});function _m(e){return e===wm.OrgaDependent_DID}function Om(e){switch(e.type){case wm.Benutzerkonto:return Uu.Low;case wm.SmsTan:return Uu.Medium;case wm.SmartCard:case wm.SmartLogin:return Uu.Secure}return Uu.Low}var Im=function(e){return e.Privat="Privat",e.Unternehmen="Unternehmen",e.Kanzlei="Kanzlei",e}({}),Sm=function(e){return e[e.AccountVerified=1]="AccountVerified",e[e.AccountVerificationDeclined=2]="AccountVerificationDeclined",e[e.OrgaUserInvitationDeclined=3]="OrgaUserInvitationDeclined",e[e.OrgaUserInvitationAccepted=4]="OrgaUserInvitationAccepted",e[e.WishOfMembershipAccepted=5]="WishOfMembershipAccepted",e}({}),Cm=function(e){return e.AccountVerification="AccountVerification",e.InvitationOrgaUser="InvitationOrgaUser",e.InfoOfInvitationOrgaUser="InfoOfInvitationOrgaUser",e}({});let Am=(()=>{class e{constructor(e){this.http=e,this.mailBackendUri=bc+"fakeMails/"}getAllMails(){return wc(this,void 0,void 0,(function*(){try{const e=yield this.http.get(this.mailBackendUri).toPromise(),t=[];return e.forEach(e=>{t.push({id:e.id,email:e.email,type:e.type,account:e.account?Object.assign({},e.account):void 0,orgaUser:e.orgaUser?Object.assign({},e.orgaUser):void 0,organization:e.organization?Object.assign({},e.organization):void 0})}),t}catch(e){Oc(e)}return[]}))}deleteMail(e){return wc(this,void 0,void 0,(function*(){try{return!!(yield this.http.delete(this.mailBackendUri+e).toPromise())}catch(t){Oc(t)}return!1}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),km=(()=>{class e{constructor(e,t){this.settingsService=e,this.beMailService=t,this.mailList=[],this.useValueFromBackend=!0,this.callBackend=!1}mailsAvailable(){return wc(this,void 0,void 0,(function*(){return this.callBackend&&(yield this.getAllMails()),this.mailList.length>0}))}getNumberOfMails(){return this.mailList.length}getMailByOrgaUserId(e){return this.mailList.find(t=>{var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)===e})}markTaskAsDone(e,t){const n=this.getTaskById(e);n&&n.type===Cm.InvitationOrgaUser&&(n.account=t)}setTaskInProgress(e){return this.resetTaskInProgress(),this.taskByMailInProgress=this.mailList.find(t=>t.id===e),!!this.taskByMailInProgress}resetTaskInProgress(){this.taskByMailInProgress=void 0}getTaskInProgress(){return this.taskByMailInProgress}getTaskById(e){return this.mailList.find(t=>t.id===e)}addMailTask(e){if(this.callBackend&&alert("addMailTask mit echtem Backend?!?"),this.resetTaskInProgress(),this.settingsService.showImportantInfosOnly())switch(e.type){case Cm.InfoOfInvitationOrgaUser:return}e.id=Sc(this.mailList),this.mailList.push(e)}getAllMails(){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=yield this.beMailService.getAllMails();this.useValueFromBackend&&(this.mailList=[],this.mailList=e)}return this.mailList}))}removeTask(e){return wc(this,void 0,void 0,(function*(){this.resetTaskInProgress(),this.callBackend&&(yield this.beMailService.deleteMail(e));const t=this.mailList.findIndex(t=>t.id===e);t>=0&&this.mailList.splice(t,1)}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(ku),Ke(Am))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xm=(()=>{class e{constructor(e){this.http=e,this.notificationBackendUri=bc+"notifications/"}getAllNotificationsForCurrentPrincipal(){return wc(this,void 0,void 0,(function*(){try{const e=yield this.http.get(this.notificationBackendUri).toPromise(),t=[];return e.forEach(e=>{t.push({id:e.id,type:e.type,accountIdAsRecipient:e.accountIdAsRecipient,orgaIdAsRecipient:e.orgaIdAsRecipient,account:e.account?Object.assign({},e.account):void 0,orgaUser:e.orgaUser?Object.assign({},e.orgaUser):void 0,organization:e.organization?Object.assign({},e.organization):void 0})}),t}catch(e){Oc(e)}return[]}))}getCountOfAllNotificationsForCurrentPrincipal(){return wc(this,void 0,void 0,(function*(){try{return yield this.http.get(this.notificationBackendUri+"count").toPromise()}catch(e){Oc(e)}return 0}))}acceptInvitation(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.post(this.notificationBackendUri+e+"/accept",{}).toPromise()}catch(t){Oc(t)}return!1}))}denyInvitation(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.post(this.notificationBackendUri+e+"/deny",{}).toPromise()}catch(t){Oc(t)}return!1}))}deleteNotification(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.delete(this.notificationBackendUri+e).toPromise()}catch(t){Oc(t)}return!1}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Um=(()=>{class e{constructor(e,t,n,i){this.principalService=e,this.eventService=t,this.settingsService=n,this.beNotificationService=i,this.notificationList=[],this.callBackend=!1,this.useValueFromBackend=!0,this.eventService.idmEvent.subscribe(e=>this._onIdmEvent(e))}_onIdmEvent(e){const t=this.notificationList.length;switch(e.type){case Kp.AccountDeleted:this._removeItemsForThisAccount(e.accountId);break;case Kp.OrgaUserRemoved:this._removeItemsForThisOrgaUser(e.orgaUser.id);break;case Kp.OrganisationRemoved:this._removeItemsForThisOrganisation(e.organizationId)}this.notificationList.length!==t&&this.eventService.publishRefreshMainViewEvent()}_removeItemsForThisAccount(e){this.notificationList=this.notificationList.filter(t=>t.accountIdAsRecipient!==e)}_removeItemsForThisOrgaUser(e){this.notificationList=this.notificationList.filter(t=>{var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)!==e})}_removeItemsForThisOrganisation(e){this.notificationList=this.notificationList.filter(t=>t.orgaIdAsRecipient!==e),this.notificationList=this.notificationList.filter(t=>{var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.orgaId)!==e})}_fillWithTestData(){this.notificationList.push({id:"1",type:Tu.InfoForSuccessfulAccountVerification,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0}},{id:"2",type:Tu.RequestForInvitationAsOrgaUserToUser,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"3",type:Tu.RequestForInvitationAsOrgaUserToOrga,orgaIdAsRecipient:"300",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"33",type:Tu.RequestForInvitationAsOrgaUserToOrga,orgaIdAsRecipient:"300",account:{id:"111",name:"Simone",email:"",verified:!0},orgaUser:{id:"411",name:"Simone Heinzelmann",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"4",type:Tu.InfoForDenialOfInvitationAsOrgaUserToOrga,orgaIdAsRecipient:"300",orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"5",type:Tu.InfoForApprovalInvitationOfOrgaUserToUser,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"6",type:Tu.InfoForDenialOfInvitationOfOrgaUserToUser,accountIdAsRecipient:"110",account:{id:"110",name:"Klaus",email:"",verified:!0},orgaUser:{id:"410",name:"Klaus Kraus",orgaId:"300"},organization:{id:"300",name:"Kanzlei H",email:""}},{id:"7",type:Tu.WishOfMembershipToOrga,orgaIdAsRecipient:"300",account:{id:"110",name:"Klaus",email:"",verified:!0},organization:{id:"300",name:"Kanzlei H",email:""}})}addNotification(e){if(this.callBackend&&alert("addNotification with callBackend ?"),this.settingsService.showImportantInfosOnly())switch(e.type){case Tu.InfoForSuccessfulAccountVerification:case Tu.InfoForApprovalInvitationOfOrgaUserToUser:case Tu.InfoForDenialOfInvitationAsOrgaUserToOrga:case Tu.InfoForDenialOfInvitationOfOrgaUserToUser:return}e.id=Sc(this.notificationList),this.notificationList.push(e),this.eventService.publishRefreshMainViewEvent()}getAllNotificationsForCurrentPrincipal(){var e,t;return wc(this,void 0,void 0,(function*(){if(!this.principalService.isLoggedIn())return[];if(this.callBackend){const e=yield this.beNotificationService.getAllNotificationsForCurrentPrincipal();if(this.useValueFromBackend)return e}let n=null!==(t=null===(e=this.principalService.getOrgaUser())||void 0===e?void 0:e.orgaId)&&void 0!==t?t:0;return n&&!this.principalService.isAdminOfCurrentOrga()&&(n=0),this.notificationList.filter(e=>e.accountIdAsRecipient===this.principalService.getAccount().id||e.orgaIdAsRecipient===n?e:void 0)}))}getNumberOfNotificationsForCurrentPrincipal(){return wc(this,void 0,void 0,(function*(){return this.callBackend?yield this.beNotificationService.getCountOfAllNotificationsForCurrentPrincipal():(yield this.getAllNotificationsForCurrentPrincipal()).length}))}getNotificationByOrgaUserId(e){return this.notificationList.find(t=>{var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)===e})}_declineInvitationOrgaUserByUser(e){const t=Object.assign(Object.assign({},e),{id:"",type:Tu.InfoForDenialOfInvitationAsOrgaUserToOrga,accountIdAsRecipient:void 0,orgaIdAsRecipient:e.orgaUser.orgaId});this.addNotification(t)}_declineInvitationOrgaUserByOrga(e){var t;const n=Object.assign(Object.assign({},e),{id:"",type:Tu.InfoForDenialOfInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0});this.addNotification(n)}_declineWishOfMembership(e){var t;const n=Object.assign(Object.assign({},e),{id:"",type:Tu.InfoForDenialOfInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0});this.addNotification(n)}declineInvitation(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend)return yield this.beNotificationService.denyInvitation(e),void this.eventService.publishRefreshMainViewEvent();const t=this.notificationList.find(t=>t.id===e);if(t){switch(t.type){case Tu.RequestForInvitationAsOrgaUserToUser:this._declineInvitationOrgaUserByUser(t);break;case Tu.RequestForInvitationAsOrgaUserToOrga:this._declineInvitationOrgaUserByOrga(t);break;case Tu.WishOfMembershipToOrga:this._declineWishOfMembership(t)}this.removeNotification(e)}}))}acceptInvitation(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend)return yield this.beNotificationService.acceptInvitation(e),void this.eventService.publishRefreshMainViewEvent();const t=this.notificationList.find(t=>t.id===e);if(t){switch(t.type){case Tu.RequestForInvitationAsOrgaUserToUser:this._acceptInvitationOrgaUserByUser(t);break;case Tu.WishOfMembershipToOrga:this._acceptWishOfMembership(t);break;case Tu.RequestForInvitationAsOrgaUserToOrga:this._acceptInvitationOrgaUserByOrga(t)}this.removeNotification(e)}}))}removeNotification(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend)yield this.beNotificationService.deleteNotification(e);else{const t=this.notificationList.findIndex(t=>t.id===e);t>=0&&this.notificationList.splice(t,1)}this.eventService.publishRefreshMainViewEvent()}))}_acceptInvitationOrgaUserByOrga(e){var t;return wc(this,void 0,void 0,(function*(){this.eventService.publishTaskEvent({type:Sm.OrgaUserInvitationAccepted,account:e.account,orgaUser:e.orgaUser});{const n=Object.assign(Object.assign({},e),{id:"",type:Tu.InfoForApprovalInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0});return this.addNotification(n),!0}}))}_acceptWishOfMembership(e){var t;this.eventService.publishTaskEvent({type:Sm.WishOfMembershipAccepted,account:e.account,organization:e.organization});const n=Object.assign(Object.assign({},e),{id:"",type:Tu.InfoForApprovalInvitationOfOrgaUserToUser,accountIdAsRecipient:null===(t=e.account)||void 0===t?void 0:t.id,orgaIdAsRecipient:void 0});return this.addNotification(n),!0}_acceptInvitationOrgaUserByUser(e){const t=Object.assign(Object.assign({},e),{id:"",type:Tu.RequestForInvitationAsOrgaUserToOrga,accountIdAsRecipient:void 0,orgaIdAsRecipient:e.orgaUser.orgaId});return this.addNotification(t),!0}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pu),Ke(Su),Ke(ku),Ke(xm))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pm=(()=>{class e{constructor(e,t,n,i,r){this.settingsService=e,this.eventService=t,this.principalService=n,this.mailService=i,this.notificationService=r,this.accounts=[{id:"100",verified:!0,name:"System Admin",email:"sysadmin@bk"},{id:"110",verified:!0,name:"Klaus",email:"klaus@bk"},{id:"111",verified:!0,name:"Simone",email:"simone@bk"},{id:"120",verified:!0,name:"Martin",email:"martin@bk"},{id:"121",verified:!0,name:"Sonja",email:"sonja@bk"},{id:"122",verified:!0,name:"Kasse Kanzlei Palmengarten",email:"dummy@martin"},{id:"130",verified:!0,name:"Tom",email:"tom@bk"},{id:"131",verified:!0,name:"Petra",email:"petra@bk"},{id:"140",verified:!0,name:"Resi",email:"resi@bk"}],this.creds=[{id:"200",accountId:"100",kennung:"sysadmin@bk",secret:"test",type:wm.Benutzerkonto},{id:"210",accountId:"110",kennung:"klaus@bk",secret:"test",type:wm.Benutzerkonto},{id:"211",accountId:"110",kennung:"klaus@sc",secret:"test",type:wm.SmartCard},{id:"212",accountId:"110",kennung:"",secret:"",type:wm.SocialLogin,provider:"google",userIdFromProvider:"113153024055027519050"},{id:"215",accountId:"111",kennung:"simone@bk",secret:"test",type:wm.Benutzerkonto},{id:"216",accountId:"111",kennung:"simone@sc",secret:"test",type:wm.SmartCard},{id:"220",accountId:"120",kennung:"martin@bk",secret:"test",type:wm.Benutzerkonto},{id:"221",accountId:"120",kennung:"martin@st",secret:"test",type:wm.SmsTan},{id:"222",accountId:"120",kennung:"martin@sc",secret:"test",type:wm.SmartCard},{id:"223",accountId:"120",orgaId:"301",kennung:"martin@did",secret:"test",type:wm.OrgaDependent_DID},{id:"224",accountId:"120",orgaId:"999",kennung:"martinNoOrga@did",secret:"test",type:wm.OrgaDependent_DID},{id:"225",accountId:"121",kennung:"sonja@bk",secret:"test",type:wm.Benutzerkonto},{id:"227",accountId:"122",orgaId:"301",kennung:"kasse@martin",secret:"test",type:wm.OrgaDependent_DID},{id:"230",accountId:"130",kennung:"tom@bk",secret:"test",type:wm.Benutzerkonto},{id:"231",accountId:"130",kennung:"tom@sc",secret:"test",type:wm.SmartCard},{id:"235",accountId:"131",kennung:"petra@bk",secret:"test",type:wm.Benutzerkonto},{id:"240",accountId:"140",kennung:"resi@bk",secret:"test",type:wm.Benutzerkonto},{id:"241",accountId:"140",kennung:"resi@sc",secret:"test",type:wm.SmartCard}],this.organizations=[{id:"300",name:"Kanzlei Heinzelmann",email:"info@Kanzlei-Heinzelmann",type:Im.Kanzlei},{id:"301",name:"Kanzlei Palmengarten",email:"info@Kanzlei-Palmengarten",type:Im.Kanzlei},{id:"302",name:"Holzhandel Grubinger",email:"info@Holzhandel-Grubinger",type:Im.Unternehmen},{id:"303",name:"Familie Martin privat",email:"info@Familie-Martin",type:Im.Privat}],this.orgaUsers=[{id:"400",accountId:"110",orgaId:"300",name:"Klaus Heinzelmann",adminType:xu.SuperAdmin},{id:"401",accountId:"111",orgaId:"300",name:"Simone Heinzelmann",adminType:xu.Admin},{id:"10401",orgaId:"300",name:"Hans Fallada",adminType:xu.Member},{id:"10402",orgaId:"300",name:"Friedrich Schiller",adminType:xu.Member},{id:"10403",orgaId:"300",name:"Wolfgang G\xf6the",adminType:xu.Member},{id:"10404",orgaId:"300",name:"Rainer Maria Rilke",adminType:xu.Member},{id:"10405",orgaId:"300",name:"G\xfcnther Grass",adminType:xu.Member},{id:"10406",orgaId:"300",name:"Heinrich Heine",adminType:xu.Member},{id:"405",orgaId:"300",foreignOrgaId:"302",name:"Mandant Grubinger",adminType:xu.Member},{id:"407",orgaId:"300",foreignUserId:"421",name:"Petra - Mandant Grubinger",adminType:xu.Member},{id:"410",accountId:"120",orgaId:"301",name:"Martin Palmengarten",adminType:xu.SuperAdmin},{id:"411",accountId:"121",orgaId:"301",name:"Sonja Hohlraab",adminType:xu.Member},{id:"412",accountId:"122",orgaId:"301",name:"Kasse von Kanzlei Palmengarten",adminType:xu.Member},{id:"420",accountId:"130",orgaId:"302",name:"Tom Grubinger",adminType:xu.SuperAdmin},{id:"421",accountId:"131",orgaId:"302",name:"Petra Elfenbein",adminType:xu.Member},{id:"430",accountId:"120",orgaId:"303",name:"Martin privat",adminType:xu.SuperAdmin}],this.subOrganizations=[{id:"1000",orgaId:"300",name:"Filiale F\xfcrth"},{id:"1001",orgaId:"300",name:"Filiale N\xfcrnberg"},{id:"1100",orgaId:"302",name:"Eigene Buchhaltung"}],this.subOrgaUsers=[{id:"5000",orgaId:"300",orgaUserId:"400",subOrgaId:"1000",subAdmin:!0},{id:"5001",orgaId:"300",orgaUserId:"400",subOrgaId:"1001",subAdmin:!0},{id:"5005",orgaId:"300",orgaUserId:"401",subOrgaId:"1000"},{id:"5010",orgaId:"300",orgaUserId:"405",subOrgaId:"1000"},{id:"5011",orgaId:"300",orgaUserId:"407",subOrgaId:"1000"},{id:"5100",orgaId:"302",orgaUserId:"420",subOrgaId:"1100",subAdmin:!0},{id:"5101",orgaId:"302",orgaUserId:"421",subOrgaId:"1100",subAdmin:!1}],this.eventService.taskEvent.subscribe(e=>this._onTaskEvent(e))}ngOnDestroy(){}_onTaskEvent(e){switch(e.type){case Sm.AccountVerificationDeclined:this._deleteAccount(e.account.id);break;case Sm.OrgaUserInvitationDeclined:break;case Sm.OrgaUserInvitationAccepted:this._onOrgaUserInvitationAccepted(e.account.id,e.orgaUser.id);break;case Sm.WishOfMembershipAccepted:this._onWishOfMembershipAccepted(e)}}_onWishOfMembershipAccepted(e){if(!e.account||!e.organization)throw new Error("Parameter falsch...!");const t=this.findAccountById(e.account.id),n=this.organizations.find(t=>t.id===e.organization.id);t&&n&&this._addNewOrgaUser({id:"",name:t.name,accountId:t.id,orgaId:n.id,adminType:xu.Member})}_onOrgaUserInvitationAccepted(e,t){const n=this.findAccountById(e),i=this.orgaUsers.find(e=>e.id===t);n&&i&&(i.accountId=n.id)}static _guardArgument(e,t=""){if(null==e){if(t)throw new Error("Argument <"+t+"> is null or undefined!");throw new Error("Argument is null or undefined!")}}_handleInvitationOrgaUserTask(e,t){if(t.account)return void console.log("Mail-Task already done");if(this.findOrgaUserByAccountId(t.orgaUser.orgaId,e.id))return void console.log("Account is already linked with other user in that orga");this.mailService.markTaskAsDone(t.id,e);const n=this.findOrgaUserById(t.orgaUser.id);n?n.accountId?console.log("invited orgaUser already linked with account"):this.notificationService.addNotification({id:"",type:Tu.RequestForInvitationAsOrgaUserToUser,accountIdAsRecipient:e.id,account:e,orgaUser:t.orgaUser,organization:t.organization}):console.log("invited orgaUser not found")}_handleAccountVerification(e,t){var n;(null===(n=t.account)||void 0===n?void 0:n.id)===e.id?(e.verified=!0,this.notificationService.addNotification({id:"",type:Tu.InfoForSuccessfulAccountVerification,accountIdAsRecipient:e.id,account:e})):console.log("account-verification with wrong account")}_handleLoginTask(e,t){const n=this.mailService.getTaskById(t);(null==n?void 0:n.type)===Cm.AccountVerification?this._handleAccountVerification(e,n):(null==n?void 0:n.type)===Cm.InvitationOrgaUser&&this._handleInvitationOrgaUserTask(e,n)}login(e,t){let n;if(e.provider)n=this.creds.find(t=>t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider);else{if(!e.kennung||0===e.kennung.length)throw new Error("wrong social-login without secret");n=this.creds.find(t=>t.kennung.toLowerCase()===e.kennung.toLowerCase())}if(!n)throw new Error("login-credential not found => failure");if(e.secret.length>0&&e.secret!==n.secret)throw new Error("login-secret incorrect => failure");const i=this.accounts.find(e=>e.id===n.accountId);if(!i)throw new Error("huch: corresponding account not found => failure");if(this._handleLoginTask(i,t),!i.verified)throw new Error("login-attempt with un-verified account");const r=[];if(_m(null==n?void 0:n.type)){if(!n.orgaId)throw new Error("OrgaDependent Credential, but no orgaId => login failed...");const e=this.orgaUsers.find(e=>e.accountId===i.id&&e.orgaId===n.orgaId);if(!e)throw new Error("OrgaDependent Credential, but orgaUser not found => login failed...");r.push(e)}else this.orgaUsers.forEach(e=>{e.accountId===i.id&&r.push(e)});if(r.length<=0)return{authType:Ac.Account,authLevel:Om(n),account:Object.assign({},i)};const s=[];r.forEach(e=>{s.push(this.organizations.find(t=>t.id===e.orgaId))});const o={authType:Ac.Account,authLevel:Om(n),account:Object.assign({},i),availableOrgas:Ic(s)};return 1===s.length&&(o.authType=Ac.OrgaUser,o.orgaUser=Object.assign({},r[0]),o.organization=s[0]),o}register(e,t,n){if(!this._checkAccountIsValid(e))throw new Error("account-fields not valid");if(!this._checkCredentialIsValid(t))throw new Error("credential-fields not valid");const i=this._addNewAccount(e);t.accountId=i.id;const r=this._addNewCredential(t);return this._handleLoginTask(i,n),this.settingsService.registeredAccountMustBeVerifiedByMail()||this.settingsService.afterRegistrationLoginIsRequired()?{authType:Ac.None}:this.login(r)}addNewCredential(e){if(this.principalService.guardPrincipalIsThisAccount(e.accountId),this._checkCredentialIsValid(e))return Object.assign({},this._addNewCredential(e))}getAllCredentials(e){return e?(this.principalService.guardPrincipalIsThisAccount(e),Ic(this.creds.filter(t=>t.accountId===e))):[]}removeCredential(e){const t=this.creds.findIndex(t=>t.id===e);t>=0&&(this.principalService.guardPrincipalIsThisAccount(this.creds[t].accountId),this.creds.splice(t,1))}_checkCredentialIsValid(e){if(e.provider){if(!e.userIdFromProvider)return!1;if(this.creds.find(t=>t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider))return!1}else{if(!e.kennung||e.kennung.length<3)return!1;if(this.creds.find(t=>t.kennung.toLowerCase()===e.kennung.toLowerCase()))throw new Error("credential-kennung already used (email)")}return!0}_addNewCredential(e){return e.id=Sc(this.creds),this.creds.push(e),e}_deleteAllCredentialsOfAccount(e){this.creds=this.creds.filter(t=>t.accountId!==e)}findAccountByMail(e){const t=this.accounts.find(t=>t.email.toLowerCase()===e.toLowerCase());return t?Object.assign({},t):void 0}findAccountById(e){const t=this.accounts.find(t=>t.id===e);return t?Object.assign({},t):void 0}updateAccount(e){if(this.principalService.guardPrincipalIsThisAccount(e.id),!this._checkAccountIsValid(e))return!1;const t=this.accounts.find(t=>t.id===e.id);return t&&(t.name=e.name,t.email=e.email,t.verified=e.verified),!!t}deleteAccount(e){return this.principalService.guardPrincipalIsThisAccount(e),this._deleteAccount(e)}_deleteAccount(e){return!(this._accountIsMemberInAtLeastOneOrga(e)&&!this.settingsService.allowDeletionOfAccountWithOrgaMemberships()||!this.accounts.find(t=>t.id===e)||(this._deleteAllOrgaUsersOfAccount(e),this._deleteAllCredentialsOfAccount(e),this._removeAccountFromList(e),this.eventService.publishIdmEvent({type:Kp.AccountDeleted,accountId:e}),0))}_accountIsMemberInAtLeastOneOrga(e){return void 0!==this.orgaUsers.find(t=>t.accountId===e)}_checkAccountIsValid(e){if(!e.name||e.name.length<3)return!1;const t=this.accounts.find(t=>t.email.toLowerCase()===e.email.toLowerCase());if(t){if(e.id===t.id)return!0;throw new Error("account with that email already exists...")}return!0}_addNewAccount(e){const t=this.settingsService.registeredAccountMustBeVerifiedByMail();return e.verified=!t,e.id=Sc(this.accounts),this.accounts.push(e),t&&this.mailService.addMailTask({type:Cm.AccountVerification,email:e.email,account:e}),e}_removeAccountFromList(e){const t=this.accounts.findIndex(t=>t.id===e);t>=0&&this.accounts.splice(t,1)}inviteUserToOrga(e,t,n){this.principalService.guardPrincipalIsOrgaAdmin(e);const i=this.findAccountByMail(n);if(i&&this.findOrgaUserByAccountId(e,i.id))throw new Error("Der einzuladende Benutzer ist bereits Mitglied in deiner Organsation!");let r={orgaId:e,adminType:xu.Member,name:t};if(i&&this.settingsService.acceptHandshakeDecisionsAutomatically())return r.accountId=i.id,this.joinOrganization(e,r);const s=this.joinOrganization(e,r);if(!s)return;let o=Cm.InvitationOrgaUser,a=void 0;const c=this.findOrgaById(e);return i&&(this.notificationService.addNotification({id:"",type:Tu.RequestForInvitationAsOrgaUserToUser,accountIdAsRecipient:i.id,account:i,orgaUser:r,organization:c}),o=Cm.InfoOfInvitationOrgaUser,a=i),this.mailService.addMailTask({type:o,email:n,account:a,orgaUser:r,organization:c}),s}isForeignUser(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}getAllOrgaUsers(e,t=!1,n=!1){if(!e)return[];this.principalService.guardPrincipalBelongsToThisOrga(e);let i=Ic(this.orgaUsers.filter(t=>t.orgaId===e));if(t&&(i=i.filter(e=>!this.isForeignUser(e))),n){const e=[];return i.forEach(t=>{e.push(Object.assign(Object.assign({},t),{status:this._getStatusOfOrgaUser(t)}))}),e}return i}_getStatusOfOrgaUser(e){var t;return e.accountId?"OK":this.isForeignUser(e)?e.foreignUserId?"externer Benutzer":"externe Organisation":null!==(t=this._findMailOrNotificationForOrgaUser(e))&&void 0!==t?t:"unverbunden"}_findMailOrNotificationForOrgaUser(e){const t=this.notificationService.getNotificationByOrgaUserId(e.id);if(t)switch(t.type){case Tu.RequestForInvitationAsOrgaUserToUser:return"Einladung verschickt";case Tu.InfoForDenialOfInvitationAsOrgaUserToOrga:return"Anwender hat abgelehnt";case Tu.RequestForInvitationAsOrgaUserToOrga:return"Anwender hat zugestimmt";case Tu.InfoForDenialOfInvitationOfOrgaUserToUser:return"Orga hat abgelehnt";case Tu.InfoForApprovalInvitationOfOrgaUserToUser:return"Orga hat zugestimmt, OK";case Tu.WishOfMembershipToOrga:return"Anwender w\xfcnscht Aufnahme"}const n=this.mailService.getMailByOrgaUserId(e.id);if(n)switch(n.type){case Cm.InfoOfInvitationOrgaUser:case Cm.InvitationOrgaUser:return"Mail versendet"}}getAllOrgaUsers4SubOrga(e,t,n=!1){if(this.principalService.guardPrincipalIsSubOrgaAdmin(t),void 0===t||""===t||"0"===t)return this.getAllOrgaUsers(e);const i=this.subOrgaUsers.filter(e=>e.subOrgaId===t).map(e=>e.orgaUserId),r=Ic(this.orgaUsers.filter(e=>i.includes(e.id)));return n?r.filter(e=>!e.foreignOrgaId&&!e.foreignUserId):r}updateOrgaUser(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this.orgaUsers.find(t=>t.id===e.id);return t&&(t.name=e.name,t.adminType=e.adminType),t}findOrgaUserByAccountId(e,t){if(!e||!t)return;const n=this.orgaUsers.find(n=>n.orgaId===e&&n.accountId===t);return n&&Object.assign({},n)}findAllOrgaUsersOfAccount(e){return e?Ic(this.orgaUsers.filter(t=>t.accountId===e)):[]}accountHasAnyOrgaMembership(e){return this.principalService.guardPrincipalIsThisAccount(e),!!this.orgaUsers.find(t=>t.accountId===e)}findForeignUserByOrgaId(e,t){if(this.principalService.guardPrincipalBelongsToThisOrga(e),!e||!t)return;const n=this.orgaUsers.find(n=>n.orgaId===e&&n.foreignUserId===t);return n&&Object.assign({},n)}_findOrgaUserById(e){if(e)return this.orgaUsers.find(t=>t.id===e)}findOrgaUserById(e){const t=this._findOrgaUserById(e);return t&&Object.assign({},t)}findCorrespondingForeignOrgaUser(e){if(!e.foreignUserId)throw new Error("Method findCorrespondingForeignOrgaUser called with wrong orgaUser-Type");this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this._findOrgaUserById(e.foreignUserId);return t&&Object.assign({},t)}_findAllDirectProxyUsersOfUser(e){return this.orgaUsers.filter(t=>t.foreignUserId===e.id)}_addNewOrgaUser(e){return e.id=Sc(this.orgaUsers),this.orgaUsers.push(e),e}_deleteAllOrgaUsersOfAccount(e){this.orgaUsers.filter(t=>t.accountId===e).forEach(e=>this._onOrgaUserRemoval(e))}_isAdmin(e){const t=this._findOrgaUserById(e);return!(!t||!t.adminType)&&t.adminType!==xu.Member}_onOrgaUserRemoval(e,t=!0){if(!e)return!1;this._removeAllSubUsersOfOrgaUser(e);const n=this._findAllDirectProxyUsersOfUser(e);n&&n.forEach(e=>this._onOrgaUserRemoval(e));const i=this.orgaUsers.findIndex(t=>t.id===e.id);return i>=0&&(this.orgaUsers.splice(i,1),t&&this.eventService.publishIdmEvent({type:Kp.OrgaUserRemoved,orgaUser:e}),!0)}getAllSubOrgaUsers4SubOrga(e){return this.principalService.guardPrincipalIsSubOrgaAdmin(e),Ic(this.subOrgaUsers.filter(t=>t.subOrgaId===e))}changeSubOrgaUsers(e){const t=this.principalService.getOrgaUser().orgaId;return this.principalService.guardPrincipalIsOrgaAdmin(t),e.forEach(e=>{if(e.orgaId!==t)throw new Error("Method changeSubOrgaUsers called with wrong orgaId!")}),e.forEach(e=>{const t=this.subOrgaUsers.findIndex(t=>t.id===e.id);t>=0?e.subOrgaId?this.subOrgaUsers[t].subAdmin=e.subAdmin:this._removeSubOrgaUser(e.id):this._createSubUser(e)}),!0}_removeSubOrgaUser(e){const t=this.subOrgaUsers.findIndex(t=>t.id===e);if(t>=0){const e=this.subOrgaUsers[t];return this.subOrgaUsers.splice(t,1),this.eventService.publishIdmEvent({type:Kp.SubOrgaUserRemoved,subOrganizationId:e.subOrgaId,orgaUser:{id:e.orgaUserId,name:""}}),!0}return!1}_createSubUser(e){return e.id=Sc(this.subOrgaUsers),this.subOrgaUsers.push(Object.assign({},e)),!0}_removeAllSubUsersOfOrgaUser(e){this.subOrgaUsers=this.subOrgaUsers.filter(t=>t.orgaUserId!==e.id)}_findForeignOrgaByOrgaId(e,t){if(e&&t)return this.orgaUsers.find(n=>n.orgaId===e&&n.foreignOrgaId===t)}foreignOrgaIsAlreadyMemberInOrga(e,t){return void 0!==this._findForeignOrgaByOrgaId(e,t)}findOrgaById(e){const t=this.organizations.find(t=>t.id===e);return t&&Object.assign({},t)}findAllOrgasOfAccount(e){const t=this.findAllOrgaUsersOfAccount(e),n=[];return t.forEach(e=>{const t=this.findOrgaById(e.orgaId);t&&n.push(t)}),Ic(n)}findOrgaByMail(e){const t=this.organizations.find(t=>t.email.toLocaleLowerCase()===e.toLocaleLowerCase());return t&&Object.assign({},t)}removeOrgaUser(t){e._guardArgument(t);const n=this.orgaUsers.find(e=>e.id===t);return this.principalService.guardPrincipalIsOrgaAdmin(null==n?void 0:n.orgaId),this._onOrgaUserRemoval(n)}deleteOrganization(e){this.principalService.guardPrincipalIsOrgaSuperAdmin(e);const t=this.organizations.findIndex(t=>t.id===e);t<0||(this.orgaUsers.filter(t=>t.orgaId===e).forEach(e=>this._onOrgaUserRemoval(e,!1)),this.organizations.splice(t,1),this.eventService.publishIdmEvent({type:Kp.OrganisationRemoved,organizationId:e}))}joinOrganization(e,t){if(t.accountId&&this.findOrgaUserByAccountId(e,t.accountId))return;if(t.foreignOrgaId&&this._findForeignOrgaByOrgaId(e,t.foreignOrgaId))return;if(t.foreignUserId&&this.findForeignUserByOrgaId(e,t.foreignUserId))return;t.orgaId=e;const n=this._addNewOrgaUser(t);return n&&Object.assign({},n)}createNewOrganization(e,t){const n=this._addNewOrganization(e);if(n)return t.orgaId=n.id,t.adminType=xu.SuperAdmin,this._addNewOrgaUser(t),this.eventService.publishIdmEvent({type:Kp.OrganisationCreated,organizationId:e.id}),n&&Object.assign({},n)}_addNewOrganization(e){if(!this.organizations.find(t=>t.email.toLocaleLowerCase()===e.email.toLocaleLowerCase()))return e.id=Sc(this.organizations),this.organizations.push(e),e}_getAllAllowedSubOrgas(e,t,n=!0){const i=[];n&&i.push(this._getOrgaAsSubOrga(e)),i.push(...this.subOrganizations.filter(t=>t.orgaId===e));const r=[];return i.forEach(e=>{this._isSubAdmin(t,e.id)&&r.push(e)}),r}getAllAllowedSubOrgas(e,t,n=!0){return Ic(this._getAllAllowedSubOrgas(e,t,n))}_createSubOrganization(e){return e.id=Sc(this.subOrganizations),this.subOrganizations.push(e),Object.assign({},e)}createSubOrganization(e){return this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId),this._createSubOrganization(e)}findSubOrgaById(e){return this.subOrganizations.find(t=>t.id===e)}removeSubOrganization(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this.subOrganizations.findIndex(t=>t.id===e.id);return!(t<0||(this.subOrgaUsers=this.subOrgaUsers.filter(t=>t.subOrgaId!==e.id),this.subOrganizations.splice(t,1),this.eventService.publishIdmEvent({type:Kp.SubOrganizationRemoved,subOrganizationId:e.id}),0))}_isSubAdmin(e,t){if(this._isAdmin(e))return!0;const n=this.subOrgaUsers.find(n=>n.orgaUserId===e&&n.subOrgaId===t);return!!n&&!!n.subAdmin}renameSubOrganization(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this.subOrganizations.find(t=>t.id===e.id);return!!t&&(t.name=e.name,!0)}_getOrgaAsSubOrga(e){const t=this.findOrgaById(e);return t?{id:"0",name:t.name+" Gesamt",orgaId:t.id}:{id:"0",name:"name Gesamt",orgaId:e}}createIdmEntities4Mgv(e,t,n){const i=this.findOrgaById(e),r=this.findSubOrgaById(t),s=this.findOrgaById(n);if(!i||!r||!s)return;const o=this._createSubOrganization({id:"",orgaId:s.id,name:`MGV from ${i.name} - ${r.name}`});if(!o)return;const a=[];return this.getAllOrgaUsers4SubOrga(e,t,!0).forEach(e=>{const i=this.joinOrganization(n,Object.assign(Object.assign({},e),{id:"",orgaId:n,adminType:xu.Member}));i&&(a.push({sourceUserId:e.id,destinationUserId:i.id}),this._createSubUser({id:"",orgaUserId:i.id,orgaId:o.orgaId,subOrgaId:o.id,subAdmin:this._isSubAdmin(e.id,t)}))}),{destSubOrga:o,userMap:a}}removeSourceUsers4Mgv(e){let t=!0;return e.forEach(e=>t=this.removeOrgaUser(e)&&t),t}}return e.\u0275fac=function(t){return new(t||e)(Ke(ku),Ke(Su),Ke(Pu),Ke(km),Ke(Um))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Tm=(()=>{class e{constructor(e){this.http=e,this.orgaBackendUri=bc+"organizations/",this.myBackendUri=bc+"my/"}createNewOrganization(e){return wc(this,void 0,void 0,(function*(){try{const t=e,n=yield this.http.post(this.orgaBackendUri,t).toPromise();return null!=n?n:void 0}catch(t){Oc(t)}}))}deleteOrganization(e){return wc(this,void 0,void 0,(function*(){try{return!!(yield this.http.delete(this.orgaBackendUri+e).toPromise())}catch(t){Oc(t)}return!1}))}inviteUser(e,t,n){return wc(this,void 0,void 0,(function*(){try{const i={usersName:t,invitationMail:n};return yield this.http.post(this.orgaBackendUri+e+"/inviteUser",i).toPromise()}catch(i){Oc(i,!0)}}))}wishOfMembership(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.post(this.orgaBackendUri+e+"/wishOfMembership",{}).toPromise()}catch(t){Oc(t,!0)}return!1}))}findOrgaByMail(e){return wc(this,void 0,void 0,(function*(){try{const t=(new yl).append("mail",e);return yield this.http.get(this.orgaBackendUri,{params:t}).toPromise()}catch(t){Oc(t)}}))}findAllUsersByOrgaId(e,t=!1,n=!1){return wc(this,void 0,void 0,(function*(){try{const i={params:(new yl).append("onlyOwnUser",Cc(t)).append("withStatus",Cc(n))};return yield this.http.get(this.orgaBackendUri+e+"/users",i).toPromise()}catch(i){Oc(i)}return[]}))}findAllUsersOfCurrentAccount(){return wc(this,void 0,void 0,(function*(){try{return yield this.http.get(this.myBackendUri+"users").toPromise()}catch(e){Oc(e)}return[]}))}findAllOrgasOfCurrentAccount(){return wc(this,void 0,void 0,(function*(){try{return yield this.http.get(this.myBackendUri+"organizations").toPromise()}catch(e){Oc(e)}return[]}))}findOrgaById(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.get(this.orgaBackendUri+e).toPromise()}catch(t){Oc(t)}}))}getAllSubOrgas(e=!0){return wc(this,void 0,void 0,(function*(){try{const t=e?{}:{params:(new yl).append("justSubOrganizations","true")};return yield this.http.get(this.orgaBackendUri+"subOrganizations",t).toPromise()}catch(t){Oc(t)}return[]}))}createNewSubOrga(e){return wc(this,void 0,void 0,(function*(){try{return this.http.post(this.orgaBackendUri+"subOrganizations",e).toPromise()}catch(t){Oc(t)}}))}removeSubOrga(e){return wc(this,void 0,void 0,(function*(){try{return!!(yield this.http.delete(this.orgaBackendUri+"subOrganizations/"+e).toPromise())}catch(t){Oc(t)}return!1}))}renameSubOrganization(e){return wc(this,void 0,void 0,(function*(){try{return!!(yield this.http.patch(this.orgaBackendUri+"subOrganizations/"+e.id,e).toPromise())}catch(t){Oc(t)}return!1}))}updateUsersAndResourcesOfSubOrganization(e,t,n){return wc(this,void 0,void 0,(function*(){try{const i=[],r=[],s=[];t.forEach(e=>{e.isInSubOrgaNew&&i.push(e.id),e.subAdminNew&&r.push(e.id)}),n.forEach(e=>{e.isInSubOrgaNew&&s.push(e.id)});const o={users:i,admins:r,resources:s};return!!(yield this.http.patch(this.orgaBackendUri+"subOrganizations/"+e.id,o).toPromise())}catch(i){Oc(i)}return!1}))}getSubOrgaDetails(e){return wc(this,void 0,void 0,(function*(){try{const t=yield this.http.get(this.orgaBackendUri+"subOrganizations/"+e).toPromise();return console.log(t),t}catch(t){Oc(t)}}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Mm=(()=>{class e{constructor(e){this.http=e,this.userBackendUri=bc+"orga-users/"}createNewUser(e){return wc(this,void 0,void 0,(function*(){try{const t=e,n=yield this.http.post(this.userBackendUri,t).toPromise();return null!=n?n:void 0}catch(t){Oc(t)}}))}deleteUser(e){return wc(this,void 0,void 0,(function*(){try{return!!(yield this.http.delete(this.userBackendUri+e).toPromise())}catch(t){Oc(t)}return!1}))}modifyUser(e){return wc(this,void 0,void 0,(function*(){try{const t=yield this.http.patch(this.userBackendUri+e.id,e).toPromise();return null!=t?t:void 0}catch(t){Oc(t)}}))}findUserById(e){return wc(this,void 0,void 0,(function*(){try{const t=yield this.http.get(this.userBackendUri+e).toPromise();return null!=t?t:void 0}catch(t){Oc(t)}}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Rm=(()=>{class e{constructor(e,t,n,i,r,s,o){this.fakeBackend=e,this.principalService=t,this.settingsService=n,this.notificationService=i,this.accessService=r,this.beOrgaService=s,this.beUserService=o,this.useValueFromBackend=!0,this.callBackend=!1}_getPrincipal(){const e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}getAllOrgasAndUserForAccount(e){return wc(this,void 0,void 0,(function*(){const t=[],n=yield this.findAllOrgasOfAccount(e),i=yield this.findAllOrgaUsersOfAccount(e);return n.forEach(e=>{t.push({orga:e,orgaUser:i.find(t=>t.orgaId===e.id)})}),t}))}removeOrgaUser(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beUserService.deleteUser(e);if(this.useValueFromBackend)return t}return this.fakeBackend.removeOrgaUser(e)}))}deleteOrganization(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beOrgaService.deleteOrganization(e);if(this.useValueFromBackend)return null!=t&&t}return this.fakeBackend.deleteOrganization(e),!0}))}findOrgaById(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beOrgaService.findOrgaById(e);if(this.useValueFromBackend)return t}return this.fakeBackend.findOrgaById(e)}))}findAllOrgasOfAccount(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=yield this.beOrgaService.findAllOrgasOfCurrentAccount();if(this.useValueFromBackend)return e}return this.fakeBackend.findAllOrgasOfAccount(e)}))}findOrgaByMail(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beOrgaService.findOrgaByMail(e);if(this.useValueFromBackend)return null!=t?t:void 0}return this.fakeBackend.findOrgaByMail(e)}))}findAllOrgaUsersOfAccount(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=yield this.beOrgaService.findAllUsersOfCurrentAccount();if(this.useValueFromBackend)return e}return this.fakeBackend.findAllOrgaUsersOfAccount(e)}))}findOrgaUserByOrgaUserId(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beUserService.findUserById(e);if(this.useValueFromBackend)return null!=t?t:void 0}return this.fakeBackend.findOrgaUserById(e)}))}findCorrespondingForeignOrgaUser(e){return this.fakeBackend.findCorrespondingForeignOrgaUser(e)}inviteUser(e,t){var n;return wc(this,void 0,void 0,(function*(){const i=null===(n=this.principalService.getOrgaUser())||void 0===n?void 0:n.orgaId;if(!i)throw new Error("No OrgaUser-Principal...!");if(this.callBackend){const n=yield this.beOrgaService.inviteUser(i,e,t);if(this.useValueFromBackend)return null!=n?n:void 0}return this.fakeBackend.inviteUserToOrga(i,e,t)}))}accountIsAlreadyMemberInOrga(e,t){return void 0!==this.fakeBackend.findOrgaUserByAccountId(e,t)}accountHasAnyOrgaMembership(e){return t=e.toString(),!isNaN(+t)&&this.fakeBackend.accountHasAnyOrgaMembership(e);var t}foreignOrgaIsAlreadyMemberInOrga(e,t){return this.fakeBackend.foreignOrgaIsAlreadyMemberInOrga(e,t)}foreignUserIsAlreadyMemberInOrga(e,t){return void 0!==this.fakeBackend.findForeignUserByOrgaId(e,t)}wishOfMembership(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beOrgaService.wishOfMembership(e);if(this.useValueFromBackend)return t}const t=this.principalService.getAccount();if(this.settingsService.acceptHandshakeDecisionsAutomatically()){const n={id:"",accountId:t.id,name:t.name,orgaId:e,adminType:xu.Member};yield this.joinOrganization(e,n)}else{const n=yield this.findOrgaById(e);this.notificationService.addNotification({id:"",type:Tu.WishOfMembershipToOrga,orgaIdAsRecipient:e,account:t,organization:n})}return!0}))}joinOrganization(e,t){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=yield this.beUserService.createNewUser(t);if(this.useValueFromBackend)return e}return this.fakeBackend.joinOrganization(e,t)}))}createNewOrganization(e,t){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beOrgaService.createNewOrganization(e);if(this.useValueFromBackend)return t}return this.fakeBackend.createNewOrganization(e,t)}))}getAllOrgaUsers(e,t=!1,n=!1){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const i=yield this.beOrgaService.findAllUsersByOrgaId(e,t,n);if(this.useValueFromBackend)return i}return this.fakeBackend.getAllOrgaUsers(e,t,n)}))}getAllOrgaUsers4SubOrga(e,t,n=!1){return wc(this,void 0,void 0,(function*(){if(this.callBackend){if("0"===t)return this.beOrgaService.findAllUsersByOrgaId(e,n);const i=yield this.beOrgaService.getSubOrgaDetails(t);if(this.useValueFromBackend){if(!i)return[];const e=[];return i.allOrgaUsers.forEach(t=>{var r;(null===(r=i.users)||void 0===r?void 0:r.includes(t.id))&&(n&&(t.foreignUserId||t.foreignOrgaId)||e.push(t))}),e}}return this.fakeBackend.getAllOrgaUsers4SubOrga(e,t,n)}))}getAllSubOrgaUsers4SubOrga(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beOrgaService.getSubOrgaDetails(e);if(this.useValueFromBackend){if(!t)return[];const e=[];return t.allOrgaUsers.forEach(n=>{var i,r;(null===(i=t.users)||void 0===i?void 0:i.includes(n.id))&&e.push({id:n.id,orgaId:t.orgaId,orgaUserId:n.id,subOrgaId:t.id,subAdmin:!!(null===(r=t.admins)||void 0===r?void 0:r.includes(n.id))})}),e}}return this.fakeBackend.getAllSubOrgaUsers4SubOrga(e)}))}getAllSubOrgaResources4SubOrga(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beOrgaService.getSubOrgaDetails(e);if(this.useValueFromBackend){if(!t)return[];const e=[];return t.allOrgaResources.forEach(n=>{var i;(null===(i=t.resources)||void 0===i?void 0:i.includes(n.id))&&e.push(Object.assign(Object.assign({},n),{typeId:n.type,orgaResourceId:n.id,subOrgaId:t.id}))}),e}}return[]}))}getAllAllowedSubOrgas(e,t=!0){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=yield this.beOrgaService.getAllSubOrgas(t);if(this.useValueFromBackend)return e}return this.fakeBackend.getAllAllowedSubOrgas(e,this._getPrincipal().id,t)}))}removeSubOrganization(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=this.beOrgaService.removeSubOrga(e.id);if(this.useValueFromBackend)return t}return this.fakeBackend.removeSubOrganization(e)}))}createSubOrganization(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=this.beOrgaService.createNewSubOrga(e);if(this.useValueFromBackend)return t}return this.fakeBackend.createSubOrganization(e)}))}changeSubOrgaUsers(e){return this.fakeBackend.changeSubOrgaUsers(e)}changeSubOrgaUsersAndResources(e,t,n){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const i=this.beOrgaService.updateUsersAndResourcesOfSubOrganization(e,t,n);if(this.useValueFromBackend)return!!i}return!1}))}renameSubOrganization(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=this.beOrgaService.renameSubOrganization(e);if(this.useValueFromBackend)return yield t}return this.fakeBackend.renameSubOrganization(e)}))}updateOrgaUser(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beUserService.modifyUser(e);if(this.useValueFromBackend)return t}return this.fakeBackend.updateOrgaUser(e)}))}executePseudoMgv(e,t,n,i){return wc(this,void 0,void 0,(function*(){let r=this.fakeBackend.createIdmEntities4Mgv(e,t,n);(null==r?void 0:r.destSubOrga)&&r.userMap&&((yield this.accessService.executeAmPartOfMgv(e,t,n,r.destSubOrga.id,r.userMap,i))?this.fakeBackend.removeSourceUsers4Mgv(r.userMap.map(e=>e.sourceUserId)):alert("Problem..."))}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pm),Ke(Pu),Ke(ku),Ke(Um),Ke(um),Ke(Tm),Ke(Mm))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Em(e,t){1&e&&(Ms(0,"div"),Ms(1,"h5"),Xs(2,"\xdcbersicht \xfcber alle Produkte"),Rs(),Ms(3,"p"),Xs(4,"Zum Anzeigen der gekauften Lizenzen bitte in Organisation einloggen..."),Rs(),Rs())}function Fm(e,t){1&e&&(Ms(0,"p"),Xs(1,"F\xfcr \xc4nderungen ben\xf6tigt man Adminrechte in der Organisation."),Rs())}function Nm(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"h5"),Xs(2,"\xdcbersicht \xfcber alle Produkte und davon gekaufte Lizenzen f\xfcr deine Organisation"),Rs(),As(3,Fm,2,0,"p",1),Rs()),2&e){const e=Ls();xi(3),Ps("ngIf",!e.changesAllowed)}}function Dm(e,t){if(1&e&&(Ms(0,"option",13),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e),xi(1),eo(" ",e.name,"")}}function zm(e,t){if(1&e){const e=Fs();Ms(0,"div",5),Ms(1,"div",6),Ms(2,"div",7),Ms(3,"div",8),Xs(4," Benutzer w\xe4hlen: "),Rs(),Ms(5,"div",9),Ms(6,"select",10,11),zs("ngModelChange",(function(t){return Gt(e),Ls().selectedUser2Admin=t}))("ngModelChange",(function(){return Gt(e),Ls().onChangedUser()})),As(8,Dm,2,2,"option",12),Rs(),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=Ls();xi(6),Ps("ngModel",e.selectedUser2Admin),xi(2),Ps("ngForOf",e.users2Admin)}}function Vm(e,t){1&e&&(Ms(0,"span",15),Xs(1,"Lizenz notwendig "),Rs())}function Bm(e,t){1&e&&(Ms(0,"span",15),Xs(1,"keine Lizenz notwendig "),Rs())}function Lm(e,t){if(1&e&&(Ms(0,"span",19),Xs(1),Rs()),2&e){const e=Ls().$implicit;xi(1),eo("gesamt: ",e.totalLicences,"")}}function jm(e,t){if(1&e&&(Ms(0,"span",19),Xs(1),Rs()),2&e){const e=Ls().$implicit;xi(1),eo("davon frei: ",e.freeLicences,"")}}function Hm(e,t){if(1&e&&(Ms(0,"span"),Xs(1),Rs()),2&e){const e=Ls(3);xi(1),eo("Lizenz ",e.selectedUser2Admin.name," entziehen")}}function $m(e,t){if(1&e&&(Ms(0,"span"),Xs(1),Rs()),2&e){const e=Ls(3);xi(1),eo("Lizenz ",e.selectedUser2Admin.name," zuweisen")}}function Gm(e,t){if(1&e){const e=Fs();Ms(0,"div",20),Ms(1,"button",21),zs("click",(function(){Gt(e);const t=Ls().index;return Ls().removeOneLicence(t)})),Xs(2,"-"),Rs(),Ms(3,"button",22),zs("click",(function(){Gt(e);const t=Ls().index;return Ls().addOneLicence(t)})),Xs(4,"+"),Rs(),Ms(5,"label"),Ms(6,"input",23),zs("ngModelChange",(function(t){return Gt(e),Ls().$implicit.licencedToUser=t}))("ngModelChange",(function(){Gt(e);const t=Ls().index;return Ls().onUserLicenceChanged(t)})),Rs(),As(7,Hm,2,1,"span",1),As(8,$m,2,1,"span",1),Rs(),Rs()}if(2&e){const e=Ls().$implicit;xi(1),Ps("disabled",e.freeLicences<=0),xi(5),Ps("ngModel",e.licencedToUser)("disabled",e.freeLicences<=0&&!e.licencedToUser),xi(1),Ps("ngIf",e.licencedToUser),xi(1),Ps("ngIf",!e.licencedToUser)}}function Wm(e,t){if(1&e&&(Ms(0,"li"),Ms(1,"div"),Ms(2,"span",14),Xs(3),Rs(),Rs(),Ms(4,"div"),Ms(5,"span",15),Xs(6),Rs(),As(7,Vm,2,0,"span",16),Rs(),Ms(8,"div"),As(9,Bm,2,0,"span",16),As(10,Lm,2,1,"span",17),As(11,jm,2,1,"span",17),Rs(),As(12,Gm,9,5,"div",18),Rs()),2&e){const e=t.$implicit,n=t.index,i=Ls();xi(3),eo(" ",i.getProductIdAsString(n)," "),xi(3),eo(" ",i.getProductName(n)," "),xi(1),Ps("ngIf",e.licenceNeeded),xi(2),Ps("ngIf",!e.licenceNeeded),xi(1),Ps("ngIf",e.orgaId>0),xi(1),Ps("ngIf",e.orgaId>0),xi(1),Ps("ngIf",i.changesAllowed&&e.licenceNeeded)}}function qm(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"button",24),zs("click",(function(){return Gt(e),Ls().discardChanges()})),Xs(2,"\xc4nderungen verwerfen"),Rs(),Ms(3,"button",25),zs("click",(function(){return Gt(e),Ls().saveChanges()})),Xs(4,"\xc4nderungen \xfcbernehmen"),Rs(),Rs()}if(2&e){const e=Ls();xi(1),Ps("disabled",!e.dirty),xi(2),Ps("disabled",!e.dirty)}}let Km=(()=>{class e{constructor(e,t,n,i,r){this.changeDetector=e,this.principalService=t,this.settingsService=n,this.licenceService=i,this.orgaService=r,this.usersDisplayName="",this.loggedInInOrga=!1,this.orgaId="",this.changesAllowed=!1,this.dirty=!1,this.products=[],this.users2Admin=[]}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Produkte und Lizenzen"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.loggedInInOrga&&(this.orgaId=this.principalService.getOrgaUser().orgaId,this.users2Admin=yield this.orgaService.getAllOrgaUsers(this.orgaId,!0),this.selectedUser2Admin=this.users2Admin[0]),this.changesAllowed=this.principalService.isAdminOfCurrentOrga(this.orgaId),this._initMembers()}))}_initMembers(){this.dirty=!1,this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,this.products=this.licenceService.getAllProductAndLicenceInfos(this.orgaId,this.selectedUsersId)}onChangedUser(){if(this.dirty&&!confirm("Willst du den Benutzer wechseln und damit deine \xc4nderungen verwerfen?")){const e=this.users2Admin.find(e=>e.id===this.selectedUsersId);if(e)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=e)}this._initMembers()}getProductIdAsString(e){return this.products[e].id}getProductName(e){return this.products[e].name}addOneLicence(e){this.dirty=!0,this.products[e].totalLicences++,this.products[e].freeLicences++}removeOneLicence(e){this.dirty=!0,this.products[e].totalLicences--,this.products[e].freeLicences--}saveChanges(){this.dirty&&(this.licenceService.saveProductAndLicenceInfo(this.products),this._initMembers())}discardChanges(){this._initMembers()}onUserLicenceChanged(e){this.dirty=!0,this.products[e].licencedToUser?this.products[e].freeLicences--:this.products[e].freeLicences++}}return e.\u0275fac=function(t){return new(t||e)(xs(Kr),xs(Pu),xs(ku),xs(Zp),xs(Rm))},e.\u0275cmp=dt({type:e,selectors:[["app-products-main"]],decls:7,vars:5,consts:[[1,"container"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s6"],["name","user2admin",1,"browser-default",3,"ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"list-item-text-left"],[1,"list-item-text"],["class","list-item-text",4,"ngIf"],["class","list-item-text-small",4,"ngIf"],["class","buttons-right-div",4,"ngIf"],[1,"list-item-text-small"],[1,"buttons-right-div"],[3,"disabled","click"],[3,"click"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"]],template:function(e,t){1&e&&(Ms(0,"div",0),As(1,Em,5,0,"div",1),As(2,Nm,4,1,"div",1),As(3,zm,9,2,"div",2),Ms(4,"ul",3),As(5,Wm,13,7,"li",4),Rs(),As(6,qm,5,2,"div",1),Rs()),2&e&&(xi(1),Ps("ngIf",!t.loggedInInOrga),xi(1),Ps("ngIf",t.loggedInInOrga),xi(1),Ps("ngIf",t.changesAllowed),xi(2),Ps("ngForOf",t.products),xi(1),Ps("ngIf",t.changesAllowed))},directives:[al,sl,md,qu,Wd,vd,_d,Du],styles:[".container[_ngcontent-%COMP%]{display:flex 2 1;margin-top:0;float:left;width:70em}.verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:70em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:70em;position:relative;background-color:#eee;margin-bottom:.5em;padding:.3em 0;height:2em;border-radius:4px}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:2em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:13em;text-align:left}.list-item-text-small[_ngcontent-%COMP%]{float:left;width:6em;text-align:left}hr[_ngcontent-%COMP%]{float:left;width:50em;height:3px;background:teal;margin-top:.4em;margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.buttons-right-div[_ngcontent-%COMP%]{margin-right:.7em;margin-top:-.3em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff;height:2em}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:3em;color:#000}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4db6ac}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),e})();function Zm(e,t){if(1&e){const e=Fs();Ms(0,"li"),Ms(1,"span",6),zs("click",(function(){Gt(e);const n=t.$implicit;return Ls().enterEditMode(n.id)})),Xs(2),Rs(),Ms(3,"div",7),Ms(4,"button",8),zs("click",(function(){Gt(e);const n=t.$implicit;return Ls().removeSubOrganization(n.id)})),Xs(5,"Unterstruktur\xa0l\xf6schen"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit;xi(2),eo(" ",e.name," ")}}function Jm(e,t){1&e&&Es(0,"hr",9)}function Qm(e,t){if(1&e){const e=Fs();Ms(0,"div",10),Ms(1,"div",11),Ms(2,"input",12,13),zs("ngModelChange",(function(t){return Gt(e),Ls().editItemNewName=t}))("keydown.enter",(function(){return Gt(e),Ls().persistEditChanges()})),Rs(),Ms(4,"label",14),Xs(5,"Unterstrukturname \xe4ndern"),Rs(),Rs(),Ms(6,"div",15),Ms(7,"button",16),zs("click",(function(){return Gt(e),Ls().cancelEditMode()})),Xs(8," Abbrechen "),Rs(),Ms(9,"button",17),zs("click",(function(){return Gt(e),Ls().persistEditChanges()})),Xs(10," \xdcbernehmen "),Rs(),Rs(),Rs()}if(2&e){const e=ks(3),t=Ls();xi(2),Ps("ngModel",t.editItemNewName),xi(7),Ps("disabled",!e.valid)}}function Xm(e,t){if(1&e){const e=Fs();Ms(0,"form",18,19),zs("ngSubmit",(function(){return Gt(e),Ls().createNewSubOrganization()})),Ms(2,"div",10),Ms(3,"div",11),Ms(4,"input",20,21),zs("ngModelChange",(function(t){return Gt(e),Ls().newSubOrganization.name=t}))("keyup",(function(t){return Gt(e),Ls().somethingChanged(t)})),Rs(),Ms(6,"label",22),Xs(7,"Name der neuen Unterstruktur"),Rs(),Rs(),Ms(8,"div",15),Ms(9,"button",23),Xs(10,"Neue Unterstruktur anlegen"),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=ks(1),t=Ls();xi(4),Ps("ngModel",t.newSubOrganization.name),xi(5),Ps("disabled",!e.valid)}}let Ym=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.principalService=t,this.orgaService=n,this.usersDisplayName="",this.subOrgas=[],this.errorMessage="",this.editSubOrgaId="",this.editItemNewName="",this.errorMsgNameAlreadyInUse="Eine Unterstruktur mit diesen Namen gibt es bereits."}ngOnInit(){this.settingsService.setTitle("Unterstruktur-Verwaltung"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,this._initMembers()}_initMembers(){return wc(this,void 0,void 0,(function*(){this.editSubOrgaId="",this.editItemNewName="",this.errorMessage="",this.newSubOrganization={id:"",name:"",orgaId:this.principal.orgaId},this.subOrgas=yield this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1)}))}_checkNameAlreadyInUse(e){return!!this.subOrgas.find(t=>t.name.toLocaleLowerCase()===e.toLocaleLowerCase())}removeSubOrganization(e){return wc(this,void 0,void 0,(function*(){const t=this.subOrgas.find(t=>t.id===e);t&&confirm("Willst du die Unterstruktur <"+t.name+"> unwiderruflich l\xf6schen?")&&(yield this.orgaService.removeSubOrganization(t),this._initMembers())}))}createNewSubOrganization(){return wc(this,void 0,void 0,(function*(){this._checkNameAlreadyInUse(this.newSubOrganization.name)?this.errorMessage=this.errorMsgNameAlreadyInUse:(yield this.orgaService.createSubOrganization(this.newSubOrganization),this._initMembers())}))}somethingChanged(e){"Enter"!==e.code&&(this.errorMessage="")}enterEditMode(e){const t=this.subOrgas.find(t=>t.id===e);t&&(this.newSubOrganization={id:"",name:"",orgaId:this.principal.orgaId},this.editSubOrgaId=e,this.editItemNewName=t.name)}cancelEditMode(){this._initMembers()}persistEditChanges(){return wc(this,void 0,void 0,(function*(){const e=this.subOrgas.find(e=>e.id===this.editSubOrgaId);if(!e)return this.cancelEditMode();if(e.name!==this.editItemNewName){if(this._checkNameAlreadyInUse(this.editItemNewName))return void(this.errorMessage=this.errorMsgNameAlreadyInUse);if(!(yield this.orgaService.renameSubOrganization(Object.assign(Object.assign({},e),{name:this.editItemNewName}))))return void(this.errorMessage="\xc4nderung hat nicht geklappt...")}this.cancelEditMode()}))}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(Pu),xs(Rm))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-sub-orga-mgmt"]],decls:11,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","hr-1 mt-0 mb-1",4,"ngIf"],["class","row",4,"ngIf"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[1,"error",3,"hidden"],[1,"list-item-text-left",3,"click"],[1,"right"],[1,"btn-danger",3,"click"],[1,"hr-1","mt-0","mb-1"],[1,"row"],[1,"input-field","col","s8","m6","mb-0"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],["for","editName"],[1,"col","s8","m6"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newSubOrgaForm","ngForm"],["type","text","id","subOrgaName","name","subOrgaName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["subOrgaName","ngModel"],["for","subOrgaName"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Ms(0,"p"),Xs(1),Rs(),Ms(2,"ul",0),As(3,Zm,6,1,"li",1),Rs(),As(4,Jm,1,0,"hr",2),As(5,Qm,11,2,"div",3),As(6,Xm,11,2,"form",4),Es(7,"br"),Ms(8,"div",5),Ms(9,"p"),Xs(10),Rs(),Rs()),2&e&&(xi(1),eo(" Hallo ",t.usersDisplayName,", hier verwaltest du deine Unterstrukturen:"),xi(2),Ps("ngForOf",t.subOrgas),xi(1),Ps("ngIf",t.subOrgas.length>0),xi(1),Ps("ngIf",t.editSubOrgaId),xi(1),Ps("ngIf",!t.editSubOrgaId),xi(2),Ps("hidden",!t.errorMessage),xi(2),Ys(t.errorMessage))},directives:[sl,al,Bu,Zd,Qd,eh,qu,Wd,qd,Ku,zd],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;cursor:pointer}"]}),e})(),ev=(()=>{class e{constructor(e){this.settingsService=e}ngOnInit(){this.settingsService.setTitle("Hilfe / Anleitung");const e=document.querySelectorAll(".collapsible");M.Collapsible.init(e,{})}}return e.\u0275fac=function(t){return new(t||e)(xs(ku))},e.\u0275cmp=dt({type:e,selectors:[["app-help"]],decls:141,vars:0,consts:[[1,"collapsible","popout"],[1,"collapsible-header"],[1,"material-icons"],[1,"collapsible-body"],[1,"browser-default"],["href","https://drive.google.com/file/d/1KuLdvRku0cAIhHtSCc7eHb9x66mxTGoW/view?usp=sharing","target","_blank"],["href","https://drive.google.com/file/d/1ijSAEeJenHyFINcc92VGVjEnDYAvcRcy/view?usp=sharing","target","_blank"]],template:function(e,t){1&e&&(Ms(0,"h5"),Xs(1,"Hier gibt's Hilfe bzw. Anleitungen, nat\xfcrlich nur in aller K\xfcrze..."),Rs(),Es(2,"br"),Ms(3,"ul",0),Ms(4,"li"),Ms(5,"div",1),Ms(6,"i",2),Xs(7,"dehaze"),Rs(),Xs(8,"Wozu das Ganze? Was kann ich machen? "),Rs(),Ms(9,"div",3),Ms(10,"ul",4),Ms(11,"li"),Xs(12,"Kurz gesagt, man kann sich registrieren, einloggen, Organisationen beitreten/anlegen/verwalten."),Rs(),Ms(13,"li"),Xs(14,"Ferner kann man Ordner (dynamische Resourcen) anlegen und verrechten."),Rs(),Ms(15,"li"),Xs(16,"Und als Highlight kann man Kollaboration auf so einem Ordner einrichten."),Rs(),Ms(17,"li"),Ms(18,"a",5),Xs(19,"Infovideo \xfcber Identit\xe4ten und Organisationen"),Rs(),Rs(),Ms(20,"li"),Ms(21,"a",6),Xs(22,"Infovideo \xfcber Rechtemanagement und Kollaboration"),Rs(),Rs(),Rs(),Rs(),Rs(),Ms(23,"li"),Ms(24,"div",1),Ms(25,"i",2),Xs(26,"dehaze"),Rs(),Xs(27,"Was sehe ich wo?"),Rs(),Ms(28,"div",3),Ms(29,"ul",4),Ms(30,"li"),Xs(31,'Auf der Startseite sieht man ein "Men\xfc" der M\xf6glicheiten.'),Rs(),Ms(32,"li"),Xs(33,"Unten rechts gibt es Einstellungen, womit man das Verhalten des Prototyps beeinflussen kann."),Rs(),Ms(34,"li"),Xs(35,"Ist man angemeldet, wird in der Titelzeile die Organisation (so vorhanden) und der Username angezeigt."),Rs(),Ms(36,"li"),Xs(37,'Au\xdferdem gibt es ein "Kontext-Men\xfc" mit mehr-oder-weniger sinnigen Aktionen.'),Rs(),Rs(),Rs(),Rs(),Ms(38,"li"),Ms(39,"div",1),Ms(40,"i",2),Xs(41,"dehaze"),Rs(),Xs(42,"Das Datenmodell"),Rs(),Ms(43,"div",3),Ms(44,"ul",4),Ms(45,"li"),Xs(46,"Ein Account hat 1-n Credentials (Zugangsmedien)"),Rs(),Ms(47,"li"),Xs(48,"Ein Account kann in 0-n Organisationen eine Organisations-Identit\xe4t haben."),Rs(),Ms(49,"li"),Xs(50,"Ist man in mehreren Organisationen Mitglied, muss man beim Login eine Organisation ausw\xe4hlen."),Rs(),Ms(51,"li"),Xs(52,"Eine Organisation beherbergt User, Resourcen und deren Rechte."),Rs(),Ms(53,"li"),Xs(54,'Ein Recht besteht aus (Subjekt = User, Objekt = Resource, Erlaubnis = "lesen")'),Rs(),Ms(55,"li"),Xs(56,'Pro Berechtigung entsteht ein Eintrag in der "Rechte-Liste"'),Rs(),Rs(),Rs(),Rs(),Ms(57,"li"),Ms(58,"div",1),Ms(59,"i",2),Xs(60,"dehaze"),Rs(),Xs(61,"Sicherheit? Passw\xf6rter?"),Rs(),Ms(62,"div",3),Ms(63,"ul",4),Ms(64,"li"),Xs(65,"Die Seite hat echte Logik, speichert aber nichts dauerhaft."),Rs(),Ms(66,"li"),Xs(67,"Alles spielt sich im Browser ab."),Rs(),Ms(68,"li"),Xs(69,"Durch Neu-Laden der Seite (F5) ist man wieder am Anfang!"),Rs(),Ms(70,"li"),Xs(71,'Eingegebene Passw\xf6rter werden im Klartext "gespeichert".'),Rs(),Ms(72,"li"),Xs(73,'Die Testpassw\xf6rter lauten s\xe4mtlich "test".'),Rs(),Rs(),Rs(),Rs(),Ms(74,"li"),Ms(75,"div",1),Ms(76,"i",2),Xs(77,"dehaze"),Rs(),Xs(78,"Tipps und Tricks"),Rs(),Ms(79,"div",3),Ms(80,"ul",4),Ms(81,"li"),Xs(82,'Man muss beim Login kein Passwort eingeben (geht schneller), gibt man aber eines ein, muss es mit dem "registrierten" \xfcbereinstimmen.'),Rs(),Ms(83,"li"),Xs(84,"Es sind einige vor-eingetragende Testdaten vorhanden. Bei den Test-Kennungen (Username) gibt die Endung Aufschluss \xfcber den Authentifizierungs-Grad. z.B. tom@bk entspricht einem BenutzerKonto, tom@sc einer SmartCard. "),Rs(),Ms(85,"li"),Xs(86,' Kommt einfach "so" die Login-Seite erneut, ist die Ziel-Seite gesch\xfctzt. Entweder generell, dass man eingeloggt sein muss, oder es muss ein "besonderer" Login sein. (Admin, Secure). Meist hilft das Anmelden mit *@sc. '),Rs(),Rs(),Rs(),Rs(),Ms(87,"li"),Ms(88,"div",1),Ms(89,"i",2),Xs(90,"dehaze"),Rs(),Xs(91,"Testdaten"),Rs(),Ms(92,"div",3),Ms(93,"ul",4),Ms(94,"li"),Xs(95,"Kanzlei Heinzelmann mit Simone und Klaus (Admin) (@sc etc.)"),Rs(),Ms(96,"li"),Xs(97,"Kanzlei Palmengarten mit Sonja und Martin (Admin)"),Rs(),Ms(98,"li"),Xs(99,'Familie Martin privat mit Martin (Admin). D.h. bei Login mit "Martin" kommt eine Organisationsauswahl'),Rs(),Ms(100,"li"),Xs(101,"Holzhandel Grubinger mit Petra und Tom (Admin)"),Rs(),Ms(102,"li"),Xs(103,"Resi ohne Organisation, d.h. nur Account"),Rs(),Ms(104,"li"),Xs(105,"Kanzlei Heinzelmann und Holzhandel Grubinger kollaborieren bereits auf einem Ordner"),Rs(),Rs(),Rs(),Rs(),Ms(106,"li"),Ms(107,"div",1),Ms(108,"i",2),Xs(109,"dehaze"),Rs(),Xs(110,"Kollaboration, was ist damit gemeint?"),Rs(),Ms(111,"div",3),Ms(112,"ul",4),Ms(113,"li"),Xs(114,"Kollaboration meint hier, dass Mitarbeiter verschiedener Organisationen auf ein-und-derselben Resource (Ordner) arbeiten."),Rs(),Ms(115,"li"),Xs(116,"Das Ganze geht via Delegation, d.h. ein Admin einer Organisation berechtigt eine zweite Organisation. Ein Admin dieser zweiten Organisation vergibt dann letztendlich die Rechte an seine Mitarbeiter, aber nur die, welche er delegiert bekommen hat."),Rs(),Ms(117,"li"),Xs(118,"Am besten ausprobieren: "),Ms(119,"ul",4),Ms(120,"li"),Xs(121,"Zwei Organisationen mit jeweils zwei Mitarbieter anlegen"),Rs(),Ms(122,"li"),Xs(123,"In der einen einen Ordner anlegen"),Rs(),Ms(124,"li"),Xs(125,'Dann der zweiten Organisation "freigeben"'),Rs(),Ms(126,"li"),Xs(127,'Und dort an einen der beiden Mitarbieter "freigeben"'),Rs(),Rs(),Rs(),Ms(128,"li"),Xs(129,"und folgende Szenarien nachvollziehen, was mit den Zugriffs-Rechten passiert: "),Ms(130,"ul",4),Ms(131,"li"),Xs(132,"Die Rechte werden vom Original-Admin eingeschr\xe4nkt"),Rs(),Ms(133,"li"),Xs(134,'Der "geteilte" Ordner wird gel\xf6scht'),Rs(),Ms(135,"li"),Xs(136,"Der Kollaborations-Users wird aus einladender Organisation entfernt"),Rs(),Ms(137,"li"),Xs(138,"die ganze einladende Organisation wird gel\xf6scht"),Rs(),Ms(139,"li"),Xs(140,"..."),Rs(),Rs(),Rs(),Rs(),Rs(),Rs(),Rs())},styles:["br[_ngcontent-%COMP%]{margin-bottom:.4em}"]}),e})(),tv=(()=>{class e{constructor(e,t){this.http=e,this.authService=t,this.backendURI=bc+"credentials/"}getAllCredentials4User(){var e;return wc(this,void 0,void 0,(function*(){try{const t=null===(e=this.authService.getPrincipal().account)||void 0===e?void 0:e.id;if(t)return yield this.http.get(this.backendURI+"accounts/"+t).toPromise()}catch(t){Oc(t)}return[]}))}removeCredential(e){return wc(this,void 0,void 0,(function*(){try{return!!(yield this.http.delete(this.backendURI+e).toPromise())}catch(t){Oc(t)}return!1}))}addNewCredential(e){return wc(this,void 0,void 0,(function*(){try{const t={type:e.type,kennung:e.kennung,secret:e.secret};return yield this.http.post(this.backendURI,t).toPromise()}catch(t){Oc(t)}}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul),Ke(Gl))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),nv=(()=>{class e{constructor(e,t){this.fakeBackend=e,this.credentialService=t,this.useValueFromBackend=!0,this.callBackend=!1}getAllCredentialsForUser(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=yield this.credentialService.getAllCredentials4User();if(this.useValueFromBackend)return e}return this.fakeBackend.getAllCredentials(e)}))}removeCredential(e){return wc(this,void 0,void 0,(function*(){this.callBackend?yield this.credentialService.removeCredential(e):this.fakeBackend.removeCredential(e)}))}addNewCredential(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.credentialService.addNewCredential(e);if(this.useValueFromBackend)return t}return this.fakeBackend.addNewCredential(e)}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pm),Ke(tv))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function iv(e,t){if(1&e&&(Ms(0,"li"),Ms(1,"span",4),Xs(2),Rs(),Ms(3,"span",5),Xs(4),Rs(),Rs()),2&e){const e=t.index,n=Ls();xi(2),eo(" ",n.getCredentialTypeAsString(e)," "),xi(2),eo(" ",n.getCredentialDescription(e)," ")}}function rv(e,t){1&e&&(Ms(0,"div"),Ms(1,"p"),Xs(2,"Du bist noch gar nicht identifiziert."),Rs(),Rs())}function sv(e,t){if(1&e){const e=Fs();Ms(0,"button",7),zs("click",(function(){Gt(e);const t=Ls().index;return Ls(2).showIdentificationView(t)})),Xs(1,"anzeigen"),Rs()}}function ov(e,t){if(1&e){const e=Fs();Ms(0,"button",7),zs("click",(function(){return Gt(e),Ls(3).hideIdentificationView()})),Xs(1,"ausblenden"),Rs()}}function av(e,t){if(1&e&&(Ms(0,"li"),Ms(1,"span",4),Xs(2),Rs(),Ms(3,"span",5),Xs(4),Rs(),As(5,sv,2,0,"button",6),As(6,ov,2,0,"button",6),Rs()),2&e){const e=t.index,n=Ls(2);xi(2),eo(" ",n.getIdentificationProviderAsString(e)," "),xi(2),eo(" ",n.getIdentificationDescription(e)," "),xi(1),Ps("ngIf",n.idxDetailIdentification!==e),xi(1),Ps("ngIf",n.idxDetailIdentification===e)}}function cv(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"p"),Xs(2,"Du bist folgenderma\xdfen identifiziert worden:"),Rs(),Ms(3,"ul",0),As(4,av,7,4,"li",1),Rs(),Rs()),2&e){const e=Ls();xi(4),Ps("ngForOf",e.idents)}}function lv(e,t){1&e&&Es(0,"img",14)}function uv(e,t){if(1&e&&Es(0,"img",15),2&e){const e=Ls(2);js("src",null==e.identificationDetailView.account?null:e.identificationDetailView.account.photo,li)}}function dv(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"div",8),Ms(2,"div",9),Ms(3,"span",10),Xs(4),Rs(),As(5,lv,1,0,"img",11),As(6,uv,1,1,"img",12),Ms(7,"p"),Xs(8,"Name: "),Ms(9,"span",13),Xs(10),Rs(),Rs(),Ms(11,"p"),Xs(12,"Geburtsdatum: "),Ms(13,"span",13),Xs(14),Rs(),Rs(),Ms(15,"p"),Xs(16,"Adresse: "),Ms(17,"span",13),Xs(18),Rs(),Rs(),Rs(),Rs(),Rs()),2&e){const e=Ls();xi(4),Ys(e.getDetailCardTitle()),xi(1),Ps("ngIf",!(null!=e.identificationDetailView.account&&e.identificationDetailView.account.photo)),xi(1),Ps("ngIf",null==e.identificationDetailView.account?null:e.identificationDetailView.account.photo),xi(4),to("",null==e.identificationDetailView.account?null:e.identificationDetailView.account.firstname," ",null==e.identificationDetailView.account?null:e.identificationDetailView.account.lastname,""),xi(4),Ys(e.getDateString(null==e.identificationDetailView.account?null:e.identificationDetailView.account.dateOfBirth)),xi(4),no("",null==e.identificationDetailView.account||null==e.identificationDetailView.account.address?null:e.identificationDetailView.account.address.street,", ",null==e.identificationDetailView.account||null==e.identificationDetailView.account.address?null:e.identificationDetailView.account.address.zipCode," ",null==e.identificationDetailView.account||null==e.identificationDetailView.account.address?null:e.identificationDetailView.account.address.city,"")}}function hv(e,t){if(1&e&&(Ms(0,"li"),Ms(1,"span",4),Xs(2),Rs(),Ms(3,"span",5),Xs(4),Rs(),Rs()),2&e){const e=t.$implicit;xi(2),eo(" ",e.orga.name," "),xi(2),eo(" ",e.orgaUser.name," ")}}function gv(e,t){if(1&e&&(Ms(0,"div"),Es(1,"hr",16),Ms(2,"p"),Xs(3,"In folgenden Organisationen bist du Mitglied, hast also eine Organisations-Identit\xe4t:"),Rs(),Ms(4,"ul",0),As(5,hv,5,2,"li",1),Rs(),Rs()),2&e){const e=Ls();xi(5),Ps("ngForOf",e.orgaAndUserList)}}let fv=(()=>{class e{constructor(e,t,n,i,r){this.settingsService=e,this.credentialService=t,this.orgaService=n,this.principalService=i,this.identService=r,this.usersDisplayName="",this.loggedInAs="",this.authLevel="",this.credentials=[],this.idents=[],this.showDetailView=!1,this.idxDetailIdentification=-1,this.orgaAndUserList=[]}ngOnInit(){this.settingsService.setTitle("User-Infos"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this._initMembers()}_initMembers(){return wc(this,void 0,void 0,(function*(){this.credentials=yield this.credentialService.getAllCredentialsForUser(this.principal.id),this.idents=yield this.identService.getAllIdentificationsForUser(this.principal.id),this._setLoggedInInfo(),this._setOrgasMemberships()}))}_setLoggedInInfo(){const e=this.principalService.getOrgaUser();if(e&&e.id)this.loggedInAs="Organisations-Identit\xe4t <"+e.name+"> in der Organisation: <"+this.principalService.getOrgaName()+">";else{const e=this.principalService.getAccount();this.loggedInAs="Account-Identit\xe4t <"+e.name+">"}this.authLevel=this.principalService.getAuthLevelAsString()}_setOrgasMemberships(){return wc(this,void 0,void 0,(function*(){this.orgaAndUserList=yield this.orgaService.getAllOrgasAndUserForAccount(this.principal.id)}))}getCredentialTypeAsString(e){return wm[this.credentials[e].type]}getCredentialDescription(e){const t=this.credentials[e];let n="Kennung: <"+t.kennung+">";return!_m(t.type)&&t.orgaId&&(n+=" ("+t.orgaId+")"),t.type===wm.SocialLogin&&(n=t.provider+"-ID: "+t.userIdFromProvider),n+=", Auth-Level: <"+Uu[Om(t)]+">",n}getIdentificationProviderAsString(e){return Iu[this.idents[e].provider]}getIdentificationDescription(e){var t,n,i;const r=this.idents[e];return`Vom: ${r.doneAt.toLocaleDateString()} - \n                ${null===(t=r.account)||void 0===t?void 0:t.firstname} \n                ${null===(n=r.account)||void 0===n?void 0:n.lastname} \n                ${null===(i=r.account)||void 0===i?void 0:i.dateOfBirth.toLocaleDateString()}`}hideIdentificationView(){this.showDetailView=!1,this.idxDetailIdentification=-1,this.identificationDetailView=void 0}showIdentificationView(e){this.idxDetailIdentification=e,this.identificationDetailView=this.idents[e],this.identificationDetailView?this.showDetailView=!0:this.idxDetailIdentification=-1}getDetailCardTitle(){const e=this.identificationDetailView;return e?`Identifiziert am ${e.doneAt.toLocaleDateString()} \n                    durch Anbieter ${Iu[e.provider]}`:""}getDateString(e){var t;return null!==(t=null==e?void 0:e.toLocaleDateString())&&void 0!==t?t:""}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(nv),xs(Rm),xs(Pu),xs(Ru))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-user-info"]],decls:15,vars:8,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[4,"ngIf"],[1,"list-item-text-left"],[1,"list-item-text"],["class","btn-primary",3,"click",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"card","grey","lighten-4"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],["class","left-float","width","100px","height","100px","alt","Kein Bild vorhanden",4,"ngIf"],["class","left-float","width","100px","height","100px","alt","Passbild",3,"src",4,"ngIf"],[1,"bold"],["width","100px","height","100px","alt","Kein Bild vorhanden",1,"left-float"],["width","100px","height","100px","alt","Passbild",1,"left-float",3,"src"],[1,"hr-2"]],template:function(e,t){1&e&&(Ms(0,"h6"),Xs(1),Rs(),Ms(2,"p"),Xs(3),Rs(),Ms(4,"p"),Xs(5),Rs(),Ms(6,"p"),Xs(7,"Du hast folgende Zugangsmedien:"),Rs(),Ms(8,"ul",0),As(9,iv,5,2,"li",1),Es(10,"hr",2),Rs(),As(11,rv,3,0,"div",3),As(12,cv,5,1,"div",3),As(13,dv,19,9,"div",3),As(14,gv,6,1,"div",3)),2&e&&(xi(1),eo(" Hallo ",t.usersDisplayName,""),xi(2),eo("Du bist angemeldet als ",t.loggedInAs,"."),xi(2),eo("Dein aktuelles Authentifizierungsniveau ist: <",t.authLevel,">."),xi(4),Ps("ngForOf",t.credentials),xi(2),Ps("ngIf",0===t.idents.length),xi(1),Ps("ngIf",t.idents.length>0),xi(1),Ps("ngIf",t.showDetailView),xi(1),Ps("ngIf",t.orgaAndUserList.length>0))},directives:[sl,al],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:15rem}.card[_ngcontent-%COMP%]{width:40rem;height:12rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding-top:1rem!important}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3rem!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.left-float[_ngcontent-%COMP%]{float:left;margin-right:2rem}"]}),e})(),pv=(()=>{class e{constructor(e,t,n){this.principalService=e,this.accessService=t,this.eventService=n,this.allFolders=[],this.dummyResourceId="-1",this._fillTestdata(),this.eventService.resourceEvent.subscribe(e=>this._onResoureceEvent(e))}assureExists(){return!0}_onResoureceEvent(e){if(e.type===cm.ResourceMoved){const t=this._findFolderByResourceId(e.resourceOld.id);t&&(t.orgaId=e.resourceNew.orgaId,t.resourceId=e.resourceNew.id)}}_fillTestdata(){this.allFolders.push({id:"1",resourceId:"1",orgaId:"300",name:"Notizen"},{id:"2",resourceId:"2",orgaId:"300",name:"Steuersachen"},{id:"3",resourceId:"3",orgaId:"300",name:"Golfausfl\xfcge"},{id:"4",resourceId:"4",orgaId:"300",name:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{id:"10",resourceId:"10",orgaId:"301",name:"Rechtliches"},{id:"11",resourceId:"11",orgaId:"301",name:"Kassenarchiv"},{id:"20",resourceId:"20",orgaId:"302",name:"Finanzen"},{id:"21",resourceId:"21",orgaId:"302",name:"Rechnungen"})}_getPrincipal(){const e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}_assureCurrentPrincipalHasAdminPermission(){if(!this.principalService.isAdminOfCurrentOrga())throw new Error("Principal is not admin of current orga!")}_findFolderById(e){return this.allFolders.find(t=>t.id===e)}_findFolderByResourceId(e){return this.allFolders.find(t=>t.resourceId===e)}static _toResource(e){return{id:e.resourceId,type:Wp.Folder,orgaId:e.orgaId,displayName:e.name}}renameFolder(t){const n=e._toResource(t);if(!this.accessService.hasPermission(n,rm.FolderWritePermissionKey))return!1;const i=this._findFolderById(t.id);if(!i)throw new Error("RenameFolder: Ordner existiert gar nicht.");return i.name===t.name||!this._isFolderNameAlreadyUsedInOrga(t)&&(i.name=t.name,this.accessService.renameResource(n),!0)}_sort(e){const t=this._getPrincipal().orgaId;return e.sort((e,n)=>{if(e.orgaId===t&&n.orgaId===t)return+e.id-+n.id;if(e.orgaId===t)return-1;if(n.orgaId===t)return 1;const i=+e.orgaId-+n.orgaId;return 0===i?+e.id-+n.id:i})}getAllFoldersOfOrgaWithRightsOfGivenUser4Administration(e){return wc(this,void 0,void 0,(function*(){this._assureCurrentPrincipalHasAdminPermission();const t=this._getPrincipal().orgaId,n=yield this.accessService.getAllResourceIdsOwnedByOrDelegatedToOrgaByType(Wp.Folder,t),i=[];return n.forEach(t=>{const n=this._findFolderByResourceId(t);if(n){const t=Object.assign({},n);this._setMaxEnabledPermissions(n,e,t),this._setAdministratedPermissions(n,e,t),i.push(t)}}),Ic(this._sort(i))}))}_setAdministratedPermissions(t,n,i){const r=e._toResource(t);i.readAllowed=this.accessService.hasAdministratedPermission(r,n,rm.FolderReadPermissionKey),i.writeAllowed=this.accessService.hasAdministratedPermission(r,n,rm.FolderWritePermissionKey),i.deleteAllowed=this.accessService.hasAdministratedPermission(r,n,rm.FolderDeletePermissionKey)}_setMaxEnabledPermissions(t,n,i){const r=e._toResource(t);i.readDisabled=!this.accessService.permissionIsEnabled4Administration(r,n,rm.FolderReadPermissionKey),i.writeDisabled=!this.accessService.permissionIsEnabled4Administration(r,n,rm.FolderWritePermissionKey),i.deleteDisabled=!this.accessService.permissionIsEnabled4Administration(r,n,rm.FolderDeletePermissionKey)}getAllAccessibleFolders4CurrentUser(){const e=this.accessService.getAllResources4PrincipalWithAtLeastOnePermissionByType(Wp.Folder),t=[];return e.forEach(e=>{const n=this._findFolderByResourceId(e.id);if(n){let i=Object.assign({},n);i.readAllowed=this.accessService.hasPermission(e,rm.FolderReadPermissionKey),i.writeAllowed=this.accessService.hasPermission(e,rm.FolderWritePermissionKey),i.deleteAllowed=this.accessService.hasPermission(e,rm.FolderDeletePermissionKey),t.push(i)}}),Ic(this._sort(t))}setFolderRightsOfGivenUser(t,n){this._assureCurrentPrincipalHasAdminPermission(),n.forEach(n=>{if(n.dirty){const i=[];n.readAllowed&&i.push(rm.FolderReadPermissionKey),n.writeAllowed&&i.push(rm.FolderWritePermissionKey),n.deleteAllowed&&i.push(rm.FolderDeletePermissionKey),this.accessService.setPermissionsOfUser2resource(t,e._toResource(n),i)}})}removeFolder(t){const n=this._findFolderById(t);if(!n)return!1;const i=e._toResource(n);if(!this.accessService.hasPermission(i,rm.FolderDeletePermissionKey))return!1;this.accessService.removeResource(i,rm.FolderDeletePermissionKey);const r=this.allFolders.findIndex(e=>e.id===t);return r>=0&&(this.allFolders.splice(r,1),!0)}_isFolderNameAlreadyUsedInOrga(e){return!!this.allFolders.find(t=>t.orgaId===e.orgaId&&t.name===e.name)}userMayCreateNewFolder(e){return this.accessService.hasPermission4staticResource({type:Wp.FolderRoot,id:this.dummyResourceId,orgaId:e},rm.FolderCreatePermissionKey)}setUserMayCreateNewFolder(e,t){this._assureCurrentPrincipalHasAdminPermission();const n={type:Wp.FolderRoot,id:this.dummyResourceId,orgaId:e.orgaId};t?this.accessService.setPermissionsOfUser2staticResource(e,n,[rm.FolderCreatePermissionKey]).then():this.accessService.setPermissionsOfUser2staticResource(e,n,[]).then()}addNewFolder(e){return wc(this,void 0,void 0,(function*(){if(this._isFolderNameAlreadyUsedInOrga(e))return!1;const t=this._getPrincipal();if(!this.userMayCreateNewFolder(t.orgaId))return!1;const n=yield this.accessService.createNewResource({id:"",type:Wp.Folder,orgaId:t.orgaId,displayName:e.name});return!!n&&(e.resourceId=n.id,e.id=Sc(this.allFolders),this.allFolders.push(e),!0)}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pu),Ke(um),Ke(Su))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function mv(e,t){if(1&e&&(Ms(0,"option",14),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e),xi(1),eo(" ",e.name,"")}}const vv=function(e){return{"foreign-folder":e}};function yv(e,t){if(1&e){const e=Fs();Ms(0,"li",15),Ms(1,"span",16),Ms(2,"i",17),Xs(3,"folder"),Rs(),Xs(4),Rs(),Ms(5,"span",18),Xs(6),Rs(),Ms(7,"label",3),Ms(8,"input",9),zs("ngModelChange",(function(n){return Gt(e),t.$implicit.readAllowed=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Ls().onChanged(n)})),Rs(),Ms(9,"span"),Xs(10,"lesen"),Rs(),Rs(),Ms(11,"label",3),Ms(12,"input",9),zs("ngModelChange",(function(n){return Gt(e),t.$implicit.writeAllowed=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Ls().onChanged(n)})),Rs(),Ms(13,"span"),Xs(14,"schreiben"),Rs(),Rs(),Ms(15,"label"),Ms(16,"input",9),zs("ngModelChange",(function(n){return Gt(e),t.$implicit.deleteAllowed=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Ls().onChanged(n)})),Rs(),Ms(17,"span"),Xs(18,"l\xf6schen"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit,n=Ls();Ps("ngClass",va(9,vv,n.isForeignFolder(e))),xi(4),eo(" ",e.id," "),xi(2),eo(" ",e.name," "),xi(2),Ps("ngModel",e.readAllowed)("disabled",e.readDisabled),xi(4),Ps("ngModel",e.writeAllowed)("disabled",e.writeDisabled),xi(4),Ps("ngModel",e.deleteAllowed)("disabled",e.deleteDisabled)}}const bv=function(e){return{"foreign-user":e}};let wv=(()=>{class e{constructor(e,t,n,i,r){this.changeDetector=e,this.settingsService=t,this.folderService=n,this.principalService=i,this.orgaService=r,this.usersDisplayName="",this.users2Admin=[],this.folders=[],this.createNewFolderAllowed=!1,this.createNewFolderOldValue=!1,this.dirty=!1}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("dezentrale Ordner-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.users2Admin=yield this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.selectedUser2Admin=this.users2Admin[0],this._initMembers()}))}_initMembers(){return wc(this,void 0,void 0,(function*(){this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,this.folders=yield this.folderService.getAllFoldersOfOrgaWithRightsOfGivenUser4Administration(this.selectedUser2Admin),this.createNewFolderAllowed=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this.createNewFolderOldValue=this.createNewFolderAllowed,this.dirty=!1}))}isForeignUser(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}isForeignFolder(e){return!!e&&e.orgaId!==this.principal.orgaId}resetFolderRights(){this._initMembers()}_afterSavingPermissions(){this.dirty=!1,this.createNewFolderOldValue=this.createNewFolderAllowed,this.folders.forEach(e=>e.dirty=!1)}saveFolderRights(){this.createNewFolderAllowed!==this.createNewFolderOldValue&&this.folderService.setUserMayCreateNewFolder(this.selectedUser2Admin,this.createNewFolderAllowed);const e=this.folders.filter(e=>e.dirty);this.folderService.setFolderRightsOfGivenUser(this.selectedUser2Admin,e),this._afterSavingPermissions()}onChangedUser(){if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){const e=this.users2Admin.find(e=>e.id===this.selectedUsersId);if(e)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=e)}this._initMembers()}onChanged(e=-1){if(this.dirty=!0,e>=0){const t=this.folders[e];t&&(t.dirty=!0)}}}return e.\u0275fac=function(t){return new(t||e)(xs(Kr),xs(ku),xs(pv),xs(Pu),xs(Rm))},e.\u0275cmp=dt({type:e,selectors:[["app-admin-folders"]],decls:21,vars:11,consts:[[1,"container-form"],[1,"row"],[1,"col","s12"],[1,"mr-1"],[1,"input-field","inline"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text"]],template:function(e,t){1&e&&(Ms(0,"h6"),Xs(1),Rs(),Ms(2,"div",0),Ms(3,"div",1),Ms(4,"div",2),Ms(5,"span",3),Xs(6,"Benutzer\xa0w\xe4hlen:"),Rs(),Ms(7,"div",4),Ms(8,"select",5,6),zs("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),As(10,mv,2,2,"option",7),Rs(),Rs(),Rs(),Rs(),Ms(11,"label",8),Ms(12,"input",9),zs("ngModelChange",(function(e){return t.createNewFolderAllowed=e}))("ngModelChange",(function(){return t.onChanged()})),Rs(),Ms(13,"span"),Xs(14,"Darf neue Ordner anlegen"),Rs(),Rs(),Ms(15,"ul",10),As(16,yv,19,11,"li",11),Rs(),Ms(17,"button",12),zs("click",(function(){return t.resetFolderRights()})),Xs(18,"Zur\xfccksetzen"),Rs(),Ms(19,"button",13),zs("click",(function(){return t.saveFolderRights()})),Xs(20,"\xdcbernehmen"),Rs(),Rs()),2&e&&(xi(1),eo(" Hallo ",t.usersDisplayName,", hier kannst du f\xfcr bestimmte Ordner Rechte vergeben."),xi(7),Ps("ngClass",va(9,bv,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),xi(2),Ps("ngForOf",t.users2Admin),xi(2),Ps("ngModel",t.createNewFolderAllowed)("disabled",t.isForeignUser(t.selectedUser2Admin)),xi(4),Ps("ngForOf",t.folders),xi(1),Ps("disabled",!t.dirty),xi(2),Ps("disabled",!t.dirty))},directives:[md,il,qu,Wd,sl,Du,vd,_d],styles:[".foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}.liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.liste[_ngcontent-%COMP%]{max-width:70rem}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{width:25em}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0!important}.input-field.inline[_ngcontent-%COMP%]{margin-left:0!important}"]}),e})();function _v(e,t){if(1&e){const e=Fs();Ms(0,"button",10),zs("click",(function(){Gt(e);const t=Ls().$implicit;return Ls().removeFolder(t.id)})),Xs(1," L\xf6schen"),Rs()}}const Ov=function(e){return{"foreign-folder":e}};function Iv(e,t){if(1&e){const e=Fs();Ms(0,"li",5),Ms(1,"span",6),Ms(2,"i",7),Xs(3,"folder"),Rs(),Xs(4),Rs(),Ms(5,"span",8),zs("click",(function(){Gt(e);const n=t.index;return Ls().enterEditMode(n)})),Xs(6),Rs(),As(7,_v,2,0,"button",9),Rs()}if(2&e){const e=t.$implicit,n=Ls();Ps("ngClass",va(5,Ov,n.isForeignFolder(e))),xi(4),eo(" ",e.id," "),xi(2),to(" ",e.name," ",n.getPermissionsHint(e)," "),xi(1),Ps("ngIf",e.deleteAllowed)}}function Sv(e,t){if(1&e){const e=Fs();Ms(0,"div",11),Ms(1,"div",12),Ms(2,"div",13),Ms(3,"input",14,15),zs("ngModelChange",(function(t){return Gt(e),Ls().editFolderNewName=t}))("keydown.enter",(function(){return Gt(e),Ls().persistEditFolderChanges()})),Rs(),Ms(5,"label",16),Xs(6,"Ordnername \xe4ndern"),Rs(),Rs(),Ms(7,"button",17),zs("click",(function(){return Gt(e),Ls().cancelEditMode()})),Xs(8," Abbrechen "),Rs(),Ms(9,"button",18),zs("click",(function(){return Gt(e),Ls().persistEditFolderChanges()})),Xs(10," \xdcbernehmen "),Rs(),Rs(),Rs()}if(2&e){const e=ks(4),t=Ls();xi(3),Ps("ngModel",t.editFolderNewName),xi(6),Ps("disabled",!e.valid)}}function Cv(e,t){if(1&e){const e=Fs();Ms(0,"div",11),Ms(1,"form",19,20),zs("ngSubmit",(function(){return Gt(e),Ls().addNewFolder()})),Ms(3,"div",12),Ms(4,"div",21),Ms(5,"input",22,23),zs("ngModelChange",(function(t){return Gt(e),Ls().newFolder.name=t}))("keyup",(function(t){return Gt(e),Ls().somethingChanged(t)})),Rs(),Ms(7,"label",24),Xs(8,"Ordnername"),Rs(),Rs(),Ms(9,"div",25),Ms(10,"button",26),Xs(11,"Ordner\xa0anlegen"),Rs(),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=ks(2),t=Ls();xi(5),Ps("ngModel",t.newFolder.name),xi(5),Ps("disabled",!e.valid)}}let Av=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.folderService=t,this.principalService=n,this.usersDisplayName="",this.folders=[],this.userMayCreateNewFolder=!1,this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName=""}ngOnInit(){this.settingsService.setTitle("Ordneransicht"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.userMayCreateNewFolder=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this._initMembers()}_initMembers(e=!0){this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName="",this.newFolder={id:"",resourceId:"",orgaId:this.principal.orgaId,name:""},e&&(this.folders=this.folderService.getAllAccessibleFolders4CurrentUser())}isForeignFolder(e){return e.orgaId!==this.principal.orgaId}getPermissionsHint(e){let t=" (";return e.readAllowed&&(t+="r"),e.writeAllowed&&(t+="w"),e.deleteAllowed&&(t+="d"),t+=")",this.isForeignFolder(e)&&(t+=" (von: "+e.orgaId+")"),t}enterEditMode(e){e<0||e>=this.folders.length||(this._initMembers(!1),this.editFolderIdx=e,this.editFolderNewName=this.folders[e].name)}cancelEditMode(){this._initMembers(!1)}persistEditFolderChanges(){const e=this.folders[this.editFolderIdx],t=e.name;e.name!==this.editFolderNewName?(this.folders[this.editFolderIdx].name=this.editFolderNewName,this.folderService.renameFolder(this.folders[this.editFolderIdx])?this.cancelEditMode():(this.errorMessage="Der Ordnername wird schon verwendet.",e.name=t)):this.cancelEditMode()}removeFolder(e){this.folderService.removeFolder(e)?this._initMembers():this.errorMessage="Du darfst diesen Ordner nicht l\xf6schen, fehlende Berechtigung!"}addNewFolder(){this.userMayCreateNewFolder&&(this.folderService.addNewFolder(this.newFolder)?this._initMembers():this.errorMessage="Der Ordnername wird schon verwendet.")}somethingChanged(e){"Enter"!==e.code&&(this.errorMessage="")}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(pv),xs(Pu))},e.\u0275cmp=dt({type:e,selectors:[["app-listfolders"]],decls:10,vars:6,consts:[[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-1"],["class","container-form",4,"ngIf"],[1,"error-text",3,"hidden"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text",3,"click"],["class","btnInListe btnDelete","style","position: absolute; right: 0.7em;",3,"click",4,"ngIf"],[1,"btnInListe","btnDelete",2,"position","absolute","right","0.7em",3,"click"],[1,"container-form"],[1,"row"],[1,"input-field","col","s8","m6","mb-0","mr-1"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],["for","editName"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newFolderForm","ngForm"],[1,"input-field","col","s8","m6","mb-0"],["type","text","id","folderName","name","folderName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["folderName","ngModel"],["for","folderName"],[1,"col","s6","m4"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Ms(0,"h6"),Xs(1),Rs(),Ms(2,"ul",0),As(3,Iv,8,7,"li",1),Es(4,"hr",2),Rs(),As(5,Sv,11,2,"div",3),As(6,Cv,12,2,"div",3),Ms(7,"div",4),Ms(8,"p"),Xs(9),Rs(),Rs()),2&e&&(xi(1),eo(" Hallo ",t.usersDisplayName,", auf folgende Ordner hast du mind. eine Berechtigung (egal welche):"),xi(2),Ps("ngForOf",t.folders),xi(2),Ps("ngIf",t.editFolderIdx>=0),xi(1),Ps("ngIf",t.userMayCreateNewFolder&&t.editFolderIdx<0),xi(1),Ps("hidden",!t.errorMessage),xi(2),eo("Hinweis/Fehler: ",t.errorMessage,""))},directives:[sl,al,il,Bu,Zd,Qd,eh,qu,Wd,qd,Ku,zd],styles:[".liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{cursor:pointer}.error-text[_ngcontent-%COMP%]{font-weight:700;color:#dc143c}"]}),e})();function kv(e,t){if(1&e&&(Ms(0,"h4"),Xs(1),Rs()),2&e){const e=Ls();xi(1),eo("",e.principal.name,", du hast keine Nachrichten.")}}const xv=function(e){return{editMode:e}};function Uv(e,t){if(1&e){const e=Fs();Ms(0,"li",4),zs("click",(function(){Gt(e);const n=t.index;return Ls(2).showNotification(n)})),Ms(1,"span",5),Xs(2),Rs(),Ms(3,"span",6),Xs(4),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,i=Ls(2);Ps("ngClass",va(3,xv,e.id===(null==i.notificationTodo?null:i.notificationTodo.id))),xi(2),eo(" ",i.getTypeAsString(n)," "),xi(2),eo(" ",i.getDetailsOfNotification(n)," ")}}function Pv(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2,"Du hast deine Mail-Adresse erfolgreich verifiziert und damit deinen Account aktiviert. "),Es(3,"br"),Xs(4," Dies ist nur eine Information, du musst weiter nichts unternehmen. "),Rs(),Ms(5,"button",8),zs("click",(function(){return Gt(e),Ls(3).removeNotification()})),Xs(6,"Verstanden"),Rs(),Rs()}}function Tv(e,t){1&e&&(Ms(0,"p"),Xs(1," Mithilfe der Identifikationsdaten der Organisation kannst du deren Identit\xe4t \xfcberpr\xfcfen. "),Rs())}function Mv(e,t){1&e&&(Ms(0,"p"),Xs(1," Die Organisation hat (noch) keine Identifizierungsdaten. "),Rs())}function Rv(e,t){if(1&e){const e=Fs();Ms(0,"button",12),zs("click",(function(){return Gt(e),Ls(4).showIdentification(!0)})),Xs(1,"Identifizierungsinfo einblenden"),Rs()}2&e&&Ps("disabled",!Ls(4).hasIdents)}function Ev(e,t){if(1&e){const e=Fs();Ms(0,"button",12),zs("click",(function(){return Gt(e),Ls(4).showIdentification(!1)})),Xs(1,"Identifizierungsinfo ausblenden"),Rs()}2&e&&Ps("disabled",!Ls(4).hasIdents)}function Fv(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Es(3,"br"),Xs(4,' Durch "Annehmen" akzeptierst du die Einladung und die Weiterbearbeitung geht an die Organisation \xfcber. '),Rs(),As(5,Tv,2,0,"p",0),As(6,Mv,2,0,"p",0),Ms(7,"button",9),zs("click",(function(){return Gt(e),Ls(3).declineInvitation()})),Xs(8,"Ablehnen"),Rs(),Ms(9,"button",10),zs("click",(function(){return Gt(e),Ls(3).acceptInvitation()})),Xs(10,"Annehmen"),Rs(),As(11,Rv,2,1,"button",11),As(12,Ev,2,1,"button",11),Rs()}if(2&e){const e=Ls(3);xi(2),eo('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',null==e.notificationTodo||null==e.notificationTodo.organization?null:e.notificationTodo.organization.name,'" vorgesehen. '),xi(3),Ps("ngIf",e.hasIdents),xi(1),Ps("ngIf",!e.hasIdents),xi(5),Ps("ngIf",!e.showIdent),xi(1),Ps("ngIf",e.showIdent)}}function Nv(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Es(3,"br"),Xs(4," F\xfcr den entsprechenden Benutzer kann im Organisation-Management erneut eine Einladung verschickt werden. "),Rs(),Ms(5,"button",10),zs("click",(function(){return Gt(e),Ls(3).removeNotification()})),Xs(6,"Verstanden"),Rs(),Rs()}if(2&e){const e=Ls(3);xi(2),eo("Der Benutzer ",null==e.notificationTodo||null==e.notificationTodo.orgaUser?null:e.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation abgelehnt. ")}}function Dv(e,t){1&e&&(Ms(0,"p"),Xs(1," Mithilfe der Identifikationsdaten des Anwenders kannst du seine Identit\xe4t \xfcberpr\xfcfen. "),Rs())}function zv(e,t){1&e&&(Ms(0,"p"),Xs(1," Der Benutzer hat (noch) keine Identifizierungsdaten. "),Rs())}function Vv(e,t){if(1&e){const e=Fs();Ms(0,"button",12),zs("click",(function(){return Gt(e),Ls(4).showIdentification(!0)})),Xs(1,"Identifizierungsinfo einblenden"),Rs()}2&e&&Ps("disabled",!Ls(4).hasIdents)}function Bv(e,t){if(1&e){const e=Fs();Ms(0,"button",12),zs("click",(function(){return Gt(e),Ls(4).showIdentification(!1)})),Xs(1,"Identifizierungsinfo ausblenden"),Rs()}2&e&&Ps("disabled",!Ls(4).hasIdents)}function Lv(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Rs(),As(3,Dv,2,0,"p",0),As(4,zv,2,0,"p",0),Ms(5,"button",9),zs("click",(function(){return Gt(e),Ls(3).declineInvitation()})),Xs(6,"Ablehnen"),Rs(),Ms(7,"button",10),zs("click",(function(){return Gt(e),Ls(3).acceptInvitation()})),Xs(8,"Annehmen"),Rs(),As(9,Vv,2,1,"button",11),As(10,Bv,2,1,"button",11),Rs()}if(2&e){const e=Ls(3);xi(2),eo("Der Benutzer ",null==e.notificationTodo||null==e.notificationTodo.orgaUser?null:e.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation angenommen. "),xi(1),Ps("ngIf",e.hasIdents),xi(1),Ps("ngIf",!e.hasIdents),xi(5),Ps("ngIf",!e.showIdent),xi(1),Ps("ngIf",e.showIdent)}}function jv(e,t){1&e&&(Ms(0,"p"),Xs(1," Mithilfe der Identifikationsdaten des Anwenders kannst du seine Identit\xe4t \xfcberpr\xfcfen. "),Rs())}function Hv(e,t){1&e&&(Ms(0,"p"),Xs(1," Der Benutzer hat (noch) keine Identifizierungsdaten. "),Rs())}function $v(e,t){if(1&e){const e=Fs();Ms(0,"button",12),zs("click",(function(){return Gt(e),Ls(4).showIdentification(!0)})),Xs(1,"Identifizierungsinfo einblenden"),Rs()}2&e&&Ps("disabled",!Ls(4).hasIdents)}function Gv(e,t){if(1&e){const e=Fs();Ms(0,"button",12),zs("click",(function(){return Gt(e),Ls(4).showIdentification(!1)})),Xs(1,"Identifizierungsinfo ausblenden"),Rs()}2&e&&Ps("disabled",!Ls(4).hasIdents)}function Wv(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Rs(),As(3,jv,2,0,"p",0),As(4,Hv,2,0,"p",0),Ms(5,"button",9),zs("click",(function(){return Gt(e),Ls(3).declineInvitation()})),Xs(6,"Ablehnen"),Rs(),Ms(7,"button",10),zs("click",(function(){return Gt(e),Ls(3).acceptInvitation()})),Xs(8,"Annehmen"),Rs(),As(9,$v,2,1,"button",11),As(10,Gv,2,1,"button",11),Rs()}if(2&e){const e=Ls(3);xi(2),eo("Der Benutzer ",null==e.notificationTodo||null==e.notificationTodo.account?null:e.notificationTodo.account.name," m\xf6chte in deiner Organisation mitarbeiten."),xi(1),Ps("ngIf",e.hasIdents),xi(1),Ps("ngIf",!e.hasIdents),xi(5),Ps("ngIf",!e.showIdent),xi(1),Ps("ngIf",e.showIdent)}}function qv(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Rs(),Ms(3,"button",10),zs("click",(function(){return Gt(e),Ls(3).removeNotification()})),Xs(4,"Verstanden"),Rs(),Rs()}if(2&e){const e=Ls(3);xi(2),eo("Die Organisation ",null==e.notificationTodo||null==e.notificationTodo.organization?null:e.notificationTodo.organization.name," hat deine Aufnahme in die Organisation abgelehnt. ")}}function Kv(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Es(3,"br"),Xs(4," Diese Organisation wird dir ggf. beim Anmelden als Anmelde-Option angeboten. "),Rs(),Ms(5,"button",10),zs("click",(function(){return Gt(e),Ls(3).removeNotification()})),Xs(6,"Verstanden"),Rs(),Rs()}if(2&e){const e=Ls(3);xi(2),eo("Die Organisation ",null==e.notificationTodo||null==e.notificationTodo.organization?null:e.notificationTodo.organization.name," hat deiner Aufnahme in die Organisation zugestimmt. Somit bist die Mitglied (Mitarbeiter) dieser Organisation. ")}}function Zv(e,t){if(1&e&&(Ms(0,"div",7),As(1,Pv,7,0,"div",0),As(2,Fv,13,5,"div",0),As(3,Nv,7,1,"div",0),As(4,Lv,11,5,"div",0),As(5,Wv,11,5,"div",0),As(6,qv,5,1,"div",0),As(7,Kv,7,1,"div",0),Rs()),2&e){const e=Ls(2);xi(1),Ps("ngIf",e.isAccountVerification(null==e.notificationTodo?null:e.notificationTodo.type)),xi(1),Ps("ngIf",e.isInvitationOrgaUserByOrga(null==e.notificationTodo?null:e.notificationTodo.type)),xi(1),Ps("ngIf",e.isDeclinedOrgaUserInvitationByUser(null==e.notificationTodo?null:e.notificationTodo.type)),xi(1),Ps("ngIf",e.isAcceptedOrgaUserInvitationByUser(null==e.notificationTodo?null:e.notificationTodo.type)),xi(1),Ps("ngIf",e.isWishOfMembershipByUser(null==e.notificationTodo?null:e.notificationTodo.type)),xi(1),Ps("ngIf",e.isDeclinedOrgaUserInvitationByOrga(null==e.notificationTodo?null:e.notificationTodo.type)),xi(1),Ps("ngIf",e.isAcceptedOrgaUserInvitationByOrga(null==e.notificationTodo?null:e.notificationTodo.type))}}function Jv(e,t){if(1&e&&(Ms(0,"option",19),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e.ident),xi(1),eo(" ",e.text,"")}}function Qv(e,t){1&e&&Es(0,"img",26)}function Xv(e,t){if(1&e&&Es(0,"img",27),2&e){const e=Ls(4);js("src",null==e.identSelected||null==e.identSelected.account?null:e.identSelected.account.photo,li)}}function Yv(e,t){if(1&e&&(Ms(0,"div",20),Ms(1,"div",21),Ms(2,"span",22),Xs(3),Rs(),As(4,Qv,1,0,"img",23),As(5,Xv,1,1,"img",24),Ms(6,"p"),Xs(7,"Name: "),Ms(8,"span",25),Xs(9),Rs(),Rs(),Ms(10,"p"),Xs(11,"Geburtsdatum: "),Ms(12,"span",25),Xs(13),Rs(),Rs(),Ms(14,"p"),Xs(15,"Adresse: "),Ms(16,"span",25),Xs(17),Rs(),Rs(),Rs(),Rs()),2&e){const e=Ls(3);xi(3),Ys(e.getCardTitle(e.identSelected)),xi(1),Ps("ngIf",!(null!=e.identSelected&&null!=e.identSelected.account&&e.identSelected.account.photo)),xi(1),Ps("ngIf",null==e.identSelected||null==e.identSelected.account?null:e.identSelected.account.photo),xi(4),to("",null==e.identSelected||null==e.identSelected.account?null:e.identSelected.account.firstname," ",null==e.identSelected||null==e.identSelected.account?null:e.identSelected.account.lastname,""),xi(4),Ys(e.getDateString(null==e.identSelected||null==e.identSelected.account?null:e.identSelected.account.dateOfBirth)),xi(4),no("",null==e.identSelected||null==e.identSelected.account||null==e.identSelected.account.address?null:e.identSelected.account.address.street,", ",null==e.identSelected||null==e.identSelected.account||null==e.identSelected.account.address?null:e.identSelected.account.address.zipCode," ",null==e.identSelected||null==e.identSelected.account||null==e.identSelected.account.address?null:e.identSelected.account.address.city,"")}}function ey(e,t){1&e&&Es(0,"img",29)}function ty(e,t){if(1&e&&Es(0,"img",27),2&e){const e=Ls(4);js("src",null==e.identSelected||null==e.identSelected.organization?null:e.identSelected.organization.logo,li)}}function ny(e,t){if(1&e&&(Ms(0,"div",20),Ms(1,"div",21),Ms(2,"span",22),Xs(3),Rs(),As(4,ey,1,0,"img",28),As(5,ty,1,1,"img",24),Ms(6,"p"),Xs(7,"Name: "),Ms(8,"span",25),Xs(9),Rs(),Rs(),Ms(10,"p"),Xs(11,"Adresse: "),Ms(12,"span",25),Xs(13),Rs(),Rs(),Rs(),Rs()),2&e){const e=Ls(3);xi(3),Ys(e.getCardTitle(e.identSelected)),xi(1),Ps("ngIf",!(null!=e.identSelected&&null!=e.identSelected.organization&&e.identSelected.organization.logo)),xi(1),Ps("ngIf",null==e.identSelected||null==e.identSelected.organization?null:e.identSelected.organization.logo),xi(4),Ys(null==e.identSelected||null==e.identSelected.organization?null:e.identSelected.organization.name),xi(4),no("",null==e.identSelected||null==e.identSelected.organization||null==e.identSelected.organization.address?null:e.identSelected.organization.address.street,", ",null==e.identSelected||null==e.identSelected.organization||null==e.identSelected.organization.address?null:e.identSelected.organization.address.zipCode," ",null==e.identSelected||null==e.identSelected.organization||null==e.identSelected.organization.address?null:e.identSelected.organization.address.city,"")}}function iy(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"div",13),Ms(2,"div",14),Ms(3,"select",15,16),zs("ngModelChange",(function(t){return Gt(e),Ls(2).identSelected=t})),As(5,Jv,2,2,"option",17),Rs(),Rs(),Rs(),As(6,Yv,18,9,"div",18),As(7,ny,14,7,"div",18),Rs()}if(2&e){const e=Ls(2);xi(3),Ps("ngModel",e.identSelected),xi(2),Ps("ngForOf",e.identSelect),xi(1),Ps("ngIf",null==e.identSelected?null:e.identSelected.account),xi(1),Ps("ngIf",null==e.identSelected?null:e.identSelected.organization)}}function ry(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"h6"),Xs(2),Rs(),Ms(3,"ul",1),As(4,Uv,5,5,"li",2),Rs(),As(5,Zv,8,7,"div",3),As(6,iy,8,4,"div",0),Rs()),2&e){const e=Ls();xi(2),eo("",e.principal.name,", du hast folgende Nachrichten:"),xi(2),Ps("ngForOf",e.allNotifications),xi(1),Ps("ngIf",null==e.notificationTodo?null:e.notificationTodo.id),xi(1),Ps("ngIf",e.showIdent)}}let sy=(()=>{class e{constructor(e,t,n,i){this.notificationService=e,this.principalService=t,this.settingsService=n,this.identService=i,this.allNotifications=[],this.notificationDescription="",this.showIdent=!1,this.hasIdents=!1,this.identSelect=[],this.settingsService.setTitle("Nachrichten")}ngOnInit(){this.principal=this.principalService.getAccount(),this.initMembers()}initMembers(){return wc(this,void 0,void 0,(function*(){this.notificationDescription="",this._resetIdentifications(),this.allNotifications=yield this.notificationService.getAllNotificationsForCurrentPrincipal(),this.allNotifications.length>0&&(this.idxNotificationTodo||(this.idxNotificationTodo=0),this.allNotifications[this.idxNotificationTodo]||(this.idxNotificationTodo=this.idxNotificationTodo-1),yield this.showNotification(this.idxNotificationTodo,!0))}))}_resetIdentifications(){this.showIdent=!1,this.hasIdents=!1,this.identSelected=void 0,this.identSelect=[]}_initIdentifications(){var e,t,n;return wc(this,void 0,void 0,(function*(){this._resetIdentifications();let i=[];(null===(e=this.notificationTodo)||void 0===e?void 0:e.type)!==Tu.RequestForInvitationAsOrgaUserToOrga&&(null===(t=this.notificationTodo)||void 0===t?void 0:t.type)!==Tu.WishOfMembershipToOrga&&(null===(n=this.notificationTodo)||void 0===n?void 0:n.type)!==Tu.RequestForInvitationAsOrgaUserToUser||(i=yield this.identService.getAllIdentificationsBasedOnNotification(this.notificationTodo),this.hasIdents=i.length>0),this.hasIdents&&(this.identSelected=i[0],this.identSelect=i.map(e=>({text:this.getIdentSelectText(e),ident:e})))}))}getIdentSelectText(e){return`${Iu[e.provider]} am ${e.doneAt.toLocaleDateString()}`}getCardTitle(e){return e?`Identifiziert am ${e.doneAt.toLocaleDateString()} durch Anbieter ${Iu[e.provider]}`:""}_getTypeAsString(e){switch(e){case Tu.InfoForSuccessfulAccountVerification:return"Account-Verifizierung abgeschlossen";case Tu.RequestForInvitationAsOrgaUserToUser:return"Einladung von einer Organisation";case Tu.RequestForInvitationAsOrgaUserToOrga:return"Benutzer hat Einladung angenommen";case Tu.InfoForDenialOfInvitationAsOrgaUserToOrga:return"Benutzer hat Einladung abgelehnt";case Tu.WishOfMembershipToOrga:return"Benutzer erbittet Mitgliedschaft in deiner Organisation";case Tu.InfoForApprovalInvitationOfOrgaUserToUser:return"Admin hat Einladung angenommen";case Tu.InfoForDenialOfInvitationOfOrgaUserToUser:return"Admin hat Einladung abgelehnt"}return""}getTypeAsString(e){return e+1+": "+this._getTypeAsString(this.allNotifications[e].type)}getDateString(e){return e?e.toLocaleDateString():""}isAccountVerification(e){return e===Tu.InfoForSuccessfulAccountVerification}isInvitationOrgaUserByOrga(e){return e===Tu.RequestForInvitationAsOrgaUserToUser}isDeclinedOrgaUserInvitationByUser(e){return e===Tu.InfoForDenialOfInvitationAsOrgaUserToOrga}isAcceptedOrgaUserInvitationByUser(e){return e===Tu.RequestForInvitationAsOrgaUserToOrga}isWishOfMembershipByUser(e){return e===Tu.WishOfMembershipToOrga}isDeclinedOrgaUserInvitationByOrga(e){return e===Tu.InfoForDenialOfInvitationOfOrgaUserToUser}isAcceptedOrgaUserInvitationByOrga(e){return e===Tu.InfoForApprovalInvitationOfOrgaUserToUser}getDetailsOfNotification(e){const t=this.allNotifications[e];switch(t.type){case Tu.InfoForSuccessfulAccountVerification:case Tu.WishOfMembershipToOrga:return t.account.name;case Tu.RequestForInvitationAsOrgaUserToUser:return"Von Organisation "+t.organization.name;case Tu.InfoForDenialOfInvitationAsOrgaUserToOrga:case Tu.RequestForInvitationAsOrgaUserToOrga:return t.orgaUser.name;case Tu.InfoForDenialOfInvitationOfOrgaUserToUser:case Tu.InfoForApprovalInvitationOfOrgaUserToUser:return"Von Organisation "+t.organization.name}}showNotification(e,t=!1){return wc(this,void 0,void 0,(function*(){(t||e!==this.idxNotificationTodo)&&(this.idxNotificationTodo=e,this.notificationTodo=this.allNotifications[e],yield this._initIdentifications())}))}showIdentification(e){return wc(this,void 0,void 0,(function*(){this.showIdent=e}))}acceptInvitation(){return wc(this,void 0,void 0,(function*(){yield this.notificationService.acceptInvitation(this.notificationTodo.id),yield this.initMembers()}))}declineInvitation(){return wc(this,void 0,void 0,(function*(){yield this.notificationService.declineInvitation(this.notificationTodo.id),yield this.initMembers()}))}removeNotification(){return wc(this,void 0,void 0,(function*(){yield this.notificationService.removeNotification(this.notificationTodo.id),yield this.initMembers()}))}}return e.\u0275fac=function(t){return new(t||e)(xs(Um),xs(Pu),xs(ku),xs(Ru))},e.\u0275cmp=dt({type:e,selectors:[["app-notification-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"liste"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"mt-2"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-delete",3,"click"],[1,"btn",3,"click"],["class","btn btn-blue ml-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-blue","ml-2",3,"disabled","click"],[1,"row","mt-1","mb-1"],[1,"input-field","col","s4"],["name","identTyp",1,"browser-default",3,"ngModel","ngModelChange"],["identTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["class","card grey lighten-4",4,"ngIf"],[3,"ngValue"],[1,"card","grey","lighten-4"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],["class","left-float","width","100px","height","100px","alt","Kein Bild vorhanden",4,"ngIf"],["class","left-float","width","100px","height","100px","alt","Passbild",3,"src",4,"ngIf"],[1,"bold"],["width","100px","height","100px","alt","Kein Bild vorhanden",1,"left-float"],["width","100px","height","100px","alt","Passbild",1,"left-float",3,"src"],["class","left-float","width","100px","height","100px","alt","Kein Logo vorhanden",4,"ngIf"],["width","100px","height","100px","alt","Kein Logo vorhanden",1,"left-float"]],template:function(e,t){1&e&&(As(0,kv,2,1,"h4",0),As(1,ry,7,4,"div",0)),2&e&&(Ps("ngIf",0===t.allNotifications.length),xi(1),Ps("ngIf",t.allNotifications.length>0))},directives:[al,sl,il,md,qu,Wd,vd,_d],styles:[".editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}.list-item-text-left[_ngcontent-%COMP%]{width:30rem}.liste[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}select[_ngcontent-%COMP%]{border:3px solid teal}.card[_ngcontent-%COMP%]{width:40rem;height:12rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding-top:1rem!important}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3rem!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.left-float[_ngcontent-%COMP%]{float:left;margin-right:2rem}"]}),e})();function oy(e,t){if(1&e){const e=Fs();Ms(0,"li",2),Ms(1,"div",3),Ms(2,"label",4),zs("click",(function(){Gt(e);const n=t.index;return Ls().toggleValue(n)})),Xs(3),Rs(),Ms(4,"label",5),Xs(5," Nee "),Ms(6,"input",6),zs("change",(function(){Gt(e);const n=t.index;return Ls().toggleValue(n)})),Rs(),Es(7,"span",7),Xs(8," Jaa "),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit;xi(3),eo("",e.key,":"),xi(3),Ps("checked",e.value)}}let ay=(()=>{class e{constructor(e,t){this.settingsService=e,this.eventService=t,this.checked=!1,this.boolSettings=[]}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Programmeinstellungen");const e=yield this.settingsService.getAllBooleanSettings();for(const t in e)this.boolSettings.push({key:t,value:e[t]})}))}ngOnDestroy(){this.settingsService.sendChangesToBackend()}toggleValue(e){const t=this.boolSettings[e];t.value=!t.value,this.settingsService.booleanValueSet(t.key,t.value),"useGreenLikeColors"!==t.key&&"useAccountName4DisplayingUsername"!==t.key||this.eventService.publishRefreshMainViewEvent()}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(Su))},e.\u0275cmp=dt({type:e,selectors:[["app-settings"]],decls:2,vars:1,consts:[[1,"row"],["class","col s12 m12 l12",4,"ngFor","ngForOf"],[1,"col","s12","m12","l12"],[1,"switch"],[1,"switch-description",3,"click"],[1,"switch-text"],["type","checkbox",3,"checked","change"],[1,"lever"]],template:function(e,t){1&e&&(Ms(0,"ul",0),As(1,oy,9,2,"li",1),Rs()),2&e&&(xi(1),Ps("ngForOf",t.boolSettings))},directives:[sl],styles:[".switch-description[_ngcontent-%COMP%]{width:30em;font-weight:700}.switch-description[_ngcontent-%COMP%], .switch-text[_ngcontent-%COMP%]{margin-bottom:1em;float:left;text-align:left}.switch-text[_ngcontent-%COMP%]{margin-left:2rem;width:10em}li[_ngcontent-%COMP%]{white-space:nowrap;display:inline-block}"]}),e})();var cy=function(e){return e[e.LoggedIn=1]="LoggedIn",e[e.LoggedOut=2]="LoggedOut",e[e.AccountDetails=3]="AccountDetails",e[e.OrgaUserDetails=4]="OrgaUserDetails",e[e.OrganizationDetails=5]="OrganizationDetails",e}({});let ly=(()=>{class e{constructor(e,t,n,i,r){this.fakeBackend=e,this.eventService=t,this.principalService=n,this.authService=i,this.settingsService=r,this.isActive=!0,this.useValueFromBackend=!0,this.callBackend=!1,this.eventService.tokenChanged.pipe(sm(()=>this.isActive)).subscribe(e=>this._onTokenChanged(e)),this.initMembers()}ngOnDestroy(){this.isActive=!1}initMembers(){this.token={authType:Ac.None},this.token.account={name:"",email:""},this.token.orgaUser={name:""},this.token.organization={name:"",email:""}}_onTokenChanged(e){var t,n,i,r;let s=!1;switch(e.type){case cy.LoggedIn:s=!0;break;case cy.AccountDetails:(null===(t=this.token.account)||void 0===t?void 0:t.id)===(null===(n=e.account)||void 0===n?void 0:n.id)&&(s=!0,this.token.account=this.fakeBackend.findAccountById(this.token.account.id),this.principalService.setPrincipal(this.token));break;case cy.OrgaUserDetails:case cy.OrganizationDetails:e.type===cy.OrgaUserDetails&&(null===(i=this.token.orgaUser)||void 0===i?void 0:i.id)===(null===(r=e.orgaUser)||void 0===r?void 0:r.id)&&(s=!0,this.token.orgaUser=this.fakeBackend.findOrgaUserById(e.orgaUser.id),this.principalService.setPrincipal(this.token))}if(s&&this.principalService.isLoggedInInOrga()){const e=this.principalService.getOrgaUser(),t=this.fakeBackend.getAllAllowedSubOrgas(null==e?void 0:e.orgaId,null==e?void 0:e.id).map(e=>e.id);this.principalService.setSubOrgaIdsWithAdminsPermissions(t)}}register(e,t,n){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const i=yield this.authService.register(e,t,n);if(this.useValueFromBackend)return this._finishRegistration(i),!0}const i=this.fakeBackend.register(e,t,n);return this._finishRegistration(i),!!i}))}_finishRegistration(e){this.logout(),e&&e.authType!==Ac.None&&(this.callBackend&&this.useValueFromBackend?e.accessToken&&this.setToken(e):!this.settingsService.afterRegistrationLoginIsRequired()&&this.setToken(e))}login(e,t){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const n=yield this.authService.login(e.kennung,e.secret,t);if(this.useValueFromBackend&&n)return this.tempToken=Object.assign({},n),n}const n=this.fakeBackend.login(e,t);return this.tempToken=Object.assign({},n),n}))}logoutFromOrganization(e){var t;const n=Object.assign({},this.token);n.authType=Ac.Account,n.organization=void 0,n.orgaUser=void 0,null===(t=n.availableOrgas)||void 0===t||t.splice(n.availableOrgas.findIndex(t=>t.id===e),1),this.setToken(n)}getTempToken(){return this.tempToken}loginWithOrganization(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.authService.loginInOrganization(e);if(this.useValueFromBackend&&t)return void this.setToken(t)}this.tempToken.authType=Ac.OrgaUser;const t={authType:Ac.OrgaUser};Object.assign(t,this.tempToken);const n=t.availableOrgas.find(t=>t.id===e);t.organization=n,t.orgaUser=this.fakeBackend.findOrgaUserByAccountId(n.id,t.account.id),this.setToken(t)}))}loginWithAccountOnly(){var e,t,n;const i={authType:Ac.Account};i.authLevel=null===(e=this.tempToken)||void 0===e?void 0:e.authLevel,i.account=null===(t=this.tempToken)||void 0===t?void 0:t.account,i.availableOrgas=null===(n=this.tempToken)||void 0===n?void 0:n.availableOrgas,this.setToken(i)}logout(){this.setToken({authType:Ac.None})}setToken(e){this.initMembers(),this.token.authType=e.authType,this.token.authType!==Ac.None&&(this.tempToken=void 0,Object.assign(this.token,e)),this.principalService.setPrincipal(this.token),this.principalService.isLoggedIn()?this.principalService.isLoggedInInOrga()?this.eventService.publishTokenChangedEvent({type:cy.LoggedIn,account:this.token.account,orgaUser:this.token.orgaUser}):this.eventService.publishTokenChangedEvent({type:cy.LoggedIn,account:this.token.account}):this.eventService.publishTokenChangedEvent({type:cy.LoggedOut})}getToken(){return this.token}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pm),Ke(Su),Ke(Pu),Ke(Gl),Ke(ku))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function uy(e,t){1&e&&(Ms(0,"h4"),Xs(1,'Derzeit sind keine "Mails" vorhanden.'),Rs())}const dy=function(e){return{editMode:e}};function hy(e,t){if(1&e){const e=Fs();Ms(0,"li",3),zs("click",(function(){Gt(e);const n=t.index;return Ls(2).showTask(n)})),Ms(1,"span",4),Xs(2),Rs(),Ms(3,"span",5),Xs(4),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,i=Ls(2);Ps("ngClass",va(3,dy,e.id===(null==i.taskTodo?null:i.taskTodo.id))),xi(2),eo(" ",i.getTypeAsString(n)," "),xi(2),eo(" ",i.getDetailsOfTask(n)," ")}}function gy(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2,"Du hast dich registriert, aber deine Email-Adresse noch nicht verifiziert. "),Es(3,"br"),Xs(4," Wenn du untenstehendem Link folgst und dich mit deinem registrierten Account anmeldest, best\xe4tigst du deine Email-Adresse. "),Rs(),Ms(5,"p"),Xs(6,'Damit wird dein Account "aktiv" (und du kannst die E-Mail l\xf6schen)'),Rs(),Ms(7,"a",6),zs("click",(function(){return Gt(e),Ls(3).wantsToFulfill("/iam/login")})),Xs(8,"Hiermit verifizierst du deine Email-Adresse."),Rs(),Ms(9,"p"),Ms(10,"button",7),zs("click",(function(){return Gt(e),Ls(3).removeTask()})),Xs(11,"E-Mail l\xf6schen"),Rs(),Rs(),Rs()}}function fy(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Es(3,"br"),Xs(4," Wenn dies in Ordnung ist, f\xfchre folgende Schritte durch:"),Rs(),Ms(5,"ul",8),Ms(6,"li"),Ms(7,"a",6),zs("click",(function(){return Gt(e),Ls(3).wantsToFulfill("/iam/login")})),Xs(8,"Melde dich mit deinem Account an - wenn du bereits einen hast."),Rs(),Rs(),Ms(9,"li"),Ms(10,"a",6),zs("click",(function(){return Gt(e),Ls(3).wantsToFulfill("/iam/register")})),Xs(11," Oder registriere dich zun\xe4chst und melde dich danach an."),Rs(),Rs(),Ms(12,"li"),Xs(13," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Rs(),Rs(),Ms(14,"button",7),zs("click",(function(){return Gt(e),Ls(3).removeTask()})),Xs(15,"E-Mail l\xf6schen"),Rs(),Rs()}if(2&e){const e=Ls(3);xi(2),eo('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',e.getOrganame(),'" vorgesehen.')}}const py=function(){return["/iam/login"]};function my(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"p"),Xs(2),Es(3,"br"),Xs(4," Dir wurde eine Nachricht an deinen Account geschickt. Daher einfach anmelden und deine Nachrichten pr\xfcfen. "),Rs(),Ms(5,"ul",8),Ms(6,"li"),Ms(7,"a",9),Xs(8,"Melde dich mit deinem Account an."),Rs(),Rs(),Ms(9,"li"),Xs(10," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Rs(),Rs(),Ms(11,"button",7),zs("click",(function(){return Gt(e),Ls(3).removeTask()})),Xs(12,"E-Mail l\xf6schen"),Rs(),Rs()}if(2&e){const e=Ls(3);xi(2),eo('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',e.getOrganame(),'" vorgesehen.'),xi(5),Ps("routerLink",ma(2,py))}}function vy(e,t){if(1&e&&(Ms(0,"div"),As(1,gy,12,0,"div",0),As(2,fy,16,1,"div",0),As(3,my,13,3,"div",0),Rs()),2&e){const e=Ls(2);xi(1),Ps("ngIf",e.isAccountVerification(e.taskTodo.type)),xi(1),Ps("ngIf",e.isInvitationOrgaUser(e.taskTodo.type)),xi(1),Ps("ngIf",e.isInfoOfInvitationOrgaUser(e.taskTodo.type))}}function yy(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"h6"),Xs(2,'Folgende "Mails" sind vorhanden:'),Rs(),Ms(3,"ul",1),As(4,hy,5,5,"li",2),Rs(),As(5,vy,4,3,"div",0),Rs()),2&e){const e=Ls();xi(4),Ps("ngForOf",e.allTasks),xi(1),Ps("ngIf",e.taskTodo)}}let by=(()=>{class e{constructor(e,t,n,i){this.router=e,this.taskService=t,this.tokenService=n,this.settingsService=i,this.allTasks=[],this.taskTodoDescription="",this.tokenService.logout(),this.settingsService.setTitle("Fake Mailbox"),this.taskService.resetTaskInProgress()}ngOnInit(){this.initMembers()}initMembers(){return wc(this,void 0,void 0,(function*(){this.allTasks=yield this.taskService.getAllMails(),this.allTasks.length>0?(this.idxTaskTodo||(this.idxTaskTodo=0),this.allTasks[this.idxTaskTodo]||(this.idxTaskTodo=this.idxTaskTodo-1),this.showTask(this.idxTaskTodo)):(this.idxTaskTodo=void 0,this.taskTodo=void 0,this.taskTodoDescription="")}))}_getTypeAsString(e){switch(e){case Cm.AccountVerification:return"Account-Verifizierung";case Cm.InfoOfInvitationOrgaUser:return"Einladung in Organisation an Account";case Cm.InvitationOrgaUser:return"Einladung in Organisation per Mail"}}getTypeAsString(e){return e+1+": "+this._getTypeAsString(this.allTasks[e].type)}getOrganame(){var e,t,n;return null!==(n=null===(t=null===(e=this.taskTodo)||void 0===e?void 0:e.organization)||void 0===t?void 0:t.name)&&void 0!==n?n:"unknown-Orga"}getDetailsOfTask(e){const t=this.allTasks[e];switch(t.type){case Cm.AccountVerification:return t.email+", "+t.account.name;case Cm.InvitationOrgaUser:return t.email;case Cm.InfoOfInvitationOrgaUser:return t.email+", "+t.account.name}}isAccountVerification(e){return e===Cm.AccountVerification}isInvitationOrgaUser(e){return e===Cm.InvitationOrgaUser}isInfoOfInvitationOrgaUser(e){return e===Cm.InfoOfInvitationOrgaUser}showTask(e){this.idxTaskTodo=e,this.taskTodo=this.allTasks[e]}wantsToFulfill(e){this.taskTodo&&(this.taskService.setTaskInProgress(this.taskTodo.id)?e&&this.router.navigateByUrl(e):alert("Da stimmt was mit der aktuellen Best\xe4tigung/Task nicht?!?"))}removeTask(){return wc(this,void 0,void 0,(function*(){this.taskTodo&&(yield this.taskService.removeTask(this.taskTodo.id),yield this.initMembers())}))}}return e.\u0275fac=function(t){return new(t||e)(xs(Op),xs(km),xs(ly),xs(ku))},e.\u0275cmp=dt({type:e,selectors:[["app-fake-mail-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"liste"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[3,"click"],[1,"btn","btn-danger",3,"click"],[1,"browser-default"],[3,"routerLink"]],template:function(e,t){1&e&&(As(0,uy,2,0,"h4",0),As(1,yy,6,2,"div",0)),2&e&&(Ps("ngIf",0===t.allTasks.length),xi(1),Ps("ngIf",t.allTasks.length>0))},directives:[al,sl,il,Ip],styles:[".liste[_ngcontent-%COMP%]{width:60rem}.editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}a[_ngcontent-%COMP%]{cursor:pointer}.list-item-text-left[_ngcontent-%COMP%]{width:25rem}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}"]}),e})(),wy=(()=>{class e{constructor(e,t,n){this.principalService=e,this.router=t,this.settingsService=n}canActivate(e,t){let n=!0,i="";const r=!!e.data.allowSubAdmin;return this.settingsService.setRedirectUri(t.url),kc(Ac.OrgaUser,this.principalService.getAuthType())?(this.principalService.isAdminOfCurrentOrga()||(n=!1,r&&(n=!0)),n||(i=r?"Du musst Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du musst Admin dieser Organisation sein.")):(n=!1,i=r?"Du must in einer Organisation angemeldet- und Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du must in einer Organisation angemeldet- und Admin dieser Organisation sein."),n?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(i),this.settingsService.showInfoPageAfterOrgaAdminGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pu),Ke(Op),Ke(ku))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_y=(()=>{class e{constructor(e){this.http=e,this.backendURI=bc+"accounts/"}updateAccount(e){return wc(this,void 0,void 0,(function*(){try{const t=Object.assign({},e);return yield this.http.patch(this.backendURI+e.id,t).toPromise(),!0}catch(t){Oc(t)}return!1}))}deleteAccount(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.delete(this.backendURI+e).toPromise(),!0}catch(t){Oc(t)}return!1}))}findAccountById(e){return wc(this,void 0,void 0,(function*(){try{return yield this.http.get(this.backendURI+e).toPromise()}catch(t){Oc(t)}}))}findAccountByMail(e){return wc(this,void 0,void 0,(function*(){try{const t={params:new yl({fromString:"mail="+e})};return yield this.http.get(this.backendURI,t).toPromise()}catch(t){Oc(t)}}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Ul))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Oy=(()=>{class e{constructor(e,t){this.fakeBackend=e,this.beAccountService=t,this.useValueFromBackend=!0,this.callBackend=!1}updateAccount(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beAccountService.updateAccount(e);if(this.useValueFromBackend)return t}return this.fakeBackend.updateAccount(e)}))}deleteAccount(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beAccountService.deleteAccount(e);if(this.useValueFromBackend)return t}return this.fakeBackend.deleteAccount(e)}))}findAccountById(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beAccountService.findAccountById(e);if(this.useValueFromBackend)return null!=t?t:void 0}return this.fakeBackend.findAccountById(e)}))}findAccountByMail(e){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const t=yield this.beAccountService.findAccountByMail(e);if(this.useValueFromBackend)return null!=t?t:void 0}return this.fakeBackend.findAccountByMail(e)}))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Pm),Ke(_y))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Iy(e,t){1&e&&(Ms(0,"div"),Ms(1,"p"),Xs(2,"Du kannst deinen Account derzeit noch nicht l\xf6schen, da du noch in mind. einer Organisation Mitglied bist."),Rs(),Ms(3,"a",14),Xs(4," Weiter zur Verwaltung deiner Mitgliedschaften... "),Rs(),Rs())}function Sy(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"button",15),zs("click",(function(){return Gt(e),Ls().deleteAccount()})),Xs(2,"Account l\xf6schen"),Rs(),Rs()}}let Cy=(()=>{class e{constructor(e,t,n,i,r,s,o){this.accountService=e,this.orgaService=t,this.tokenService=n,this.principalService=i,this.eventService=r,this.settingsService=s,this.router=o,this.account={},this.deleteAccountAllowed=!1}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Account-Verwaltung"),this.principalsAccountId=this.principalService.getAccount().id,yield this.initMembers()}))}initMembers(){return wc(this,void 0,void 0,(function*(){const e=yield this.accountService.findAccountById(this.principalsAccountId);e&&(this.account=Object.assign({},e),this.accountPrevious=Object.assign({},this.account),this.deleteAccountAllowed=!this.orgaService.accountHasAnyOrgaMembership(this.account.id)||this.settingsService.allowDeletionOfAccountWithOrgaMemberships())}))}dirty(){var e,t,n,i;return(null===(e=this.accountPrevious)||void 0===e?void 0:e.name)!==(null===(t=this.account)||void 0===t?void 0:t.name)||(null===(n=this.accountPrevious)||void 0===n?void 0:n.email)!==(null===(i=this.account)||void 0===i?void 0:i.email)}resetForm(){this.initMembers()}submitForm(){return wc(this,void 0,void 0,(function*(){(yield this.accountService.updateAccount(this.account))?(this.eventService.publishTokenChangedEvent({type:cy.AccountDetails,account:this.account}),this.initMembers()):alert("\xc4nderungen konnten nicht \xfcbernommen werden ???")}))}deleteAccount(){return wc(this,void 0,void 0,(function*(){confirm("Willst du deinen Account wirklich l\xf6schen?")&&(yield this.accountService.deleteAccount(this.principalsAccountId))&&(this.tokenService.logout(),this.router.navigateByUrl("/"))}))}}return e.\u0275fac=function(t){return new(t||e)(xs(Oy),xs(Rm),xs(ly),xs(Pu),xs(Su),xs(ku),xs(Op))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-account-mgmt"]],decls:24,vars:10,consts:[[1,"mt-1","mb-2"],[3,"ngSubmit"],["changeAccountForm","ngForm"],[1,"input-field"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","name"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email"],["type","button",1,"btn","mr-1","mt-1",3,"disabled","click"],["type","submit",1,"btn","mt-1",3,"disabled"],[1,"hr-3"],[4,"ngIf"],["routerLink","/iam/organization-management",2,"font-size","larger"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){if(1&e&&(Ms(0,"p",0),Xs(1,"Hier kannst du deine Accountdaten \xe4ndern:"),Rs(),Ms(2,"form",1,2),zs("ngSubmit",(function(){return t.submitForm()})),Ms(4,"div",3),Ms(5,"input",4,5),zs("ngModelChange",(function(e){return t.account.name=e})),Rs(),Ms(7,"label",6),Xs(8,"Name (muss mind. 3 Zeichen haben)"),Rs(),Rs(),Ms(9,"div",3),Ms(10,"input",7,8),zs("ngModelChange",(function(e){return t.account.email=e})),Rs(),Ms(12,"label",9),Xs(13,"Email (Pflichtfeld, eindeutig)"),Rs(),Rs(),Ms(14,"button",10),zs("click",(function(){return t.resetForm()})),Xs(15,"\xc4nderungen verwerfen"),Rs(),Ms(16,"button",11),Xs(17,"\xc4nderungen \xfcbernehmen"),Rs(),Rs(),Ms(18,"div"),Es(19,"hr",12),Ms(20,"p"),Xs(21,"Hier kannst du deinen Account l\xf6schen."),Rs(),Rs(),As(22,Iy,5,0,"div",13),As(23,Sy,3,0,"div",13)),2&e){const e=ks(3);xi(5),Ps("ngModel",t.account.name),xi(2),qs("active",(null==t.account.name?null:t.account.name.length)>0),xi(3),Ps("ngModel",t.account.email),xi(2),qs("active",(null==t.account||null==t.account.email?null:t.account.email.length)>0),xi(2),Ps("disabled",!t.dirty()),xi(2),Ps("disabled",!e.valid||!t.dirty()),xi(6),Ps("ngIf",!t.deleteAccountAllowed),xi(1),Ps("ngIf",t.deleteAccountAllowed)}},directives:[qd,Ku,zd,Bu,Zd,Qd,eh,qu,Wd,al,Ip],styles:["form[_ngcontent-%COMP%]{max-width:600px}.input-field[_ngcontent-%COMP%]{max-width:400px}"]}),e})();function Ay(e,t){if(1&e){const e=Fs();Ms(0,"li"),Ms(1,"span",26),Xs(2),Rs(),Ms(3,"span",27),Xs(4),Rs(),Ms(5,"button",28),zs("click",(function(){Gt(e);const n=t.index;return Ls().leaveOrganization(n)})),Xs(6," Organisation verlassen"),Rs(),Rs()}if(2&e){const e=t.$implicit,n=Ls();xi(2),eo(" ",n.getOrganizationTypeAsString(e.orga.type)," "),xi(2),to(" ",e.orga.name," (",e.orgaUser.name,") ")}}function ky(e,t){1&e&&(Ms(0,"button",40),Xs(1," Beitrittswunsch an ... senden "),Rs())}function xy(e,t){if(1&e){const e=Fs();Ms(0,"button",41),zs("click",(function(){return Gt(e),Ls(2).joinFoundOrganization()})),Xs(1),Rs()}if(2&e){const e=Ls(2);xi(1),eo(" Beitrittswunsch an <",e.foundOrgaDisplayname,"> senden ")}}function Uy(e,t){if(1&e){const e=Fs();Ms(0,"div",3),Ms(1,"div",29),Ms(2,"label",30),Ms(3,"input",31),zs("ngModelChange",(function(t){return Gt(e),Ls().showSearch=t})),Rs(),Ms(4,"span"),Xs(5),Rs(),Rs(),Rs(),Ms(6,"div",32),Ms(7,"div",9),Ms(8,"div",33),Ms(9,"input",34),zs("ngModelChange",(function(t){return Gt(e),Ls().searchOrgaByMail=t}))("keydown.enter",(function(){return Gt(e),Ls().searchOrganization()})),Rs(),Rs(),Ms(10,"div",35),Ms(11,"button",36),zs("click",(function(){return Gt(e),Ls().searchOrganization()})),Xs(12," Suche Organisation "),Rs(),Rs(),Rs(),Ms(13,"div",37),Ms(14,"div",29),As(15,ky,2,0,"button",38),As(16,xy,2,1,"button",39),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=Ls();xi(3),Ps("ngModel",e.showSearch),xi(2),Ys(e.showSearch?"<Beitrittswunsch an eine Organisation senden> ausblenden":"<Beitrittswunsch an eine Organisation senden> einblenden"),xi(1),Ps("hidden",!e.showSearch),xi(3),Ps("ngModel",e.searchOrgaByMail),xi(6),Ps("ngIf",void 0===e.foundOrganization),xi(1),Ps("ngIf",void 0!==e.foundOrganization)}}function Py(e,t){if(1&e&&(Ms(0,"option",42),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e.type),xi(1),eo(" ",e.text,"")}}const Ty=function(e){return{active:e}};let My=(()=>{class e{constructor(e,t,n,i,r){this.settingsService=e,this.principalService=t,this.tokenService=n,this.organizationService=i,this.notificationService=r,this.usersDisplayName="",this.orgas=[],this.allowJoiningOrgaByAccount=!0,this.searchOrgaByMail="",this.foundOrgaDisplayname="",this.mShowSearch=!1,this.mShowNewPart=!1}get showSearch(){return this.mShowSearch}set showSearch(e){this.mShowSearch=e,this.mShowSearch&&(this.mShowNewPart=!1)}get showNewPart(){return this.mShowNewPart}set showNewPart(e){this.mShowNewPart=e,this.mShowNewPart&&(this.mShowSearch=!1)}ngOnInit(){this.settingsService.setTitle("Organisations-Verwaltung"),this.principal=this.principalService.getAccount(),this.allowJoiningOrgaByAccount=this.settingsService.allowJoiningOrganizationByAccount(),this.usersDisplayName=this.principal.name,this.typeOptions=[{text:"Privat",type:Im.Privat},{text:"Unternehmen",type:Im.Unternehmen},{text:"Kanzlei",type:Im.Kanzlei}],this.initMembers()}initMembers(){return wc(this,void 0,void 0,(function*(){this.foundOrgaDisplayname="Bitte erst suchen...",this.foundOrganization=void 0,this.newOrganization={name:"",email:"",type:Im.Privat},this.newOrgaUserNewOrga={id:"",orgaId:"",accountId:this.principal.id,adminType:xu.SuperAdmin,name:this.principal.name},this.searchOrgaByMail="",this.orgas=yield this.organizationService.getAllOrgasAndUserForAccount(this.principal.id)}))}getOrganizationTypeAsString(e){return Im[e]}leaveOrganization(e){return wc(this,void 0,void 0,(function*(){const t=this.orgas[e].orgaUser,n=this.tokenService.getToken().orgaUser;let i=!1;((null==n?void 0:n.id)!==t.id||(i=confirm("Du verl\xe4sst die Organisation, in der du angemeldet bist.\nDu wirst damit umgemeldet! Ist das OK?"),i))&&(yield this.organizationService.removeOrgaUser(t.id),i&&this.tokenService.logoutFromOrganization(n.orgaId),yield this.initMembers())}))}_arrangeFoundDisplayname(){this.foundOrgaDisplayname="Bitte erst suchen...";const e=this.foundOrganization;e?this.organizationService.accountIsAlreadyMemberInOrga(e.id,this.principal.id)?(this.foundOrgaDisplayname="In "+e.name+" bist du schon Mitglied.",this.foundOrganization=void 0):this.foundOrgaDisplayname=e.name:this.foundOrgaDisplayname="Eine Organisation mit angegebener Mail-Addresse gibt es nicht."}searchOrganization(){return wc(this,void 0,void 0,(function*(){0!==this.searchOrgaByMail.trim().length&&(this.foundOrganization=yield this.organizationService.findOrgaByMail(this.searchOrgaByMail),this._arrangeFoundDisplayname())}))}joinFoundOrganization(){var e;return wc(this,void 0,void 0,(function*(){(null===(e=this.foundOrganization)||void 0===e?void 0:e.id)&&(yield this.organizationService.wishOfMembership(this.foundOrganization.id),yield this.initMembers())}))}createNewOrganization(){return wc(this,void 0,void 0,(function*(){(yield this.organizationService.createNewOrganization(this.newOrganization,this.newOrgaUserNewOrga))?yield this.initMembers():alert("Die Mail-Adresse ist bei Organisationen bereits vergeben, bitte w\xe4hlen sie eine andere.")}))}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(Pu),xs(ly),xs(Rm),xs(Um))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-orga-mgmt"]],decls:38,vars:18,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","container-form",4,"ngIf"],[1,"container-form"],["for","toggle-new"],["type","checkbox","id","toggle-new",3,"ngModel","ngModelChange"],[1,"row","mt-1",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["newOrgaForm","ngForm"],[1,"row","m-0"],[1,"input-field","col","s8","m6","l4"],["name","orgaTyp",1,"browser-default",3,"ngModel","ngModelChange"],["orgaTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["type","text","id","orgaName","name","orgaName","required","",1,"form-control",3,"ngModel","ngModelChange"],["orgaName","ngModel"],["for","orgaName"],["type","text","id","orgaMail","name","orgaMail","required","",1,"form-control",3,"ngModel","ngModelChange"],["orgaMail","ngModel"],["for","orgaMail",3,"ngClass"],[1,"row","mt-1"],["type","text","id","userName","name","userName","required","",1,"form-control",3,"ngModel","ngModelChange"],["userName","ngModel"],["for","userName",3,"ngClass"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-primary",3,"click"],[1,"col","s12"],["for","toggle-suche"],["type","checkbox","id","toggle-suche",3,"ngModel","ngModelChange"],[1,"col","s12",3,"hidden"],[1,"input-field","col","s6","m4"],["type","email","placeholder","via Mailadresse Organisation suchen...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s6","m4"],[1,"btn","btn-success",3,"click"],[1,"row","mb-2"],["type","button","class","btn btn-success disabled",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","disabled"],["type","button",1,"btn","btn-success",3,"click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ms(0,"p"),Xs(1),Rs(),Ms(2,"ul",0),As(3,Ay,7,3,"li",1),Rs(),As(4,Uy,17,6,"div",2),Ms(5,"div",3),Ms(6,"div"),Ms(7,"label",4),Ms(8,"input",5),zs("ngModelChange",(function(e){return t.showNewPart=e})),Rs(),Ms(9,"span"),Xs(10),Rs(),Rs(),Rs(),Ms(11,"div",6),Ms(12,"form",7,8),zs("ngSubmit",(function(){return t.createNewOrganization()})),Ms(14,"div",9),Ms(15,"div",10),Ms(16,"select",11,12),zs("ngModelChange",(function(e){return t.newOrganization.type=e})),As(18,Py,2,2,"option",13),Rs(),Rs(),Rs(),Ms(19,"div",9),Ms(20,"div",14),Ms(21,"input",15,16),zs("ngModelChange",(function(e){return t.newOrganization.name=e})),Rs(),Ms(23,"label",17),Xs(24,"Name der Organisation"),Rs(),Rs(),Ms(25,"div",14),Ms(26,"input",18,19),zs("ngModelChange",(function(e){return t.newOrganization.email=e})),Rs(),Ms(28,"label",20),Xs(29,"E-Mail der Organisation"),Rs(),Rs(),Rs(),Ms(30,"div",21),Ms(31,"div",14),Ms(32,"input",22,23),zs("ngModelChange",(function(e){return t.newOrgaUserNewOrga.name=e})),Rs(),Ms(34,"label",24),Xs(35,"Dein Mitarbeitername in der Organisation"),Rs(),Rs(),Rs(),Ms(36,"button",25),Xs(37,"Organisation anlegen"),Rs(),Rs(),Rs(),Rs()),2&e){const e=ks(13);xi(1),eo(" Hallo ",t.usersDisplayName,", in diesen Organisationen bist du Mitglied:"),xi(2),Ps("ngForOf",t.orgas),xi(1),Ps("ngIf",!0===t.allowJoiningOrgaByAccount),xi(4),Ps("ngModel",t.showNewPart),xi(2),Ys(t.showNewPart?"<Eine neue Organisation anlegen> ausblenden":"<Eine neue Organisation anlegen> einblenden"),xi(1),Ps("hidden",!t.showNewPart),xi(5),Ps("ngModel",t.newOrganization.type),xi(2),Ps("ngForOf",t.typeOptions),xi(3),Ps("ngModel",t.newOrganization.name),xi(5),Ps("ngModel",t.newOrganization.email),xi(2),Ps("ngClass",va(14,Ty,t.newOrganization.email)),xi(4),Ps("ngModel",t.newOrgaUserNewOrga.name),xi(2),Ps("ngClass",va(16,Ty,t.newOrgaUserNewOrga.name)),xi(2),Ps("disabled",!e.valid)}},directives:[sl,al,Du,qu,Wd,qd,Ku,zd,md,Bu,Zd,il,vd,_d],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:10rem}.list-item-text_left[_ngcontent-%COMP%]{width:30rem}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})();function Ry(e,t){if(1&e&&(Ms(0,"li"),Xs(1),Rs()),2&e){const e=t.$implicit;xi(1),eo(" ",e," ")}}let Ey=(()=>{class e{constructor(e){this.settingsService=e,this.requirements=[],this.redirectUri=""}ngOnInit(){this.settingsService.setTitle("Seite gesch\xfctzt..."),this.redirectUri=this.settingsService.getRedirectUri(),this.requirements=this.settingsService.getRequiredByGuardHelptext(!0).split("-")}}return e.\u0275fac=function(t){return new(t||e)(xs(ku))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-guard-fail"]],decls:12,vars:2,consts:[[2,"font-weight","bold"],[1,"bullet"],[4,"ngFor","ngForOf"],["routerLink","/iam/login",2,"font-size","larger"]],template:function(e,t){1&e&&(Ms(0,"h4"),Xs(1,"Die Seite, die du aufgerufen hast, ist gesch\xfctzt."),Rs(),Ms(2,"p"),Xs(3,"Folgende Seite hast du aufgerufen: "),Ms(4,"span",0),Xs(5),Rs(),Rs(),Ms(6,"h6"),Xs(7,"Du must folgende Bedingung(en) erf\xfcllen, um die Seite aufzurufen:"),Rs(),Ms(8,"ol",1),As(9,Ry,2,1,"li",2),Rs(),Ms(10,"a",3),Xs(11," Weiter zum Login...\n"),Rs()),2&e&&(xi(5),Ys(t.redirectUri),xi(4),Ps("ngForOf",t.requirements))},directives:[sl,Ip],styles:["ol.bullet[_ngcontent-%COMP%]{list-style-type:circle;margin-bottom:2em}"]}),e})();class Fy extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class Ny extends Fy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,i=void 0;try{this.work(e)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class Dy extends Ny{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let zy=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class Vy extends zy{constructor(e,t=zy.now){super(e,()=>Vy.delegate&&Vy.delegate!==this?Vy.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Vy.delegate&&Vy.delegate!==this?Vy.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class By extends Vy{}const Ly=new By(Dy);let jy=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return xc(this.value);case"E":return e=this.error,new w(t=>t.error(e));case"C":return Ih()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class Hy extends f{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Hy.dispatch,this.delay,new $y(e,this.destination)))}_next(e){this.scheduleMessage(jy.createNext(e))}_error(e){this.scheduleMessage(jy.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(jy.createComplete()),this.unsubscribe()}}class $y{constructor(e,t){this.notification=e,this.destination=t}}class Gy extends C{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new Wy(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let s;if(this.closed)throw new O;if(this.isStopped||this.hasError?s=d.EMPTY:(this.observers.push(e),s=new I(this,e)),i&&e.add(e=new Hy(e,i)),t)for(let o=0;o<r&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<r&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||Ly).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let s=0;for(;s<r&&!(e-i[s].time<n);)s++;return r>t&&(s=Math.max(s,r-t)),s>0&&i.splice(0,s),i}}class Wy{constructor(e,t){this.time=e,this.value=t}}var qy;class Ky{constructor(e){var t;this.lazyLoad=!1,this.providers=new Map,this._ready=new Gy,(t=e)&&(t instanceof w||"function"==typeof t.lift&&"function"==typeof t.subscribe)?e.pipe($h()).subscribe(e=>{this.initialize(e)}):this.initialize(e)}initialize(e){for(let t=0;t<e.length;t++){let n=e[t];this.providers.set(n.id,n.provider),this.lazyLoad=this.lazyLoad||n.lazyLoad}this._ready.next(),this._ready.complete()}}let Zy=(()=>{let e=qy=class{constructor(e){this._user=null,this._authState=new Gy(1),this._readyState=new vh([]),this.initialized=!1,e._ready.subscribe(()=>{this.providers=e.providers,e.lazyLoad||this.initialize()})}get authState(){return this._authState.asObservable()}get readyState(){return this._readyState.asObservable()}initialize(){this.initialized=!0,this.providers.forEach((e,t)=>{e.initialize().then(()=>{let n=this._readyState.getValue();n.push(t),this._readyState.next(n),e.getLoginStatus().then(e=>{e.provider=t,this._user=e,this._authState.next(e)}).catch(e=>{this._authState.next(null)})})})}signIn(e,t){return this.initialized||this.initialize(),new Promise((n,i)=>{let r=this.providers.get(e);r?r.signIn(t).then(t=>{t.provider=e,n(t),this._user=t,this._authState.next(t)}).catch(e=>{i(e)}):i(qy.ERR_LOGIN_PROVIDER_NOT_FOUND)})}signOut(e=!1){return this.initialized||this.initialize(),new Promise((t,n)=>{if(this._user){let i=this.providers.get(this._user.provider);i?i.signOut(e).then(()=>{t(),this._user=null,this._authState.next(null)}).catch(e=>{n(e)}):n(qy.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(qy.ERR_NOT_LOGGED_IN)})}};return e.\u0275fac=function(t){return new(t||e)(Ke(Ky))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",e.ERR_NOT_LOGGED_IN="Not logged in",e})();var Jy;let Qy=(()=>{let e=Jy=class{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:Jy,providers:[Zy,{provide:Ky,useValue:e}]}}};return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(Ke(e,12))},providers:[Zy],imports:[[ul]]}),e})();class Xy{}let Yy=(()=>{class e extends class{constructor(){this._readyState=new vh(!1)}onReady(){return new Promise((e,t)=>{this._readyState.subscribe(t=>{t&&e()})})}loadScript(e,t,n,i=!0,r=""){if("undefined"!=typeof document&&!document.getElementById(e)){let e=document.createElement("script");e.async=i,e.src=t,e.onload=n,document.head.appendChild(e)}}}{constructor(e,t={scope:"email"}){super(),this.clientId=e,this.opt=t}initialize(){return new Promise((t,n)=>{this.loadScript(e.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.opt),{client_id:this.clientId})),this.auth2.then(()=>{this._readyState.next(!0),t()}).catch(e=>{n(e)})})})})}getLoginStatus(){return new Promise((e,t)=>{this.onReady().then(()=>{if(this.auth2.isSignedIn.get()){let t=new Xy,n=this.auth2.currentUser.get().getBasicProfile(),i=this.auth2.currentUser.get().getAuthResponse(!0).access_token,r=this.auth2.currentUser.get().getAuthResponse(!0).id_token;t.id=n.getId(),t.name=n.getName(),t.email=n.getEmail(),t.photoUrl=n.getImageUrl(),t.firstName=n.getGivenName(),t.lastName=n.getFamilyName(),t.authToken=i,t.idToken=r,e(t)}else t("No user is currently logged in.")})})}signIn(e){return new Promise((t,n)=>{this.onReady().then(()=>{(e&&e.offline_access||this.opt&&this.opt.offline_access?this.auth2.grantOfflineAccess(e):this.auth2.signIn(e)).then(e=>{let n=new Xy,i=this.auth2.currentUser.get().getBasicProfile(),r=this.auth2.currentUser.get().getAuthResponse(!0).access_token,s=this.auth2.currentUser.get().getAuthResponse(!0).id_token;n.id=i.getId(),n.name=i.getName(),n.email=i.getEmail(),n.photoUrl=i.getImageUrl(),n.firstName=i.getGivenName(),n.lastName=i.getFamilyName(),n.authToken=r,n.idToken=s,e&&e.code&&(n.authorizationCode=e.code),t(n)},e=>{n("User cancelled login or did not fully authorize.")}).catch(e=>{n(e)})})})}signOut(e){return new Promise((t,n)=>{this.onReady().then(()=>{let i;i=e?this.auth2.disconnect():this.auth2.signOut(),i.then(e=>{e?n(e):t()}).catch(e=>{n(e)})})})}}return e.PROVIDER_ID="GOOGLE",e})();function eb(e,t){if(1&e){const e=Fs();Ms(0,"button",22),zs("click",(function(){Gt(e);const t=Ls().index;return Ls().removeCredential(t)})),Xs(1," L\xf6schen"),Rs()}2&e&&Ps("disabled",Ls().$implicit.type>9)}function tb(e,t){if(1&e&&(Ms(0,"li"),Ms(1,"span",19),Xs(2),Rs(),Ms(3,"span",20),Xs(4),Rs(),As(5,eb,2,1,"button",21),Rs()),2&e){const e=t.index,n=Ls();xi(2),eo(" ",n.getCredentialTypeAsString(e)," "),xi(2),eo(" ",n.getCredentialDescription(e)," "),xi(1),Ps("ngIf",1!==n.credentials.length)}}function nb(e,t){if(1&e&&(Ms(0,"option",23),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e.type),xi(1),eo(" ",e.text,"")}}let ib=(()=>{class e{constructor(e,t,n,i){this.settingsService=e,this.principalService=t,this.credentialService=n,this.authService=i,this.usersDisplayName="",this.credentials=[],this.newCredential={type:wm.Benutzerkonto}}ngOnInit(){this.settingsService.setTitle("Zugangsmedien-Verwaltung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this.enumOptions=[{text:"Benutzerkonto",type:wm.Benutzerkonto},{text:"Benutzerkonto mit Sms-Tan",type:wm.SmsTan},{text:"SmartCard",type:wm.SmartCard},{text:"SmartLogin",type:wm.SmartLogin}],this._initMembers()}_initMembers(){return wc(this,void 0,void 0,(function*(){this.credentials=yield this.credentialService.getAllCredentialsForUser(this.principal.id),this.newCredential={accountId:this.principal.id,type:wm.Benutzerkonto,kennung:"",secret:""}}))}getCredentialTypeAsString(e){return wm[this.credentials[e].type]}getCredentialDescription(e){const t=this.credentials[e];let n="";return _m(t.type)&&t.orgaId&&(n=" ("+t.orgaId+")"),t.type===wm.SocialLogin?t.provider+"-ID: "+t.userIdFromProvider:t.kennung+n}removeCredential(e){return wc(this,void 0,void 0,(function*(){yield this.credentialService.removeCredential(this.credentials[e].id),this._initMembers()}))}addNewCredential(){return wc(this,void 0,void 0,(function*(){(yield this.credentialService.addNewCredential(this.newCredential))?this._initMembers():alert("Das Anlegen des Zugangsmediums hat nicht geklappt...")}))}linkWithGoogleLogin(){this.authService.signIn(Yy.PROVIDER_ID).then(e=>{e?(console.log("provider: "+e.provider),console.log("id: "+e.id),this.newCredential.type=wm.SocialLogin,this.newCredential.kennung="",this.newCredential.secret="",this.newCredential.provider="google",this.newCredential.userIdFromProvider=e.id,this.addNewCredential()):(alert("Google-Login hat nicht geklappt."),console.log("Google-Login hat nicht geklappt."))}).catch(e=>alert("Google-Login hat nicht geklappt: "+e))}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(Pu),xs(nv),xs(Zy))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-creds-mgmt"]],decls:31,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["registrationForm","ngForm"],[1,"input-field","col","s4"],["name","credTyp",1,"browser-default",3,"ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],["for","kennung"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","secret"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"list-item-text-left"],[1,"list-item-text"],["class","btn-danger",3,"disabled","click",4,"ngIf"],[1,"btn-danger",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ms(0,"h6"),Xs(1),Rs(),Ms(2,"ul",0),As(3,tb,6,3,"li",1),Rs(),Es(4,"hr",2),Ms(5,"div",3),Ms(6,"h6"),Xs(7,'Hier kannst du neue Zugangsmedien "bestellen".'),Rs(),Ms(8,"form",4,5),zs("ngSubmit",(function(){return t.addNewCredential()})),Ms(10,"div",3),Ms(11,"div",6),Ms(12,"select",7,8),zs("ngModelChange",(function(e){return t.newCredential.type=e})),As(14,nb,2,2,"option",9),Rs(),Rs(),Rs(),Ms(15,"div",3),Ms(16,"div",10),Ms(17,"input",11,12),zs("ngModelChange",(function(e){return t.newCredential.kennung=e})),Rs(),Ms(19,"label",13),Xs(20,"Kennung (Mussfeld, darf noch nicht existieren)"),Rs(),Rs(),Ms(21,"div",10),Ms(22,"input",14,15),zs("ngModelChange",(function(e){return t.newCredential.secret=e})),Rs(),Ms(24,"label",16),Xs(25,"Passwort (Mussfeld)"),Rs(),Rs(),Rs(),Ms(26,"div",3),Ms(27,"button",17),Xs(28,"Hinzuf\xfcgen"),Rs(),Ms(29,"button",18),zs("click",(function(){return t.linkWithGoogleLogin()})),Xs(30,"mit Google-Login verkn\xfcpfen"),Rs(),Rs(),Rs(),Rs()),2&e){const e=ks(9);xi(1),eo(" Hallo ",t.usersDisplayName,", das sind deine Zugangsmedien:"),xi(2),Ps("ngForOf",t.credentials),xi(9),Ps("ngModel",t.newCredential.type),xi(2),Ps("ngForOf",t.enumOptions),xi(3),Ps("ngModel",t.newCredential.kennung),xi(5),Ps("ngModel",t.newCredential.secret),xi(5),Ps("disabled",!e.valid)}},directives:[sl,qd,Ku,zd,md,qu,Wd,Bu,Zd,eh,al,vd,_d],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:15em}.row[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),e})();const rb=function(){return["/fakes/mail-view"]};function sb(e,t){1&e&&(Ms(0,"div"),Ms(1,"p"),Xs(2,"Um die Registrierung abzuschlie\xdfen, must du deine Email-Adresse noch verifizieren."),Rs(),Es(3,"p"),Ms(4,"a",1),Xs(5," Dazu haben wir dir eine E-Mail mit den notwendigen Informationen gesendet. "),Rs(),Ms(6,"p",2),Xs(7,"Per Link funktioniert das nur im Prototyp. In Wirklichkeit muss er seine Mails checken..."),Rs(),Rs()),2&e&&(xi(4),Ps("routerLink",ma(1,rb)))}function ob(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"ul",3),Ms(2,"li"),Xs(3,"dein Authentifizierungslevel ist: "),Ms(4,"span",4),Xs(5),Rs(),Rs(),Rs(),Es(6,"br"),Ms(7,"p"),Xs(8,"Du kannst nun auch entsprechend gesch\xfctzte Seiten aufrufen..."),Rs(),Rs()),2&e){const e=Ls();xi(5),Ys(e.authLevel)}}function ab(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"a",1),Xs(2,"Weiter zum eigentlichen Ziel (redirect)"),Rs(),Rs()),2&e){const e=Ls();xi(1),Ps("routerLink",e.redirectUri)}}const cb=function(){return["/iam/login"]};function lb(e,t){1&e&&(Ms(0,"div"),Ms(1,"p"),Xs(2,"Du hast dich zwar erfolgreich registriert, musst dich aber nach der Registrierung erst anmelden..."),Rs(),Ms(3,"a",1),Xs(4,"Direkt zum Login..."),Rs(),Rs()),2&e&&(xi(3),Ps("routerLink",ma(1,cb)))}let ub=(()=>{class e{constructor(e,t){this.principalService=e,this.settingsService=t,this.usersDisplayname="",this.action="angemeldet",this.authLevel="",this.redirectUri="",this.alreadyLoggedIn=!1,this.showVerificationNeeded=!1,this.showLinkToLoginPage=!1}ngOnInit(){if(this.alreadyLoggedIn=this.principalService.isLoggedIn(),window&&window.history&&window.history.state){const{actionDone:e}=window.history.state,t=e;(null==t?void 0:t.toLowerCase().includes("regist"))&&(this.action="registriert",this.settingsService.setTitle("Erfolgreich registriert..."),this.showVerificationNeeded=this.settingsService.registeredAccountMustBeVerifiedByMail())}this.redirectUri=this.settingsService.getRedirectUri(),this.alreadyLoggedIn?(this.usersDisplayname=this.principalService.getUsersDisplayName(),this.authLevel=this.principalService.getAuthLevelAsString(),this.settingsService.setTitle("Erfolgreich angemeldet...")):this.showVerificationNeeded?this.redirectUri="":this.settingsService.afterRegistrationLoginIsRequired()?this.showLinkToLoginPage=!0:this.redirectUri||(this.showLinkToLoginPage=!0)}}return e.\u0275fac=function(t){return new(t||e)(xs(Pu),xs(ku))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-successful-registration"]],decls:11,vars:6,consts:[[4,"ngIf"],[2,"font-size","larger",3,"routerLink"],[2,"font-size","smaller"],[1,"browser-default"],[2,"font-weight","bold"]],template:function(e,t){1&e&&(Ms(0,"h4"),Xs(1),Rs(),Ms(2,"h5"),Xs(3,"Herzlich willkommen in unserem \xd6kosystem."),Rs(),Es(4,"br"),Ms(5,"h6"),Xs(6),Rs(),As(7,sb,8,2,"div",0),As(8,ob,9,1,"div",0),As(9,ab,3,1,"div",0),As(10,lb,5,2,"div",0)),2&e&&(xi(1),eo("Hallo ",t.usersDisplayname,""),xi(5),eo("Du hast dich erfolgreich ",t.action,"."),xi(1),Ps("ngIf",t.showVerificationNeeded),xi(1),Ps("ngIf",t.alreadyLoggedIn),xi(1),Ps("ngIf",t.redirectUri),xi(1),Ps("ngIf",t.showLinkToLoginPage))},directives:[al,Ip],styles:[""]}),e})();function db(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"h5",3),Xs(2),Rs(),Rs()),2&e){const e=Ls();xi(2),eo(" Hallo ",e.displayName,", herzlich willkommen auf unserer Plattform.")}}function hb(e,t){1&e&&(Ms(0,"div"),Ms(1,"h5",3),Xs(2," Herzlich willkommen auf unserer Plattform."),Rs(),Rs())}function gb(e,t){if(1&e&&(Ms(0,"span",6),Xs(1),Rs()),2&e){const e=Ls().$implicit;xi(1),Ys(e.newBadgeCount)}}function fb(e,t){if(1&e){const e=Fs();Ms(0,"li"),Ms(1,"a",4),zs("click",(function(){Gt(e);const n=t.$implicit;return Ls().onClick(n.text)})),Xs(2),As(3,gb,2,1,"span",5),Rs(),Rs()}if(2&e){const e=t.$implicit;xi(1),Ps("routerLink",e.link),xi(1),eo(" ",e.text," "),xi(1),Ps("ngIf",e.newBadgeCount>0)}}let pb=(()=>{class e{constructor(e,t,n,i,r,s){this.settingsService=e,this.principalService=t,this.tokenService=n,this.taskService=i,this.eventService=r,this.router=s,this.isActive=!0,this.loggedIn=!1,this.displayName="",this.availableLinks=[]}ngOnInit(){this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(sm(()=>this.isActive)).subscribe(e=>this.initMembers(e)),this.initMembers()}ngOnDestroy(){this.isActive=!1}initMembers(e){return wc(this,void 0,void 0,(function*(){if(null==e?void 0:e.titleOnly)return;const t=yield this.taskService.mailsAvailable();this.loggedIn=this.principalService.isLoggedIn(),this.displayName=this.principalService.getUsersDisplayName(),this.availableLinks=[],this.availableLinks.push({text:"Du meldest dich an",link:"/iam/login"},{text:"Du meldest dich mittels externem IdP an",link:"/marketplace"}),this.principalService.isLoggedIn()?this.availableLinks.push({text:"Du meldest dich ab",link:""}):this.availableLinks.push({text:"Du registrierst dich",link:"/iam/register"}),this.availableLinks.push({text:"Du willst alles \xfcber dich wissen",link:"/iam/user-info"},{text:"Du verwaltest deinen Account",link:"/iam/account-management"},{text:"Du l\xe4sst dich identifizieren a la Video-Ident...",link:"/iam/identification-management"},{text:"Du l\xe4sst deine Organisation identifizieren...",link:"/iam/organization-identification-management"},{text:"Du verwaltest deine Zugangsmedien",link:"/iam/credentials-management"},{text:"Du verwaltest deine Mitgliedschaften bei Organisationen",link:"/iam/organization-management"},{text:"Du verwaltest die Benutzer deiner Organisation (incl. Admin-Rolle)",link:"/iam/organization-administration"},{text:"Du verwaltest Unterstrukturen deiner Organisation",link:"/iam/suborga-management"},{text:"Du best\xfcckst Unterstrukturen mit Benutzern und Ressourcen",link:"/iam/suborga-administration"},{text:"Du administrierst zentral die Berechtigungen deiner User",link:"/iam/central-administration"},{text:"Du vertickst eine Unterstruktur (Pseudo-MGV)",link:"/iam/pseudo-mgv"}),this.availableLinks.push({text:"Du nutzt die Belegverwaltung",link:"/folderApp/main"},{text:"Du administrierst einzelne Ordner",link:"/folderApp/admin"},{text:"Du verwaltest Lizenzen zu den Produkten",link:"/products-main"},{text:"Fibu als Beispielprodukt ohne vorherige Pr\xfcfung via Guard",link:"/generic-product/fibu"},{text:"Bilanz als Beispielprodukt mit Lizenz- und damit Loginpr\xfcfung im Guard",link:"/generic-product/bilanz"},{text:"Gehe zum Marktplatz als allgemeine Einstiegsseite",link:"/marketplace"}),t&&this.availableLinks.push({text:"Es sind Mails vorhanden",link:"/fakes/mail-view",newBadgeCount:this.taskService.getNumberOfMails()})}))}onClick(e){e.includes("meldest dich ab")?this.logout():e.includes("IdP")&&this.router.navigateByUrl("tokenapp")}logout(){this.tokenService.logout()}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(Pu),xs(ly),xs(km),xs(Su),xs(Op))},e.\u0275cmp=dt({type:e,selectors:[["app-oes-main"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],["data-test-id","main-greeting"],[3,"routerLink","click"],["class","new badge red","data-badge-caption","",4,"ngIf"],["data-badge-caption","",1,"new","badge","red"]],template:function(e,t){1&e&&(As(0,db,3,1,"div",0),As(1,hb,3,0,"div",0),Ms(2,"h6"),Xs(3,"Du hast folgende M\xf6glichkeiten:"),Rs(),Ms(4,"ul",1),As(5,fb,4,3,"li",2),Rs()),2&e&&(Ps("ngIf",t.loggedIn),xi(1),Ps("ngIf",!t.loggedIn),xi(4),Ps("ngForOf",t.availableLinks))},directives:[al,sl,Ip],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:40em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:red}.verweise[_ngcontent-%COMP%]   .knubbel[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:2.2em;min-width:16px;text-align:rigth;margin-right:.8em;border-radius:4px 0 0 4px}.badge[_ngcontent-%COMP%]{margin-right:.5em}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}"]}),e})(),mb=(()=>{class e{constructor(e,t,n,i,r){this.loginService=e,this.router=t,this.settingsService=n,this.taskService=i,this.authService=r}ngOnInit(){this.settingsService.setTitle("Anmeldung"),this.initMembers()}ngOnDestroy(){this.settingsService.resetRedirectUri()}initMembers(){this.credential={kennung:"",secret:""}}clearForm(){this.initMembers()}loginWithGoogle(){return wc(this,void 0,void 0,(function*(){this.authService.signIn(Yy.PROVIDER_ID).then(e=>wc(this,void 0,void 0,(function*(){if(e){console.log("provider: "+e.provider),console.log("id: "+e.id);const t={accountId:"",type:wm.SocialLogin,kennung:"",secret:"",provider:"google",userIdFromProvider:e.id},n=yield this.loginService.login(t);return this._onLogin(n)}alert("not logged in..."),console.log("not logged in...")}))).catch(e=>alert("Sociallogin failed: "+e))}))}_fakeLoginSecretWithFakeMailId(){const e=this.taskService.getTaskInProgress();return this.taskService.resetTaskInProgress(),null==e?void 0:e.id}_orgaSelectionNeeded(e){return!!e.availableOrgas&&e.availableOrgas.length>1}onLogin(){return wc(this,void 0,void 0,(function*(){let e;const t=this._fakeLoginSecretWithFakeMailId();try{e=yield this.loginService.login(this.credential,t)}catch(n){return void alert("Das Anmelden hat nicht geklappt: "+n)}e&&e.authType!==Ac.None?(this.loginService.logout(),this._orgaSelectionNeeded(e)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(e),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri()))):alert("Das Anmelden hat nicht geklappt...")}))}_onLogin(e){e&&e.authType!==Ac.None?(this.loginService.logout(),this._orgaSelectionNeeded(e)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(e),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri()))):alert("Das Anmelden hat nicht geklappt...")}}return e.\u0275fac=function(t){return new(t||e)(xs(ly),xs(Op),xs(ku),xs(km),xs(Zy))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-login"]],decls:21,vars:3,consts:[[1,"mt-3",3,"ngSubmit"],["loginForm","ngForm"],[1,"input-field"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],["for","kennung"],[1,"input-field","mb-1"],["type","password","id","secret","name","secret",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","secret"],["type","button",1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"mt-2"],["routerLink","/iam/register"]],template:function(e,t){if(1&e&&(Ms(0,"form",0,1),zs("ngSubmit",(function(){return t.onLogin()})),Ms(2,"div",2),Ms(3,"input",3,4),zs("ngModelChange",(function(e){return t.credential.kennung=e})),Rs(),Ms(5,"label",5),Xs(6,"Kennung"),Rs(),Rs(),Ms(7,"div",6),Ms(8,"input",7,8),zs("ngModelChange",(function(e){return t.credential.secret=e})),Rs(),Ms(10,"label",9),Xs(11,"Passwort"),Rs(),Rs(),Ms(12,"button",10),zs("click",(function(){return t.clearForm()})),Xs(13,"Zur\xfccksetzen"),Rs(),Ms(14,"button",11),Xs(15,"Anmelden"),Rs(),Ms(16,"button",12),zs("click",(function(){return t.loginWithGoogle()})),Xs(17,"Anmelden mit Google"),Rs(),Ms(18,"h6",13),Ms(19,"a",14),Xs(20," Neu bei uns? Ab zur Registrierung... "),Rs(),Rs(),Rs()),2&e){const e=ks(1);xi(3),Ps("ngModel",t.credential.kennung),xi(5),Ps("ngModel",t.credential.secret),xi(6),Ps("disabled",!e.valid)}},directives:[qd,Ku,zd,Bu,Zd,eh,qu,Wd,Ip],styles:["form[_ngcontent-%COMP%]{max-width:600px}"]}),e})();function vb(e,t){if(1&e){const e=Fs();Ms(0,"div",2),Ms(1,"input",17,18),zs("ngModelChange",(function(t){return Gt(e),Ls().credential.secret=t})),Rs(),Ms(3,"label",19),Xs(4,"Passwort"),Rs(),Rs()}if(2&e){const e=Ls();xi(1),Ps("ngModel",e.credential.secret)}}function yb(e,t){if(1&e){const e=Fs();Ms(0,"div",2),Ms(1,"input",20,21),zs("ngModelChange",(function(t){return Gt(e),Ls().credential.userIdFromProvider=t})),Rs(),Ms(3,"label",22),Xs(4,"User-ID vom Provider"),Rs(),Rs()}if(2&e){const e=Ls();xi(1),Ps("ngModel",e.credential.userIdFromProvider)("disabled",!0)}}function bb(e,t){1&e&&(Ms(0,"button",23),Xs(1,"Registrieren"),Rs()),2&e&&(Ls(),Ps("disabled",!ks(1).valid))}function wb(e,t){if(1&e){const e=Fs();Ms(0,"button",24),zs("click",(function(){return Gt(e),Ls().startRegistrationWithGoogle()})),Xs(1,"Registrieren mit Google"),Rs()}}function _b(e,t){if(1&e){const e=Fs();Ms(0,"button",24),zs("click",(function(){return Gt(e),Ls().finishRegistrationWithGoogle()})),Xs(1,"Registrieren mit Google abschlie\xdfen"),Rs()}}let Ob=(()=>{class e{constructor(e,t,n,i,r){this.registerService=e,this.router=t,this.settingsService=n,this.authService=i,this.taskService=r,this.registrationSuccessful=!0,this.errorFromBackend="",this.registrationViaGoogle=!1}ngOnInit(){this.initMembers(),this.settingsService.setTitle("Registrierung")}initMembers(){this.account={name:"",email:""},this.credential={kennung:"",secret:"",type:wm.Benutzerkonto},this.registrationSuccessful=!0,this.errorFromBackend="",this.registrationViaGoogle=!1}clearForm(){this.initMembers()}startRegistrationWithGoogle(){this.authService.signIn(Yy.PROVIDER_ID).then(e=>{e?(console.log("provider: "+e.provider),console.log("id: "+e.id),this.registrationViaGoogle=!0,this.account={name:e.name,email:e.email},this.credential={kennung:"",secret:"",provider:"google",userIdFromProvider:e.id,type:wm.SocialLogin}):(alert("Registration via Google-Login nicht erfolgreich!"),console.log("not registered with google"))}).catch(e=>alert("SocialRegistration failed: "+e))}finishRegistrationWithGoogle(){return wc(this,void 0,void 0,(function*(){(yield this.registerService.register(this.account,this.credential))?this._finishRegistration():this._handleRegistrationFailure()}))}_fakeLoginSecretWithFakeMailId(){const e=this.taskService.getTaskInProgress();return this.taskService.resetTaskInProgress(),null==e?void 0:e.id}register(){return wc(this,void 0,void 0,(function*(){this.credential.kennung=this.account.email;const e=this._fakeLoginSecretWithFakeMailId();try{(yield this.registerService.register(this.account,this.credential,e))?this._finishRegistration():this._handleRegistrationFailure()}catch(t){this._handleRegistrationFailure(t)}}))}_handleRegistrationFailure(e){alert("Das Registrieren hat nicht geklappt... "+e),this.registrationViaGoogle?this.errorFromBackend="Dieser Google-Account wird schon verwendet.":(this.errorFromBackend="Die Email-Adresse muss eindeutig sein.",e&&(this.errorFromBackend=e)),this.registrationSuccessful=!1}_finishRegistration(){this.settingsService.registeredAccountMustBeVerifiedByMail()||this.settingsService.showInfoPageAfterRegistration()?this.router.navigateByUrl("/iam/registration-successful",{state:{actionDone:"Registration"}}):this.settingsService.afterRegistrationLoginIsRequired()?this.router.navigateByUrl("/iam/login"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}}return e.\u0275fac=function(t){return new(t||e)(xs(ly),xs(Op),xs(ku),xs(Zy),xs(km))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-register"]],decls:26,vars:9,consts:[[1,"mt-3",3,"ngSubmit"],["registrationForm","ngForm"],[1,"input-field"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","name"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email"],["class","input-field",4,"ngIf"],[1,"alert","alert-danger",3,"hidden"],[1,"mb-1"],["id","id-btn-clear-form","type","button",1,"btn","btn-default",3,"click"],["id","id-btn-register","type","submit","class","btn btn-success mr-3",3,"disabled",4,"ngIf"],["type","button","class","btn btn-google",3,"click",4,"ngIf"],[1,"mt-2"],["routerLink","/iam/login"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","secret"],["id","providersUserId","name","providersUserId","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["providersUserId","ngModel"],["for","providersUserId"],["id","id-btn-register","type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"]],template:function(e,t){1&e&&(Ms(0,"form",0,1),zs("ngSubmit",(function(){return t.register()})),Ms(2,"div",2),Ms(3,"input",3,4),zs("ngModelChange",(function(e){return t.account.name=e})),Rs(),Ms(5,"label",5),Xs(6,"Wie m\xf6chtest du angesprochen werden? (mind. 3 Zeichen)"),Rs(),Rs(),Ms(7,"div",2),Ms(8,"input",6,7),zs("ngModelChange",(function(e){return t.account.email=e})),Rs(),Ms(10,"label",8),Xs(11,"Email (Anmeldename)"),Rs(),Rs(),As(12,vb,5,1,"div",9),As(13,yb,5,2,"div",9),Ms(14,"div",10),Ms(15,"p"),Xs(16),Rs(),Rs(),Es(17,"div",11),Ms(18,"button",12),zs("click",(function(){return t.clearForm()})),Xs(19,"Zur\xfccksetzen"),Rs(),As(20,bb,2,1,"button",13),As(21,wb,2,0,"button",14),As(22,_b,2,0,"button",14),Ms(23,"h6",15),Ms(24,"a",16),Xs(25," Du bist bereits registriert? Ab zum Login... "),Rs(),Rs(),Rs()),2&e&&(xi(3),Ps("ngModel",t.account.name),xi(5),Ps("ngModel",t.account.email),xi(4),Ps("ngIf",!t.registrationViaGoogle),xi(1),Ps("ngIf",t.registrationViaGoogle),xi(1),Ps("hidden",t.registrationSuccessful),xi(2),eo("Fehlermeldung vom Server: ",t.errorFromBackend,""),xi(4),Ps("ngIf",!t.registrationViaGoogle),xi(1),Ps("ngIf",!t.registrationViaGoogle),xi(1),Ps("ngIf",t.registrationViaGoogle))},directives:[qd,Ku,zd,Bu,Zd,Qd,eh,qu,Wd,al,Ip],styles:["form[_ngcontent-%COMP%]{max-width:600px}"]}),e})(),Ib=(()=>{class e{constructor(e){this.settingsService=e}ngOnInit(){this.settingsService.setTitle("Information - Page not found")}}return e.\u0275fac=function(t){return new(t||e)(xs(ku))},e.\u0275cmp=dt({type:e,selectors:[["app-page-not-found"]],decls:4,vars:0,template:function(e,t){1&e&&(Ms(0,"h2"),Xs(1,"Hoppla, da hast du dich wohl verirrt."),Rs(),Ms(2,"h3"),Xs(3,"Die Seite, die du aufgerufen hast, gibt es nicht."),Rs())},styles:[""]}),e})();function Sb(e,t){if(1&e){const e=Fs();Ms(0,"li"),Ms(1,"div",3),Ms(2,"button",4),zs("click",(function(){Gt(e);const n=t.index;return Ls().selectOrga(n)})),Xs(3),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit;xi(3),eo("Anmelden f\xfcr Organisation: ",e.name,"")}}let Cb=(()=>{class e{constructor(e,t,n){this.loginService=e,this.router=t,this.settingsService=n,this.accountName="",this.orgas=[]}ngOnInit(){this.settingsService.setTitle("Organisationsauswahl"),this.initMembers()}initMembers(){var e,t,n,i,r;this.token=this.loginService.getTempToken(),this.accountName=null!==(n=null===(t=null===(e=this.token)||void 0===e?void 0:e.account)||void 0===t?void 0:t.name)&&void 0!==n?n:"",null===(r=null===(i=this.token)||void 0===i?void 0:i.availableOrgas)||void 0===r||r.forEach(e=>this.orgas.push(e))}selectOrga(e){return wc(this,void 0,void 0,(function*(){yield this.loginService.loginWithOrganization(this.orgas[e].id),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}))}cancelLogin(){this.loginService.logout(),this.settingsService.resetRedirectUri(),this.router.navigateByUrl("")}loginWithAccountOnly(){this.loginService.loginWithAccountOnly(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}}return e.\u0275fac=function(t){return new(t||e)(xs(ly),xs(Op),xs(ku))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-select-orga"]],decls:11,vars:2,consts:[[4,"ngFor","ngForOf"],["type","button",1,"btn","btn2","additionalButton",3,"click"],["type","button",1,"btn","cancelButton",3,"click"],[2,"display","flex"],["type","button",1,"btn","btn2",3,"click"]],template:function(e,t){1&e&&(Ms(0,"h5"),Xs(1),Rs(),Ms(2,"h6"),Xs(3,"W\xe4hle bitte die gew\xfcnschte Organisation aus:"),Rs(),Ms(4,"ul"),As(5,Sb,4,1,"li",0),Rs(),Ms(6,"button",1),zs("click",(function(){return t.loginWithAccountOnly()})),Xs(7,"Ohne Organisation anmelden"),Rs(),Es(8,"br"),Ms(9,"button",2),zs("click",(function(){return t.cancelLogin()})),Xs(10,"Anmelden abbrechen"),Rs()),2&e&&(xi(1),eo("Hallo ",t.accountName,", du bist in mehreren Organisationen Mitglied."),xi(4),Ps("ngForOf",t.orgas))},directives:[sl],styles:[".btn2[_ngcontent-%COMP%]{margin-top:.5em;width:40em;text-align:left}.additionalButton[_ngcontent-%COMP%]{margin-top:-.5em}.cancelButton[_ngcontent-%COMP%]{margin-top:3em;background-color:#f08080}"]}),e})(),Ab=(()=>{class e{constructor(e,t,n,i){this.router=e,this.principalService=t,this.licenceService=n,this.settingsService=i}_addText(e,t){return e.length>0?e+="- "+t:e=t,e}canActivate(e,t){var n;let i=!0,r="";this.settingsService.setRedirectUri(t.url),this.principalService.isLoggedIn()||(i=!1,r=this._addText(r,"Du must angemeldet sein "));const s=e.data.requiredAuthLevel;var o,a;o=s,a=this.principalService.getAuthLevel(),!o||a&&(o===Uu.Low||(o===Uu.Medium?a!==Uu.Low:o===Uu.Secure&&a===Uu.Secure||a===Uu.HighSecure))||(i=!1,r=this._addText(r,"mindestens mit Level: "+Uu[s]));const c=e.data.requiredAuthType;if(kc(c,this.principalService.getAuthType())||(i=!1,r=this._addText(r,"mindestens mit Typ: "+Ac[c])),null!==(n=e.data.checkLicenceInGuard)&&void 0!==n&&n){let t=this.principalService.getOrgaUser(),n=e.data.dataProductId;t&&+t.id>0&&n?this.licenceService.checkLicence(n,t.id)||(i=!1,r=this._addText(r,"Benutzer <"+t.name+"> hat keine Lizenz f\xfcr Produkt mit Id: "+n)):(i=!1,r=this._addText(r,"f\xfcr eine Lizenzpr\xfcfung muss man in einer Organisation angemeldet sein."))}return i?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(r),this.settingsService.showInfoPageAfterGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}return e.\u0275fac=function(t){return new(t||e)(Ke(Op),Ke(Pu),Ke(Zp),Ke(ku))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function kb(e,t){if(1&e){const e=Fs();Ms(0,"button",43),zs("click",(function(){Gt(e);const t=Ls().index;return Ls().removeUserFromOrga(t)})),Xs(1," Dich aus Organisation entfernen"),Rs()}}function xb(e,t){if(1&e){const e=Fs();Ms(0,"button",44),zs("click",(function(){Gt(e);const t=Ls().index;return Ls().removeUserFromOrga(t)})),Xs(1," Benutzer aus Organisation entfernen"),Rs()}if(2&e){const e=Ls().$implicit;Ps("disabled",!Ls().deletionOfUserAllowed(e))}}const Ub=function(e){return{"foreign-user":e}};function Pb(e,t){if(1&e){const e=Fs();Ms(0,"li",35),Ms(1,"div",36),zs("click",(function(){Gt(e);const n=t.index;return Ls().enterEditMode(n)})),Ms(2,"span",37),Xs(3),Rs(),Rs(),Ms(4,"div",36),zs("click",(function(){Gt(e);const n=t.index;return Ls().enterEditMode(n)})),Ms(5,"span",38),Xs(6),Rs(),Rs(),Ms(7,"div",36),zs("click",(function(){Gt(e);const n=t.index;return Ls().enterEditMode(n)})),Ms(8,"span",39),Xs(9),Rs(),Rs(),Ms(10,"div",40),As(11,kb,2,0,"button",41),As(12,xb,2,1,"button",42),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,i=Ls();Ps("ngClass",va(6,Ub,i.isForeign(e))),xi(3),eo(" ",i.getUserIdAndAdminTypeAsString(n),"\xa0 "),xi(3),eo(" ",e.status," "),xi(3),eo(" ",e.name," "),xi(2),Ps("ngIf",e.id===i.principal.id),xi(1),Ps("ngIf",e.id!==i.principal.id)}}function Tb(e,t){if(1&e&&(Ms(0,"option",55),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e.type),xi(1),eo(" ",e.text,"")}}function Mb(e,t){if(1&e){const e=Fs();Ms(0,"div",10),Ms(1,"div",27),Ms(2,"div",10),Ms(3,"div",45),Ms(4,"select",46,47),zs("ngModelChange",(function(t){return Gt(e),Ls().user2edit.adminType=t})),As(6,Tb,2,2,"option",48),Rs(),Rs(),Ms(7,"div",49),Ms(8,"input",50,51),zs("ngModelChange",(function(t){return Gt(e),Ls().user2edit.name=t}))("keydown.enter",(function(){return Gt(e),Ls().persistEditUserChanges()})),Rs(),Ms(10,"label",52),Xs(11,"Anwendernamen \xe4ndern (mind. 3 Zeichen)"),Rs(),Rs(),Rs(),Rs(),Ms(12,"button",53),zs("click",(function(){return Gt(e),Ls().cancelEditMode()})),Xs(13," Abbrechen "),Rs(),Ms(14,"button",54),zs("click",(function(){return Gt(e),Ls().persistEditUserChanges()})),Xs(15," \xdcbernehmen "),Rs(),Es(16,"hr",3),Rs()}if(2&e){const e=ks(9),t=Ls();xi(4),Ps("disabled",!t.changeOfAdminRoleAllowed(t.user2edit))("ngModel",t.user2edit.adminType),xi(2),Ps("ngForOf",t.enumOptions),xi(2),Ps("ngModel",t.user2edit.name),xi(6),Ps("disabled",!e.valid)}}function Rb(e,t){1&e&&(Ms(0,"span"),Xs(1,"(Ben\xf6tigt SuperAdmin-Rolle)"),Rs())}const Eb=function(e){return{active:e}};let Fb=(()=>{class e{constructor(e,t,n,i,r,s,o,a){this.settingsService=e,this.tokenService=t,this.principalService=n,this.eventService=i,this.orgaService=r,this.mailService=s,this.organizationService=o,this.router=a,this.users=[],this.usersDisplayName="",this.principalIsSuperAdmin=!1,this.mShowInviteUser=!1,this.mShowInviteForeign=!1,this.newUser={},this.nothingFound=!0,this.searchForeignInput="",this.searchResult2Display="",this.newForeignProxyUser={newName:""}}get showInviteUser(){return this.mShowInviteUser}set showInviteUser(e){this.mShowInviteUser=e,this.mShowInviteUser&&(this.mShowInviteForeign=!1,this.cancelEditMode())}get showInviteForeign(){return this.mShowInviteForeign}set showInviteForeign(e){this.mShowInviteForeign=e,this.mShowInviteForeign&&(this.mShowInviteUser=!1,this.cancelEditMode())}cancelInvite(){this.showInviteUser=!1,this.showInviteForeign=!1}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Organisations-Administration"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,this.organization=yield this.orgaService.findOrgaById(this.principal.orgaId),this.enumOptions=[{text:"Kein Administrator",type:xu.Member},{text:"Administrator",type:xu.Admin},{text:"Haupt-Administrator",type:xu.SuperAdmin}],yield this.initMembers()}))}initMembers(){return wc(this,void 0,void 0,(function*(){this.principalIsSuperAdmin=this.principalService.isSuperAdminOfCurrentOrga(),this.users=yield this.orgaService.getAllOrgaUsers(this.principal.orgaId,!1,!0),this.cancelEditMode(),this.newUser={name:"",email:""},this.searchResult2Display="",this.searchForeignInput="",this.nothingFound=!0,this.newForeignProxyUser={newName:""}}))}changeOfAdminRoleAllowed(e){return!!this.principalIsSuperAdmin&&!this.isForeign(e)}deletionOfUserAllowed(e){return!!this.principalIsSuperAdmin||!e.adminType||e.adminType===xu.Member}enterEditMode(e){this.user2edit=Object.assign({},this.users[e]),this.user2editId=this.user2edit.id,this.user2edit.adminType||(this.user2edit.adminType=xu.Member),this.mShowInviteUser=!1,this.mShowInviteForeign=!1}cancelEditMode(){this.user2edit=void 0,this.user2editId=""}persistEditUserChanges(){var e,t;return wc(this,void 0,void 0,(function*(){if(!(null===(e=this.user2edit)||void 0===e?void 0:e.name))return;let n=!1,i=!1;const r=this.users.find(e=>e.id===this.user2editId),s=(null===(t=this.principalService.getOrgaUser())||void 0===t?void 0:t.id)===this.user2editId;if(r.adminType!==this.user2edit.adminType&&s){let e="";switch(this.user2edit.adminType){case xu.Admin:e="Du degradierst dich vom SuperAdmin zum Admin. Willst du das wirklich?";break;case xu.Member:e="Du nimmst dir gerade alle Admin-Rechte. Willst du das wirklich?",i=!0}if(!confirm(e))return}s&&(n=!0),yield this.orgaService.updateOrgaUser(this.user2edit),n&&this.eventService.publishTokenChangedEvent({type:cy.OrgaUserDetails,orgaUser:this.user2edit}),i?this.router.navigateByUrl("/"):yield this.initMembers()}))}getUserIdAndAdminTypeAsString(e){const t=this.users[e];return t.adminType!==xu.Member?t.adminType:""}removeUserFromOrga(e){return wc(this,void 0,void 0,(function*(){const t=this.users[e];let n=!1;if(this.principal.id===t.id){if(!confirm("Du l\xf6schst dich gerade selbst? \nIst das OK?"))return;n=!0}yield this.orgaService.removeOrgaUser(t.id),n?(this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/")):yield this.initMembers()}))}deleteOrganisation(){return wc(this,void 0,void 0,(function*(){confirm("Willst du wirklich die gesamte Organsation \n- mit allen Anwendern, Ressourcen und Rechten l\xf6schen?")&&(yield this.orgaService.deleteOrganization(this.organization.id),this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/"))}))}_inviteUserisValid(){return!(!this.newUser.name||0===this.newUser.name.trim().length||!this.newUser.email||0===this.newUser.email.trim().length)}inviteUser(){return wc(this,void 0,void 0,(function*(){try{if(!this._inviteUserisValid())return void alert("Name and E-Mail sind Pflichtfelder!");(yield this.orgaService.inviteUser(this.newUser.name,this.newUser.email))||alert("Einladen hat nicht geklappt..."),yield this.mailService.mailsAvailable(),yield this.initMembers()}catch(e){alert(e)}}))}isForeign(e){return!(!e.foreignOrgaId&&!e.foreignUserId)}inviteForeign(){var e;if(this.newForeignProxyUser.foreignOrganization||this.newForeignProxyUser.foreignUser){let t={id:"",name:this.newForeignProxyUser.newName,orgaId:this.organization.id,adminType:xu.Member};this.newForeignProxyUser.foreignOrganization?t.foreignOrgaId=this.newForeignProxyUser.foreignOrganization.id:t.foreignUserId=null===(e=this.newForeignProxyUser.foreignUser)||void 0===e?void 0:e.id,this.orgaService.joinOrganization(this.organization.id,t)}this.initMembers()}getOrganizationTypeAsString(e){return Im[e]}_arrangeDisplaynameForFoundOrga(e){e&&e.id&&(this.principal.orgaId===e.id?this.searchResult2Display="Das ist deine eigene Organisation!":this.organizationService.foreignOrgaIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: "+this.getOrganizationTypeAsString(e.type)+")",this.newForeignProxyUser.foreignOrganization=e,this.newForeignProxyUser.newName="Orga - <"+e.name+">"))}_arrangeDisplaynameForFoundOrgaUser(e){e&&(this.principal.orgaId===e.orgaId?this.searchResult2Display="Der Benutzer ist direktes Mitglied deiner Organisation!":this.organizationService.foreignUserIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: Anwender)",this.newForeignProxyUser.foreignUser=e,this.newForeignProxyUser.newName="User - <"+e.name+">"))}search4ForeignUserOrOrga(){return wc(this,void 0,void 0,(function*(){this.newForeignProxyUser={newName:""},this.nothingFound=!0;const e=+this.searchForeignInput;if(e){const t=yield this.organizationService.findOrgaUserByOrgaUserId(e.toString());t?this._arrangeDisplaynameForFoundOrgaUser(t):this.searchResult2Display="Benutzer nicht gefunden."}else{const e=yield this.organizationService.findOrgaByMail(this.searchForeignInput);e?this._arrangeDisplaynameForFoundOrga(e):this.searchResult2Display="Organisation nicht gefunden."}}))}}return e.\u0275fac=function(t){return new(t||e)(xs(ku),xs(ly),xs(Pu),xs(Su),xs(Rm),xs(km),xs(Rm),xs(Op))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-orga-admin"]],decls:69,vars:22,consts:[[1,"container-list"],[1,"liste"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"hr-2"],["class","row",4,"ngIf"],["for","toggle-invite"],["type","checkbox","id","toggle-invite",3,"ngModel","ngModelChange"],[1,"toggled-container",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["inviteUserForm","ngForm"],[1,"row"],[1,"input-field","col","s6"],["type","text","id","name","name","name","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","name"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email"],["type","reset",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],["for","toggle-invite-orga"],["type","checkbox","id","toggle-invite-orga",3,"ngModel","ngModelChange"],[1,"toggled-container","col","s12",3,"hidden"],[1,"row","valign-wrapper"],["type","text","placeholder","via Organisation-Mail oder User-ID suchen...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s6"],[1,"btn","btn-success",3,"click"],[1,"col","s12"],[2,"font-weight","bold","margin-right","0.5em"],["inviteForeignForm","ngForm"],["type","text","id","nameProxyForeign","name","nameProxyForeign","required","","minlength","3",1,"form-control",3,"disabled","ngModel","ngModelChange"],["nameProxyForeign","ngModel"],["for","nameProxyForeign",3,"ngClass"],[4,"ngIf"],["type","button",1,"btn","btn-default","btn-delete",3,"disabled","click"],[3,"ngClass"],[3,"click"],[1,"list-item-col-1"],[1,"list-item-col-2"],[1,"list-item-col-3"],[1,"buttons-right-div"],["class","btn-delete",3,"click",4,"ngIf"],["class","",3,"disabled","click",4,"ngIf"],[1,"btn-delete",3,"click"],[1,"",3,"disabled","click"],[1,"input-field","col","s5"],["name","credTyp",1,"browser-default",3,"disabled","ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s7"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],["for","editName"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ms(0,"div",0),Ms(1,"p"),Xs(2),Rs(),Ms(3,"ul",1),As(4,Pb,13,8,"li",2),Rs(),Es(5,"hr",3),As(6,Mb,17,5,"div",4),Ms(7,"div"),Ms(8,"label",5),Ms(9,"input",6),zs("ngModelChange",(function(e){return t.showInviteUser=e})),Rs(),Ms(10,"span"),Xs(11),Rs(),Rs(),Rs(),Ms(12,"div",7),Ms(13,"form",8,9),zs("ngSubmit",(function(){return t.inviteUser()})),Ms(15,"div",10),Ms(16,"div",11),Ms(17,"input",12,13),zs("ngModelChange",(function(e){return t.newUser.name=e})),Rs(),Ms(19,"label",14),Xs(20,"Name des Mitarbeiters"),Rs(),Rs(),Ms(21,"div",11),Ms(22,"input",15,16),zs("ngModelChange",(function(e){return t.newUser.email=e})),Rs(),Ms(24,"label",17),Xs(25,"Adresse f\xfcr Einladungs-Mail"),Rs(),Rs(),Rs(),Ms(26,"button",18),zs("click",(function(){return t.cancelInvite()})),Xs(27," Abbrechen "),Rs(),Ms(28,"button",19),Xs(29,"Benutzer einladen"),Rs(),Rs(),Rs(),Es(30,"hr",3),Ms(31,"div"),Ms(32,"label",20),Ms(33,"input",21),zs("ngModelChange",(function(e){return t.showInviteForeign=e})),Rs(),Ms(34,"span"),Xs(35),Rs(),Rs(),Rs(),Ms(36,"div",22),Ms(37,"div",23),Ms(38,"div",11),Ms(39,"input",24),zs("ngModelChange",(function(e){return t.searchForeignInput=e}))("keydown.enter",(function(){return t.search4ForeignUserOrOrga()})),Rs(),Rs(),Ms(40,"div",25),Ms(41,"button",26),zs("click",(function(){return t.search4ForeignUserOrOrga()})),Xs(42," Suchen "),Rs(),Rs(),Rs(),Ms(43,"div",10),Ms(44,"div",27),Ms(45,"span",28),Xs(46,"Suchergebnis: "),Rs(),Ms(47,"span"),Xs(48),Rs(),Rs(),Rs(),Ms(49,"form",8,29),zs("ngSubmit",(function(){return t.inviteForeign()})),Ms(51,"div",23),Ms(52,"div",11),Ms(53,"input",30,31),zs("ngModelChange",(function(e){return t.newForeignProxyUser.newName=e})),Rs(),Ms(55,"label",32),Xs(56,"Bezeichnung des Stellvertreters"),Rs(),Rs(),Ms(57,"div",25),Ms(58,"button",18),zs("click",(function(){return t.cancelInvite()})),Xs(59," Abbrechen "),Rs(),Ms(60,"button",19),Xs(61,"einladen"),Rs(),Rs(),Rs(),Rs(),Rs(),Ms(62,"div",27),Es(63,"hr",3),Ms(64,"p"),Xs(65,"Hier kannst du die komplette Organisation l\xf6schen. "),As(66,Rb,2,0,"span",33),Rs(),Ms(67,"button",34),zs("click",(function(){return t.deleteOrganisation()})),Xs(68,"Organisation l\xf6schen"),Rs(),Rs(),Rs()),2&e){const e=ks(14),n=ks(50);xi(2),eo("Hier verwaltest du die Mitglieder von <",null==t.organization?null:t.organization.name,">."),xi(2),Ps("ngForOf",t.users),xi(2),Ps("ngIf",t.user2edit),xi(3),Ps("ngModel",t.showInviteUser),xi(2),Ys(t.showInviteUser?"<Benutzer einladen> ausblenden":"<Benutzer einladen> einblenden"),xi(1),Ps("hidden",!t.showInviteUser),xi(5),Ps("ngModel",t.newUser.name),xi(5),Ps("ngModel",t.newUser.email),xi(6),Ps("disabled",!e.valid),xi(5),Ps("ngModel",t.showInviteForeign),xi(2),Ys(t.showInviteUser?"<mit anderer Organisation oder Benutzer aus anderer Organisation zusammenarbeiten> ausblenden":"<mit anderer Organisation oder Benutzer aus anderer Organisation zusammenarbeiten> einblenden"),xi(1),Ps("hidden",!t.showInviteForeign),xi(3),Ps("ngModel",t.searchForeignInput),xi(9),Ys(t.searchResult2Display),xi(5),Ps("disabled",t.nothingFound)("ngModel",t.newForeignProxyUser.newName),xi(2),Ps("ngClass",va(20,Eb,t.newForeignProxyUser.newName)),xi(5),Ps("disabled",t.nothingFound||!n.valid),xi(6),Ps("ngIf",!t.principalIsSuperAdmin),xi(1),Ps("disabled",!t.principalIsSuperAdmin)}},directives:[sl,al,Du,qu,Wd,qd,Ku,zd,Bu,Zd,Qd,il,md,eh,vd,_d],styles:[".liste[_ngcontent-%COMP%], .liste[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:70em}.liste[_ngcontent-%COMP%]   .foreign-user[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-col-1[_ngcontent-%COMP%], .list-item-col-2[_ngcontent-%COMP%], .list-item-col-3[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.list-item-col-1[_ngcontent-%COMP%]{margin-left:.7rem;width:10rem;float:left;font-weight:700}.list-item-col-2[_ngcontent-%COMP%]{width:15em;float:left}.list-item-col-3[_ngcontent-%COMP%]{width:30em;float:left}.buttons-right-div[_ngcontent-%COMP%]{float:right;margin-right:.7em}.liste[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.row[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),e})();function Nb(e,t){if(1&e&&(Ms(0,"option",16),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e),xi(1),eo(" ",e.name,"")}}function Db(e,t){if(1&e&&(Ms(0,"option",16),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e),xi(1),eo(" ",e.displayName,"")}}function zb(e,t){if(1&e&&(Ms(0,"option",16),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e),xi(1),eo(" ",e.name,"")}}function Vb(e,t){1&e&&(Ms(0,"div"),Ms(1,"span"),Xs(2,"Vom gew\xe4hltem Ressourcen-Typ hast du keine Ressourcen."),Rs(),Es(3,"br"),Ms(4,"span"),Xs(5,"Weil du entweder diese App nicht lizenziert hast, oder noch keine Ressourcen diesen Typs angelegt hast."),Rs(),Rs())}function Bb(e,t){if(1&e){const e=Fs();Ms(0,"label",22),Ms(1,"input",23),zs("ngModelChange",(function(n){return Gt(e),t.$implicit.allowed=n}))("ngModelChange",(function(){Gt(e);const t=Ls().index;return Ls(2).onChangedPermission(t)})),Rs(),Ms(2,"span"),Xs(3),Rs(),Rs()}if(2&e){const e=t.$implicit;xi(1),Ps("ngModel",e.allowed)("disabled",e.disabled),xi(2),Ys(e.name)}}const Lb=function(e){return{"foreign-resource":e}};function jb(e,t){if(1&e&&(Ms(0,"li",19),Ms(1,"span",20),Xs(2),Rs(),As(3,Bb,4,3,"label",21),Rs()),2&e){const e=t.$implicit,n=Ls(2);Ps("ngClass",va(3,Lb,n.isForeignResource(e))),xi(2),eo(" ",n.getResourceDisplayName(e)," "),xi(1),Ps("ngForOf",e.permissions)}}function Hb(e,t){if(1&e&&(Ms(0,"ul",17),As(1,jb,4,5,"li",18),Rs()),2&e){const e=Ls();xi(1),Ps("ngForOf",e.resourcesAndAccessRights)}}const $b=function(e){return{"foreign-user":e}};let Gb=(()=>{class e{constructor(e,t,n,i,r){this.changeDetector=e,this.settingsService=t,this.principalService=n,this.orgaService=i,this.accessService=r,this.usersDisplayName="",this.subOrgas2Admin=[],this.users2Admin=[],this.resourceTypes2Admin=[],this.resourcesAndAccessRights=[],this.dirty=!1,this.callBackend=!1}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("zentrale Rechte-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.subOrgas2Admin=yield this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId),this.selectedSubOrga2Admin=this.subOrgas2Admin[0],this.resourceTypes2Admin=yield this.accessService.getAllResourceTypes(),this.selectedResourceType2Admin=this.resourceTypes2Admin[0],this._initMembers(!0)}))}_initMembers(e=!1){return wc(this,void 0,void 0,(function*(){this.dirty=!1,this.selectedSubOrgaId=void 0,this.selectedSubOrga2Admin&&(this.selectedSubOrgaId=this.selectedSubOrga2Admin.id),this.selectedResourceTypesId=this.selectedResourceType2Admin.type,e&&this.selectedSubOrga2Admin&&(this.users2Admin=yield this.orgaService.getAllOrgaUsers4SubOrga(this.principal.orgaId,this.selectedSubOrga2Admin.id),this.users2Admin.length>0&&(this.selectedUser2Admin=this.users2Admin[0])),this.selectedUser2Admin&&(this.selectedUsersId=this.selectedUser2Admin.id),this.resourcesAndAccessRights=[],void 0!==this.selectedSubOrgaId&&(this.resourcesAndAccessRights=yield this.accessService.getResourcesWithPermissions(this.selectedResourceType2Admin,this.selectedUser2Admin,this.principal.orgaId,this.selectedSubOrgaId))}))}getResourceDisplayName(e){return e.displayName}isForeignUser(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}isForeignResource(e){return!!e&&e.orgaId!==this.principal.orgaId}discardChanges(){this._initMembers()}savePermissions(){return wc(this,void 0,void 0,(function*(){if(this.callBackend){const e=[],t={userId:this.selectedUser2Admin.id,subOrgaId:this.selectedSubOrgaId,resources:e};this.resourcesAndAccessRights.forEach(t=>{if(t.dirty){const n=t.permissions.filter(e=>e.allowed).map(e=>e.name);e.push({resourceId:t.id,permissions:n})}}),yield this.accessService.setPermissionsOfGivenUser(t)}else this.resourcesAndAccessRights.forEach(e=>{if(e.dirty){const t=e.permissions.filter(e=>e.allowed).map(e=>e.name);this.accessService.setPermissionsOfUser2resource(this.selectedUser2Admin,e,t,this.selectedSubOrgaId)}});this._afterSavingPermissions()}))}_afterSavingPermissions(){this.dirty=!1,this.resourcesAndAccessRights.forEach(e=>e.dirty=!1)}onChangedUser(){if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){const e=this.users2Admin.find(e=>e.id===this.selectedUsersId);if(e)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=e)}this._initMembers()}onChangedSubOrga(){if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){const e=this.subOrgas2Admin.find(e=>e.id===this.selectedSubOrgaId);if(e)return this.changeDetector.detectChanges(),void(this.selectedSubOrga2Admin=e)}this._initMembers(!0)}onChangedResourceType(){if(this.dirty&&!confirm("Willst du den Ressourcentyp wechseln und deine \xc4nderungen verwerfen?")){const e=this.resourceTypes2Admin.find(e=>e.type===this.selectedResourceTypesId);if(e)return this.changeDetector.detectChanges(),void(this.selectedResourceType2Admin=e)}this._initMembers()}onChangedPermission(e=-1){if(this.dirty=!0,e>=0){const t=this.resourcesAndAccessRights[e];t&&(t.dirty=!0)}}}return e.\u0275fac=function(t){return new(t||e)(xs(Kr),xs(ku),xs(Pu),xs(Rm),xs(um))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-central-admin"]],decls:31,vars:14,consts:[[1,"mb-1"],[1,"row"],[1,"col","s12"],[1,"input-field","label-for-select","col","s5","m3"],[1,"input-field","col","s8","m5"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["name","resourceType2admin",1,"browser-default",3,"ngModel","ngModelChange"],["resourceType2adminCtrl","ngModel"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[4,"ngIf"],["class","liste",4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],["class","valign-wrapper mr-1",4,"ngFor","ngForOf"],[1,"valign-wrapper","mr-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(Ms(0,"h6",0),Xs(1),Rs(),Ms(2,"div",1),Ms(3,"div",2),Ms(4,"div",1),Ms(5,"div",3),Xs(6," Sub-Organisation w\xe4hlen: "),Rs(),Ms(7,"div",4),Ms(8,"select",5,6),zs("ngModelChange",(function(e){return t.selectedSubOrga2Admin=e}))("ngModelChange",(function(){return t.onChangedSubOrga()})),As(10,Nb,2,2,"option",7),Rs(),Rs(),Rs(),Ms(11,"div",1),Ms(12,"div",3),Xs(13," Ressourcen-Typ w\xe4hlen: "),Rs(),Ms(14,"div",4),Ms(15,"select",8,9),zs("ngModelChange",(function(e){return t.selectedResourceType2Admin=e}))("ngModelChange",(function(){return t.onChangedResourceType()})),As(17,Db,2,2,"option",7),Rs(),Rs(),Rs(),Ms(18,"div",1),Ms(19,"div",3),Xs(20," Benutzer w\xe4hlen: "),Rs(),Ms(21,"div",4),Ms(22,"select",10,11),zs("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),As(24,zb,2,2,"option",7),Rs(),Rs(),Rs(),Rs(),Rs(),As(25,Vb,6,0,"div",12),As(26,Hb,2,1,"ul",13),Ms(27,"button",14),zs("click",(function(){return t.discardChanges()})),Xs(28,"\xc4nderungen verwerfen"),Rs(),Ms(29,"button",15),zs("click",(function(){return t.savePermissions()})),Xs(30,"\xc4nderungen \xfcbernehmen"),Rs()),2&e&&(xi(1),eo(" Hallo ",t.usersDisplayName,", hier kannst du die Berechtigungen f\xfcr alle deine Organisationen und alle Unterstrukturen zentral regeln."),xi(7),Ps("ngModel",t.selectedSubOrga2Admin),xi(2),Ps("ngForOf",t.subOrgas2Admin),xi(5),Ps("ngModel",t.selectedResourceType2Admin),xi(2),Ps("ngForOf",t.resourceTypes2Admin),xi(5),Ps("ngClass",va(12,$b,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),xi(2),Ps("ngForOf",t.users2Admin),xi(1),Ps("ngIf",0===t.resourcesAndAccessRights.length),xi(1),Ps("ngIf",t.resourcesAndAccessRights.length>0),xi(1),Ps("disabled",!t.dirty),xi(2),Ps("disabled",!t.dirty))},directives:[md,qu,Wd,sl,il,al,vd,_d,Du],styles:[".liste[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text[_ngcontent-%COMP%], .list-item-text-left[_ngcontent-%COMP%]{width:25rem}select[_ngcontent-%COMP%]{border:3px solid teal}.foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:0!important}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem;white-space:nowrap}@media screen and (max-width:500px){.label-for-select[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;margin:0}}"]}),e})();function Wb(e,t){1&e&&(Ms(0,"div",2),Ms(1,"p"),Xs(2,"Du hast noch keine Unterstrukturen erstellt..."),Rs(),Rs())}function qb(e,t){if(1&e&&(Ms(0,"option",14),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e),xi(1),eo(" ",e.name,"")}}const Kb=function(e){return{"foreign-user":e}};function Zb(e,t){if(1&e){const e=Fs();Ms(0,"li",17),Ms(1,"span",18),Xs(2),Rs(),Ms(3,"label",19),Ms(4,"input",20),zs("ngModelChange",(function(n){return Gt(e),t.$implicit.isInSubOrgaNew=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Ls(3).onChangedUserInSubOrga(n)})),Rs(),Ms(5,"span",21),Xs(6,"in Unterstruktur"),Rs(),Rs(),Ms(7,"label",19),Ms(8,"input",22),zs("ngModelChange",(function(n){return Gt(e),t.$implicit.subAdminNew=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Ls(3).onChangedUserSubAdmin(n)})),Rs(),Ms(9,"span",23),Xs(10,"Sub-Admin"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,i=Ls(3);Ps("ngClass",va(5,Kb,i.isForeignUser(e))),xi(2),eo(" ",e.name," "),xi(2),Ps("ngModel",e.isInSubOrgaNew),xi(4),Ps("disabled",i.disableSubAdminCheckbox(n))("ngModel",e.subAdminNew)}}function Jb(e,t){if(1&e&&(Ms(0,"ul",15),As(1,Zb,11,7,"li",16),Rs()),2&e){const e=Ls(2);xi(1),Ps("ngForOf",e.mixedUsers)}}const Qb=function(e){return{"foreign-resource":e}};function Xb(e,t){if(1&e){const e=Fs();Ms(0,"li",17),Ms(1,"span",18),Xs(2),Rs(),Ms(3,"label",19),Ms(4,"input",20),zs("ngModelChange",(function(n){return Gt(e),t.$implicit.isInSubOrgaNew=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Ls(3).onChangedResourceInSubOrga(n)})),Rs(),Ms(5,"span",21),Xs(6,"in Unterstruktur"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit,n=Ls(3);Ps("ngClass",va(3,Qb,n.isForeignResource(e))),xi(2),eo(" ",e.displayName," "),xi(2),Ps("ngModel",e.isInSubOrgaNew)}}function Yb(e,t){if(1&e&&(Ms(0,"ul",15),As(1,Xb,7,5,"li",16),Rs()),2&e){const e=Ls(2);xi(1),Ps("ngForOf",e.mixedResources)}}function ew(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"div",2),Ms(2,"div",3),Ms(3,"div",4),Ms(4,"div",5),Xs(5," Unterstruktur ausw\xe4hlen: "),Rs(),Ms(6,"div",6),Ms(7,"select",7,8),zs("ngModelChange",(function(t){return Gt(e),Ls().selectedSubOrga=t}))("ngModelChange",(function(){return Gt(e),Ls().onChangedSubOrga()})),As(9,qb,2,2,"option",9),Rs(),Rs(),Rs(),Rs(),Rs(),Ms(10,"span",10),Xs(11,"Diese Benutzer kannst du zuteilen:"),Rs(),As(12,Jb,2,1,"ul",11),Ms(13,"span",10),Xs(14,"Diese Resourcen kannst du zuteilen:"),Rs(),As(15,Yb,2,1,"ul",11),Ms(16,"button",12),zs("click",(function(){return Gt(e),Ls().discardChanges()})),Xs(17,"\xc4nderungen verwerfen"),Rs(),Ms(18,"button",13),zs("click",(function(){return Gt(e),Ls().saveChanges()})),Xs(19,"\xc4nderungen \xfcbernehmen"),Rs(),Rs()}if(2&e){const e=Ls();xi(7),Ps("ngModel",e.selectedSubOrga),xi(2),Ps("ngForOf",e.subOrgas),xi(3),Ps("ngIf",e.mixedUsers.length>0),xi(3),Ps("ngIf",e.mixedResources.length>0),xi(1),Ps("disabled",!e.dirty),xi(2),Ps("disabled",!e.dirty)}}let tw=(()=>{class e{constructor(e,t,n,i,r){this.changeDetector=e,this.settingsService=t,this.principalService=n,this.orgaService=i,this.accessService=r,this.usersDisplayName="",this.subOrgas=[],this.orgaUsers=[],this.mixedUsers=[],this.orgaResources=[],this.mixedResources=[],this.dirty=!1}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Unterstruktur Best\xfcckung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.subOrgas=yield this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1),this.subOrgas.length>0&&(this.selectedSubOrga=this.subOrgas[0]),this.orgaUsers=yield this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.orgaResources=yield this.accessService.getAllResourcesOfOrga(this.principal.orgaId),this._initMembers()}))}_initMembers(){return wc(this,void 0,void 0,(function*(){this.dirty=!1,this.selectedSubOrga&&(this.selectedSubOrgaId=this.selectedSubOrga.id,this._initMixedOrgaUsers(),this._initMixedSubResources())}))}_initMixedOrgaUsers(){return wc(this,void 0,void 0,(function*(){this.mixedUsers=[];const e=yield this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);this.orgaUsers.forEach(t=>{const n=Object.assign(Object.assign({},t),{dirty:!1,subAdmin:!1,subAdminNew:!1,isInSubOrga:!1,isInSubOrgaNew:!1}),i=e.find(e=>e.orgaUserId===t.id);i&&(n.subUserId=i.id,n.isInSubOrga=!0,n.isInSubOrgaNew=!0,n.subAdmin=i.subAdmin,n.subAdminNew=i.subAdmin),this.mixedUsers.push(n)})}))}_initMixedSubResources(){return wc(this,void 0,void 0,(function*(){this.mixedResources=[];let e=[];e=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id),this.orgaResources.forEach(t=>{const n=Object.assign(Object.assign({},t),{subResourceId:"",dirty:!1,isInSubOrga:!1,isInSubOrgaNew:!1}),i=e.find(e=>e.orgaResourceId===t.id&&e.typeId===t.type);i&&(n.subResourceId=i.id,n.isInSubOrga=!0,n.isInSubOrgaNew=!0),this.mixedResources.push(n)}),console.log(this.mixedResources)}))}_reCalcMixedUsers(){return wc(this,void 0,void 0,(function*(){const e=yield this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);this.mixedUsers.forEach(t=>{t.dirty=!1,t.isInSubOrga=t.isInSubOrgaNew,t.subAdmin=t.subAdminNew,t.subUserId="";const n=e.find(e=>e.orgaUserId===t.id);n&&(t.subUserId=n.id)})}))}_reCalcMixedResources(){return wc(this,void 0,void 0,(function*(){let e=[];e=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id),this.mixedResources.forEach(t=>{t.dirty=!1,t.isInSubOrga=t.isInSubOrgaNew,t.subResourceId="";const n=e.find(e=>e.orgaResourceId===t.id&&e.typeId===t.type);n&&(t.subResourceId=n.id,t.orgaId=n.orgaId)}),console.log(this.mixedResources)}))}isForeignUser(e){return!(!(null==e?void 0:e.foreignOrgaId)&&!(null==e?void 0:e.foreignUserId))}isForeignResource(e){return e.orgaId!==this.principal.orgaId}disableSubAdminCheckbox(e){const t=this.mixedUsers[e],n=this.orgaUsers.find(e=>e.id===t.id);return!t.isInSubOrgaNew||this.isForeignUser(n)}discardChanges(){this._initMembers()}_saveUserChanges(){const e=[];this.mixedUsers.forEach(t=>{if(t.dirty){const n={id:t.subUserId,orgaId:this.selectedSubOrga.orgaId,subOrgaId:this.selectedSubOrga.id,orgaUserId:t.id,subAdmin:t.subAdminNew};t.dirty=!1,t.isInSubOrga!==t.isInSubOrgaNew&&(t.dirty=!0,t.isInSubOrgaNew?n.id="":n.subOrgaId=""),t.subAdmin!==t.subAdminNew&&(t.dirty=!0),t.dirty&&e.push(n)}}),this.orgaService.changeSubOrgaUsers(e)}_saveResourceChanges(){const e=[];this.mixedResources.forEach(t=>{if(t.dirty){const n={id:t.subResourceId,typeId:t.type,orgaResourceId:t.id,orgaId:this.selectedSubOrga.orgaId,subOrgaId:this.selectedSubOrgaId};t.isInSubOrga!==t.isInSubOrgaNew&&(t.isInSubOrgaNew?n.id=void 0:n.subOrgaId=void 0,e.push(n))}}),console.log(e),this.accessService.changeSubResources(this.selectedSubOrgaId,e)}saveChanges(){return wc(this,void 0,void 0,(function*(){this._saveUserChanges(),this._saveResourceChanges(),this._afterSavingChanges()}))}_afterSavingChanges(){this.dirty=!1,this._reCalcMixedUsers(),this._reCalcMixedResources()}onChangedSubOrga(){if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){const e=this.subOrgas.find(e=>e.id===this.selectedSubOrgaId);if(e)return this.changeDetector.detectChanges(),void(this.selectedSubOrga=e)}this._initMembers()}_onChangedUserItem(e,t=!1){const n=this.mixedUsers[e];n&&(t&&!n.isInSubOrgaNew&&(n.subAdminNew=!1),n.dirty=!0,this.dirty=!0)}onChangedUserSubAdmin(e){this._onChangedUserItem(e)}onChangedUserInSubOrga(e){this._onChangedUserItem(e,!0)}onChangedResourceInSubOrga(e){const t=this.mixedResources[e];t&&(t.dirty=!0,this.dirty=!0)}}return e.\u0275fac=function(t){return new(t||e)(xs(Kr),xs(ku),xs(Pu),xs(Rm),xs(um))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-sub-orga-admin"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s5"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[2,"font-weight","bold"],["class","verweise",4,"ngIf"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"],[3,"ngValue"],[1,"verweise"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text"],[1,"valign-wrapper"],["type","checkbox",1,"filled-in",3,"ngModel","ngModelChange"],[1,"first-checkbox"],["type","checkbox",1,"filled-in",3,"disabled","ngModel","ngModelChange"],[1,"second-checkbox"]],template:function(e,t){1&e&&(Ms(0,"h5"),Xs(1),Rs(),As(2,Wb,3,0,"div",0),As(3,ew,20,6,"div",1)),2&e&&(xi(1),eo(" Hallo ",t.usersDisplayName,", hier kannst du deinen Unterstrukturen Benutzer und Ressourcen zuweisen."),xi(1),Ps("ngIf",0===t.subOrgas.length),xi(1),Ps("ngIf",t.subOrgas.length>0))},directives:[al,md,qu,Wd,sl,vd,_d,il,Du],styles:[".verweise[_ngcontent-%COMP%]{margin:1rem 0 2rem;list-style-type:none;padding:8px;width:62rem;max-height:14rem;overflow-y:auto}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:60rem;position:relative;background-color:#eee;margin-bottom:.5rem;padding:.3rem 0;height:2.2rem;border-radius:4px}.verweise[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%], .verweise[_ngcontent-%COMP%]   .foreign-user[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:5em}.list-item-text[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:25em;text-align:left}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1em;margin-right:1em}.first-checkbox[_ngcontent-%COMP%]{float:left;width:10em;text-align:left}.second-checkbox[_ngcontent-%COMP%]{float:left;width:15em;text-align:left}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),e})(),nw=(()=>{class e{constructor(e){this.router=e}canActivate(e,t){return window.location.href=e.data.externalUrl,!0}}return e.\u0275fac=function(t){return new(t||e)(Ke(Op))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function iw(e,t){1&e&&(Ms(0,"h5"),Xs(1,"Dein Login hat nicht geklappt, ggf. gespeichertes Token abgelaufen oder ung\xfcltig..."),Rs())}function rw(e,t){if(1&e&&(Ms(0,"h5"),Xs(1),Rs()),2&e){const e=Ls();xi(1),eo("Account-Name: ",null==e.principal||null==e.principal.account?null:e.principal.account.name,"")}}let sw=(()=>{class e{constructor(e,t,n,i,r,s){this.route=e,this.http=t,this.loginService=n,this.authService=i,this.settingsService=r,this.router=s,this.token=null,this.principal={}}_setPrincipal(){if(!this.principal)return;const e=Object.assign({},this.principal);this.loginService.setToken(e),this.token&&this.authService.setPrincipalAndToken(this.principal,this.token)}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.route.queryParamMap.subscribe(e=>wc(this,void 0,void 0,(function*(){if(console.log(JSON.stringify(e)),this.token=e.get("token"),console.log("Token? "+!!this.token),this.token)try{const e=(new pl).set("Authorization",this.token);if(this.principal=yield this.http.get("http://localhost:5010/pttbe/idp/principal",{headers:e}).toPromise(),this._setPrincipal(),this.settingsService.showInfoPageAfterLogin())return void this.router.navigateByUrl("/successful-login");if(console.log("REDIRECT_IN_APP: "+this.settingsService.getRedirectUri()),this.settingsService.getRedirectUri())return void this.router.navigateByUrl(this.settingsService.getRedirectUri());this.router.navigateByUrl("iam/registration-successful")}catch(t){Oc(t)}})))}))}}return e.\u0275fac=function(t){return new(t||e)(xs(ff),xs(Ul),xs(ly),xs(Gl),xs(ku),xs(Op))},e.\u0275cmp=dt({type:e,selectors:[["app-callback"]],decls:4,vars:2,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(Ms(0,"h5"),Xs(1,"Callback-Seite f\xfcr Antwort vom Idp-Login"),Rs(),As(2,iw,2,0,"h5",0),As(3,rw,2,1,"h5",0)),2&e&&(xi(2),Ps("ngIf",!(null!=t.principal&&t.principal.account)),xi(1),Ps("ngIf",null==t.principal?null:t.principal.account))},directives:[al],styles:[""]}),e})();function ow(e,t){1&e&&(Ms(0,"div",4),Ms(1,"p"),Xs(2,"Du hast noch keine Unterstrukturen erstellt..."),Rs(),Rs())}function aw(e,t){if(1&e&&(Ms(0,"option",27),Xs(1),Rs()),2&e){const e=t.$implicit;Ps("ngValue",e),xi(1),eo(" ",e.name,"")}}function cw(e,t){if(1&e&&(Ms(0,"li",30),Ms(1,"span",31),Xs(2),Rs(),Rs()),2&e){const e=t.$implicit;xi(2),Ys(e.name)}}function lw(e,t){if(1&e&&(Ms(0,"ul",28),As(1,cw,3,1,"li",29),Rs()),2&e){const e=Ls(2);xi(1),Ps("ngForOf",e.subOrgaUsers)}}function uw(e,t){if(1&e&&(Ms(0,"li",30),Ms(1,"span",31),Xs(2),Rs(),Rs()),2&e){const e=t.$implicit;xi(2),Ys(e.displayName)}}function dw(e,t){if(1&e&&(Ms(0,"ul",28),As(1,uw,3,1,"li",29),Rs()),2&e){const e=Ls(2);xi(1),Ps("ngForOf",e.subOrgaResources)}}function hw(e,t){if(1&e&&(Ms(0,"div"),Ms(1,"div",32),Ms(2,"div",33),Ms(3,"span",34),Xs(4),Rs(),Ms(5,"p"),Xs(6,"Name: "),Ms(7,"span",35),Xs(8),Rs(),Rs(),Ms(9,"p"),Xs(10,"Adresse: "),Ms(11,"span",35),Xs(12),Rs(),Rs(),Rs(),Rs(),Rs()),2&e){const e=Ls(2);xi(4),Ys(e.getDetailCardTitle()),xi(4),Ys(null==e.firstIdentification||null==e.firstIdentification.organization?null:e.firstIdentification.organization.name),xi(4),no("",null==e.firstIdentification||null==e.firstIdentification.organization||null==e.firstIdentification.organization.address?null:e.firstIdentification.organization.address.street,", ",null==e.firstIdentification||null==e.firstIdentification.organization||null==e.firstIdentification.organization.address?null:e.firstIdentification.organization.address.zipCode," ",null==e.firstIdentification||null==e.firstIdentification.organization||null==e.firstIdentification.organization.address?null:e.firstIdentification.organization.address.city,"")}}function gw(e,t){if(1&e){const e=Fs();Ms(0,"div"),Ms(1,"div",4),Ms(2,"div",5),Ms(3,"div",6),Ms(4,"div",7),Xs(5," Zu \xfcbertragende Struktur ausw\xe4hlen: "),Rs(),Ms(6,"div",8),Ms(7,"select",9),zs("ngModelChange",(function(t){return Gt(e),Ls().selectedSubOrga=t}))("ngModelChange",(function(){return Gt(e),Ls().onChangedSubOrga()})),As(8,aw,2,2,"option",10),Rs(),Rs(),Rs(),Rs(),Rs(),Ms(9,"div",11),Ms(10,"div",12),Ms(11,"span",13),Xs(12),Rs(),As(13,lw,2,1,"ul",14),Rs(),Ms(14,"div",12),Ms(15,"span",13),Xs(16),Rs(),As(17,dw,2,1,"ul",14),Rs(),Rs(),Ms(18,"div",4),Ms(19,"div",15),Ms(20,"label"),Ms(21,"input",16),zs("ngModelChange",(function(t){return Gt(e),Ls().includePermissions=t})),Rs(),Ms(22,"span"),Xs(23,"Berechtigungen mit \xfcbertragen"),Rs(),Rs(),Rs(),Rs(),Ms(24,"div",11),Ms(25,"div",17),Ms(26,"input",18),zs("ngModelChange",(function(t){return Gt(e),Ls().foreignOrgaSearchInput=t}))("keydown.enter",(function(){return Gt(e),Ls().searchForeignOrga()})),Rs(),Ms(27,"label",19),Xs(28,"Mailadresse der gesuchten Organisation"),Rs(),Rs(),Ms(29,"div",20),Ms(30,"button",21),zs("click",(function(){return Gt(e),Ls().searchForeignOrga()})),Xs(31," Suchen"),Rs(),Rs(),Rs(),Ms(32,"div",4),Ms(33,"div",22),Ms(34,"span",23),Xs(35,"Gefundene Organisation: "),Rs(),Ms(36,"span"),Xs(37),Rs(),Rs(),Ms(38,"div",12),Ms(39,"button",24),zs("click",(function(){Gt(e);const t=Ls();return t.showIdentifcation=!t.showIdentifcation})),Xs(40),Rs(),Rs(),Rs(),As(41,hw,13,5,"div",3),Ms(42,"div",25),Ms(43,"button",26),zs("click",(function(){return Gt(e),Ls().saveChanges()})),Xs(44," \xdcbertragungsauftrag best\xe4tigen "),Rs(),Rs(),Rs()}if(2&e){const e=Ls();xi(7),Ps("ngModel",e.selectedSubOrga),xi(1),Ps("ngForOf",e.subOrgas),xi(4),eo("Diese Benutzer werden mit\xfcbertragen: ",e.subOrgaUsers.length,""),xi(1),Ps("ngIf",e.subOrgaUsers.length>0),xi(3),eo("Diese Resourcen werden mit\xfcbertragen: ",e.subOrgaResources.length,""),xi(1),Ps("ngIf",e.subOrgaResources.length>0),xi(4),Ps("ngModel",e.includePermissions),xi(5),Ps("ngModel",e.foreignOrgaSearchInput),xi(11),Ys(e.searchResult2Display),xi(2),Ps("disabled",!e.firstIdentification),xi(1),eo(" Identifikation ",e.showIdentifcation?"ausblenden":"anzeigen"," "),xi(1),Ps("ngIf",e.showIdentifcation),xi(2),Ps("disabled",!e.foreignOrga)}}const fw=[{path:"",component:pb},{path:"iam/login",component:mb},{path:"iam/select-organization",component:Cb},{path:"iam/register",component:Ob},{path:"iam/registration-successful",component:ub},{path:"iam/guard-fail",component:Ey},{path:"iam/account-management",component:Cy,canActivate:[Ab]},{path:"iam/user-info",component:fv,canActivate:[Ab]},{path:"iam/credentials-management",component:ib,canActivate:[Ab]},{path:"iam/identification-management",component:ph,canActivate:[Ab]},{path:"iam/organization-identification-management",component:uh,canActivate:[wy]},{path:"iam/organization-management",component:My,canActivate:[Ab],data:{requiredAuthLevel:Uu.Low}},{path:"iam/organization-administration",component:Fb,canActivate:[wy]},{path:"iam/central-administration",component:Gb,canActivate:[wy],data:{allowSubAdmin:!0}},{path:"iam/suborga-management",component:Ym,canActivate:[wy]},{path:"iam/suborga-administration",component:tw,canActivate:[wy]},{path:"iam/pseudo-mgv",component:(()=>{class e{constructor(e,t,n,i,r,s,o){this.changeDetector=e,this.settingsService=t,this.principalService=n,this.orgaService=i,this.accessService=r,this.identService=s,this.usersDisplayName="",this.subOrgas=[],this.subOrgaUsers=[],this.subOrgaResources=[],this.foreignOrga=void 0,this.foreignOrgaSearchInput="",this.searchResult2Display="",this.firstIdentification=void 0,this.showIdentifcation=!1,this.includePermissions=!0,o.assureExists()}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Pseudo-MGV"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.subOrgas=yield this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1),this.subOrgas.length>0&&(this.selectedSubOrga=this.subOrgas[0]),yield this._initMembers()}))}_initMembers(){return wc(this,void 0,void 0,(function*(){this.selectedSubOrga&&(this.selectedSubOrgaId=this.selectedSubOrga.id,this.subOrgaUsers=yield this.orgaService.getAllOrgaUsers4SubOrga(this.principal.orgaId,this.selectedSubOrga.id,!0),this.subOrgaResources=this.accessService.getAllResourcesOfSubOrga(this.principal.orgaId,this.selectedSubOrga.id,!0))}))}_arrangeDisplaynameForFoundOrga(e){return wc(this,void 0,void 0,(function*(){if(e&&e.id)if(this.principal.orgaId===e.id)this.searchResult2Display="Das ist deine eigene Organisation!";else{this.foreignOrga=e;const t=yield this.identService.getAllIdentificationsForOrga(this.principal.orgaId);t.length>0&&(this.firstIdentification=t[0]),this.searchResult2Display=e.name+" (Typ: "+Im[e.type]+")"}}))}searchForeignOrga(){return wc(this,void 0,void 0,(function*(){this.foreignOrga=void 0,this.firstIdentification=void 0;const e=yield this.orgaService.findOrgaByMail(this.foreignOrgaSearchInput);e?yield this._arrangeDisplaynameForFoundOrga(e):this.searchResult2Display="Keine Organisation gefunden..."}))}getDetailCardTitle(){const e=this.firstIdentification;return e?`Identifiziert am ${e.doneAt.toLocaleDateString()}\n                    durch Anbieter ${Iu[e.provider]}`:""}saveChanges(){return wc(this,void 0,void 0,(function*(){this.foreignOrga&&(yield this.orgaService.executePseudoMgv(this.principal.orgaId,this.selectedSubOrgaId,this.foreignOrga.id,this.includePermissions),yield this._initMembers())}))}onChangedSubOrga(){this._initMembers().then()}}return e.\u0275fac=function(t){return new(t||e)(xs(Kr),xs(ku),xs(Pu),xs(Rm),xs(um),xs(Ru),xs(pv))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-pseudo-mgv"]],decls:8,vars:3,consts:[[1,"mb-0"],[1,"mt-0"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s3"],[1,"input-field","col","s5"],["name","subOrga2moveCtrl",1,"browser-default",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"row","mt-1"],[1,"col","s6"],[2,"font-weight","bold"],["class","verweise",4,"ngIf"],[1,"col"],["type","checkbox",1,"filled-in",3,"ngModel","ngModelChange"],[1,"input-field","col","s6"],["id","searchfield","type","text",3,"ngModel","ngModelChange","keydown.enter"],["for","searchfield"],[1,"col","s6",2,"position","relative","top","5px"],[1,"btn","btn-success",3,"click"],[1,"col","s6",2,"position","relative","top","18px"],[2,"font-weight","bold","margin-right","0.5em"],[1,"btn","btn-success",3,"disabled","click"],[1,"row","mt-2"],[1,"btn",2,"position","relative","top","-5px",3,"disabled","click"],[3,"ngValue"],[1,"verweise"],["class","valign-wrapper",4,"ngFor","ngForOf"],[1,"valign-wrapper"],[1,"list-item-text"],[1,"card","grey","lighten-4","mt-2"],[1,"card-content","mt-0","pt-1"],[1,"card-title"],[1,"bold"]],template:function(e,t){1&e&&(Ms(0,"h5"),Xs(1),Rs(),Ms(2,"p",0),Xs(3," Dazu legst du dir eine Unterstruktur an. Best\xfcckst diese mit den Benutzern und Ressourcen, die zur anderen Organisation \xfcbertragen werden sollen.\n"),Rs(),Ms(4,"p",1),Xs(5," Danach adressierst du die andere Organisation, versicherst dich, dass es die Richtige ist und best\xe4tigst den \xdcbertragungsauftrag.\n"),Rs(),As(6,ow,3,0,"div",2),As(7,gw,45,13,"div",3)),2&e&&(xi(1),eo(" Hallo ",t.usersDisplayName,", hier kannst du einen Teil deiner Organisation an eine andere Organisation \xfcbertragen."),xi(5),Ps("ngIf",0===t.subOrgas.length),xi(1),Ps("ngIf",t.subOrgas.length>0))},directives:[al,md,qu,Wd,sl,Du,Bu,vd,_d],styles:[".verweise[_ngcontent-%COMP%]{margin:1rem 0 2rem;list-style-type:none;padding:8px;width:32rem;max-height:14rem;overflow-y:auto}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:30rem;position:relative;background-color:#eee;margin-bottom:.5rem;padding:.3rem 0;height:2.2rem;border-radius:4px}.list-item-text[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:auto;text-align:left}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:0!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),e})(),canActivate:[wy]},{path:"notification-view",component:sy,canActivate:[Ab]},{path:"fakes/mail-view",component:by},{path:"iam/settings",component:ay},{path:"help",component:ev},{path:"products-main",component:Km},{path:"generic-product/fibu",component:bm,data:{dataProductId:mh.FIBU}},{path:"generic-product/tax",component:bm,data:{dataProductId:mh.TAX}},{path:"generic-product/bilanz",component:bm,canActivate:[Ab],data:{requiredAuthType:Ac.OrgaUser,dataProductId:mh.BILANZ,checkLicenceInGuard:!0}},{path:"marketplace",component:im},{path:"folderApp/main",component:Av,canActivate:[Ab],data:{requiredAuthLevel:Uu.Low,requiredAuthType:Ac.OrgaUser}},{path:"folderApp/admin",component:wv,canActivate:[wy]},{path:"x/geschuetzt-mit-beidem-mit-parametern",component:ib,canActivate:[Ab],data:{requiredAuthLevel:Uu.Secure,requiredAuthType:Ac.OrgaUser}},{path:"tokenapp",canActivate:[nw],component:nw,data:{externalUrl:"http://localhost:5010/pttbe/idp/authorize/?redirect_to=http://localhost:4200/callback&client=Gesamt-Frontend"}},{path:"callback",component:sw},{path:"**",component:Ib}];let pw=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},imports:[[Dp.forRoot(fw)],Dp]}),e})();function mw(e,t){if(1&e&&(Ms(0,"span",21),Xs(1),Rs()),2&e){const e=Ls();xi(1),Ys(e.orgaName)}}function vw(e,t){if(1&e&&(Ms(0,"span",22),Xs(1),Rs()),2&e){const e=Ls();xi(1),Ys(e.countOfNewBadgeItems)}}function yw(e,t){1&e&&(Ms(0,"i",23),Xs(1,"arrow_drop_down"),Rs())}function bw(e,t){if(1&e&&(Ms(0,"span",22),Xs(1),Rs()),2&e){const e=Ls().$implicit;xi(1),Ys(e.newCount)}}const ww=function(e){return{divider:e}};function _w(e,t){if(1&e){const e=Fs();Ms(0,"li",24),zs("click",(function(){Gt(e);const n=t.index;return Ls().onDropDownProfileClick(n)})),Ms(1,"a"),Xs(2),As(3,bw,2,1,"span",7),Rs(),Rs()}if(2&e){const e=t.$implicit;Ps("ngClass",va(3,ww,e.isDivider)),xi(2),eo(" ",e.text," "),xi(1),Ps("ngIf",e.newCount>0)}}const Ow=function(e,t){return{"blue darken-2":e,"teal lighten-2":t}},Iw=function(e,t){return{orange:e,"teal accent-4":t}};let Sw=(()=>{class e{constructor(e,t,n,i,r,s,o,a,c){this.router=e,this.principalService=t,this.tokenService=n,this.notificationService=i,this.eventService=o,this.settingsService=a,this.changeDetector=c,this.isActive=!0,this.title="Home",this.orgaName="",this.usersDisplayName="",this.useMyColors=!0,this.dropDownItems=[],this.countOfNewBadgeItems=0,this.dropdownLogoutId=9999,this.notificationTimer=1e4,r.assureServiceIsCreated(),r.setOrgaServiceHelper(s)}ngOnInit(){return wc(this,void 0,void 0,(function*(){this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(sm(()=>this.isActive)).subscribe(e=>this._onMainViewChanged(e)),this._fakeLogin(),yield this.initMembers()}))}_fakeLogin(){this.principalService.setPrincipal({account:{id:"110",name:"Klaus",email:"mail.de",verified:!0},authType:Ac.OrgaUser,orgaUser:{id:"400",name:"Klaus Heinzelmann fake",orgaId:"300",adminType:xu.Admin},organization:{id:"300",name:"Kanzlei Heinzelmann fake",email:"info@Kanzlei-Heinzelmann",type:Im.Kanzlei}})}ngOnDestroy(){this.isActive=!1}_onMainViewChanged(e){e.titleOnly?this.title=this.settingsService.getTitle():this.initMembers()}initMembers(){return wc(this,void 0,void 0,(function*(){this.title=this.settingsService.getTitle(),this.changeDetector.detectChanges(),this.countOfNewBadgeItems=0,this.principalService.isLoggedIn()?(this.orgaName=this.principalService.getOrgaName(),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.countOfNewBadgeItems=yield this.notificationService.getNumberOfNotificationsForCurrentPrincipal()):(this.orgaName="",this.usersDisplayName=""),this.useMyColors=!this.settingsService.useGreenLikeColors(),this.dropDownItems=[],this.principalService.isLoggedIn()&&(this.dropDownItems.push({id:1,link:"/iam/user-info",text:"User-Infos"},{isDivider:!0}),this.countOfNewBadgeItems>0&&this.dropDownItems.push({id:10,link:"/notification-view",text:"Nachrichten f\xfcr dich",newCount:this.countOfNewBadgeItems},{isDivider:!0}),this.dropDownItems.push({id:20,link:"/iam/credentials-management",text:"zu deinen Zugangsmedien"},{id:30,link:"/iam/organization-management",text:"zu deinen Mitgliedschaften"},{id:40,link:"/iam/organization-administration",text:"zur Organisations-Administration"},{id:45,link:"/iam/central-administration",text:"zur zentralen Rechte-Administration"}),this.dropDownItems.push({isDivider:!0},{id:50,link:"/folderApp/main",text:"zur Ordner-App"},{id:60,link:"/folderApp/admin",text:"zur Ordner-Administration"}),this.dropDownItems.push({isDivider:!0},{id:70,link:"/iam/login",text:"anders anmelden"},{id:this.dropdownLogoutId,text:"abmelden"}))}))}onProfileClick(){this.principalService.isLoggedIn||this.router.navigateByUrl("/iam/login")}onDropDownProfileClick(e){const t=this.dropDownItems[e];if(t.id===this.dropdownLogoutId)return this.tokenService.logout(),void this.router.navigateByUrl("/");t.link&&this.router.navigateByUrl(t.link)}}return e.\u0275fac=function(t){return new(t||e)(xs(Op),xs(Pu),xs(ly),xs(Um),xs(um),xs(Rm),xs(Su),xs(ku),xs(Kr))},e.\u0275cmp=dt({type:e,selectors:[["app-root"]],decls:33,vars:14,consts:[[1,"nav-extended",3,"ngClass"],["data-test-id","header-title","routerLink","","title","zur\xfcck zur Startseite...",1,"header-text-left","ml-3"],[1,"right"],[1,"header-text"],["class","ml-3 p-1",4,"ngIf"],["data-target","dd-profile",1,"dropdown-trigger","header-text","valign-wrapper","m-3",3,"click"],["data-test-id","user-display-name"],["class","new badge red","data-badge-caption","",4,"ngIf"],["class","material-icons right",4,"ngIf"],[1,"nav-content"],["id","dd-profile",1,"dropdown-content","vertical-tabs"],["style","font-weight: 450; color: black !important",3,"ngClass","click",4,"ngFor","ngForOf"],["id","index-banner",1,"section","no-pad-bot"],[1,"container"],[1,"page-footer",3,"ngClass"],[1,"row"],[1,"col","m7","push-m1","s6"],[1,"col","m2","push-m2","s3"],["routerLink","/iam/settings",1,"white-text","mr-1"],[1,"material-icons"],["routerLink","/help",1,"white-text"],[1,"ml-3","p-1"],["data-badge-caption","",1,"new","badge","red"],[1,"material-icons","right"],[2,"font-weight","450","color","black !important",3,"ngClass","click"]],template:function(e,t){1&e&&(Ms(0,"nav",0),Ms(1,"ul"),Ms(2,"li"),Ms(3,"a",1),Xs(4),Rs(),Rs(),Ms(5,"div",2),Ms(6,"li",3),As(7,mw,2,1,"span",4),Rs(),Ms(8,"li"),Ms(9,"a",5),zs("click",(function(){return t.onProfileClick()})),Ms(10,"span",6),Xs(11),Rs(),As(12,vw,2,1,"span",7),As(13,yw,2,0,"i",8),Rs(),Rs(),Rs(),Rs(),Ms(14,"div",9),Ms(15,"ul",10),As(16,_w,4,5,"li",11),Rs(),Rs(),Rs(),Ms(17,"main"),Ms(18,"div",12),Ms(19,"div",13),Es(20,"router-outlet"),Rs(),Rs(),Rs(),Ms(21,"footer",14),Ms(22,"div",15),Ms(23,"div",16),Ms(24,"span"),Xs(25,"Made by Klaus Hetzelein (c) 2019 - 2021"),Rs(),Rs(),Ms(26,"div",17),Ms(27,"a",18),Ms(28,"i",19),Xs(29,"settings_applications"),Rs(),Rs(),Ms(30,"a",20),Ms(31,"i",19),Xs(32,"help_outline"),Rs(),Rs(),Rs(),Rs(),Rs()),2&e&&(Ps("ngClass",ya(8,Ow,t.useMyColors,!t.useMyColors)),xi(4),Ys(t.title),xi(3),Ps("ngIf",t.orgaName.length>0),xi(4),Ys(t.usersDisplayName),xi(1),Ps("ngIf",t.countOfNewBadgeItems>0),xi(1),Ps("ngIf",t.usersDisplayName.length>0),xi(3),Ps("ngForOf",t.dropDownItems),xi(5),Ps("ngClass",ya(11,Iw,t.useMyColors,!t.useMyColors)))},directives:[il,Ip,al,sl,kp],styles:[".header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.5rem}.header-text[_ngcontent-%COMP%]{font-style:italic}.vertical-tabs[_ngcontent-%COMP%]{border-left:3px solid #1976d2!important;padding:0!important}.vertical-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important}.divider[_ngcontent-%COMP%]{border-bottom:2px solid #1976d2}.badge[_ngcontent-%COMP%]{margin-left:1rem}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}body[_ngcontent-%COMP%]{font-family:Roboto,Arial,sans-serif;margin:0;width:-webkit-max-content;width:-moz-max-content;width:max-content}@media screen and (max-width:540px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:42px}i.material-icons[_ngcontent-%COMP%]{line-height:42px;height:42px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.2rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}@media screen and (max-width:360px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:32px}i.material-icons[_ngcontent-%COMP%]{line-height:32px;height:32px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.1rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}"]}),e})();const Cw=new Ky([{id:Yy.PROVIDER_ID,provider:new Yy("239975901698-c4lmv7l5ku13p51014vtr4af014ejacc.apps.googleusercontent.com")}]);function Aw(){return Cw}let kw=(()=>{class e{}return e.\u0275mod=pt({type:e,bootstrap:[Sw]}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[{provide:Ky,useFactory:Aw},{provide:Tl,useClass:Wl,multi:!0}],imports:[[wu,$l,pw,Yd,Qy]]}),e})();(function(){if(ri)throw new Error("Cannot enable prod mode after platform setup.");ii=!1})(),yu().bootstrapModule(kw).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);