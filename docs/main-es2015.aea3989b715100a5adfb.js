(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},FWf1:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=n("pshJ"),s=n("GiSu"),o=n("zB/H"),a=n("p//D"),c=n("n3uD"),l=n("MkmW"),u=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!n){o.destination=s.empty;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new d(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new d(o,n,r,i)}return o}return r(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.Subscription);t.Subscriber=u;var d=function(e){function t(t,n,r,o){var a,c=e.call(this)||this;c._parentSubscriber=t;var l=c;return i.isFunction(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==s.empty&&(l=Object.create(n),i.isFunction(l.unsubscribe)&&c.add(l.unsubscribe.bind(l)),l.unsubscribe=c.unsubscribe.bind(c))),c._context=l,c._next=a,c._error=r,c._complete=o,c}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw n;l.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(l.hostReportError(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u);t.SafeSubscriber=d},GMZp:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,n){"use strict";var r=n("n3uD"),i=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(r.config.useDeprecatedSynchronousErrorHandling)throw e;i.hostReportError(e)},complete:function(){}}},LBXl:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},MkmW:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},mbIT:function(e,t,n){"use strict";t.isArray=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},n3uD:function(e,t,n){"use strict";var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"p//D":function(e,t,n){"use strict";t.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),t.$$rxSubscriber=t.rxSubscriber},pshJ:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},"s3+Z":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=n("FWf1");t.takeWhile=function(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.inclusive))},e}(),o=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(i.Subscriber)},"zB/H":function(e,t,n){"use strict";var r=n("mbIT"),i=n("GMZp"),s=n("pshJ"),o=n("LBXl");function a(e){return e.reduce((function(e,t){return e.concat(t instanceof o.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u)n[u].remove(this);if(s.isFunction(c))try{c.call(this)}catch(g){t=g instanceof o.UnsubscriptionError?a(g.errors):[g]}if(r.isArray(l)){u=-1;for(var d=l.length;++u<d;){var h=l[u];if(i.isObject(h))try{h.unsubscribe()}catch(g){t=t||[],g instanceof o.UnsubscriptionError?t=t.concat(a(g.errors)):t.push(g)}}}if(t)throw new o.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function l(e){return null!==e&&"object"==typeof e}const u=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let d=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(i))try{i.call(this)}catch(o){t=o instanceof u?h(o.errors):[o]}if(c(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(l(n))try{n.unsubscribe()}catch(o){t=t||[],o instanceof u?t=t.concat(h(o.errors)):t.push(o)}}}if(t)throw new u(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function h(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}const g=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof p?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new f(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new f(this,e,t,n)}}[g](){return this}static create(e,t,n){const r=new p(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class f extends p{constructor(e,t,n,i){let s;super(),this._parentSubscriber=e;let o=this;r(t)?s=t:t&&(s=t.next,n=t.error,i=t.complete,t!==a&&(o=Object.create(t),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(e){return e}function y(...e){return b(e)}function b(e){return 0===e.length?v:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}let _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof p)return e;if(e[g])return e[g]()}return e||t||n?new p(e,t,n):new p(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof p?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=w(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[m](){return this}pipe(...e){return 0===e.length?this:b(e)(this)}toPromise(e){return new(e=w(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function w(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const O=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class I extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class S extends p{constructor(e){super(e),this.destination=e}}let C=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[g](){return new S(this)}lift(e){const t=new A(this,this);return t.operator=e,t}next(e){if(this.closed)throw new O;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new O;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new O;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new O;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new O;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new I(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=(e,t)=>new A(e,t),e})();class A extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function k(e){return e&&"function"==typeof e.schedule}class x extends p{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const P=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=T(),E=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function U(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const F=e=>{if(e&&"function"==typeof e[m])return r=e,e=>{const t=r[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(E(e))return P(e);if(U(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e);if(e&&"function"==typeof e[R])return t=e,e=>{const n=t[R]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=l(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,r};function N(e,t,n,r,i=new x(e,n,r)){if(!i.closed)return t instanceof _?t.subscribe(i):F(t)(i)}class D extends p{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function L(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(e,t))}}class V{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new z(e,this.project,this.thisArg))}}class z extends p{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function j(e,t){return new _(n=>{const r=new d;let i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function B(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new _(n=>{const r=new d;return r.add(t.schedule(()=>{const i=e[m]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(U(e))return function(e,t){return new _(n=>{const r=new d;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(E(e))return j(e,t);if(function(e){return e&&"function"==typeof e[R]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _(n=>{const r=new d;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[R](),r.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())})))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof _?e:new _(F(e))}function H(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(H((n,r)=>B(e(n,r)).pipe(L((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new $(e,n)))}class ${constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new G(e,this.project,this.concurrent))}}class G extends D{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new x(this,t,n),i=this.destination;i.add(r);const s=N(this,e,void 0,void 0,r);s!==r&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function K(e=Number.POSITIVE_INFINITY){return H(v,e)}function W(e,t){return t?j(e,t):new _(P(e))}function q(){return function(e){return e.lift(new Z(e))}}class Z{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new J(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class J extends p{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Q extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new d,e.add(this.source.subscribe(new Y(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}refCount(){return q()(this)}}const X=(()=>{const e=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class Y extends S{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function ee(){return new C}function te(e){return{toString:e}.toString()}function ne(e,t,n){return te(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const re=ne("Inject",e=>({token:e})),ie=ne("Optional"),se=ne("Self"),oe=ne("SkipSelf");var ae=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ce(e){for(let t in e)if(e[t]===ce)return t;throw Error("Could not find renamed property on target object.")}function le(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function de(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function he(e){return ge(e,e[fe])||ge(e,e[ye])}function ge(e,t){return t&&t.token===e?t:null}function pe(e){return e&&(e.hasOwnProperty(me)||e.hasOwnProperty(be))?e[me]:null}const fe=ce({"\u0275prov":ce}),me=ce({"\u0275inj":ce}),ve=ce({"\u0275provFallback":ce}),ye=ce({ngInjectableDef:ce}),be=ce({ngInjectorDef:ce});function _e(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(_e).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function we(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Oe=ce({__forward_ref__:ce});function Ie(e){return e.__forward_ref__=Ie,e.toString=function(){return _e(this())},e}function Se(e){return Ce(e)?e():e}function Ce(e){return"function"==typeof e&&e.hasOwnProperty(Oe)&&e.__forward_ref__===Ie}const Ae="undefined"!=typeof globalThis&&globalThis,ke="undefined"!=typeof window&&window,xe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pe="undefined"!=typeof global&&global,Te=Ae||Pe||ke||xe,Re=ce({"\u0275cmp":ce}),Ee=ce({"\u0275dir":ce}),Ue=ce({"\u0275pipe":ce}),Me=ce({"\u0275mod":ce}),Fe=ce({"\u0275loc":ce}),Ne=ce({"\u0275fac":ce}),De=ce({__NG_ELEMENT_ID__:ce});class Le{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return"InjectionToken "+this._desc}}const Ve=new Le("INJECTOR",-1),ze={},je=/\n/gm,Be=ce({provide:String,useValue:ce});let He,$e=void 0;function Ge(e){const t=$e;return $e=e,t}function Ke(e){const t=He;return He=e,t}function We(e,t=ae.Default){if(void 0===$e)throw new Error("inject() must be called from an injection context");return null===$e?Ze(e,void 0,t):$e.get(e,t&ae.Optional?null:void 0,t)}function qe(e,t=ae.Default){return(He||We)(Se(e),t)}function Ze(e,t,n){const r=he(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ae.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${_e(e)}]`)}function Je(e){const t=[];for(let n=0;n<e.length;n++){const r=Se(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=ae.Default;for(let t=0;t<r.length;t++){const i=r[t];i instanceof ie||"Optional"===i.ngMetadataName||i===ie?n|=ae.Optional:i instanceof oe||"SkipSelf"===i.ngMetadataName||i===oe?n|=ae.SkipSelf:i instanceof se||"Self"===i.ngMetadataName||i===se?n|=ae.Self:e=i instanceof re||i===re?i.token:i}t.push(qe(e,n))}else t.push(qe(r))}return t}class Qe{get(e,t=ze){if(t===ze){const t=new Error(`NullInjectorError: No provider for ${_e(e)}!`);throw t.name="NullInjectorError",t}return t}}class Xe{}class Ye{}function et(e,t){e.forEach(e=>Array.isArray(e)?et(e,t):t(e))}function tt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function nt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function rt(e,t,n){let r=st(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function it(e,t){const n=st(e,t);if(n>=0)return e[1|n]}function st(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const ot=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),at=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ct={},lt=[];let ut=0;function dt(e){return te(()=>{const t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===ot.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||lt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||at.Emulated,id:"c",styles:e.styles||lt,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.directives,o=e.features,a=e.pipes;return i.id+=ut++,i.inputs=mt(e.inputs,r),i.outputs=mt(e.outputs),o&&o.forEach(e=>e(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(ht):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(gt):null,i})}function ht(e){return yt(e)||function(e){return e[Ee]||null}(e)}function gt(e){return function(e){return e[Ue]||null}(e)}const pt={};function ft(e){const t={type:e.type,bootstrap:e.bootstrap||lt,declarations:e.declarations||lt,imports:e.imports||lt,exports:e.exports||lt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&te(()=>{pt[e.id]=e.type}),t}function mt(e,t){if(null==e)return ct;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const vt=dt;function yt(e){return e[Re]||null}function bt(e,t){return e.hasOwnProperty(Ne)?e[Ne]:null}function _t(e,t){const n=e[Me]||null;if(!n&&!0===t)throw new Error(`Type ${_e(e)} does not have '\u0275mod' property.`);return n}function wt(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ot(e){return Array.isArray(e)&&!0===e[1]}function It(e){return 0!=(8&e.flags)}function St(e){return 2==(2&e.flags)}function Ct(e){return 1==(1&e.flags)}function At(e){return null!==e.template}function kt(e){return 0!=(512&e[2])}let xt=void 0;function Pt(e){return!!e.listen}const Tt={createRenderer:(e,t)=>void 0!==xt?xt:"undefined"!=typeof document?document:void 0};function Rt(e){for(;Array.isArray(e);)e=e[0];return e}function Et(e,t){return Rt(t[e+20])}function Ut(e,t){return Rt(t[e.index])}function Mt(e,t){return e.data[t+20]}function Ft(e,t){const n=t[e];return wt(n)?n:n[0]}function Nt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Dt(e){return 128==(128&e[2])}function Lt(e,t){return null===e||null==t?null:e[t]}function Vt(e){e[18]=0}function zt(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const jt={lFrame:an(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Bt(){return jt.bindingsEnabled}function Ht(){return jt.lFrame.lView}function $t(){return jt.lFrame.tView}function Gt(e){jt.lFrame.contextLView=e}function Kt(){return jt.lFrame.previousOrParentTNode}function Wt(e,t){jt.lFrame.previousOrParentTNode=e,jt.lFrame.isParent=t}function qt(){return jt.lFrame.isParent}function Zt(){return jt.checkNoChangesMode}function Jt(e){jt.checkNoChangesMode=e}function Qt(){const e=jt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Xt(){return jt.lFrame.bindingIndex++}function Yt(e){const t=jt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function en(e,t){const n=jt.lFrame;n.bindingIndex=n.bindingRootIndex=e,tn(t)}function tn(e){jt.lFrame.currentDirectiveIndex=e}function nn(e){jt.lFrame.currentQueryIndex=e}function rn(e,t){const n=on();jt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function sn(e,t){const n=on(),r=e[1];jt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function on(){const e=jt.lFrame,t=null===e?null:e.child;return null===t?an(e):t}function an(e){const t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function cn(){const e=jt.lFrame;return jt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}const ln=cn;function un(){const e=cn();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function dn(){return jt.lFrame.selectedIndex}function hn(e){jt.lFrame.selectedIndex=e}function gn(){const e=jt.lFrame;return Mt(e.tView,e.selectedIndex)}function pn(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n];t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked)),t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked)),null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}}function fn(e,t,n){yn(e,t,3,n)}function mn(e,t,n,r){(3&e[2])===n&&yn(e,t,n,r)}function vn(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function yn(e,t,n,r){const i=null!=r?r:-1;let s=0;for(let o=void 0!==r?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(s=t[o],null!=r&&s>=r)break}else t[o]<0&&(e[18]+=65536),(s<i||-1==i)&&(bn(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function bn(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];i?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,s.call(o)):s.call(o)}class _n{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function wn(e,t,n){const r=Pt(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];In(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function On(e){return 3===e||4===e||6===e}function In(e){return 64===e.charCodeAt(0)}function Sn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Cn(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Cn(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function An(e){return-1!==e}function kn(e){return 32767&e}function xn(e){return e>>16}function Pn(e,t){let n=xn(e),r=t;for(;n>0;)r=r[15],n--;return r}function Tn(e){return"string"==typeof e?e:null==e?"":""+e}function Rn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Tn(e)}const En=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Te))();function Un(e){return e instanceof Function?e():e}let Mn=!0;function Fn(e){const t=Mn;return Mn=e,t}let Nn=0;function Dn(e,t){const n=Vn(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ln(r.data,e),Ln(t,null),Ln(r.blueprint,null));const i=zn(e,t),s=e.injectorIndex;if(An(i)){const e=kn(i),n=Pn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Ln(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Vn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function zn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=t[6],r=1;for(;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function jn(e,t,n){!function(e,t,n){let r="string"!=typeof n?n[De]:n.charCodeAt(0)||0;null==r&&(r=n[De]=Nn++);const i=255&r,s=1<<i,o=64&i,a=32&i,c=t.data;128&i?o?a?c[e+7]|=s:c[e+6]|=s:a?c[e+5]|=s:c[e+4]|=s:o?a?c[e+3]|=s:c[e+2]|=s:a?c[e+1]|=s:c[e]|=s}(e,t,n)}function Bn(e,t,n,r=ae.Default,i){if(null!==e){const i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e[De];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof i){rn(t,e);try{const e=i();if(null!=e||r&ae.Optional)return e;throw new Error(`No provider for ${Rn(n)}!`)}finally{ln()}}else if("number"==typeof i){if(-1===i)return new qn(e,t);let s=null,o=Vn(e,t),a=-1,c=r&ae.Host?t[16][6]:null;for((-1===o||r&ae.SkipSelf)&&(a=-1===o?zn(e,t):t[o+8],Wn(r,!1)?(s=t[1],o=kn(a),t=Pn(a,t)):o=-1);-1!==o;){a=t[o+8];const e=t[1];if(Kn(i,o,e.data)){const e=$n(o,t,n,s,r,c);if(e!==Hn)return e}Wn(r,t[1].data[o+8]===c)&&Kn(i,o,t)?(s=e,o=kn(a),t=Pn(a,t)):o=-1}}}if(r&ae.Optional&&void 0===i&&(i=null),0==(r&(ae.Self|ae.Host))){const e=t[9],s=Ke(void 0);try{return e?e.get(n,i,r&ae.Optional):Ze(n,i,r&ae.Optional)}finally{Ke(s)}}if(r&ae.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Rn(n)}]`)}const Hn={};function $n(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],c=function(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=65535&s,c=e.directiveStart,l=s>>16,u=i?a+l:e.directiveEnd;for(let d=r?a:a+l;d<u;d++){const e=o[d];if(d<c&&n===e||d>=c&&e.type===n)return d}if(i){const e=o[c];if(e&&At(e)&&e.type===n)return c}return null}(a,o,n,null==r?St(a)&&Mn:r!=o&&3===a.type,i&ae.Host&&s===a);return null!==c?Gn(t,o,c,a):Hn}function Gn(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof _n){const o=i;if(o.resolving)throw new Error("Circular dep for "+Rn(s[n]));const a=Fn(o.canSeeViewProviders);let c;o.resolving=!0,o.injectImpl&&(c=Ke(o.injectImpl)),rn(e,r);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{onChanges:r,onInit:i,doCheck:s}=t;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{o.injectImpl&&Ke(c),Fn(a),o.resolving=!1,ln()}}return i}function Kn(e,t,n){const r=64&e,i=32&e;let s;return s=128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t],!!(s&1<<e)}function Wn(e,t){return!(e&ae.Self||e&ae.Host&&t)}class qn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Bn(this._tNode,this._lView,e,void 0,t)}}function Zn(e){return te(()=>{const t=Object.getPrototypeOf(e.prototype).constructor,n=t[Ne]||function e(t){const n=t;if(Ce(t))return()=>{const t=e(Se(n));return t?t():null};let r=bt(n);if(null===r){const e=pe(n);r=e&&e.factory}return r||null}(t);return null!==n?n:e=>new e})}function Jn(e){return e.ngDebugContext}function Qn(e){return e.ngOriginalError}function Xn(e,...t){e.error(...t)}class Yn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Xn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Jn(e)?Jn(e):this._findContext(Qn(e)):null}_findOriginalError(e){let t=Qn(e);for(;t&&Qn(t);)t=Qn(t);return t}}class er{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}function tr(e){return e instanceof er?e.changingThisBreaksApplicationSecurity:e}let nr=!0,rr=!1;function ir(){return rr=!0,nr}const sr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,or=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,ar=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();function cr(e){const t=function(){const e=Ht();return e&&e[12]}();return t?t.sanitize(ar.URL,e)||"":function(e,t){const n=function(e){return e instanceof er&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===t}(e,"URL")?tr(e):(n=Tn(e),(n=String(n)).match(sr)||n.match(or)?n:(ir()&&console.warn(`WARNING: sanitizing unsafe URL value ${n} (see http://g.co/ng/security#xss)`),"unsafe:"+n));var n}function lr(e,t){e.__ngContext__=t}function ur(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function dr(){throw new Error("Cannot mix multi providers and regular providers")}function hr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}function gr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==hr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function pr(e){return 0===e.type&&"ng-template"!==e.tagName}function fr(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function mr(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(On(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!fr(e,c,n)||""===c&&1===t.length){if(vr(r))return!1;o=!0}}else{const l=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!gr(e.attrs,l,n)){if(vr(r))return!1;o=!0}continue}const u=yr(8&r?"class":c,i,pr(e),n);if(-1===u){if(vr(r))return!1;o=!0;continue}if(""!==l){let e;e=u>s?"":i[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==hr(t,l,0)||2&r&&l!==e){if(vr(r))return!1;o=!0}}}}else{if(!o&&!vr(r)&&!vr(c))return!1;if(o&&vr(c))continue;o=!1,r=c|1&r}}return vr(r)||o}function vr(e){return 0==(1&e)}function yr(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function br(e,t,n=!1){for(let r=0;r<t.length;r++)if(mr(e,t[r],n))return!0;return!1}function _r(e,t){return e?":not("+t.trim()+")":t}function wr(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||vr(o)||(t+=_r(s,i),i=""),r=o,s=s||!vr(r);n++}return""!==i&&(t+=_r(s,i)),t}const Or={};function Ir(e){const t=e[3];return Ot(t)?t[3]:t}function Sr(e){return Ar(e[13])}function Cr(e){return Ar(e[4])}function Ar(e){for(;null!==e&&!Ot(e);)e=e[4];return e}function kr(e){xr($t(),Ht(),dn()+e,Zt())}function xr(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&fn(t,r,n)}else{const r=e.preOrderHooks;null!==r&&mn(t,r,0,n)}hn(n)}function Pr(e,t){return e<<17|t<<2}function Tr(e){return e>>17&32767}function Rr(e){return 2|e}function Er(e){return(131068&e)>>2}function Ur(e,t){return-131069&e|t<<2}function Mr(e){return 1|e}function Fr(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];nn(i),n.contentQueries(2,t[s],s)}}}function Nr(e,t,n){return Pt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Dr(e,t,n,r,i,s,o,a,c,l){const u=t.blueprint.slice();return u[0]=i,u[2]=140|r,Vt(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=c||e&&e[12]||null,u[9]=l||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function Lr(e,t,n,r,i,s){const o=n+20,a=e.data[o]||function(e,t,n,r,i,s){const o=Kt(),a=qt(),c=a?o:o&&o.parent,l=e.data[n]=Wr(0,c&&c!==t?c:null,r,n,i,s);return null===e.firstChild&&(e.firstChild=l),o&&(!a||null!=o.child||null===l.parent&&2!==o.type?a||(o.next=l):o.child=l),l}(e,t,o,r,i,s);return Wt(a,!0),a}function Vr(e,t,n){sn(t,t[6]);try{const r=e.viewQuery;null!==r&&fi(1,r,n);const i=e.template;null!==i&&Br(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Fr(e,t),e.staticViewQueries&&fi(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)ui(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,un()}}function zr(e,t,n,r){const i=t[2];if(256==(256&i))return;sn(t,t[6]);const s=Zt();try{Vt(t),jt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Br(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&fn(t,n,null)}else{const n=e.preOrderHooks;null!==n&&mn(t,n,0,null),vn(t,0)}if(function(e){for(let t=Sr(e);null!==t;t=Cr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&zt(r,1),n[2]|=1024}}}(t),function(e){for(let t=Sr(e);null!==t;t=Cr(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Dt(n)&&zr(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Fr(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&fn(t,n)}else{const n=e.contentHooks;null!==n&&mn(t,n,1),vn(t,1)}!function(e,t){try{const n=e.expandoInstructions;if(null!==n){let r=e.expandoStartIndex,i=-1,s=-1;for(let e=0;e<n.length;e++){const o=n[e];"number"==typeof o?o<=0?(s=0-o,hn(s),r+=9+n[++e],i=r):r+=o:(null!==o&&(en(r,i),o(2,t[i])),i++)}}}finally{hn(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)li(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&fi(2,c,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&fn(t,n)}else{const n=e.viewHooks;null!==n&&mn(t,n,2),vn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,zt(t[3],-1))}finally{un()}}function jr(e,t,n,r){const i=t[10],s=!Zt(),o=4==(4&t[2]);try{s&&!o&&i.begin&&i.begin(),o&&Vr(e,t,r),zr(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Br(e,t,n,r,i){const s=dn();try{hn(-1),2&r&&t.length>20&&xr(e,t,0,Zt()),n(r,i)}finally{hn(s)}}function Hr(e,t,n){Bt()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Dn(n,t),lr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=At(r);s&&si(t,n,r);const c=Gn(t,e,a,n);lr(c,t),null!==o&&oi(0,a-i,c,r,0,o),s&&(Ft(n.index,t)[8]=c)}}(e,t,n,Ut(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=e.expandoInstructions,o=e.firstCreatePass,a=n.index-20,c=jt.lFrame.currentDirectiveIndex;try{hn(a);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];tn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Yr(r,i):o&&s.push(null)}}finally{hn(-1),tn(c)}}(e,t,n))}function $r(e,t,n=Ut){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Gr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Kr(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Kr(e,t,n,r,i,s,o,a,c,l){const u=20+r,d=u+i,h=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Or);return n}(u,d);return h[1]={type:e,id:t,blueprint:h,template:n,queries:null,viewQuery:a,node:null,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:l,incompleteFirstPass:!1}}function Wr(e,t,n,r,i,s){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function qr(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Zr(e,t,n,r,i,s,o,a){const c=Ut(t,n);let l,u=t.inputs;var d;!a&&null!=u&&(l=u[r])?(bi(e,n,l,r,i),St(t)&&function(e,t){const n=Ft(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(d=r)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,i=null!=o?o(i,t.tagName||"",r):i,Pt(s)?s.setProperty(c,r,i):In(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Jr(e,t,n,r){let i=!1;if(Bt()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];br(n,o.selectors,!1)&&(i||(i=[]),jn(Dn(n,t),e,o.type),At(o)?(2&n.flags&&ur(n),ti(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){let r=0;i=!0,ri(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}ei(e,n,s.length);let a=!1,c=!1;for(let i=0;i<s.length;i++){const l=s[i];n.mergedAttrs=Sn(n.mergedAttrs,l.hostAttrs),ii(e,t,l),ni(e.data.length-1,l,o),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128),!a&&(l.onChanges||l.onInit||l.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-20),a=!0),c||!l.onChanges&&!l.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-20),c=!0),Qr(e,l),r+=l.hostVars}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,l=null===i||pr(t)?null:ai(n,i);s.push(l),o=qr(n,c,o),a=qr(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n),Xr(e,t,r)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new Error(`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=Sn(n.mergedAttrs,n.attrs),i}function Qr(e,t){const n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Xr(e,t,n){for(let r=0;r<n;r++)t.push(Or),e.blueprint.push(Or),e.data.push(null)}function Yr(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ei(e,t,n){const r=20-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function ti(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ni(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;At(t)&&(n[""]=e)}}function ri(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function ii(e,t,n){e.data.push(n);const r=n.factory||(n.factory=bt(n.type)),i=new _n(r,At(n),null);e.blueprint.push(i),t.push(i)}function si(e,t,n){const r=Ut(t,e),i=Gr(n),s=e[10],o=di(e,Dr(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n)));e[t.index]=o}function oi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function ai(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function ci(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function li(e,t){const n=Ft(t,e);if(Dt(n)){const e=n[1];80&n[2]?zr(e,n,e.template,n[8]):n[5]>0&&function e(t){for(let r=Sr(t);null!==r;r=Cr(r))for(let t=10;t<r.length;t++){const n=r[t];if(1024&n[2]){const e=n[1];zr(e,n,e.template,n[8])}else n[5]>0&&e(n)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ft(n[r],t);Dt(i)&&i[5]>0&&e(i)}}(n)}}function ui(e,t){const n=Ft(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Vr(r,n,n[8])}function di(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function hi(e){for(;e;){e[2]|=64;const t=Ir(e);if(kt(e)&&!t)return e;e=t}return null}function gi(e,t,n){const r=t[10];r.begin&&r.begin();try{zr(e,t,e.template,n)}catch(i){throw yi(t,i),i}finally{r.end&&r.end()}}function pi(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Nt(n),i=r[1];jr(i,r,i.template,n)}}(e[8])}function fi(e,t,n){nn(0),t(e,n)}const mi=(()=>Promise.resolve(null))();function vi(e){return e[7]||(e[7]=[])}function yi(e,t){const n=e[9],r=n?n.get(Yn,null):null;r&&r.handleError(t)}function bi(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],l=e.data[o];null!==l.setInput?l.setInput(c,i,r,a):c[a]=i}}function _i(e,t,n){const r=Et(t,e),i=e[11];Pt(i)?i.setValue(r,n):r.textContent=n}function wi(e,t){const n=t[3];return-1===e.index?Ot(n)?n:null:n}function Oi(e,t){const n=wi(e,t);return n?Ui(t[11],n[7]):null}function Ii(e,t,n,r,i){if(null!=r){let s,o=!1;Ot(r)?s=r:wt(r)&&(o=!0,r=r[0]);const a=Rt(r);0===e&&null!==n?null==i?Ri(t,n,a):Ti(t,n,a,i||null):1===e&&null!==n?Ti(t,n,a,i||null):2===e?function(e,t,n){const r=Ui(e,t);r&&function(e,t,n,r){Pt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Rt(n)&&Ii(t,e,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];Di(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Si(e,t,n,r){const i=Oi(e.node,t);i&&Di(e,t,t[11],n?1:2,i,r)}function Ci(e,t){const n=e[9],r=n.indexOf(t);1024&t[2]&&zt(t[3],-1),n.splice(r,1)}function Ai(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Ci(i,r),t>0&&(e[n-1][4]=r[4]);const s=nt(e,10+t);Si(r[1],r,!1,null);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function ki(e,t){if(!(256&t[2])){const n=t[11];Pt(n)&&n.destroyNode&&Di(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Pi(e[1],e);for(;t;){let n=null;if(wt(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)wt(t)&&Pi(t[1],t),t=xi(t,e);null===t&&(t=e),wt(t)&&Pi(t[1],t),n=t&&t[4]}t=n}}(t)}}function xi(e,t){let n;return wt(e)&&(n=e[6])&&2===n.type?wi(n,e):e[3]===t?null:e[3]}function Pi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof _n)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2)t[n+1].call(e[t[n]]);else t.call(e)}}}(e,t),function(e,t){const n=e.cleanup;if(null!==n){const e=t[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],s="function"==typeof i?i(t):Rt(t[i]),o=e[n[r+2]],a=n[r+3];"boolean"==typeof a?s.removeEventListener(n[r],o,a):a>=0?e[a]():e[-a].unsubscribe(),r+=2}else n[r].call(e[n[r+1]]);t[7]=null}}(e,t);const n=t[6];n&&3===n.type&&Pt(t[11])&&t[11].destroy();const r=t[17];if(null!==r&&Ot(t[3])){r!==t[3]&&Ci(r,t);const n=t[19];null!==n&&n.detachView(e)}}}function Ti(e,t,n,r){Pt(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function Ri(e,t,n){Pt(e)?e.appendChild(t,n):t.appendChild(n)}function Ei(e,t,n,r){null!==r?Ti(e,t,n,r):Ri(e,t,n)}function Ui(e,t){return Pt(e)?e.parentNode(t):t.parentNode}function Mi(e,t,n,r){const i=function(e,t,n){let r=t.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){const e=n[6];return 2===e.type?Oi(e,n):n[0]}if(t&&5===t.type&&4&t.flags)return Ut(t,n).parentNode;if(2&r.flags){const t=e.data,n=t[t[r.index].directiveStart].encapsulation;if(n!==at.ShadowDom&&n!==at.Native)return null}return Ut(r,n)}(e,r,t);if(null!=i){const e=t[11],s=function(e,t){if(2===e.type){const n=wi(e,t);return null===n?null:Fi(n.indexOf(t,10)-10,n)}return 4===e.type||5===e.type?Ut(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(let t=0;t<n.length;t++)Ei(e,i,n[t],s);else Ei(e,i,n,s)}}function Fi(e,t){const n=10+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return function e(t,n){if(null!==n){const r=n.type;if(3===r)return Ut(n,t);if(0===r)return Fi(-1,t[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return e(t,r);{const e=t[n.index];return Ot(e)?Fi(-1,e):Rt(e)}}{const r=t[16],i=r[6],s=Ir(r),o=i.projection[n.projection];return null!=o?e(s,o):e(t,n.next)}}return null}(e,r)}return t[7]}function Ni(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;o&&0===t&&(a&&lr(Rt(a),r),n.flags|=4),64!=(64&n.flags)&&(4===c||5===c?(Ni(e,t,n.child,r,i,s,!1),Ii(t,e,i,a,s)):1===c?Li(e,t,r,n,i,s):Ii(t,e,i,a,s)),n=o?n.projectionNext:n.next}}function Di(e,t,n,r,i,s){Ni(n,r,e.node.child,t,i,s,!1)}function Li(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Ii(t,e,i,a[c],s);else Ni(e,t,a,o[3],i,s,!0)}function Vi(e,t,n){Pt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function zi(e,t,n){Pt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}class ji{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const e=this._lView;return null==e[0]?function e(t,n,r,i,s=!1){for(;null!==r;){const o=n[r.index];if(null!==o&&i.push(Rt(o)),Ot(o))for(let t=10;t<o.length;t++){const n=o[t],r=n[1].firstChild;null!==r&&e(n[1],n,r,i)}const a=r.type;if(4===a||5===a)e(t,n,r.child,i);else if(1===a){const t=n[16],s=t[6].projection[r.projection];if(Array.isArray(s))i.push(...s);else{const n=Ir(t);e(n[1],n,s,i,!0)}}r=s?r.projectionNext:r.next}return i}(e[1],e,e[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}ki(this._lView[1],this._lView)}onDestroy(e){var t,n,r;t=this._lView[1],r=e,vi(n=this._lView).push(r),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(n[7].length-1,null)}markForCheck(){hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){gi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Jt(!0);try{gi(e,t,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,Di(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Bi extends ji{constructor(e){super(e),this._view=e}detectChanges(){pi(this._view)}checkNoChanges(){!function(e){Jt(!0);try{pi(e)}finally{Jt(!1)}}(this._view)}get context(){return null}}let Hi,$i,Gi;function Ki(e,t,n){return Hi||(Hi=class extends e{}),new Hi(Ut(t,n))}let Wi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>qi(),e})();const qi=function(e=!1){return function(e,t,n){if(!n&&St(e)){const n=Ft(e.index,t);return new ji(n,n)}return 3===e.type||0===e.type||4===e.type||5===e.type?new ji(t[16],t):null}(Kt(),Ht(),e)},Zi=new Le("Set Injector scope."),Ji={},Qi={},Xi=[];let Yi=void 0;function es(){return void 0===Yi&&(Yi=new Qe),Yi}function ts(e,t=null,n=null,r){return new ns(e,n,t||es(),r)}class ns{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&et(t,n=>this.processProvider(n,e,t)),et([e],e=>this.processInjectorType(e,[],i)),this.records.set(Ve,ss(void 0,this));const s=this.records.get(Zi);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:_e(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=ze,n=ae.Default){this.assertNotDestroyed();const r=Ge(this);try{if(!(n&ae.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Le)&&he(e);t=n&&this.injectableDefInScope(n)?ss(rs(e),Ji):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&ae.Self?es():this.parent).get(e,t=n&ae.Optional&&t===ze?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(_e(e)),r)throw s;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=_e(t);if(Array.isArray(t))i=t.map(_e).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):_e(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(je,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{Ge(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(_e(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=Se(e)))return!1;let r=pe(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=pe(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{et(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];et(r,e=>this.processProvider(e,n,r||Xi))}}this.injectorDefTypes.add(s),this.records.set(s,ss(r.factory,Ji));const a=r.providers;if(null!=a&&!o){const t=e;et(a,e=>this.processProvider(e,t,a))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=as(e=Se(e))?e:Se(e&&e.provide);const i=function(e,t,n){return os(e)?ss(void 0,e.useValue):ss(is(e,t,n),Ji)}(e,t,n);if(as(e)||!0!==e.multi){const e=this.records.get(r);e&&void 0!==e.multi&&dr()}else{let t=this.records.get(r);t?void 0===t.multi&&dr():(t=ss(void 0,Ji,!0),t.factory=()=>Je(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===Qi?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(_e(e)):t.value===Ji&&(t.value=Qi,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function rs(e){const t=he(e),n=null!==t?t.factory:bt(e);if(null!==n)return n;const r=pe(e);if(null!==r)return r.factory;if(e instanceof Le)throw new Error(`Token ${_e(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${_e(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[fe]||e[ye]||e[ve]&&e[ve]());if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function is(e,t,n){let r=void 0;if(as(e)){const t=Se(e);return bt(t)||rs(t)}if(os(e))r=()=>Se(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Je(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>qe(Se(e.useExisting));else{const i=Se(e&&(e.useClass||e.provide));if(i||function(e,t,n){let r="";throw e&&t&&(r=` - only instances of Provider and Type are allowed, got: [${t.map(e=>e==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${_e(e)}'`+r)}(t,n,e),!function(e){return!!e.deps}(e))return bt(i)||rs(i);r=()=>new i(...Je(e.deps))}var i;return r}function ss(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function os(e){return null!==e&&"object"==typeof e&&Be in e}function as(e){return"function"==typeof e}const cs=function(e,t,n){return function(e,t=null,n=null,r){const i=ts(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let ls=(()=>{class e{static create(e,t){return Array.isArray(e)?cs(e,t,""):cs(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=ze,e.NULL=new Qe,e.\u0275prov=ue({token:e,providedIn:"any",factory:()=>qe(Ve)}),e.__NG_ELEMENT_ID__=-1,e})();const us=new Le("AnalyzeForEntryComponents");let ds=new Map;const hs=new Set;function gs(e){return"string"==typeof e?e:e.text()}function ps(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=we(i,e):2==s&&(r=we(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}let fs=null;function ms(){if(!fs){const e=Te.Symbol;if(e&&e.iterator)fs=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(fs=n)}}}return fs}function vs(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function ys(e){return!!bs(e)&&(Array.isArray(e)||!(e instanceof Map)&&ms()in e)}function bs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function _s(e,t,n){return e[t]=n}function ws(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Os(e,t,n,r){const i=ws(e,t,n);return ws(e,t+1,r)||i}function Is(e,t,n,r){const i=Ht();return ws(i,Xt(),t)&&($t(),function(e,t,n,r,i,s){const o=Ut(e,t),a=t[11];if(null==r)Pt(a)?a.removeAttribute(o,n,s):o.removeAttribute(n);else{const t=null==i?Tn(r):i(r,e.tagName||"",n);Pt(a)?a.setAttribute(o,n,t,s):s?o.setAttributeNS(s,n,t):o.setAttribute(n,t)}}(gn(),i,e,t,n,r)),Is}function Ss(e,t,n,r,i,s,o,a){const c=Ht(),l=$t(),u=e+20,d=l.firstCreatePass?function(e,t,n,r,i,s,o,a,c){const l=t.consts,u=Lr(t,n[6],e,0,o||null,Lt(l,a));Jr(t,n,u,Lt(l,c)),pn(t,u);const d=u.tViews=Kr(2,-1,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l),h=Wr(0,null,2,-1,null,null);return h.injectorIndex=u.injectorIndex,d.node=h,null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(e,l,c,t,n,r,i,s,o):l.data[u];Wt(d,!1);const h=c[11].createComment("");Mi(l,c,h,d),lr(h,c),di(c,c[u]=ci(h,c,h,d)),Ct(d)&&Hr(l,c,d),null!=o&&$r(c,d,a)}function Cs(e){return function(e,t){return e[t+20]}(jt.lFrame.contextLView,e)}function As(e,t=ae.Default){const n=Ht();return null==n?qe(e,t):Bn(Kt(),n,Se(e),t)}function ks(){throw new Error("invalid")}function xs(e,t,n){const r=Ht();return ws(r,Xt(),t)&&Zr($t(),gn(),r,e,t,r[11],n,!1),xs}function Ps(e,t,n,r,i){const s=i?"class":"style";bi(e,n,t.inputs[s],s,r)}function Ts(e,t,n,r){const i=Ht(),s=$t(),o=20+e,a=i[11],c=i[o]=Nr(t,a,jt.lFrame.currentNamespace),l=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=Lt(a,s),l=Lr(t,n[6],e,3,i,c);return Jr(t,n,l,Lt(a,o)),null!==l.attrs&&ps(l,l.attrs,!1),null!==l.mergedAttrs&&ps(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(e,s,i,0,t,n,r):s.data[o];Wt(l,!0);const u=l.mergedAttrs;null!==u&&wn(a,c,u);const d=l.classes;null!==d&&zi(a,c,d);const h=l.styles;null!==h&&Vi(a,c,h),Mi(s,i,c,l),0===jt.lFrame.elementDepthCount&&lr(c,i),jt.lFrame.elementDepthCount++,Ct(l)&&(Hr(s,i,l),function(e,t,n){if(It(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}(s,l,i)),null!==r&&$r(i,l)}function Rs(){let e=Kt();qt()?jt.lFrame.isParent=!1:(e=e.parent,Wt(e,!1));const t=e;jt.lFrame.elementDepthCount--;const n=$t();n.firstCreatePass&&(pn(n,e),It(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ps(n,t,Ht(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ps(n,t,Ht(),t.stylesWithoutHost,!1)}function Es(e,t,n,r){Ts(e,t,n,r),Rs()}function Us(){return Ht()}function Ms(e){return!!e&&"function"==typeof e.then}function Fs(e){return!!e&&"function"==typeof e.subscribe}function Ns(e,t,n=!1,r){const i=Ht(),s=$t(),o=Kt();return function(e,t,n,r,i,s,o=!1,a){const c=Ct(r),l=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),u=vi(t);let d=!0;if(3===r.type){const h=Ut(r,t),g=a?a(h):ct,p=g.target||h,f=u.length,m=a?e=>a(Rt(e[r.index])).target:r.index;if(Pt(n)){let o=null;if(!a&&c&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,d=!1;else{s=Ls(r,t,s,!1);const e=n.listen(g.name||p,i,s);u.push(s,e),l&&l.push(i,m,f,f+1)}}else s=Ls(r,t,s,!0),p.addEventListener(i,s,o),u.push(s),l&&l.push(i,m,f,o)}const h=r.outputs;let g;if(d&&null!==h&&(g=h[i])){const e=g.length;if(e)for(let n=0;n<e;n+=2){const e=t[g[n]][g[n+1]].subscribe(s),o=u.length;u.push(s,e),l&&l.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,n,r),Ns}function Ds(e,t,n){try{return!1!==t(n)}catch(r){return yi(e,r),!1}}function Ls(e,t,n,r){return function i(s){if(s===Function)return n;const o=2&e.flags?Ft(e.index,t):t;0==(32&t[2])&&hi(o);let a=Ds(t,n,s),c=i.__ngNextListenerFn__;for(;c;)a=Ds(t,c,s)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Vs(e=1){return function(e){return(jt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,jt.lFrame.contextLView))[8]}(e)}const zs=[];function js(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?Tr(s):Er(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];Bs(e[a],t)&&(c=!0,e[a+1]=r?Mr(n):Rr(n)),a=r?Tr(n):Er(n)}c&&(e[n+1]=r?Rr(s):Mr(s))}function Bs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&st(e,t)>=0}function Hs(e,t){return function(e,t,n,r){const i=Ht(),s=$t(),o=Yt(2);if(s.firstUpdatePass&&function(e,t,n,r){const i=e.data;if(null===i[n+1]){const r=i[dn()+20],s=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(r)&&null===t&&!s&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=jt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=t.residualClasses;if(null===i)0===t.classBindings&&(n=Gs(n=$s(null,e,t,n,!0),t.attrs,!0),s=null);else{const r=t.directiveStylingLast;if(-1===r||e[r]!==i)if(n=$s(i,e,t,n,!0),null===s){let n=function(e,t,n){const r=t.classBindings;if(0!==Er(r))return e[Tr(r)]}(e,t);void 0!==n&&Array.isArray(n)&&(n=$s(null,e,t,n[1],!0),n=Gs(n,t.attrs,!0),function(e,t,n,r){e[Tr(t.classBindings)]=r}(e,t,0,n))}else s=function(e,t,n){let r=void 0;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Gs(r,e[s].hostAttrs,!0);return Gs(r,t.attrs,!0)}(e,t)}return void 0!==s&&(t.residualClasses=s),n}(i,r,t),function(e,t,n,r,i,s){let o=t.classBindings,a=Tr(o),c=Er(o);e[r]=n;let l,u=!1;if(Array.isArray(n)){const e=n;l=e[1],(null===l||st(e,l)>0)&&(u=!0)}else l=n;if(i)if(0!==c){const t=Tr(e[a+1]);e[r+1]=Pr(t,a),0!==t&&(e[t+1]=Ur(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Pr(a,0),0!==a&&(e[a+1]=Ur(e[a+1],r)),a=r;else e[r+1]=Pr(c,0),0===a?a=r:e[c+1]=Ur(e[c+1],r),c=r;u&&(e[r+1]=Rr(e[r+1])),js(e,l,r,!0),js(e,l,r,!1),function(e,t,n,r,i){const s=e.residualClasses;null!=s&&"string"==typeof t&&st(s,t)>=0&&(n[r+1]=Mr(n[r+1]))}(t,l,e,r),o=Pr(a,c),t.classBindings=o}(i,r,t,n,s)}}(s,e,o),t!==Or&&ws(i,o,t)){let r;null==n&&(r=function(){const e=jt.lFrame;return null===e?null:e.currentSanitizer}())&&(n=r),function(e,t,n,r,i,s,o,a){if(3!==t.type)return;const c=e.data,l=c[a+1];Ws(1==(1&l)?Ks(c,t,n,i,Er(l),!0):void 0)||(Ws(s)||function(e){return 2==(2&e)}(l)&&(s=Ks(c,null,n,i,a,!0)),function(e,t,n,r,i){const s=Pt(e);i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r)}(r,0,Et(dn(),n),i,s))}(s,s.data[dn()+20],i,i[11],e,i[o+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=_e(tr(e)))),e}(t,n),0,o)}}(e,t,null),Hs}function $s(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=Gs(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Gs(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),rt(e,o,!!n||t[++s]))}return void 0===e?null:e}function Ks(e,t,n,r,i,s){const o=null===t;let a=void 0;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,l=null===c;let u=n[i+1];u===Or&&(u=l?zs:void 0);let d=l?it(u,r):c===r?u:void 0;if(s&&!Ws(d)&&(d=it(t,r)),Ws(d)&&(a=d,o))return a;const h=e[i+1];i=o?Tr(h):Er(h)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=it(e,r))}return a}function Ws(e){return void 0!==e}function qs(e,t=""){const n=Ht(),r=$t(),i=e+20,s=r.firstCreatePass?Lr(r,n[6],e,3,null,null):r.data[i],o=n[i]=function(e,t){return Pt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Mi(r,n,o,s),Wt(s,!1)}function Zs(e){return Js("",e,""),Zs}function Js(e,t,n){const r=Ht(),i=function(e,t,n,r){return ws(e,Xt(),n)?t+Tn(n)+r:Or}(r,e,t,n);return i!==Or&&_i(r,dn(),i),Js}function Qs(e,t,n,r,i){const s=Ht(),o=function(e,t,n,r,i,s){const o=Os(e,jt.lFrame.bindingIndex,n,i);return Yt(2),o?t+Tn(n)+r+Tn(i)+s:Or}(s,e,t,n,r,i);return o!==Or&&_i(s,dn(),o),Qs}function Xs(e,t,n){const r=Ht();return ws(r,Xt(),t)&&Zr($t(),gn(),r,e,t,r[11],n,!0),Xs}function Ys(e,t){const n=Nt(e)[1],r=n.data.length-1;pn(n,{directiveStart:r,directiveEnd:r+1})}function eo(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i=void 0;if(At(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=to(e.inputs),t.declaredInputs=to(e.declaredInputs),t.outputs=to(e.outputs);const n=i.hostBindings;n&&io(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&no(e,s),o&&ro(e,o),le(e.inputs,i.inputs),le(e.declaredInputs,i.declaredInputs),le(e.outputs,i.outputs),At(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}t.afterContentChecked=t.afterContentChecked||i.afterContentChecked,t.afterContentInit=e.afterContentInit||i.afterContentInit,t.afterViewChecked=e.afterViewChecked||i.afterViewChecked,t.afterViewInit=e.afterViewInit||i.afterViewInit,t.doCheck=e.doCheck||i.doCheck,t.onDestroy=e.onDestroy||i.onDestroy,t.onInit=e.onInit||i.onInit}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===eo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Sn(i.hostAttrs,n=Sn(n,i.hostAttrs))}}(r)}function to(e){return e===ct?{}:e===lt?[]:e}function no(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function ro(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function io(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}class so{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function oo(e){e.type.prototype.ngOnChanges&&(e.setInput=ao,e.onChanges=function(){const e=co(this),t=e&&e.current;if(t){const n=e.previous;if(n===ct)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}})}function ao(e,t,n,r){const i=co(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ct,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new so(c&&c.currentValue,t,o===ct),e[r]=t}function co(e){return e.__ngSimpleChanges__||null}function lo(e,t,n,r,i){if(e=Se(e),Array.isArray(e))for(let s=0;s<e.length;s++)lo(e[s],t,n,r,i);else{const s=$t(),o=Ht();let a=as(e)?e:Se(e.provide),c=is(e);const l=Kt(),u=65535&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>16;if(as(e)||!e.multi){const r=new _n(c,i,As),g=go(a,t,i?u:u+h,d);-1===g?(jn(Dn(l,o),s,a),uo(s,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(r),o.push(r)):(n[g]=r,o[g]=r)}else{const g=go(a,t,u+h,d),p=go(a,t,u,u+h),f=g>=0&&n[g],m=p>=0&&n[p];if(i&&!m||!i&&!f){jn(Dn(l,o),s,a);const u=function(e,t,n,r,i){const s=new _n(e,n,As);return s.multi=[],s.index=t,s.componentProviders=0,ho(s,i,r&&!n),s}(i?fo:po,n.length,i,r,c);!i&&m&&(n[p].providerFactory=u),uo(s,e,t.length,0),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(u),o.push(u)}else uo(s,e,g>-1?g:p,ho(n[i?p:g],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function uo(e,t,n,r){const i=as(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function ho(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function go(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function po(e,t,n,r){return mo(this.multi,[])}function fo(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Gn(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),mo(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],mo(i,s);return s}function mo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function vo(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=$t();if(r.firstCreatePass){const i=At(e);lo(n,r.data,r.blueprint,i,!0),lo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}oo.ngInherit=!0;class yo{}class bo{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${_e(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let _o=(()=>{class e{}return e.NULL=new bo,e})(),wo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>Oo(e),e})();const Oo=function(e){return Ki(e,Kt(),Ht())};class Io{}const So=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let Co=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ao(),e})();const Ao=function(){const e=Ht(),t=Ft(Kt().index,e);return function(e){const t=e[11];if(Pt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(wt(t)?t:e)};let ko=(()=>{class e{}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>null}),e})();class xo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Po=new xo("9.1.11");class To{constructor(){}supports(e){return ys(e)}create(e){return new Eo(e)}}const Ro=(e,t)=>t;class Eo{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ro}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<No(n,r,i)?t:n,o=No(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ys(e))throw new Error(`Error trying to diff '${_e(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&vs(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),vs(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ms()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&vs(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),vs(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(vs(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(vs(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Uo(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Fo),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Uo{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mo{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&vs(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Fo{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Mo,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function No(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Do{constructor(){}supports(e){return e instanceof Map||bs(e)}create(){return new Lo}}class Lo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||bs(e)))throw new Error(`Error trying to diff '${_e(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Vo(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){vs(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Vo{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let zo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new oe,new ie]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e([new To])}),e})(),jo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new oe,new ie]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e([new Do])}),e})();const Bo=[new Do],Ho=new zo([new To]),$o=new jo(Bo);let Go=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ko(e,wo),e})();const Ko=function(e,t){return function(e,t,n,r){return $i||($i=class extends e{constructor(e,t,n){super(),this._declarationView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Dr(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Vr(t,n,e),new ji(n)}}),0===n.type?new $i(r,n,Ki(t,n,r)):null}(e,t,Kt(),Ht())};let Wo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>qo(e,wo),e})();const qo=function(e,t){return function(e,t,n,r){let i;Gi||(Gi=class extends e{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostView=n}get element(){return Ki(t,this._hostTNode,this._hostView)}get injector(){return new qn(this._hostTNode,this._hostView)}get parentInjector(){const e=zn(this._hostTNode,this._hostView),t=Pn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){const e=n.parent.injectorIndex;let t=n.parent;for(;null!=t.parent&&e==t.parent.injectorIndex;)t=t.parent;return t}let r=xn(e),i=t,s=t[6];for(;r>1;)i=i[15],s=i[6],r--;return s}(e,this._hostView,this._hostTNode);return An(e)&&null!=n?new qn(n,t):new qn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Xe,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ot(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Gi(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t);return function(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],tt(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,this._lContainer,i),Si(r,n,!0,Fi(i,this._lContainer)),e.attachToViewContainerRef(this),tt(this._lContainer[8],i,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1);!function(e,t){const n=Ai(e,t);n&&ki(n[1],n)}(this._lContainer,t),nt(this._lContainer[8],t)}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=Ai(this._lContainer,t);return n&&null!=nt(this._lContainer[8],t)?new ji(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=r[n.index];if(Ot(s))i=s;else{let e;if(4===n.type)e=Rt(s);else if(e=r[11].createComment(""),kt(r)){const t=r[11],i=Ut(n,r);Ti(t,Ui(t,i),e,function(e,t){return Pt(e)?e.nextSibling(t):t.nextSibling}(t,i))}else Mi(r[1],r,e,n);r[n.index]=i=ci(s,r,e,n),di(r,i)}return new Gi(i,n,r)}(e,t,Kt(),Ht())},Zo={};class Jo extends _o{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yt(e);return new Yo(t,this.ngModule)}}function Qo(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Xo=new Le("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>En});class Yo extends yo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(wr).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Qo(this.componentDef.inputs)}get outputs(){return Qo(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Zo,i);return s!==Zo||r===Zo?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(Io,Tt),o=i.get(ko,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=n?function(e,t,n){if(Pt(e))return e.selectRootElement(t,n===at.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Nr(c,s.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,d="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),h={components:[],scheduler:En,clean:mi,playerHandler:null,flags:0},g=Kr(0,-1,null,1,0,null,null,null,null,null),p=Dr(null,g,h,u,null,null,s,a,o,i);let f,m;sn(p,null);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Lr(o,null,0,3,null,null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(ps(a,c,!0),null!==e&&(wn(i,e,c),null!==a.classes&&zi(i,e,a.classes),null!==a.styles&&Vi(i,e,a.styles)));const l=r.createRenderer(e,t),u=Dr(n,Gr(t),null,t.onPush?64:16,n[20],a,r,l,void 0);return o.firstCreatePass&&(jn(Dn(a,n),o,t.type),ti(o,a),ri(a,n.length,1)),di(n,u),n[20]=u}(l,this.componentDef,p,s,a);if(l)if(n)wn(a,l,["ng-version",Po.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!vr(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&wn(a,l,e),t&&t.length>0&&zi(a,l,t.join(" "))}if(m=Mt(g,0),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Kt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ei(e,r,1),ii(e,t,n));const i=Gn(t,e,t.length-1,r);lr(i,t);const s=Ut(r,t);return s&&lr(s,t),i}(s,n,t);r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries&&t.contentQueries(1,o,n.length-1);const a=Kt();if(s.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){hn(a.index-20);const e=n[1];Qr(e,t),Xr(e,n,t.hostVars),Yr(t,o)}return o}(e,this.componentDef,p,h,[Ys]),Vr(g,p,null)}finally{un()}const v=new ea(this.componentType,f,Ki(wo,m,p),p,m);return n&&!d||(g.node.child=m),v}}class ea extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new Bi(r),function(e,t,n,r){let i=e.node;null==i&&(e.node=i=Wr(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=e}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}const ta=void 0;var na=["en",[["a","p"],["AM","PM"],ta],[["AM","PM"],ta,ta],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ta,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ta,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ta,"{1} 'at' {0}",ta],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ra={};function ia(e){return e in ra||(ra[e]=Te.ng&&Te.ng.common&&Te.ng.common.locales&&Te.ng.common.locales[e]),ra[e]}const sa=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();let oa="en-US";function aa(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: "+e+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(oa=e.toLowerCase().replace(/_/g,"-"))}const ca=new Map;class la extends Xe{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Jo(this);const n=_t(e),r=e[Fe]||null;r&&aa(r),this._bootstrapComponents=Un(n.bootstrap),this._r3Injector=ts(e,t,[{provide:Xe,useValue:this},{provide:_o,useValue:this.componentFactoryResolver}],_e(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ls.THROW_IF_NOT_FOUND,n=ae.Default){return e===ls||e===Xe||e===Ve?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ua extends Ye{constructor(e){super(),this.moduleType=e,null!==_t(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${_e(t)} vs ${_e(t.name)}`)})(e,ca.get(e),t),ca.set(e,t)}let n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(t=>e(t))}(e)}create(e){return new la(this.moduleType,e)}}function da(e,t,n){const r=Qt()+e,i=Ht();return i[r]===Or?_s(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function ha(e,t,n,r){return function(e,t,n,r,i,s){const o=t+n;return ws(e,o,i)?_s(e,o+1,s?r.call(s,i):r(i)):pa(e,o+1)}(Ht(),Qt(),e,t,n,r)}function ga(e,t,n,r,i){return function(e,t,n,r,i,s,o){const a=t+n;return Os(e,a,i,s)?_s(e,a+2,o?r.call(o,i,s):r(i,s)):pa(e,a+2)}(Ht(),Qt(),e,t,n,r,i)}function pa(e,t){const n=e[t];return n===Or?void 0:n}class fa extends C{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,i=e=>null,s=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,i,s);return e instanceof d&&e.add(o),o}}const ma=new Le("Application Initializer");let va=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Ms(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(qe(ma,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const ya=new Le("AppId"),ba={provide:ya,useFactory:function(){return`${_a()}${_a()}${_a()}`},deps:[]};function _a(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wa=new Le("Platform Initializer"),Oa=new Le("Platform ID"),Ia=new Le("appBootstrapListener");let Sa=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Ca=new Le("LocaleId"),Aa=new Le("DefaultCurrencyCode");class ka{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const xa=function(e){return new ua(e)},Pa=xa,Ta=function(e){return Promise.resolve(xa(e))},Ra=function(e){const t=xa(e),n=Un(_t(e).declarations).reduce((e,t)=>{const n=yt(t);return n&&e.push(new Yo(n)),e},[]);return new ka(t,n)},Ea=Ra,Ua=function(e){return Promise.resolve(Ra(e))};let Ma=(()=>{class e{constructor(){this.compileModuleSync=Pa,this.compileModuleAsync=Ta,this.compileModuleAndAllComponentsSync=Ea,this.compileModuleAndAllComponentsAsync=Ua}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Fa=new Le("compilerOptions"),Na=(()=>Promise.resolve(0))();function Da(e){"undefined"==typeof Zone?Na.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class La{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fa(!1),this.onMicrotaskEmpty=new fa(!1),this.onStable=new fa(!1),this.onError=new fa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=t,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=Te.requestAnimationFrame,t=Te.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Te,()=>{e.lastRequestAnimationFrameId=-1,Ba(e),ja(e)}),Ba(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(n,r,i,s,o,a)=>{try{return Ha(e),n.invokeTask(i,s,o,a)}finally{t&&"eventTask"===s.type&&t(),$a(e)}},onInvoke:(t,n,r,i,s,o,a)=>{try{return Ha(e),t.invoke(r,i,s,o,a)}finally{$a(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Ba(e),ja(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!La.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(La.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,za,Va,Va);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function Va(){}const za={};function ja(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ba(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Ha(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function $a(e){e._nesting--,ja(e)}class Ga{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fa,this.onMicrotaskEmpty=new fa,this.onStable=new fa,this.onError=new fa}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Ka=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{La.assertNotInAngularZone(),Da(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Da(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(qe(La))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Wa=(()=>{class e{constructor(){this._applications=new Map,Ja.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Ja.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class qa{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let Za,Ja=new qa,Qa=function(e,t,n){const r=e.get(Fa,[]).concat(t),i=new ua(n);if(0===ds.size)return Promise.resolve(i);const s=function(e){const t=[];return e.forEach(e=>e&&t.push(...e)),t}(r.map(e=>e.providers));if(0===s.length)return Promise.resolve(i);const o=function(){const e=Te.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),a=ls.create({providers:s}).get(o.ResourceLoader);return function(e){const t=[],n=new Map;function r(e){let t=n.get(e);if(!t){const r=(e=>Promise.resolve(a.get(e)))(e);n.set(e,t=r.then(gs))}return t}return ds.forEach((e,n)=>{const i=[];e.templateUrl&&i.push(r(e.templateUrl).then(t=>{e.template=t}));const s=e.styleUrls,o=e.styles||(e.styles=[]),a=e.styles.length;s&&s.forEach((t,n)=>{o.push(""),i.push(r(t).then(r=>{o[a+n]=r,s.splice(s.indexOf(t),1),0==s.length&&(e.styleUrls=void 0)}))});const c=Promise.all(i).then(()=>function(e){hs.delete(e)}(n));t.push(c)}),ds=new Map,Promise.all(t).then(()=>{})}().then(()=>i)};const Xa=new Le("AllowMultipleToken");class Ya{constructor(e,t){this.name=e,this.token=t}}function ec(e,t,n=[]){const r="Platform: "+t,i=new Le(r);return(t=[])=>{let s=tc();if(!s||s.injector.get(Xa,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:Zi,useValue:"platform"});!function(e){if(Za&&!Za.destroyed&&!Za.injector.get(Xa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Za=e.get(nc);const t=e.get(wa,null);t&&t.forEach(e=>e())}(ls.create({providers:e,name:r}))}return function(e){const t=tc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function tc(){return Za&&!Za.destroyed?Za:null}let nc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Ga:("zone.js"===e?void 0:e)||new La({enableLongStackTrace:ir(),shouldCoalesceEventChangeDetection:t}),n}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),r=[{provide:La,useValue:n}];return n.run(()=>{const t=ls.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Yn,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>sc(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,t,n){try{const r=n();return Ms(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(va);return e.runInitializers(),e.donePromise.then(()=>(aa(i.injector.get(Ca,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=rc({},t);return Qa(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(ic);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${_e(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(qe(ls))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function rc(e,t){return Array.isArray(t)?t.reduce(rc,e):Object.assign(Object.assign({},e),t)}let ic=(()=>{class e{constructor(e,t,n,r,i,s){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ir(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{La.assertNotInAngularZone(),Da(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{La.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return k(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:K(t)(W(e,n))}(o,a.pipe(e=>{return q()((t=ee,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,X);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof yo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Xe),i=n.create(ls.NULL,[],t||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(Ka,null);return s&&i.injector.get(Wa).registerApplication(i.location.nativeElement,s),this._loadComponent(i),ir()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;sc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ia,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),sc(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(qe(La),qe(Sa),qe(ls),qe(Yn),qe(_o),qe(va))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function sc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class oc{}class ac{}const cc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let lc=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||cc}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>uc(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>uc(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(qe(Ma),qe(ac,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function uc(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const dc=ec(null,"core",[{provide:Oa,useValue:"unknown"},{provide:nc,deps:[ls]},{provide:Wa,deps:[]},{provide:Sa,deps:[]}]),hc=[{provide:ic,useClass:ic,deps:[La,Sa,ls,Yn,_o,va]},{provide:Xo,deps:[La],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:va,useClass:va,deps:[[new ie,ma]]},{provide:Ma,useClass:Ma,deps:[]},ba,{provide:zo,useFactory:function(){return Ho},deps:[]},{provide:jo,useFactory:function(){return $o},deps:[]},{provide:Ca,useFactory:function(e){return aa(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new re(Ca),new ie,new oe]]},{provide:Aa,useValue:"USD"}];let gc=(()=>{class e{constructor(e){}}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(qe(ic))},providers:hc}),e})(),pc=null;function fc(){return pc}const mc=new Le("DocumentToken");let vc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:yc,token:e,providedIn:"platform"}),e})();function yc(){return qe(_c)}const bc=new Le("Location Initialized");let _c=(()=>{class e extends vc{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=fc().getLocation(),this._history=fc().getHistory()}getBaseHrefFromDOM(){return fc().getBaseHref(this._doc)}onPopState(e){fc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){fc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){wc()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){wc()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(qe(mc))},e.\u0275prov=ue({factory:Oc,token:e,providedIn:"platform"}),e})();function wc(){return!!window.history.pushState}function Oc(){return new _c(qe(mc))}function Ic(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Sc(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Cc(e){return e&&"?"!==e[0]?"?"+e:e}let Ac=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:kc,token:e,providedIn:"root"}),e})();function kc(e){const t=qe(mc).location;return new Pc(qe(vc),t&&t.origin||"")}const xc=new Le("appBaseHref");let Pc=(()=>{class e extends Ac{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ic(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Cc(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+Cc(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+Cc(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(qe(vc),qe(xc,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Tc=(()=>{class e extends Ac{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Ic(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+Cc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+Cc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(qe(vc),qe(xc,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Rc=(()=>{class e{constructor(e,t){this._subject=new fa,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Sc(Uc(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Cc(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Uc(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Cc(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Cc(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(qe(Ac),qe(vc))},e.normalizeQueryParams=Cc,e.joinWithSlash=Ic,e.stripTrailingSlash=Sc,e.\u0275prov=ue({factory:Ec,token:e,providedIn:"root"}),e})();function Ec(){return new Rc(qe(Ac),qe(vc))}function Uc(e){return e.replace(/\/index.html$/,"")}const Mc=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}();class Fc{}let Nc=(()=>{class e extends Fc{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ia(t);if(n)return n;const r=t.split("-")[0];if(n=ia(r),n)return n;if("en"===r)return na;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[sa.PluralCase]}(t||this.locale)(e)){case Mc.Zero:return"zero";case Mc.One:return"one";case Mc.Two:return"two";case Mc.Few:return"few";case Mc.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(qe(Ca))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function Dc(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let Lc=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(ys(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+_e(e.item));this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(As(zo),As(jo),As(wo),As(Co))},e.\u0275dir=vt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class Vc{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zc=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){ir()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Vc(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new jc(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new jc(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(As(Wo),As(Go),As(zo))},e.\u0275dir=vt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class jc{constructor(e,t){this.record=e,this.view=t}}let Bc=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new Hc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){$c("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){$c("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(As(Wo),As(Go))},e.\u0275dir=vt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class Hc{constructor(){this.$implicit=null,this.ngIf=null}}function $c(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${_e(t)}'.`)}let Gc=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[{provide:Fc,useClass:Nc}]}),e})(),Kc=(()=>{class e{}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new Wc(qe(mc),window,qe(Yn))}),e})();class Wc{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const t=this.document.querySelector("#"+e);if(t)return void this.scrollToElement(t);const n=this.document.querySelector(`[name='${e}']`);if(n)return void this.scrollToElement(n)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}class qc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new qc,pc||(pc=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Jc||(Jc=document.querySelector("base"),Jc)?Jc.getAttribute("href"):null;return null==t?null:(n=t,Zc||(Zc=document.createElement("a")),Zc.setAttribute("href",n),"/"===Zc.pathname.charAt(0)?Zc.pathname:"/"+Zc.pathname);var n}resetBaseElement(){Jc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return Dc(document.cookie,e)}}let Zc,Jc=null;const Qc=new Le("TRANSITION_ID"),Xc=[{provide:ma,useFactory:function(e,t,n){return()=>{n.get(va).donePromise.then(()=>{const n=fc();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Qc,mc,ls],multi:!0}];class Yc{static init(){var e;e=new Yc,Ja=e}addToWindow(e){Te.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Te.getAllAngularTestabilities=()=>e.getAllTestabilities(),Te.getAllAngularRootElements=()=>e.getAllRootElements(),Te.frameworkStabilizers||(Te.frameworkStabilizers=[]),Te.frameworkStabilizers.push(e=>{const t=Te.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?fc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const el=new Le("EventManagerPlugins");let tl=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error("No event manager plugin found for event "+e)}}return e.\u0275fac=function(t){return new(t||e)(qe(el),qe(La))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class nl{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=fc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let rl=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),il=(()=>{class e extends rl{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>fc().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(qe(mc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const sl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ol=/%COMP%/g;function al(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?al(e,i,n):(i=i.replace(ol,e),n.push(i))}return n}function cl(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let ll=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ul(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case at.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new dl(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case at.Native:case at.ShadowDom:return new hl(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=al(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(qe(tl),qe(il),qe(ya))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class ul{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(sl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=sl[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=sl[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&So.DashCase?e.style.setProperty(t,n,r&So.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&So.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,cl(n)):this.eventManager.addEventListener(e,t,cl(n))}}class dl extends ul{constructor(e,t,n,r){super(e),this.component=n;const i=al(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ol,r+"-"+n.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(ol,e)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class hl extends ul{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===at.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=al(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gl=(()=>{class e extends nl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(qe(mc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const pl=["alt","control","meta","shift"],fl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ml={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vl={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let yl=(()=>{class e extends nl{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),s=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fc().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(pl.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&ml.hasOwnProperty(t)&&(t=ml[t]))}return fl[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),pl.forEach(r=>{r!=n&&(0,vl[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(qe(mc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const bl=ec(dc,"browser",[{provide:Oa,useValue:"browser"},{provide:wa,useValue:function(){qc.makeCurrent(),Yc.init()},multi:!0},{provide:mc,useFactory:function(){return function(e){xt=e}(document),document},deps:[]}]),_l=[[],{provide:Zi,useValue:"root"},{provide:Yn,useFactory:function(){return new Yn},deps:[]},{provide:el,useClass:gl,multi:!0,deps:[mc,La,Oa]},{provide:el,useClass:yl,multi:!0,deps:[mc]},[],{provide:ll,useClass:ll,deps:[tl,il,ya]},{provide:Io,useExisting:ll},{provide:rl,useExisting:il},{provide:il,useClass:il,deps:[mc]},{provide:Ka,useClass:Ka,deps:[La]},{provide:tl,useClass:tl,deps:[el,La]},[]];let wl=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:ya,useValue:t.appId},{provide:Qc,useExisting:ya},Xc]}}}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(qe(e,12))},providers:_l,imports:[Gc,gc]}),e})();function Ol(){return new Il(qe(mc))}let Il=(()=>{class e{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return e.\u0275fac=function(t){return new(t||e)(qe(mc))},e.\u0275prov=ue({factory:Ol,token:e,providedIn:"root"}),e})();"undefined"!=typeof window&&window;var Sl=function(e){return e[e.FIBU=1]="FIBU",e[e.FOLDERS_AND_DOCS=2]="FOLDERS_AND_DOCS",e[e.BILANZ=3]="BILANZ",e[e.TAX=4]="TAX",e}({});function Cl(...e){let t=e[e.length-1];return k(t)?(e.pop(),j(e,t)):W(e)}class Al extends C{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new O;return this._value}next(e){super.next(this._value=e)}}const kl=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),xl={};class Pl{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Tl(e,this.resultSelector))}}class Tl extends D{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(xl),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(N(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,i){const s=this.values,o=this.toRespond?s[n]===xl?--this.toRespond:this.toRespond:0;s[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Rl=new _(e=>e.complete());function El(e){return e?function(e){return new _(t=>e.schedule(()=>t.complete()))}(e):Rl}function Ul(e){return new _(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?B(n):El()).subscribe(t)})}function Ml(){return K(1)}function Fl(e,t){return function(n){return n.lift(new Nl(e,t))}}class Nl{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Dl(e,this.predicate,this.thisArg))}}class Dl extends p{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const Ll=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Vl(e){return function(t){return 0===e?El():t.lift(new zl(e))}}class zl{constructor(e){if(this.total=e,this.total<0)throw new Ll}call(e,t){return t.subscribe(new jl(e,this.total))}}class jl extends p{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function Bl(e=Gl){return t=>t.lift(new Hl(e))}class Hl{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new $l(e,this.errorFactory))}}class $l extends p{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Gl(){return new kl}function Kl(e=null){return t=>t.lift(new Wl(e))}class Wl{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ql(e,this.defaultValue))}}class ql extends p{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Zl(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Fl((t,n)=>e(t,n,r)):v,Vl(1),n?Kl(t):Bl(()=>new kl))}function Jl(e){return function(t){const n=new Ql(e),r=t.lift(n);return n.caught=r}}class Ql{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Xl(e,this.selector,this.caught))}}class Xl extends D{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new x(this,void 0,void 0);this.add(r);const i=N(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function Yl(e){return t=>0===e?El():t.lift(new eu(e))}class eu{constructor(e){if(this.total=e,this.total<0)throw new Ll}call(e,t){return t.subscribe(new tu(e,this.total))}}class tu extends p{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function nu(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Fl((t,n)=>e(t,n,r)):v,Yl(1),n?Kl(t):Bl(()=>new kl))}class ru{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new iu(e,this.predicate,this.thisArg,this.source))}}class iu extends p{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function su(e,t){return"function"==typeof t?n=>n.pipe(su((n,r)=>B(e(n,r)).pipe(L((e,i)=>t(n,e,r,i))))):t=>t.lift(new ou(e))}class ou{constructor(e){this.project=e}call(e,t){return t.subscribe(new au(e,this.project))}}class au extends D{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new x(this,t,n),s=this.destination;s.add(i),this.innerSubscription=N(this,e,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,i){this.destination.next(t)}}function cu(...e){return Ml()(Cl(...e))}function lu(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new uu(e,t,n))}}class uu{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new du(e,this.accumulator,this.seed,this.hasSeed))}}class du extends p{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function hu(e,t){return H(e,t,1)}function gu(){}function pu(e,t,n){return function(r){return r.lift(new fu(e,t,n))}}class fu{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new mu(e,this.nextOrObserver,this.error,this.complete))}}class mu extends p{constructor(e,t,n,i){super(e),this._tapNext=gu,this._tapError=gu,this._tapComplete=gu,this._tapError=n||gu,this._tapComplete=i||gu,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||gu,this._tapError=t.error||gu,this._tapComplete=t.complete||gu)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class vu{constructor(e){this.callback=e}call(e,t){return t.subscribe(new yu(e,this.callback))}}class yu extends p{constructor(e,t){super(e),this.add(new d(t))}}class bu{constructor(e,t){this.id=e,this.url=t}}class _u extends bu{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wu extends bu{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ou extends bu{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Iu extends bu{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Su extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cu extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Au extends bu{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ku extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xu extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ru{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uu{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mu{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fu{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Nu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=dt({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Es(0,"router-outlet")},directives:function(){return[Vh]},encapsulation:2}),e})();class Du{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lu(e){return new Du(e)}function Vu(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function zu(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}class ju{constructor(e,t){this.routes=e,this.module=t}}function Bu(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Hu(r,$u(t,r))}}function Hu(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Bu(e.children,t)}function $u(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Gu(e){const t=e.children&&e.children.map(Gu),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Nu),n}function Ku(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Wu(e[i],t[i]))return!1;return!0}function Wu(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every(e=>t.indexOf(e)>-1):e===t}function qu(e){return Array.prototype.concat.apply([],e)}function Zu(e){return e.length>0?e[e.length-1]:null}function Ju(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Qu(e){return Fs(e)?e:Ms(e)?B(Promise.resolve(e)):Cl(e)}function Xu(e,t,n){return n?function(e,t){return Ku(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!nd(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Wu(e[n],t[n]))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!nd(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!nd(n.segments,i))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!nd(n.segments,e)&&!!n.children.primary&&t(n.children.primary,r,s)}}(t,n,n.segments)}(e.root,t.root)}class Yu{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return od.serialize(this)}}class ed{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ju(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ad(this)}}class td{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lu(this.parameters)),this._parameterMap}toString(){return gd(this)}}function nd(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function rd(e,t){let n=[];return Ju(e.children,(e,r)=>{"primary"===r&&(n=n.concat(t(e,r)))}),Ju(e.children,(e,r)=>{"primary"!==r&&(n=n.concat(t(e,r)))}),n}class id{}class sd{parse(e){const t=new yd(e);return new Yu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${"/"+function e(t,n){if(!t.hasChildren())return ad(t);if(n){const n=t.children.primary?e(t.children.primary,!1):"",r=[];return Ju(t.children,(t,n)=>{"primary"!==n&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=rd(t,(n,r)=>"primary"===r?[e(t.children.primary,!1)]:[`${r}:${e(n,!1)}`]);return`${ad(t)}/(${n.join("//")})`}}(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${ld(t)}=${ld(e)}`).join("&"):`${ld(t)}=${ld(n)}`});return t.length?"?"+t.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const od=new sd;function ad(e){return e.segments.map(e=>gd(e)).join("/")}function cd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ld(e){return cd(e).replace(/%3B/gi,";")}function ud(e){return cd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dd(e){return decodeURIComponent(e)}function hd(e){return dd(e.replace(/\+/g,"%20"))}function gd(e){return`${ud(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${ud(e)}=${ud(t[e])}`).join("")}`;var t}const pd=/^[^\/()?;=#]+/;function fd(e){const t=e.match(pd);return t?t[0]:""}const md=/^[^=?&#]+/,vd=/^[^?&#]+/;class yd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ed([],{}):new ed([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new ed(e,t)),n}parseSegment(){const e=fd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new td(dd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fd(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=fd(this.remaining);e&&(n=e,this.capture(n))}e[dd(t)]=dd(n)}parseQueryParam(e){const t=function(e){const t=e.match(md);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(vd);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=hd(t),i=hd(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=fd(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new ed([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class bd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_d(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=_d(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return wd(e,this._root).map(e=>e.value)}}function _d(e,t){if(e===t.value)return t;for(const n of t.children){const t=_d(e,n);if(t)return t}return null}function wd(e,t){if(e===t.value)return[t];for(const n of t.children){const r=wd(e,n);if(r.length)return r.unshift(t),r}return[]}class Od{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Id(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Sd extends bd{constructor(e,t){super(e),this.snapshot=t,Td(this,e)}toString(){return this.snapshot.toString()}}function Cd(e,t){const n=function(e,t){const n=new xd([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Pd("",new Od(n,[]))}(e,t),r=new Al([new td("",{})]),i=new Al({}),s=new Al({}),o=new Al({}),a=new Al(""),c=new Ad(r,i,o,a,s,"primary",t,n.root);return c.snapshot=n.root,new Sd(new Od(c,[]),n)}class Ad{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(L(e=>Lu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(L(e=>Lu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kd(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class xd{constructor(e,t,n,r,i,s,o,a,c,l,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pd extends bd{constructor(e,t){super(t),this.url=e,Td(this,t)}toString(){return Rd(this._root)}}function Td(e,t){t.value._routerState=e,t.children.forEach(t=>Td(e,t))}function Rd(e){const t=e.children.length>0?` { ${e.children.map(Rd).join(", ")} } `:"";return`${e.value}${t}`}function Ed(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ku(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Ku(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ku(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Ku(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Ud(e,t){var n,r;return Ku(e.params,t.params)&&nd(n=e.url,r=t.url)&&n.every((e,t)=>Ku(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||Ud(e.parent,t.parent))}function Md(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Fd(e,t,n,r,i){let s={};return r&&Ju(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>""+e):""+e}),new Yu(n.root===e?t:function e(t,n,r){const i={};return Ju(t.children,(t,s)=>{i[s]=t===n?r:e(t,n,r)}),new ed(t.segments,i)}(n.root,e,t),s,i)}class Nd{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Md(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(r&&r!==Zu(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dd{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Ld(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function Vd(e,t,n){if(e||(e=new ed([],{})),0===e.segments.length&&e.hasChildren())return zd(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=Ld(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!$d(o,a,t))return s;r+=2}else{if(!$d(o,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new ed(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new ed(e.segments.slice(r.pathIndex),e.children),zd(t,0,i)}return r.match&&0===i.length?new ed(e.segments,{}):r.match&&!e.hasChildren()?jd(e,t,n):r.match?zd(e,0,i):jd(e,t,n)}function zd(e,t,n){if(0===n.length)return new ed(e.segments,{});{const r=function(e){return"object"!=typeof e[0]||void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),i={};return Ju(r,(n,r)=>{null!==n&&(i[r]=Vd(e.children[r],t,n))}),Ju(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new ed(e.segments,i)}}function jd(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const e=Bd(n[i].outlets);return new ed(r,e)}if(0===i&&Md(n[0])){r.push(new td(e.segments[t].path,n[0])),i++;continue}const s=Ld(n[i]),o=i<n.length-1?n[i+1]:null;s&&o&&Md(o)?(r.push(new td(s,Hd(o))),i+=2):(r.push(new td(s,{})),i++)}return new ed(r,{})}function Bd(e){const t={};return Ju(e,(e,n)=>{null!==e&&(t[n]=jd(new ed([],{}),0,e))}),t}function Hd(e){const t={};return Ju(e,(e,n)=>t[n]=""+e),t}function $d(e,t,n){return e==n.path&&Ku(t,n.parameters)}class Gd{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Ed(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Id(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),Ju(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=Id(e),i=e.value.component?n.children:t;Ju(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=Id(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Mu(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Eu(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Ed(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Kd(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Kd(e){Ed(e.value),e.children.forEach(Kd)}function Wd(e){return"function"==typeof e}function qd(e){return e instanceof Yu}class Zd{constructor(e){this.segmentGroup=e||null}}class Jd{constructor(e){this.urlTree=e}}function Qd(e){return new _(t=>t.error(new Zd(e)))}function Xd(e){return new _(t=>t.error(new Jd(e)))}function Yd(e){return new _(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class eh{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Xe)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(L(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jl(e=>{if(e instanceof Jd)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Zd)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(L(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(Jl(e=>{if(e instanceof Zd)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new ed([],{primary:e}):e;return new Yu(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(L(e=>new ed([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Cl({});const n=[],r=[],i={};return Ju(e,(e,s)=>{const o=t(s,e).pipe(L(e=>i[s]=e));"primary"===s?n.push(o):r.push(o)}),Cl.apply(null,n.concat(r)).pipe(Ml(),Zl(),L(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,s){return Cl(...n).pipe(L(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(Jl(e=>{if(e instanceof Zd)return Cl(null);throw e}))),Ml(),nu(e=>!!e),Jl((e,n)=>{if(e instanceof kl||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,i))return Cl(new ed([],{}));throw new Zd(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return ih(r)!==s?Qd(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):Qd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Xd(i):this.lineralizeSegments(n,i).pipe(H(n=>{const i=new ed(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:l}=th(t,r,i);if(!o)return Qd(t);const u=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?Xd(u):this.lineralizeSegments(r,u).pipe(H(r=>this.expandSegment(e,t,n,r.concat(i.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(L(e=>(n._loadedConfig=e,new ed(r,{})))):Cl(new ed(r,{}));const{matched:i,consumedSegments:s,lastChild:o}=th(t,n,r);if(!i)return Qd(t);const a=r.slice(o);return this.getChildConfig(e,n,r).pipe(H(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:o}=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some(n=>rh(e,t,n)&&"primary"!==ih(n))}(e,n,r)?{segmentGroup:nh(new ed(t,function(e,t){const n={};n.primary=t;for(const r of e)""===r.path&&"primary"!==ih(r)&&(n[ih(r)]=new ed([],{}));return n}(r,new ed(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>rh(e,t,n))}(e,n,r)?{segmentGroup:nh(new ed(e.segments,function(e,t,n,r){const i={};for(const s of n)rh(e,t,s)&&!r[ih(s)]&&(i[ih(s)]=new ed([],{}));return Object.assign(Object.assign({},r),i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,a,r);return 0===o.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(L(e=>new ed(s,e))):0===r.length&&0===o.length?Cl(new ed(s,{})):this.expandSegment(n,i,r,o,"primary",!0).pipe(L(e=>new ed(s.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Cl(new ju(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Cl(t._loadedConfig):function(e,t,n){const r=t.canLoad;return r&&0!==r.length?B(r).pipe(L(r=>{const i=e.get(r);let s;if(function(e){return e&&Wd(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!Wd(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return Qu(s)})).pipe(Ml(),(i=e=>!0===e,e=>e.lift(new ru(i,void 0,e)))):Cl(!0);var i}(e.injector,t,n).pipe(H(n=>n?this.configLoader.load(e.injector,t).pipe(L(e=>(t._loadedConfig=e,e))):function(e){return new _(t=>t.error(Vu(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Cl(new ju([],e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Cl(n);if(r.numberOfChildren>1||!r.children.primary)return Yd(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new Yu(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Ju(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return Ju(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new ed(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function th(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||zu)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function nh(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new ed(e.segments.concat(t.segments),t.children)}return e}function rh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function ih(e){return e.outlet||"primary"}class sh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oh{constructor(e,t){this.component=e,this.route=t}}function ah(e,t,n){const r=e._root;return function e(t,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=Id(n);return t.children.forEach(t=>{!function(t,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,a=n?n.value:null,c=r?r.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!nd(e.url,t.url);case"pathParamsOrQueryParamsChange":return!nd(e.url,t.url)||!Ku(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ud(e,t)||!Ku(e.queryParams,t.queryParams);case"paramsChange":default:return!Ud(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new sh(i)):(o.data=a.data,o._resolvedData=a._resolvedData),e(t,n,o.component?c?c.children:null:r,i,s),l&&s.canDeactivateChecks.push(new oh(c&&c.outlet&&c.outlet.component||null,a))}else a&&lh(n,c,s),s.canActivateChecks.push(new sh(i)),e(t,null,o.component?c?c.children:null:r,i,s)}(t,o[t.value.outlet],r,i.concat([t.value]),s),delete o[t.value.outlet]}),Ju(o,(e,t)=>lh(e,r.getContext(t),s)),s}(r,t?t._root:null,n,[r.value])}function ch(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function lh(e,t,n){const r=Id(e),i=e.value;Ju(r,(e,r)=>{lh(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new oh(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}const uh=Symbol("INITIAL_VALUE");function dh(){return su(e=>function(...e){let t=null,n=null;return k(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),W(e,n).lift(new Pl(t))}(...e.map(e=>e.pipe(Yl(1),function(...e){const t=e[e.length-1];return k(t)?(e.pop(),n=>cu(e,n,t)):t=>cu(e,t)}(uh)))).pipe(lu((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==uh)return e;if(r===uh&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||qd(r))return r}return e},e)},uh),Fl(e=>e!==uh),L(e=>qd(e)?e:!0===e),Yl(1)))}function hh(e,t){return null!==e&&t&&t(new Uu(e)),Cl(!0)}function gh(e,t){return null!==e&&t&&t(new Ru(e)),Cl(!0)}function ph(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Cl(r.map(r=>Ul(()=>{const i=ch(r,t,n);let s;if(function(e){return e&&Wd(e.canActivate)}(i))s=Qu(i.canActivate(t,e));else{if(!Wd(i))throw new Error("Invalid CanActivate guard");s=Qu(i(t,e))}return s.pipe(nu())}))).pipe(dh()):Cl(!0)}function fh(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Ul(()=>Cl(t.guards.map(i=>{const s=ch(i,t.node,n);let o;if(function(e){return e&&Wd(e.canActivateChild)}(s))o=Qu(s.canActivateChild(r,e));else{if(!Wd(s))throw new Error("Invalid CanActivateChild guard");o=Qu(s(r,e))}return o.pipe(nu())})).pipe(dh())));return Cl(i).pipe(dh())}class mh{}class vh{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const e=_h(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new xd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Od(n,t),i=new Pd(this.url,r);return this.inheritParamsAndData(i._root),Cl(i)}catch(e){return new _(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=kd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=rd(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const s of e)try{return this.processSegmentAgainstRoute(s,t,n,r)}catch(i){if(!(i instanceof mh))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new mh}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new mh;if((e.outlet||"primary")!==r)throw new mh;let i,s=[],o=[];if("**"===e.path){const s=n.length>0?Zu(n).parameters:{};i=new xd(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ih(e),r,e.component,e,yh(t),bh(t)+n.length,Sh(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new mh;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||zu)(n,e,t);if(!r)throw new mh;const i={};Ju(r.posParams,(e,t)=>{i[t]=e.path});const s=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(t,e,n);s=a.consumedSegments,o=n.slice(a.lastChild),i=new xd(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ih(e),r,e.component,e,yh(t),bh(t)+s.length,Sh(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:l}=_h(t,s,o,a,this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const e=this.processChildren(a,c);return[new Od(i,e)]}if(0===a.length&&0===l.length)return[new Od(i,[])];const u=this.processSegment(a,c,l,"primary");return[new Od(i,u)]}}function yh(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function bh(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function _h(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some(n=>wh(e,t,n)&&"primary"!==Oh(n))}(e,n,r)){const i=new ed(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&"primary"!==Oh(s)){const n=new ed([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Oh(s)]=n}return i}(e,t,r,new ed(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>wh(e,t,n))}(e,n,r)){const s=new ed(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(wh(e,n,a)&&!i[Oh(a)]){const n=new ed([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[Oh(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new ed(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function wh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Oh(e){return e.outlet||"primary"}function Ih(e){return e.data||{}}function Sh(e){return e.resolve||{}}function Ch(e,t,n,r){const i=ch(e,t,r);return Qu(i.resolve?i.resolve(t,n):i(t,n))}function Ah(e){return function(t){return t.pipe(su(t=>{const n=e(t);return n?B(n).pipe(L(()=>t)):B([t])}))}}class kh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const xh=new Le("ROUTES");class Ph{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(L(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new ju(qu(r.injector.get(xh)).map(Gu),r)}))}loadModuleFactory(e){return"string"==typeof e?B(this.loader.load(e)):Qu(e()).pipe(H(e=>e instanceof Ye?Cl(e):B(this.compiler.compileModuleAsync(e))))}}class Th{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Rh(e){throw e}function Eh(e,t,n){return t.parse("/")}function Uh(e,t){return Cl(null)}let Mh=(()=>{class e{constructor(e,t,n,r,i,s,o,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=Rh,this.malformedUriErrorHandler=Eh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Uh,afterPreactivation:Uh},this.urlHandlingStrategy=new Th,this.routeReuseStrategy=new kh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Xe),this.console=i.get(Sa);const c=i.get(La);this.isNgZoneEnabled=c instanceof La,this.resetConfig(a),this.currentUrlTree=new Yu(new ed([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ph(s,o,e=>this.triggerEvent(new Pu(e)),e=>this.triggerEvent(new Tu(e))),this.routerState=Cd(this.currentUrlTree,this.rootComponentType),this.transitions=new Al({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Fl(e=>0!==e.id),L(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),su(e=>{let n=!1,r=!1;return Cl(e).pipe(pu(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),su(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Cl(e).pipe(su(e=>{const n=this.transitions.getValue();return t.next(new _u(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Rl:[e]}),su(e=>Promise.resolve(e)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,function(e){return e.pipe(su(e=>function(e,t,n,r,i){return new eh(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe(L(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),pu(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return function(s){return s.pipe(H(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){return new vh(e,t,n,r,i,s).recognize()}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(L(e=>Object.assign(Object.assign({},s),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),pu(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),pu(e=>{const n=new Su(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new _u(n,this.serializeUrl(r),i,s);t.next(a);const c=Cd(r,this.rootComponentType).snapshot;return Cl(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Rl}),Ah(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),pu(e=>{const t=new Cu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),L(e=>Object.assign(Object.assign({},e),{guards:ah(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(H(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Cl(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return B(e).pipe(H(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Cl(s.map(s=>{const o=ch(s,t,i);let a;if(function(e){return e&&Wd(e.canDeactivate)}(o))a=Qu(o.canDeactivate(e,t,n,r));else{if(!Wd(o))throw new Error("Invalid CanDeactivate guard");a=Qu(o(e,t,n,r))}return a.pipe(nu())})).pipe(dh()):Cl(!0)}(e.component,e.route,n,t,r)),nu(e=>!0!==e,!0))}(o,r,i,e).pipe(H(n=>n&&"boolean"==typeof n?function(e,t,n,r){return B(t).pipe(hu(t=>B([gh(t.route.parent,r),hh(t.route,r),fh(e,t.path,n),ph(e,t.route,n)]).pipe(Ml(),nu(e=>!0!==e,!0))),nu(e=>!0!==e,!0))}(r,s,e,t):Cl(n)),L(e=>Object.assign(Object.assign({},n),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),pu(e=>{if(qd(e.guardsResult)){const t=Vu(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),pu(e=>{const t=new Au(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Fl(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Ou(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Ah(e=>{if(e.guards.canActivateChecks.length)return Cl(e).pipe(pu(e=>{const t=new ku(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(t=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(e){return e.pipe(H(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;return i.length?B(i).pipe(hu(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Cl({});if(1===i.length){const s=i[0];return Ch(e[s],t,n,r).pipe(L(e=>({[s]:e})))}const s={};return B(i).pipe(H(i=>Ch(e[i],t,n,r).pipe(L(e=>(s[i]=e,e))))).pipe(Zl(),L(()=>s))}(e._resolve,e,t,r).pipe(L(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),kd(e,n).resolve),null)))}(e.route,r,t,n)),function(e,t){return arguments.length>=2?function(n){return y(lu(e,t),Vl(1),Kl(t))(n)}:function(t){return y(lu((t,n,r)=>e(t,n,r+1)),Vl(1))(t)}}((e,t)=>e),L(t=>e)):Cl(e)}))}),pu(e=>{const t=new xu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}));var t,n}),Ah(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),L(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const s=function(t,n,r){return n.children.map(n=>{for(const i of r.children)if(t.shouldReuseRoute(i.value.snapshot,n.value))return e(t,n,i);return e(t,n)})}(t,n,r);return new Od(i,s)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new Ad(new Al((i=n.value).url),new Al(i.params),new Al(i.queryParams),new Al(i.fragment),new Al(i.data),i.outlet,i.component,i),s=n.children.map(n=>e(t,n));return new Od(r,s)}}var i}(e,t._root,n?n._root:void 0);return new Sd(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),pu(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),L(e=>(new Gd(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),pu({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Ou(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new vu(i))),Jl(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=qd(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Ou(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new Iu(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var i;return Rl}));var i,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n="popstate"===e.type?"popstate":"hashchange",r=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Bu(e),this.config=e.map(Gu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=t;ir()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=a?this.currentUrlTree.fragment:i;let u=null;if(o)switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}else u=s?this.currentUrlTree.queryParams:r||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,i){if(0===n.length)return Fd(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Nd(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return Ju(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Nd(n,t,r)}(n);if(s.toRoot())return Fd(t.root,new ed([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new Dd(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Dd(n.snapshot._urlSegment,!0,0);const r=Md(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Dd(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?zd(o.segmentGroup,o.index,s.commands):Vd(o.segmentGroup,o.index,s.commands);return Fd(o.segmentGroup,a,t,r,i)}(c,this.currentUrlTree,e,u,l)}navigateByUrl(e,t={skipLocationChange:!1}){ir()&&this.isNgZoneEnabled&&!La.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=qd(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(qd(e))return Xu(this.currentUrlTree,e,t);const n=this.parseUrl(e);return Xu(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new wu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){const s=this.getTransition();if(s&&"imperative"!==t&&"imperative"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"hashchange"==t&&"popstate"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"popstate"==t&&"hashchange"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o,a,c;i?(o=i.resolve,a=i.reject,c=i.promise):c=new Promise((e,t)=>{o=e,a=t});const l=++this.navigationId;return this.setTransition({id:l,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:o,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(e){ks()},e.\u0275dir=vt({type:e}),e})(),Fh=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof wu&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){ir()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:Nh(this.skipLocationChange),replaceUrl:Nh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Nh(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Nh(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(As(Mh),As(Ad),As(Ac))},e.\u0275dir=vt({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Ns("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(Xs("href",t.href,cr),Is("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[oo]}),e})();function Nh(e){return""===e||!!e}class Dh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lh,this.attachRef=null}}class Lh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Dh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Vh=(()=>{class e{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new fa,this.deactivateEvents=new fa,this.name=r||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new zh(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(As(Lh),As(Wo),As(_o),("name",function(e,t){const n=e.attrs;if(n){const e=n.length;let t=0;for(;t<e;){const r=n[t];if(On(r))break;if(0===r)t+=2;else if("number"==typeof r)for(t++;t<e&&"string"==typeof n[t];)t++;else{if("name"===r)return n[t+1];t+=2}}}return null}(Kt())),As(Wi))},e.\u0275dir=vt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class zh{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Ad?this.route:e===Lh?this.childContexts:this.parent.get(e,t)}}class jh{}class Bh{preload(e,t){return Cl(null)}}let Hh=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Ph(t,n,t=>e.triggerEvent(new Pu(t)),t=>e.triggerEvent(new Tu(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Fl(e=>e instanceof wu),hu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Xe);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return B(n).pipe(K(),L(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(H(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(qe(Mh),qe(oc),qe(Ma),qe(ls),qe(jh))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),$h=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof _u?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof wu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Fu&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Fu(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(e){ks()},e.\u0275dir=vt({type:e}),e})();const Gh=new Le("ROUTER_CONFIGURATION"),Kh=new Le("ROUTER_FORROOT_GUARD"),Wh=[Rc,{provide:id,useClass:sd},{provide:Mh,useFactory:function(e,t,n,r,i,s,o,a={},c,l){const u=new Mh(null,e,t,n,r,i,s,qu(o));if(c&&(u.urlHandlingStrategy=c),l&&(u.routeReuseStrategy=l),a.errorHandler&&(u.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(u.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const e=fc();u.events.subscribe(t=>{e.logGroup("Router Event: "+t.constructor.name),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return a.onSameUrlNavigation&&(u.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(u.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(u.relativeLinkResolution=a.relativeLinkResolution),u},deps:[id,Lh,Rc,ls,oc,Ma,xh,Gh,[class{},new ie],[class{},new ie]]},Lh,{provide:Ad,useFactory:function(e){return e.routerState.root},deps:[Mh]},{provide:oc,useClass:lc},Hh,Bh,class{preload(e,t){return t().pipe(Jl(()=>Cl(null)))}},{provide:Gh,useValue:{enableTracing:!1}}];function qh(){return new Ya("Router",Mh)}let Zh=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Wh,Yh(t),{provide:Kh,useFactory:Xh,deps:[[Mh,new ie,new oe]]},{provide:Gh,useValue:n||{}},{provide:Ac,useFactory:Qh,deps:[vc,[new re(xc),new ie],Gh]},{provide:$h,useFactory:Jh,deps:[Mh,Kc,Gh]},{provide:jh,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Bh},{provide:Ya,multi:!0,useFactory:qh},[eg,{provide:ma,multi:!0,useFactory:tg,deps:[eg]},{provide:rg,useFactory:ng,deps:[eg]},{provide:Ia,multi:!0,useExisting:rg}]]}}static forChild(t){return{ngModule:e,providers:[Yh(t)]}}}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(qe(Kh,8),qe(Mh,8))}}),e})();function Jh(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new $h(e,t,n)}function Qh(e,t,n={}){return n.useHash?new Tc(e,t):new Pc(e,t)}function Xh(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Yh(e){return[{provide:us,multi:!0,useValue:e},{provide:xh,multi:!0,useValue:e}]}let eg=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(bc,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Mh),r=this.injector.get(Gh);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Cl(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(Gh),n=this.injector.get(Hh),r=this.injector.get($h),i=this.injector.get(Mh),s=this.injector.get(ic);e===s.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(qe(ls))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function tg(e){return e.appInitializer.bind(e)}function ng(e){return e.bootstrapListener.bind(e)}const rg=new Le("Router Initializer");var ig=function(e){return e[e.MemberOnly=1]="MemberOnly",e[e.Admin=2]="Admin",e[e.SuperAdmin=3]="SuperAdmin",e}({}),sg=function(e){return e[e.None=0]="None",e[e.Account=1]="Account",e[e.OrgaUser=2]="OrgaUser",e}({}),og=function(e){return e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.Secure=3]="Secure",e[e.HighSecure=4]="HighSecure",e}({}),ag=function(e){return e[e.Benutzerkonto=1]="Benutzerkonto",e[e.SmsTan=2]="SmsTan",e[e.SmartCard=3]="SmartCard",e[e.SmartLogin=4]="SmartLogin",e[e.SocialLogin=8]="SocialLogin",e[e.StartSpezialTypen=10]="StartSpezialTypen",e[e.OrgaDependent_DID=20]="OrgaDependent_DID",e}({});let cg=(()=>{class e{constructor(){this.refreshMainView=new fa,this.tokenChanged=new fa,this.idmEvent=new fa,this.taskEvent=new fa}publishRefreshMainViewEvent(e=!1){this.refreshMainView.emit({titleOnly:e})}publishTokenChangedEvent(e){this.tokenChanged.emit(e),this.publishRefreshMainViewEvent()}publishIdmEvent(e){this.idmEvent.emit(e)}publishTaskEvent(e){this.taskEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),lg=(()=>{class e{constructor(e,t){this.titleService=e,this.eventService=t,this.stringSettings={},this.booleanSettings={},this._initWithDefaults()}_initWithDefaults(){this.booleanValueSet(this.afterRegistrationLoginIsRequired.name,!1),this.booleanValueSet(this.registeredAccountMustBeVerifiedByMail.name,!1),this.booleanValueSet(this.allowJoiningOrganizationByAccount.name,!1),this.booleanValueSet(this.showInfoPageAfterRegistration.name,!0),this.booleanValueSet(this.showInfoPageAfterLogin.name,!1),this.booleanValueSet(this.showInfoPageAfterGuardNotFulfilled.name,!1),this.booleanValueSet(this.showInfoPageAfterOrgaAdminGuardNotFulfilled.name,!0),this.booleanValueSet(this.allowDeletionOfAccountWithOrgaMemberships.name,!1),this.booleanValueSet(this.useGreenLikeColors.name,!1),this.booleanValueSet(this.useAccountName4DisplayingUsername.name,!0)}getAllBooleanSettings(){return this.booleanSettings}_stringValueGet(e,t=!1){const n=this.stringSettings[e];return t&&(this.stringSettings[e]=""),n||""}_stringValueSet(e,t){this.stringSettings[e]=t}_booleanValueGet(e,t=!1){const n=this.booleanSettings[e];return void 0===n?t:n}booleanValueSet(e,t){this.booleanSettings[e]=t}getRedirectUri(e=!1){return this._stringValueGet("redirectUri",e)}redirectUriIsSet(){return!!this.getRedirectUri()}setRedirectUri(e){this._stringValueSet("redirectUri",e)}resetRedirectUri(){this.setRedirectUri("")}getTitle(e=!1){return this._stringValueGet("title",e)}setTitle(e){this._stringValueSet("title",e),this.titleService.setTitle("Gesamt-Frontend: "+e),setTimeout(()=>{this.eventService.publishRefreshMainViewEvent(!0)},0)}getRequiredByGuardHelptext(e=!1){return this._stringValueGet("requiredByGuardHelptext",e)}resetRequiredByGuardHelptext(){this._stringValueSet("requiredByGuardHelptext","")}setRequiredByGuardHelptext(e){this._stringValueSet("requiredByGuardHelptext",e)}afterRegistrationLoginIsRequired(){return this._booleanValueGet(this.afterRegistrationLoginIsRequired.name)}registeredAccountMustBeVerifiedByMail(){return this._booleanValueGet(this.registeredAccountMustBeVerifiedByMail.name)}allowJoiningOrganizationByAccount(){return this._booleanValueGet(this.allowJoiningOrganizationByAccount.name)}showInfoPageAfterRegistration(){return this._booleanValueGet(this.showInfoPageAfterRegistration.name)}showInfoPageAfterLogin(){return this._booleanValueGet(this.showInfoPageAfterLogin.name)}showInfoPageAfterGuardNotFulfilled(){return this._booleanValueGet(this.showInfoPageAfterGuardNotFulfilled.name)}showInfoPageAfterOrgaAdminGuardNotFulfilled(){return this._booleanValueGet(this.showInfoPageAfterOrgaAdminGuardNotFulfilled.name)}allowDeletionOfAccountWithOrgaMemberships(){return this._booleanValueGet(this.allowDeletionOfAccountWithOrgaMemberships.name)}setAllowDeletionOfAccountWithOrgaMemberships(e){this.booleanValueSet(this.allowDeletionOfAccountWithOrgaMemberships.name,e)}useGreenLikeColors(){return this._booleanValueGet(this.useGreenLikeColors.name)}useAccountName4DisplayingUsername(){return this._booleanValueGet(this.useAccountName4DisplayingUsername.name)}}return e.\u0275fac=function(t){return new(t||e)(qe(Il),qe(cg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ug=(()=>{class e{constructor(e){this.settingsService=e,this.adminOfTheseSubOrgas=[],this.principal={authType:sg.None},this.principal.credential={kennung:"",secret:""},this.principal.account={name:"",email:""},this.principal.orgaUser={name:""},this.principal.organization={name:""}}_initAdminInfos(){this.adminOfTheseSubOrgas=[]}setPrincipal(e){this.principal=Object.assign({},e),this.isLoggedIn()||this._initAdminInfos()}isAdminOfCurrentOrga(e){var t,n;let r=this.isLoggedInInOrga()&&(null===(n=null===(t=this.principal)||void 0===t?void 0:t.orgaUser)||void 0===n?void 0:n.adminType)>ig.MemberOnly;return r&&e&&(r=this.principal.orgaUser.orgaId===e),r}isSuperAdminOfCurrentOrga(e){var t,n;let r=(null===(n=null===(t=this.principal)||void 0===t?void 0:t.orgaUser)||void 0===n?void 0:n.adminType)===ig.SuperAdmin;return r&&e&&(r=this.principal.orgaUser.orgaId===e),r}setSubOrgaIdsWithAdminsPermissions(e){this.adminOfTheseSubOrgas=[],this.adminOfTheseSubOrgas.push(...e)}isAdminOfSubOrga(e){return this.isAdminOfCurrentOrga()||this.adminOfTheseSubOrgas.includes(e)}isSubAdminOfAtLeastOneSubOrga(){return this.adminOfTheseSubOrgas.length>0}getPrincipal(){return this.principal}safelyGetAccountId(){return this.principal&&this.principal.account&&this.principal.account.id||void 0}isLoggedIn(){return this.principal.authType!==sg.None}getAuthType(){return this.principal&&this.principal.authType}isLoggedInInOrga(){return this.principal&&this.principal.authType&&this.principal.authType===sg.OrgaUser}getAuthLevel(){return this.principal&&this.principal.authLevel}getAuthLevelAsString(){return this.principal&&this.principal.authLevel&&og[this.principal.authLevel]}getAccount(){return this.principal&&this.principal.account}getOrgaUser(){return this.principal&&this.principal.orgaUser}getCredential(){return this.principal&&this.principal.credential}getOrgaName(){return this.principal&&this.principal.organization?this.principal.organization.name:""}getUsersDisplayName(){return this.principal?this.principal.authType!==sg.OrgaUser||this.settingsService.useAccountName4DisplayingUsername()?this.principal.account.name:this.principal.orgaUser.name:""}determineAuthLevel(e){switch(e.type){case ag.Benutzerkonto:return og.Low;case ag.SmsTan:return og.Medium;case ag.SmartCard:case ag.SmartLogin:return og.Secure}return og.Low}getAllAvailableOrgas(){return this.principal.availableOrgas||[]}guardPrincipalIsThisAccount(e){if(!this.principal||!this.principal.account||this.principal.account.id!==e)throw new Error("Principal is not correct AccountId")}guardPrincipalBelongsToThisOrga(e){if(!this.principal||!this.principal.orgaUser||this.principal.orgaUser.orgaId!==e)throw new Error("Principal is not a member of this orga")}guardPrincipalIsOrgaAdmin(e){if(!this.principal||!this.principal.orgaUser||!this.isAdminOfCurrentOrga(e))throw new Error("Principal is not admin of this orga")}guardPrincipalIsOrgaSuperAdmin(e){if(!this.principal||!this.principal.orgaUser||!this.isSuperAdminOfCurrentOrga(e))throw new Error("Principal is not super-admin of this orga")}guardPrincipalIsSubOrgaAdmin(e){if(!this.principal||!this.principal.orgaUser||!this.isAdminOfCurrentOrga()&&!this.isAdminOfSubOrga(e))throw new Error("Principal is not sub-admin of given sub-organization")}}return e.\u0275fac=function(t){return new(t||e)(qe(lg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var dg=function(e){return e[e.FolderRoot=1]="FolderRoot",e[e.Folder=2]="Folder",e[e.Fibu=3]="Fibu",e[e.Bilanz=4]="Bilanz",e[e.TaxPrivate=5]="TaxPrivate",e[e.TaxCorporation=6]="TaxCorporation",e}({});function hg(e){return!e||!Array.isArray(e)||e.length<=0||"object"!=typeof e[0]?e:e.map(e=>Object.assign({},e))}var gg=n("s3+Z"),pg=function(e){return e[e.OrganisationCreated=1]="OrganisationCreated",e[e.OrgaUserRemoved=2]="OrgaUserRemoved",e[e.OrganisationRemoved=3]="OrganisationRemoved",e[e.SubOrganizationRemoved=4]="SubOrganizationRemoved",e[e.SubOrgaUserRemoved=5]="SubOrgaUserRemoved",e[e.AccountDeleted=6]="AccountDeleted",e}({});let fg=(()=>{class e{constructor(e){this.eventService=e,this.SUBST_FOR_TOTAL_LICENCES=-11,this.SUBST_FOR_FREE_LICENCES=-22,this.productSettings=[],this.licences=[],this.isActive=!0,this._initProductSettingsList(),this._initLicenceForOrga(),this.eventService.idmEvent.pipe(Object(gg.takeWhile)(()=>this.isActive)).subscribe(e=>this._onIdmEvent(e))}ngOnDestroy(){this.isActive=!1}_onIdmEvent(e){switch(e.type){case pg.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser.id);break;case pg.OrganisationRemoved:this._onOrgaRemoval(e.organizationId)}}_onOrgaUserRemoval(e){let t=this.licences.filter(t=>t.orgaUserId===e);this.licences=this.licences.filter(t=>t.orgaUserId!==e),t.forEach(e=>{if(e.numberOfLicences>0){let t=this.licences.find(t=>t.orgaId===e.orgaId&&t.orgaUserId===this.SUBST_FOR_FREE_LICENCES&&t.productId===e.productId);t?t.numberOfLicences+=e.numberOfLicences:this.licences.push({orgaId:e.orgaId,orgaUserId:this.SUBST_FOR_FREE_LICENCES,productId:e.productId,numberOfLicences:e.numberOfLicences})}})}_onOrgaRemoval(e){this.licences=this.licences.filter(t=>t.orgaId!==e)}_initProductSettingsList(){this.productSettings.push({id:Sl.FIBU,name:"Finanzbuchf\xfchrung",licenceNeeded:!0,description:"Hier kannst du alles rund um die Finanzbuchf\xfchrung erledigen.",resourceTypes:[dg.Fibu]}),this.productSettings.push({id:Sl.FOLDERS_AND_DOCS,name:"Belegverwaltung",description:"Hier befasst du dich mit Ordnern, Belegen etc..",resourceTypes:[dg.FolderRoot,dg.Folder]}),this.productSettings.push({id:Sl.BILANZ,name:"Jahresabschluss",licenceNeeded:!0,description:"Hier k\xfcmmerst du dich um den Jahresabschluss.",resourceTypes:[dg.Bilanz]}),this.productSettings.push({id:Sl.TAX,name:"Steuern",licenceNeeded:!0,description:"Hier machst du die Steuer f\xfcr deinen Mandanten.",resourceTypes:[dg.TaxPrivate,dg.TaxCorporation]})}_initLicenceForOrga(){this.licences.push({productId:Sl.BILANZ,orgaId:300,orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:4}),this.licences.push({productId:Sl.BILANZ,orgaId:300,orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:2}),this.licences.push({productId:Sl.BILANZ,orgaId:300,orgaUserId:400,numberOfLicences:1}),this.licences.push({productId:Sl.BILANZ,orgaId:300,orgaUserId:401,numberOfLicences:1}),this.licences.push({productId:Sl.TAX,orgaId:300,orgaUserId:this.SUBST_FOR_TOTAL_LICENCES,numberOfLicences:1}),this.licences.push({productId:Sl.TAX,orgaId:300,orgaUserId:this.SUBST_FOR_FREE_LICENCES,numberOfLicences:0}),this.licences.push({productId:Sl.TAX,orgaId:300,orgaUserId:400,numberOfLicences:1})}checkLicence(e,t){return!!this.licences.find(n=>n.productId===e&&n.orgaUserId===t&&n.numberOfLicences>0)}getAllProductAndLicenceInfos(e,t){let n=hg(this.productSettings);return e&&n.forEach(n=>{var r,i;if(n.licenceNeeded){n.orgaId=e,n.orgaUserId=t;let s=this.licences.find(t=>t.orgaId===e&&t.productId===n.id&&t.orgaUserId===this.SUBST_FOR_TOTAL_LICENCES);n.totalLicences=null!==(r=null==s?void 0:s.numberOfLicences)&&void 0!==r?r:0,s=this.licences.find(t=>t.orgaId===e&&t.productId===n.id&&t.orgaUserId===this.SUBST_FOR_FREE_LICENCES),n.freeLicences=null!==(i=null==s?void 0:s.numberOfLicences)&&void 0!==i?i:0,s=this.licences.find(r=>r.orgaId===e&&r.productId===n.id&&r.orgaUserId===t),n.licencedToUser=(null==s?void 0:s.numberOfLicences)>0}}),n}getProductAndLicenceInfo(e,t,n){var r,i;let s=this.productSettings.find(t=>t.id===e);if(s&&t&&s.licenceNeeded){s.orgaId=t,s.orgaUserId=n;let e=this.licences.find(e=>e.orgaId===t&&e.productId===s.id&&e.orgaUserId===this.SUBST_FOR_TOTAL_LICENCES);s.totalLicences=null!==(r=null==e?void 0:e.numberOfLicences)&&void 0!==r?r:0,e=this.licences.find(e=>e.orgaId===t&&e.productId===s.id&&e.orgaUserId===this.SUBST_FOR_FREE_LICENCES),s.freeLicences=null!==(i=null==e?void 0:e.numberOfLicences)&&void 0!==i?i:0,e=this.licences.find(e=>e.orgaId===t&&e.productId===s.id&&e.orgaUserId===n),s.licencedToUser=(null==e?void 0:e.numberOfLicences)>0}return s&&Object.assign({},s)}saveProductAndLicenceInfo(e){e.forEach(e=>{e.licenceNeeded&&(this._setLicenceInfo(this.SUBST_FOR_TOTAL_LICENCES,e,e.totalLicences),this._setLicenceInfo(this.SUBST_FOR_FREE_LICENCES,e,e.freeLicences),this._setLicenceInfo(e.orgaUserId,e,e.licencedToUser?1:0))})}_setLicenceInfo(e,t,n){let r=this.licences.find(n=>n.orgaId===t.orgaId&&n.productId===t.id&&n.orgaUserId===e);r?r.numberOfLicences=n:this.licences.push({productId:t.id,orgaId:t.orgaId,orgaUserId:e,numberOfLicences:n})}}return e.\u0275fac=function(t){return new(t||e)(qe(cg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function mg(e,t){1&e&&(Ts(0,"div"),Ts(1,"h5"),qs(2,"\xdcbersicht \xfcber alle Produkte"),Rs(),Ts(3,"p"),qs(4,"Zum Anzeigen der f\xfcr dich verf\xfcgbaren Produkte bitte in Organisation einloggen..."),Rs(),Rs())}function vg(e,t){1&e&&(Ts(0,"div"),Ts(1,"h5"),qs(2,"\xdcbersicht \xfcber alle Produkte und der dazugeh\xf6rigen Lizenzinfo."),Rs(),Rs())}const yg=function(){return[]};function bg(e,t){if(1&e){const e=Us();Ts(0,"a",11),Ns("click",(function(){Gt(e);const t=Vs(2).index;return Vs().gotoProduct(t)})),qs(1),Rs()}if(2&e){const e=Vs(2).index,t=Vs();xs("routerLink",da(2,yg)),kr(1),Js("Zu ",t.getProductName(e),"")}}function _g(e,t){1&e&&(Ts(0,"p",12),qs(1,"Du hast keine Lizenz f\xfcr das Produkt. "),Rs())}function wg(e,t){if(1&e&&(Ts(0,"div",8),Es(1,"br"),Ss(2,bg,2,3,"a",9),Ss(3,_g,2,0,"p",10),Rs()),2&e){const e=Vs().$implicit;kr(2),xs("ngIf",e.licencedToUser),kr(1),xs("ngIf",!e.licencedToUser)}}function Og(e,t){if(1&e&&(Ts(0,"div",3),Ts(1,"div",4),Ts(2,"div",5),Ts(3,"span",6),qs(4),Rs(),Ts(5,"p"),qs(6),Rs(),Ss(7,wg,4,2,"div",7),Rs(),Rs(),Rs()),2&e){const e=t.index,n=Vs();kr(4),Zs(n.getProductName(e)),kr(2),Zs(n.getProductDescription(e)),kr(1),xs("ngIf",n.loggedInInOrga)}}let Ig=(()=>{class e{constructor(e,t,n,r){this.router=e,this.principalService=t,this.settingsService=n,this.licenceService=r,this.usersDisplayName="",this.loggedInInOrga=!1,this.products=[]}ngOnInit(){this.settingsService.setTitle("Marktplatz der Produkte..."),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.loggedInInOrga&&(this.principal=this.principalService.getOrgaUser()),this._initMembers()}_initMembers(){var e,t;this.products=this.licenceService.getAllProductAndLicenceInfos(null===(e=this.principal)||void 0===e?void 0:e.orgaId,null===(t=this.principal)||void 0===t?void 0:t.id),this.products.forEach(e=>{e.licenceNeeded||(e.licencedToUser=!0)})}getProductIdAsString(e){return this.products[e].id}getProductName(e){return this.products[e].name}getProductDescription(e){return this.products[e].description}getProductLink(e){switch(this.products[e].id){case Sl.BILANZ:case Sl.FIBU:return"/generic-product/bilanz";case Sl.FOLDERS_AND_DOCS:return"/folderApp/main";case Sl.TAX:return"/generic-product/tax"}}gotoProduct(e){this.router.navigateByUrl(this.getProductLink(e))}}return e.\u0275fac=function(t){return new(t||e)(As(Mh),As(ug),As(lg),As(fg))},e.\u0275cmp=dt({type:e,selectors:[["app-marketplace"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"row","mt-1"],["class","col s10 m6",4,"ngFor","ngForOf"],[1,"col","s10","m6"],[1,"card","teal","darken-1"],[1,"card-content","white-text"],[1,"card-title"],["class","card-action_x",4,"ngIf"],[1,"card-action_x"],["class","orange-text",3,"routerLink","click",4,"ngIf"],["class","white-text",4,"ngIf"],[1,"orange-text",3,"routerLink","click"],[1,"white-text"]],template:function(e,t){1&e&&(Ss(0,mg,5,0,"div",0),Ss(1,vg,3,0,"div",0),Ts(2,"div",1),Ss(3,Og,8,3,"div",2),Rs()),2&e&&(xs("ngIf",!t.loggedInInOrga),kr(1),xs("ngIf",t.loggedInInOrga),kr(2),xs("ngForOf",t.products))},directives:[Bc,zc,Fh],styles:[".card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{height:12rem}"]}),e})();var Sg=function(e){return e.DefaultResourceDeletePermissionKey="l\xf6schen",e.FolderReadPermissionKey="lesen",e.FolderWritePermissionKey="schreiben",e.FolderDeletePermissionKey="l\xf6schen",e.FolderCreatePermissionKey="neuen Ordner anlegen",e.FibuBookPermissionKey="buchen",e.FibuEvaluatePermissionKey="auswerten",e.BilanzViewPermissionKey="pr\xfcfen",e.BilanzWritePermissionKey="erstellen",e.TaxViewPermissionKey="nachschauen",e.TaxWritePermissionKey="erstellen",e}({});function Cg(e,t=!1){return n=>n.lift(new Ag(e,t))}class Ag{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new kg(e,this.predicate,this.inclusive))}}class kg extends p{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}let xg=(()=>{class e{constructor(e,t){this.principalService=e,this.eventService=t,this.isActive=!0,this.resourceTypes=[],this.resources=[],this.subResources=[],this.accessRights=[],this._setTestResourceTypes(),this._setTestResources(),this._setTestSubResources(),this._setTestPermissions(),this.eventService.idmEvent.pipe(Cg(()=>this.isActive)).subscribe(e=>this._onIdmEvent(e))}setOrgaServiceHelper(e){this.orgaServiceHelper=e}ngOnDestroy(){this.isActive=!1}assureServiceIsCreated(){}getAllResourceTypes(){return hg(this.resourceTypes)}_findResourceType(e){return this.resourceTypes.find(t=>t.typeId===e)}createNewResource(e){if(this._assertDynamicResource(e),this._assertCreatePermission4resource(e),this._findResource(e.typeId,e.id))throw new Error("Resource ist schon bekannt...");this.resources.push(e);const t=this._findResourceType(e.typeId);t.defaultPermissionsOnCreate&&t.defaultPermissionsOnCreate.forEach(t=>{this._setAccessRight(0,this._getPrincipal().id,this._getPrincipal().orgaId,e,t)})}renameResource(e){const t=this._findResource(e.typeId,e.id);t&&(t.displayName=e.displayName)}_createNewStaticResource(e,t){const n={id:1,typeId:e.typeId,orgaId:t,displayName:e.displayName};this._assertStaticResource(n);const r=this.resources.filter(t=>t.typeId===e.typeId);r&&r.length>0&&(n.id=1+Math.max.apply(Math,r.map(e=>e.id))),this.resources.push(n)}_removeAllSubResourcesOfResource(e){for(;;){const t=this.subResources.findIndex(t=>t.orgaResourceId===e.id);if(!(t>=0))break;this.subResources.splice(t,1)}}removeResource(e,t=Sg.DefaultResourceDeletePermissionKey){if(this.hasPermission(e,t))return this._removeResource(e)}_removeResource(e){for(;;){const t=this.accessRights.findIndex(t=>t.resourceType===e.typeId&&t.resourceId===e.id);if(!(t>=0))break;this.accessRights.splice(t,1)}this._removeAllSubResourcesOfResource(e);const t=this.resources.findIndex(t=>t.id===e.id);t>=0&&this.resources.splice(t,1)}_findFakeDelegatedResource4Orga(e,t){let n=this.accessRights.filter(n=>n.resourceType===e.typeId&&n.resourceId===e.id&&n.proxyResourceOrgaId===t).map(e=>e.resourceId);if(n=n.filter((e,t)=>n.indexOf(e)===t),n.length>1)throw new Error("Mehr als eine ProxyRessource gefunden ?!!?");if(1===n.length){const n=Object.assign({},e);return n.orgaId=t,n}}_getAllResourcesOwnedByOrDelegatedToOrga(e,t){this._assertIsAdminOfCurrentOrga(t);const n=this.resources.filter(n=>n.typeId===e&&n.orgaId===t),r=this._getAllDelegatedResources4Orga(e,t);return n.push(...r),hg(n)}getAllResourcesOfOrga(e){this._assertIsAdminOfCurrentOrga(e);const t=this.resources.filter(t=>t.orgaId===e);return this.getAllResourceTypes().forEach(n=>{const r=this._getAllDelegatedResources4Orga(n.typeId,e);t.push(...r)}),hg(t)}_getAllResources4UserWithAtLeastOneOfGivenPermissions(e,t,n){if(!n)return[];let r=this.accessRights.filter(r=>r.userId===e&&r.resourceType===t&&n.includes(r.permission)).map(e=>e.resourceId);r=r.filter((e,t)=>r.indexOf(e)===t);const i=[];return r.forEach(e=>i.push(this._findResource(t,e))),hg(i)}_getAllResources4UserWithAllOfGivenPermissions(e,t,n){if(!n)return[];const r=this.accessRights.filter(n=>n.userId===e&&n.resourceType===t),i=[];return r.forEach(e=>{let t=!0;for(const i in n)if(!r.find(t=>t.resourceId===e.resourceId&&t.permission===n[i])){t=!1;break}t&&i.push(e.resourceId)}),i.filter((e,t)=>i.indexOf(e)===t)}getAllResources4PrincipalWithAtLeastOnePermission(e){let t=this.accessRights.filter(t=>t.userId===this._getPrincipal().id&&t.resourceType===e).map(e=>e.resourceId);t=t.filter((e,n)=>t.indexOf(e)===n);const n=[];return t.forEach(t=>n.push(this._findResource(e,t))),hg(n)}getAllPermissions4Principal4ResourceType(e){let t=this.accessRights.filter(t=>t.userId===this._getPrincipal().id&&t.resourceType===e);return t=t.filter((e,n)=>t.indexOf(e)===n),t.forEach(e=>{var t;e.displayName=null===(t=this._findResource(e.resourceType,e.resourceId))||void 0===t?void 0:t.displayName}),hg(t)}getAllResourceIdsOwnedByOrDelegatedToOrga(e,t){this._assertIsAdminOfCurrentOrga(t);const n=this.resources.filter(n=>n.typeId===e&&n.orgaId===t).map(e=>e.id);let r=this.accessRights.filter(n=>n.resourceType===e&&n.proxyResourceOrgaId===t).map(e=>e.resourceId);return r=r.filter((e,t)=>r.indexOf(e)===t),n.push(...r),n}_getAllDelegatedResources4Orga(e,t){const n=[];let r=this.accessRights.filter(n=>n.resourceType===e&&n.proxyResourceOrgaId===t).map(e=>e.resourceId);return r=r.filter((e,t)=>r.indexOf(e)===t),r.forEach(t=>{const r=this._findResource(e,t);n.push(r)}),n}_findResource(e,t){return this.resources.find(n=>n.typeId===e&&n.id===t)}_findStaticResourceByTypeAndOrgaId(e){return this.resources.find(t=>t.typeId===e.typeId&&t.orgaId===e.orgaId)}_createSubResource(e){let t=0;this.subResources.forEach(e=>{e.id>t&&(t=e.id)});const n=Object.assign(Object.assign({},e),{id:t+1});this.subResources.push(n)}_findSubResource(e){return this.subResources.find(t=>t.id===e)}_removeSubResource(e){const t=this.subResources.findIndex(t=>t.id===e);if(t<0)return;const n=this.subResources[t];this.subResources.splice(t,1);const r=this._findResource(n.typeId,n.orgaResourceId);this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(n.subOrgaId).forEach(e=>{const t=this.orgaServiceHelper.findOrgaUserByOrgaUserId(e.orgaUserId);this._setPermissionsOfUser2resource(t,r,[],n.subOrgaId)})}getAllResourcesOfSubOrgaByResourceType(e,t,n=0){if(0===n)return this._getAllResourcesOwnedByOrDelegatedToOrga(e,t);this._assertIsSubAdminOfSubOrga(n);const r=this.subResources.filter(r=>r.orgaId===t&&r.subOrgaId===n&&r.typeId===e).map(e=>e.orgaResourceId);return hg(this.resources.filter(t=>t.typeId===e&&r.includes(t.id)))}getAllSubResourcesOfSubOrga(e){return this._assertIsSubAdminOfSubOrga(e),hg(this.subResources.filter(t=>t.subOrgaId===e))}changeSubResources(e,t){return this._assertIsSubAdminOfSubOrga(e),t.forEach(t=>{if(t.id){if(!t.subOrgaId){const n=this._findSubResource(t.id);this._assertIsSameSubOrga(e,n.subOrgaId),this._removeSubResource(t.id)}}else this._assertIsSameSubOrga(e,t.subOrgaId),this._createSubResource(t)}),!0}setPermissionsOfUser2resource(e,t,n,r=0){this._assertIsSubAdminOfSubOrga(r),this._assertIsMemberOfCurrentOrga(e),this._assertIsResourceOfCurrentOrga(t),this._setPermissionsOfUser2resource(e,t,n,r)}_setPermissionsOfUser2resource(e,t,n,r=0){return this._isForeignUser(e)?this._setPermissionsOfUser2resource4directForeignUser(e,t,n,r):this._isForeignOrga(e)?this._setPermissionsOfUser2resource4ForeignOrga(e,t,n,r):this._isForeignResourceOfUser(e,t)?this._setPermissionsOfUser2foreignResourceApplyDelegationPermission(e,t,n,r):this._setPermissionsOfUser2resource4ownUser(e,t,n,r)}setPermissionsOfUser2staticResource(e,t,n){if(this._assertIsAdminOfCurrentOrga(e.orgaId),this._assertStaticResource(t),this._assertIsMemberOfCurrentOrga(e),!this._isOwnResource(t,e))throw new Error("Das geht f\xfcr statische Ressourcen noch nicht");const r=this._findStaticResourceByTypeAndOrgaId(t);if(r)return t.id=r.id,this._setPermissionsOfUser2resource4ownUser(e,t,n)}hasPermission4staticResource(e,t){this._assertStaticResource(e);const n=this._findStaticResourceByTypeAndOrgaId(e);return!!n&&this.hasPermission(n,t)}hasPermission4staticResource4administration(e,t,n){this._assertStaticResource(t),this._assertIsAdminOfCurrentOrga(t.orgaId);const r=this._findStaticResourceByTypeAndOrgaId(t);return!!r&&this._hasPermission(e.id,r,n)}hasAdministratedPermission(e,t,n,r=0){return this._assertIsSubAdminOfSubOrga(r),this._hasPermission4administration(t,e,n,r)}_hasPermission(e,t,n){return!!this.accessRights.find(r=>r.userId===e&&r.resourceType===t.typeId&&r.resourceId===t.id&&r.permission===n)}hasPermission(e,t){const n=this._assertAndGetPrincipal().id;return this._hasPermission(n,e,t)}_hasPermission4administration(e,t,n,r=0){const i=this._isForeignUser(e)?e.foreignUserId:e.id;return this._isForeignResource(t)||this._isForeignOrga(e)?!!this.accessRights.find(e=>e.userId===i&&e.resourceType===t.typeId&&e.resourceId===t.id&&e.permission===n&&void 0!==e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===r):!!this.accessRights.find(e=>e.userId===i&&e.resourceType===t.typeId&&e.resourceId===t.id&&e.permission===n&&void 0===e.proxyResourceOrgaId&&e.administratedViaSubOrgaId===r)}permissionIsEnabled4Administration(e,t,n,r=0){return this._assertIsSubAdminOfSubOrga(r),!!this._isOwnResource(e)||!this._isForeignUserOrOrga(t)&&this._hasDelegatedPermissionToCurrentOrga(e,n)}_setPermissionsOfUser2resource4ownUser(e,t,n,r=0){this._removeAllPermissionsOfUser4resource(e.id,t,void 0,r),n.forEach(n=>this._setAccessRight(r,e.id,e.orgaId,t,n,void 0))}_setPermissionsOfUser2resource4directForeignUser(e,t,n,r){const i=this.orgaServiceHelper.findCorrespondingForeignOrgaUser(e);this._setPermissionsOfUser2resource4ownUser(i,t,n,r)}_setPermissionsOfUser2foreignResourceApplyDelegationPermission(e,t,n,r){const i=e.orgaId;this._removeAllPermissionsOfUser4resource(e.id,t,i,r),n.forEach(n=>this._setAccessRight(r,e.id,e.orgaId,t,n,i))}_setPermissionsOfUser2resource4ForeignOrga(e,t,n,r){const i=e.foreignOrgaId,s=this._getAllDelegatedPermissions4resource(e.id,i,t);this._removeAllPermissionsOfUser4resource(e.id,t,i,r),n.forEach(n=>this._setAccessRight(r,e.id,e.orgaId,t,n,i));const o=this._getAllDelegatedPermissions4resource(e.id,i,t);o.length<=0?this._removeProxyResourceAndAllPermissions2it(i,t):(o.forEach(e=>{const t=s.findIndex(t=>t===e);t>=0&&s.splice(t,1)}),s.forEach(e=>{this._removePermission4resourceDelegatedFromAllUsersOfGivenOrga(i,t,e)}))}_getNewUniqueId(){let e=0;return this.accessRights.forEach(t=>{t.id>e&&(e=t.id)}),e+1}_isForeignUser(e){return!!e&&!!e.foreignUserId}_isForeignOrga(e){return!!e.foreignOrgaId}_isForeignUserOrOrga(e){return this._isForeignUser(e)||this._isForeignOrga(e)}_isForeignResource(e){return!this._isOwnResource(e)}_isForeignResourceOfUser(e,t){return t.orgaId!==e.orgaId}_isOwnResource(e,t=this._getPrincipal()){return!!e.orgaId&&e.orgaId===t.orgaId}_isStaticResource(e){const t=this._findResourceType(e.typeId);return!(!t||t.dynamic)}_isDynamicResource(e){const t=this._findResourceType(e.typeId);return!(!t||!t.dynamic)}_assertAndGetPrincipal(){const e=this._getPrincipal();if(!(null==e?void 0:e.id))throw new Error("Principal not set to OrgaUser...");return e}_assertIsAdminOfCurrentOrga(e){if(this._getPrincipal(),!this.principalService.isAdminOfCurrentOrga(e))throw new Error("AssertAdmin: principal is not an admin of orga")}_assertIsSubAdminOfSubOrga(e){if(!this.principalService.isAdminOfSubOrga(e))throw new Error("AssertSubAdmin: principal is not an sub-admin of sub-orga")}_assertIsSameSubOrga(e,t){if(e!==t)throw new Error("AssertSameSubOrga: subOrgaIds are not the same.")}_assertIsMemberOfCurrentOrga(e){if(this._getPrincipal().orgaId!==e.orgaId)throw new Error("AssertMember: principal.orgaId !== user.orgaId");if(!this.orgaServiceHelper.findOrgaUserByOrgaUserId(e.id))throw new Error("AssertMember: user is not member of orga")}_assertIsProxyResourceOfCurrentOrga(e){const t=this._findFakeDelegatedResource4Orga(e,this._getPrincipal().orgaId);if(!t||t.orgaId!==this._getPrincipal().orgaId)throw new Error("AssertResource: weder eigene Ressouce noch ProxyRessouce")}_assertIsResourceOfCurrentOrga(e){if(this._getPrincipal().orgaId!==e.orgaId&&this._assertIsProxyResourceOfCurrentOrga(e),!this._findResource(e.typeId,e.id))throw new Error("AssertResource: resource does not exist")}_assertStaticResource(e){if(!this._isStaticResource(e))throw new Error("Resource ist nicht statisch...")}_assertDynamicResource(e){if(!this._isDynamicResource(e))throw new Error("Resource ist nicht dynamisch...")}_assertCreatePermission4resource(e){const t=this._findResourceType(e.typeId),n=this._findStaticResourceByTypeAndOrgaId({id:-1,typeId:t.resourceType4CreatePermission,orgaId:e.orgaId});if(!n)throw new Error("Static Resource not found...");if(!this.hasPermission4staticResource(n,t.permission4CreatePermission))throw new Error("Principal does not have create-permission for resource")}_onIdmEvent(e){switch(e.type){case pg.OrganisationCreated:this._onOrganizationCreation(e.organizationId);break;case pg.OrganisationRemoved:this._onOrganizationRemoval(e.organizationId);break;case pg.OrgaUserRemoved:this._onOrgaUserRemoval(e.orgaUser);break;case pg.SubOrganizationRemoved:this._onSubOrganizationRemoval(e.subOrganizationId);break;case pg.SubOrgaUserRemoved:this._onSubOrgaUserRemoval(e.subOrganizationId,e.orgaUser)}}_onOrganizationRemoval(e){for(this.resources.filter(t=>t.orgaId===e).forEach(e=>this._removeResource(e));;){const t=this.accessRights.findIndex(t=>t.usersOrgaId===e||t.resourceOwningOrgaId===e);if(!(t>=0))break;this.accessRights.splice(t,1)}}_onOrganizationCreation(e){this.resourceTypes.filter(e=>!e.dynamic).forEach(t=>{this._findStaticResourceByTypeAndOrgaId({id:-1,typeId:t.typeId,orgaId:e})||this._createNewStaticResource(t,e)})}_onSubOrganizationRemoval(e){const t=this.orgaServiceHelper.getAllSubOrgaUsers4SubOrga(e),n=this.getAllSubResourcesOfSubOrga(e);for(t.forEach(t=>{const r=this.orgaServiceHelper.findOrgaUserByOrgaUserId(t.orgaUserId);this._isForeignOrga(r)&&n.forEach(t=>{const n=this._findResource(t.typeId,t.orgaResourceId);this._setPermissionsOfUser2resource(r,n,[],e)})}),this.subResources=this.subResources.filter(t=>t.subOrgaId!==e);;){const t=this.accessRights.findIndex(t=>t.administratedViaSubOrgaId===e);if(!(t>=0))break;this.accessRights.splice(t,1)}}_onForeignOrgaSubUserRemoval(e,t){this.getAllSubResourcesOfSubOrga(e).forEach(n=>{const r=this._findResource(n.typeId,n.orgaResourceId);this._setPermissionsOfUser2resource4ForeignOrga(t,r,[],e)})}_onSubOrgaUserRemoval(e,t){if(!e)throw new Error("_onSubOrgaUserRemoval: subOrgaId not set!");if(this._isForeignOrga(t))this._onForeignOrgaSubUserRemoval(e,t);else{const n=this._isForeignUser(t)?t.foreignUserId:t.id;for(;;){const t=this.accessRights.findIndex(t=>t.administratedViaSubOrgaId===e&&t.userId===n);if(!(t>=0))break;this.accessRights.splice(t,1)}}}_onOrgaUserRemoval(e){this._isForeignUser(e)?this._removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId(e.foreignUserId,e.orgaId):this._isForeignOrga(e)?(this._removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId(e.foreignOrgaId,e.orgaId),this._removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId(e.foreignOrgaId,e.orgaId)):this._removeAllPermissionsOfUser(e.id)}_assertPermissionRange(e,t){const n=this._findResourceType(e.typeId),r=this._findResource(e.typeId,e.id);if(!(n&&r&&n.possiblePermissions.includes(t)))throw new Error("Permission "+t+" not valid for type "+r.typeId)}_setAccessRight(e,t,n,r,i,s){this._assertPermissionRange(r,i),this.accessRights.push({id:this._getNewUniqueId(),userId:t,usersOrgaId:n,resourceType:r.typeId,resourceId:r.id,resourceOwningOrgaId:r.orgaId,permission:i,proxyResourceOrgaId:s,administratedViaSubOrgaId:e})}_getPrincipal(){const e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}_getAllDelegatedPermissions4resource(e,t,n){const r=this.accessRights.filter(r=>r.userId===e&&r.proxyResourceOrgaId===t&&r.resourceType===n.typeId&&r.resourceId===n.id).map(e=>e.permission);return r.filter((e,t)=>r.indexOf(e)===t)}_hasDelegatedPermissionToCurrentOrga(e,t){return!!this.accessRights.find(n=>n.proxyResourceOrgaId===this._getPrincipal().orgaId&&n.resourceType===e.typeId&&n.resourceId===e.id&&n.permission===t)}_removeAllPermissionsOfUser4resource(e,t,n,r=0){for(;;){const i=this.accessRights.findIndex(i=>i.userId===e&&i.resourceType===t.typeId&&i.resourceId===t.id&&i.proxyResourceOrgaId===n&&i.administratedViaSubOrgaId===r);if(!(i>=0))break;this.accessRights.splice(i,1)}}_removeAllPermissionsOfUser(e){console.log("accessrights length: "+this.accessRights.length),this.accessRights=this.accessRights.filter(t=>t.userId!==e),console.log("accessrights length: "+this.accessRights.length)}_removePermission4resourceDelegatedFromAllUsersOfGivenOrga(e,t,n){let r;do{r=this.accessRights.findIndex(r=>r.resourceType===t.typeId&&r.resourceId===t.id&&r.permission===n&&r.usersOrgaId===e&&r.proxyResourceOrgaId===e),r>=0&&this.accessRights.splice(r,1)}while(r>=0)}_removeAllPersmissionsOfGivenUserFromAllResourcesOwnedByGivenOrgaId(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.userId===e&&n.resourceOwningOrgaId===t&&void 0===n.proxyResourceOrgaId);if(!(n>=0))break;this.accessRights.splice(n,1)}}_removeAllUserOfGivenOrgaIdFromAllResourcesOwnedByGivenOrgaId(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.usersOrgaId===e&&n.resourceOwningOrgaId===t&&void 0!==n.proxyResourceOrgaId);if(!(n>=0))break;this.accessRights.splice(n,1)}}_removeAllPermissionsOfProxyOrgaIdFromAllResourcesOwnedByGivenOrgaId(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.proxyResourceOrgaId===e&&n.resourceOwningOrgaId===t);if(!(n>=0))break;this.accessRights.splice(n,1)}}_removeProxyResourceAndAllPermissions2it(e,t){for(;;){const n=this.accessRights.findIndex(n=>n.proxyResourceOrgaId===e&&n.resourceType===t.typeId&&n.resourceId===t.id);if(!(n>=0))break;this.accessRights.splice(n,1)}}_setTestResourceTypes(){this.resourceTypes.push({typeId:dg.FolderRoot,dynamic:!1,displayName:"Belegverwaltung",possiblePermissions:[Sg.FolderCreatePermissionKey]},{typeId:dg.Folder,dynamic:!0,displayName:"Ordner",possiblePermissions:[Sg.FolderReadPermissionKey,Sg.FolderWritePermissionKey,Sg.FolderDeletePermissionKey],defaultPermissionsOnCreate:[Sg.FolderReadPermissionKey],resourceType4CreatePermission:dg.FolderRoot,permission4CreatePermission:Sg.FolderCreatePermissionKey},{typeId:dg.Fibu,dynamic:!1,displayName:"Finanzbuchf\xfchrung",possiblePermissions:[Sg.FibuEvaluatePermissionKey,Sg.FibuBookPermissionKey]},{typeId:dg.Bilanz,dynamic:!1,displayName:"Jahresabschluss",possiblePermissions:[Sg.BilanzViewPermissionKey,Sg.BilanzWritePermissionKey]},{typeId:dg.TaxPrivate,dynamic:!1,displayName:"Steuern f\xfcr Privatleute",possiblePermissions:[Sg.TaxViewPermissionKey,Sg.TaxWritePermissionKey]},{typeId:dg.TaxCorporation,dynamic:!1,displayName:"Steuern f\xfcr Unternehmen",possiblePermissions:[Sg.TaxViewPermissionKey,Sg.TaxWritePermissionKey]})}_setTestResources(){this.resources.push({typeId:dg.FolderRoot,id:1,orgaId:300,displayName:"Belegverwaltung"},{typeId:dg.Folder,id:1,orgaId:300,displayName:"Notizen"},{typeId:dg.Folder,id:2,orgaId:300,displayName:"Steuersachen"},{typeId:dg.Folder,id:3,orgaId:300,displayName:"Golfausfl\xfcge"},{typeId:dg.Folder,id:4,orgaId:300,displayName:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{typeId:dg.Bilanz,id:20,orgaId:300,displayName:"Jahresabschluss"},{typeId:dg.TaxPrivate,id:30,orgaId:300,displayName:"Steuern f\xfcr Privatleute"},{typeId:dg.TaxCorporation,id:31,orgaId:300,displayName:"Steuern f\xfcr Unternehmen"},{typeId:dg.FolderRoot,id:2,orgaId:301,displayName:"Belegverwaltung"},{typeId:dg.Folder,id:10,orgaId:301,displayName:"Rechtliches"},{typeId:dg.Folder,id:11,orgaId:301,displayName:"Kassenarchiv"},{typeId:dg.FolderRoot,id:3,orgaId:302,displayName:"Belegverwaltung"},{typeId:dg.Folder,id:20,orgaId:302,displayName:"Finanzen"},{typeId:dg.Folder,id:21,orgaId:302,displayName:"Rechnungen"}),this._onOrganizationCreation(300),this._onOrganizationCreation(301),this._onOrganizationCreation(302)}_setTestSubResources(){this.subResources.push({id:7e3,typeId:dg.Folder,orgaId:300,subOrgaId:1e3,orgaResourceId:1},{id:7001,typeId:dg.Folder,orgaId:300,subOrgaId:1001,orgaResourceId:1},{id:7005,typeId:dg.Folder,orgaId:300,subOrgaId:1e3,orgaResourceId:2},{id:7010,typeId:dg.Folder,orgaId:300,subOrgaId:1e3,orgaResourceId:4},{id:7100,typeId:dg.Folder,orgaId:302,subOrgaId:1100,orgaResourceId:20})}_setTestPermissions(){this._setAccessRight(0,400,300,{typeId:dg.FolderRoot,id:1,orgaId:300},Sg.FolderCreatePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:1,orgaId:300},Sg.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:1,orgaId:300},Sg.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:1,orgaId:300},Sg.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:2,orgaId:300},Sg.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:2,orgaId:300},Sg.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:2,orgaId:300},Sg.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:3,orgaId:300},Sg.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:3,orgaId:300},Sg.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:3,orgaId:300},Sg.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderReadPermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderWritePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderDeletePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Bilanz,id:20,orgaId:300},Sg.BilanzViewPermissionKey),this._setAccessRight(0,400,300,{typeId:dg.Bilanz,id:20,orgaId:300},Sg.BilanzWritePermissionKey),this._setAccessRight(0,401,300,{typeId:dg.Bilanz,id:20,orgaId:300},Sg.BilanzViewPermissionKey),this._setAccessRight(0,400,300,{typeId:dg.TaxPrivate,id:30,orgaId:300},Sg.TaxViewPermissionKey),this._setAccessRight(0,400,300,{typeId:dg.TaxPrivate,id:30,orgaId:300},Sg.TaxWritePermissionKey),this._setAccessRight(0,400,300,{typeId:dg.TaxCorporation,id:31,orgaId:300},Sg.TaxViewPermissionKey),this._setAccessRight(0,401,300,{typeId:dg.TaxPrivate,id:30,orgaId:300},Sg.TaxViewPermissionKey),this._setAccessRight(0,401,300,{typeId:dg.Folder,id:1,orgaId:300},Sg.FolderReadPermissionKey),this._setAccessRight(0,401,300,{typeId:dg.Folder,id:1,orgaId:300},Sg.FolderWritePermissionKey),this._setAccessRight(0,401,300,{typeId:dg.Folder,id:2,orgaId:300},Sg.FolderReadPermissionKey),this._setAccessRight(0,401,300,{typeId:dg.Folder,id:2,orgaId:300},Sg.FolderWritePermissionKey),this._setAccessRight(0,401,300,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderReadPermissionKey),this._setAccessRight(0,401,300,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderWritePermissionKey),this._setAccessRight(0,405,300,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderReadPermissionKey,302),this._setAccessRight(0,405,300,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderWritePermissionKey,302),this._setAccessRight(0,420,302,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderReadPermissionKey,302),this._setAccessRight(0,421,302,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderReadPermissionKey,302),this._setAccessRight(0,421,302,{typeId:dg.Folder,id:4,orgaId:300},Sg.FolderWritePermissionKey,302),this._setAccessRight(0,410,301,{typeId:dg.FolderRoot,id:2,orgaId:301},Sg.FolderCreatePermissionKey),this._setAccessRight(0,410,301,{typeId:dg.Folder,id:10,orgaId:301},Sg.FolderReadPermissionKey),this._setAccessRight(0,410,301,{typeId:dg.Folder,id:10,orgaId:301},Sg.FolderWritePermissionKey),this._setAccessRight(0,410,301,{typeId:dg.Folder,id:10,orgaId:301},Sg.FolderDeletePermissionKey),this._setAccessRight(0,410,301,{typeId:dg.Folder,id:11,orgaId:301},Sg.FolderReadPermissionKey),this._setAccessRight(0,410,301,{typeId:dg.Folder,id:11,orgaId:301},Sg.FolderWritePermissionKey),this._setAccessRight(0,410,301,{typeId:dg.Folder,id:11,orgaId:301},Sg.FolderDeletePermissionKey),this._setAccessRight(0,411,301,{typeId:dg.Folder,id:10,orgaId:301},Sg.FolderReadPermissionKey),this._setAccessRight(0,411,301,{typeId:dg.Folder,id:10,orgaId:301},Sg.FolderWritePermissionKey),this._setAccessRight(0,411,301,{typeId:dg.Folder,id:11,orgaId:301},Sg.FolderReadPermissionKey),this._setAccessRight(0,411,301,{typeId:dg.Folder,id:11,orgaId:301},Sg.FolderWritePermissionKey),this._setAccessRight(0,412,301,{typeId:dg.Folder,id:10,orgaId:301},Sg.FolderWritePermissionKey),this._setAccessRight(0,412,301,{typeId:dg.Folder,id:11,orgaId:301},Sg.FolderWritePermissionKey),this._setAccessRight(0,420,302,{typeId:dg.FolderRoot,id:3,orgaId:302},Sg.FolderCreatePermissionKey),this._setAccessRight(0,420,302,{typeId:dg.Folder,id:20,orgaId:302},Sg.FolderReadPermissionKey),this._setAccessRight(0,420,302,{typeId:dg.Folder,id:20,orgaId:302},Sg.FolderWritePermissionKey),this._setAccessRight(0,420,302,{typeId:dg.Folder,id:20,orgaId:302},Sg.FolderDeletePermissionKey),this._setAccessRight(0,420,302,{typeId:dg.Folder,id:21,orgaId:302},Sg.FolderReadPermissionKey),this._setAccessRight(0,420,302,{typeId:dg.Folder,id:21,orgaId:302},Sg.FolderWritePermissionKey),this._setAccessRight(0,420,302,{typeId:dg.Folder,id:21,orgaId:302},Sg.FolderDeletePermissionKey),this._setAccessRight(0,421,302,{typeId:dg.Folder,id:20,orgaId:302},Sg.FolderReadPermissionKey),this._setAccessRight(0,421,302,{typeId:dg.Folder,id:20,orgaId:302},Sg.FolderWritePermissionKey),this._setAccessRight(0,421,302,{typeId:dg.Folder,id:21,orgaId:302},Sg.FolderReadPermissionKey),this._setAccessRight(0,421,302,{typeId:dg.Folder,id:21,orgaId:302},Sg.FolderWritePermissionKey)}}return e.\u0275fac=function(t){return new(t||e)(qe(ug),qe(cg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Pg(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"h5"),qs(2),Rs(),Ts(3,"p"),qs(4,"Zum Anzeigen der detaillierten Informationen bitte in Organisation einloggen..."),Rs(),Rs()),2&e){const e=Vs();kr(2),Js("Lizenz- und Rechteinfo f\xfcr das Produkt ",e.product.name,"")}}function Tg(e,t){1&e&&(Ts(0,"p"),qs(1,"Du besitzt eine Lizenz f\xfcr das Produkt und darfst es somit nutzen."),Rs())}function Rg(e,t){1&e&&(Ts(0,"p"),qs(1,"Du besitzt keine Lizenz f\xfcr das Produkt."),Rs())}function Eg(e,t){1&e&&(Ts(0,"p"),qs(1,"Du hast keinerlei - das Produkt betreffende - Freigaben."),Rs())}function Ug(e,t){1&e&&(Ts(0,"p"),qs(1,"Du hast folgende - das Produkt betreffende - Freigaben:"),Rs())}function Mg(e,t){if(1&e&&(Ts(0,"li"),Ts(1,"span",4),qs(2),Rs(),Ts(3,"span",5),qs(4),Rs(),Ts(5,"span",6),qs(6),Rs(),Rs()),2&e){const e=t.$implicit;kr(2),Js(" ",e.displayName," "),kr(2),Js(" ",e.resourceId," "),kr(2),Js(" ",e.permission," ")}}function Fg(e,t){if(1&e&&(Ts(0,"ul",2),Ts(1,"li",3),Ts(2,"span",4),qs(3," Ressourcename "),Rs(),Ts(4,"span",5),qs(5," RessourceId "),Rs(),Ts(6,"span",6),qs(7," Freigabe "),Rs(),Rs(),Ss(8,Mg,7,3,"li",7),Rs()),2&e){const e=Vs(2);kr(8),xs("ngForOf",e.product.permissions4User)}}function Ng(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"h5"),qs(2),Rs(),Ts(3,"p"),qs(4),Rs(),Ts(5,"p"),qs(6),Rs(),Ss(7,Tg,2,0,"p",0),Ss(8,Rg,2,0,"p",0),Ss(9,Eg,2,0,"p",0),Ss(10,Ug,2,0,"p",0),Ss(11,Fg,9,1,"ul",1),Rs()),2&e){const e=Vs();kr(2),Js("Lizenz- und Rechteinfo f\xfcr das Produkt ",e.product.name,""),kr(2),Js("Deine Organisation hat insgesamt ",e.product.totalLicences," Lizenzen f\xfcr das Produkt gekauft."),kr(2),Js("",e.product.freeLicences," Lizenzen sind noch keinem Benutzer zugeordnet und damit frei."),kr(1),xs("ngIf",e.product.licencedToUser),kr(1),xs("ngIf",!e.product.licencedToUser),kr(1),xs("ngIf",0==e.product.permissions4User.length),kr(1),xs("ngIf",e.product.permissions4User.length>0),kr(1),xs("ngIf",e.product.permissions4User.length>0)}}let Dg=(()=>{class e{constructor(e,t,n,r,i){this.route=e,this.principalService=t,this.settingsService=n,this.licenceService=r,this.accessService=i,this.loggedInInOrga=!1}ngOnInit(){var e,t,n,r,i;const s=null!==(t=null===(e=this.route.snapshot.data)||void 0===e?void 0:e.dataProductId)&&void 0!==t?t:Sl.BILANZ;this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.orgaUser=this.principalService.getOrgaUser(),this.product=this.licenceService.getProductAndLicenceInfo(s,null===(n=this.orgaUser)||void 0===n?void 0:n.orgaId,null===(r=this.orgaUser)||void 0===r?void 0:r.id),this.settingsService.setTitle("Beispielprodukt: "+this.product.name),this.loggedInInOrga&&(this.product.permissions4User=[],null===(i=this.product.resourceTypes)||void 0===i||i.forEach(e=>{this.product.permissions4User.push(...this.accessService.getAllPermissions4Principal4ResourceType(e))}))}}return e.\u0275fac=function(t){return new(t||e)(As(Ad),As(ug),As(lg),As(fg),As(xg))},e.\u0275cmp=dt({type:e,selectors:[["app-generic-product"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","liste",4,"ngIf"],[1,"liste"],[1,"valign-wrapper"],[1,"list-item-text-left"],[1,"list-item-text","small"],[1,"list-item-text"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(Ss(0,Pg,5,1,"div",0),Ss(1,Ng,12,8,"div",0)),2&e&&(xs("ngIf",!t.loggedInInOrga),kr(1),xs("ngIf",t.loggedInInOrga))},directives:[Bc,zc],styles:[".list-item-text[_ngcontent-%COMP%], .list-item-text-left[_ngcontent-%COMP%]{width:15em}.small[_ngcontent-%COMP%]{width:10em}"]}),e})();var Lg=function(e){return e[e.Privat=1]="Privat",e[e.Unternehmen=2]="Unternehmen",e[e.Kanzlei=3]="Kanzlei",e}({}),Vg=function(e){return e[e.AccountVerified=1]="AccountVerified",e[e.AccountVerificationDeclined=2]="AccountVerificationDeclined",e[e.OrgaUserInvitationDeclined=3]="OrgaUserInvitationDeclined",e[e.OrgaUserInvitationAccepted=4]="OrgaUserInvitationAccepted",e}({});let zg=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.eventService=t,this.principalService=n,this.accounts=[{id:100,verified:!0,name:"System Admin",email:"sysadmin@bk"},{id:110,verified:!0,name:"Klaus",email:"klaus@bk"},{id:111,name:"Simone",email:"simone@bk"},{id:120,verified:!0,name:"Martin",email:"martin@bk"},{id:121,name:"Sonja",email:"sonja@bk"},{id:122,verified:!0,name:"Kasse Kanzlei Palmengarten",email:"dummy@martin"},{id:130,verified:!0,name:"Tom",email:"tom@bk"},{id:131,name:"Petra",email:"petra@bk"},{id:140,verified:!0,name:"Resi",email:"resi@bk"}],this.creds=[{id:200,accountId:100,kennung:"sysadmin@bk",secret:"test",type:ag.Benutzerkonto},{id:210,accountId:110,kennung:"klaus@bk",secret:"test",type:ag.Benutzerkonto},{id:211,accountId:110,kennung:"klaus@sc",secret:"test",type:ag.SmartCard},{id:212,accountId:110,kennung:"",secret:"",type:ag.SocialLogin,provider:"google",userIdFromProvider:"113153024055027519050"},{id:215,accountId:111,kennung:"simone@bk",secret:"test",type:ag.Benutzerkonto},{id:216,accountId:111,kennung:"simone@sc",secret:"test",type:ag.SmartCard},{id:220,accountId:120,kennung:"martin@bk",secret:"test",type:ag.Benutzerkonto},{id:221,accountId:120,kennung:"martin@st",secret:"test",type:ag.SmsTan},{id:222,accountId:120,kennung:"martin@sc",secret:"test",type:ag.SmartCard},{id:223,accountId:120,orgaId:301,kennung:"martin@did",secret:"test",type:ag.OrgaDependent_DID},{id:224,accountId:120,orgaId:999,kennung:"martinNoOrga@did",secret:"test",type:ag.OrgaDependent_DID},{id:225,accountId:121,kennung:"sonja@bk",secret:"test",type:ag.Benutzerkonto},{id:227,accountId:122,orgaId:301,kennung:"kasse@martin",secret:"test",type:ag.OrgaDependent_DID},{id:230,accountId:130,kennung:"tom@bk",secret:"test",type:ag.Benutzerkonto},{id:231,accountId:130,kennung:"tom@sc",secret:"test",type:ag.SmartCard},{id:235,accountId:131,kennung:"petra@bk",secret:"test",type:ag.Benutzerkonto},{id:240,accountId:140,kennung:"resi@bk",secret:"test",type:ag.Benutzerkonto},{id:241,accountId:140,kennung:"resi@sc",secret:"test",type:ag.SmartCard}],this.organizations=[{id:300,name:"Kanzlei Heinzelmann",type:Lg.Kanzlei},{id:301,name:"Kanzlei Palmengarten",type:Lg.Kanzlei},{id:302,name:"Holzhandel Grubinger",type:Lg.Unternehmen},{id:303,name:"Familie Martin privat",type:Lg.Privat}],this.orgaUsers=[{id:400,accountId:110,orgaId:300,name:"Klaus Heinzelmann",adminType:ig.SuperAdmin},{id:401,accountId:111,orgaId:300,name:"Simone Heinzelmann",adminType:ig.Admin},{id:10401,orgaId:300,name:"Hans Fallada"},{id:10402,orgaId:300,name:"Friedrich Schiller"},{id:10403,orgaId:300,name:"Wolfgang G\xf6the"},{id:10404,orgaId:300,name:"Rainer Maria Rilke"},{id:10405,orgaId:300,name:"G\xfcnther Grass"},{id:10406,orgaId:300,name:"Heinrich Heine"},{id:405,orgaId:300,foreignOrgaId:302,name:"Mandant Grubinger"},{id:407,orgaId:300,foreignUserId:421,name:"Petra - Mandant Grubinger"},{id:410,accountId:120,orgaId:301,name:"Martin Palmengarten",adminType:ig.SuperAdmin},{id:411,accountId:121,orgaId:301,name:"Sonja Hohlraab"},{id:412,accountId:122,orgaId:301,name:"Kasse von Kanzlei Palmengarten"},{id:420,accountId:130,orgaId:302,name:"Tom Grubinger",adminType:ig.SuperAdmin},{id:421,accountId:131,orgaId:302,name:"Petra Elfenbein"},{id:430,accountId:120,orgaId:303,name:"Martin privat",adminType:ig.SuperAdmin}],this.subOrganizations=[{id:1e3,orgaId:300,name:"Filiale F\xfcrth"},{id:1001,orgaId:300,name:"Filiale N\xfcrnberg"},{id:1100,orgaId:302,name:"Eigene Buchhaltung"}],this.subOrgaUsers=[{id:5e3,orgaId:300,orgaUserId:400,subOrgaId:1e3,subAdmin:!0},{id:5001,orgaId:300,orgaUserId:400,subOrgaId:1001,subAdmin:!0},{id:5005,orgaId:300,orgaUserId:401,subOrgaId:1e3},{id:5010,orgaId:300,orgaUserId:405,subOrgaId:1e3},{id:5011,orgaId:300,orgaUserId:407,subOrgaId:1e3},{id:5100,orgaId:302,orgaUserId:420,subOrgaId:1100,subAdmin:!0},{id:5101,orgaId:302,orgaUserId:421,subOrgaId:1100,subAdmin:!1}],this.eventService.taskEvent.subscribe(e=>this._onTaskEvent(e))}ngOnDestroy(){}_onTaskEvent(e){switch(e.type){case Vg.AccountVerified:this._updateAccountVerificationFlag(e.account.id);break;case Vg.AccountVerificationDeclined:this._deleteAccount(e.account.id);break;case Vg.OrgaUserInvitationDeclined:this._onOrgaUserRemoval(e.orgaUser);break;case Vg.OrgaUserInvitationAccepted:this._onOrgaUserInvitationAccepted(e.account.id,e.orgaUser.id)}}_onOrgaUserInvitationAccepted(e,t){const n=this.findAccountById(e),r=this.orgaUsers.find(e=>e.id===t);n&&r&&(r.accountId=n.id)}_guardArgument(e,t=""){if(null==e){if(t)throw new Error("Argument <"+t+"> is null or undefined!");throw new Error("Argument is null or undefined!")}}login(e,t=!1){let n;if(e.provider)n=this.creds.find(t=>t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider);else{if(!e.kennung||0===e.kennung.length)return{authType:sg.None};n=this.creds.find(t=>t.kennung.toLowerCase()===e.kennung.toLowerCase())}if(!n)return{authType:sg.None};if(e.secret.length>0&&e.secret!==n.secret)return{authType:sg.None};const r=this.accounts.find(e=>e.id===n.accountId);if(this.settingsService.registeredAccountMustBeVerifiedByMail()&&!r.verified&&!t)return{authType:sg.None};const i=[];if(n.type>ag.StartSpezialTypen){if(!n.orgaId)return console.log("OrgaDependent Credential, but no orgaId => login failed..."),{authType:sg.None};const e=this.orgaUsers.find(e=>e.accountId===r.id&&e.orgaId===n.orgaId);if(!e)return console.log("OrgaDependent Credential, but orgaUser not found => login failed..."),{authType:sg.None};i.push(e)}else this.orgaUsers.forEach(e=>{e.accountId===r.id&&i.push(e)});if(i.length<=0)return{authType:sg.Account,credential:Object.assign({},n),account:Object.assign({},r)};const s=[];i.forEach(e=>{s.push(this.organizations.find(t=>t.id===e.orgaId))});const o={authType:sg.Account,credential:Object.assign({},n),account:Object.assign({},r),availableOrgas:hg(s)};return 1===s.length&&(o.authType=sg.OrgaUser,o.orgaUser=Object.assign({},i[0]),o.organization=s[0]),o}register(e,t){if(!this._checkAccountIsValid(e))return;if(!this._checkCredentialIsValid(t))return;const n=this._addNewAccount(e);t.accountId=n.id;const r=this._addNewCredential(t);return this.login(r,!0)}addNewCredential(e){if(this.principalService.guardPrincipalIsThisAccount(e.accountId),this._checkCredentialIsValid(e))return Object.assign({},this._addNewCredential(e))}getAllCredentials(e){return e?(this.principalService.guardPrincipalIsThisAccount(e),hg(this.creds.filter(t=>t.accountId===e))):[]}removeCredential(e){const t=this.creds.findIndex(t=>t.id===e);t>=0&&(this.principalService.guardPrincipalIsThisAccount(this.creds[t].accountId),this.creds.splice(t,1))}_checkCredentialIsValid(e){if(e.provider){if(!e.userIdFromProvider)return!1;if(this.creds.find(t=>t.provider===e.provider&&t.userIdFromProvider===e.userIdFromProvider))return!1}else{if(!e.kennung||e.kennung.length<3)return!1;if(this.creds.find(t=>t.kennung.toLowerCase()===e.kennung.toLowerCase()))return!1}return!0}_addNewCredential(e){let t=0;return this.creds.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1,this.creds.push(e),e}_deleteAllCredentialsOfAccount(e){this.creds=this.creds.filter(t=>t.accountId!==e)}findAccountByMail(e){const t=this.accounts.find(t=>t.email.toLowerCase()===e.toLowerCase());return t?Object.assign({},t):void 0}findAccountById(e){const t=this.accounts.find(t=>t.id===e);return t?Object.assign({},t):void 0}updateAccount(e){if(this.principalService.guardPrincipalIsThisAccount(e.id),!this._checkAccountIsValid(e))return!1;const t=this.accounts.find(t=>t.id===e.id);return t&&(t.name=e.name,t.email=e.email,t.verified=e.verified),!!t}_updateAccountVerificationFlag(e){const t=this.accounts.find(t=>t.id===e);return t&&(t.verified=!0),!!t}deleteAccount(e){return this.principalService.guardPrincipalIsThisAccount(e),this._deleteAccount(e)}_deleteAccount(e){return!(this._accountIsMemberInAtLeastOneOrga(e)&&!this.settingsService.allowDeletionOfAccountWithOrgaMemberships()||!this.accounts.find(t=>t.id===e)||(this._deleteAllOrgaUsersOfAccount(e),this._deleteAllCredentialsOfAccount(e),this._removeAccountFromList(e),this.eventService.publishIdmEvent({type:pg.AccountDeleted,accountId:e}),0))}_accountIsMemberInAtLeastOneOrga(e){return void 0!==this.orgaUsers.find(t=>t.accountId===e)}_checkAccountIsValid(e){if(!e.name||e.name.length<3)return!1;const t=this.accounts.find(t=>t.email.toLowerCase()===e.email.toLowerCase());return!t||e.id===t.id}_addNewAccount(e){let t=0;return this.accounts.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1,this.accounts.push(e),e}_removeAccountFromList(e){const t=this.accounts.findIndex(t=>t.id===e);t>=0&&this.accounts.splice(t,1)}isForeignUser(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}getAllOrgaUsers(e,t=!1){if(!e)return[];this.principalService.guardPrincipalBelongsToThisOrga(e);let n=hg(this.orgaUsers.filter(t=>t.orgaId===e));return t&&(n=n.filter(e=>!this.isForeignUser(e))),n}getAllOrgaUsers4SubOrga(e,t){if(this.principalService.guardPrincipalIsSubOrgaAdmin(t),void 0===t||0===t)return this.getAllOrgaUsers(e);const n=this.subOrgaUsers.filter(e=>e.subOrgaId===t).map(e=>e.orgaUserId);return hg(this.orgaUsers.filter(e=>n.includes(e.id)))}updateOrgaUser(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this.orgaUsers.find(t=>t.id===e.id);return t&&(t.name=e.name,t.adminType=e.adminType),t}findOrgaUserByAccountId(e,t){if(!e||!t)return;const n=this.orgaUsers.find(n=>n.orgaId===e&&n.accountId===t);return n&&Object.assign({},n)}accountHasAnyOrgaMembership(e){return this.principalService.guardPrincipalIsThisAccount(e),!!this.orgaUsers.find(t=>t.accountId===e)}findForeignUserByOrgaId(e,t){if(this.principalService.guardPrincipalBelongsToThisOrga(e),!e||!t)return;const n=this.orgaUsers.find(n=>n.orgaId===e&&n.foreignUserId===t);return n&&Object.assign({},n)}_findOrgaUserById(e){if(e)return this.orgaUsers.find(t=>t.id===e)}findOrgaUserById(e){const t=this._findOrgaUserById(e);return this.principalService.guardPrincipalIsOrgaAdmin(null==t?void 0:t.orgaId),t&&Object.assign({},t)}findCorrespondingForeignOrgaUser(e){if(!e.foreignUserId)throw new Error("Method findCorrespondingForeignOrgaUser called with wrong orgaUser-Type");this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this._findOrgaUserById(e.foreignUserId);return t&&Object.assign({},t)}_findAllDirectProxyUsersOfUser(e){return this.orgaUsers.filter(t=>t.foreignUserId===e.id)}_addNewOrgaUser(e){let t=0;return this.orgaUsers.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1,this.orgaUsers.push(e),e}_deleteAllOrgaUsersOfAccount(e){this.orgaUsers.filter(t=>t.accountId===e).forEach(e=>this._onOrgaUserRemoval(e))}_isAdmin(e){const t=this._findOrgaUserById(e);return!!t&&(!!(t.adminType&&t.adminType>=ig.Admin)||!this.orgaUsers.find(e=>e.orgaId===t.orgaId&&e.adminType>=ig.Admin)&&this.orgaUsers.findIndex(t=>t.id===e)===this.orgaUsers.findIndex(e=>e.orgaId===t.orgaId))}_onOrgaUserRemoval(e,t=!0){if(!e)return!1;this._removeAllSubUsersOfOrgaUser(e);const n=this._findAllDirectProxyUsersOfUser(e);n&&n.forEach(e=>this._onOrgaUserRemoval(e));const r=this.orgaUsers.findIndex(t=>t.id===e.id);return r>=0&&(this.orgaUsers.splice(r,1),t&&this.eventService.publishIdmEvent({type:pg.OrgaUserRemoved,orgaUser:e}),!0)}getAllSubOrgaUsers4SubOrga(e){return this.principalService.guardPrincipalIsSubOrgaAdmin(e),hg(this.subOrgaUsers.filter(t=>t.subOrgaId===e))}changeSubOrgaUsers(e){const t=this.principalService.getOrgaUser().orgaId;return this.principalService.guardPrincipalIsOrgaAdmin(t),e.forEach(e=>{if(e.orgaId!==t)throw new Error("Method changeSubOrgaUsers called with wrong orgaId!")}),e.forEach(e=>{const t=this.subOrgaUsers.findIndex(t=>t.id===e.id);t>=0?e.subOrgaId?this.subOrgaUsers[t].subAdmin=e.subAdmin:this._removeSubOrgaUser(e.id):this._createSubUser(e)}),!0}_removeSubOrgaUser(e){const t=this.subOrgaUsers.findIndex(t=>t.id===e);if(t>=0){const e=this.subOrgaUsers[t];return this.subOrgaUsers.splice(t,1),this.eventService.publishIdmEvent({type:pg.SubOrgaUserRemoved,subOrganizationId:e.subOrgaId,orgaUser:{id:e.orgaUserId,name:""}}),!0}return!1}_createSubUser(e){let t=0;this.subOrgaUsers.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1;const n={};return Object.assign(n,e),this.subOrgaUsers.push(n),!0}_removeAllSubUsersOfOrgaUser(e){this.subOrgaUsers=this.subOrgaUsers.filter(t=>t.orgaUserId!==e.id)}_findForeignOrgaByOrgaId(e,t){if(e&&t)return this.orgaUsers.find(n=>n.orgaId===e&&n.foreignOrgaId===t)}foreignOrgaIsAlreadyMemberInOrga(e,t){return void 0!==this._findForeignOrgaByOrgaId(e,t)}findOrgaById(e){const t=this.organizations.find(t=>t.id===e);return t&&Object.assign({},t)}getAllOrganizationsForAccount(e){if(!e)return[];const t=[];return this.orgaUsers.filter(t=>t.accountId===e).forEach(e=>{t.push({orga:this.organizations.find(t=>t.id===e.orgaId),orgaUser:e})}),hg(t)}removeOrgaUserByAccountId(e,t){this._guardArgument(e),this._guardArgument(t),this.principalService.guardPrincipalIsThisAccount(t);const n=this.orgaUsers.find(n=>n.orgaId===e&&n.accountId===t);return this._onOrgaUserRemoval(n)}removeOrgaUser(e){this._guardArgument(e);const t=this.orgaUsers.find(t=>t.id===e);return this.principalService.guardPrincipalIsOrgaAdmin(t.orgaId),this._onOrgaUserRemoval(t)}deleteOrganization(e){this.principalService.guardPrincipalIsOrgaSuperAdmin(e);const t=this.organizations.findIndex(t=>t.id===e);t<0||(this.orgaUsers.filter(t=>t.orgaId===e).forEach(e=>this._onOrgaUserRemoval(e,!1)),this.organizations.splice(t,1),this.eventService.publishIdmEvent({type:pg.OrganisationRemoved,organizationId:e}))}joinOrganization(e,t){if(t.accountId&&this.findOrgaUserByAccountId(e,t.accountId))return;if(t.foreignOrgaId&&this._findForeignOrgaByOrgaId(e,t.foreignOrgaId))return;if(t.foreignUserId&&this.findForeignUserByOrgaId(e,t.foreignUserId))return;t.orgaId=e;const n=this._addNewOrgaUser(t);return n&&Object.assign({},n)}createNewOrganization(e,t){const n=this._addNewOrganization(e);return t.orgaId=n.id,this._addNewOrgaUser(t),this.eventService.publishIdmEvent({type:pg.OrganisationCreated,organizationId:e.id}),n&&Object.assign({},n)}_addNewOrganization(e){let t=0;return this.organizations.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1,this.organizations.push(e),e}_getAllAllowedSubOrgas(e,t,n=!0){const r=[];n&&r.push(this._getOrgaAsSubOrga(e)),r.push(...this.subOrganizations.filter(t=>t.orgaId===e));const i=[];return r.forEach(e=>{this._isSubAdmin(t,e.id)&&i.push(e)}),i}getAllAllowedSubOrgas(e,t,n=!0){return hg(this._getAllAllowedSubOrgas(e,t,n))}createSubOrganization(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);let t=0;return this.subOrganizations.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1,this.subOrganizations.push(e),!0}removeSubOrganization(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this.subOrganizations.findIndex(t=>t.id===e.id);return!(t<0||(this.subOrgaUsers=this.subOrgaUsers.filter(t=>t.subOrgaId!==e.id),this.subOrganizations.splice(t,1),this.eventService.publishIdmEvent({type:pg.SubOrganizationRemoved,subOrganizationId:e.id}),0))}_isSubAdmin(e,t){if(this._isAdmin(e))return!0;const n=this.subOrgaUsers.find(n=>n.orgaUserId===e&&n.subOrgaId===t);return!!n&&n.subAdmin}renameSubOrganization(e){this.principalService.guardPrincipalIsOrgaAdmin(e.orgaId);const t=this.subOrganizations.find(t=>t.id===e.id);return!!t&&(t.name=e.name,!0)}_getOrgaAsSubOrga(e){const t=this.findOrgaById(e);return{id:0,name:t.name+" Gesamt",orgaId:t.id}}}return e.\u0275fac=function(t){return new(t||e)(qe(lg),qe(cg),qe(ug))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),jg=(()=>{class e{constructor(e,t){this.fakeBackend=e,this.principalService=t}_getPrincipal(){const e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}getAllOrgasForUser(e){return this.fakeBackend.getAllOrganizationsForAccount(e)}removeOrgaUserByAccountId(e,t){this.fakeBackend.removeOrgaUserByAccountId(e,t)}removeOrgaUser(e){this.fakeBackend.removeOrgaUser(e)}deleteOrganization(e){this.fakeBackend.deleteOrganization(e)}findOrgaById(e){return this.fakeBackend.findOrgaById(e)}findOrgaUserByAccountId(e,t){return this.fakeBackend.findOrgaUserByAccountId(e,t)}findOrgaUserByOrgaUserId(e){return this.fakeBackend.findOrgaUserById(e)}findCorrespondingForeignOrgaUser(e){return this.fakeBackend.findCorrespondingForeignOrgaUser(e)}accountIsAlreadyMemberInOrga(e,t){return void 0!==this.fakeBackend.findOrgaUserByAccountId(e,t)}accountHasAnyOrgaMembership(e){return this.fakeBackend.accountHasAnyOrgaMembership(e)}foreignOrgaIsAlreadyMemberInOrga(e,t){return this.fakeBackend.foreignOrgaIsAlreadyMemberInOrga(e,t)}foreignUserIsAlreadyMemberInOrga(e,t){return void 0!==this.fakeBackend.findForeignUserByOrgaId(e,t)}joinOrganization(e,t){return this.fakeBackend.joinOrganization(e,t)}createNewOrganization(e,t){return this.fakeBackend.createNewOrganization(e,t)}getAllOrgaUsers(e,t=!1){return this.fakeBackend.getAllOrgaUsers(e,t)}getAllOrgaUsers4SubOrga(e,t){return this.fakeBackend.getAllOrgaUsers4SubOrga(e,t)}getAllSubOrgaUsers4SubOrga(e){return this.fakeBackend.getAllSubOrgaUsers4SubOrga(e)}getAllAllowedSubOrgas(e,t=!0){return this.fakeBackend.getAllAllowedSubOrgas(e,this._getPrincipal().id,t)}removeSubOrganization(e){return this.fakeBackend.removeSubOrganization(e)}createSubOrganization(e){return this.fakeBackend.createSubOrganization(e)}changeSubOrgaUsers(e){return this.fakeBackend.changeSubOrgaUsers(e)}renameSubOrganization(e){return this.fakeBackend.renameSubOrganization(e)}updateOrgaUser(e){return this.fakeBackend.updateOrgaUser(e)}}return e.\u0275fac=function(t){return new(t||e)(qe(zg),qe(ug))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Bg(e,t){return new _(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=B(e[a]);let l=!1;n.add(c.subscribe({next:e=>{l||(l=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&l||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}const Hg=new Le("NgValueAccessor"),$g={provide:Hg,useExisting:Ie(()=>Gg),multi:!0};let Gg=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(As(Co),As(wo))},e.\u0275dir=vt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Ns("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[vo([$g])]}),e})();const Kg={provide:Hg,useExisting:Ie(()=>qg),multi:!0},Wg=new Le("CompositionEventMode");let qg=(()=>{class e{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=fc()?fc().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(As(Co),As(wo),As(Wg,8))},e.\u0275dir=vt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Ns("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[vo([Kg])]}),e})(),Zg=(()=>{class e{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e}),e})(),Jg=(()=>{class e extends Zg{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(t){return Qg(t||e)},e.\u0275dir=vt({type:e,features:[eo]}),e})();const Qg=Zn(Jg);function Xg(){throw new Error("unimplemented")}class Yg extends Zg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Xg()}get asyncValidator(){return Xg()}}class ep{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let tp=(()=>{class e extends ep{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(As(Yg,2))},e.\u0275dir=vt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Hs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[eo]}),e})(),np=(()=>{class e extends ep{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(As(Jg,2))},e.\u0275dir=vt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Hs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[eo]}),e})();function rp(e){return null==e||0===e.length}const ip=new Le("NgValidators"),sp=new Le("NgAsyncValidators"),op=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ap{static min(e){return t=>{if(rp(t.value)||rp(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(rp(t.value)||rp(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return rp(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return rp(e.value)||op.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(rp(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return ap.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(rp(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(cp);return 0==t.length?null:function(e){return up(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(cp);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(c(t))return Bg(t,null);if(l(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Bg(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Bg(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(L(e=>t(...e)))}return Bg(e,null)}(function(e,t){return t.map(t=>t(e))}(e,t).map(lp)).pipe(L(up))}}}function cp(e){return null!=e}function lp(e){const t=Ms(e)?B(e):e;if(!Fs(t))throw new Error("Expected validator to return Promise or Observable.");return t}function up(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function dp(e){return e.validate?t=>e.validate(t):e}function hp(e){return e.validate?t=>e.validate(t):e}const gp={provide:Hg,useExisting:Ie(()=>pp),multi:!0};let pp=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(As(Co),As(wo))},e.\u0275dir=vt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Ns("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[vo([gp])]}),e})();const fp={provide:Hg,useExisting:Ie(()=>vp),multi:!0};let mp=(()=>{class e{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),vp=(()=>{class e{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Yg),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return e.\u0275fac=function(t){return new(t||e)(As(Co),As(wo),As(mp),As(ls))},e.\u0275dir=vt({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Ns("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[vo([fp])]}),e})();const yp={provide:Hg,useExisting:Ie(()=>bp),multi:!0};let bp=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(As(Co),As(wo))},e.\u0275dir=vt({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Ns("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[vo([yp])]}),e})();const _p='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',wp='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Op={provide:Hg,useExisting:Ie(()=>Sp),multi:!0};function Ip(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Sp=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=vs}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Ip(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(As(Co),As(wo))},e.\u0275dir=vt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Ns("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[vo([Op])]}),e})(),Cp=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Ip(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(As(wo),As(Co),As(Sp,9))},e.\u0275dir=vt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Ap={provide:Hg,useExisting:Ie(()=>xp),multi:!0};function kp(e,t){return null==e?""+t:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let xp=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=vs}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(As(Co),As(wo))},e.\u0275dir=vt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Ns("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[vo([Ap])]}),e})(),Pp=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(kp(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(kp(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(As(wo),As(Co),As(xp,9))},e.\u0275dir=vt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();function Tp(e,t){return[...t.path,e]}function Rp(e,t){e||Up(t,"Cannot find control with"),t.valueAccessor||Up(t,"No value accessor for form control with"),e.validator=ap.compose([e.validator,t.validator]),e.asyncValidator=ap.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Ep(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Ep(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Ep(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Up(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function Mp(e){return null!=e?ap.compose(e.map(dp)):null}function Fp(e){return null!=e?ap.composeAsync(e.map(hp)):null}const Np=[Gg,bp,pp,Sp,xp,vp];function Dp(e){const t=Vp(e)?e.validators:e;return Array.isArray(t)?Mp(t):t||null}function Lp(e,t){const n=Vp(t)?t.asyncValidators:e;return Array.isArray(n)?Fp(n):n||null}function Vp(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class zp{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Dp(e)}setAsyncValidators(e){this.asyncValidator=Lp(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING";const t=lp(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof Bp?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Hp&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new fa,this.statusChanges=new fa}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class jp extends zp{constructor(e=null,t,n){super(Dp(t),Lp(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Bp extends zp{constructor(e,t,n){super(Dp(t),Lp(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof jp?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,r)=>{t=t||this.contains(r)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Hp extends zp{constructor(e,t,n){super(Dp(t),Lp(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof jp?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const $p={provide:Jg,useExisting:Ie(()=>Kp)},Gp=(()=>Promise.resolve(null))();let Kp=(()=>{class e extends Jg{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new fa,this.form=new Bp({},Mp(e),Fp(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Gp.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Rp(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Gp.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),function(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this._directives,e)})}addFormGroup(e){Gp.then(()=>{const t=this._findContainer(e.path),n=new Bp({});(function(e,t){null==e&&Up(t,"Cannot find control with"),e.validator=ap.compose([e.validator,t.validator]),e.asyncValidator=ap.composeAsync([e.asyncValidator,t.asyncValidator])})(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Gp.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Gp.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(As(ip,10),As(sp,10))},e.\u0275dir=vt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Ns("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vo([$p]),eo]}),e})(),Wp=(()=>{class e extends Jg{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Tp(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Mp(this._validators)}get asyncValidator(){return Fp(this._asyncValidators)}_checkParentType(){}}return e.\u0275fac=function(t){return qp(t||e)},e.\u0275dir=vt({type:e,features:[eo]}),e})();const qp=Zn(Wp);class Zp{static modelParentException(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${_p}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${wp}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${_p}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${wp}`)}}const Jp={provide:Jg,useExisting:Ie(()=>Qp)};let Qp=(()=>{class e extends Wp{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){this._parent instanceof e||this._parent instanceof Kp||Zp.modelGroupParentException()}}return e.\u0275fac=function(t){return new(t||e)(As(Jg,5),As(ip,10),As(sp,10))},e.\u0275dir=vt({type:e,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[vo([Jp]),eo]}),e})();const Xp={provide:Yg,useExisting:Ie(()=>ef)},Yp=(()=>Promise.resolve(null))();let ef=(()=>{class e extends Yg{constructor(e,t,n,r){super(),this.control=new jp,this._registered=!1,this.update=new fa,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||Up(e,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return t.forEach(t=>{var s;t.constructor===qg?n=t:(s=t,Np.some(e=>s.constructor===e)?(r&&Up(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Up(e,"More than one custom value accessor matches form control with"),i=t))}),i||r||n||(Up(e,"No valid value accessor for form control with"),null)}(this,r)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!vs(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Tp(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Mp(this._rawValidators)}get asyncValidator(){return Fp(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rp(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Qp)&&this._parent instanceof Wp?Zp.formGroupNameException():this._parent instanceof Qp||this._parent instanceof Kp||Zp.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Zp.missingNameException()}_updateValue(e){Yp.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;Yp.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(As(Jg,9),As(ip,10),As(sp,10),As(Hg,10))},e.\u0275dir=vt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vo([Xp]),eo,oo]}),e})(),tf=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const nf={provide:ip,useExisting:Ie(()=>rf),multi:!0};let rf=(()=>{class e{get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()}validate(e){return this.required?ap.required(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&Is("required",t.required?"":null)},inputs:{required:"required"},features:[vo([nf])]}),e})();const sf={provide:ip,useExisting:Ie(()=>of),multi:!0};let of=(()=>{class e{ngOnChanges(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null==this.minlength?null:this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=ap.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Is("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[vo([sf]),oo]}),e})(),af=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)}}),e})(),cf=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[mp],imports:[af]}),e})();function lf(e,t){1&e&&(Ts(0,"div"),Ts(1,"h5"),qs(2,"\xdcbersicht \xfcber alle Produkte"),Rs(),Ts(3,"p"),qs(4,"Zum Anzeigen der gekauften Lizenzen bitte in Organisation einloggen..."),Rs(),Rs())}function uf(e,t){1&e&&(Ts(0,"p"),qs(1,"F\xfcr \xc4nderungen ben\xf6tigt man Adminrechte in der Organisation."),Rs())}function df(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"h5"),qs(2,"\xdcbersicht \xfcber alle Produkte und davon gekaufte Lizenzen f\xfcr deine Organisation"),Rs(),Ss(3,uf,2,0,"p",1),Rs()),2&e){const e=Vs();kr(3),xs("ngIf",!e.changesAllowed)}}function hf(e,t){if(1&e&&(Ts(0,"option",13),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e),kr(1),Js(" ",e.name,"")}}function gf(e,t){if(1&e){const e=Us();Ts(0,"div",5),Ts(1,"div",6),Ts(2,"div",7),Ts(3,"div",8),qs(4," Benutzer w\xe4hlen: "),Rs(),Ts(5,"div",9),Ts(6,"select",10,11),Ns("ngModelChange",(function(t){return Gt(e),Vs().selectedUser2Admin=t}))("ngModelChange",(function(){return Gt(e),Vs().onChangedUser()})),Ss(8,hf,2,2,"option",12),Rs(),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=Vs();kr(6),xs("ngModel",e.selectedUser2Admin),kr(2),xs("ngForOf",e.users2Admin)}}function pf(e,t){1&e&&(Ts(0,"span",15),qs(1,"Lizenz notwendig "),Rs())}function ff(e,t){1&e&&(Ts(0,"span",15),qs(1,"keine Lizenz notwendig "),Rs())}function mf(e,t){if(1&e&&(Ts(0,"span",19),qs(1),Rs()),2&e){const e=Vs().$implicit;kr(1),Js("gesamt: ",e.totalLicences,"")}}function vf(e,t){if(1&e&&(Ts(0,"span",19),qs(1),Rs()),2&e){const e=Vs().$implicit;kr(1),Js("davon frei: ",e.freeLicences,"")}}function yf(e,t){if(1&e&&(Ts(0,"span"),qs(1),Rs()),2&e){const e=Vs(3);kr(1),Js("Lizenz ",e.selectedUser2Admin.name," entziehen")}}function bf(e,t){if(1&e&&(Ts(0,"span"),qs(1),Rs()),2&e){const e=Vs(3);kr(1),Js("Lizenz ",e.selectedUser2Admin.name," zuweisen")}}function _f(e,t){if(1&e){const e=Us();Ts(0,"div",20),Ts(1,"button",21),Ns("click",(function(){Gt(e);const t=Vs().index;return Vs().removeOneLicence(t)})),qs(2,"-"),Rs(),Ts(3,"button",22),Ns("click",(function(){Gt(e);const t=Vs().index;return Vs().addOneLicence(t)})),qs(4,"+"),Rs(),Ts(5,"label"),Ts(6,"input",23),Ns("ngModelChange",(function(t){return Gt(e),Vs().$implicit.licencedToUser=t}))("ngModelChange",(function(){Gt(e);const t=Vs().index;return Vs().onUserLicenceChanged(t)})),Rs(),Ss(7,yf,2,1,"span",1),Ss(8,bf,2,1,"span",1),Rs(),Rs()}if(2&e){const e=Vs().$implicit;kr(1),xs("disabled",e.freeLicences<=0),kr(5),xs("ngModel",e.licencedToUser)("disabled",e.freeLicences<=0&&!e.licencedToUser),kr(1),xs("ngIf",e.licencedToUser),kr(1),xs("ngIf",!e.licencedToUser)}}function wf(e,t){if(1&e&&(Ts(0,"li"),Ts(1,"div"),Ts(2,"span",14),qs(3),Rs(),Rs(),Ts(4,"div"),Ts(5,"span",15),qs(6),Rs(),Ss(7,pf,2,0,"span",16),Rs(),Ts(8,"div"),Ss(9,ff,2,0,"span",16),Ss(10,mf,2,1,"span",17),Ss(11,vf,2,1,"span",17),Rs(),Ss(12,_f,9,5,"div",18),Rs()),2&e){const e=t.$implicit,n=t.index,r=Vs();kr(3),Js(" ",r.getProductIdAsString(n)," "),kr(3),Js(" ",r.getProductName(n)," "),kr(1),xs("ngIf",e.licenceNeeded),kr(2),xs("ngIf",!e.licenceNeeded),kr(1),xs("ngIf",e.orgaId>0),kr(1),xs("ngIf",e.orgaId>0),kr(1),xs("ngIf",r.changesAllowed&&e.licenceNeeded)}}function Of(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"button",24),Ns("click",(function(){return Gt(e),Vs().discardChanges()})),qs(2,"\xc4nderungen verwerfen"),Rs(),Ts(3,"button",25),Ns("click",(function(){return Gt(e),Vs().saveChanges()})),qs(4,"\xc4nderungen \xfcbernehmen"),Rs(),Rs()}if(2&e){const e=Vs();kr(1),xs("disabled",!e.dirty),kr(2),xs("disabled",!e.dirty)}}let If=(()=>{class e{constructor(e,t,n,r,i){this.changeDetector=e,this.principalService=t,this.settingsService=n,this.licenceService=r,this.orgaService=i,this.usersDisplayName="",this.loggedInInOrga=!1,this.orgaId=0,this.changesAllowed=!1,this.dirty=!1,this.products=[],this.users2Admin=[]}ngOnInit(){this.settingsService.setTitle("Produkte und Lizenzen"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.loggedInInOrga=this.principalService.isLoggedInInOrga(),this.loggedInInOrga&&(this.orgaId=this.principalService.getOrgaUser().orgaId,this.users2Admin=this.orgaService.getAllOrgaUsers(this.orgaId,!0),this.selectedUser2Admin=this.users2Admin[0]),this.changesAllowed=this.principalService.isAdminOfCurrentOrga(this.orgaId),this._initMembers()}_initMembers(){this.dirty=!1,this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,this.products=this.licenceService.getAllProductAndLicenceInfos(this.orgaId,this.selectedUsersId)}onChangedUser(){if(this.dirty&&!confirm("Willst du den Benutzer wechseln und damit deine \xc4nderungen verwerfen?")){const e=this.users2Admin.find(e=>e.id===this.selectedUsersId);if(e)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=e)}this._initMembers()}getProductIdAsString(e){return this.products[e].id}getProductName(e){return this.products[e].name}addOneLicence(e){this.dirty=!0,this.products[e].totalLicences++,this.products[e].freeLicences++}removeOneLicence(e){this.dirty=!0,this.products[e].totalLicences--,this.products[e].freeLicences--}saveChanges(){this.dirty&&(this.licenceService.saveProductAndLicenceInfo(this.products),this._initMembers())}discardChanges(){this._initMembers()}onUserLicenceChanged(e){this.dirty=!0,this.products[e].licencedToUser?this.products[e].freeLicences--:this.products[e].freeLicences++}}return e.\u0275fac=function(t){return new(t||e)(As(Wi),As(ug),As(lg),As(fg),As(jg))},e.\u0275cmp=dt({type:e,selectors:[["app-products-main"]],decls:7,vars:5,consts:[[1,"container"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s6"],["name","user2admin",1,"browser-default",3,"ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"list-item-text-left"],[1,"list-item-text"],["class","list-item-text",4,"ngIf"],["class","list-item-text-small",4,"ngIf"],["class","buttons-right-div",4,"ngIf"],[1,"list-item-text-small"],[1,"buttons-right-div"],[3,"disabled","click"],[3,"click"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"]],template:function(e,t){1&e&&(Ts(0,"div",0),Ss(1,lf,5,0,"div",1),Ss(2,df,4,1,"div",1),Ss(3,gf,9,2,"div",2),Ts(4,"ul",3),Ss(5,wf,13,7,"li",4),Rs(),Ss(6,Of,5,2,"div",1),Rs()),2&e&&(kr(1),xs("ngIf",!t.loggedInInOrga),kr(1),xs("ngIf",t.loggedInInOrga),kr(1),xs("ngIf",t.changesAllowed),kr(2),xs("ngForOf",t.products),kr(1),xs("ngIf",t.changesAllowed))},directives:[Bc,zc,Sp,tp,ef,Cp,Pp,Gg],styles:[".container[_ngcontent-%COMP%]{display:flex 2 1;margin-top:0;float:left;width:70em}.verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:70em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:70em;position:relative;background-color:#eee;margin-bottom:.5em;padding:.3em 0;height:2em;border-radius:4px}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:2em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:13em;text-align:left}.list-item-text-small[_ngcontent-%COMP%]{float:left;width:6em;text-align:left}hr[_ngcontent-%COMP%]{float:left;width:50em;height:3px;background:teal;margin-top:.4em;margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.buttons-right-div[_ngcontent-%COMP%]{margin-right:.7em;margin-top:-.3em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff;height:2em}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:3em;color:#000}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4db6ac}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),e})(),Sf=(()=>{class e{constructor(e){this.el=e}ngAfterViewInit(){this.el.nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(As(wo))},e.\u0275dir=vt({type:e,selectors:[["","appAutofocus",""]]}),e})();function Cf(e,t){if(1&e){const e=Us();Ts(0,"li"),Ts(1,"span",6),Ns("click",(function(){Gt(e);const n=t.$implicit;return Vs().enterEditMode(n.id)})),qs(2),Rs(),Ts(3,"div",7),Ts(4,"button",8),Ns("click",(function(){Gt(e);const n=t.$implicit;return Vs().removeSubOrganization(n.id)})),qs(5,"Unterstruktur\xa0l\xf6schen"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit;kr(2),Js(" ",e.name," ")}}function Af(e,t){1&e&&Es(0,"hr",9)}function kf(e,t){if(1&e){const e=Us();Ts(0,"div",10),Ts(1,"div",11),Ts(2,"label",12),qs(3,"Unterstrukturname \xe4ndern"),Rs(),Ts(4,"input",13,14),Ns("ngModelChange",(function(t){return Gt(e),Vs().editItemNewName=t}))("keydown.enter",(function(){return Gt(e),Vs().persistEditChanges()})),Rs(),Rs(),Ts(6,"div",15),Ts(7,"button",16),Ns("click",(function(){return Gt(e),Vs().cancelEditMode()})),qs(8," Abbrechen "),Rs(),Ts(9,"button",17),Ns("click",(function(){return Gt(e),Vs().persistEditChanges()})),qs(10," \xdcbernehmen "),Rs(),Rs(),Rs()}if(2&e){const e=Cs(5),t=Vs();kr(4),xs("ngModel",t.editItemNewName),kr(5),xs("disabled",!e.valid)}}function xf(e,t){if(1&e){const e=Us();Ts(0,"form",18,19),Ns("ngSubmit",(function(){return Gt(e),Vs().createNewSubOrganization()})),Ts(2,"div",10),Ts(3,"div",11),Ts(4,"label",20),qs(5,"Name der neuen Unterstruktur"),Rs(),Ts(6,"input",21,22),Ns("ngModelChange",(function(t){return Gt(e),Vs().newSubOrganization.name=t}))("keyup",(function(t){return Gt(e),Vs().somethingChanged(t)})),Rs(),Rs(),Ts(8,"div",15),Ts(9,"button",23),qs(10,"Neue Unterstruktur anlegen"),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=Cs(1),t=Vs();kr(6),xs("ngModel",t.newSubOrganization.name),kr(3),xs("disabled",!e.valid)}}let Pf=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.principalService=t,this.orgaService=n,this.usersDisplayName="",this.subOrgas=[],this.errorMessage="",this.editSubOrgaId=0,this.editItemNewName="",this.errorMsgNameAlreadyInUse="Eine Unterstruktur mit diesen Namen gibt es bereits."}ngOnInit(){this.settingsService.setTitle("Unterstruktur-Verwaltung"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,this._initMembers()}_initMembers(){this.editSubOrgaId=0,this.editItemNewName="",this.errorMessage="",this.newSubOrganization={name:"",orgaId:this.principal.orgaId},this.subOrgas=this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1)}_checkNameAlreadyInUse(e){return!!this.subOrgas.find(t=>t.name.toLocaleLowerCase()===e.toLocaleLowerCase())}removeSubOrganization(e){const t=this.subOrgas.find(t=>t.id===e);t&&confirm("Willst du die Unterstruktur <"+t.name+"> unwiderruflich l\xf6schen?")&&(this.orgaService.removeSubOrganization(t),this._initMembers())}createNewSubOrganization(){this._checkNameAlreadyInUse(this.newSubOrganization.name)?this.errorMessage=this.errorMsgNameAlreadyInUse:(this.orgaService.createSubOrganization(this.newSubOrganization),this._initMembers())}somethingChanged(e){"Enter"!==e.code&&(this.errorMessage="")}enterEditMode(e){const t=this.subOrgas.find(t=>t.id===e);t&&(this.newSubOrganization={name:"",orgaId:this.principal.orgaId},this.editSubOrgaId=e,this.editItemNewName=t.name)}cancelEditMode(){this._initMembers()}persistEditChanges(){const e=this.subOrgas.find(e=>e.id===this.editSubOrgaId);if(!e)return this.cancelEditMode();if(e.name!==this.editItemNewName){if(this._checkNameAlreadyInUse(this.editItemNewName))return void(this.errorMessage=this.errorMsgNameAlreadyInUse);if(!this.orgaService.renameSubOrganization({id:e.id,orgaId:e.orgaId,name:this.editItemNewName}))return void(this.errorMessage="\xc4nderung hat nicht geklappt...")}this.cancelEditMode()}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(ug),As(jg))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-sub-orga-mgmt"]],decls:11,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","hr-1 mt-0 mb-1",4,"ngIf"],["class","row",4,"ngIf"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[1,"error",3,"hidden"],[1,"list-item-text-left",3,"click"],[1,"right"],[1,"btn-danger",3,"click"],[1,"hr-1","mt-0","mb-1"],[1,"row"],[1,"input-field","col","s8","m6","mb-0"],["for","editName"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],[1,"col","s8","m6"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newSubOrgaForm","ngForm"],["for","subOrgaName"],["type","text","id","subOrgaName","name","subOrgaName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["subOrgaName","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Ts(0,"p"),qs(1),Rs(),Ts(2,"ul",0),Ss(3,Cf,6,1,"li",1),Rs(),Ss(4,Af,1,0,"hr",2),Ss(5,kf,11,2,"div",3),Ss(6,xf,11,2,"form",4),Es(7,"br"),Ts(8,"div",5),Ts(9,"p"),qs(10),Rs(),Rs()),2&e&&(kr(1),Js(" Hallo ",t.usersDisplayName,", hier verwaltest du deine Unterstrukturen:"),kr(2),xs("ngForOf",t.subOrgas),kr(1),xs("ngIf",t.subOrgas.length>0),kr(1),xs("ngIf",t.editSubOrgaId>0),kr(1),xs("ngIf",t.editSubOrgaId<=0),kr(2),xs("hidden",!t.errorMessage),kr(2),Zs(t.errorMessage))},directives:[zc,Bc,qg,rf,of,Sf,tp,ef,tf,np,Kp],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;cursor:pointer}"]}),e})(),Tf=(()=>{class e{constructor(e){this.settingsService=e}ngOnInit(){this.settingsService.setTitle("Hilfe / Anleitung");const e=document.querySelectorAll(".collapsible");M.Collapsible.init(e,{})}}return e.\u0275fac=function(t){return new(t||e)(As(lg))},e.\u0275cmp=dt({type:e,selectors:[["app-help"]],decls:141,vars:0,consts:[[1,"collapsible","popout"],[1,"collapsible-header"],[1,"material-icons"],[1,"collapsible-body"],[1,"browser-default"],["href","https://drive.google.com/file/d/1KuLdvRku0cAIhHtSCc7eHb9x66mxTGoW/view?usp=sharing","target","_blank"],["href","https://drive.google.com/file/d/1ijSAEeJenHyFINcc92VGVjEnDYAvcRcy/view?usp=sharing","target","_blank"]],template:function(e,t){1&e&&(Ts(0,"h5"),qs(1,"Hier gibt's Hilfe bzw. Anleitungen, nat\xfcrlich nur in aller K\xfcrze..."),Rs(),Es(2,"br"),Ts(3,"ul",0),Ts(4,"li"),Ts(5,"div",1),Ts(6,"i",2),qs(7,"dehaze"),Rs(),qs(8,"Wozu das Ganze? Was kann ich machen? "),Rs(),Ts(9,"div",3),Ts(10,"ul",4),Ts(11,"li"),qs(12,"Kurz gesagt, man kann sich registrieren, einloggen, Organisationen beitreten/anlegen/verwalten."),Rs(),Ts(13,"li"),qs(14,"Ferner kann man Ordner (dynamische Resourcen) anlegen und verrechten."),Rs(),Ts(15,"li"),qs(16,"Und als Highlight kann man Kollaboration auf so einem Ordner einrichten."),Rs(),Ts(17,"li"),Ts(18,"a",5),qs(19,"Infovideo \xfcber Identit\xe4ten und Organisationen"),Rs(),Rs(),Ts(20,"li"),Ts(21,"a",6),qs(22,"Infovideo \xfcber Rechtemanagement und Kollaboration"),Rs(),Rs(),Rs(),Rs(),Rs(),Ts(23,"li"),Ts(24,"div",1),Ts(25,"i",2),qs(26,"dehaze"),Rs(),qs(27,"Was sehe ich wo?"),Rs(),Ts(28,"div",3),Ts(29,"ul",4),Ts(30,"li"),qs(31,'Auf der Startseite sieht man ein "Men\xfc" der M\xf6glicheiten.'),Rs(),Ts(32,"li"),qs(33,"Unten rechts gibt es Einstellungen, womit man das Verhalten des Prototyps beeinflussen kann."),Rs(),Ts(34,"li"),qs(35,"Ist man angemeldet, wird in der Titelzeile die Organisation (so vorhanden) und der Username angezeigt."),Rs(),Ts(36,"li"),qs(37,'Au\xdferdem gibt es ein "Kontext-Men\xfc" mit mehr-oder-weniger sinnigen Aktionen.'),Rs(),Rs(),Rs(),Rs(),Ts(38,"li"),Ts(39,"div",1),Ts(40,"i",2),qs(41,"dehaze"),Rs(),qs(42,"Das Datenmodell"),Rs(),Ts(43,"div",3),Ts(44,"ul",4),Ts(45,"li"),qs(46,"Ein Account hat 1-n Credentials (Zugangsmedien)"),Rs(),Ts(47,"li"),qs(48,"Ein Account kann in 0-n Organisationen eine Organisations-Identit\xe4t haben."),Rs(),Ts(49,"li"),qs(50,"Ist man in mehreren Organisationen Mitglied, muss man beim Login eine Organisation ausw\xe4hlen."),Rs(),Ts(51,"li"),qs(52,"Eine Organisation beherbergt User, Resourcen und deren Rechte."),Rs(),Ts(53,"li"),qs(54,'Ein Recht besteht aus (Subjekt = User, Objekt = Resource, Erlaubnis = "lesen")'),Rs(),Ts(55,"li"),qs(56,'Pro Berechtigung entsteht ein Eintrag in der "Rechte-Liste"'),Rs(),Rs(),Rs(),Rs(),Ts(57,"li"),Ts(58,"div",1),Ts(59,"i",2),qs(60,"dehaze"),Rs(),qs(61,"Sicherheit? Passw\xf6rter?"),Rs(),Ts(62,"div",3),Ts(63,"ul",4),Ts(64,"li"),qs(65,"Die Seite hat echte Logik, speichert aber nichts dauerhaft."),Rs(),Ts(66,"li"),qs(67,"Alles spielt sich im Browser ab."),Rs(),Ts(68,"li"),qs(69,"Durch Neu-Laden der Seite (F5) ist man wieder am Anfang!"),Rs(),Ts(70,"li"),qs(71,'Eingegebene Passw\xf6rter werden im Klartext "gespeichert".'),Rs(),Ts(72,"li"),qs(73,'Die Testpassw\xf6rter lauten s\xe4mtlich "test".'),Rs(),Rs(),Rs(),Rs(),Ts(74,"li"),Ts(75,"div",1),Ts(76,"i",2),qs(77,"dehaze"),Rs(),qs(78,"Tipps und Tricks"),Rs(),Ts(79,"div",3),Ts(80,"ul",4),Ts(81,"li"),qs(82,'Man muss beim Login kein Passwort eingeben (geht schneller), gibt man aber eines ein, muss es mit dem "registrierten" \xfcbereinstimmen.'),Rs(),Ts(83,"li"),qs(84,"Es sind einige vor-eingetragende Testdaten vorhanden. Bei den Test-Kennungen (Username) gibt die Endung Aufschluss \xfcber den Authentifizierungs-Grad. z.B. tom@bk entspricht einem BenutzerKonto, tom@sc einer SmartCard. "),Rs(),Ts(85,"li"),qs(86,' Kommt einfach "so" die Login-Seite erneut, ist die Ziel-Seite gesch\xfctzt. Entweder generell, dass man eingeloggt sein muss, oder es muss ein "besonderer" Login sein. (Admin, Secure). Meist hilft das Anmelden mit *@sc. '),Rs(),Rs(),Rs(),Rs(),Ts(87,"li"),Ts(88,"div",1),Ts(89,"i",2),qs(90,"dehaze"),Rs(),qs(91,"Testdaten"),Rs(),Ts(92,"div",3),Ts(93,"ul",4),Ts(94,"li"),qs(95,"Kanzlei Heinzelmann mit Simone und Klaus (Admin) (@sc etc.)"),Rs(),Ts(96,"li"),qs(97,"Kanzlei Palmengarten mit Sonja und Martin (Admin)"),Rs(),Ts(98,"li"),qs(99,'Familie Martin privat mit Martin (Admin). D.h. bei Login mit "Martin" kommt eine Organisationsauswahl'),Rs(),Ts(100,"li"),qs(101,"Holzhandel Grubinger mit Petra und Tom (Admin)"),Rs(),Ts(102,"li"),qs(103,"Resi ohne Organisation, d.h. nur Account"),Rs(),Ts(104,"li"),qs(105,"Kanzlei Heinzelmann und Holzhandel Grubinger kollaborieren bereits auf einem Ordner"),Rs(),Rs(),Rs(),Rs(),Ts(106,"li"),Ts(107,"div",1),Ts(108,"i",2),qs(109,"dehaze"),Rs(),qs(110,"Kollaboration, was ist damit gemeint?"),Rs(),Ts(111,"div",3),Ts(112,"ul",4),Ts(113,"li"),qs(114,"Kollaboration meint hier, dass Mitarbeiter verschiedener Organisationen auf ein-und-derselben Resource (Ordner) arbeiten."),Rs(),Ts(115,"li"),qs(116,"Das Ganze geht via Delegation, d.h. ein Admin einer Organisation berechtigt eine zweite Organisation. Ein Admin dieser zweiten Organisation vergibt dann letztendlich die Rechte an seine Mitarbeiter, aber nur die, welche er delegiert bekommen hat."),Rs(),Ts(117,"li"),qs(118,"Am besten ausprobieren: "),Ts(119,"ul",4),Ts(120,"li"),qs(121,"Zwei Organisationen mit jeweils zwei Mitarbieter anlegen"),Rs(),Ts(122,"li"),qs(123,"In der einen einen Ordner anlegen"),Rs(),Ts(124,"li"),qs(125,'Dann der zweiten Organisation "freigeben"'),Rs(),Ts(126,"li"),qs(127,'Und dort an einen der beiden Mitarbieter "freigeben"'),Rs(),Rs(),Rs(),Ts(128,"li"),qs(129,"und folgende Szenarien nachvollziehen, was mit den Zugriffs-Rechten passiert: "),Ts(130,"ul",4),Ts(131,"li"),qs(132,"Die Rechte werden vom Original-Admin eingeschr\xe4nkt"),Rs(),Ts(133,"li"),qs(134,'Der "geteilte" Ordner wird gel\xf6scht'),Rs(),Ts(135,"li"),qs(136,"Der Kollaborations-Users wird aus einladender Organisation entfernt"),Rs(),Ts(137,"li"),qs(138,"die ganze einladende Organisation wird gel\xf6scht"),Rs(),Ts(139,"li"),qs(140,"..."),Rs(),Rs(),Rs(),Rs(),Rs(),Rs(),Rs())},styles:["br[_ngcontent-%COMP%]{margin-bottom:.4em}"]}),e})(),Rf=(()=>{class e{constructor(e){this.fakeBackend=e}getAllCredentialsForUser(e){return this.fakeBackend.getAllCredentials(e)}removeCredential(e){this.fakeBackend.removeCredential(e)}addNewCredential(e){return this.fakeBackend.addNewCredential(e)}}return e.\u0275fac=function(t){return new(t||e)(qe(zg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ef(e,t){if(1&e&&(Ts(0,"li"),Ts(1,"span",3),qs(2),Rs(),Ts(3,"span",4),qs(4),Rs(),Rs()),2&e){const e=t.index,n=Vs();kr(2),Js(" ",n.getCredentialTypeAsString(e)," "),kr(2),Js(" ",n.getCredentialDescription(e)," ")}}function Uf(e,t){if(1&e&&(Ts(0,"li"),Ts(1,"span",3),qs(2),Rs(),Ts(3,"span",4),qs(4),Rs(),Rs()),2&e){const e=t.$implicit;kr(2),Qs(" ",e.orga.name," (",e.orga.id,") "),kr(2),Qs(" ",e.user.name," (",e.user.id,") ")}}function Mf(e,t){if(1&e&&(Ts(0,"div"),Es(1,"hr",5),Ts(2,"p"),qs(3,"In folgenden Organisationen bist du Mitglied, hast also eine Organisations-Identit\xe4t:"),Rs(),Ts(4,"ul",0),Ss(5,Uf,5,4,"li",1),Rs(),Rs()),2&e){const e=Vs();kr(5),xs("ngForOf",e.orgaAndUserList)}}let Ff=(()=>{class e{constructor(e,t,n,r){this.settingsService=e,this.credentialService=t,this.orgaService=n,this.principalService=r,this.usersDisplayName="",this.loggedInAs="",this.authLevel="",this.credentials=[],this.orgaAndUserList=[]}ngOnInit(){this.settingsService.setTitle("User-Infos"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this._initMembers()}_initMembers(){this.credentials=this.credentialService.getAllCredentialsForUser(this.principal.id),this._setLoggedInInfo(),this._setOrgasMemberships()}_setLoggedInInfo(){let e=this.principalService.getOrgaUser();e&&e.id?this.loggedInAs="Organisations-Identit\xe4t <"+e.name+"> in der Organisation: <"+this.principalService.getOrgaName()+">":(e=this.principalService.getAccount(),this.loggedInAs="Account-Identit\xe4t <"+e.name+">"),this.authLevel=this.principalService.getAuthLevelAsString()}_setOrgasMemberships(){this.principalService.getAllAvailableOrgas().forEach(e=>{this.orgaAndUserList.push({orga:e,user:this.orgaService.findOrgaUserByAccountId(e.id,this.principal.id)})})}getCredentialTypeAsString(e){return ag[this.credentials[e].type]}getCredentialDescription(e){const t=this.credentials[e];let n="Kennung: <"+t.kennung+">";return t.type>9&&t.orgaId&&(n+=" ("+t.orgaId+")"),t.type===ag.SocialLogin&&(n=t.provider+"-ID: "+t.userIdFromProvider),n+=", Auth-Level: <"+og[this.principalService.determineAuthLevel(t)]+">",n}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(Rf),As(jg),As(ug))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-user-info"]],decls:11,vars:5,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"hr-2"]],template:function(e,t){1&e&&(Ts(0,"h6"),qs(1),Rs(),Ts(2,"p"),qs(3),Rs(),Ts(4,"p"),qs(5),Rs(),Ts(6,"p"),qs(7,"Du hast folgende Zugangsmedien:"),Rs(),Ts(8,"ul",0),Ss(9,Ef,5,2,"li",1),Rs(),Ss(10,Mf,6,1,"div",2)),2&e&&(kr(1),Js(" Hallo ",t.usersDisplayName,""),kr(2),Js("Du bist angemeldet als ",t.loggedInAs,"."),kr(2),Js("Dein aktuelles Authentifizierungsniveau ist: <",t.authLevel,">."),kr(4),xs("ngForOf",t.credentials),kr(1),xs("ngIf",t.orgaAndUserList.length>0))},directives:[zc,Bc],styles:[""]}),e})(),Nf=(()=>{class e{constructor(e,t){this.principalService=e,this.accessService=t,this.allFolders=[],this.dummyResourceId=-1,this._fillTestdata()}_fillTestdata(){this.allFolders.push({id:1,orgaId:300,name:"Notizen"},{id:2,orgaId:300,name:"Steuersachen"},{id:3,orgaId:300,name:"Golfausfl\xfcge"},{id:4,orgaId:300,name:"Kollaboration von Heinzelmann f\xfcr Grubinger"},{id:10,orgaId:301,name:"Rechtliches"},{id:11,orgaId:301,name:"Kassenarchiv"},{id:20,orgaId:302,name:"Finanzen"},{id:21,orgaId:302,name:"Rechnungen"})}_getPrincipal(){const e=this.principalService.getOrgaUser();if(!e)throw new Error("Principal nicht gesetzt!");return e}_assureCurrentPrincipalHasAdminPermission(){if(!this.principalService.isAdminOfCurrentOrga())throw new Error("Principal is not admin of current orga!")}_findFolderById(e){return this.allFolders.find(t=>t.id===e)}_toResource(e){return{id:e.id,typeId:dg.Folder,orgaId:e.orgaId,displayName:e.name}}renameFolder(e){if(!this.accessService.hasPermission(this._toResource(e),Sg.FolderWritePermissionKey))return!1;const t=this._findFolderById(e.id);if(!t)throw new Error("RenameFolder: Ordner existiert gar nicht.");return t.name===e.name||!this._isFolderNameAlreadyUsedInOrga(e)&&(t.name=e.name,this.accessService.renameResource(this._toResource(e)),!0)}_sort(e){const t=this._getPrincipal().orgaId;return e.sort((e,n)=>{if(e.orgaId===t&&n.orgaId===t)return e.id-n.id;if(e.orgaId===t)return-1;if(n.orgaId===t)return 1;const r=e.orgaId-n.orgaId;return 0===r?e.id-n.id:r})}getAllFoldersOfOrgaWithRightsOfGivenUser4Administration(e){this._assureCurrentPrincipalHasAdminPermission();const t=this._getPrincipal().orgaId,n=this.accessService.getAllResourceIdsOwnedByOrDelegatedToOrga(dg.Folder,t),r=[];return n.forEach(t=>{const n=this._findFolderById(t),i={id:t,orgaId:n.orgaId,name:n.name};r.push(i),this._setMaxEnabledPermissions(n,e,i),this._setAdministratedPermissions(n,e,i)}),hg(this._sort(r))}_setAdministratedPermissions(e,t,n){const r={typeId:dg.Folder,id:n.id,orgaId:e.orgaId};n.readAllowed=this.accessService.hasAdministratedPermission(r,t,Sg.FolderReadPermissionKey),n.writeAllowed=this.accessService.hasAdministratedPermission(r,t,Sg.FolderWritePermissionKey),n.deleteAllowed=this.accessService.hasAdministratedPermission(r,t,Sg.FolderDeletePermissionKey)}_setMaxEnabledPermissions(e,t,n){const r={typeId:dg.Folder,id:n.id,orgaId:e.orgaId};n.readDisabled=!this.accessService.permissionIsEnabled4Administration(r,t,Sg.FolderReadPermissionKey),n.writeDisabled=!this.accessService.permissionIsEnabled4Administration(r,t,Sg.FolderWritePermissionKey),n.deleteDisabled=!this.accessService.permissionIsEnabled4Administration(r,t,Sg.FolderDeletePermissionKey)}getAllAccessibleFolders4CurrentUser(){const e=this.accessService.getAllResources4PrincipalWithAtLeastOnePermission(dg.Folder),t=[];return e.forEach(e=>{const n=this.allFolders.find(t=>t.id===e.id);if(n){let e={};Object.assign(e,n);const r={typeId:dg.Folder,id:n.id};e.readAllowed=this.accessService.hasPermission(r,Sg.FolderReadPermissionKey),e.writeAllowed=this.accessService.hasPermission(r,Sg.FolderWritePermissionKey),e.deleteAllowed=this.accessService.hasPermission(r,Sg.FolderDeletePermissionKey),t.push(e)}}),hg(this._sort(t))}setFolderRightsOfGivenUser(e,t){this._assureCurrentPrincipalHasAdminPermission(),t.forEach(t=>{if(t.dirty){const n=[];t.readAllowed&&n.push(Sg.FolderReadPermissionKey),t.writeAllowed&&n.push(Sg.FolderWritePermissionKey),t.deleteAllowed&&n.push(Sg.FolderDeletePermissionKey),this.accessService.setPermissionsOfUser2resource(e,{typeId:dg.Folder,id:t.id,orgaId:t.orgaId},n)}})}removeFolder(e){if(!this.accessService.hasPermission({typeId:dg.Folder,id:e},Sg.FolderDeletePermissionKey))return!1;this.accessService.removeResource({typeId:dg.Folder,id:e},Sg.FolderDeletePermissionKey);const t=this.allFolders.findIndex(t=>t.id===e);return t>=0&&this.allFolders.splice(t,1),!0}_isFolderNameAlreadyUsedInOrga(e){return!!this.allFolders.find(t=>t.orgaId===e.orgaId&&t.name===e.name)}user2adminMayCreateNewFolder(e){return this.accessService.hasPermission4staticResource4administration(e,{typeId:dg.FolderRoot,id:this.dummyResourceId,orgaId:e.orgaId},Sg.FolderCreatePermissionKey)}userMayCreateNewFolder(e){return this.accessService.hasPermission4staticResource({typeId:dg.FolderRoot,id:this.dummyResourceId,orgaId:e},Sg.FolderCreatePermissionKey)}setUserMayCreateNewFolder(e,t){this._assureCurrentPrincipalHasAdminPermission(),this.accessService.setPermissionsOfUser2staticResource(e,{typeId:dg.FolderRoot,id:this.dummyResourceId,orgaId:e.orgaId},t?[Sg.FolderCreatePermissionKey]:[])}_getNewUniqueId(){let e=0;return this.allFolders.forEach(t=>{t.id>e&&(e=t.id)}),e+1}addNewFolder(e){if(this._isFolderNameAlreadyUsedInOrga(e))return!1;const t=this._getPrincipal();return!!this.userMayCreateNewFolder(t.orgaId)&&(e.id=this._getNewUniqueId(),this.allFolders.push(e),this.accessService.createNewResource({typeId:dg.Folder,id:e.id,orgaId:e.orgaId,displayName:e.name}),!0)}}return e.\u0275fac=function(t){return new(t||e)(qe(ug),qe(xg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Df(e,t){if(1&e&&(Ts(0,"option",14),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e),kr(1),Js(" ",e.name,"")}}const Lf=function(e){return{"foreign-folder":e}};function Vf(e,t){if(1&e){const e=Us();Ts(0,"li",15),Ts(1,"span",16),Ts(2,"i",17),qs(3,"folder"),Rs(),qs(4),Rs(),Ts(5,"span",18),qs(6),Rs(),Ts(7,"label",3),Ts(8,"input",9),Ns("ngModelChange",(function(n){return Gt(e),t.$implicit.readAllowed=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Vs().onChanged(n)})),Rs(),Ts(9,"span"),qs(10,"lesen"),Rs(),Rs(),Ts(11,"label",3),Ts(12,"input",9),Ns("ngModelChange",(function(n){return Gt(e),t.$implicit.writeAllowed=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Vs().onChanged(n)})),Rs(),Ts(13,"span"),qs(14,"schreiben"),Rs(),Rs(),Ts(15,"label"),Ts(16,"input",9),Ns("ngModelChange",(function(n){return Gt(e),t.$implicit.deleteAllowed=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Vs().onChanged(n)})),Rs(),Ts(17,"span"),qs(18,"l\xf6schen"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit,n=Vs();xs("ngClass",ha(9,Lf,n.isForeignFolder(e))),kr(4),Js(" ",e.id," "),kr(2),Js(" ",e.name," "),kr(2),xs("ngModel",e.readAllowed)("disabled",e.readDisabled),kr(4),xs("ngModel",e.writeAllowed)("disabled",e.writeDisabled),kr(4),xs("ngModel",e.deleteAllowed)("disabled",e.deleteDisabled)}}const zf=function(e){return{"foreign-user":e}};let jf=(()=>{class e{constructor(e,t,n,r,i){this.changeDetector=e,this.settingsService=t,this.folderService=n,this.principalService=r,this.orgaService=i,this.usersDisplayName="",this.users2Admin=[],this.folders=[],this.createNewFolderAllowed=!1,this.createNewFolderOldValue=!1,this.dirty=!1}ngOnInit(){this.settingsService.setTitle("dezentrale Ordner-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.users2Admin=this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.selectedUser2Admin=this.users2Admin[0],this._initMembers()}_initMembers(){this.selectedUsersId=this.selectedUser2Admin&&this.selectedUser2Admin.id,this.folders=this.folderService.getAllFoldersOfOrgaWithRightsOfGivenUser4Administration(this.selectedUser2Admin),this.createNewFolderAllowed=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this.createNewFolderOldValue=this.createNewFolderAllowed,this.dirty=!1}isForeignUser(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}isForeignFolder(e){return!!e&&e.orgaId!==this.principal.orgaId}resetFolderRights(){this._initMembers()}_afterSavingPermissions(){this.dirty=!1,this.createNewFolderOldValue=this.createNewFolderAllowed,this.folders.forEach(e=>e.dirty=!1)}saveFolderRights(){this.createNewFolderAllowed!==this.createNewFolderOldValue&&this.folderService.setUserMayCreateNewFolder(this.selectedUser2Admin,this.createNewFolderAllowed);const e=this.folders.filter(e=>e.dirty);this.folderService.setFolderRightsOfGivenUser(this.selectedUser2Admin,e),this._afterSavingPermissions()}onChangedUser(){if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){const e=this.users2Admin.find(e=>e.id===this.selectedUsersId);if(e)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=e)}this._initMembers()}onChanged(e=-1){if(this.dirty=!0,e>=0){const t=this.folders[e];t&&(t.dirty=!0)}}}return e.\u0275fac=function(t){return new(t||e)(As(Wi),As(lg),As(Nf),As(ug),As(jg))},e.\u0275cmp=dt({type:e,selectors:[["app-admin-folders"]],decls:21,vars:11,consts:[[1,"container-form"],[1,"row"],[1,"col","s12"],[1,"mr-1"],[1,"input-field","inline"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text"]],template:function(e,t){1&e&&(Ts(0,"h6"),qs(1),Rs(),Ts(2,"div",0),Ts(3,"div",1),Ts(4,"div",2),Ts(5,"span",3),qs(6,"Benutzer\xa0w\xe4hlen:"),Rs(),Ts(7,"div",4),Ts(8,"select",5,6),Ns("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),Ss(10,Df,2,2,"option",7),Rs(),Rs(),Rs(),Rs(),Ts(11,"label",8),Ts(12,"input",9),Ns("ngModelChange",(function(e){return t.createNewFolderAllowed=e}))("ngModelChange",(function(){return t.onChanged()})),Rs(),Ts(13,"span"),qs(14,"Darf neue Ordner anlegen"),Rs(),Rs(),Ts(15,"ul",10),Ss(16,Vf,19,11,"li",11),Rs(),Ts(17,"button",12),Ns("click",(function(){return t.resetFolderRights()})),qs(18,"Zur\xfccksetzen"),Rs(),Ts(19,"button",13),Ns("click",(function(){return t.saveFolderRights()})),qs(20,"\xdcbernehmen"),Rs(),Rs()),2&e&&(kr(1),Js(" Hallo ",t.usersDisplayName,", hier kannst du f\xfcr bestimmte Ordner Rechte vergeben."),kr(7),xs("ngClass",ha(9,zf,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),kr(2),xs("ngForOf",t.users2Admin),kr(2),xs("ngModel",t.createNewFolderAllowed)("disabled",t.isForeignUser(t.selectedUser2Admin)),kr(4),xs("ngForOf",t.folders),kr(1),xs("disabled",!t.dirty),kr(2),xs("disabled",!t.dirty))},directives:[Sp,Lc,tp,ef,zc,Gg,Cp,Pp],styles:[".foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}.liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.liste[_ngcontent-%COMP%]{max-width:70rem}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{width:25em}select[_ngcontent-%COMP%]{border:3px solid teal}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0!important}.input-field.inline[_ngcontent-%COMP%]{margin-left:0!important}"]}),e})();function Bf(e,t){if(1&e){const e=Us();Ts(0,"button",10),Ns("click",(function(){Gt(e);const t=Vs().$implicit;return Vs().removeFolder(t.id)})),qs(1," L\xf6schen"),Rs()}}const Hf=function(e){return{"foreign-folder":e}};function $f(e,t){if(1&e){const e=Us();Ts(0,"li",5),Ts(1,"span",6),Ts(2,"i",7),qs(3,"folder"),Rs(),qs(4),Rs(),Ts(5,"span",8),Ns("click",(function(){Gt(e);const n=t.index;return Vs().enterEditMode(n)})),qs(6),Rs(),Ss(7,Bf,2,0,"button",9),Rs()}if(2&e){const e=t.$implicit,n=Vs();xs("ngClass",ha(5,Hf,n.isForeignFolder(e))),kr(4),Js(" ",e.id," "),kr(2),Qs(" ",e.name," ",n.getPermissionsHint(e)," "),kr(1),xs("ngIf",e.deleteAllowed)}}function Gf(e,t){if(1&e){const e=Us();Ts(0,"div",11),Ts(1,"div",12),Ts(2,"div",13),Ts(3,"label",14),qs(4,"Ordnername \xe4ndern"),Rs(),Ts(5,"input",15,16),Ns("ngModelChange",(function(t){return Gt(e),Vs().editFolderNewName=t}))("keydown.enter",(function(){return Gt(e),Vs().persistEditFolderChanges()})),Rs(),Rs(),Ts(7,"button",17),Ns("click",(function(){return Gt(e),Vs().cancelEditMode()})),qs(8," Abbrechen "),Rs(),Ts(9,"button",18),Ns("click",(function(){return Gt(e),Vs().persistEditFolderChanges()})),qs(10," \xdcbernehmen "),Rs(),Rs(),Rs()}if(2&e){const e=Cs(6),t=Vs();kr(5),xs("ngModel",t.editFolderNewName),kr(4),xs("disabled",!e.valid)}}function Kf(e,t){if(1&e){const e=Us();Ts(0,"div",11),Ts(1,"form",19,20),Ns("ngSubmit",(function(){return Gt(e),Vs().addNewFolder()})),Ts(3,"div",12),Ts(4,"div",21),Ts(5,"label",22),qs(6,"Ordnername"),Rs(),Ts(7,"input",23,24),Ns("ngModelChange",(function(t){return Gt(e),Vs().newFolder.name=t}))("keyup",(function(t){return Gt(e),Vs().somethingChanged(t)})),Rs(),Rs(),Ts(9,"div",25),Ts(10,"button",26),qs(11,"Ordner\xa0anlegen"),Rs(),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=Cs(2),t=Vs();kr(7),xs("ngModel",t.newFolder.name),kr(3),xs("disabled",!e.valid)}}let Wf=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.folderService=t,this.principalService=n,this.usersDisplayName="",this.folders=[],this.userMayCreateNewFolder=!1,this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName=""}ngOnInit(){this.settingsService.setTitle("Ordneransicht"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.userMayCreateNewFolder=this.folderService.userMayCreateNewFolder(this.principal.orgaId),this._initMembers()}_initMembers(e=!0){this.errorMessage="",this.editFolderIdx=-1,this.editFolderNewName="",this.newFolder={orgaId:this.principal.orgaId,name:""},e&&(this.folders=this.folderService.getAllAccessibleFolders4CurrentUser())}isForeignFolder(e){return e.orgaId!==this.principal.orgaId}getPermissionsHint(e){let t=" (";return e.readAllowed&&(t+="r"),e.writeAllowed&&(t+="w"),e.deleteAllowed&&(t+="d"),t+=")",this.isForeignFolder(e)&&(t+=" (von: "+e.orgaId+")"),t}enterEditMode(e){e<0||e>=this.folders.length||(this._initMembers(!1),this.editFolderIdx=e,this.editFolderNewName=this.folders[e].name)}cancelEditMode(){this._initMembers(!1)}persistEditFolderChanges(){const e=this.folders[this.editFolderIdx],t=e.name;e.name!==this.editFolderNewName?(this.folders[this.editFolderIdx].name=this.editFolderNewName,this.folderService.renameFolder(this.folders[this.editFolderIdx])?this.cancelEditMode():(this.errorMessage="Der Ordnername wird schon verwendet.",e.name=t)):this.cancelEditMode()}removeFolder(e){this.folderService.removeFolder(e)?this._initMembers():this.errorMessage="Du darfst diesen Ordner nicht l\xf6schen, fehlende Berechtigung!"}addNewFolder(){this.userMayCreateNewFolder&&(this.folderService.addNewFolder(this.newFolder)?this._initMembers():this.errorMessage="Der Ordnername wird schon verwendet.")}somethingChanged(e){"Enter"!==e.code&&(this.errorMessage="")}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(Nf),As(ug))},e.\u0275cmp=dt({type:e,selectors:[["app-listfolders"]],decls:10,vars:6,consts:[[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-1"],["class","container-form",4,"ngIf"],[1,"error-text",3,"hidden"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"material-icons","left","blue-text"],[1,"list-item-text",3,"click"],["class","btnInListe btnDelete","style","position: absolute; right: 0.7em;",3,"click",4,"ngIf"],[1,"btnInListe","btnDelete",2,"position","absolute","right","0.7em",3,"click"],[1,"container-form"],[1,"row"],[1,"input-field","col","s8","m6","mb-0","mr-1"],["for","editName"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["autocomplete","off",3,"ngSubmit"],["newFolderForm","ngForm"],[1,"input-field","col","s8","m6","mb-0"],["for","folderName"],["type","text","id","folderName","name","folderName","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["folderName","ngModel"],[1,"col","s6","m4"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,t){1&e&&(Ts(0,"h6"),qs(1),Rs(),Ts(2,"ul",0),Ss(3,$f,8,7,"li",1),Es(4,"hr",2),Rs(),Ss(5,Gf,11,2,"div",3),Ss(6,Kf,12,2,"div",3),Ts(7,"div",4),Ts(8,"p"),qs(9),Rs(),Rs()),2&e&&(kr(1),Js(" Hallo ",t.usersDisplayName,", auf folgende Ordner hast du mind. eine Berechtigung (egal welche):"),kr(2),xs("ngForOf",t.folders),kr(2),xs("ngIf",t.editFolderIdx>=0),kr(1),xs("ngIf",t.userMayCreateNewFolder&&t.editFolderIdx<0),kr(1),xs("hidden",!t.errorMessage),kr(2),Js("Hinweis/Fehler: ",t.errorMessage,""))},directives:[zc,Bc,Lc,qg,rf,of,Sf,tp,ef,tf,np,Kp],styles:[".liste[_ngcontent-%COMP%]   .foreign-folder[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{width:5rem}.list-item-text[_ngcontent-%COMP%]{cursor:pointer}.error-text[_ngcontent-%COMP%]{font-weight:700;color:#dc143c}"]}),e})();var qf=function(e){return e[e.None=0]="None",e[e.AccountVerification=1]="AccountVerification",e[e.InvitationOrgaUser=2]="InvitationOrgaUser",e[e.DeclinedOrgaUserInvitation=3]="DeclinedOrgaUserInvitation",e[e.AcceptedOrgaUserInvitation=4]="AcceptedOrgaUserInvitation",e}({});let Zf=(()=>{class e{constructor(e,t,n){this.principalService=e,this.orgaService=t,this.eventService=n,this.notificationList=[],this.eventService.idmEvent.subscribe(e=>this._onIdmEvent(e))}_onIdmEvent(e){const t=this.notificationList.length;switch(e.type){case pg.AccountDeleted:this._removeItemsForThisAccount(e.accountId);break;case pg.OrgaUserRemoved:this._removeItemsForThisOrgaUser(e.orgaUser.id);break;case pg.OrganisationRemoved:this._removeItemsForThisOrganisation(e.organizationId)}this.notificationList.length!==t&&this.eventService.publishRefreshMainViewEvent()}_removeItemsForThisAccount(e){this.notificationList=this.notificationList.filter(t=>{var n;return(null===(n=t.accountAsRecipient)||void 0===n?void 0:n.id)!==e})}_removeItemsForThisOrgaUser(e){this.notificationList=this.notificationList.filter(t=>{var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.id)!==e})}_removeItemsForThisOrganisation(e){this.notificationList=this.notificationList.filter(t=>t.orgaIdAsRecipient!==e),this.notificationList=this.notificationList.filter(t=>{var n;return(null===(n=t.orgaUser)||void 0===n?void 0:n.orgaId)!==e})}_fillWithTestData(){this.notificationList.push({id:1,type:qf.AccountVerification,accountAsRecipient:{id:110,name:"Klaus",email:""}},{id:3,type:qf.InvitationOrgaUser,accountAsRecipient:{id:110,name:"Klaus",email:""},orgaUser:{id:410,name:"Klaus Kraus",orgaId:300}},{id:4,type:qf.AcceptedOrgaUserInvitation,orgaIdAsRecipient:300,orgaUser:{id:410,name:"Klaus Kraus",orgaId:302}},{id:5,type:qf.DeclinedOrgaUserInvitation,orgaIdAsRecipient:301,orgaUser:{id:410,name:"Klaus Kraus",orgaId:301}})}addNotification(e){let t=0;this.notificationList.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1,this.notificationList.push(e)}getAllNotificationsForCurrentPrincipal(){var e,t;if(!this.principalService.isLoggedIn())return[];let n=null!==(t=null===(e=this.principalService.getOrgaUser())||void 0===e?void 0:e.orgaId)&&void 0!==t?t:0;return n&&!this.principalService.isAdminOfCurrentOrga()&&(n=0),this.notificationList.filter(e=>{var t;return(null===(t=e.accountAsRecipient)||void 0===t?void 0:t.id)===this.principalService.getAccount().id||e.orgaIdAsRecipient===n?e:void 0})}getNumberOfNotificationsForCurrentPrincipal(){return this.getAllNotificationsForCurrentPrincipal().length}_declineInvitationOrgaUser(e){this.eventService.publishTaskEvent({type:Vg.OrgaUserInvitationDeclined,orgaUser:e.orgaUser}),this.addNotification({type:qf.DeclinedOrgaUserInvitation,orgaIdAsRecipient:e.orgaUser.orgaId,orgaUser:e.orgaUser})}declineInvitation(e){const t=this.notificationList.find(t=>t.id===e);if(t){switch(t.type){case qf.AccountVerification:break;case qf.InvitationOrgaUser:this._declineInvitationOrgaUser(t)}this.removeNotification(e)}}acceptInvitation(e){const t=this.notificationList.find(t=>t.id===e);if(t){switch(t.type){case qf.AccountVerification:break;case qf.InvitationOrgaUser:this._acceptInvitationOrgaUser(t)}this.removeNotification(e)}}removeNotification(e){const t=this.notificationList.findIndex(t=>t.id===e);t>=0&&this.notificationList.splice(t,1),this.eventService.publishRefreshMainViewEvent()}_acceptInvitationOrgaUser(e){return this.eventService.publishTaskEvent({type:Vg.OrgaUserInvitationAccepted,account:this.principalService.getAccount(),orgaUser:e.orgaUser}),!!this.orgaService.findOrgaUserByAccountId(e.orgaUser.orgaId,this.principalService.getAccount().id)&&(this.addNotification({type:qf.AcceptedOrgaUserInvitation,orgaIdAsRecipient:e.orgaUser.orgaId,orgaUser:e.orgaUser}),!0)}}return e.\u0275fac=function(t){return new(t||e)(qe(ug),qe(jg),qe(cg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Jf(e,t){if(1&e&&(Ts(0,"h4"),qs(1),Rs()),2&e){const e=Vs();kr(1),Js("",e.principal.name,", du hast keine Nachrichten.")}}const Qf=function(e){return{editMode:e}};function Xf(e,t){if(1&e){const e=Us();Ts(0,"li",3),Ns("click",(function(){Gt(e);const n=t.index;return Vs(2).showNotification(n)})),Ts(1,"span",4),qs(2),Rs(),Ts(3,"span",5),qs(4),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,r=Vs(2);xs("ngClass",ha(3,Qf,e.id===r.notificationTodo.id)),kr(2),Js(" ",r.getTypeAsString(n)," "),kr(2),Js(" ",r.getDetailsOfNotification(n)," ")}}function Yf(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"p"),qs(2,"Du hast deine Mail-Adresse erfolgreich verifiziert und damit deinen Account aktiviert. "),Es(3,"br"),qs(4," Dies ist nur eine Information, du musst weiter nichts unternehmen."),Rs(),Ts(5,"button",6),Ns("click",(function(){return Gt(e),Vs(3).declineInvitation()})),qs(6,"Nachricht l\xf6schen"),Rs(),Rs()}}function em(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"p"),qs(2),Es(3,"br"),qs(4,' Durch "Annehmen" akzeptierst du die Einladung und der Vorgang ist abgeschlossen. '),Rs(),Ts(5,"button",7),Ns("click",(function(){return Gt(e),Vs(3).declineInvitation()})),qs(6,"Ablehnen"),Rs(),Ts(7,"button",8),Ns("click",(function(){return Gt(e),Vs(3).acceptInvitation()})),qs(8,"Annehmen"),Rs(),Rs()}if(2&e){const e=Vs(3);kr(2),Js('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',e.getOrgaName(e.notificationTodo.orgaUser.orgaId),'" vorgesehen. ')}}function tm(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"p"),qs(2),Es(3,"br"),qs(4," Dies ist nur eine Information. "),Rs(),Ts(5,"button",8),Ns("click",(function(){return Gt(e),Vs(3).acceptInvitation()})),qs(6,"Nachricht l\xf6schen"),Rs(),Rs()}if(2&e){const e=Vs(3);kr(2),Js("Der Benutzer ",e.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation abgelehnt. Der entsprechende Organisations-User wurde entfernt. ")}}function nm(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"p"),qs(2),Es(3,"br"),qs(4," Dies ist nur eine Information. "),Rs(),Ts(5,"button",8),Ns("click",(function(){return Gt(e),Vs(3).acceptInvitation()})),qs(6,"Nachricht l\xf6schen"),Rs(),Rs()}if(2&e){const e=Vs(3);kr(2),Js("Der Benutzer ",e.notificationTodo.orgaUser.name," hat die Einladung als Mitarbeiter in dieser Organisation angenommen. ")}}function rm(e,t){if(1&e&&(Ts(0,"div"),Ss(1,Yf,7,0,"div",0),Ss(2,em,9,1,"div",0),Ss(3,tm,7,1,"div",0),Ss(4,nm,7,1,"div",0),Rs()),2&e){const e=Vs(2);kr(1),xs("ngIf",1===e.notificationTodo.type),kr(1),xs("ngIf",2===e.notificationTodo.type),kr(1),xs("ngIf",3===e.notificationTodo.type),kr(1),xs("ngIf",4===e.notificationTodo.type)}}function im(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"h6"),qs(2),Rs(),Ts(3,"ul",1),Ss(4,Xf,5,5,"li",2),Rs(),Ss(5,rm,5,4,"div",0),Rs()),2&e){const e=Vs();kr(2),Js("",e.principal.name,", du hast folgende Nachrichten:"),kr(2),xs("ngForOf",e.allNotifications),kr(1),xs("ngIf",e.notificationTodo.id>0)}}let sm=(()=>{class e{constructor(e,t,n,r){this.notificationService=e,this.principalService=t,this.settingsService=n,this.orgaService=r,this.allNotifications=[],this.notificationDescription="",this.settingsService.setTitle("Nachrichten")}ngOnInit(){this.principal=this.principalService.getAccount(),this.initMembers()}initMembers(){this.allNotifications=this.notificationService.getAllNotificationsForCurrentPrincipal(),this.allNotifications.length>0?(this.idxNotificationTodo||(this.idxNotificationTodo=0),this.allNotifications[this.idxNotificationTodo]||(this.idxNotificationTodo=this.idxNotificationTodo-1),this.showNotification(this.idxNotificationTodo)):(this.idxNotificationTodo=void 0,this.notificationTodo={type:qf.None,accountAsRecipient:void 0,id:0},this.notificationDescription="")}getTypeAsString(e){const t=this.allNotifications[e];return t.id+": "+qf[t.type]}getOrgaName(e){const t=this.orgaService.findOrgaById(e);return t&&t.name||"unknown-Orga"}getDetailsOfNotification(e){const t=this.allNotifications[e];switch(t.type){case qf.AccountVerification:return t.accountAsRecipient.name;case qf.InvitationOrgaUser:case qf.DeclinedOrgaUserInvitation:case qf.AcceptedOrgaUserInvitation:return t.orgaUser.name+" in Organisation "+this.getOrgaName(t.orgaUser.orgaId)}}showNotification(e){this.idxNotificationTodo=e,this.notificationTodo=this.allNotifications[e]}acceptInvitation(){this.notificationService.acceptInvitation(this.notificationTodo.id),this.initMembers()}declineInvitation(){this.notificationService.declineInvitation(this.notificationTodo.id),this.initMembers()}}return e.\u0275fac=function(t){return new(t||e)(As(Zf),As(ug),As(lg),As(jg))},e.\u0275cmp=dt({type:e,selectors:[["app-notification-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"verweise"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-delete",3,"click"],[1,"btn",3,"click"]],template:function(e,t){1&e&&(Ss(0,Jf,2,1,"h4",0),Ss(1,im,6,3,"div",0)),2&e&&(xs("ngIf",0===t.allNotifications.length),kr(1),xs("ngIf",t.allNotifications.length>0))},directives:[Bc,zc,Lc],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:60em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:15em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:40em;text-align:left}hr[_ngcontent-%COMP%]{height:3px;background:#000;margin-top:2em;margin-bottom:1em;width:60em}li[_ngcontent-%COMP%]{margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}"]}),e})();function om(e,t){if(1&e){const e=Us();Ts(0,"li"),Ts(1,"div",1),Ts(2,"label",2),Ns("click",(function(){Gt(e);const n=t.index;return Vs().toggleValue(n)})),qs(3),Rs(),Ts(4,"label",3),qs(5," Nee "),Ts(6,"input",4),Ns("change",(function(){Gt(e);const n=t.index;return Vs().toggleValue(n)})),Rs(),Es(7,"span",5),qs(8," Jaa "),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit;kr(3),Js("",e.key,":"),kr(3),xs("checked",e.value)}}let am=(()=>{class e{constructor(e,t){this.settingsService=e,this.eventService=t,this.checked=!1,this.boolSettings=[]}ngOnInit(){this.settingsService.setTitle("Programmeinstellungen");const e=this.settingsService.getAllBooleanSettings();for(const t in e)this.boolSettings.push({key:t,value:e[t]})}toggleValue(e){const t=this.boolSettings[e];t.value=!t.value,this.settingsService.booleanValueSet(t.key,t.value),"useGreenLikeColors"!==t.key&&"useAccountName4DisplayingUsername"!==t.key||this.eventService.publishRefreshMainViewEvent()}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(cg))},e.\u0275cmp=dt({type:e,selectors:[["app-settings"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"switch"],[1,"switch-description",3,"click"],[1,"switch-text"],["type","checkbox",3,"checked","change"],[1,"lever"]],template:function(e,t){1&e&&(Ts(0,"ul"),Ss(1,om,9,2,"li",0),Rs()),2&e&&(kr(1),xs("ngForOf",t.boolSettings))},directives:[zc],styles:[".switch-description[_ngcontent-%COMP%]{width:30em;font-weight:700}.switch-description[_ngcontent-%COMP%], .switch-text[_ngcontent-%COMP%]{margin-bottom:1em;float:left;text-align:left}.switch-text[_ngcontent-%COMP%]{margin-left:2rem;width:10em}li[_ngcontent-%COMP%]{white-space:nowrap;display:inline-block}"]}),e})();var cm=function(e){return e[e.None=0]="None",e[e.AccountVerification=1]="AccountVerification",e[e.InvitationOrgaUser=2]="InvitationOrgaUser",e[e.InfoOfInvitationOrgaUser=3]="InfoOfInvitationOrgaUser",e}({});let lm=(()=>{class e{constructor(e,t,n){this.notificationService=e,this.orgaService=t,this.eventService=n,this.mailList=[]}_fillWithTestData(){this.mailList.push({type:cm.AccountVerification,id:1,email:"Klaus.Hetzelein@datev.de",account:{name:"Klaus Hetzelein",email:""}},{type:cm.InvitationOrgaUser,id:2,email:"klaus@bk",orgaUser:{id:110,name:"Orga Klaus Name",orgaId:300}},{type:cm.InfoOfInvitationOrgaUser,id:3,email:"klaus@mail.de",account:{name:"Klaus",email:""},orgaUser:{id:110,name:"Orga Klaus Name",orgaId:300}})}mailsAvailable(){return this.mailList.length>0}getNumberOfMails(){return this.mailList.length}setTaskInProgress(e){if(this.taskByMailInProgress)return!1;const t=this.mailList.find(t=>t.id===e);return!!t&&(this.taskByMailInProgress=t,!0)}resetTaskInProgress(){this.taskByMailInProgress=void 0}getTaskInProgress(){return this.taskByMailInProgress}addMailTask(e){let t=0;this.mailList.forEach(e=>{e.id>t&&(t=e.id)}),e.id=t+1,this.mailList.push(e),this.resetTaskInProgress()}getAllMailsByType(e){return this.mailList.filter(t=>t.type===e)}getAllMails(){return this.mailList}_declineAccountVerification(e){this.eventService.publishTaskEvent({type:Vg.AccountVerificationDeclined,account:e.account})}_declineInvitationOrgaUser(e){this.eventService.publishTaskEvent({type:Vg.OrgaUserInvitationDeclined,orgaUser:e.orgaUser})}declineTask(e){const t=this.mailList.find(t=>t.id===e);if(t){switch(t.type){case cm.AccountVerification:this._declineAccountVerification(t);break;case cm.InvitationOrgaUser:this._declineInvitationOrgaUser(t)}this.removeTask(e)}}removeTask(e){const t=this.getTaskInProgress();t&&t.id===e&&this.resetTaskInProgress();const n=this.mailList.findIndex(t=>t.id===e);n>=0&&this.mailList.splice(n,1)}_fulfillInvitationOrgaUserTask(e){const t=this.getTaskInProgress();return!(!t||t.type!==cm.InvitationOrgaUser||this.orgaService.accountIsAlreadyMemberInOrga(t.orgaUser.orgaId,e.account.id)||(this.notificationService.addNotification({type:qf.InvitationOrgaUser,accountAsRecipient:e.account,orgaUser:t.orgaUser}),this.removeTask(t.id),this.eventService.publishRefreshMainViewEvent(),0))}_fulfillAccountVerificationTask(e){const t=this.getTaskInProgress();return!!t&&t.account.id===e.account.id&&(this.eventService.publishTaskEvent({type:Vg.AccountVerified,account:e.account}),this.notificationService.addNotification({type:qf.AccountVerification,accountAsRecipient:e.account}),this.removeTask(t.id),!0)}thisFulfillsPendingTask(e){if(!this.taskByMailInProgress)return;const t=Object.assign({},this.taskByMailInProgress);return t.type===cm.AccountVerification&&this._fulfillAccountVerificationTask(e)||t.type===cm.InvitationOrgaUser&&this._fulfillInvitationOrgaUserTask(e)?t:void this.resetTaskInProgress()}}return e.\u0275fac=function(t){return new(t||e)(qe(Zf),qe(jg),qe(cg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var um=function(e){return e[e.LoggedIn=1]="LoggedIn",e[e.LoggedOut=2]="LoggedOut",e[e.AccountDetails=3]="AccountDetails",e[e.OrgaUserDetails=4]="OrgaUserDetails",e[e.OrganizationDetails=5]="OrganizationDetails",e}({});let dm=(()=>{class e{constructor(e,t,n){this.fakeBackend=e,this.eventService=t,this.principalService=n,this.isActive=!0,this.eventService.tokenChanged.pipe(Cg(()=>this.isActive)).subscribe(e=>this._onTokenChanged(e)),this.initMembers()}ngOnDestroy(){this.isActive=!1}initMembers(){this.token={authType:sg.None},this.token.credential={kennung:"",secret:""},this.token.account={name:"",email:""},this.token.orgaUser={name:""},this.token.organization={name:""}}_onTokenChanged(e){var t;let n=!1;switch(e.type){case um.LoggedIn:n=!0;break;case um.AccountDetails:this.token.account.id===e.account.id&&(n=!0,this.token.account=this.fakeBackend.findAccountById(this.token.account.id),this.principalService.setPrincipal(this.token));break;case um.OrgaUserDetails:case um.OrganizationDetails:e.type===um.OrgaUserDetails&&(null===(t=this.token.orgaUser)||void 0===t?void 0:t.id)===e.orgaUser.id&&(n=!0,this.token.orgaUser=this.fakeBackend.findOrgaUserById(e.orgaUser.id),this.principalService.setPrincipal(this.token))}if(n&&this.principalService.isLoggedInInOrga()){const e=this.principalService.getOrgaUser(),t=this.fakeBackend.getAllAllowedSubOrgas(e.orgaId,e.id).map(e=>e.id);this.principalService.setSubOrgaIdsWithAdminsPermissions(t)}}register(e,t){return this.fakeBackend.register(e,t)}login(e,t=!1){const n=this.fakeBackend.login(e,t);return this.tempToken=Object.assign({},n),n}logoutFromOrganization(e){const t=Object.assign({},this.token);t.authType=sg.Account,t.organization=void 0,t.orgaUser=void 0,t.availableOrgas.splice(t.availableOrgas.findIndex(t=>t.id===e),1),this.setToken(t)}getTempToken(){return this.tempToken}loginWithOrganization(e){this.tempToken.authType=sg.OrgaUser;const t={authType:sg.OrgaUser};Object.assign(t,this.tempToken);const n=t.availableOrgas.find(t=>t.id===e);t.organization=n,t.orgaUser=this.fakeBackend.findOrgaUserByAccountId(n.id,t.account.id),this.setToken(t)}loginWithAccountOnly(){const e={authType:sg.Account};e.credential=this.tempToken.credential,e.account=this.tempToken.account,e.availableOrgas=this.tempToken.availableOrgas,this.setToken(e)}logout(){this.setToken({authType:sg.None})}_determineAuthLevel(e){switch(e.type){case ag.Benutzerkonto:return og.Low;case ag.SmsTan:return og.Medium;case ag.SmartCard:case ag.SmartLogin:return og.Secure}return og.Low}setToken(e){this.initMembers(),this.token.authType=e.authType,this.token.authType!==sg.None&&(this.tempToken=void 0,Object.assign(this.token,e),this.token.authLevel=this._determineAuthLevel(e.credential)),this.principalService.setPrincipal(this.token),this.principalService.isLoggedIn()?this.principalService.isLoggedInInOrga()?this.eventService.publishTokenChangedEvent({type:um.LoggedIn,account:this.token.account,orgaUser:this.token.orgaUser}):this.eventService.publishTokenChangedEvent({type:um.LoggedIn,account:this.token.account}):this.eventService.publishTokenChangedEvent({type:um.LoggedOut})}getToken(){return this.token}}return e.\u0275fac=function(t){return new(t||e)(qe(zg),qe(cg),qe(ug))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function hm(e,t){1&e&&(Ts(0,"h4"),qs(1,'Derzeit sind keine "Mails" vorhanden.'),Rs())}const gm=function(e){return{editMode:e}};function pm(e,t){if(1&e){const e=Us();Ts(0,"li",3),Ns("click",(function(){Gt(e);const n=t.index;return Vs(2).showTask(n)})),Ts(1,"span",4),qs(2),Rs(),Ts(3,"span",5),qs(4),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,r=Vs(2);xs("ngClass",ha(3,gm,e.id===r.taskTodo.id)),kr(2),Js(" ",r.getTypeAsString(n)," "),kr(2),Js(" ",r.getDetailsOfTask(n)," ")}}function fm(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"p"),qs(2,"Du hast dich registriert, aber deine Email-Adresse noch nicht verifiziert. "),Es(3,"br"),qs(4," Wenn du untenstehendem Link folgst und dich mit deinem registrierten Account anmeldest, best\xe4tigst du deine Email-Adresse. "),Rs(),Ts(5,"p"),qs(6,'Damit wird dein Account "aktiv" (und die "Nachricht" verschwindet automatisch...)'),Rs(),Ts(7,"a",7),Ns("click",(function(){return Gt(e),Vs(3).wantsToFulfill()})),qs(8,"Hiermit verifizierst du deine Email-Adresse."),Rs(),Rs()}}function mm(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"p"),qs(2),Es(3,"br"),qs(4," Wenn dies in Ordnung ist, f\xfchre folgende Schritte durch:"),Rs(),Ts(5,"ul",8),Ts(6,"li"),Ts(7,"a",7),Ns("click",(function(){return Gt(e),Vs(3).wantsToFulfill()})),qs(8,"Melde dich mit deinem Account an."),Rs(),Rs(),Ts(9,"li"),Ts(10,"a",9),Ns("click",(function(){return Gt(e),Vs(3).wantsToFulfill()})),qs(11," Oder registriere dich zun\xe4chst und melde dich danach an."),Rs(),Rs(),Ts(12,"li"),qs(13," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Rs(),Rs(),Rs()}if(2&e){const e=Vs(3);kr(2),Js('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',e.getOrganame(e.taskTodo.orgaUser.orgaId),'" vorgesehen.')}}function vm(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"p"),qs(2),Es(3,"br"),qs(4," Dir wurde eine Nachricht an deinen Account geschickt. Daher einfach anmelden und deine Nachrichten pr\xfcfen. "),Rs(),Ts(5,"ul",8),Ts(6,"li"),Ts(7,"a",7),Ns("click",(function(){return Gt(e),Vs(3).wantsToFulfill()})),qs(8,"Melde dich mit deinem Account an."),Rs(),Rs(),Ts(9,"li"),qs(10," Danach gehst du in deine Nachrichten und stimmst der Mitgliedschaft zu."),Rs(),Rs(),Rs()}if(2&e){const e=Vs(3);kr(2),Js('Du wurdest als Mitglied (Mitarbeiter) der Organisation "',e.getOrganame(e.taskTodo.orgaUser.orgaId),'" vorgesehen.')}}function ym(e,t){if(1&e){const e=Us();Ts(0,"div"),Ss(1,fm,9,0,"div",0),Ss(2,mm,14,1,"div",0),Ss(3,vm,11,1,"div",0),Ts(4,"button",6),Ns("click",(function(){return Gt(e),Vs(2).declineInvitation()})),qs(5,"Ablehnen und l\xf6schen"),Rs(),Rs()}if(2&e){const e=Vs(2);kr(1),xs("ngIf",1===e.taskTodo.type),kr(1),xs("ngIf",2===e.taskTodo.type),kr(1),xs("ngIf",3===e.taskTodo.type)}}function bm(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"h6"),qs(2,'Folgende "Mails" sind vorhanden:'),Rs(),Ts(3,"ul",1),Ss(4,pm,5,5,"li",2),Rs(),Ss(5,ym,6,3,"div",0),Rs()),2&e){const e=Vs();kr(4),xs("ngForOf",e.allTasks),kr(1),xs("ngIf",e.taskTodo.id>0)}}let _m=(()=>{class e{constructor(e,t,n,r){this.taskService=e,this.tokenService=t,this.settingsService=n,this.orgaService=r,this.allTasks=[],this.taskTodoDescription="",this.tokenService.logout(),this.settingsService.setTitle("Fake Mailbox"),this.taskService.resetTaskInProgress()}ngOnInit(){this.initMembers()}initMembers(){this.allTasks=this.taskService.getAllMails(),this.allTasks.length>0?(this.idxTaskTodo||(this.idxTaskTodo=0),this.allTasks[this.idxTaskTodo]||(this.idxTaskTodo=this.idxTaskTodo-1),this.showTask(this.idxTaskTodo)):(this.idxTaskTodo=void 0,this.taskTodo={type:cm.None,id:0},this.taskTodoDescription="")}getTypeAsString(e){const t=this.allTasks[e];return t.id+": "+cm[t.type]}getOrganame(e){const t=this.orgaService.findOrgaById(e);return t&&t.name||"unknown-Orga"}getDetailsOfTask(e){const t=this.allTasks[e];switch(t.type){case cm.AccountVerification:return t.email+", "+t.account.name;case cm.InvitationOrgaUser:return t.email;case cm.InfoOfInvitationOrgaUser:return t.email+", "+t.account.name}}showTask(e){this.idxTaskTodo=e,this.taskTodo=this.allTasks[e]}wantsToFulfill(){this.taskTodo.type!==cm.InfoOfInvitationOrgaUser?this.taskService.setTaskInProgress(this.taskTodo.id)||alert("Da stimmt was mit der aktuellen Best\xe4tigung/Task nicht?!?"):this.taskService.removeTask(this.taskTodo.id)}declineInvitation(){this.taskService.declineTask(this.taskTodo.id),this.initMembers()}}return e.\u0275fac=function(t){return new(t||e)(As(lm),As(dm),As(lg),As(jg))},e.\u0275cmp=dt({type:e,selectors:[["app-fake-mail-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"verweise"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn","btn-delete",3,"click"],["routerLink","/iam/login",3,"click"],[1,"browser-default"],["routerLink","/iam/register",3,"click"]],template:function(e,t){1&e&&(Ss(0,hm,2,0,"h4",0),Ss(1,bm,6,2,"div",0)),2&e&&(xs("ngIf",0===t.allTasks.length),kr(1),xs("ngIf",t.allTasks.length>0))},directives:[Bc,zc,Lc,Fh],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:50em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.editMode[_ngcontent-%COMP%]{background-color:#40e0d0!important}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:15em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:30em;text-align:left}hr[_ngcontent-%COMP%]{height:3px;background:#000;margin-top:2em;margin-bottom:1em;width:50em}li[_ngcontent-%COMP%]{margin-bottom:.2em}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}"]}),e})(),wm=(()=>{class e{constructor(e,t,n){this.principalService=e,this.router=t,this.settingsService=n}canActivate(e,t){let n=!0,r="";const i=!!e.data.allowSubAdmin;return this.settingsService.setRedirectUri(t.url),this.principalService.getAuthType()<sg.OrgaUser?(n=!1,r=i?"Du must in einer Organisation angemeldet- und Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du must in einer Organisation angemeldet- und Admin dieser Organisation sein."):(this.principalService.isAdminOfCurrentOrga()||(n=!1,i&&this.principalService.isSubAdminOfAtLeastOneSubOrga()&&(n=!0)),n||(r=i?"Du musst Admin dieser Organisation- oder SubAdmin einer Organisationseinheit sein.":"Du musst Admin dieser Organisation sein.")),n?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(r),this.settingsService.showInfoPageAfterOrgaAdminGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}return e.\u0275fac=function(t){return new(t||e)(qe(ug),qe(Mh),qe(lg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Om=(()=>{class e{constructor(e){this.fakeBackend=e}updateAccount(e){return this.fakeBackend.updateAccount(e)}deleteAccount(e){return this.fakeBackend.deleteAccount(e)}findAccountById(e){return this.fakeBackend.findAccountById(e)}findAccountByMail(e){return this.fakeBackend.findAccountByMail(e)}}return e.\u0275fac=function(t){return new(t||e)(qe(zg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Im(e,t){1&e&&(Ts(0,"div"),Ts(1,"p"),qs(2,"Du kannst deinen Account derzeit noch nicht l\xf6schen, da du noch in mind. einer Organisation Mitglied bist."),Rs(),Ts(3,"a",14),qs(4," Weiter zur Verwaltung deiner Mitgliedschaften... "),Rs(),Rs())}function Sm(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"button",15),Ns("click",(function(){return Gt(e),Vs().deleteAccount()})),qs(2,"Account l\xf6schen"),Rs(),Rs()}}let Cm=(()=>{class e{constructor(e,t,n,r,i,s,o){this.accountService=e,this.orgaService=t,this.tokenService=n,this.principalService=r,this.eventService=i,this.settingsService=s,this.router=o,this.deleteAccountAllowed=!1}ngOnInit(){var e;this.settingsService.setTitle("Account-Verwaltung"),this.principalsAccountId=null===(e=this.principalService.getAccount())||void 0===e?void 0:e.id,this.initMembers()}initMembers(){this.account=this.accountService.findAccountById(this.principalsAccountId),this.accountPrevious=Object.assign({},this.account),this.deleteAccountAllowed=!this.orgaService.accountHasAnyOrgaMembership(this.account.id)||this.settingsService.allowDeletionOfAccountWithOrgaMemberships()}dirty(){return this.accountPrevious.name!==this.account.name||this.accountPrevious.email!==this.account.email}resetForm(){this.initMembers()}submitForm(){this.accountService.updateAccount(this.account)?(this.eventService.publishTokenChangedEvent({type:um.AccountDetails,account:this.account}),this.initMembers()):alert("\xc4nderungen konnten nicht \xfcbernommen werden ???")}deleteAccount(){confirm("Willst du deinen Account wirklich l\xf6schen?")&&this.accountService.deleteAccount(this.principalsAccountId)&&(this.tokenService.logout(),this.router.navigateByUrl("/"))}}return e.\u0275fac=function(t){return new(t||e)(As(Om),As(jg),As(dm),As(ug),As(cg),As(lg),As(Mh))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-account-mgmt"]],decls:25,vars:6,consts:[[1,"container"],[3,"ngSubmit"],["changeAccountForm","ngForm"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["type","button",1,"btn","mr-1","mt-1",3,"disabled","click"],["type","submit",1,"btn","mt-1",3,"disabled"],[1,"hr-3"],[4,"ngIf"],["routerLink","/iam/organization-management",2,"font-size","larger"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){if(1&e&&(Ts(0,"div",0),Ts(1,"p"),qs(2,"Hier kannst du deine Accountdaten \xe4ndern:"),Rs(),Ts(3,"form",1,2),Ns("ngSubmit",(function(){return t.submitForm()})),Ts(5,"div",3),Ts(6,"label",4),qs(7,"Name (muss mind. 3 Zeichen haben)"),Rs(),Ts(8,"input",5,6),Ns("ngModelChange",(function(e){return t.account.name=e})),Rs(),Rs(),Ts(10,"div",3),Ts(11,"label",7),qs(12,"Email (Pflichtfeld, eindeutig)"),Rs(),Ts(13,"input",8,9),Ns("ngModelChange",(function(e){return t.account.email=e})),Rs(),Rs(),Ts(15,"button",10),Ns("click",(function(){return t.resetForm()})),qs(16,"\xc4nderungen verwerfen"),Rs(),Ts(17,"button",11),qs(18,"\xc4nderungen \xfcbernehmen"),Rs(),Rs(),Rs(),Ts(19,"div"),Es(20,"hr",12),Ts(21,"p"),qs(22,"Hier kannst du deinen Account l\xf6schen."),Rs(),Rs(),Ss(23,Im,5,0,"div",13),Ss(24,Sm,3,0,"div",13)),2&e){const e=Cs(4);kr(8),xs("ngModel",t.account.name),kr(5),xs("ngModel",t.account.email),kr(2),xs("disabled",!t.dirty()),kr(2),xs("disabled",!e.valid||!t.dirty()),kr(6),xs("ngIf",!t.deleteAccountAllowed),kr(1),xs("ngIf",t.deleteAccountAllowed)}},directives:[tf,np,Kp,qg,rf,of,Sf,tp,ef,Bc,Fh],styles:[""]}),e})();function Am(e,t){if(1&e){const e=Us();Ts(0,"li"),Ts(1,"span",22),qs(2),Rs(),Ts(3,"span",23),qs(4),Rs(),Ts(5,"button",24),Ns("click",(function(){Gt(e);const n=t.index;return Vs().leaveOrganization(n)})),qs(6," Organisation verlassen"),Rs(),Rs()}if(2&e){const e=t.$implicit,n=Vs();kr(2),Js(" ",n.getOrganizationTypeAsString(e.orga.type)," "),kr(2),Qs(" ",e.orga.name," (",e.orgaUser.name,") ")}}const km=function(e){return{active:e}};function xm(e,t){if(1&e){const e=Us();Ts(0,"div",3),Ts(1,"div",25),Ts(2,"label",26),Ts(3,"input",27),Ns("ngModelChange",(function(t){return Gt(e),Vs().showSearch=t})),Rs(),Ts(4,"span"),qs(5),Rs(),Rs(),Rs(),Ts(6,"div",28),Ts(7,"div",9),Ts(8,"div",14),Ts(9,"input",29),Ns("ngModelChange",(function(t){return Gt(e),Vs().searchOrgaId=t}))("keydown.enter",(function(){return Gt(e),Vs().searchOrganization()})),Rs(),Rs(),Ts(10,"div",30),Ts(11,"button",31),Ns("click",(function(){return Gt(e),Vs().searchOrganization()})),qs(12," Suche Organisation "),Rs(),Rs(),Rs(),Ts(13,"div",32),Ts(14,"div",25),Ts(15,"span",33),qs(16),Rs(),Ts(17,"span"),qs(18),Rs(),Rs(),Rs(),Ts(19,"form",34,35),Ns("ngSubmit",(function(){return Gt(e),Vs().joinFoundOrganization()})),Ts(21,"div",14),Ts(22,"label",36),qs(23,"Dein Mitarbeitername in der Organisation"),Rs(),Ts(24,"input",37,38),Ns("ngModelChange",(function(t){return Gt(e),Vs().newOrgaUserJoinOrga.name=t})),Rs(),Rs(),Ts(26,"div",30),Ts(27,"button",21),qs(28,"Organisation beitreten"),Rs(),Rs(),Rs(),Rs(),Rs()}if(2&e){const e=Cs(20),t=Vs();kr(3),xs("ngModel",t.showSearch),kr(2),Zs(t.showSearch?"<Einer bestehenden Organisation beitreten> ausblenden":"<Einer bestehenden Organisation beitreten> einblenden"),kr(1),xs("hidden",!t.showSearch),kr(3),xs("ngModel",t.searchOrgaId),kr(7),Zs(t.getOrganizationTypeAsString(t.foundOrganization.type)),kr(2),Zs(t.foundOrgaDisplayname),kr(4),xs("ngClass",ha(9,km,t.newOrgaUserJoinOrga.name)),kr(2),xs("ngModel",t.newOrgaUserJoinOrga.name),kr(3),xs("disabled",void 0===t.foundOrganization.id||!e.valid)}}function Pm(e,t){if(1&e&&(Ts(0,"option",39),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e.type),kr(1),Js(" ",e.text,"")}}let Tm=(()=>{class e{constructor(e,t,n,r){this.settingsService=e,this.principalService=t,this.tokenService=n,this.organizationService=r,this.usersDisplayName="",this.orgas=[],this.allowJoiningOrgaByAccount=!0,this.searchOrgaId="",this.foundOrgaDisplayname="",this.mShowSearch=!1,this.mShowNewPart=!1}get showSearch(){return this.mShowSearch}set showSearch(e){this.mShowSearch=e,this.mShowSearch&&(this.mShowNewPart=!1)}get showNewPart(){return this.mShowNewPart}set showNewPart(e){this.mShowNewPart=e,this.mShowNewPart&&(this.mShowSearch=!1)}ngOnInit(){this.settingsService.setTitle("Organisations-Verwaltung"),this.principal=this.principalService.getAccount(),this.allowJoiningOrgaByAccount=this.settingsService.allowJoiningOrganizationByAccount(),this.usersDisplayName=this.principal.name,this.typeOptions=[{text:"Privat",type:Lg.Privat},{text:"Unternehmen",type:Lg.Unternehmen},{text:"Kanzlei",type:Lg.Kanzlei}],this.initMembers()}initMembers(){this.foundOrgaDisplayname="Bitte erst suchen...",this.foundOrganization={name:""},this.newOrganization={name:"",type:Lg.Privat},this.newOrgaUserJoinOrga={accountId:this.principal.id,name:this.principal.name},this.newOrgaUserNewOrga={accountId:this.principal.id,adminType:ig.SuperAdmin,name:this.principal.name},this.searchOrgaId="",this.orgas=this.organizationService.getAllOrgasForUser(this.principal.id)}getOrganizationTypeAsString(e){return Lg[e]}leaveOrganization(e){const t=this.orgas[e].orga.id,n=this.tokenService.getToken().organization;if(n&&t===n.id){if(!confirm("Du verl\xe4sst die Organisation, in der du angemeldet bist.\nDu wirst damit umgemeldet! Ist das OK?"))return;this.tokenService.logoutFromOrganization(n.id)}this.organizationService.removeOrgaUserByAccountId(this.orgas[e].orga.id,this.principal.id),this.initMembers()}_arrangeFoundDisplayname(){this.foundOrgaDisplayname="Bitte erst suchen...";const e=this.foundOrganization;void 0===e.id?this.foundOrgaDisplayname="Gesuchte Organisation gibt es nicht.":this.organizationService.accountIsAlreadyMemberInOrga(e.id,this.principal.id)?(this.foundOrgaDisplayname="In "+e.name+" bist du schon Mitglied.",this.foundOrganization.id=void 0):this.foundOrgaDisplayname=e.name}searchOrganization(){const e=parseInt(this.searchOrgaId,10);this.foundOrganization=Object.assign({},this.organizationService.findOrgaById(e)),this._arrangeFoundDisplayname()}joinFoundOrganization(){this.foundOrganization.id&&this.organizationService.joinOrganization(this.foundOrganization.id,this.newOrgaUserJoinOrga)&&this.initMembers()}createNewOrganization(){this.organizationService.createNewOrganization(this.newOrganization,this.newOrgaUserNewOrga),this.initMembers()}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(ug),As(dm),As(jg))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-orga-mgmt"]],decls:32,vars:14,consts:[[1,"liste"],[4,"ngFor","ngForOf"],["class","container-form",4,"ngIf"],[1,"container-form"],["for","toggle-new"],["type","checkbox","id","toggle-new",3,"ngModel","ngModelChange"],[1,"row","mt-1",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["newOrgaForm","ngForm"],[1,"row","m-0"],[1,"input-field","col","s8","m6","l4"],["name","orgaTyp",1,"browser-default",3,"ngModel","ngModelChange"],["orgaTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["for","orgaName"],["type","text","id","orgaName","name","orgaName","required","",1,"form-control",3,"ngModel","ngModelChange"],["orgaName","ngModel"],["for","userName",3,"ngClass"],["type","text","id","userName","name","userName","required","",1,"form-control",3,"ngModel","ngModelChange"],["userName","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"list-item-text-left"],[1,"list-item-text"],[1,"btn-primary",3,"click"],[1,"col","s12"],["for","toggle-suche"],["type","checkbox","id","toggle-suche",3,"ngModel","ngModelChange"],[1,"col","s12",3,"hidden"],["type","text","placeholder","hier Organisations-ID eingeben...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s8","m6"],[1,"btn","btn-success",3,"click"],[1,"row","mt-1","mb-1"],[1,"bold","mr-1"],[1,"row","m-0",3,"ngSubmit"],["newOrgaUserForm","ngForm"],["for","userName1",3,"ngClass"],["type","text","id","userName1","name","userName1","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["userName1","ngModel"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ts(0,"p"),qs(1),Rs(),Ts(2,"ul",0),Ss(3,Am,7,3,"li",1),Rs(),Ss(4,xm,29,11,"div",2),Ts(5,"div",3),Ts(6,"div"),Ts(7,"label",4),Ts(8,"input",5),Ns("ngModelChange",(function(e){return t.showNewPart=e})),Rs(),Ts(9,"span"),qs(10),Rs(),Rs(),Rs(),Ts(11,"div",6),Ts(12,"form",7,8),Ns("ngSubmit",(function(){return t.createNewOrganization()})),Ts(14,"div",9),Ts(15,"div",10),Ts(16,"select",11,12),Ns("ngModelChange",(function(e){return t.newOrganization.type=e})),Ss(18,Pm,2,2,"option",13),Rs(),Rs(),Rs(),Ts(19,"div",9),Ts(20,"div",14),Ts(21,"label",15),qs(22,"Name der Organisation"),Rs(),Ts(23,"input",16,17),Ns("ngModelChange",(function(e){return t.newOrganization.name=e})),Rs(),Rs(),Ts(25,"div",14),Ts(26,"label",18),qs(27,"Dein Mitarbeitername in der Organisation"),Rs(),Ts(28,"input",19,20),Ns("ngModelChange",(function(e){return t.newOrgaUserNewOrga.name=e})),Rs(),Rs(),Rs(),Ts(30,"button",21),qs(31,"Organisation anlegen"),Rs(),Rs(),Rs(),Rs()),2&e){const e=Cs(13);kr(1),Js(" Hallo ",t.usersDisplayName,", in diesen Organisationen bist du Mitglied:"),kr(2),xs("ngForOf",t.orgas),kr(1),xs("ngIf",!0===t.allowJoiningOrgaByAccount),kr(4),xs("ngModel",t.showNewPart),kr(2),Zs(t.showNewPart?"<Eine neue Organisation anlegen> ausblenden":"<Eine neue Organisation anlegen> einblenden"),kr(1),xs("hidden",!t.showNewPart),kr(5),xs("ngModel",t.newOrganization.type),kr(2),xs("ngForOf",t.typeOptions),kr(5),xs("ngModel",t.newOrganization.name),kr(3),xs("ngClass",ha(12,km,t.newOrgaUserNewOrga.name)),kr(2),xs("ngModel",t.newOrgaUserNewOrga.name),kr(2),xs("disabled",!e.valid)}},directives:[zc,Bc,Gg,tp,ef,tf,np,Kp,Sp,qg,rf,Lc,of,Cp,Pp],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:10rem}.list-item-text_left[_ngcontent-%COMP%]{width:30rem}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})();function Rm(e,t){if(1&e&&(Ts(0,"li"),qs(1),Rs()),2&e){const e=t.$implicit;kr(1),Js(" ",e," ")}}let Em=(()=>{class e{constructor(e){this.settingsService=e,this.requirements=[],this.redirectUri=""}ngOnInit(){this.settingsService.setTitle("Seite gesch\xfctzt..."),this.redirectUri=this.settingsService.getRedirectUri(),this.requirements=this.settingsService.getRequiredByGuardHelptext(!0).split("-")}}return e.\u0275fac=function(t){return new(t||e)(As(lg))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-guard-fail"]],decls:12,vars:2,consts:[[2,"font-weight","bold"],[1,"bullet"],[4,"ngFor","ngForOf"],["routerLink","/iam/login",2,"font-size","larger"]],template:function(e,t){1&e&&(Ts(0,"h4"),qs(1,"Die Seite, die du aufgerufen hast, ist gesch\xfctzt."),Rs(),Ts(2,"p"),qs(3,"Folgende Seite hast du aufgerufen: "),Ts(4,"span",0),qs(5),Rs(),Rs(),Ts(6,"h6"),qs(7,"Du must folgende Bedingung(en) erf\xfcllen, um die Seite aufzurufen:"),Rs(),Ts(8,"ol",1),Ss(9,Rm,2,1,"li",2),Rs(),Ts(10,"a",3),qs(11," Weiter zum Login...\n"),Rs()),2&e&&(kr(5),Zs(t.redirectUri),kr(4),xs("ngForOf",t.requirements))},directives:[zc,Fh],styles:["ol.bullet[_ngcontent-%COMP%]{list-style-type:circle;margin-bottom:2em}"]}),e})();class Um extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class Mm extends Um{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class Fm extends Mm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let Nm=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class Dm extends Nm{constructor(e,t=Nm.now){super(e,()=>Dm.delegate&&Dm.delegate!==this?Dm.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Dm.delegate&&Dm.delegate!==this?Dm.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class Lm extends Dm{}const Vm=new Lm(Fm);let zm=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Cl(this.value);case"E":return e=this.error,new _(t=>t.error(e));case"C":return El()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class jm extends p{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(jm.dispatch,this.delay,new Bm(e,this.destination)))}_next(e){this.scheduleMessage(zm.createNext(e))}_error(e){this.scheduleMessage(zm.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(zm.createComplete()),this.unsubscribe()}}class Bm{constructor(e,t){this.notification=e,this.destination=t}}class Hm extends C{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new $m(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new O;if(this.isStopped||this.hasError?s=d.EMPTY:(this.observers.push(e),s=new I(this,e)),r&&e.add(e=new jm(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||Vm).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class $m{constructor(e,t){this.time=e,this.value=t}}var Gm;class Km{constructor(e){var t;this.lazyLoad=!1,this.providers=new Map,this._ready=new Hm,(t=e)&&(t instanceof _||"function"==typeof t.lift&&"function"==typeof t.subscribe)?e.pipe(nu()).subscribe(e=>{this.initialize(e)}):this.initialize(e)}initialize(e){for(let t=0;t<e.length;t++){let n=e[t];this.providers.set(n.id,n.provider),this.lazyLoad=this.lazyLoad||n.lazyLoad}this._ready.next(),this._ready.complete()}}let Wm=(()=>{let e=Gm=class{constructor(e){this._user=null,this._authState=new Hm(1),this._readyState=new Al([]),this.initialized=!1,e._ready.subscribe(()=>{this.providers=e.providers,e.lazyLoad||this.initialize()})}get authState(){return this._authState.asObservable()}get readyState(){return this._readyState.asObservable()}initialize(){this.initialized=!0,this.providers.forEach((e,t)=>{e.initialize().then(()=>{let n=this._readyState.getValue();n.push(t),this._readyState.next(n),e.getLoginStatus().then(e=>{e.provider=t,this._user=e,this._authState.next(e)}).catch(e=>{this._authState.next(null)})})})}signIn(e,t){return this.initialized||this.initialize(),new Promise((n,r)=>{let i=this.providers.get(e);i?i.signIn(t).then(t=>{t.provider=e,n(t),this._user=t,this._authState.next(t)}).catch(e=>{r(e)}):r(Gm.ERR_LOGIN_PROVIDER_NOT_FOUND)})}signOut(e=!1){return this.initialized||this.initialize(),new Promise((t,n)=>{if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(e).then(()=>{t(),this._user=null,this._authState.next(null)}).catch(e=>{n(e)}):n(Gm.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(Gm.ERR_NOT_LOGGED_IN)})}};return e.\u0275fac=function(t){return new(t||e)(qe(Km))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",e.ERR_NOT_LOGGED_IN="Not logged in",e})();var qm;let Zm=(()=>{let e=qm=class{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:qm,providers:[Wm,{provide:Km,useValue:e}]}}};return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)(qe(e,12))},providers:[Wm],imports:[[Gc]]}),e})();class Jm{}let Qm=(()=>{class e extends class{constructor(){this._readyState=new Al(!1)}onReady(){return new Promise((e,t)=>{this._readyState.subscribe(t=>{t&&e()})})}loadScript(e,t,n,r=!0,i=""){if("undefined"!=typeof document&&!document.getElementById(e)){let e=document.createElement("script");e.async=r,e.src=t,e.onload=n,document.head.appendChild(e)}}}{constructor(e,t={scope:"email"}){super(),this.clientId=e,this.opt=t}initialize(){return new Promise((t,n)=>{this.loadScript(e.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.opt),{client_id:this.clientId})),this.auth2.then(()=>{this._readyState.next(!0),t()}).catch(e=>{n(e)})})})})}getLoginStatus(){return new Promise((e,t)=>{this.onReady().then(()=>{if(this.auth2.isSignedIn.get()){let t=new Jm,n=this.auth2.currentUser.get().getBasicProfile(),r=this.auth2.currentUser.get().getAuthResponse(!0).access_token,i=this.auth2.currentUser.get().getAuthResponse(!0).id_token;t.id=n.getId(),t.name=n.getName(),t.email=n.getEmail(),t.photoUrl=n.getImageUrl(),t.firstName=n.getGivenName(),t.lastName=n.getFamilyName(),t.authToken=r,t.idToken=i,e(t)}else t("No user is currently logged in.")})})}signIn(e){return new Promise((t,n)=>{this.onReady().then(()=>{(e&&e.offline_access||this.opt&&this.opt.offline_access?this.auth2.grantOfflineAccess(e):this.auth2.signIn(e)).then(e=>{let n=new Jm,r=this.auth2.currentUser.get().getBasicProfile(),i=this.auth2.currentUser.get().getAuthResponse(!0).access_token,s=this.auth2.currentUser.get().getAuthResponse(!0).id_token;n.id=r.getId(),n.name=r.getName(),n.email=r.getEmail(),n.photoUrl=r.getImageUrl(),n.firstName=r.getGivenName(),n.lastName=r.getFamilyName(),n.authToken=i,n.idToken=s,e&&e.code&&(n.authorizationCode=e.code),t(n)},e=>{n("User cancelled login or did not fully authorize.")}).catch(e=>{n(e)})})})}signOut(e){return new Promise((t,n)=>{this.onReady().then(()=>{let r;r=e?this.auth2.disconnect():this.auth2.signOut(),r.then(e=>{e?n(e):t()}).catch(e=>{n(e)})})})}}return e.PROVIDER_ID="GOOGLE",e})();function Xm(e,t){if(1&e){const e=Us();Ts(0,"button",22),Ns("click",(function(){Gt(e);const t=Vs().index;return Vs().removeCredential(t)})),qs(1," L\xf6schen"),Rs()}2&e&&xs("disabled",Vs().$implicit.type>9)}function Ym(e,t){if(1&e&&(Ts(0,"li"),Ts(1,"span",19),qs(2),Rs(),Ts(3,"span",20),qs(4),Rs(),Ss(5,Xm,2,1,"button",21),Rs()),2&e){const e=t.index,n=Vs();kr(2),Js(" ",n.getCredentialTypeAsString(e)," "),kr(2),Js(" ",n.getCredentialDescription(e)," "),kr(1),xs("ngIf",1!==n.credentials.length)}}function ev(e,t){if(1&e&&(Ts(0,"option",23),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e.type),kr(1),Js(" ",e.text,"")}}let tv=(()=>{class e{constructor(e,t,n,r){this.settingsService=e,this.principalService=t,this.credentialService=n,this.authService=r,this.usersDisplayName="",this.credentials=[]}ngOnInit(){this.settingsService.setTitle("Zugangsmedien-Verwaltung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getAccount(),this.enumOptions=[{text:"Benutzerkonto",type:ag.Benutzerkonto},{text:"Benutzerkonto mit Sms-Tan",type:ag.SmsTan},{text:"SmartCard",type:ag.SmartCard},{text:"SmartLogin",type:ag.SmartLogin}],this._initMembers()}_initMembers(){this.credentials=this.credentialService.getAllCredentialsForUser(this.principal.id),this.newCredential={accountId:this.principal.id,type:ag.Benutzerkonto,kennung:"",secret:""}}getCredentialTypeAsString(e){return ag[this.credentials[e].type]}getCredentialDescription(e){const t=this.credentials[e];let n="";return t.type>=ag.StartSpezialTypen&&t.orgaId&&(n=" ("+t.orgaId+")"),t.type===ag.SocialLogin?t.provider+"-ID: "+t.userIdFromProvider:t.kennung+n}removeCredential(e){this.credentialService.removeCredential(this.credentials[e].id),this._initMembers()}addNewCredential(){this.credentialService.addNewCredential(this.newCredential)?this._initMembers():alert("Das Anlegen des Zugangsmediums hat nicht geklappt...")}linkWithGoogleLogin(){this.authService.signIn(Qm.PROVIDER_ID).then(e=>{e?(console.log("provider: "+e.provider),console.log("id: "+e.id),this.newCredential.type=ag.SocialLogin,this.newCredential.kennung="",this.newCredential.secret="",this.newCredential.provider="google",this.newCredential.userIdFromProvider=e.id,this.addNewCredential()):(alert("Google-Login hat nicht geklappt."),console.log("Google-Login hat nicht geklappt."))}).catch(e=>alert("Google-Login hat nicht geklappt: "+e))}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(ug),As(Rf),As(Wm))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-creds-mgmt"]],decls:31,vars:7,consts:[[1,"liste"],[4,"ngFor","ngForOf"],[1,"hr-2","mb-2"],[1,"row"],[1,"col","s12",3,"ngSubmit"],["registrationForm","ngForm"],[1,"input-field","col","s4"],["name","credTyp",1,"browser-default",3,"ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s8","m6"],["for","kennung"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],["for","secret"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"list-item-text-left"],[1,"list-item-text"],["class","btn-danger",3,"disabled","click",4,"ngIf"],[1,"btn-danger",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ts(0,"h6"),qs(1),Rs(),Ts(2,"ul",0),Ss(3,Ym,6,3,"li",1),Rs(),Es(4,"hr",2),Ts(5,"div",3),Ts(6,"h6"),qs(7,'Hier kannst du neue Zugangsmedien "bestellen".'),Rs(),Ts(8,"form",4,5),Ns("ngSubmit",(function(){return t.addNewCredential()})),Ts(10,"div",3),Ts(11,"div",6),Ts(12,"select",7,8),Ns("ngModelChange",(function(e){return t.newCredential.type=e})),Ss(14,ev,2,2,"option",9),Rs(),Rs(),Rs(),Ts(15,"div",3),Ts(16,"div",10),Ts(17,"label",11),qs(18,"Kennung (Mussfeld, darf noch nicht existieren)"),Rs(),Ts(19,"input",12,13),Ns("ngModelChange",(function(e){return t.newCredential.kennung=e})),Rs(),Rs(),Ts(21,"div",10),Ts(22,"label",14),qs(23,"Passwort (Mussfeld)"),Rs(),Ts(24,"input",15,16),Ns("ngModelChange",(function(e){return t.newCredential.secret=e})),Rs(),Rs(),Rs(),Ts(26,"div",3),Ts(27,"button",17),qs(28,"Hinzuf\xfcgen"),Rs(),Ts(29,"button",18),Ns("click",(function(){return t.linkWithGoogleLogin()})),qs(30,"mit Google-Login verkn\xfcpfen"),Rs(),Rs(),Rs(),Rs()),2&e){const e=Cs(9);kr(1),Js(" Hallo ",t.usersDisplayName,", das sind deine Zugangsmedien:"),kr(2),xs("ngForOf",t.credentials),kr(9),xs("ngModel",t.newCredential.type),kr(2),xs("ngForOf",t.enumOptions),kr(5),xs("ngModel",t.newCredential.kennung),kr(5),xs("ngModel",t.newCredential.secret),kr(3),xs("disabled",!e.valid)}},directives:[zc,tf,np,Kp,Sp,tp,ef,qg,rf,Sf,Bc,Cp,Pp],styles:[".list-item-text-left[_ngcontent-%COMP%]{width:15em}.row[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),e})();const nv=function(){return["/fakes/mail-view"]};function rv(e,t){1&e&&(Ts(0,"div"),Ts(1,"p"),qs(2,"Um die Registrierung abzuschlie\xdfen, must du deine Email-Adresse noch verifizieren."),Rs(),Es(3,"p"),Ts(4,"a",1),qs(5," Alle notwendigen Informationen dazu finden sich in der Email."),Rs(),Rs()),2&e&&(kr(4),xs("routerLink",da(1,nv)))}function iv(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"ul",2),Ts(2,"li"),qs(3,"mit folgender Kennung: "),Ts(4,"span",3),qs(5),Rs(),Rs(),Ts(6,"li"),qs(7,"diesem Medien-Typ: "),Ts(8,"span",3),qs(9),Rs(),Rs(),Ts(10,"li"),qs(11,"dein Authentifizierungslevel ist somit: "),Ts(12,"span",3),qs(13),Rs(),Rs(),Rs(),Es(14,"br"),Ts(15,"p"),qs(16,"Du kannst nun auch entsprechend gesch\xfctzte Seiten aufrufen..."),Rs(),Rs()),2&e){const e=Vs();kr(5),Zs(e.credential.kennung),kr(4),Zs(e.credentialType),kr(4),Zs(e.authLevel)}}function sv(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"a",1),qs(2,"Weiter zum eigentlichen Ziel (redirect)"),Rs(),Rs()),2&e){const e=Vs();kr(1),xs("routerLink",e.redirectUri)}}const ov=function(){return["/iam/login"]};function av(e,t){1&e&&(Ts(0,"div"),Ts(1,"a",1),qs(2,"Direkt zum Login..."),Rs(),Rs()),2&e&&(kr(1),xs("routerLink",da(1,ov)))}let cv=(()=>{class e{constructor(e,t){this.principalService=e,this.settingsService=t,this.usersDisplayname="",this.action="angemeldet",this.credentialType="",this.authLevel="",this.redirectUri="",this.alreadyLoggedIn=!1,this.showVerificationNeeded=!1,this.showLinkToLoginPage=!1}ngOnInit(){if(this.alreadyLoggedIn=this.principalService.isLoggedIn(),window&&window.history&&window.history.state){const{actionDone:e}=window.history.state;e.toLowerCase().includes("regist")&&(this.action="registriert",this.settingsService.setTitle("Erfolgreich registriert..."),this.showVerificationNeeded=this.settingsService.registeredAccountMustBeVerifiedByMail())}this.redirectUri=this.settingsService.getRedirectUri(),this.alreadyLoggedIn?(this.usersDisplayname=this.principalService.getUsersDisplayName(),this.credential=this.principalService.getCredential(),this.credentialType=ag[this.credential.type],this.authLevel=this.principalService.getAuthLevelAsString(),this.settingsService.setTitle("Erfolgreich angemeldet...")):this.showVerificationNeeded?this.redirectUri="":this.redirectUri||(this.showLinkToLoginPage=!0)}}return e.\u0275fac=function(t){return new(t||e)(As(ug),As(lg))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-successful-registration"]],decls:11,vars:6,consts:[[4,"ngIf"],[2,"font-size","larger",3,"routerLink"],[1,"browser-default"],[2,"font-weight","bold"]],template:function(e,t){1&e&&(Ts(0,"h4"),qs(1),Rs(),Ts(2,"h5"),qs(3,"Herzlich willkommen im unserem \xd6kosystem."),Rs(),Es(4,"br"),Ts(5,"h6"),qs(6),Rs(),Ss(7,rv,6,2,"div",0),Ss(8,iv,17,3,"div",0),Ss(9,sv,3,1,"div",0),Ss(10,av,3,2,"div",0)),2&e&&(kr(1),Js("Hallo ",t.usersDisplayname,""),kr(5),Js("Du hast dich erfolgreich ",t.action,"."),kr(1),xs("ngIf",t.showVerificationNeeded),kr(1),xs("ngIf",t.alreadyLoggedIn),kr(1),xs("ngIf",t.redirectUri),kr(1),xs("ngIf",t.showLinkToLoginPage))},directives:[Bc,Fh],styles:[""]}),e})();function lv(e,t){if(1&e&&(Ts(0,"div"),Ts(1,"h5",3),qs(2),Rs(),Rs()),2&e){const e=Vs();kr(2),Js(" Hallo ",e.displayName,", herzlich willkommen auf unserer Plattform.")}}function uv(e,t){1&e&&(Ts(0,"div"),Ts(1,"h5",3),qs(2," Herzlich willkommen auf unserer Plattform."),Rs(),Rs())}function dv(e,t){if(1&e&&(Ts(0,"span",6),qs(1),Rs()),2&e){const e=Vs().$implicit;kr(1),Zs(e.newBadgeCount)}}function hv(e,t){if(1&e){const e=Us();Ts(0,"li"),Ts(1,"a",4),Ns("click",(function(){Gt(e);const n=t.$implicit;return Vs().onClick(n.text)})),qs(2),Ss(3,dv,2,1,"span",5),Rs(),Rs()}if(2&e){const e=t.$implicit;kr(1),xs("routerLink",e.link),kr(1),Js(" ",e.text," "),kr(1),xs("ngIf",e.newBadgeCount>0)}}let gv=(()=>{class e{constructor(e,t,n,r,i){this.settingsService=e,this.principalService=t,this.tokenService=n,this.taskService=r,this.eventService=i,this.isActive=!0,this.loggedIn=!1,this.displayName="",this.availableLinks=[]}ngOnInit(){this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(Cg(()=>this.isActive)).subscribe(()=>this.initMembers()),this.initMembers()}ngOnDestroy(){this.isActive=!1}initMembers(){this.loggedIn=this.principalService.isLoggedIn(),this.displayName=this.principalService.getUsersDisplayName(),this.availableLinks=[],this.availableLinks.push({text:"Du meldest dich an",link:"/iam/login"}),this.availableLinks.push(this.principalService.isLoggedIn?{text:"Du meldest dich ab",link:""}:{text:"Du registrierst dich",link:"/iam/register"}),this.availableLinks.push({text:"Du willst alles \xfcber dich wissen",link:"/iam/user-info"},{text:"Du verwaltest deinen Account",link:"/iam/account-management"},{text:"Du verwaltest deine Zugangsmedien",link:"/iam/credentials-management"},{text:"Du verwaltest deine Mitgliedschaften",link:"/iam/organization-management"},{text:"Du administrierst deine Organisation (User & Rechte)",link:"/iam/organization-administration"},{text:"Du nutzt die Belegverwaltung",link:"/folderApp/main"},{text:"Du administrierst einzelne Ordner",link:"/folderApp/admin"},{text:"Du administrierst zentral die Berechtigungen deiner User",link:"/iam/central-administration"},{text:"Du verwaltest Unterstrukturen deiner Organisation",link:"/iam/suborga-management"},{text:"Du best\xfcckst Unterstrukturen mit Benutzern und Ressourcen",link:"/iam/suborga-administration"},{text:"Du verwaltest Lizenzen zu den Produkten",link:"/products-main"},{text:"Fibu als Beispielprodukt ohne vorherige Pr\xfcfung via Guard",link:"/generic-product/fibu"},{text:"Bilanz als Beispielprodukt mit Lizenz- und damit Loginpr\xfcfung im Guard",link:"/generic-product/bilanz"},{text:"Gehe zum Marktplatz als allgemeine Einstiegsseite",link:"/marketplace"}),this.taskService.mailsAvailable()&&this.availableLinks.push({text:"Es sind Mails vorhanden",link:"/fakes/mail-view",newBadgeCount:this.taskService.getNumberOfMails()})}onClick(e){return e.includes("meldest dich ab")&&this.logout(),!1}logout(){this.tokenService.logout(),this.initMembers()}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(ug),As(dm),As(lm),As(cg))},e.\u0275cmp=dt({type:e,selectors:[["app-oes-main"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"verweise"],[4,"ngFor","ngForOf"],["data-test-id","main-greeting"],[3,"routerLink","click"],["class","new badge red","data-badge-caption","",4,"ngIf"],["data-badge-caption","",1,"new","badge","red"]],template:function(e,t){1&e&&(Ss(0,lv,3,1,"div",0),Ss(1,uv,3,0,"div",0),Ts(2,"h6"),qs(3,"Du hast folgende M\xf6glichkeiten:"),Rs(),Ts(4,"ul",1),Ss(5,hv,4,3,"li",2),Rs()),2&e&&(xs("ngIf",t.loggedIn),kr(1),xs("ngIf",!t.loggedIn),kr(4),xs("ngForOf",t.availableLinks))},directives:[Bc,zc,Fh],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:40em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;left:.2em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:teal;text-decoration:none;position:relative;display:block;text-align:left;margin-left:1em}.verweise[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:red}.verweise[_ngcontent-%COMP%]   .knubbel[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:2.2em;min-width:16px;text-align:rigth;margin-right:.8em;border-radius:4px 0 0 4px}.badge[_ngcontent-%COMP%]{margin-right:.5em}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}"]}),e})(),pv=(()=>{class e{constructor(e,t,n,r,i){this.loginService=e,this.router=t,this.settingsService=n,this.taskService=r,this.authService=i}ngOnInit(){this.settingsService.setTitle("Anmeldung"),this.initMembers()}ngOnDestroy(){this.settingsService.resetRedirectUri()}initMembers(){this.credential={kennung:"",secret:""}}clearForm(){this.initMembers()}loginWithGoogle(){this.authService.signIn(Qm.PROVIDER_ID).then(e=>{if(e){console.log("provider: "+e.provider),console.log("id: "+e.id);const t=this.loginService.login({type:ag.SocialLogin,kennung:"",secret:"",provider:"google",userIdFromProvider:e.id});return this._onLogin(t)}alert("not logged in..."),console.log("not logged in...")}).catch(e=>alert("Sociallogin failed: "+e))}_getAllowUnverifiedState(){const e=this.taskService.getTaskInProgress();return!(!e||e.type!==cm.AccountVerification)}_handleAccountVerification(e){if(e.account.verified||this.taskService.thisFulfillsPendingTask(e))return this.taskService.resetTaskInProgress(),e;this.taskService.resetTaskInProgress()}_handleTaskInProgressIfAny(e){this.taskService.thisFulfillsPendingTask(e)}_orgaSelectionNeeded(e){return e.availableOrgas&&e.availableOrgas.length>1}onLogin(){const e=this._getAllowUnverifiedState();let t=this.loginService.login(this.credential,e);t&&t.authType!==sg.None?(this.loginService.logout(),e&&(t=this._handleAccountVerification(t),!t)||(this._handleTaskInProgressIfAny(t),this._orgaSelectionNeeded(t)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(t),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())))):alert("Das Anmelden hat nicht geklappt...")}_onLogin(e){e&&e.authType!==sg.None?(this.loginService.logout(),this._orgaSelectionNeeded(e)?this.router.navigateByUrl("/iam/select-organization"):(this.loginService.setToken(e),this.initMembers(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri()))):alert("Das Anmelden hat nicht geklappt...")}}return e.\u0275fac=function(t){return new(t||e)(As(dm),As(Mh),As(lg),As(lm),As(Wm))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-login"]],decls:21,vars:3,consts:[[1,"mt-3",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["for","kennung"],["type","text","id","kennung","name","kennung","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["kennung","ngModel"],[1,"form-group","mb-1"],["for","secret"],["type","password","id","secret","name","secret",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["type","button",1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"],[1,"mt-2"],["routerLink","/iam/register"]],template:function(e,t){if(1&e&&(Ts(0,"form",0,1),Ns("ngSubmit",(function(){return t.onLogin()})),Ts(2,"div",2),Ts(3,"label",3),qs(4,"Kennung"),Rs(),Ts(5,"input",4,5),Ns("ngModelChange",(function(e){return t.credential.kennung=e})),Rs(),Rs(),Ts(7,"div",6),Ts(8,"label",7),qs(9,"Passwort"),Rs(),Ts(10,"input",8,9),Ns("ngModelChange",(function(e){return t.credential.secret=e})),Rs(),Rs(),Ts(12,"button",10),Ns("click",(function(){return t.clearForm()})),qs(13,"Zur\xfccksetzen"),Rs(),Ts(14,"button",11),qs(15,"Anmelden"),Rs(),Ts(16,"button",12),Ns("click",(function(){return t.loginWithGoogle()})),qs(17,"Anmelden mit Google"),Rs(),Ts(18,"h6",13),Ts(19,"a",14),qs(20," Neu bei uns? Ab zur Registrierung... "),Rs(),Rs(),Rs()),2&e){const e=Cs(1);kr(5),xs("ngModel",t.credential.kennung),kr(5),xs("ngModel",t.credential.secret),kr(4),xs("disabled",!e.valid)}},directives:[tf,np,Kp,qg,rf,Sf,tp,ef,Fh],styles:["form[_ngcontent-%COMP%]{max-width:600px}"]}),e})();function fv(e,t){if(1&e){const e=Us();Ts(0,"div",2),Ts(1,"label",17),qs(2,"Passwort"),Rs(),Ts(3,"input",18,19),Ns("ngModelChange",(function(t){return Gt(e),Vs().credential.secret=t})),Rs(),Rs()}if(2&e){const e=Vs();kr(3),xs("ngModel",e.credential.secret)}}function mv(e,t){if(1&e){const e=Us();Ts(0,"div",2),Ts(1,"label",20),qs(2,"User-ID vom Provider"),Rs(),Ts(3,"input",21,22),Ns("ngModelChange",(function(t){return Gt(e),Vs().credential.userIdFromProvider=t})),Rs(),Rs()}if(2&e){const e=Vs();kr(3),xs("ngModel",e.credential.userIdFromProvider)("disabled",!0)}}function vv(e,t){1&e&&(Ts(0,"button",23),qs(1,"Registrieren"),Rs()),2&e&&(Vs(),xs("disabled",!Cs(1).valid))}function yv(e,t){if(1&e){const e=Us();Ts(0,"button",24),Ns("click",(function(){return Gt(e),Vs().startRegistrationWithGoogle()})),qs(1,"Registrieren mit Google"),Rs()}}function bv(e,t){if(1&e){const e=Us();Ts(0,"button",24),Ns("click",(function(){return Gt(e),Vs().finishRegistrationWithGoogle()})),qs(1,"Registrieren mit Google abschlie\xdfen"),Rs()}}let _v=(()=>{class e{constructor(e,t,n,r,i){this.registerService=e,this.router=t,this.settingsService=n,this.taskService=r,this.authService=i,this.registrationSuccessful=!0,this.errorFromBackend="",this.registrationViaGoogle=!1}ngOnInit(){this.initMembers(),this.settingsService.setTitle("Registrierung")}initMembers(){this.account={name:"",email:""},this.credential={kennung:"",secret:"",type:ag.Benutzerkonto},this.registrationSuccessful=!0,this.errorFromBackend="",this.settingsService.registeredAccountMustBeVerifiedByMail()||(this.account.verified=!0),this.registrationViaGoogle=!1}clearForm(){this.initMembers()}startRegistrationWithGoogle(){this.authService.signIn(Qm.PROVIDER_ID).then(e=>{e?(console.log("provider: "+e.provider),console.log("id: "+e.id),this.registrationViaGoogle=!0,this.account={name:e.name,email:e.email},this.credential={kennung:"",secret:"",provider:"google",userIdFromProvider:e.id,type:ag.SocialLogin}):(alert("Registration via Google-Login nicht erfolgreich!"),console.log("not registered with google"))}).catch(e=>alert("SocialRegistration failed: "+e))}finishRegistrationWithGoogle(){const e=this.registerService.register(this.account,this.credential);this._finishRegistration(e)}register(){this.credential.kennung=this.account.email;const e=this.registerService.register(this.account,this.credential);this._finishRegistration(e)}_finishRegistration(e){if(e){if(this.registerService.logout(),this.settingsService.registeredAccountMustBeVerifiedByMail())return this.taskService.addMailTask({type:cm.AccountVerification,email:e.account.email,account:e.account}),void this.router.navigateByUrl("/iam/registration-successful",{state:{actionDone:"Registration"}});if(!this.settingsService.afterRegistrationLoginIsRequired()&&(this.registerService.setToken(e),this.taskService.thisFulfillsPendingTask(e)),this.settingsService.showInfoPageAfterRegistration())return void this.router.navigateByUrl("/iam/registration-successful",{state:{actionDone:"Registration"}});if(this.settingsService.afterRegistrationLoginIsRequired())return void this.router.navigateByUrl("/iam/login");this.router.navigateByUrl(this.settingsService.getRedirectUri())}else alert("Das Registrieren hat nicht geklappt..."),this.errorFromBackend=this.registrationViaGoogle?"Dieser Google-Account wird schon verwendet.":"Die Email-Adresse muss eindeutig sein.",this.registrationSuccessful=!1}}return e.\u0275fac=function(t){return new(t||e)(As(dm),As(Mh),As(lg),As(lm),As(Wm))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-register"]],decls:26,vars:9,consts:[[1,"mt-3",3,"ngSubmit"],["registrationForm","ngForm"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","","minlength","3","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","form-group",4,"ngIf"],[1,"alert","alert-danger",3,"hidden"],[1,"mb-1"],["id","id-btn-clear-form","type","button",1,"btn","btn-default",3,"click"],["id","id-btn-register","type","submit","class","btn btn-success mr-3",3,"disabled",4,"ngIf"],["type","button","class","btn btn-google",3,"click",4,"ngIf"],[1,"mt-2"],["routerLink","/iam/login"],["for","secret"],["type","password","id","secret","name","secret","required","",1,"form-control",3,"ngModel","ngModelChange"],["secret","ngModel"],["for","providersUserId"],["id","providersUserId","name","providersUserId","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["providersUserId","ngModel"],["id","id-btn-register","type","submit",1,"btn","btn-success","mr-3",3,"disabled"],["type","button",1,"btn","btn-google",3,"click"]],template:function(e,t){1&e&&(Ts(0,"form",0,1),Ns("ngSubmit",(function(){return t.register()})),Ts(2,"div",2),Ts(3,"label",3),qs(4,"Wie m\xf6chtest du angesprochen werden? (mind. 3 Zeichen)"),Rs(),Ts(5,"input",4,5),Ns("ngModelChange",(function(e){return t.account.name=e})),Rs(),Rs(),Ts(7,"div",2),Ts(8,"label",6),qs(9,"Email (Anmeldename)"),Rs(),Ts(10,"input",7,8),Ns("ngModelChange",(function(e){return t.account.email=e})),Rs(),Rs(),Ss(12,fv,5,1,"div",9),Ss(13,mv,5,2,"div",9),Ts(14,"div",10),Ts(15,"p"),qs(16),Rs(),Rs(),Es(17,"div",11),Ts(18,"button",12),Ns("click",(function(){return t.clearForm()})),qs(19,"Zur\xfccksetzen"),Rs(),Ss(20,vv,2,1,"button",13),Ss(21,yv,2,0,"button",14),Ss(22,bv,2,0,"button",14),Ts(23,"h6",15),Ts(24,"a",16),qs(25," Du bist bereits registriert? Ab zum Login... "),Rs(),Rs(),Rs()),2&e&&(kr(5),xs("ngModel",t.account.name),kr(5),xs("ngModel",t.account.email),kr(2),xs("ngIf",!t.registrationViaGoogle),kr(1),xs("ngIf",t.registrationViaGoogle),kr(1),xs("hidden",t.registrationSuccessful),kr(2),Js("Fehlermeldung vom Server: ",t.errorFromBackend,""),kr(4),xs("ngIf",!t.registrationViaGoogle),kr(1),xs("ngIf",!t.registrationViaGoogle),kr(1),xs("ngIf",t.registrationViaGoogle))},directives:[tf,np,Kp,qg,rf,of,Sf,tp,ef,Bc,Fh],styles:["form[_ngcontent-%COMP%]{max-width:700px}"]}),e})(),wv=(()=>{class e{constructor(e){this.settingsService=e}ngOnInit(){this.settingsService.setTitle("Information - Page not found")}}return e.\u0275fac=function(t){return new(t||e)(As(lg))},e.\u0275cmp=dt({type:e,selectors:[["app-page-not-found"]],decls:4,vars:0,template:function(e,t){1&e&&(Ts(0,"h2"),qs(1,"Hoppla, da hast du dich wohl verirrt."),Rs(),Ts(2,"h3"),qs(3,"Die Seite, die du aufgerufen hast, gibt es nicht."),Rs())},styles:[""]}),e})();function Ov(e,t){if(1&e){const e=Us();Ts(0,"li"),Ts(1,"div",3),Ts(2,"button",4),Ns("click",(function(){Gt(e);const n=t.index;return Vs().selectOrga(n)})),qs(3),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit;kr(3),Qs("Anmelden mit: ",e.id,"-",e.name,"")}}let Iv=(()=>{class e{constructor(e,t,n){this.loginService=e,this.router=t,this.settingsService=n,this.accountName="",this.orgas=[]}ngOnInit(){this.settingsService.setTitle("Organisationsauswahl"),this.initMembers()}initMembers(){this.token=this.loginService.getTempToken(),this.token.account&&(this.accountName=this.token.account.name||""),this.token.availableOrgas.forEach(e=>this.orgas.push(e))}selectOrga(e){this.loginService.loginWithOrganization(this.orgas[e].id),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}cancelLogin(){this.loginService.logout(),this.settingsService.resetRedirectUri(),this.router.navigateByUrl("")}loginWithAccountOnly(){this.loginService.loginWithAccountOnly(),this.settingsService.showInfoPageAfterLogin()?this.router.navigateByUrl("/iam/registration-successful"):this.router.navigateByUrl(this.settingsService.getRedirectUri())}}return e.\u0275fac=function(t){return new(t||e)(As(dm),As(Mh),As(lg))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-select-orga"]],decls:11,vars:2,consts:[[4,"ngFor","ngForOf"],["type","button",1,"btn","btn2","additionalButton",3,"click"],["type","button",1,"btn","cancelButton",3,"click"],[2,"display","flex"],["type","button",1,"btn","btn2",3,"click"]],template:function(e,t){1&e&&(Ts(0,"h5"),qs(1),Rs(),Ts(2,"h6"),qs(3,"W\xe4hle bitte die gew\xfcnschte Organisation aus:"),Rs(),Ts(4,"ul"),Ss(5,Ov,4,2,"li",0),Rs(),Ts(6,"button",1),Ns("click",(function(){return t.loginWithAccountOnly()})),qs(7,"Ohne Organisation anmelden"),Rs(),Es(8,"br"),Ts(9,"button",2),Ns("click",(function(){return t.cancelLogin()})),qs(10,"Anmelden abbrechen"),Rs()),2&e&&(kr(1),Js("Hallo ",t.accountName,", du bist in mehreren Organisationen Mitglied."),kr(4),xs("ngForOf",t.orgas))},directives:[zc],styles:[".btn2[_ngcontent-%COMP%]{margin-top:.5em;width:40em;text-align:left}.additionalButton[_ngcontent-%COMP%]{margin-top:-.5em}.cancelButton[_ngcontent-%COMP%]{margin-top:3em;background-color:#f08080}"]}),e})(),Sv=(()=>{class e{constructor(e,t,n,r){this.router=e,this.principalService=t,this.licenceService=n,this.settingsService=r}_addText(e,t){return e.length>0?e+="- "+t:e=t,e}canActivate(e,t){var n;let r=!0,i="";this.settingsService.setRedirectUri(t.url),this.principalService.isLoggedIn()||(r=!1,i=this._addText(i,"Du must angemeldet sein "));const s=e.data.requiredAuthLevel;s&&this.principalService.getAuthLevel()<s&&(r=!1,i=this._addText(i,"mindestens mit Level: "+og[s]));const o=e.data.requiredAuthType;if(o&&this.principalService.getAuthType()<o&&(r=!1,i=this._addText(i,"mindestens mit Typ: "+sg[o])),null!==(n=e.data.checkLicenceInGuard)&&void 0!==n&&n){let t=this.principalService.getOrgaUser(),n=e.data.dataProductId;(null==t?void 0:t.id)>0&&n?this.licenceService.checkLicence(n,t.id)||(r=!1,i=this._addText(i,"Benutzer <"+t.name+"> hat keine Lizenz f\xfcr Produkt mit Id: "+n)):(r=!1,i=this._addText(i,"f\xfcr eine Lizenzpr\xfcfung muss man in einer Organisation angemeldet sein."))}return r?(this.settingsService.resetRedirectUri(),!0):(this.settingsService.setRequiredByGuardHelptext(i),this.settingsService.showInfoPageAfterGuardNotFulfilled()?this.router.parseUrl("/iam/guard-fail"):this.router.parseUrl("/iam/login"))}}return e.\u0275fac=function(t){return new(t||e)(qe(Mh),qe(ug),qe(fg),qe(lg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Cv(e,t){if(1&e){const e=Us();Ts(0,"button",41),Ns("click",(function(){Gt(e);const t=Vs().index;return Vs().removeUserFromOrga(t)})),qs(1," Dich aus Organisation entfernen"),Rs()}}function Av(e,t){if(1&e){const e=Us();Ts(0,"button",42),Ns("click",(function(){Gt(e);const t=Vs().index;return Vs().removeUserFromOrga(t)})),qs(1," Benutzer aus Organisation entfernen"),Rs()}if(2&e){const e=Vs().$implicit;xs("disabled",!Vs().deletionOfUserAllowed(e))}}const kv=function(e){return{"foreign-user":e}};function xv(e,t){if(1&e){const e=Us();Ts(0,"li",33),Ts(1,"div"),Ts(2,"span",34),qs(3),Rs(),Rs(),Ts(4,"div",35),Ts(5,"span",36),Ns("click",(function(){Gt(e);const n=t.index;return Vs().enterEditMode(n)})),qs(6),Rs(),Ts(7,"span",37),qs(8,"Klicken zum \xc4ndern..."),Rs(),Rs(),Ts(9,"div",38),Ss(10,Cv,2,0,"button",39),Ss(11,Av,2,1,"button",40),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,r=Vs();xs("ngClass",ha(5,kv,r.isForeign(e))),kr(3),Js(" ",r.getUserIdAndAdminTypeAsString(n)," "),kr(3),Js(" ",e.name," "),kr(4),xs("ngIf",e.id===r.principal.id),kr(1),xs("ngIf",e.id!==r.principal.id)}}function Pv(e,t){if(1&e&&(Ts(0,"option",54),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e.type),kr(1),Js(" ",e.text,"")}}function Tv(e,t){if(1&e){const e=Us();Ts(0,"div",43),Ts(1,"div",25),Ts(2,"div",9),Ts(3,"div",44),Ts(4,"select",45,46),Ns("ngModelChange",(function(t){return Gt(e),Vs().user2edit.adminType=t})),Ss(6,Pv,2,2,"option",47),Rs(),Rs(),Ts(7,"div",48),Ts(8,"label",49),qs(9,"Anwendernamen \xe4ndern (mind. 3 Zeichen)"),Rs(),Ts(10,"input",50,51),Ns("ngModelChange",(function(t){return Gt(e),Vs().user2edit.name=t}))("keydown.enter",(function(){return Gt(e),Vs().persistEditUserChanges()})),Rs(),Rs(),Rs(),Rs(),Ts(12,"button",52),Ns("click",(function(){return Gt(e),Vs().cancelEditMode()})),qs(13," Abbrechen "),Rs(),Ts(14,"button",53),Ns("click",(function(){return Gt(e),Vs().persistEditUserChanges()})),qs(15," \xdcbernehmen "),Rs(),Es(16,"hr"),Rs()}if(2&e){const e=Cs(11),t=Vs();kr(4),xs("disabled",!t.changeOfAdminRoleAllowed(t.user2edit))("ngModel",t.user2edit.adminType),kr(2),xs("ngForOf",t.enumOptions),kr(4),xs("ngModel",t.user2edit.name),kr(4),xs("disabled",!e.valid)}}function Rv(e,t){1&e&&(Ts(0,"span"),qs(1,"(Ben\xf6tigt SuperAdmin-Rolle)"),Rs())}const Ev=function(e){return{active:e}};function Uv(e,t){if(1&e&&(Ts(0,"option",16),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e),kr(1),Js(" ",e.name,"")}}function Mv(e,t){if(1&e&&(Ts(0,"option",16),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e),kr(1),Js(" ",e.displayName,"")}}function Fv(e,t){if(1&e&&(Ts(0,"option",16),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e),kr(1),Js(" ",e.name,"")}}function Nv(e,t){1&e&&(Ts(0,"div"),Ts(1,"span"),qs(2,"Vom gew\xe4hltem Ressourcen-Typ hast du keine Ressourcen."),Rs(),Es(3,"br"),Ts(4,"span"),qs(5,"Weil du entweder diese App nicht lizenziert hast, oder noch keine Ressourcen diesen Typs angelegt hast."),Rs(),Rs())}function Dv(e,t){if(1&e){const e=Us();Ts(0,"label",23),Ts(1,"input",24),Ns("ngModelChange",(function(n){return Gt(e),t.$implicit.allowed=n}))("ngModelChange",(function(){Gt(e);const t=Vs().index;return Vs(2).onChangedPermission(t)})),Rs(),Ts(2,"span"),qs(3),Rs(),Rs()}if(2&e){const e=t.$implicit;kr(1),xs("ngModel",e.allowed)("disabled",e.disabled),kr(2),Zs(e.name)}}const Lv=function(e){return{"foreign-resource":e}};function Vv(e,t){if(1&e&&(Ts(0,"li",19),Ts(1,"span",20),qs(2),Rs(),Ts(3,"span",21),qs(4),Rs(),Ss(5,Dv,4,3,"label",22),Rs()),2&e){const e=t.$implicit,n=Vs(2);xs("ngClass",ha(4,Lv,n.isForeignResource(e))),kr(2),Js(" ",e.id," "),kr(2),Js(" ",n.getResourceDisplayName(e)," "),kr(1),xs("ngForOf",e.permissions)}}function zv(e,t){if(1&e&&(Ts(0,"ul",17),Ss(1,Vv,6,6,"li",18),Rs()),2&e){const e=Vs();kr(1),xs("ngForOf",e.resourcesAndAccessRights)}}const jv=function(e){return{"foreign-user":e}};function Bv(e,t){1&e&&(Ts(0,"div",2),Ts(1,"p"),qs(2,"Du hast noch keine Unterstrukturen erstellt..."),Rs(),Rs())}function Hv(e,t){if(1&e&&(Ts(0,"option",14),qs(1),Rs()),2&e){const e=t.$implicit;xs("ngValue",e),kr(1),Js(" ",e.name,"")}}function $v(e,t){if(1&e){const e=Us();Ts(0,"li",17),Ts(1,"span",18),qs(2),Rs(),Ts(3,"label",17),Ts(4,"input",19),Ns("ngModelChange",(function(n){return Gt(e),t.$implicit.isInSubOrgaNew=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Vs(3).onChangedUserInSubOrga(n)})),Rs(),Ts(5,"span",20),qs(6,"in Unterstruktur"),Rs(),Rs(),Ts(7,"label",17),Ts(8,"input",21),Ns("ngModelChange",(function(n){return Gt(e),t.$implicit.subAdminNew=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Vs(3).onChangedUserSubAdmin(n)})),Rs(),Ts(9,"span",22),qs(10,"Sub-Admin"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit,n=t.index,r=Vs(3);kr(2),Js(" ",e.name," "),kr(2),xs("ngModel",e.isInSubOrgaNew),kr(4),xs("disabled",r.disableSubAdminCheckbox(n))("ngModel",e.subAdminNew)}}function Gv(e,t){if(1&e&&(Ts(0,"ul",15),Ss(1,$v,11,4,"li",16),Rs()),2&e){const e=Vs(2);kr(1),xs("ngForOf",e.mixedUsers)}}function Kv(e,t){if(1&e){const e=Us();Ts(0,"li",17),Ts(1,"span",18),qs(2),Rs(),Ts(3,"label",17),Ts(4,"input",19),Ns("ngModelChange",(function(n){return Gt(e),t.$implicit.isInSubOrgaNew=n}))("ngModelChange",(function(){Gt(e);const n=t.index;return Vs(3).onChangedResourceInSubOrga(n)})),Rs(),Ts(5,"span",20),qs(6,"in Unterstruktur"),Rs(),Rs(),Rs()}if(2&e){const e=t.$implicit;kr(2),Js(" ",e.name," "),kr(2),xs("ngModel",e.isInSubOrgaNew)}}function Wv(e,t){if(1&e&&(Ts(0,"ul",15),Ss(1,Kv,7,2,"li",16),Rs()),2&e){const e=Vs(2);kr(1),xs("ngForOf",e.mixedResources)}}function qv(e,t){if(1&e){const e=Us();Ts(0,"div"),Ts(1,"div",2),Ts(2,"div",3),Ts(3,"div",4),Ts(4,"div",5),qs(5," Unterstruktur ausw\xe4hlen: "),Rs(),Ts(6,"div",6),Ts(7,"select",7,8),Ns("ngModelChange",(function(t){return Gt(e),Vs().selectedSubOrga=t}))("ngModelChange",(function(){return Gt(e),Vs().onChangedSubOrga()})),Ss(9,Hv,2,2,"option",9),Rs(),Rs(),Rs(),Rs(),Rs(),Ts(10,"span",10),qs(11,"Diese Benutzer kannst du zuteilen:"),Rs(),Ss(12,Gv,2,1,"ul",11),Ts(13,"span",10),qs(14,"Diese Resourcen kannst du zuteilen:"),Rs(),Ss(15,Wv,2,1,"ul",11),Ts(16,"button",12),Ns("click",(function(){return Gt(e),Vs().discardChanges()})),qs(17,"\xc4nderungen verwerfen"),Rs(),Ts(18,"button",13),Ns("click",(function(){return Gt(e),Vs().saveChanges()})),qs(19,"\xc4nderungen \xfcbernehmen"),Rs(),Rs()}if(2&e){const e=Vs();kr(7),xs("ngModel",e.selectedSubOrga),kr(2),xs("ngForOf",e.subOrgas),kr(3),xs("ngIf",e.mixedUsers.length>0),kr(3),xs("ngIf",e.mixedResources.length>0),kr(1),xs("disabled",!e.dirty),kr(2),xs("disabled",!e.dirty)}}const Zv=[{path:"",component:gv},{path:"iam/login",component:pv},{path:"iam/select-organization",component:Iv},{path:"iam/register",component:_v},{path:"iam/registration-successful",component:cv},{path:"iam/guard-fail",component:Em},{path:"iam/account-management",component:Cm,canActivate:[Sv]},{path:"iam/user-info",component:Ff,canActivate:[Sv]},{path:"iam/credentials-management",component:tv,canActivate:[Sv]},{path:"iam/organization-management",component:Tm,canActivate:[Sv],data:{requiredAuthLevel:og.Low}},{path:"iam/organization-administration",component:(()=>{class e{constructor(e,t,n,r,i,s,o,a,c,l){this.settingsService=e,this.tokenService=t,this.principalService=n,this.eventService=r,this.accountService=i,this.orgaService=s,this.mailService=o,this.notificationService=a,this.organizationService=c,this.router=l,this.users=[],this.usersDisplayName="",this.principalIsSuperAdmin=!1,this.mShowInviteUser=!1,this.mShowInviteForeign=!0,this.nothingFound=!0,this.searchResult2Display="",this.newForeignProxyUser={}}get showInviteUser(){return this.mShowInviteUser}set showInviteUser(e){this.mShowInviteUser=e,this.mShowInviteUser&&(this.mShowInviteForeign=!1,this.cancelEditMode())}get showInviteForeign(){return this.mShowInviteForeign}set showInviteForeign(e){this.mShowInviteForeign=e,this.mShowInviteForeign&&(this.mShowInviteUser=!1,this.cancelEditMode())}ngOnInit(){this.settingsService.setTitle("Organisations-Administration"),this.principal=this.principalService.getOrgaUser(),this.usersDisplayName=this.principal.name,this.organization=this.orgaService.findOrgaById(this.principal.orgaId),this.enumOptions=[{text:"Kein Administrator",type:ig.MemberOnly},{text:"Administrator",type:ig.Admin},{text:"Haupt-Administrator",type:ig.SuperAdmin}],this.initMembers()}initMembers(){this.principalIsSuperAdmin=this.principalService.isSuperAdminOfCurrentOrga(),this.users=this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.user2edit={name:""},this.user2editId=0,this.newUser={name:"",email:""},this.searchResult2Display="",this.searchForeignInput="",this.nothingFound=!0,this.newForeignProxyUser={}}changeOfAdminRoleAllowed(e){return!!this.principalIsSuperAdmin&&!this.isForeign(e)}deletionOfUserAllowed(e){return!!this.principalIsSuperAdmin||!e.adminType||e.adminType===ig.MemberOnly}enterEditMode(e){this.user2edit=Object.assign({},this.users[e]),this.user2editId=this.user2edit.id,this.user2edit.adminType||(this.user2edit.adminType=ig.MemberOnly),this.mShowInviteUser=!1,this.mShowInviteForeign=!1}cancelEditMode(){this.user2edit={name:""},this.user2editId=0}persistEditUserChanges(){if(this.user2edit.name.length<=0)return;let e=!1,t=!1;const n=this.users.find(e=>e.id===this.user2editId),r=this.principalService.getOrgaUser().id===this.user2editId;if(n.adminType!==this.user2edit.adminType&&r){let e="";switch(this.user2edit.adminType){case ig.Admin:e="Du degradierst dich vom SuperAdmin zum Admin. Willst du das wirklich?";break;case ig.MemberOnly:e="Du nimmst dir gerade alle Admin-Rechte. Willst du das wirklich?",t=!0}if(!confirm(e))return}r&&(e=!0),this.orgaService.updateOrgaUser(this.user2edit),e&&this.eventService.publishTokenChangedEvent({type:um.OrgaUserDetails,orgaUser:this.user2edit}),t?this.router.navigateByUrl("/"):this.initMembers()}getUserIdAndAdminTypeAsString(e){let t="";const n=this.users[e];return n.adminType&&n.adminType>=ig.Admin&&(t=": "+ig[n.adminType]),n.id+t}removeUserFromOrga(e){const t=this.users[e];let n=!1;if(this.principal.id===t.id){if(!confirm("Du l\xf6schst dich gerade selbst? \nIst das OK?"))return;n=!0}this.orgaService.removeOrgaUser(t.id),n?(this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/")):this.initMembers()}deleteOrganisation(){confirm("Willst du wirklich die gesamte Organsation \n- mit allen Anwendern, Ressourcen und Rechten l\xf6schen?")&&(this.orgaService.deleteOrganization(this.organization.id),this.tokenService.logoutFromOrganization(this.organization.id),this.router.navigateByUrl("/"))}inviteUser(){const e=this.accountService.findAccountByMail(this.newUser.email);if(e&&this.orgaService.accountIsAlreadyMemberInOrga(this.organization.id,e.id))return void alert("Der einzuladende Benutzer ist bereits Mitglied in deiner Organsation!");let t={name:this.newUser.name,orgaId:this.organization.id};t=this.orgaService.joinOrganization(this.organization.id,t);let n,r=cm.InvitationOrgaUser;e&&(this.notificationService.addNotification({type:qf.InvitationOrgaUser,accountAsRecipient:e,orgaUser:t}),r=cm.InfoOfInvitationOrgaUser,n=e),this.mailService.addMailTask({type:r,email:this.newUser.email,account:n,orgaUser:t}),this.initMembers()}isForeign(e){return!(!e.foreignOrgaId&&!e.foreignUserId)}inviteForeign(){if(this.newForeignProxyUser.foreignOrganization||this.newForeignProxyUser.foreignUser){let e={name:this.newForeignProxyUser.newName,orgaId:this.organization.id};this.newForeignProxyUser.foreignOrganization?e.foreignOrgaId=this.newForeignProxyUser.foreignOrganization.id:e.foreignUserId=this.newForeignProxyUser.foreignUser.id,e=this.orgaService.joinOrganization(this.organization.id,e)}this.initMembers()}getOrganizationTypeAsString(e){return Lg[e]}_arrangeDisplaynameForFoundOrga(e){e&&e.id&&(this.principal.orgaId===e.id?this.searchResult2Display="Das ist deine eigene Organisation!":this.organizationService.foreignOrgaIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: "+this.getOrganizationTypeAsString(e.type)+")",this.newForeignProxyUser.foreignOrganization=e,this.newForeignProxyUser.newName="Orga - <"+e.name+">"))}_arrangeDisplaynameForFoundOrgaUser(e){e&&(this.principal.orgaId===e.orgaId?this.searchResult2Display="Der Benutzer ist direktes Mitglied deiner Organisation!":this.organizationService.foreignUserIsAlreadyMemberInOrga(this.organization.id,e.id)?this.searchResult2Display=e.name+" hast du schon eingeladen.":(this.nothingFound=!1,this.searchResult2Display=e.name+" (Typ: Anwender)",this.newForeignProxyUser.foreignUser=e,this.newForeignProxyUser.newName="User - <"+e.name+">"))}search4ForeignUserOrOrga(){this.newForeignProxyUser={},this.nothingFound=!0;const e=parseInt(this.searchForeignInput,10),t=this.organizationService.findOrgaById(e);if(t)this._arrangeDisplaynameForFoundOrga(t);else{const t=this.organizationService.findOrgaUserByOrgaUserId(e);t?this._arrangeDisplaynameForFoundOrgaUser(t):this.searchResult2Display="Weder Organisation noch User mit dieser ID gefunden."}}}return e.\u0275fac=function(t){return new(t||e)(As(lg),As(dm),As(ug),As(cg),As(Om),As(jg),As(lm),As(Zf),As(jg),As(Mh))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-orga-admin"]],decls:65,vars:22,consts:[[1,"container"],[1,"verweise"],[3,"ngClass",4,"ngFor","ngForOf"],["class","row editButtons",4,"ngIf"],["for","toggle-invite"],["type","checkbox","id","toggle-invite",3,"ngModel","ngModelChange"],[1,"toggled-container",3,"hidden"],[1,"col","s12",3,"ngSubmit"],["inviteUserForm","ngForm"],[1,"row"],[1,"input-field","col","s6"],["for","name"],["type","text","id","name","name","name","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["type","submit",1,"btn","btn-success",3,"disabled"],["for","toggle-invite-orga"],["type","checkbox","id","toggle-invite-orga",3,"ngModel","ngModelChange"],[1,"toggled-container","col","s12",3,"hidden"],[1,"row","valign-wrapper"],["type","text","placeholder","via Orga-ID oder User-ID suchen...",3,"ngModel","ngModelChange","keydown.enter"],[1,"col","s6"],[1,"btn","btn-success",3,"click"],[1,"col","s12"],[2,"font-weight","bold","margin-right","0.5em"],["inviteForeignForm","ngForm"],["for","nameProxyForeign",3,"ngClass"],["type","text","id","nameProxyForeign","name","nameProxyForeign","required","","minlength","3",1,"form-control",3,"disabled","ngModel","ngModelChange"],["nameProxyForeign","ngModel"],[4,"ngIf"],["type","button",1,"btn","btn-default","btn-delete",3,"disabled","click"],[3,"ngClass"],[1,"list-item-text-left"],[1,"tooltip"],[1,"list-item-text","tooltip",3,"click"],[1,"tooltiptext"],[1,"buttons-right-div"],["class","btnInListe btn-delete",3,"click",4,"ngIf"],["class","btnInListe",3,"disabled","click",4,"ngIf"],[1,"btnInListe","btn-delete",3,"click"],[1,"btnInListe",3,"disabled","click"],[1,"row","editButtons"],[1,"input-field","col","s5"],["name","credTyp",1,"browser-default",3,"disabled","ngModel","ngModelChange"],["credTyp","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-field","col","s7"],["for","editName"],["id","editName","name","editName","type","text","required","","minlength","3","appAutofocus","",3,"ngModel","ngModelChange","keydown.enter"],["editName","ngModel"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"]],template:function(e,t){if(1&e&&(Ts(0,"div",0),Ts(1,"p"),qs(2),Rs(),Ts(3,"ul",1),Ss(4,xv,12,7,"li",2),Rs(),Es(5,"hr"),Ss(6,Tv,17,5,"div",3),Ts(7,"div"),Ts(8,"label",4),Ts(9,"input",5),Ns("ngModelChange",(function(e){return t.showInviteUser=e})),Rs(),Ts(10,"span"),qs(11),Rs(),Rs(),Rs(),Ts(12,"div",6),Ts(13,"form",7,8),Ns("ngSubmit",(function(){return t.inviteUser()})),Ts(15,"div",9),Ts(16,"div",10),Ts(17,"label",11),qs(18,"Name des Mitarbeiters"),Rs(),Ts(19,"input",12,13),Ns("ngModelChange",(function(e){return t.newUser.name=e})),Rs(),Rs(),Ts(21,"div",10),Ts(22,"label",14),qs(23,"Adresse f\xfcr Einladungs-Mail"),Rs(),Ts(24,"input",15,16),Ns("ngModelChange",(function(e){return t.newUser.email=e})),Rs(),Rs(),Rs(),Ts(26,"button",17),qs(27,"Benutzer einladen"),Rs(),Rs(),Rs(),Es(28,"hr"),Ts(29,"div"),Ts(30,"label",18),Ts(31,"input",19),Ns("ngModelChange",(function(e){return t.showInviteForeign=e})),Rs(),Ts(32,"span"),qs(33),Rs(),Rs(),Rs(),Ts(34,"div",20),Ts(35,"div",21),Ts(36,"div",10),Ts(37,"input",22),Ns("ngModelChange",(function(e){return t.searchForeignInput=e}))("keydown.enter",(function(){return t.search4ForeignUserOrOrga()})),Rs(),Rs(),Ts(38,"div",23),Ts(39,"button",24),Ns("click",(function(){return t.search4ForeignUserOrOrga()})),qs(40," Suchen "),Rs(),Rs(),Rs(),Ts(41,"div",9),Ts(42,"div",25),Ts(43,"span",26),qs(44,"Suchergebnis: "),Rs(),Ts(45,"span"),qs(46),Rs(),Rs(),Rs(),Ts(47,"form",7,27),Ns("ngSubmit",(function(){return t.inviteForeign()})),Ts(49,"div",21),Ts(50,"div",10),Ts(51,"label",28),qs(52,"Bezeichnung des Stellvertreters"),Rs(),Ts(53,"input",29,30),Ns("ngModelChange",(function(e){return t.newForeignProxyUser.newName=e})),Rs(),Rs(),Ts(55,"div",23),Ts(56,"button",17),qs(57,"einladen"),Rs(),Rs(),Rs(),Rs(),Rs(),Ts(58,"div",25),Es(59,"hr"),Ts(60,"p"),qs(61,"Hier kannst du die komplette Organisation l\xf6schen. "),Ss(62,Rv,2,0,"span",31),Rs(),Ts(63,"button",32),Ns("click",(function(){return t.deleteOrganisation()})),qs(64,"Organisation l\xf6schen"),Rs(),Rs(),Rs()),2&e){const e=Cs(14),n=Cs(48);kr(2),Js("Hier verwaltest du die Mitglieder von <",t.organization.name,">."),kr(2),xs("ngForOf",t.users),kr(2),xs("ngIf",t.user2edit.id),kr(3),xs("ngModel",t.showInviteUser),kr(2),Zs(t.showInviteUser?"<Benutzer einladen> ausblenden":"<Benutzer einladen> einblenden"),kr(1),xs("hidden",!t.showInviteUser),kr(7),xs("ngModel",t.newUser.name),kr(5),xs("ngModel",t.newUser.email),kr(2),xs("disabled",!e.valid),kr(5),xs("ngModel",t.showInviteForeign),kr(2),Zs(t.showInviteUser?"<mit Organisation zusammenarbeiten> ausblenden":"<mit Organisation zusammenarbeiten> einblenden"),kr(1),xs("hidden",!t.showInviteForeign),kr(3),xs("ngModel",t.searchForeignInput),kr(9),Zs(t.searchResult2Display),kr(5),xs("ngClass",ha(20,Ev,t.newForeignProxyUser.newName)),kr(2),xs("disabled",t.nothingFound)("ngModel",t.newForeignProxyUser.newName),kr(3),xs("disabled",t.nothingFound||!n.valid),kr(6),xs("ngIf",!t.principalIsSuperAdmin),kr(1),xs("disabled",!t.principalIsSuperAdmin)}},directives:[zc,Bc,Gg,tp,ef,tf,np,Kp,qg,rf,of,Lc,Sp,Sf,Cp,Pp],styles:['.verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:60em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:60em;position:relative;background-color:#eee;margin-bottom:.3em;padding:.3em 0;height:2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   .foreign-user[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:10em;font-weight:700}.list-item-text[_ngcontent-%COMP%]{float:left;width:30em;text-align:left}.buttons-right-div[_ngcontent-%COMP%]{float:right;margin-right:.7em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.7em;background-color:#26a69a;color:#fff}.editButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1em}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4db6ac}.verweise[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#d3d3d3}.btn-delete[_ngcontent-%COMP%]{background-color:#ea454b!important}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ee6e73!important}.btn-delete[_ngcontent-%COMP%]:disabled{background-color:#d3d3d3!important}hr[_ngcontent-%COMP%]{height:2px;background:#000;margin-top:1em;margin-bottom:1em;width:60em}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-right:3px solid #26a69a}.ng-invalid[_ngcontent-%COMP%]:not(form){border-right:3px solid #d0181e}.container[_ngcontent-%COMP%]{display:flex 2 1;margin-top:.5em;float:left}.form-group[_ngcontent-%COMP%]{width:20em;height:5em}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;border-bottom:.5px dotted #000}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:120px;background-color:#90ee90;color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;transition:opacity .3s}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border:5px solid transparent;border-top-color:#555}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}.row[_ngcontent-%COMP%]{margin-bottom:0!important}']}),e})(),canActivate:[wm]},{path:"iam/central-administration",component:(()=>{class e{constructor(e,t,n,r,i){this.changeDetector=e,this.settingsService=t,this.principalService=n,this.orgaService=r,this.accessService=i,this.usersDisplayName="",this.subOrgas2Admin=[],this.users2Admin=[],this.resourceTypes2Admin=[],this.resourcesAndAccessRights=[],this.dirty=!1}ngOnInit(){this.settingsService.setTitle("zentrale Rechte-Administration"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.subOrgas2Admin=this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId),this.selectedSubOrga2Admin=this.subOrgas2Admin[0],this.resourceTypes2Admin=this.accessService.getAllResourceTypes(),this.selectedResourceType2Admin=this.resourceTypes2Admin[0],this._initMembers(!0)}_initMembers(e=!1){this.dirty=!1,this.selectedSubOrgaId=void 0,this.selectedSubOrga2Admin&&(this.selectedSubOrgaId=this.selectedSubOrga2Admin.id),this.selectedResourceTypesId=this.selectedResourceType2Admin.typeId,e&&this.selectedSubOrga2Admin&&(this.users2Admin=this.orgaService.getAllOrgaUsers4SubOrga(this.principal.orgaId,this.selectedSubOrga2Admin.id),this.users2Admin.length>0&&(this.selectedUser2Admin=this.users2Admin[0])),this.selectedUser2Admin&&(this.selectedUsersId=this.selectedUser2Admin.id),this.resourcesAndAccessRights=[],void 0!==this.selectedSubOrgaId&&this.accessService.getAllResourcesOfSubOrgaByResourceType(this.selectedResourceType2Admin.typeId,this.principal.orgaId,this.selectedSubOrgaId).forEach(e=>{const t=[];this.selectedResourceType2Admin.possiblePermissions.forEach(n=>{const r={name:n};r.disabled=!this.accessService.permissionIsEnabled4Administration(e,this.selectedUser2Admin,n,this.selectedSubOrgaId),r.allowed=this.accessService.hasAdministratedPermission(e,this.selectedUser2Admin,n,this.selectedSubOrgaId),t.push(r)});const n={};Object.assign(n,e),n.permissions=t,this.resourcesAndAccessRights.push(n)})}getResourceDisplayName(e){return this.isForeignResource(e)?e.displayName+" (von Orga#: "+e.orgaId+")":e.displayName}isForeignUser(e){return!(!e||!e.foreignOrgaId&&!e.foreignUserId)}isForeignResource(e){return!!e&&e.orgaId!==this.principal.orgaId}discardChanges(){this._initMembers()}savePermissions(){this.resourcesAndAccessRights.forEach(e=>{if(e.dirty){const t=e.permissions.filter(e=>e.allowed).map(e=>e.name);this.accessService.setPermissionsOfUser2resource(this.selectedUser2Admin,e,t,this.selectedSubOrgaId)}}),this._afterSavingPermissions()}_afterSavingPermissions(){this.dirty=!1,this.resourcesAndAccessRights.forEach(e=>e.dirty=!1)}onChangedUser(){if(this.dirty&&!confirm("Willst du den User wechseln und deine \xc4nderungen verwerfen?")){const e=this.users2Admin.find(e=>e.id===this.selectedUsersId);if(e)return this.changeDetector.detectChanges(),void(this.selectedUser2Admin=e)}this._initMembers()}onChangedSubOrga(){if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){const e=this.subOrgas2Admin.find(e=>e.id===this.selectedSubOrgaId);if(e)return this.changeDetector.detectChanges(),void(this.selectedSubOrga2Admin=e)}this._initMembers(!0)}onChangedResourceType(){if(this.dirty&&!confirm("Willst du den Ressourcentyp wechseln und deine \xc4nderungen verwerfen?")){const e=this.resourceTypes2Admin.find(e=>e.typeId===this.selectedResourceTypesId);if(e)return this.changeDetector.detectChanges(),void(this.selectedResourceType2Admin=e)}this._initMembers()}onChangedPermission(e=-1){if(this.dirty=!0,e>=0){const t=this.resourcesAndAccessRights[e];t&&(t.dirty=!0)}}}return e.\u0275fac=function(t){return new(t||e)(As(Wi),As(lg),As(ug),As(jg),As(xg))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-central-admin"]],decls:31,vars:14,consts:[[1,"mb-1"],[1,"row"],[1,"col","s12"],[1,"input-field","label-for-select","col","s5","m3"],[1,"input-field","col","s8","m5"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["name","resourceType2admin",1,"browser-default",3,"ngModel","ngModelChange"],["resourceType2adminCtrl","ngModel"],["name","user2admin",1,"browser-default",3,"ngClass","ngModel","ngModelChange"],["user2adminCtrl","ngModel"],[4,"ngIf"],["class","liste",4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[3,"ngValue"],[1,"liste"],["class","valign-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"valign-wrapper",3,"ngClass"],[1,"list-item-text-left"],[1,"list-item-text"],["class","valign-wrapper mr-1",4,"ngFor","ngForOf"],[1,"valign-wrapper","mr-1"],["type","checkbox",1,"filled-in",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(Ts(0,"h6",0),qs(1),Rs(),Ts(2,"div",1),Ts(3,"div",2),Ts(4,"div",1),Ts(5,"div",3),qs(6," Sub-Organisation w\xe4hlen: "),Rs(),Ts(7,"div",4),Ts(8,"select",5,6),Ns("ngModelChange",(function(e){return t.selectedSubOrga2Admin=e}))("ngModelChange",(function(){return t.onChangedSubOrga()})),Ss(10,Uv,2,2,"option",7),Rs(),Rs(),Rs(),Ts(11,"div",1),Ts(12,"div",3),qs(13," Ressourcen-Typ w\xe4hlen: "),Rs(),Ts(14,"div",4),Ts(15,"select",8,9),Ns("ngModelChange",(function(e){return t.selectedResourceType2Admin=e}))("ngModelChange",(function(){return t.onChangedResourceType()})),Ss(17,Mv,2,2,"option",7),Rs(),Rs(),Rs(),Ts(18,"div",1),Ts(19,"div",3),qs(20," Benutzer w\xe4hlen: "),Rs(),Ts(21,"div",4),Ts(22,"select",10,11),Ns("ngModelChange",(function(e){return t.selectedUser2Admin=e}))("ngModelChange",(function(){return t.onChangedUser()})),Ss(24,Fv,2,2,"option",7),Rs(),Rs(),Rs(),Rs(),Rs(),Ss(25,Nv,6,0,"div",12),Ss(26,zv,2,1,"ul",13),Ts(27,"button",14),Ns("click",(function(){return t.discardChanges()})),qs(28,"\xc4nderungen verwerfen"),Rs(),Ts(29,"button",15),Ns("click",(function(){return t.savePermissions()})),qs(30,"\xc4nderungen \xfcbernehmen"),Rs()),2&e&&(kr(1),Js(" Hallo ",t.usersDisplayName,", hier kannst du die Berechtigungen f\xfcr alle deine Organisationen und alle Unterstrukturen zentral regeln."),kr(7),xs("ngModel",t.selectedSubOrga2Admin),kr(2),xs("ngForOf",t.subOrgas2Admin),kr(5),xs("ngModel",t.selectedResourceType2Admin),kr(2),xs("ngForOf",t.resourceTypes2Admin),kr(5),xs("ngClass",ha(12,jv,t.isForeignUser(t.selectedUser2Admin)))("ngModel",t.selectedUser2Admin),kr(2),xs("ngForOf",t.users2Admin),kr(1),xs("ngIf",0===t.resourcesAndAccessRights.length),kr(1),xs("ngIf",t.resourcesAndAccessRights.length>0),kr(1),xs("disabled",!t.dirty),kr(2),xs("disabled",!t.dirty))},directives:[Sp,tp,ef,zc,Lc,Bc,Cp,Pp,Gg],styles:[".liste[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{width:2rem}.list-item-text[_ngcontent-%COMP%]{width:25rem}select[_ngcontent-%COMP%]{border:3px solid teal}.foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:0!important}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem;white-space:nowrap}@media screen and (max-width:500px){.label-for-select[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;margin:0}}"]}),e})(),canActivate:[wm],data:{allowSubAdmin:!0}},{path:"iam/suborga-management",component:Pf,canActivate:[wm]},{path:"iam/suborga-administration",component:(()=>{class e{constructor(e,t,n,r,i){this.changeDetector=e,this.settingsService=t,this.principalService=n,this.orgaService=r,this.accessService=i,this.usersDisplayName="",this.subOrgas=[],this.orgaUsers=[],this.mixedUsers=[],this.orgaResources=[],this.mixedResources=[],this.dirty=!1}ngOnInit(){this.settingsService.setTitle("Unterstruktur Best\xfcckung"),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.principal=this.principalService.getOrgaUser(),this.subOrgas=this.orgaService.getAllAllowedSubOrgas(this.principal.orgaId,!1),this.subOrgas.length>0&&(this.selectedSubOrga=this.subOrgas[0]),this._initMembers()}_removeForeignItems(){}_initMembers(){this.dirty=!1,this.selectedSubOrga&&(this.selectedSubOrgaId=this.selectedSubOrga.id,this.orgaUsers=this.orgaService.getAllOrgaUsers(this.principal.orgaId),this.orgaResources=this.accessService.getAllResourcesOfOrga(this.principal.orgaId),this._removeForeignItems(),this._initMixedOrgaUsers(),this._initMixedSubResources())}_initMixedOrgaUsers(){this.mixedUsers=[];const e=this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);this.orgaUsers.forEach(t=>{const n={orgaUserId:t.id,name:t.name,dirty:!1,subAdmin:!1,subAdminNew:!1,isInSubOrga:!1,isInSubOrgaNew:!1},r=e.find(e=>e.orgaUserId===t.id);r&&(n.subUserId=r.id,n.isInSubOrga=!0,n.isInSubOrgaNew=!0,n.subAdmin=r.subAdmin,n.subAdminNew=r.subAdmin),this.mixedUsers.push(n)})}_initMixedSubResources(){this.mixedResources=[];const e=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id);console.log(e),this.orgaResources.forEach(t=>{const n={typeId:t.typeId,orgaResourceId:t.id,name:t.displayName,dirty:!1,isInSubOrga:!1,isInSubOrgaNew:!1},r=e.find(e=>e.orgaResourceId===t.id&&e.typeId===t.typeId);r&&(n.subResourceId=r.id,n.isInSubOrga=!0,n.isInSubOrgaNew=!0),this.mixedResources.push(n)}),console.log(this.mixedResources)}_reCalcMixedUsers(){const e=this.orgaService.getAllSubOrgaUsers4SubOrga(this.selectedSubOrga.id);this.mixedUsers.forEach(t=>{t.dirty=!1,t.isInSubOrga=t.isInSubOrgaNew,t.subAdmin=t.subAdminNew,t.subUserId=void 0;const n=e.find(e=>e.orgaUserId===t.orgaUserId);n&&(t.subUserId=n.id)})}_reCalcMixedResources(){const e=this.accessService.getAllSubResourcesOfSubOrga(this.selectedSubOrga.id);console.log(e),this.mixedResources.forEach(t=>{t.dirty=!1,t.isInSubOrga=t.isInSubOrgaNew,t.subResourceId=void 0;const n=e.find(e=>e.orgaResourceId===t.orgaResourceId&&e.typeId===t.typeId);n&&(t.subResourceId=n.id)}),console.log(this.mixedResources)}isForeignUser(e){return!(!e.foreignOrgaId&&!e.foreignUserId)}isForeignResource(e){return e.orgaId!==this.principal.orgaId}disableSubAdminCheckbox(e){const t=this.mixedUsers[e],n=this.orgaUsers.find(e=>e.id===t.orgaUserId);return!t.isInSubOrgaNew||this.isForeignUser(n)}discardChanges(){this._initMembers()}_saveUserChanges(){const e=[];this.mixedUsers.forEach(t=>{if(t.dirty){const n={id:t.subUserId,orgaId:this.selectedSubOrga.orgaId,subOrgaId:this.selectedSubOrgaId,orgaUserId:t.orgaUserId,subAdmin:t.subAdminNew};t.dirty=!1,t.isInSubOrga!==t.isInSubOrgaNew&&(t.dirty=!0,t.isInSubOrgaNew?n.id=void 0:n.subOrgaId=void 0),t.subAdmin!==t.subAdminNew&&(t.dirty=!0),t.dirty&&e.push(n)}}),console.log(e),this.orgaService.changeSubOrgaUsers(e)}_saveResourceChanges(){const e=[];this.mixedResources.forEach(t=>{if(t.dirty){const n={id:t.subResourceId,typeId:t.typeId,orgaResourceId:t.orgaResourceId,orgaId:this.selectedSubOrga.orgaId,subOrgaId:this.selectedSubOrgaId};t.isInSubOrga!==t.isInSubOrgaNew&&(t.isInSubOrgaNew?n.id=void 0:n.subOrgaId=void 0,e.push(n))}}),console.log(e),this.accessService.changeSubResources(this.selectedSubOrgaId,e)}saveChanges(){this._saveUserChanges(),this._saveResourceChanges(),this._afterSavingChanges()}_afterSavingChanges(){this.dirty=!1,this._reCalcMixedUsers(),this._reCalcMixedResources()}onChangedSubOrga(){if(this.dirty&&!confirm("Willst du die Sub-Organisation wechseln und deine \xc4nderungen verwerfen?")){const e=this.subOrgas.find(e=>e.id===this.selectedSubOrgaId);if(e)return this.changeDetector.detectChanges(),void(this.selectedSubOrga=e)}this._initMembers()}_onChangedUserItem(e,t=!1){const n=this.mixedUsers[e];n&&(t&&!n.isInSubOrgaNew&&(n.subAdminNew=!1),n.dirty=!0,this.dirty=!0)}onChangedUserSubAdmin(e){this._onChangedUserItem(e)}onChangedUserInSubOrga(e){this._onChangedUserItem(e,!0)}onChangedResourceInSubOrga(e){const t=this.mixedResources[e];t&&(t.dirty=!0,this.dirty=!0)}}return e.\u0275fac=function(t){return new(t||e)(As(Wi),As(lg),As(ug),As(jg),As(xg))},e.\u0275cmp=dt({type:e,selectors:[["app-iam-sub-orga-admin"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","s12"],[1,"row","inner-row"],[1,"input-field","label-for-select","col","s2"],[1,"input-field","col","s6"],["name","subOrga2adminCtrl",1,"browser-default",3,"ngModel","ngModelChange"],["subOrga2adminCtrl","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[2,"font-weight","bold"],["class","verweise",4,"ngIf"],[1,"btn","btn-delete",3,"disabled","click"],[1,"btn",3,"disabled","click"],[3,"ngValue"],[1,"verweise"],["class","valign-wrapper",4,"ngFor","ngForOf"],[1,"valign-wrapper"],[1,"list-item-text"],["type","checkbox",1,"filled-in",3,"ngModel","ngModelChange"],[1,"first-checkbox"],["type","checkbox",1,"filled-in",3,"disabled","ngModel","ngModelChange"],[1,"second-checkbox"]],template:function(e,t){1&e&&(Ts(0,"h5"),qs(1),Rs(),Ss(2,Bv,3,0,"div",0),Ss(3,qv,20,6,"div",1)),2&e&&(kr(1),Js(" Hallo ",t.usersDisplayName,", hier kannst du deinen Unterstrukturen Benutzer und Ressourcen zuweisen."),kr(1),xs("ngIf",0===t.subOrgas.length),kr(1),xs("ngIf",t.subOrgas.length>0))},directives:[Bc,Sp,tp,ef,zc,Cp,Pp,Gg],styles:[".verweise[_ngcontent-%COMP%]{margin:2 0 2em;list-style-type:none;padding:8;width:55em}.verweise[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:55em;position:relative;background-color:#eee;margin-bottom:.5em;padding:.3em 0;height:2.2em;border-radius:4px}.verweise[_ngcontent-%COMP%]   .foreign-resource[_ngcontent-%COMP%]{background-color:#ffb6c1}.list-item-text-left[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:5em}.list-item-text[_ngcontent-%COMP%]{margin-left:.7em;float:left;width:25em;text-align:left}.verweise[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1em;margin-right:1em}.first-checkbox[_ngcontent-%COMP%]{float:left;width:10em;text-align:left}.second-checkbox[_ngcontent-%COMP%]{float:left;width:15em;text-align:left}.btn[_ngcontent-%COMP%]{margin-right:1em;margin-top:1em}select[_ngcontent-%COMP%]{border:3px solid teal}.foreign-user[_ngcontent-%COMP%]{border:3px solid red!important}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff}.row[_ngcontent-%COMP%]{margin-bottom:5px!important}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:.35rem}.label-for-select[_ngcontent-%COMP%]{padding-top:.7rem}"]}),e})(),canActivate:[wm],data:{allowSubAdmin:!0}},{path:"notification-view",component:sm,canActivate:[Sv]},{path:"fakes/mail-view",component:_m},{path:"iam/settings",component:am},{path:"help",component:Tf},{path:"products-main",component:If},{path:"generic-product/fibu",component:Dg,data:{dataProductId:Sl.FIBU}},{path:"generic-product/tax",component:Dg,data:{dataProductId:Sl.TAX}},{path:"generic-product/bilanz",component:Dg,canActivate:[Sv],data:{requiredAuthType:sg.OrgaUser,dataProductId:Sl.BILANZ,checkLicenceInGuard:!0}},{path:"marketplace",component:Ig},{path:"folderApp/main",component:Wf,canActivate:[Sv],data:{requiredAuthLevel:og.Low,requiredAuthType:sg.OrgaUser}},{path:"folderApp/admin",component:jf,canActivate:[wm]},{path:"x/geschuetzt-mit-beidem-mit-parametern",component:tv,canActivate:[Sv],data:{requiredAuthLevel:og.Secure,requiredAuthType:sg.OrgaUser}},{path:"**",component:wv}];let Jv=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},imports:[[Zh.forRoot(Zv)],Zh]}),e})();function Qv(e,t){if(1&e&&(Ts(0,"span",20),qs(1),Rs()),2&e){const e=Vs();kr(1),Zs(e.orgaName)}}function Xv(e,t){if(1&e&&(Ts(0,"span",21),qs(1),Rs()),2&e){const e=Vs();kr(1),Zs(e.countOfNewBadgeItems)}}function Yv(e,t){1&e&&(Ts(0,"i",22),qs(1,"arrow_drop_down"),Rs())}function ey(e,t){if(1&e&&(Ts(0,"span",21),qs(1),Rs()),2&e){const e=Vs().$implicit;kr(1),Zs(e.newCount)}}const ty=function(e){return{divider:e}};function ny(e,t){if(1&e){const e=Us();Ts(0,"li",23),Ns("click",(function(){Gt(e);const n=t.index;return Vs().onDropDownProfileClick(n)})),Ts(1,"a"),qs(2),Ss(3,ey,2,1,"span",6),Rs(),Rs()}if(2&e){const e=t.$implicit;xs("ngClass",ha(3,ty,e.isDivider)),kr(2),Js(" ",e.text," "),kr(1),xs("ngIf",e.newCount>0)}}const ry=function(e,t){return{"blue darken-2":e,"teal lighten-2":t}},iy=function(e,t){return{orange:e,"teal accent-4":t}};let sy=(()=>{class e{constructor(e,t,n,r,i,s,o,a,c){this.router=e,this.principalService=t,this.tokenService=n,this.notificationService=r,this.eventService=o,this.settingsService=a,this.changeDetector=c,this.isActive=!0,this.title="Home",this.orgaName="",this.usersDisplayName="",this.useMyColors=!0,this.dropDownItems=[],this.countOfNewBadgeItems=0,this.dropdownLogoutId=9999,i.assureServiceIsCreated(),i.setOrgaServiceHelper(s)}ngOnInit(){this.settingsService.setTitle("Home"),this.eventService.refreshMainView.pipe(Cg(()=>this.isActive)).subscribe(e=>this._onMainViewChanged(e)),this.initMembers()}_fakeLogin(){this.principalService.setPrincipal({account:{id:12,name:"Klaus langer name",email:"mail.de"},authType:sg.OrgaUser,orgaUser:{id:300,name:"Klaus Orga auch lang"},organization:{id:12,name:"Kanzlei Orga noch l\xe4nger"}})}ngOnDestroy(){this.isActive=!1}_onMainViewChanged(e){e.titleOnly?this.title=this.settingsService.getTitle():this.initMembers()}initMembers(){this.title=this.settingsService.getTitle(),this.changeDetector.detectChanges(),this.countOfNewBadgeItems=0,this.principalService.isLoggedIn?(this.orgaName=this.principalService.getOrgaName(),this.usersDisplayName=this.principalService.getUsersDisplayName(),this.countOfNewBadgeItems=this.notificationService.getNumberOfNotificationsForCurrentPrincipal()):(this.orgaName="",this.usersDisplayName=""),this.useMyColors=!this.settingsService.useGreenLikeColors(),this.dropDownItems=[],this.principalService.isLoggedIn&&(this.dropDownItems.push({id:1,link:"/iam/user-info",text:"User-Infos"},{isDivider:!0}),this.countOfNewBadgeItems>0&&this.dropDownItems.push({id:10,link:"/notification-view",text:"Nachrichten f\xfcr dich",newCount:this.countOfNewBadgeItems},{isDivider:!0}),this.dropDownItems.push({id:20,link:"/iam/credentials-management",text:"zu deinen Zugangsmedien"},{id:30,link:"/iam/organization-management",text:"zu deinen Mitgliedschaften"},{id:40,link:"/iam/organization-administration",text:"zur Organisations-Administration"},{id:45,link:"/iam/central-administration",text:"zur zentralen Rechte-Administration"},{isDivider:!0},{id:50,link:"/folderApp/main",text:"zur Ordner-App"},{id:60,link:"/folderApp/admin",text:"zur Ordner-Administration"},{isDivider:!0},{id:70,link:"/iam/login",text:"anders anmelden"},{id:this.dropdownLogoutId,text:"abmelden"}))}onProfileClick(){this.principalService.isLoggedIn||this.router.navigateByUrl("/iam/login")}onDropDownProfileClick(e){const t=this.dropDownItems[e];if(t.id===this.dropdownLogoutId)return this.tokenService.logout(),void this.router.navigateByUrl("/");t.link&&this.router.navigateByUrl(t.link)}}return e.\u0275fac=function(t){return new(t||e)(As(Mh),As(ug),As(dm),As(Zf),As(xg),As(jg),As(cg),As(lg),As(Wi))},e.\u0275cmp=dt({type:e,selectors:[["app-root"]],decls:33,vars:14,consts:[[1,"nav-extended",3,"ngClass"],["data-test-id","header-title","routerLink","","title","zur\xfcck zur Startseite...",1,"header-text-left","ml-3"],[1,"right"],["class","header-text ml-3 p-1",4,"ngIf"],["data-target","dd-profile",1,"dropdown-trigger","header-text","valign-wrapper","m-3",3,"click"],["data-test-id","user-display-name"],["class","new badge red","data-badge-caption","",4,"ngIf"],["class","material-icons right",4,"ngIf"],[1,"nav-content"],["id","dd-profile",1,"dropdown-content","vertical-tabs"],["style","font-weight: 450; color: black !important",3,"ngClass","click",4,"ngFor","ngForOf"],["id","index-banner",1,"section","no-pad-bot"],[1,"container"],[1,"page-footer",3,"ngClass"],[1,"row"],[1,"col","m7","push-m1","s6"],[1,"col","m2","push-m2","s3"],["routerLink","/iam/settings",1,"white-text","mr-1"],[1,"material-icons"],["routerLink","/help",1,"white-text"],[1,"header-text","ml-3","p-1"],["data-badge-caption","",1,"new","badge","red"],[1,"material-icons","right"],[2,"font-weight","450","color","black !important",3,"ngClass","click"]],template:function(e,t){1&e&&(Ts(0,"nav",0),Ts(1,"ul"),Ts(2,"li"),Ts(3,"a",1),qs(4),Rs(),Rs(),Ts(5,"div",2),Ts(6,"li"),Ss(7,Qv,2,1,"span",3),Rs(),Ts(8,"li"),Ts(9,"a",4),Ns("click",(function(){return t.onProfileClick()})),Ts(10,"span",5),qs(11),Rs(),Ss(12,Xv,2,1,"span",6),Ss(13,Yv,2,0,"i",7),Rs(),Rs(),Rs(),Rs(),Ts(14,"div",8),Ts(15,"ul",9),Ss(16,ny,4,5,"li",10),Rs(),Rs(),Rs(),Ts(17,"main"),Ts(18,"div",11),Ts(19,"div",12),Es(20,"router-outlet"),Rs(),Rs(),Rs(),Ts(21,"footer",13),Ts(22,"div",14),Ts(23,"div",15),Ts(24,"span"),qs(25,"Made by Klaus Hetzelein (c) 2019 - 2021"),Rs(),Rs(),Ts(26,"div",16),Ts(27,"a",17),Ts(28,"i",18),qs(29,"settings_applications"),Rs(),Rs(),Ts(30,"a",19),Ts(31,"i",18),qs(32,"help_outline"),Rs(),Rs(),Rs(),Rs(),Rs()),2&e&&(xs("ngClass",ga(8,ry,t.useMyColors,!t.useMyColors)),kr(4),Zs(t.title),kr(3),xs("ngIf",t.orgaName.length>0),kr(4),Zs(t.usersDisplayName),kr(1),xs("ngIf",t.countOfNewBadgeItems>0),kr(1),xs("ngIf",t.usersDisplayName.length>0),kr(3),xs("ngForOf",t.dropDownItems),kr(5),xs("ngClass",ga(11,iy,t.useMyColors,!t.useMyColors)))},directives:[Lc,Fh,Bc,zc,Vh],styles:[".header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.5rem}.header-text[_ngcontent-%COMP%]{font-style:italic}.vertical-tabs[_ngcontent-%COMP%]{border-left:3px solid #1976d2!important;padding:0!important}.vertical-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important}.divider[_ngcontent-%COMP%]{border-bottom:2px solid #1976d2}.badge[_ngcontent-%COMP%]{margin-left:1rem}span.badge.new[_ngcontent-%COMP%]{font-weight:500!important;font-size:1rem!important;color:#fff!important}body[_ngcontent-%COMP%]{font-family:Roboto,Arial,sans-serif;margin:0;width:-webkit-max-content;width:-moz-max-content;width:max-content}@media screen and (max-width:540px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:42px}i.material-icons[_ngcontent-%COMP%]{line-height:42px;height:42px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.2rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}@media screen and (max-width:360px){nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:32px}i.material-icons[_ngcontent-%COMP%]{line-height:32px;height:32px}.header-text[_ngcontent-%COMP%], .header-text-left[_ngcontent-%COMP%]{font-size:1.1rem}.header-text[_ngcontent-%COMP%]{font-style:italic}}"]}),e})();class oy{}class ay{}class cy{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof cy?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new cy;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof cy?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ly{encodeKey(e){return uy(e)}encodeValue(e){return uy(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function uy(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class dy{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ly,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.split("&").forEach(e=>{const r=e.indexOf("="),[i,s]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new dy({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function hy(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function gy(e){return"undefined"!=typeof Blob&&e instanceof Blob}function py(e){return"undefined"!=typeof FormData&&e instanceof FormData}class fy{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new cy),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new dy,this.urlWithParams=t}serializeBody(){return null===this.body?null:hy(this.body)||gy(this.body)||py(this.body)||"string"==typeof this.body?this.body:this.body instanceof dy?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||py(this.body)?null:gy(this.body)?this.body.type||null:hy(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dy?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new fy(t,n,i,{params:c,headers:a,reportProgress:o,responseType:r,withCredentials:s})}}const my=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class vy{constructor(e,t=200,n="OK"){this.headers=e.headers||new cy,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class yy extends vy{constructor(e={}){super(e),this.type=my.ResponseHeader}clone(e={}){return new yy({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class by extends vy{constructor(e={}){super(e),this.type=my.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new by({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _y extends vy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function wy(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Oy=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof fy)r=e;else{let i=void 0;i=n.headers instanceof cy?n.headers:new cy(n.headers);let s=void 0;n.params&&(s=n.params instanceof dy?n.params:new dy({fromObject:n.params})),r=new fy(e,t,void 0!==n.body?n.body:null,{headers:i,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Cl(r).pipe(hu(e=>this.handler.handle(e)));if(e instanceof fy||"events"===n.observe)return i;const s=i.pipe(Fl(e=>e instanceof by));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(L(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(L(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(L(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(L(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new dy).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,wy(n,t))}post(e,t,n={}){return this.request("POST",e,wy(n,t))}put(e,t,n={}){return this.request("PUT",e,wy(n,t))}}return e.\u0275fac=function(t){return new(t||e)(qe(oy))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class Iy{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Sy=new Le("HTTP_INTERCEPTORS");let Cy=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Ay=/^\)\]\}',?\n/;class ky{}let xy=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Py=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new _(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",s=new cy(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new yy({headers:s,status:t,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),c=null;204!==i&&(c=void 0===n.response?n.responseText:n.response),0===i&&(i=c?200:0);let l=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(Ay,"");try{c=""!==c?JSON.parse(c):null}catch(u){c=e,l&&(l=!1,c={error:u,text:c})}}l?(t.next(new by({body:c,headers:r,status:i,statusText:o,url:a||void 0})),t.complete()):t.error(new _y({error:c,headers:r,status:i,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=s(),i=new _y({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let c=!1;const l=r=>{c||(t.next(s()),c=!0);let i={type:my.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},u=e=>{let n={type:my.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),e.reportProgress&&(n.addEventListener("progress",l),null!==r&&n.upload&&n.upload.addEventListener("progress",u)),n.send(r),t.next({type:my.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",o),e.reportProgress&&(n.removeEventListener("progress",l),null!==r&&n.upload&&n.upload.removeEventListener("progress",u)),n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(qe(ky))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Ty=new Le("XSRF_COOKIE_NAME"),Ry=new Le("XSRF_HEADER_NAME");class Ey{}let Uy=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Dc(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(qe(mc),qe(Oa),qe(Ty))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),My=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(qe(Ey),qe(Ry))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Fy=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(Sy,[]);this.chain=e.reduceRight((e,t)=>new Iy(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(qe(ay),qe(ls))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Ny=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:My,useClass:Cy}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:Ty,useValue:t.cookieName}:[],t.headerName?{provide:Ry,useValue:t.headerName}:[]]}}}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[My,{provide:Sy,useExisting:My,multi:!0},{provide:Ey,useClass:Uy},{provide:Ty,useValue:"XSRF-TOKEN"},{provide:Ry,useValue:"X-XSRF-TOKEN"}]}),e})(),Dy=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[Oy,{provide:oy,useClass:Fy},Py,{provide:ay,useExisting:Py},xy,{provide:ky,useExisting:xy}],imports:[[Ny.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();const Ly=new Km([{id:Qm.PROVIDER_ID,provider:new Qm("239975901698-c4lmv7l5ku13p51014vtr4af014ejacc.apps.googleusercontent.com")}]);function Vy(){return Ly}let zy=(()=>{class e{}return e.\u0275mod=ft({type:e,bootstrap:[sy]}),e.\u0275inj=de({factory:function(t){return new(t||e)},providers:[{provide:Km,useFactory:Vy}],imports:[[wl,Jv,cf,Dy,Zm]]}),e})();(function(){if(rr)throw new Error("Cannot enable prod mode after platform setup.");nr=!1})(),bl().bootstrapModule(zy).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);